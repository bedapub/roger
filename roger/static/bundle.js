!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/static",n(n.s=137)}([function(e,t,n){"use strict";e.exports=n(138)},function(e,t,n){"use strict";n.r(t),n.d(t,"PluginHost",function(){return k}),n.d(t,"Plugin",function(){return C}),n.d(t,"Action",function(){return P}),n.d(t,"Getter",function(){return L}),n.d(t,"Template",function(){return I}),n.d(t,"TemplatePlaceholder",function(){return w}),n.d(t,"TemplateConnector",function(){return z}),n.d(t,"Draggable",function(){return W}),n.d(t,"DragDropProvider",function(){return Y}),n.d(t,"DragSource",function(){return X}),n.d(t,"DropTarget",function(){return $}),n.d(t,"Sizer",function(){return re}),n.d(t,"RefHolder",function(){return K}),n.d(t,"connectProps",function(){return ae}),n.d(t,"createStateHelper",function(){return ie}),n.d(t,"withComponents",function(){return oe});var r=n(0),a=n(2),i=n(21),o=n(17),s="dxcore_pluginHost_context",l="dxcore_position_context",u=Symbol("rerenderTemplate"),c=Symbol("rerenderTemplateScope"),f=Symbol("updateConnection"),d=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},g=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},y=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),b=function(e,t){var n=e.children,a=t[l];return Object(r.createElement)(r.Fragment,null,r.Children.map(n,function(e,t){if(!e||!e.type)return e;return Object(r.createElement)(_,{position:function(){var e=a&&a()||[];return[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e),[t])}},e)}))};b.defaultProps={children:void 0},b.contextTypes=h({},l,a.func);var x,_=function(e){function t(){return d(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,e),p(t,[{key:"getChildContext",value:function(){var e=this.props.position;return h({},l,e)}},{key:"render",value:function(){return this.props.children}}]),t}(r.Component);_.childContextTypes=h({},l,a.func);var w=function(e){function t(e,n){var r;d(this,t);var a=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),i=a.props.name;return a.subscription=(h(r={},u,function(e){a.template&&a.template.id===e&&a.forceUpdate()}),h(r,c,function(e){i===e&&a.forceUpdate()}),r),a}return v(t,e),p(t,[{key:"getChildContext",value:function(){var e=this;return h({},"dxcore_templateHost_context",{templates:function(){return e.restTemplates},params:function(){return e.params}})}},{key:"componentDidMount",value:function(){this.context[s].registerSubscription(this.subscription)}},{key:"shouldComponentUpdate",value:function(e){var t=this.getRenderingData(e).params,n=this.props.children;return!Object(i.shallowEqual)(t,this.params)||n!==e.children}},{key:"componentWillUnmount",value:function(){this.context[s].unregisterSubscription(this.subscription)}},{key:"getRenderingData",value:function(e){var t=e.name,n=e.params;if(t){var r=this.context[s];return{params:n,templates:r.collect(t+"Template").filter(function(e){return e.predicate(n)}).reverse()}}var a=this.context.dxcore_templateHost_context;return{params:n||a.params(),templates:a.templates()}}},{key:"render",value:function(){var e=this.getRenderingData(this.props),t=e.params,n=e.templates;this.params=t;var r=y(n,1);this.template=r[0],this.restTemplates=n.slice(1);var a=null;this.template&&((a=(0,this.template.children)()||null)&&"function"==typeof a&&(a=a(t)));var i=this.props.children;return i?i(a):a}}]),t}(r.Component);w.defaultProps={name:void 0,params:void 0,children:void 0},w.contextTypes=(h(x={},"dxcore_templateHost_context",a.object),h(x,s,a.object.isRequired),x),w.childContextTypes=h({},"dxcore_templateHost_context",a.object.isRequired);var T,k=function(e){function t(e){d(this,t);var n=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.host=new i.PluginHost,n}return v(t,e),p(t,[{key:"getChildContext",value:function(){return h({},s,this.host)}},{key:"render",value:function(){var e=this.props.children;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(b,null,e),Object(r.createElement)(w,{name:"root"}))}}]),t}(r.PureComponent);k.defaultProps={children:void 0},k.childContextTypes=h({},s,a.object.isRequired);var C=function(e){function t(){return d(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,e),p(t,[{key:"componentDidMount",value:function(){var e=this.context,t=e[s],n=e[l],r=this.props,a=r.name,i=r.dependencies;this.plugin={position:n,name:a,dependencies:i,container:!0},t.registerPlugin(this.plugin)}},{key:"componentDidUpdate",value:function(){this.context[s].ensureDependencies()}},{key:"componentWillUnmount",value:function(){this.context[s].unregisterPlugin(this.plugin)}},{key:"render",value:function(){var e=this.props.children;return Object(r.createElement)(b,null,e)}}]),t}(r.PureComponent);C.defaultProps={name:"",dependencies:[]},C.contextTypes=(h(T={},s,a.object.isRequired),h(T,l,a.func.isRequired),T);var E,M,A=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return e.get(t+"Getter")},n={};return{getters:"undefined"!=typeof Proxy?new Proxy({},{get:function(e,r){if("string"==typeof r){var a=t(r);return n[r]=a,a}},getOwnPropertyDescriptor:function(e,t){return{configurable:!0,enumerable:!0,value:this.get(e,t)}},ownKeys:function(){return e.knownKeys("Getter")}}):e.knownKeys("Getter").reduce(function(e,r){return Object.defineProperty(e,r,{get:function(){var e=t(r);return n[r]=e,e}}),e},{}),trackedDependencies:n}},S=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(t){return e.get(t+"Getter")},r=Object.keys(t).reduce(function(e,t){return Object.assign(e,h({},t,n(t)))},{});return!Object(i.shallowEqual)(t,r)},O=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return e.collect(t+"Action").slice().reverse()[0]};return"undefined"!=typeof Proxy?new Proxy({},{get:function(e,n){if("string"==typeof n)return t(n)},getOwnPropertyDescriptor:function(e,t){return{configurable:!0,enumerable:!0,value:this.get(e,t)}},ownKeys:function(){return e.knownKeys("Action")}}):e.knownKeys("Action").reduce(function(e,n){return Object.defineProperty(e,n,{get:function(){return t(n)}}),e},{})},P=function(e){function t(e,n){d(this,t);var r=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),a=n[s],i=n[l],o=e.name;return r.plugin=h({position:function(){return i()}},o+"Action",function(e){var t=e;(0,r.props.action)(e,A(a,function(e){return a.get(e+"Getter",r.plugin)}).getters,O(a,function(e){return e===o?function(e){t=e}:a.collect(e+"Action",r.plugin).slice().reverse()[0]}));var n=a.collect(o+"Action",r.plugin).slice().reverse()[0];n&&n(t)}),a.registerPlugin(r.plugin),r}return v(t,e),p(t,[{key:"componentWillUnmount",value:function(){this.context[s].unregisterPlugin(this.plugin)}},{key:"render",value:function(){return null}}]),t}(r.PureComponent);P.contextTypes=(h(E={},s,a.object.isRequired),h(E,l,a.func.isRequired),E);var R,L=function(e){function t(e,n){d(this,t);var r=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),a=n[s],i=n[l],o=e.name,u=void 0,c={},f=void 0;return r.plugin=h({position:function(){return i()}},o+"Getter",function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){var t=r.props,n=t.value,i=t.computed;if(void 0===i)return n;var s=function(t){return t===o?e:a.get(t+"Getter",r.plugin)};if(i===u&&!S(a,c,s))return f;var l=A(a,s),d=l.getters,p=l.trackedDependencies,h=O(a);return u=i,c=p,f=i(d,h)})),a.registerPlugin(r.plugin),r}return v(t,e),p(t,[{key:"componentDidUpdate",value:function(){this.context[s].broadcast(f)}},{key:"componentWillUnmount",value:function(){this.context[s].unregisterPlugin(this.plugin)}},{key:"render",value:function(){return null}}]),t}(r.PureComponent);L.defaultProps={value:void 0,computed:void 0},L.contextTypes=(h(M={},s,a.object.isRequired),h(M,l,a.func.isRequired),M);var D=0,I=function(e){function t(e,n){d(this,t);var r=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));D+=1,r.id=D;var a=n[s],i=n[l],o=e.name,u=e.predicate;return r.plugin=h({position:function(){return i()}},o+"Template",{id:r.id,predicate:function(e){return!u||u(e)},children:function(){var e=r.props.children;return e}}),a.registerPlugin(r.plugin),a.broadcast(c,o),r}return v(t,e),p(t,[{key:"componentDidUpdate",value:function(){this.context[s].broadcast(u,this.id)}},{key:"componentWillUnmount",value:function(){var e=this.context[s],t=this.props.name;e.unregisterPlugin(this.plugin),e.broadcast(c,t)}},{key:"render",value:function(){return null}}]),t}(r.PureComponent);I.defaultProps={predicate:void 0,children:void 0,position:void 0},I.contextTypes=(h(R={},s,a.object.isRequired),h(R,l,a.func.isRequired),R);var z=function(e){function t(e,n){d(this,t);var r=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.trackedDependencies={},r.subscription=h({},f,function(){return r.updateConnection()}),r}return v(t,e),p(t,[{key:"componentDidMount",value:function(){this.context[s].registerSubscription(this.subscription)}},{key:"componentWillUnmount",value:function(){this.context[s].unregisterSubscription(this.subscription)}},{key:"updateConnection",value:function(){var e=this.context[s];S(e,this.trackedDependencies)&&this.forceUpdate()}},{key:"render",value:function(){var e=this.context[s],t=this.props.children,n=A(e),r=n.getters,a=n.trackedDependencies;return this.trackedDependencies=a,t(r,O(e))}}]),t}(r.Component);z.contextTypes=h({},s,a.object.isRequired);var j=function(){function e(t){d(this,e),this.delegate=t,this.touchStartTimeout=null,this.dragging=!1}return p(e,[{key:"isDragging",value:function(){return this.dragging}},{key:"isWaiting",value:function(){return!!this.touchStartTimeout}},{key:"cancelWaiting",value:function(){clearTimeout(this.touchStartTimeout),this.touchStartTimeout=null}},{key:"start",value:function(e){var t=this,n=e.touches[0],r=n.clientX,a=n.clientY;this.touchStartTimeout=setTimeout(function(){t.delegate.onStart({x:r,y:a}),t.dragging=!0},180)}},{key:"move",value:function(e){if(this.cancelWaiting(),this.dragging){var t=e.touches[0],n=t.clientX,r=t.clientY;e.preventDefault(),this.delegate.onMove({x:n,y:r})}}},{key:"end",value:function(e){if(this.cancelWaiting(),this.dragging){var t=e.changedTouches[0],n=t.clientX,r=t.clientY;this.delegate.onEnd({x:n,y:r})}this.mouseInitialOffset=null,this.dragging=!1}}]),e}(),N=null,F=function(e,t){var n={pointerEvents:e?"all":"none"};e&&t&&(n=m({},n,{cursor:t})),N||(n=m({},n,{position:"fixed",top:0,right:0,left:0,bottom:0,opacity:0,zIndex:2147483647}),N=document.createElement("div"),document.body.appendChild(N)),Object.keys(n).forEach(function(e){N.style[e]=n[e]})},B=function(e,t,n){return Math.max(Math.min(e,n),t)},V=function(){function e(t){d(this,e),this.delegate=t,this.mouseInitialOffset=null,this.dragging=!1}return p(e,[{key:"isDragging",value:function(){return this.dragging}},{key:"start",value:function(e){var t=e.clientX,n=e.clientY;this.e=e,this.mouseInitialOffset={x:t,y:n}}},{key:"move",value:function(e){var t=e.clientX,n=e.clientY,r=!1;if(!this.dragging&&this.mouseInitialOffset&&function(e,t){var n=e.x,r=e.y,a=t.x,i=t.y;return B(a,n-10,n+10)!==a||B(i,r-10,r+10)!==i}(this.mouseInitialOffset,{x:t,y:n})&&(this.delegate.onStart(this.mouseInitialOffset),window.getSelection&&window.getSelection().removeAllRanges(),r=!0,this.dragging=!0),this.dragging&&(e.preventDefault(),this.delegate.onMove({x:t,y:n})),r){var a=window.getComputedStyle(document.elementFromPoint(t,n)).cursor;F(!0,a)}}},{key:"end",value:function(e){if(this.dragging){var t=e.clientX,n=e.clientY;F(!1),this.delegate.onEnd({x:t,y:n})}this.mouseInitialOffset=null,this.dragging=!1}}]),e}(),U=null,G=function(){return U||(U=new i.EventEmitter,["mousemove","mouseup","touchmove","touchend","touchcancel"].forEach(function(e){return window.addEventListener(e,function(t){return U.emit([e,t])},{passive:!1})})),U},H=Symbol("draggingHandled"),W=function(e){function t(e,n){d(this,t);var r=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),a={onStart:function(e){var t=e.x,n=e.y,a=r.props.onStart;a&&Object(o.unstable_batchedUpdates)(function(){a({x:t,y:n})})},onMove:function(e){var t=e.x,n=e.y,a=r.props.onUpdate;a&&Object(o.unstable_batchedUpdates)(function(){a({x:t,y:n})})},onEnd:function(e){var t=e.x,n=e.y,a=r.props.onEnd;a&&Object(o.unstable_batchedUpdates)(function(){a({x:t,y:n})})}};return r.mouseStrategy=new V(a),r.touchStrategy=new j(a),r.mouseDownListener=r.mouseDownListener.bind(r),r.touchStartListener=r.touchStartListener.bind(r),r.globalListener=r.globalListener.bind(r),r}return v(t,e),p(t,[{key:"componentDidMount",value:function(){G().subscribe(this.globalListener),this.setupNodeSubscription()}},{key:"shouldComponentUpdate",value:function(e){var t=this.props.children;return e.children!==t}},{key:"componentDidUpdate",value:function(){this.setupNodeSubscription()}},{key:"componentWillUnmount",value:function(){G().unsubscribe(this.globalListener)}},{key:"setupNodeSubscription",value:function(){var e=Object(o.findDOMNode)(this);e&&(e.removeEventListener("mousedown",this.mouseDownListener),e.removeEventListener("touchstart",this.touchStartListener),e.addEventListener("mousedown",this.mouseDownListener,{passive:!0}),e.addEventListener("touchstart",this.touchStartListener,{passive:!0}))}},{key:"mouseDownListener",value:function(e){this.touchStrategy.isWaiting()||e[H]||(this.mouseStrategy.start(e),e[H]=!0)}},{key:"touchStartListener",value:function(e){e[H]||(this.touchStrategy.start(e),e[H]=!0)}},{key:"globalListener",value:function(e){var t=y(e,2),n=t[0],r=t[1];switch(n){case"mousemove":this.mouseStrategy.move(r);break;case"mouseup":this.mouseStrategy.end(r);break;case"touchmove":this.touchStrategy.move(r);break;case"touchend":case"touchcancel":this.touchStrategy.end(r)}(this.mouseStrategy.isDragging()||this.touchStrategy.isDragging())&&(window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty())}},{key:"render",value:function(){return this.props.children}}]),t}(r.Component);W.defaultProps={onStart:void 0,onUpdate:void 0,onEnd:void 0};var q=function(){function e(){d(this,e),this.payload=null,this.dragEmitter=new i.EventEmitter}return p(e,[{key:"start",value:function(e,t){this.payload=e,this.dragEmitter.emit({payload:this.payload,clientOffset:t})}},{key:"update",value:function(e){this.dragEmitter.emit({payload:this.payload,clientOffset:e})}},{key:"end",value:function(e){this.dragEmitter.emit({payload:this.payload,clientOffset:e,end:!0}),this.payload=null}}]),e}(),Y=function(e){function t(e){d(this,t);var n=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=n.props.onChange;return n.dragDropProvider=new q,n.dragDropProvider.dragEmitter.subscribe(function(e){var t=e.payload,n=e.clientOffset,a=e.end;r({payload:a?null:t,clientOffset:a?null:n})}),n}return v(t,e),p(t,[{key:"getChildContext",value:function(){return{dragDropProvider:this.dragDropProvider}}},{key:"shouldComponentUpdate",value:function(e){var t=this.props.children;return e.children!==t}},{key:"render",value:function(){return this.props.children}}]),t}(r.Component);Y.childContextTypes={dragDropProvider:a.object.isRequired},Y.defaultProps={onChange:function(){}};var X=function(e){function t(){return d(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,e),p(t,[{key:"shouldComponentUpdate",value:function(e){var t=this.props.children;return e.children!==t}},{key:"render",value:function(){var e=this.context.dragDropProvider,t=this.props,n=t.onStart,a=t.onUpdate,i=t.onEnd,o=t.payload,s=t.children;return Object(r.createElement)(W,{onStart:function(t){var r=t.x,a=t.y;e.start(o,{x:r,y:a}),n({clientOffset:{x:r,y:a}})},onUpdate:function(t){var n=t.x,r=t.y;e.update({x:n,y:r}),a({clientOffset:{x:n,y:r}})},onEnd:function(t){var n=t.x,r=t.y;e.end({x:n,y:r}),i({clientOffset:{x:n,y:r}})}},s)}}]),t}(r.Component);X.contextTypes={dragDropProvider:a.object.isRequired},X.defaultProps={onStart:function(){},onUpdate:function(){},onEnd:function(){}};var Z=function(e,t,n){return Math.max(Math.min(e,n),t)},$=function(e){function t(e,n){d(this,t);var r=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.node=null,r.isOver=!1,r.handleDrag=r.handleDrag.bind(r),r}return v(t,e),p(t,[{key:"componentDidMount",value:function(){this.context.dragDropProvider.dragEmitter.subscribe(this.handleDrag)}},{key:"shouldComponentUpdate",value:function(e){var t=this.props.children;return e.children!==t}},{key:"componentWillUnmount",value:function(){this.context.dragDropProvider.dragEmitter.unsubscribe(this.handleDrag)}},{key:"handleDrag",value:function(e){var t=e.payload,n=e.clientOffset,r=e.end,a=Object(o.findDOMNode)(this).getBoundingClientRect(),i=a.left,s=a.top,l=a.right,u=a.bottom,c=this.props,f=c.onDrop,d=c.onEnter,p=c.onLeave,h=c.onOver,m=n&&Z(n.x,i,l)===n.x&&Z(n.y,s,u)===n.y;!this.isOver&&m&&d({payload:t,clientOffset:n}),this.isOver&&m&&h({payload:t,clientOffset:n}),this.isOver&&!m&&p({payload:t,clientOffset:n}),m&&r&&f({payload:t,clientOffset:n}),this.isOver=m&&!r}},{key:"render",value:function(){var e=this.props.children;return r.Children.only(e)}}]),t}(r.Component);$.contextTypes={dragDropProvider:a.object.isRequired},$.defaultProps={onEnter:function(){},onOver:function(){},onLeave:function(){},onDrop:function(){}};var K=function(e){function t(){return d(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,e),p(t,[{key:"render",value:function(){return this.props.children}}]),t}(r.PureComponent),J={position:"relative"},Q={position:"absolute",top:0,left:0,height:"100%",width:"100%",overflow:"hidden",zIndex:-1,visibility:"hidden",opacity:0},ee={position:"absolute",top:0,left:0,height:"100%",width:"100%",overflow:"auto"},te={position:"absolute",top:0,left:0,height:"100%",width:"100%",overflow:"auto",minHeight:"1px",minWidth:"1px"},ne={position:"absolute",top:0,left:0,width:"200%",height:"200%"},re=function(e){function t(){d(this,t);var e=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.setupListeners=e.setupListeners.bind(e),e}return v(t,e),p(t,[{key:"componentDidMount",value:function(){this.createListeners(),this.setupListeners()}},{key:"setupListeners",value:function(){var e=Object(o.findDOMNode)(this.root),t={height:e.clientHeight,width:e.clientWidth};this.contractTrigger.scrollTop=t.height,this.contractTrigger.scrollLeft=t.width,this.expandNotifier.style.width=t.width+1+"px",this.expandNotifier.style.height=t.height+1+"px",this.expandTrigger.scrollTop=1,this.expandTrigger.scrollLeft=1,(0,this.props.onSizeChange)(t)}},{key:"createListeners",value:function(){var e=Object(o.findDOMNode)(this.root);this.triggersRoot=document.createElement("div"),Object.assign(this.triggersRoot.style,Q),e.appendChild(this.triggersRoot),this.expandTrigger=document.createElement("div"),Object.assign(this.expandTrigger.style,ee),this.expandTrigger.addEventListener("scroll",this.setupListeners),this.triggersRoot.appendChild(this.expandTrigger),this.expandNotifier=document.createElement("div"),this.expandTrigger.appendChild(this.expandNotifier),this.contractTrigger=document.createElement("div"),Object.assign(this.contractTrigger.style,te),this.contractTrigger.addEventListener("scroll",this.setupListeners),this.triggersRoot.appendChild(this.contractTrigger),this.contractNotifier=document.createElement("div"),Object.assign(this.contractNotifier.style,ne),this.contractTrigger.appendChild(this.contractNotifier)}},{key:"render",value:function(){var e=this,t=this.props,n=(t.onSizeChange,t.containerComponent),a=t.style,i=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(t,["onSizeChange","containerComponent","style"]);return Object(r.createElement)(K,{ref:function(t){e.root=t}},Object(r.createElement)(n,m({style:m({},J,a)},i)))}}]),t}(r.PureComponent);re.defaultProps={containerComponent:"div",style:null};var ae=function(e,t){var n=t(),a=new Set,i=function(t){function i(){return d(this,i),g(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return v(i,t),p(i,[{key:"componentDidMount",value:function(){a.add(this)}},{key:"componentWillUnmount",value:function(){a.delete(this)}},{key:"render",value:function(){return Object(r.createElement)(e,m({},this.props,n))}}]),i}(r.PureComponent);return i.update=function(){n=t(),Array.from(a.values()).forEach(function(e){return e.forceUpdate()})},i},ie=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,r=null,a=null,i=function(i,o,s){var l=function e(l){null===r&&(r=l);var u=i(m({},l),o),c=m({},l,u);return"function"==typeof s&&s(c,l),e===n&&(a!==r&&(!function(e,n){Object.keys(t).forEach(function(r){var a=t[r]();a&&e[r]!==n[r]&&a(e[r])})}(c,r),a=r),r=null),u};n=l,e.setState(l)};return{applyReducer:i,applyFieldReducer:function(e,t,n){i(function(r){return h({},e,t(r[e],n))})}}},oe=function(e){return function(t){var n={},a={};return Object.entries(t.components).forEach(function(r){var i=y(r,2),o=i[0],s=i[1],l=e[s];l&&l!==t[s]&&(n[o]=l),a[s]=l||t[s]}),Object.keys(n).length>0?function(e,t,n){var a=function(n){function a(){return d(this,a),g(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return v(a,n),p(a,[{key:"render",value:function(){return Object(r.createElement)(e,m({},t,this.props))}}]),a}(r.PureComponent);return a.components=e.components,Object.assign(a,n),a}(t,n,a):t}}},function(e,t,n){e.exports=n(176)()},function(e,t,n){"use strict";n.r(t),n.d(t,"getColumnExtension",function(){return nn}),n.d(t,"getColumnExtensionValueGetter",function(){return rn}),n.d(t,"getTableColumnGeometries",function(){return Qn}),n.d(t,"getTableTargetColumnIndex",function(){return er}),n.d(t,"getAnimations",function(){return nr}),n.d(t,"filterActiveAnimations",function(){return rr}),n.d(t,"evalAnimations",function(){return ar}),n.d(t,"getGroupCellTargetIndex",function(){return sr}),n.d(t,"getCollapsedGrid",function(){return pr}),n.d(t,"TABLE_STUB_TYPE",function(){return lr}),n.d(t,"rowIdGetter",function(){return a}),n.d(t,"cellValueGetter",function(){return o}),n.d(t,"changeColumnSorting",function(){return s}),n.d(t,"getColumnSortingDirection",function(){return p}),n.d(t,"getPersistentSortedColumns",function(){return h}),n.d(t,"calculateKeepOther",function(){return m}),n.d(t,"sortedRows",function(){return E}),n.d(t,"changeColumnFilter",function(){return M}),n.d(t,"getColumnFilterConfig",function(){return A}),n.d(t,"filterExpression",function(){return S}),n.d(t,"defaultFilterPredicate",function(){return L}),n.d(t,"filteredRows",function(){return z}),n.d(t,"filteredCollapsedRowsGetter",function(){return j}),n.d(t,"unwrappedFilteredRows",function(){return N}),n.d(t,"GROUP_KEY_SEPARATOR",function(){return F}),n.d(t,"changeColumnGrouping",function(){return V}),n.d(t,"toggleExpandedGroups",function(){return U}),n.d(t,"draftColumnGrouping",function(){return G}),n.d(t,"cancelColumnGroupingDraft",function(){return H}),n.d(t,"adjustSortIndex",function(){return W}),n.d(t,"groupRowChecker",function(){return $}),n.d(t,"groupRowLevelKeyGetter",function(){return K}),n.d(t,"groupedRows",function(){return Q}),n.d(t,"expandedGroupRows",function(){return ee}),n.d(t,"groupCollapsedRowsGetter",function(){return te}),n.d(t,"customGroupedRows",function(){return ne}),n.d(t,"customGroupingRowIdGetter",function(){return re}),n.d(t,"groupingPanelItems",function(){return ae}),n.d(t,"setCurrentPage",function(){return ie}),n.d(t,"setPageSize",function(){return oe}),n.d(t,"paginatedRows",function(){return le}),n.d(t,"rowsWithPageHeaders",function(){return ue}),n.d(t,"rowCount",function(){return ce}),n.d(t,"pageCount",function(){return fe}),n.d(t,"currentPage",function(){return de}),n.d(t,"clamp",function(){return se}),n.d(t,"firstRowOnPage",function(){return pe}),n.d(t,"lastRowOnPage",function(){return he}),n.d(t,"calculateStartPage",function(){return me}),n.d(t,"toggleSelection",function(){return ge}),n.d(t,"rowsWithAvailableToSelect",function(){return ye}),n.d(t,"someSelected",function(){return be}),n.d(t,"allSelected",function(){return xe}),n.d(t,"unwrapSelectedRows",function(){return _e}),n.d(t,"startEditRows",function(){return we}),n.d(t,"stopEditRows",function(){return Te}),n.d(t,"addRow",function(){return ke}),n.d(t,"changeAddedRow",function(){return Ce}),n.d(t,"cancelAddedRows",function(){return Ee}),n.d(t,"changeRow",function(){return Me}),n.d(t,"cancelChanges",function(){return Ae}),n.d(t,"deleteRows",function(){return Se}),n.d(t,"cancelDeletedRows",function(){return Oe}),n.d(t,"changedRowsByIds",function(){return Pe}),n.d(t,"addedRowsByIds",function(){return Re}),n.d(t,"createRowChangeGetter",function(){return De}),n.d(t,"getRowChange",function(){return Ie}),n.d(t,"TABLE_REORDERING_TYPE",function(){return ze}),n.d(t,"changeColumnOrder",function(){return je}),n.d(t,"orderedColumns",function(){return Ve}),n.d(t,"tableHeaderRowsWithReordering",function(){return Ue}),n.d(t,"draftOrder",function(){return Ge}),n.d(t,"tableColumnsWithWidths",function(){return qe}),n.d(t,"tableColumnsWithDraftWidths",function(){return Ye}),n.d(t,"changeTableColumnWidth",function(){return Xe}),n.d(t,"draftTableColumnWidth",function(){return Ze}),n.d(t,"cancelTableColumnWidthDraft",function(){return $e}),n.d(t,"TABLE_EDIT_COMMAND_TYPE",function(){return Ke}),n.d(t,"isHeadingEditCommandsTableCell",function(){return tt}),n.d(t,"isEditCommandsTableCell",function(){return nt}),n.d(t,"tableColumnsWithEditing",function(){return rt}),n.d(t,"TABLE_ADDED_TYPE",function(){return Je}),n.d(t,"TABLE_EDIT_TYPE",function(){return Qe}),n.d(t,"isEditTableCell",function(){return at}),n.d(t,"isAddedTableRow",function(){return it}),n.d(t,"isEditTableRow",function(){return ot}),n.d(t,"tableRowsWithEditing",function(){return st}),n.d(t,"TABLE_FILTER_TYPE",function(){return lt}),n.d(t,"DEFAULT_FILTER_OPERATIONS",function(){return ut}),n.d(t,"isFilterTableCell",function(){return ct}),n.d(t,"isFilterTableRow",function(){return ft}),n.d(t,"getColumnFilterOperations",function(){return dt}),n.d(t,"isFilterValueEmpty",function(){return pt}),n.d(t,"getSelectedFilterOperation",function(){return ht}),n.d(t,"tableHeaderRowsWithFilter",function(){return mt}),n.d(t,"TABLE_GROUP_TYPE",function(){return vt}),n.d(t,"isGroupTableCell",function(){return gt}),n.d(t,"isGroupIndentTableCell",function(){return yt}),n.d(t,"isGroupTableRow",function(){return bt}),n.d(t,"tableColumnsWithGrouping",function(){return xt}),n.d(t,"tableRowsWithGrouping",function(){return _t}),n.d(t,"tableGroupCellColSpanGetter",function(){return wt}),n.d(t,"TABLE_HEADING_TYPE",function(){return et}),n.d(t,"isHeadingTableCell",function(){return Tt}),n.d(t,"isHeadingTableRow",function(){return kt}),n.d(t,"tableRowsWithHeading",function(){return Ct}),n.d(t,"TABLE_BAND_TYPE",function(){return Et}),n.d(t,"BAND_GROUP_CELL",function(){return Mt}),n.d(t,"BAND_HEADER_CELL",function(){return At}),n.d(t,"BAND_EMPTY_CELL",function(){return St}),n.d(t,"BAND_DUPLICATE_RENDER",function(){return Ot}),n.d(t,"isBandedTableRow",function(){return Pt}),n.d(t,"isBandedOrHeaderRow",function(){return Rt}),n.d(t,"isNoDataColumn",function(){return Lt}),n.d(t,"getColumnMeta",function(){return Dt}),n.d(t,"getColSpan",function(){return It}),n.d(t,"getBandComponent",function(){return zt}),n.d(t,"tableRowsWithBands",function(){return jt}),n.d(t,"toggleDetailRowExpanded",function(){return Nt}),n.d(t,"TABLE_DETAIL_TYPE",function(){return Ft}),n.d(t,"isDetailRowExpanded",function(){return Bt}),n.d(t,"isDetailToggleTableCell",function(){return Vt}),n.d(t,"isDetailTableRow",function(){return Ut}),n.d(t,"isDetailTableCell",function(){return Gt}),n.d(t,"tableRowsWithExpandedDetail",function(){return Ht}),n.d(t,"tableColumnsWithDetail",function(){return Wt}),n.d(t,"tableDetailCellColSpanGetter",function(){return qt}),n.d(t,"TABLE_SELECT_TYPE",function(){return Yt}),n.d(t,"isSelectTableCell",function(){return Xt}),n.d(t,"isSelectAllTableCell",function(){return Zt}),n.d(t,"tableColumnsWithSelection",function(){return $t}),n.d(t,"TABLE_DATA_TYPE",function(){return Ne}),n.d(t,"TABLE_NODATA_TYPE",function(){return Fe}),n.d(t,"TABLE_FLEX_TYPE",function(){return Be}),n.d(t,"isDataTableCell",function(){return Kt}),n.d(t,"isHeaderStubTableCell",function(){return Jt}),n.d(t,"isDataTableRow",function(){return Qt}),n.d(t,"isNoDataTableRow",function(){return en}),n.d(t,"isNoDataTableCell",function(){return tn}),n.d(t,"tableColumnsWithDataRows",function(){return an}),n.d(t,"tableRowsWithDataRows",function(){return on}),n.d(t,"tableCellColSpanGetter",function(){return sn}),n.d(t,"visibleTableColumns",function(){return ln}),n.d(t,"tableDataColumnsExist",function(){return un}),n.d(t,"columnChooserItems",function(){return cn}),n.d(t,"toggleColumn",function(){return fn}),n.d(t,"toggleRowExpanded",function(){return dn}),n.d(t,"customTreeRowsWithMeta",function(){return hn}),n.d(t,"customTreeRowIdGetter",function(){return mn}),n.d(t,"customTreeRowLevelKeyGetter",function(){return vn}),n.d(t,"expandedTreeRows",function(){return gn}),n.d(t,"collapsedTreeRowsGetter",function(){return yn}),n.d(t,"isTreeRowLeafGetter",function(){return bn}),n.d(t,"getTreeRowLevelGetter",function(){return xn}),n.d(t,"unwrappedCustomTreeRows",function(){return _n}),n.d(t,"isTreeTableCell",function(){return wn}),n.d(t,"changeSearchValue",function(){return Tn}),n.d(t,"searchFilterExpression",function(){return kn}),n.d(t,"getAvailableFilterOperationsGetter",function(){return Cn}),n.d(t,"FIXED_COLUMN_LEFT_SIDE",function(){return En}),n.d(t,"FIXED_COLUMN_RIGHT_SIDE",function(){return Mn}),n.d(t,"TABLE_FIXED_TYPE",function(){return An}),n.d(t,"getFixedColumnKeys",function(){return Sn}),n.d(t,"isFixedTableRow",function(){return On}),n.d(t,"calculateFixedColumnProps",function(){return Pn}),n.d(t,"tableColumnsWithFixed",function(){return Rn}),n.d(t,"tableHeaderRowsWithFixed",function(){return Ln}),n.d(t,"defaultSummaryCalculator",function(){return In}),n.d(t,"totalSummaryValues",function(){return jn}),n.d(t,"groupSummaryValues",function(){return Nn}),n.d(t,"treeSummaryValues",function(){return Fn}),n.d(t,"tableRowsWithTotalSummaries",function(){return Gn}),n.d(t,"tableRowsWithSummaries",function(){return Hn}),n.d(t,"isTotalSummaryTableCell",function(){return Wn}),n.d(t,"isGroupSummaryTableCell",function(){return qn}),n.d(t,"isTreeSummaryTableCell",function(){return Yn}),n.d(t,"isTotalSummaryTableRow",function(){return Xn}),n.d(t,"isGroupSummaryTableRow",function(){return Zn}),n.d(t,"isTreeSummaryTableRow",function(){return $n}),n.d(t,"getColumnSummaries",function(){return Kn}),n.d(t,"TABLE_TOTAL_SUMMARY_TYPE",function(){return Bn}),n.d(t,"TABLE_GROUP_SUMMARY_TYPE",function(){return Vn}),n.d(t,"TABLE_TREE_SUMMARY_TYPE",function(){return Un});var r=n(21),a=function(e,t){if(!e){var n=new Map(t.map(function(e,t){return[e,t]}));return function(e){return n.get(e)}}return e},i=function(e,t){return e[t]},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=!0,n=arguments[1].reduce(function(e,n){return n.getCellValue&&(t=!1,e[n.name]=n.getCellValue),e},{});return t?e:function(t,r){return n[r]?n[r](t,r):e(t,r)}},s=function(e,t){var n=t.columnName,r=t.direction,a=t.keepOther,i=t.sortIndex,o=e.sorting,s=[];!0===a&&(s=o.slice()),Array.isArray(a)&&(s=o.slice().filter(function(e){return a.indexOf(e.columnName)>-1}));var l=o.findIndex(function(e){return e.columnName===n}),u=o[l],c={columnName:n,direction:r||(u&&"desc"!==u.direction?"desc":"asc")};if(l>-1&&s.splice(l,1),null!==r){var f=l>-1?l:s.length,d=void 0!==i?i:f;s.splice(d,0,c)}return{sorting:s}},l=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},d=function(e){return[].concat(f(new Set(e)))},p=function(e,t){var n=e.filter(function(e){return e.columnName===t})[0];return n?n.direction:null},h=function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).reduce(function(t,n){var r=n.columnName;return!1===n.sortingEnabled&&e.findIndex(function(e){return e.columnName===r})>-1&&t.push(r),t},[])},m=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return n.length?t?Array.isArray(t)?d([].concat(f(t),f(n))):d([].concat(f(e.map(function(e){return e.columnName})),f(n))):n:t},v=function(e,t,n,r,a,i){for(var o=n,s=r+1,l=n;;){if(i(e[o],e[s])<=0){if(t[l++]=e[o++],o>r){do{t[l++]=e[s++]}while(s<=a);break}}else if(t[l++]=e[s++],s>a){do{t[l++]=e[o++]}while(o<=r);break}}},g=function(e,t,n,r,a){if(!(r<n))if(r!==n){var i=Math.floor(n+(r-n)/2);y(e,t,n,i,a),y(e,t,i+1,r,a),v(e,t,n,i,r,a)}else t[n]=e[n]},y=function(e,t,n,r,a){if(!(r<=n)){var i=Math.floor(n+(r-n)/2);g(e,t,n,i,a),g(e,t,i+1,r,a),v(t,e,n,i,r,a)}},b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e,t){return e<t?-1:e>t?1:0},n=e.slice(),r=e.slice();return y(n,r,0,n.length-1,t),n},x=Symbol("node"),_=function(e,t){if(!e.length)return e;var n=[{children:[]}];return e.forEach(function(e){var r=t(e);if(r){var a,i=n.slice(1).findIndex(function(e){return t(e.root)===r})+1;i>0&&n.splice(i,n.length-i);var o=(l(a={},x,!0),l(a,"root",e),l(a,"children",[]),a);n[n.length-1].children.push(o),n.push(o)}else n[n.length-1].children.push(e)}),n[0].children},w=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.length?t.reduce(function(t,r){return r[x]?(t.push(r.root),e(r.children,n)):t.push(r),t},n):t},T=function(e,t){return e===t?0:null===e?void 0===t?-1:1:void 0===e?1:null===t||void 0===t?-1:e<t?-1:1},k=function(e,t,n){return e.slice().reverse().reduce(function(e,r){var a=r.columnName,i="desc"===r.direction,o=t&&t(a)||T;return function(t,r){var s=n(t,a),l=n(r,a),u=o(s,l);return 0!==u?i?-u:u:e(t,r)}},function(){return 0})},C=function(e,t,n){var r=function e(t,n){var r=t.map(function(t){return t[x]?u({},t,{children:e(t.children,n)}):t});return b(r,function(e,t){return n(e[x]?e.root:e,t[x]?t.root:t)})}(_(e,n),t);return w(r)},E=function(e,t,n,r,a,i){if(!t.length||!e.length)return e;if(!i){var o=k(t,r,n);return b(e.slice(),o)}var s=k(t,r,function(e,t){return a&&a(e)?e.groupedBy===t?e.value:void 0:n(e,t)});return C(e,s,i)},M=function(e,t){var n=t.columnName,r=t.config,a=e.findIndex(function(e){return e.columnName===n}),i=e.slice();if(r){var o=u({columnName:n},r);a>-1?i.splice(a,1,o):i.push(o)}else a>-1&&i.splice(a,1);return i},A=function(e,t){if(!e.length)return null;var n=e.filter(function(e){return e.columnName===t})[0];return n||null},S=function(e,t){var n={operator:"and",filters:e};return t?{operator:"and",filters:[t,n]}:n},O={or:function(e){return function(t){return e.reduce(function(e,n){return e||n(t)},!1)}},and:function(e){return function(t){return e.reduce(function(e,n){return e&&n(t)},!0)}}},P=function(e){return String(e).toLowerCase()},R={contains:function(e,t){return P(e).indexOf(P(t.value))>-1},notContains:function(e,t){return-1===P(e).indexOf(P(t.value))},startsWith:function(e,t){return P(e).startsWith(P(t.value))},endsWith:function(e,t){return P(e).endsWith(P(t.value))},equal:function(e,t){return e===t.value},notEqual:function(e,t){return e!==t.value},greaterThan:function(e,t){return e>t.value},greaterThanOrEqual:function(e,t){return e>=t.value},lessThan:function(e,t){return e<t.value},lessThanOrEqual:function(e,t){return e<=t.value}},L=function(e,t){var n=t.operation||"contains";return R[n](e,t)},D=function(e,t,n,r){var a=[],i=function e(t,n){return t.reduce(function(t,r){if(r[x]){var a=e(r.children,n);return a.length>0?(t.push(u({},r,{children:a})),t):n(r.root,!0)?(t.push(r.root),t):t}return n(r)?(t.push(r),t):t},[])}(_(e,n),function(e,n){if(n){var i=r&&r(e);if(i&&i.length){var o=i.filter(t);return a.push([e,o]),!!o.length||t(e)}return!!t(e)&&(a.push([e,[]]),!0)}return t(e)});return{rows:w(i),collapsedRowsMeta:new Map(a)}},I=function(e,t,n){var r=function(e){var t=O[P(e.operator)];return t&&t(e.filters.map(a))},a=function(e){return r(e)||function(e){var r=e.columnName,a=n&&n(r)||L;return function(n){return a(t(n,r),e,n)}}(e)};return a(e)},z=function(e,t,n,r,a,i){if(!(t&&Object.keys(t).length&&e.length))return{rows:e};var o=I(t,n,r);return a?D(e,o,a,i):{rows:e.filter(o)}},j=function(e){var t=e.collapsedRowsMeta;return function(e){return t&&t.get(e)}},N=function(e){return e.rows},F="|",B=function(e,t){var n=t.columnName,r=t.groupIndex,a=e.slice(),i=a.findIndex(function(e){return e.columnName===n}),o=r;return i>-1?a.splice(i,1):void 0===r&&(o=a.length),o>-1&&a.splice(o,0,{columnName:n}),a},V=function(e,t){var n=e.grouping,r=e.expandedGroups,a=t.columnName,i=t.groupIndex,o=B(n,{columnName:a,groupIndex:i}),s=n.findIndex(function(e,t){return!o[t]||e.columnName!==o[t].columnName});if(-1===s)return{grouping:o};var l=r.filter(function(e){return e.split(F).length<=s});return l.length===r.length?{grouping:o}:{grouping:o,expandedGroups:l}},U=function(e,t){var n=t.groupKey,r=e.expandedGroups.slice(),a=r.indexOf(n);return a>-1?r.splice(a,1):r.push(n),{expandedGroups:r}},G=function(e,t){var n=e.grouping,r=e.draftGrouping,a=t.columnName,i=t.groupIndex;return{draftGrouping:B(r||n,{columnName:a,groupIndex:i})}},H=function(){return{draftGrouping:null}},W=function(e,t,n){return Math.max(t.slice(0,e).reduce(function(e,t){return-1===n.findIndex(function(e){return e.columnName===t.columnName})?e-1:e},e),0)},q=Symbol("group"),Y=Symbol(q.toString()+"_check"),X=Symbol(q.toString()+"_levelKey"),Z=Symbol(q.toString()+"_collapsedRows"),$=function(e){return e[Y]},K=function(e){return e?e[X]:void 0},J=function(e){return{key:String(e),value:e}},Q=function e(t,n,r,a){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(!n.length)return t;var o=n[0].columnName,s=a&&a(o)||J,u=t.reduce(function(e,t){var n=s(r(t,o),t),a=n.key,i=n.value,l=void 0===i?a:i,u=e.get(a);return u?u[2].push(t):e.set(a,[l,a,[t]]),e},new Map),d=n[0].columnName,p=n.slice(1);return[].concat(f(u.values())).reduce(function(t,n){var o,s=c(n,3),u=s[0],h=s[1],m=s[2],v=""+i+h;return t.push((l(o={},Y,!0),l(o,X,q.toString()+"_"+d),l(o,"groupedBy",d),l(o,"compoundKey",v),l(o,"key",h),l(o,"value",u),o)),t.push.apply(t,f(e(m,p,r,a,""+v+F))),t},[])},ee=function(e,t,n){if(!t.length)return e;var r=t.map(function(e){return e.columnName}),a=new Set(n),i=!0,o=0;return e.reduce(function(e,t){if(!t[Y])return i?e.push(t):e[e.length-1][Z].push(t),e;var n=r.indexOf(t.groupedBy);return n>o&&!i?e:(i=a.has(t.compoundKey),o=n,i?e.push(t):e.push(u({},t,l({},Z,[]))),e)},[])},te=function(e){return function(t){return t[Z]||e&&e(t)}},ne=function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(!t||!t.length)return[];if(!n.length)return t;var o=n[0].columnName,s=n.slice(1);return r(t,n[0],a).reduce(function(t,n){var u,c=n.key,d=n.value,p=void 0===d?c:d,h=n.childRows,m=""+i+c;return t.push((l(u={},Y,!0),l(u,X,q.toString()+"_"+o),l(u,"groupedBy",o),l(u,"compoundKey",m),l(u,"key",c),l(u,"value",p),u)),t.push.apply(t,f(e(h,s,r,a,""+m+F))),t},[])},re=function(e,t){var n=t.find(function(e){return!e[Y]});if(!n||void 0!==e(n))return e;var r=new Map(t.filter(function(e){return!e[Y]}).map(function(e,t){return[e,t]}));return function(e){return r.get(e)}},ae=function(e,t,n){var r=n.map(function(n){var r=n.columnName;return{column:e.find(function(e){return e.name===r}),draft:!t.some(function(e){return e.columnName===r})}});return t.forEach(function(t,a){var i=t.columnName;n.some(function(e){return e.columnName===i})||r.splice(a,0,{column:e.find(function(e){return e.name===i}),draft:!0})}),r},ie=function(e,t){return t},oe=function(e,t){return t},se=function(e,t){return Math.max(Math.min(e,t),0)},le=function(e,t,n){return t?e.slice(t*n,t*(n+1)):e},ue=function(e,t,n){if(!t||!n)return e;for(var r=e.slice(),a=[],i=0,o=function(){var e=r[i],o=n(e);if(o){var s=a.findIndex(function(e){return n(e)===o});if((a=[].concat(f(-1===s?a:a.slice(0,s)),[e])).length>=t)throw new Error("Max row level exceeds the page size. Consider increasing the page size.")}var l=i%t;l<a.length&&e!==a[l]&&(r=[].concat(f(r.slice(0,i)),[a[l]],f(r.slice(i)))),i+=1};r.length>i;)o();return r},ce=function(e){return e.length},fe=function(e,t){return t?Math.ceil(e/t):1},de=function(e,t,n,r){var a=fe(t,n),i=se(e,a-1);return e!==i&&setTimeout(function(){return r(i)}),i},pe=function(e,t,n){return 0===n?0:t?e*t+1:1},he=function(e,t,n){var r=n;if(t){var a=(e+1)*t;r=a>n?n:a}return r},me=function(e,t,n){return Math.max(Math.min(e-Math.floor(t/2,10),n-t+1),1)},ve=function(e,t,n){var r=new Set(t),a=n;void 0===a&&(a=e.filter(function(e){return r.has(e)}).length!==r.size);if(a){var i=new Set(e);return[].concat(f(e),f(t.filter(function(e){return!i.has(e)})))}return e.filter(function(e){return!r.has(e)})},ge=function(e,t){var n=t.rowIds,r=t.state;return ve(e,n,r)},ye=function(e,t,n){var r=e;return n&&(r=r.filter(function(e){return!n(e)})),{rows:e,availableToSelect:r.map(function(e){return t(e)})}},be=function(e,t){var n=e.availableToSelect,r=new Set(t);return 0!==n.length&&0!==r.size&&n.some(function(e){return r.has(e)})&&n.some(function(e){return!r.has(e)})},xe=function(e,t){var n=e.availableToSelect,r=new Set(t);return 0!==r.size&&0!==n.length&&!n.some(function(e){return!r.has(e)})},_e=function(e){return e.rows},we=function(e,t){var n=t.rowIds;return[].concat(f(e),f(n))},Te=function(e,t){var n=t.rowIds,r=new Set(n);return e.filter(function(e){return!r.has(e)})},ke=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{row:{}}).row;return[].concat(f(e),[t])},Ce=function(e,t){var n=t.rowId,r=t.change,a=e.slice();return a[n]=u({},a[n],r),a},Ee=function(e,t){var n=t.rowIds,r=[],a=new Set(n);return e.forEach(function(e,t){a.has(t)||r.push(e)}),r},Me=function(e,t){var n=t.rowId,r=t.change,a=e[n]||{};return u({},e,l({},n,u({},a,r)))},Ae=function(e,t){var n=t.rowIds,r=u({},e);return n.forEach(function(e){delete r[e]}),r},Se=function(e,t){var n=t.rowIds;return[].concat(f(e),f(n))},Oe=function(e,t){var n=t.rowIds,r=new Set(n);return e.filter(function(e){return!r.has(e)})},Pe=function(e,t){var n={};return t.forEach(function(t){n[t]=e[t]}),n},Re=function(e,t){var n=new Set(t),r=[];return e.forEach(function(e,t){n.has(t)&&r.push(e)}),r},Le=function(e,t,n){return l({},n,t)},De=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le,t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).reduce(function(e,t){return t.createRowChange&&(e[t.columnName]=t.createRowChange),e},{});return function(n,r,a){return t[a]?t[a](n,r,a):e(n,r,a)}},Ie=function(e,t){return e[t]||{}},ze=Symbol("reordering"),je=function(e,t){var n=t.sourceColumnName,r=t.targetColumnName,a=e.indexOf(n),i=e.indexOf(r),o=e.slice();return o.splice(a,1),o.splice(i,0,n),o},Ne=Symbol("data"),Fe=Symbol("nodata"),Be=Symbol("flex"),Ve=function(e,t){return b(e,function(e,n){return e.type!==Ne||n.type!==Ne?0:t.indexOf(e.column.name)-t.indexOf(n.column.name)})},Ue=function(e){return[].concat(f(e),[{key:ze.toString(),type:ze,height:0}])},Ge=function(e,t,n){if(-1===t||-1===n||t===n)return e;var r=e.slice(),a=e[t];return r.splice(t,1),r.splice(n,0,a),r},He=['The "$1" column\'s width is not specified.',"The TableColumnResizing plugin requires that all columns have the specified width."].join("\n"),We=function(e,t,n){return t.length?e.reduce(function(e,r){if(r.type===Ne){var a=r.column.name,i=t.find(function(e){return e.columnName===a}),o=i&&i.width;void 0===o?(n(a),e.push(r)):e.push(u({},r,{width:o}))}else e.push(r);return e},[]):e},qe=function(e,t){return We(e,t,function(e){throw new Error(He.replace("$1",e))})},Ye=function(e,t){return We(e,t,function(){})},Xe=function(e,t){var n=t.columnName,r=t.shift,a=t.minColumnWidth,i=e.columnWidths.slice(),o=i.findIndex(function(e){return e.columnName===n}),s=i[o],l=Math.max(a,s.width+r);return i.splice(o,1,{columnName:n,width:l}),{columnWidths:i}},Ze=function(e,t){var n=t.columnName,r=t.shift,a=t.minColumnWidth,i=e.columnWidths.find(function(e){return e.columnName===n}),o=Math.max(a,i.width+r);return{draftColumnWidths:[{columnName:i.columnName,width:o}]}},$e=function(){return{draftColumnWidths:[]}},Ke=Symbol("editCommand"),Je=Symbol("added"),Qe=Symbol("edit"),et=Symbol("heading"),tt=function(e,t){return e.type===et&&t.type===Ke},nt=function(e,t){return(e.type===Ne||e.type===Je||e.type===Qe)&&t.type===Ke},rt=function(e,t){return[{key:Ke.toString(),type:Ke,width:t}].concat(f(e))},at=function(e,t){return(e.type===Je||e.type===Qe)&&t.type===Ne},it=function(e){return e.type===Je},ot=function(e){return e.type===Qe},st=function(e,t,n,r){var a=new Set(t),i=e.map(function(e){return e.type===Ne&&a.has(e.rowId)?u({},e,{type:Qe,height:r}):e}),o=n.map(function(e,t){return{key:Je.toString()+"_"+t,type:Je,rowId:t,height:r,row:e}});return[].concat(f(o.reverse()),f(i))},lt=Symbol("filter"),ut=["contains","notContains","startsWith","endsWith","equal","notEqual"],ct=function(e,t){return e.type===lt&&t.type===Ne},ft=function(e){return e.type===lt},dt=function(e,t){return e&&e(t)||ut},pt=function(e){return void 0===e||!String(e).length},ht=function(e,t,n,r){return e[t]?e[t]:n&&n.operation?n.operation:r[0]},mt=function(e,t){return[].concat(f(e),[{key:lt.toString(),type:lt,height:t}])},vt=Symbol("group"),gt=function(e,t){return e.type===vt&&t.type===vt&&e.row.groupedBy===t.column.name},yt=function(e,t,n){if(e.type!==vt||t.type!==vt)return!1;if(e.row.groupedBy===t.column.name)return!1;var r=n.findIndex(function(t){return t.columnName===e.row.groupedBy});return n.findIndex(function(e){return e.columnName===t.column.name})<r},bt=function(e){return e.type===vt},xt=function(e,t,n,r,a,i){return[].concat(f(n.map(function(t){var n=e.find(function(e){return e.name===t.columnName});return{key:vt.toString()+"_"+n.name,type:vt,column:n,width:a}})),f(function(e,t,n,r){return e.reduce(function(e,a){if(a.type!==Ne)return e.push(a),e;var i=a.column.name,o=t.some(function(e){return e.columnName===i}),s=n.some(function(e){return e.columnName===i});return!o&&!s||r(i)?e.push(a):(!o&&s||o&&!s)&&e.push(u({},a,{draft:!0})),e},[])}(t,n,r,i)))},_t=function(e,t){return e.map(function(e){return e.type===Ne&&t(e.row)?u({},e,{key:vt.toString()+"_"+e.row.compoundKey,type:vt}):e})},wt=function(e){return function(t){var n=t.tableRow,r=t.tableColumns,a=t.tableColumn;return n.type===vt&&a.type===vt&&n.row.groupedBy===a.column.name?r.length-r.indexOf(a):e(t)}},Tt=function(e,t){return e.type===et&&t.type===Ne},kt=function(e){return e.type===et},Ct=function(e){return[{key:et.toString(),type:et}].concat(f(e))},Et=Symbol("band"),Mt="bandGroupCell",At="bandHeaderCell",St="bandEmptyCell",Ot="bandDuplicateRender",Pt=function(e){return e.type===Et},Rt=function(e){return Pt(e)||e.type===et},Lt=function(e){return e!==Ne},Dt=function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;return n.reduce(function(n,o){return o.columnName===t?(n.title=i,n.level=a,n):void 0!==o.children?e(t,o.children,r,a+1,a>r?i:o.title,n):n},o||{level:a,title:i})},It=function(e,t,n,r,a,i){var o=!0;return t.slice(e+1).reduce(function(e,t){if(t.type!==Ne)return e;var s=Dt(t.column.name,n,r);return i&&!t.fixed&&(o=!1),o&&s.title===a?e+1:(o=!1,e)},1)},zt=function(e,t,n,r){var a=e.tableColumn,i=e.tableRow;if(e.rowSpan)return{type:Ot,payload:null};var o=t.filter(function(e){return e.type===Et}).length+1,s=void 0===i.level?o-1:i.level,l=a.type===Ne?Dt(a.column.name,r,s):{level:0,title:""};if(l.level<s)return{type:St,payload:null};var c=n.findIndex(function(e){return e.key===a.key}),f=n[c-1],d=!1;if(c>0&&a.type===Ne&&Lt(f.type)&&(d=!0),l.level===s)return{type:At,payload:u({tableRow:t.find(function(e){return e.type===et}),rowSpan:o-s},d&&{beforeBorder:d})};var p=!!a.fixed;if(c>0&&f.type===Ne){var h=!!f.fixed;if(Dt(f.column.name,r,s).title===l.title&&(!h||h&&p))return{type:null,payload:null}}return{type:Mt,payload:u({colSpan:It(c,n,r,s,l.title,p),value:l.title,column:l},d&&{beforeBorder:d})}},jt=function(e,t,n){var r=n.filter(function(e){return e.type===Ne}),a=Array.from({length:function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return t.reduce(function(t,a){if(void 0!==a.children)return e(a.children,n+1,t);var i=r.findIndex(function(e){return e.column.name===a.columnName})>-1;return n>t.level&&i?(t.level=n,t):t},a||{level:0})}(t,0).level}).map(function(e,t){return{key:Et.toString()+"_"+t,type:Et,level:t}});return[].concat(f(a),f(e))},Nt=function(e,t){var n=t.rowId,r=t.state;return ve(e,[n],r)},Ft=Symbol("detail"),Bt=function(e,t){return e.indexOf(t)>-1},Vt=function(e,t){return t.type===Ft&&e.type===Ne},Ut=function(e){return e.type===Ft},Gt=function(e,t){return 0===t.indexOf(e)},Ht=function(e,t,n){var r=e;return t.forEach(function(e){var t=r.findIndex(function(t){return t.type===Ne&&t.rowId===e});if(-1!==t){var a=t+1,i=r[t],o=i.row,s=i.rowId;r=[].concat(f(r.slice(0,a)),[{key:Ft.toString()+"_"+s,type:Ft,rowId:s,row:o,height:n}],f(r.slice(a)))}}),r},Wt=function(e,t){return[{key:Ft.toString(),type:Ft,width:t}].concat(f(e))},qt=function(e){return function(t){var n=t.tableRow,r=t.tableColumns,a=t.tableColumn;return n.type===Ft&&0===r.indexOf(a)?r.length:e(t)}},Yt=Symbol("select"),Xt=function(e,t){return t.type===Yt&&e.type===Ne},Zt=function(e,t){return t.type===Yt&&e.type===et},$t=function(e,t){return[{key:Yt.toString(),type:Yt,width:t}].concat(f(e))},Kt=function(e,t){return e.type===Ne&&t.type===Ne},Jt=function(e,t){return t.indexOf(e)>-1},Qt=function(e){return e.type===Ne},en=function(e){return e.type===Fe},tn=function(e,t){return 0===t.indexOf(e)},nn=function(e,t){if(!e)return{};var n=e.find(function(e){return e.columnName===t});return n||{}},rn=function(e,t,n){return function(r){if(e){var a=nn(e,r)[t];return void 0!==a?a:n}return n}},an=function(e,t){return e.map(function(e){var n=e.name,r=nn(t,n);return{key:Ne.toString()+"_"+n,type:Ne,width:r.width,align:r.align,wordWrapEnabled:r.wordWrapEnabled,column:e}})},on=function(e,t){return e.length?e.map(function(e){var n=t(e);return{row:e,rowId:n,type:Ne,key:Ne.toString()+"_"+n}}):[{key:Fe.toString(),type:Fe}]},sn=function(e){var t=e.tableRow,n=e.tableColumns,r=e.tableColumn;return t.type===Fe&&0===n.indexOf(r)?n.length:1},ln=function(e,t){return e.filter(function(e){return e.type!==Ne||-1===t.indexOf(e.column.name)})},un=function(e){return e.some(function(e){return e.type===Ne})},cn=function(e,t){return e.map(function(e){return{column:e,hidden:-1!==t.indexOf(e.name)}})},fn=function(e,t){return-1===e.indexOf(t)?[].concat(f(e),[t]):e.filter(function(e){return e!==t})},dn=function(e,t){var n=t.rowId,r=t.state;return ve(e,[n],r)},pn=Symbol("treeNode"),hn=function(e,t){var n=function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=n(t,r);return i?i.reduce(function(t,i){var o,s,l=e(i,n,r,a+1);return(o=t.rows).push.apply(o,[i].concat(f(l.rows))),(s=t.treeMeta).push.apply(s,[[i,{level:a,leaf:!!l.empty}]].concat(f(l.treeMeta))),t},{rows:[],treeMeta:[]}):{rows:[],treeMeta:[],empty:!0}}(null,t,e);return{rows:n.rows,treeMeta:new Map(n.treeMeta)}},mn=function(e,t){var n=t.rows,r=t.treeMeta,a=n.findIndex(function(e){return r.get(e).level>0});if(-1===a||void 0!==e(n[a]))return e;var i=new Map(n.map(function(e,t){return[e,t]}));return function(e){return i.get(e)}},vn=function(e,t){var n=t.treeMeta;return function(t){var r=n.get(t);return void 0!==r?pn.toString()+"_"+r.level:e&&e()}},gn=function(e,t,n){var r=e.rows,a=e.treeMeta,i=new Set(n),o=!0,s=0;return r.reduce(function(e,n){var r=a.get(n),l=r&&r.level;if(void 0===l&&o)return e.rows.push(n),e;if(!o&&(void 0===l||l>s)){var u=e.rows[e.rows.length-1],c=e.collapsedRowsMeta.get(u);return c||(c=[],e.collapsedRowsMeta.set(u,c)),c.push(n),e}return o=i.has(t(n)),s=l,e.rows.push(n),e},{rows:[],treeMeta:a,collapsedRowsMeta:new Map})},yn=function(e,t){var n=t.collapsedRowsMeta;return function(t){return n.get(t)||e&&e(t)}},bn=function(e){var t=e.treeMeta;return function(e){var n=t.get(e);return n&&n.leaf}},xn=function(e){var t=e.treeMeta;return function(e){var n=t.get(e);return n&&n.level}},_n=function(e){return e.rows},wn=function(e,t,n){return e.type===Ne&&t.type===Ne&&t.column.name===n},Tn=function(e,t){return t},kn=function(e,t,n){var r={operator:"or",filters:t.map(function(t){return{columnName:t.name,value:e}})};return n?{operator:"and",filters:[n,r]}:r},Cn=function(e,t,n){return function(r){return n.indexOf(r)>-1&&t||"function"==typeof e&&e(r)||void 0}},En="left",Mn="right",An=Symbol("fixed"),Sn=function(e,t){return e.filter(function(e){return e.type===Ne&&-1!==t.indexOf(e.column.name)||-1!==t.indexOf(e.type)}).map(function(e){return e.key})},On=function(e){return e.type===An},Pn=function(e,t,n,r){var a=e.tableColumn,i=t.leftColumns,o=t.rightColumns,s=a.fixed,l=s===En?Sn(n,i):Sn(n,o).reverse(),u=l.indexOf(a.key),c=n.findIndex(function(e){return e.key===a.key}),f=function(e){return u===l.length-1&&e===s},d=function(e){var t=n[c+e];return t&&-1===l.indexOf(t.key)};return{showRightDivider:f(En)||c!==n.length-1&&d(1),showLeftDivider:f(Mn)||0!==c&&d(-1),position:function(e,t,n){return 0===t?0:e.slice(0,t).reduce(function(e,t){return e+n[t]||0},0)}(l,u,r),side:s}},Rn=function(e,t,n){return e.map(function(e){var r=void 0;return(e.type===Ne&&-1!==t.indexOf(e.column.name)||-1!==t.indexOf(e.type))&&(r=En),(e.type===Ne&&-1!==n.indexOf(e.column.name)||-1!==n.indexOf(e.type))&&(r=Mn),r?u({},e,{fixed:r}):e})},Ln=function(e){return[].concat(f(e),[{key:An.toString(),type:An,height:0}])},Dn={count:function(e){return e.length},sum:function(e,t){return e.reduce(function(e,n){return e+t(n)},0)},max:function(e,t){return e.length?e.reduce(function(e,n){return Math.max(e,t(n))},-1/0):null},min:function(e,t){return e.length?e.reduce(function(e,n){return Math.min(e,t(n))},1/0):null},avg:function(e,t){return e.length?e.reduce(function(e,n){return e+t(n)},0)/e.length:null}},In=function(e,t,n){var r=Dn[e];if(!r)throw new Error("The summary type '"+e+"' is not defined");return r(t,n)},zn=function(e,t,n,r){return t.reduce(function(t,a){var i=a.type,o=a.columnName;return t.push(r(i,e,function(e){return n(e,o)})),t},[])},jn=function(e,t,n,r,a,i){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:In,s=e.reduce(function(e,t){if(r&&r(t)){a&&a(t)||e.push(t);var n=i&&i(t);return n&&e.push.apply(e,f(n)),e}return e.push(t),e},[]);return zn(s,t,n,o)},Nn=function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:In,o=[],s={};return e.forEach(function(e){var l=r(e);l||o.forEach(function(t){t.rows.push(e)});var u=o.findIndex(function(e){return e.levelKey===l});u>-1&&(o.slice(u).forEach(function(e){s[e.row.compoundKey]=zn(e.rows,t,n,i)}),o=o.slice(0,u)),a(e)&&o.push({levelKey:l,row:e,rows:[]})},{}),o.forEach(function(e){s[e.row.compoundKey]=zn(e.rows,t,n,i)}),s},Fn=function(e,t,n,r,a,i){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:In,s=[],l={};return e.forEach(function(e){var u=r(e);if(u){var c=s.findIndex(function(e){return e.levelKey===u});c>-1&&(s.slice(c).forEach(function(e){e.rows.length&&(l[i(e.row)]=zn(e.rows,t,n,o))}),s=s.slice(0,c)),a&&a(e)||(s.length&&s[s.length-1].rows.push(e),s.push({levelKey:u,row:e,rows:[]}))}else s[s.length-1].rows.push(e)},{}),s.forEach(function(e){e.rows.length&&(l[i(e.row)]=zn(e.rows,t,n,o))}),l},Bn=Symbol("totalSummary"),Vn=Symbol("groupSummary"),Un=Symbol("treeSummary"),Gn=function(e){return[{key:Bn.toString(),type:Bn}].concat(f(e))},Hn=function(e,t,n,r){if(!t)return e;var a=[],i=function(e){if(e.opened)if(n&&n(e.row)){var t=e.row.compoundKey;a.push({key:Vn.toString()+"_"+t,type:Vn,row:e.row})}else{var i=r(e.row);a.push({key:Un.toString()+"_"+i,type:Un,row:e.row})}},o=[];return e.forEach(function(e){var r=e.row,s=t(r);if(s){var l=o.findIndex(function(e){return e.levelKey===s});l>-1&&(o.slice(l).forEach(i),o=o.slice(0,l)),n&&n(r)||(o=o.map(function(e){return u({},e,{opened:!0})})),o.push({levelKey:s,row:r,opened:!1})}else o=o.map(function(e){return u({},e,{opened:!0})});a.push(e)}),o.slice().reverse().forEach(i),a},Wn=function(e,t){return e.type===Bn&&t.type===Ne},qn=function(e,t){return e.type===Vn&&t.type===Ne},Yn=function(e,t){return e.type===Un&&t.type===Ne},Xn=function(e){return e.type===Bn},Zn=function(e){return e.type===Vn},$n=function(e){return e.type===Un},Kn=function(e,t,n){return e.map(function(e,t){return[e,t]}).filter(function(e){return c(e,1)[0].columnName===t}).map(function(e){var t=c(e,2),r=t[0],a=t[1];return{type:r.type,value:n[a]}})},Jn=function(e,t){var n=e[t].right-e[t].left,r=function(t){return e[t].right-e[t].left-n};return e.map(function(n,a){var i=n.top,o=n.right,s=n.bottom,l=n.left;a>0&&a<=t&&(l=Math.min(l,l-r(a-1))),a>t&&(l=Math.max(l,l+r(a)));var u=o;return a<e.length-1&&a>=t&&(u=Math.max(u,u+r(a+1))),a<t&&(u=Math.min(u,u-r(a))),{top:i,right:u,bottom:s,left:l}})},Qn=function(e,t){var n=e.map(function(e){return e.width}),r=(t-n.reduce(function(e,t){return e+(t||0)},0))/n.reduce(function(e,t){return e+(void 0===t?1:0)},0),a=0;return n.map(function(e){return void 0===e?r:e}).map(function(e){return{left:(a+=e)-e,right:a}})},er=function(e,t,n){return Jn(e,t).findIndex(function(e){var t=e.left,r=e.right;return n>t&&n<r})},tr=function(e){return((new Date).getTime()-e.startTime)/200},nr=function(e,t,n,a){var i=e.map(function(e){return e.key}).join()===t.map(function(e){return e.key}).join(),o=new Map(Qn(e,n).map(function(t,n){return[e[n].key,t]}).map(function(e){var t=c(e,2),n=t[0],i=t[1],o=a.get(n);if(!o)return[n,i];var s=Object(r.easeOutCubic)(tr(o)),l=(o.left.to-o.left.from)*s+o.left.from;return[n,{left:l,right:i.right-(i.left-l)}]})),s=new Map(Qn(t,n).map(function(e,n){return[t[n].key,e]}));return new Map([].concat(f(s.keys())).map(function(e){var t=o.get(e),n=s.get(e),r={startTime:(new Date).getTime(),style:{}},l=!!a.get(e)||t&&!i;return Math.abs((l?t.left:n.left)-n.left)>1&&(r.left={from:t.left,to:n.left}),[e,r]}).filter(function(e){return e[1].left}))},rr=function(e){return new Map([].concat(f(e.entries())).filter(function(e){var t=c(e,2)[1];return tr(t)<1}))},ar=function(e){return new Map([].concat(f(e.entries())).map(function(e){var t=c(e,2),n=t[0],a=t[1],i=Object(r.easeOutCubic)(tr(a)),o=u({},a.style);if(a.left){var s=(a.left.to-a.left.from)*(i-1);o.transform="translateX("+s+"px)"}return[n,o]}))},ir=function(e,t){return t>=e.top&&t<=e.bottom},or=function(e){return{top:e.top,right:e.right,bottom:e.bottom,left:e.left}},sr=function(e,t,n){var r=n.x,a=n.y;if(0===e.length)return 0;var i=function(e){return e.map(function(t,n){return n!==e.length-1&&t.top===e[n+1].top?u({},t,{right:e[n+1].left}):t})}(-1!==t?Jn(e,t):e.map(or)).findIndex(function(t,n){var i=ir(t,a),o=r>=t.left&&r<=t.right,s=0===n&&r<t.left,l=!i&&!!e[n-1]&&ir(e[n-1],a);return i&&o||s||l});return-1===i?e.length:i},lr=Symbol("stub"),ur=function(e,t,n,r,a){for(var i=null,o=null,s=t+n,l=0,u=0;null===o&&l<e.length;){var c=u+r(e[l]),f=u>=t&&u<s||c>t&&c<=s||u<t&&c>s;if(f&&null===i&&(i=l),!f&&null!==i){o=l-1;break}l+=1,u=c}return null!==i&&null===o&&(o=l-1),i=null===i?0:i,o=null===o?0:o,a&&(i=Math.max(0,i-a),o=Math.min(e.length-1,o+a)),[i,o]},cr=function(e,t,n){return t.map(function(t){for(var r=c(t,2),a=r[0],i=r[1],o=0;o<=t[1];o+=1){var s=n(e[o]);o<t[0]&&o+s>t[0]&&(a=o),o+(s-1)>t[1]&&(i=o+(s-1))}return[a,i]})},fr=function(e,t,n){var r=[],a=t.reduce(function(e,t){for(var n=t[0];n<=t[1];n+=1)e.push(n);return e},[]),i=new Set,o=new Set;n.forEach(function(e){return e.forEach(function(e){i.add(e[0]),o.add(e[1])})});for(var s=void 0,l=0;l<e;l+=1)-1!==a.indexOf(l)?(void 0!==s&&(r.push([s,l-1]),s=void 0),r.push([l,l])):i.has(l)?(l>0&&r.push([void 0!==s?s:l,l-1]),s=l):o.has(l)?(r.push([void 0!==s?s:l,l]),s=void 0):void 0===s&&(s=l);return void 0!==s&&r.push([s,e-1]),r},dr=function(e,t,n,r){var a=0,i=void 0,o=n+1;for(i=t;i<o;i+=1)a+=r(e[i],0);return a},pr=function(e){var t=e.rows,n=e.columns,r=e.top,a=e.height,i=e.left,o=e.width,s=e.getColumnWidth,l=void 0===s?function(e){return e.width}:s,u=e.getRowHeight,c=void 0===u?function(e){return e.height}:u,f=e.getColSpan,d=void 0===f?function(){return 1}:f;if(!t.length||!n.length)return{columns:[],rows:[]};var p=ur(t,r,a,c,3),h=function(e,t){return t.reduce(function(t,n,r){return n.fixed&&(r<e[0]||r>e[1])&&t.push([r,r]),t},[e])}(ur(n,i,o,l,1),n),m=t.slice(p[0],p[1]).map(function(e){return cr(n,h,function(t){return d(e,t)})}),v=fr(n.length,h,m),g=fr(t.length,[p],[]);return{columns:function(e,t,n,r){var a=[];return n.forEach(function(n){if(t.reduce(function(e,t){return e||t[0]<=n[0]&&n[1]<=t[1]},!1)){var i=e[n[0]];a.push(i)}else a.push({key:lr.toString()+"_"+n[0]+"_"+n[1],type:lr,width:dr(e,n[0],n[1],r)})}),a}(n,h,v,l),rows:function(e,t,n,r,a){var i=[];return n.forEach(function(n){if(t[0]<=n[0]&&n[1]<=t[1]){var o=e[n[0]];i.push({row:o,cells:a(o)})}else i.push({row:{key:lr.toString()+"_"+n[0]+"_"+n[1],type:lr,height:dr(e,n[0],n[1],r)}})}),i}(t,p,g,c,function(e){return function(e,t,n,r){for(var a=[],i=0,o=function(){var o=n[i];if(t.reduce(function(e,t){return e||t[0]<=o[0]&&o[1]<=t[1]},!1)){var s=e[o[0]],l=r(s)+o[0]-1,u=n.findIndex(function(e){return e[0]<=l&&l<=e[1]});a.push({column:s,colSpan:u-i+1}),i+=1}else a.push({column:{key:lr.toString()+"_"+o[0]+"_"+o[1],type:lr},colSpan:1}),i+=1};i<n.length;)o();return a}(n,cr(n,h,function(t){return d(e,t)}),v,function(t){return d(e,t)})})}}},function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){var r;
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
!function(){"use strict";var n={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var i=typeof r;if("string"===i||"number"===i)e.push(r);else if(Array.isArray(r)&&r.length){var o=a.apply(null,r);o&&e.push(o)}else if("object"===i)for(var s in r)n.call(r,s)&&r[s]&&e.push(s)}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0===(r=function(){return a}.apply(t,[]))||(e.exports=r)}()},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"createGenerateClassName",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"createMuiTheme",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"jssPreset",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"MuiThemeProvider",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"createStyles",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"withStyles",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"withTheme",{enumerable:!0,get:function(){return c.default}});var a=r(n(102)),i=r(n(76)),o=r(n(98)),s=r(n(250)),l=r(n(253)),u=r(n(9)),c=r(n(51))},function(e,t){function n(){return e.exports=n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},n.apply(this,arguments)}e.exports=n},function(e,t,n){var r=n(175);e.exports=function(e,t){if(null==e)return{};var n,a,i=r(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.sheetsManager=void 0;var a=r(n(10)),i=r(n(7)),o=r(n(12)),s=r(n(13)),l=r(n(14)),u=r(n(15)),c=r(n(16)),f=r(n(8)),d=r(n(0)),p=r(n(2)),h=(r(n(11)),r(n(91))),m=(r(n(56)),n(92)),v=r(n(201)),g=r(n(98)),y=r(n(99)),b=r(n(215)),x=r(n(76)),_=r(n(77)),w=r(n(102)),T=r(n(231)),k=(r(n(100)),r(n(232))),C=(0,m.create)((0,g.default)()),E=(0,w.default)(),M=-1e11,A=new Map;t.sheetsManager=A;var S,O={};var P=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r,m=t.withTheme,g=void 0!==m&&m,w=t.flip,P=void 0===w?null:w,R=t.name,L=(0,f.default)(t,["withTheme","flip","name"]),D=(0,T.default)(e),I=D.themingEnabled||"string"==typeof R||g;M+=1,D.options.index=M;var z=function(e){function t(e,n){var r;(0,o.default)(this,t),(r=(0,l.default)(this,(0,u.default)(t).call(this,e,n))).jss=n[v.default.jss]||C,r.sheetsManager=A,r.unsubscribeId=null;var a=n.muiThemeProviderOptions;return a&&(a.sheetsManager&&(r.sheetsManager=a.sheetsManager),r.sheetsCache=a.sheetsCache,r.disableStylesGeneration=a.disableStylesGeneration),r.stylesCreatorSaved=D,r.sheetOptions=(0,i.default)({generateClassName:E},n[v.default.sheetOptions]),r.theme=I?_.default.initial(n)||S||(S=(0,x.default)({typography:{suppressWarning:!0}})):O,r.attach(r.theme),r.cacheClasses={value:null,lastProp:null,lastJSS:{}},r}return(0,c.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){var e=this;I&&(this.unsubscribeId=_.default.subscribe(this.context,function(t){var n=e.theme;e.theme=t,e.attach(e.theme),e.setState({},function(){e.detach(n)})}))}},{key:"componentDidUpdate",value:function(){this.stylesCreatorSaved}},{key:"componentWillUnmount",value:function(){this.detach(this.theme),null!==this.unsubscribeId&&_.default.unsubscribe(this.context,this.unsubscribeId)}},{key:"getClasses",value:function(){if(this.disableStylesGeneration)return this.props.classes||{};var e=!1,t=b.default.get(this.sheetsManager,this.stylesCreatorSaved,this.theme);return t.sheet.classes!==this.cacheClasses.lastJSS&&(this.cacheClasses.lastJSS=t.sheet.classes,e=!0),this.props.classes!==this.cacheClasses.lastProp&&(this.cacheClasses.lastProp=this.props.classes,e=!0),e&&(this.cacheClasses.value=(0,y.default)({baseClasses:this.cacheClasses.lastJSS,newClasses:this.props.classes,Component:n})),this.cacheClasses.value}},{key:"attach",value:function(e){if(!this.disableStylesGeneration){var t=this.stylesCreatorSaved,n=b.default.get(this.sheetsManager,t,e);if(n||(n={refs:0,sheet:null},b.default.set(this.sheetsManager,t,e,n)),0===n.refs){var r;this.sheetsCache&&(r=b.default.get(this.sheetsCache,t,e)),r||((r=this.createSheet(e)).attach(),this.sheetsCache&&b.default.set(this.sheetsCache,t,e,r)),n.sheet=r;var a=this.context[v.default.sheetsRegistry];a&&a.add(r)}n.refs+=1}}},{key:"createSheet",value:function(e){var t=this.stylesCreatorSaved.create(e,R),r=R;return this.jss.createStyleSheet(t,(0,i.default)({meta:r,classNamePrefix:r,flip:"boolean"==typeof P?P:"rtl"===e.direction,link:!1},this.sheetOptions,this.stylesCreatorSaved.options,{name:R||n.displayName},L))}},{key:"detach",value:function(e){if(!this.disableStylesGeneration){var t=b.default.get(this.sheetsManager,this.stylesCreatorSaved,e);if(t.refs-=1,0===t.refs){b.default.delete(this.sheetsManager,this.stylesCreatorSaved,e),this.jss.removeStyleSheet(t.sheet);var n=this.context[v.default.sheetsRegistry];n&&n.remove(t.sheet)}}}},{key:"render",value:function(){var e=this.props,t=(e.classes,e.innerRef),r=(0,f.default)(e,["classes","innerRef"]),a=(0,k.default)({theme:this.theme,name:R,props:r});return g&&!a.theme&&(a.theme=this.theme),d.default.createElement(n,(0,i.default)({},a,{classes:this.getClasses(),ref:t}))}}]),t}(d.default.Component);return z.propTypes={},z.contextTypes=(0,i.default)((r={muiThemeProviderOptions:p.default.object},(0,a.default)(r,v.default.jss,p.default.object),(0,a.default)(r,v.default.sheetOptions,p.default.object),(0,a.default)(r,v.default.sheetsRegistry,p.default.object),r),I?_.default.contextTypes:{}),(0,h.default)(z,n),z}};t.default=P},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){"use strict";var r=function(){};e.exports=r},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},function(e,t,n){var r=n(55),a=n(46);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?a(e):t}},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},function(e,t,n){var r=n(178);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},function(e,t,n){"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(139)},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.default}});var a=r(n(304))},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.default}});var a=r(n(233))},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.default}});var a=r(n(248))},function(e,t,n){"use strict";n.r(t),n.d(t,"PluginHost",function(){return l}),n.d(t,"EventEmitter",function(){return u}),n.d(t,"memoize",function(){return d}),n.d(t,"shallowEqual",function(){return c}),n.d(t,"argumentsShallowEqual",function(){return f}),n.d(t,"getMessagesFormatter",function(){return C}),n.d(t,"createClickHandlers",function(){return a}),n.d(t,"easeInQuad",function(){return p}),n.d(t,"easeOutQuad",function(){return h}),n.d(t,"easeInOutQuad",function(){return m}),n.d(t,"easeInCubic",function(){return v}),n.d(t,"easeOutCubic",function(){return g}),n.d(t,"easeInOutCubic",function(){return y}),n.d(t,"easeInQuart",function(){return b}),n.d(t,"easeOutQuart",function(){return x}),n.d(t,"easeInOutQuart",function(){return _}),n.d(t,"easeInQuint",function(){return w}),n.d(t,"easeOutQuint",function(){return T}),n.d(t,"easeInOutQuint",function(){return k});var r=function(e,t){for(var n=e.position(),r=t.position(),a=0;a<Math.min(n.length,r.length);a+=1){if(n[a]<r[a])return-1;if(n[a]>r[a])return 1}return n.length-r.length},a=function(e,t){var n=void 0;return{onClick:e?function(t){n||(n=setTimeout(function(){clearTimeout(n),e(t)},200))}:void 0,onDoubleClick:t?function(e){clearTimeout(n),t(e)}:void 0}},i=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t){return new Error("The '"+e+"' plugin requires '"+t+"' to be defined before it.")},l=function(){function e(){i(this,e),this.plugins=[],this.subscriptions=new Set,this.gettersCache={}}return o(e,[{key:"ensureDependencies",value:function(){var e=new Set,t=new Map;this.plugins.filter(function(e){return e.container}).forEach(function(n){if(t.has(n.name))throw s(t.get(n.name),n.name);n.dependencies.forEach(function(r){if(!e.has(r.name)){if(!r.optional)throw s(n.name,r.name);t.has(r.name)||t.set(r.name,n.name)}}),e.add(n.name)})}},{key:"registerPlugin",value:function(e){this.plugins=function(e,t){var n=e.slice(),a=e.findIndex(function(e){return r(t,e)<=0}),i=a<0?e.length:a,o=i>=0&&i<e.length&&0===r(t,e[i]);return n.splice(i,o?1:0,t),n}(this.plugins,e),this.cleanPluginsCache()}},{key:"unregisterPlugin",value:function(e){this.plugins.splice(this.plugins.indexOf(e),1),this.cleanPluginsCache()}},{key:"cleanPluginsCache",value:function(){this.validationRequired=!0,this.gettersCache={},this.knownKeysCache={}}},{key:"knownKeys",value:function(e){return this.knownKeysCache[e]||(this.knownKeysCache[e]=Array.from(this.plugins.map(function(e){return Object.keys(e)}).map(function(t){return t.filter(function(t){return t.endsWith(e)})[0]}).filter(function(e){return!!e}).reduce(function(e,t){return e.add(t)},new Set)).map(function(t){return t.replace(e,"")})),this.knownKeysCache[e]}},{key:"collect",value:function(e,t){var n=this;if(this.validationRequired&&(this.ensureDependencies(),this.validationRequired=!1),this.gettersCache[e]||(this.gettersCache[e]=this.plugins.map(function(t){return t[e]}).filter(function(e){return!!e})),!t)return this.gettersCache[e];var r=this.plugins.indexOf(t);return this.gettersCache[e].filter(function(t){return n.plugins.findIndex(function(n){return n[e]===t})<r})}},{key:"get",value:function(e,t){var n=this.collect(e,t);if(n.length){var r=n[0]();return n.slice(1).forEach(function(e){r=e(r)}),r}}},{key:"registerSubscription",value:function(e){this.subscriptions.add(e)}},{key:"unregisterSubscription",value:function(e){this.subscriptions.delete(e)}},{key:"broadcast",value:function(e,t){this.subscriptions.forEach(function(n){return n[e]&&n[e](t)})}}]),e}(),u=function(){function e(){i(this,e),this.handlers=[]}return o(e,[{key:"emit",value:function(e){this.handlers.forEach(function(t){return t(e)})}},{key:"subscribe",value:function(e){this.handlers.push(e)}},{key:"unsubscribe",value:function(e){this.handlers.splice(this.handlers.indexOf(e),1)}}]),e}();function c(e,t){if(e===t)return!0;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var a=Object.prototype.hasOwnProperty,i=0;i<n.length;i+=1){if(!a.call(t,n[i])||e[n[i]]!==t[n[i]])return!1;if(e[n[i]]!==t[n[i]])return!1}return!0}function f(e,t){if(null===e||null===t||e.length!==t.length)return!1;for(var n=0;n<e.length;n+=1)if(e[n]!==t[n])return!1;return!0}var d=function(e){var t=null,n=null;return function(){for(var r=arguments.length,a=Array(r),i=0;i<r;i++)a[i]=arguments[i];return null!==t&&f(t,a)||(n=e.apply(void 0,a)),t=a,n}},p=function(e){return e*e},h=function(e){return e*(2-e)},m=function(e){return e<.5?2*e*e:(4-2*e)*e-1},v=function(e){return e*e*e},g=function(e){return(e-1)*(e-1)*(e-1)+1},y=function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},b=function(e){return e*e*e*e},x=function(e){return 1-(e-1)*(e-1)*(e-1)*(e-1)},_=function(e){return e<.5?8*e*e*e*e:1-8*(e-1)*(e-1)*(e-1)*(e-1)},w=function(e){return e*e*e*e*e},T=function(e){return 1+(e-1)*(e-1)*(e-1)*(e-1)*(e-1)},k=function(e){return e<.5?16*e*e*e*e*e:1+16*(e-1)*(e-1)*(e-1)*(e-1)*(e-1)},C=function(e){return function(t,n){var r=e[t];return"function"==typeof r?r(n):n?function(e,t){return Object.keys(t).reduce(function(e,n){return e.replace("{"+n+"}",t[n])},e)}(r,n):r}}},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.default}});var a=r(n(174))},function(e,t,n){"use strict";e.exports=function(){}},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.default}});var a=r(n(296))},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.default}});var a=r(n(299))},function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.default}});var a=r(n(297))},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.default}});var a=r(n(298))},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.capitalize=function(e){0;return e.charAt(0).toUpperCase()+e.slice(1)},t.contains=i,t.findIndex=o,t.find=function(e,t){var n=o(e,t);return n>-1?e[n]:void 0},t.createChainedFunction=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(e,t){return null==t?e:function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];e.apply(this,r),t.apply(this,r)}},function(){})};var a=r(n(55));r(n(11));function i(e,t){return Object.keys(t).every(function(n){return e.hasOwnProperty(n)&&e[n]===t[n]})}function o(e,t){for(var n=(0,a.default)(t),r=0;r<e.length;r+=1){if("function"===n&&!0==!!t(e[r],r,e))return r;if("object"===n&&i(e[r],t))return r;if(-1!==["string","number","boolean"].indexOf(n))return e.indexOf(t)}return-1}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,a,i,o,s){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,a,i,o,s],c=0;(l=new Error(t.replace(/%s/g,function(){return u[c++]}))).name="Invariant Violation"}throw l.framesToPop=1,l}}},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.default}});var a=r(n(257))},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.convertHexToRGB=i,t.rgbToHex=function(e){if(0===e.indexOf("#"))return e;var t=o(e).values;return t=t.map(function(e){return function(e){var t=e.toString(16);return 1===t.length?"0".concat(t):t}(e)}),"#".concat(t.join(""))},t.decomposeColor=o,t.recomposeColor=s,t.getContrastRatio=function(e,t){var n=l(e),r=l(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)},t.getLuminance=l,t.emphasize=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.15;return l(e)>.5?u(e,t):c(e,t)},t.fade=function(e,t){if(!e)return e;e=o(e),t=a(t),("rgb"===e.type||"hsl"===e.type)&&(e.type+="a");return e.values[3]=t,s(e)},t.darken=u,t.lighten=c;r(n(11));function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e<t?t:e>n?n:e}function i(e){e=e.substr(1);var t=new RegExp(".{1,".concat(e.length/3,"}"),"g"),n=e.match(t);return n&&1===n[0].length&&(n=n.map(function(e){return e+e})),n?"rgb(".concat(n.map(function(e){return parseInt(e,16)}).join(", "),")"):""}function o(e){if("#"===e.charAt(0))return o(i(e));var t=e.indexOf("("),n=e.substring(0,t),r=e.substring(t+1,e.length-1).split(",");return{type:n,values:r=r.map(function(e){return parseFloat(e)})}}function s(e){var t=e.type,n=e.values;return-1!==t.indexOf("rgb")&&(n=n.map(function(e,t){return t<3?parseInt(e,10):e})),-1!==t.indexOf("hsl")&&(n[1]="".concat(n[1],"%"),n[2]="".concat(n[2],"%")),"".concat(e.type,"(").concat(n.join(", "),")")}function l(e){var t=o(e);if(-1!==t.type.indexOf("rgb")){var n=t.values.map(function(e){return(e/=255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)});return Number((.2126*n[0]+.7152*n[1]+.0722*n[2]).toFixed(3))}return t.values[2]/100}function u(e,t){if(!e)return e;if(e=o(e),t=a(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]*=1-t;return s(e)}function c(e,t){if(!e)return e;if(e=o(e),t=a(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;return s(e)}},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.default}});var a=r(n(264))},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.default}});var a=r(n(329))},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.default}});var a=r(n(303))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){return e&&e.ownerDocument||document};t.default=r},function(e,t,n){"use strict";var r=n(26);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(0)),i=r(n(258)),o=r(n(33));var s=function(e,t){var n=function(t){return a.default.createElement(o.default,t,e)};return n.displayName="".concat(t,"Icon"),(n=(0,i.default)(n)).muiName="SvgIcon",n};t.default=s},function(e,t,n){"use strict";e.exports=function(){}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=u(n(38)),s=u(n(73)),l=u(n(57));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type="style",this.isProcessed=!1;var a=r.sheet,i=r.Renderer,o=r.selector;this.key=t,this.options=r,this.style=n,o&&(this.selectorText=o),this.renderer=a?a.renderer:new i}return i(e,[{key:"prop",value:function(e,t){if(void 0===t)return this.style[e];if(this.style[e]===t)return this;var n=null==(t=this.options.jss.plugins.onChangeValue(t,e,this))||!1===t,r=e in this.style;if(n&&!r)return this;var a=n&&r;if(a?delete this.style[e]:this.style[e]=t,this.renderable)return a?this.renderer.removeProperty(this.renderable,e):this.renderer.setProperty(this.renderable,e,t),this;var i=this.options.sheet;return i&&i.attached&&(0,o.default)(!1,'Rule is not linked. Missing sheet option "link: true".'),this}},{key:"applyTo",value:function(e){var t=this.toJSON();for(var n in t)this.renderer.setProperty(e,n,t[n]);return this}},{key:"toJSON",value:function(){var e={};for(var t in this.style){var n=this.style[t];"object"!==(void 0===n?"undefined":a(n))?e[t]=n:Array.isArray(n)&&(e[t]=(0,l.default)(n))}return e}},{key:"toString",value:function(e){var t=this.options.sheet,n=!!t&&t.options.link?r({},e,{allowEmpty:!0}):e;return(0,s.default)(this.selector,this.style,n)}},{key:"selector",set:function(e){if(e!==this.selectorText&&(this.selectorText=e,this.renderable&&!this.renderer.setSelector(this.renderable,e)&&this.renderable)){var t=this.renderer.replaceRule(this.renderable,this);t&&(this.renderable=t)}},get:function(){return this.selectorText}}]),e}();t.default=c},function(e,t){function n(e){if(e&&"object"==typeof e){var t=e.which||e.keyCode||e.charCode;t&&(e=t)}if("number"==typeof e)return o[e];var n,i=String(e);return(n=r[i.toLowerCase()])?n:(n=a[i.toLowerCase()])||(1===i.length?i.charCodeAt(0):void 0)}n.isEventKey=function(e,t){if(e&&"object"==typeof e){var n=e.which||e.keyCode||e.charCode;if(null===n||void 0===n)return!1;if("string"==typeof t){var i;if(i=r[t.toLowerCase()])return i===n;if(i=a[t.toLowerCase()])return i===n}else if("number"==typeof t)return t===n;return!1}};var r=(t=e.exports=n).code=t.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},a=t.aliases={windows:91,"":16,"":18,"":17,"":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};
/*!
 * Programatically add the following
 */
for(i=97;i<123;i++)r[String.fromCharCode(i)]=i-32;for(var i=48;i<58;i++)r[i-48]=i;for(i=1;i<13;i++)r["f"+i]=i+111;for(i=0;i<10;i++)r["numpad "+i]=i+96;var o=t.names=t.title={};for(i in r)o[r[i]]=i;for(var s in a)r[s]=a[s]},function(e,t,n){"use strict";var r=n(4);t.__esModule=!0,t.default=void 0;var a=r(n(315)),i=r(n(318)),o=(r(n(118)),r(n(56)),function(e){return(0,a.default)(function(e,t){return!(0,i.default)(e,t)})(e)});t.default=o},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.default}});var a=r(n(340))},function(e,t,n){"use strict";var r=n(26);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(0)),i=(0,r(n(37)).default)(a.default.createElement(a.default.Fragment,null,a.default.createElement("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),a.default.createElement("path",{fill:"none",d:"M0 0h24v24H0z"})),"ChevronRight");t.default=i},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.default}});var a=r(n(334))},,function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=u(n(58)),o=u(n(95)),s=u(n(39)),l=u(n(187));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.map={},this.raw={},this.index=[],this.update=function(e,t){var r=n.options,a=r.jss.plugins,i=r.sheet;if("string"==typeof e)a.onUpdate(t,n.get(e),i);else for(var o=0;o<n.index.length;o++)a.onUpdate(e,n.index[o],i)},this.options=t,this.classes=t.classes}return a(e,[{key:"add",value:function(e,t,n){var a=this.options,o=a.parent,u=a.sheet,c=a.jss,f=a.Renderer,d=a.generateClassName;!(n=r({classes:this.classes,parent:o,sheet:u,jss:c,Renderer:f,generateClassName:d},n)).selector&&this.classes[e]&&(n.selector="."+(0,l.default)(this.classes[e])),this.raw[e]=t;var p=(0,i.default)(e,t,n),h=void 0;!n.selector&&p instanceof s.default&&(h=d(p,u),p.selector="."+(0,l.default)(h)),this.register(p,h);var m=void 0===n.index?this.index.length:n.index;return this.index.splice(m,0,p),p}},{key:"get",value:function(e){return this.map[e]}},{key:"remove",value:function(e){this.unregister(e),this.index.splice(this.indexOf(e),1)}},{key:"indexOf",value:function(e){return this.index.indexOf(e)}},{key:"process",value:function(){var e=this.options.jss.plugins;this.index.slice(0).forEach(e.onProcessRule,e)}},{key:"register",value:function(e,t){this.map[e.key]=e,e instanceof s.default&&(this.map[e.selector]=e,t&&(this.classes[e.key]=t))}},{key:"unregister",value:function(e){delete this.map[e.key],e instanceof s.default&&(delete this.map[e.selector],delete this.classes[e.key])}},{key:"link",value:function(e){for(var t=this.options.sheet.renderer.getUnescapedKeysMap(this.index),n=0;n<e.length;n++){var r=e[n],a=this.options.sheet.renderer.getKey(r);t[a]&&(a=t[a]);var i=this.map[a];i&&(0,o.default)(i,r)}}},{key:"toString",value:function(e){for(var t="",n=this.options.sheet,r=!!n&&n.options.link,a=0;a<this.index.length;a++){var i=this.index[a].toString(e);(i||r)&&(t&&(t+="\n"),t+=i)}return t}}]),e}();t.default=c},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.specialProperty=void 0;r(n(10)),r(n(7));var a="exact-prop: ";t.specialProperty=a;var i=function(e){return e};t.default=i},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.cloneElementWithClassName=o,t.cloneChildrenWithClassName=function(e,t){return a.default.Children.map(e,function(e){return a.default.isValidElement(e)&&o(e,t)})},t.isMuiElement=function(e,t){return a.default.isValidElement(e)&&-1!==t.indexOf(e.type.muiName)},t.setRef=function(e,t){"function"==typeof e?e(t):e&&(e.current=t)};var a=r(n(0)),i=r(n(5));function o(e,t){return a.default.cloneElement(e,{className:(0,i.default)(e.props.className,t)})}},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=r(n(7)),o=r(n(8)),s=r(n(12)),l=r(n(13)),u=r(n(14)),c=r(n(15)),f=r(n(16)),d=r(n(0)),p=(r(n(2)),r(n(91))),h=(r(n(56)),r(n(76))),m=r(n(77));var v=function(){return function(e){var t=function(t){function n(e,t){var r;return(0,s.default)(this,n),(r=(0,u.default)(this,(0,c.default)(n).call(this))).state={theme:m.default.initial(t)||a||(a=(0,h.default)())},r}return(0,f.default)(n,t),(0,l.default)(n,[{key:"componentDidMount",value:function(){var e=this;this.unsubscribeId=m.default.subscribe(this.context,function(t){e.setState({theme:t})})}},{key:"componentWillUnmount",value:function(){null!==this.unsubscribeId&&m.default.unsubscribe(this.context,this.unsubscribeId)}},{key:"render",value:function(){var t=this.props,n=t.innerRef,r=(0,o.default)(t,["innerRef"]);return d.default.createElement(e,(0,i.default)({theme:this.state.theme,ref:n},r))}}]),n}(d.default.Component);return t.propTypes={},t.contextTypes=m.default.contextTypes,(0,p.default)(t,e),t}};t.default=v},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.default}});var a=r(n(256))},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.default}});var a=r(n(333))},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.default}});var a=r(n(312))},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(t){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?e.exports=r=function(e){return n(e)}:e.exports=r=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},r(t)}e.exports=r},function(e,t,n){"use strict";var r=n(4);t.__esModule=!0,t.default=void 0;var a=r(n(181)),i=function(e,t){return t+"("+(0,a.default)(e)+")"};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!Array.isArray(e))return e;var n="";if(Array.isArray(e[0]))for(var a=0;a<e.length&&"!important"!==e[a];a++)n&&(n+=", "),n+=r(e[a]," ");else n=r(e,", ");t||"!important"!==e[e.length-1]||(n+=" !important");return n};var r=function(e,t){for(var n="",r=0;r<e.length&&"!important"!==e[r];r++)n&&(n+=t),n+=e[r];return n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"unnamed",t=arguments[1],n=arguments[2],o=n.jss,s=(0,i.default)(t),l=o.plugins.onCreateRule(e,s,n);if(l)return l;"@"===e[0]&&(0,r.default)(!1,"[JSS] Unknown at-rule %s",e);return new a.default(e,s,n)};var r=o(n(38)),a=o(n(39)),i=o(n(184));function o(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";n.r(t),n.d(t,"isBrowser",function(){return a});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a="object"===("undefined"==typeof window?"undefined":r(window))&&"object"===("undefined"==typeof document?"undefined":r(document))&&9===document.nodeType;t.default=a},function(e,t,n){"use strict";n.r(t);var r=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===a}(e)}(e)};var a="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function i(e,t){return!1!==t.clone&&t.isMergeableObject(e)?s(function(e){return Array.isArray(e)?[]:{}}(e),e,t):e}function o(e,t,n){return e.concat(t).map(function(e){return i(e,n)})}function s(e,t,n){(n=n||{}).arrayMerge=n.arrayMerge||o,n.isMergeableObject=n.isMergeableObject||r;var a=Array.isArray(t);return a===Array.isArray(e)?a?n.arrayMerge(e,t,n):function(e,t,n){var r={};return n.isMergeableObject(e)&&Object.keys(e).forEach(function(t){r[t]=i(e[t],n)}),Object.keys(t).forEach(function(a){n.isMergeableObject(t[a])&&e[a]?r[a]=s(e[a],t[a],n):r[a]=i(t[a],n)}),r}(e,t,n):i(t,n)}s.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(e,n){return s(e,n,t)},{})};var l=s;t.default=l},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.isNumber=t.isString=t.formatMs=t.duration=t.easing=void 0;var a=r(n(8)),i=(r(n(11)),{easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"});t.easing=i;var o={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};t.duration=o;var s=function(e){return"".concat(Math.round(e),"ms")};t.formatMs=s;t.isString=function(e){return"string"==typeof e};t.isNumber=function(e){return!isNaN(parseFloat(e))};var l={easing:i,duration:o,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.duration,r=void 0===n?o.standard:n,l=t.easing,u=void 0===l?i.easeInOut:l,c=t.delay,f=void 0===c?0:c;(0,a.default)(t,["duration","easing","delay"]);return(Array.isArray(e)?e:[e]).map(function(e){return"".concat(e," ").concat("string"==typeof r?r:s(r)," ").concat(u," ").concat("string"==typeof f?f:s(f))}).join(",")},getAutoHeightDuration:function(e){if(!e)return 0;var t=e/36;return Math.round(10*(4+15*Math.pow(t,.25)+t/5))}};t.default=l},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.default}});var a=r(n(234))},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(36));var i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,n=(0,a.default)(e);return n.defaultView||n.parentView||t};t.default=i},function(e,t,n){"use strict";t.__esModule=!0,t.default=t.EXITING=t.ENTERED=t.ENTERING=t.EXITED=t.UNMOUNTED=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),a=s(n(0)),i=s(n(17)),o=n(104);n(245);function s(e){return e&&e.__esModule?e:{default:e}}var l="unmounted";t.UNMOUNTED=l;var u="exited";t.EXITED=u;var c="entering";t.ENTERING=c;var f="entered";t.ENTERED=f;t.EXITING="exiting";var d=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var a,i=n.transitionGroup,o=i&&!i.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?o?(a=u,r.appearStatus=c):a=f:a=t.unmountOnExit||t.mountOnEnter?l:u,r.state={status:a},r.nextCallback=null,r}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e);var n=t.prototype;return n.getChildContext=function(){return{transitionGroup:null}},t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===l?{status:u}:null},n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==c&&n!==f&&(t=c):n!==c&&n!==f||(t="exiting")}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!=typeof r&&(e=r.exit,t=r.enter,n=r.appear),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t){this.cancelNextCallback();var n=i.default.findDOMNode(this);t===c?this.performEnter(n,e):this.performExit(n)}else this.props.unmountOnExit&&this.state.status===u&&this.setState({status:l})},n.performEnter=function(e,t){var n=this,r=this.props.enter,a=this.context.transitionGroup?this.context.transitionGroup.isMounting:t,i=this.getTimeouts();t||r?(this.props.onEnter(e,a),this.safeSetState({status:c},function(){n.props.onEntering(e,a),n.onTransitionEnd(e,i.enter,function(){n.safeSetState({status:f},function(){n.props.onEntered(e,a)})})})):this.safeSetState({status:f},function(){n.props.onEntered(e)})},n.performExit=function(e){var t=this,n=this.props.exit,r=this.getTimeouts();n?(this.props.onExit(e),this.safeSetState({status:"exiting"},function(){t.props.onExiting(e),t.onTransitionEnd(e,r.exit,function(){t.safeSetState({status:u},function(){t.props.onExited(e)})})})):this.safeSetState({status:u},function(){t.props.onExited(e)})},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t,n){this.setNextCallback(n),e?(this.props.addEndListener&&this.props.addEndListener(e,this.nextCallback),null!=t&&setTimeout(this.nextCallback,t)):setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===l)return null;var t=this.props,n=t.children,r=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(t,["children"]);if(delete r.in,delete r.mountOnEnter,delete r.unmountOnExit,delete r.appear,delete r.enter,delete r.exit,delete r.timeout,delete r.addEndListener,delete r.onEnter,delete r.onEntering,delete r.onEntered,delete r.onExit,delete r.onExiting,delete r.onExited,"function"==typeof n)return n(e,r);var i=a.default.Children.only(n);return a.default.cloneElement(i,r)},t}(a.default.Component);function p(){}d.contextTypes={transitionGroup:r.object},d.childContextTypes={transitionGroup:function(){}},d.propTypes={},d.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:p,onEntering:p,onEntered:p,onExit:p,onExiting:p,onExited:p},d.UNMOUNTED=0,d.EXITED=1,d.ENTERING=2,d.ENTERED=3,d.EXITING=4;var h=(0,o.polyfill)(d);t.default=h},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.default}});var a=r(n(255))},function(e,t,n){"use strict";var r=n(26);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(0)),i=(0,r(n(37)).default)(a.default.createElement(a.default.Fragment,null,a.default.createElement("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),a.default.createElement("path",{fill:"none",d:"M0 0h24v24H0z"})),"ChevronLeft");t.default=i},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.default}});var a=r(n(301))},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.default}});var a=r(n(302))},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.default}});var a=r(n(305))},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.default}});var a=r(n(325))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(341)),a=i(n(342));function i(e){return e&&e.__esModule?e:{default:e}}var o=(0,r.default)(a.default);t.default=o,e.exports=t.default},function(e,t,n){"use strict";var r=n(26);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(0)),i=(0,r(n(37)).default)(a.default.createElement(a.default.Fragment,null,a.default.createElement("path",{d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"}),a.default.createElement("path",{fill:"none",d:"M0 0h24v24H0z"})),"ExpandMore");t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i="";if(!t)return i;var o=n.indent,s=void 0===o?0:o,l=t.fallbacks;if(s++,l)if(Array.isArray(l))for(var u=0;u<l.length;u++){var c=l[u];for(var f in c){var d=c[f];null!=d&&(i+="\n"+a(f+": "+(0,r.default)(d)+";",s))}}else for(var p in l){var h=l[p];null!=h&&(i+="\n"+a(p+": "+(0,r.default)(h)+";",s))}for(var m in t){var v=t[m];null!=v&&"fallbacks"!==m&&(i+="\n"+a(m+": "+(0,r.default)(v)+";",s))}return i||n.allowEmpty?i=a(e+" {"+i+"\n",--s)+a("}",s):i};var r=function(e){return e&&e.__esModule?e:{default:e}}(n(57));function a(e,t){for(var n="",r=0;r<t;r++)n+="  ";return n+e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(n(93));t.default=new r.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="",a="";if(function(e){return e&&e.__esModule?e:{default:e}}(n(59)).default){var i={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},o=document.createElement("p").style;for(var s in i)if(s+"Transform"in o){r=s,a=i[s];break}}t.default={js:r,css:a}},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(7)),i=r(n(8)),o=r(n(60)),s=r(n(216)),l=(r(n(11)),r(n(101))),u=r(n(218)),c=r(n(219)),f=r(n(225)),d=r(n(227)),p=r(n(228)),h=r(n(229)),m=r(n(61)),v=r(n(230));var g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.breakpoints,n=void 0===t?{}:t,r=e.mixins,g=void 0===r?{}:r,y=e.palette,b=void 0===y?{}:y,x=e.shadows,_=e.spacing,w=void 0===_?{}:_,T=e.typography,k=void 0===T?{}:T,C=(0,i.default)(e,["breakpoints","mixins","palette","shadows","spacing","typography"]),E=(0,c.default)(b),M=(0,l.default)(n),A=(0,a.default)({},h.default,w);return(0,a.default)({breakpoints:M,direction:"ltr",mixins:(0,u.default)(M,A,g),overrides:{},palette:E,props:{},shadows:x||d.default,typography:(0,f.default)(E,k)},(0,o.default)({shape:p.default,spacing:A,transitions:m.default,zIndex:v.default},C,{isMergeableObject:s.default}))};t.default=g},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CHANNEL=void 0;var a=r(n(10)),i="__THEMING__";t.CHANNEL=i;var o={contextTypes:(0,a.default)({},i,function(){}),initial:function(e){return e[i]?e[i].getState():null},subscribe:function(e,t){return e[i]?e[i].subscribe(t):null},unsubscribe:function(e,t){e[i]&&e[i].unsubscribe(t)}};t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){return function(){return null}};t.default=r},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(0)).default.createContext({});t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTransitionProps=function(e,t){var n=e.timeout,r=e.style,a=void 0===r?{}:r;return{duration:a.transitionDuration||"number"==typeof n?n:n[t.mode],delay:a.transitionDelay}},t.reflow=void 0;t.reflow=function(e){return e.scrollTop}},function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(285)),i=r(n(286)),o=r(n(287)),s=r(n(289)),l=r(n(290)),u=r(n(116)),c=r(n(292)),f=r(n(294)),d=r(n(0));r(n(2)),r(n(11));var p=function(){var e=null;return function(){if(null!==e)return e;var t=!1;try{window.addEventListener("test",null,function(e,t,n){return Object.defineProperty(e,t,n)}({},"passive",{get:function(){t=!0}}))}catch(e){}return e=t,t}()}(),h={capture:!1,passive:!1};function m(e){return f({},h,e)}function v(e,t,n){var r=[e,t];return r.push(p?n:n.capture),r}function g(e,t,n,r){e.addEventListener.apply(e,v(t,n,r))}function y(e,t,n,r){e.removeEventListener.apply(e,v(t,n,r))}var b=function(e){function t(){return a(this,t),o(this,s(t).apply(this,arguments))}return l(t,e),i(t,[{key:"componentDidMount",value:function(){this.applyListeners(g)}},{key:"componentDidUpdate",value:function(e){this.applyListeners(y,e),this.applyListeners(g)}},{key:"componentWillUnmount",value:function(){this.applyListeners(y)}},{key:"applyListeners",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props,n=t.target;if(n){var r=n;"string"==typeof n&&(r=window[n]),function(e,t){e.children,e.target;var n=c(e,["children","target"]);Object.keys(n).forEach(function(e){if("on"===e.substring(0,2)){var r=n[e],a=u(r),i="object"===a;if(i||"function"===a){var o="capture"===e.substr(-7).toLowerCase(),s=e.substring(2).toLowerCase();s=o?s.substring(0,s.length-7):s,i?t(s,r.handler,r.options):t(s,r,m({capture:o}))}}})}(t,e.bind(null,r))}}},{key:"render",value:function(){return this.props.children||null}}]),t}(d.PureComponent);b.propTypes={},t.withOptions=function(e,t){return{handler:e,options:m(t)}},t.default=b},function(e,t){function n(e,t,n){var r,a,i,o,s;function l(){var u=Date.now()-o;u<t&&u>=0?r=setTimeout(l,t-u):(r=null,n||(s=e.apply(i,a),i=a=null))}null==t&&(t=100);var u=function(){i=this,a=arguments,o=Date.now();var u=n&&!r;return r||(r=setTimeout(l,t)),u&&(s=e.apply(i,a),i=a=null),s};return u.clear=function(){r&&(clearTimeout(r),r=null)},u.flush=function(){r&&(s=e.apply(i,a),i=a=null,clearTimeout(r),r=null)},u}n.debounce=n,e.exports=n},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.formControlState=x,t.default=t.styles=void 0;var a=r(n(7)),i=r(n(10)),o=r(n(8)),s=r(n(12)),l=r(n(13)),u=r(n(14)),c=r(n(15)),f=r(n(16)),d=r(n(0)),p=r(n(2)),h=r(n(5)),m=r(n(9)),v=n(50),g=r(n(331)),y=n(120),b=function(e){var t="light"===e.palette.type,n={color:"currentColor",opacity:t?.42:.5,transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})},r={opacity:0},a={opacity:t?.42:.5};return{root:{fontFamily:e.typography.fontFamily,color:e.palette.text.primary,fontSize:e.typography.pxToRem(16),lineHeight:"1.1875em",cursor:"text",display:"inline-flex",alignItems:"center","&$disabled":{color:e.palette.text.disabled,cursor:"default"}},formControl:{},focused:{},disabled:{},adornedStart:{},adornedEnd:{},error:{},marginDense:{},multiline:{padding:"".concat(6,"px 0 ").concat(7,"px")},fullWidth:{width:"100%"},input:{font:"inherit",color:"currentColor",padding:"".concat(6,"px 0 ").concat(7,"px"),border:0,boxSizing:"content-box",background:"none",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":n,"&::-moz-placeholder":n,"&:-ms-input-placeholder":n,"&::-ms-input-placeholder":n,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{"-webkit-appearance":"none"},"label[data-shrink=false] + $formControl &":{"&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&:-ms-input-placeholder":r,"&::-ms-input-placeholder":r,"&:focus::-webkit-input-placeholder":a,"&:focus::-moz-placeholder":a,"&:focus:-ms-input-placeholder":a,"&:focus::-ms-input-placeholder":a},"&$disabled":{opacity:1}},inputMarginDense:{paddingTop:3},inputMultiline:{resize:"none",padding:0},inputType:{height:"1.1875em"},inputTypeSearch:{"-moz-appearance":"textfield","-webkit-appearance":"textfield"},inputAdornedStart:{},inputAdornedEnd:{}}};function x(e){var t=e.props,n=e.states,r=e.context;return n.reduce(function(e,n){return e[n]=t[n],r&&r.muiFormControl&&void 0===t[n]&&(e[n]=r.muiFormControl[n]),e},{})}t.styles=b;var _=function(e){function t(e,n){var r;(0,s.default)(this,t),(r=(0,u.default)(this,(0,c.default)(t).call(this,e,n))).state={focused:!1},r.handleFocus=function(e){if(x({props:r.props,context:r.context,states:["disabled"]}).disabled)e.stopPropagation();else{r.setState({focused:!0}),r.props.onFocus&&r.props.onFocus(e);var t=r.context.muiFormControl;t&&t.onFocus&&t.onFocus(e)}},r.handleBlur=function(e){r.setState({focused:!1}),r.props.onBlur&&r.props.onBlur(e);var t=r.context.muiFormControl;t&&t.onBlur&&t.onBlur(e)},r.handleChange=function(){var e;(r.isControlled||r.checkDirty(r.inputRef),r.props.onChange)&&(e=r.props).onChange.apply(e,arguments)},r.handleRefInput=function(e){var t;r.inputRef=e,r.props.inputRef?t=r.props.inputRef:r.props.inputProps&&r.props.inputProps.ref&&(t=r.props.inputProps.ref),(0,v.setRef)(t,e)},r.handleClick=function(e){r.inputRef&&e.currentTarget===e.target&&r.inputRef.focus(),r.props.onClick&&r.props.onClick(e)},r.isControlled=null!=e.value,r.isControlled&&r.checkDirty(e);return r.componentWillReceiveProps=function(e,t){!x({props:r.props,context:r.context,states:["disabled"]}).disabled&&x({props:e,context:t,states:["disabled"]}).disabled&&r.setState({focused:!1})},r.componentWillReceiveProps.__suppressDeprecationWarning=!0,r.componentWillUpdate=function(e,t,n){if(!x({props:r.props,context:r.context,states:["disabled"]}).disabled&&x({props:e,context:n,states:["disabled"]}).disabled){var a=r.context.muiFormControl;a&&a.onBlur&&a.onBlur()}},r.componentWillUpdate.__suppressDeprecationWarning=!0,r}return(0,f.default)(t,e),(0,l.default)(t,[{key:"getChildContext",value:function(){return{muiFormControl:null}}},{key:"componentDidMount",value:function(){this.isControlled||this.checkDirty(this.inputRef)}},{key:"componentDidUpdate",value:function(){this.isControlled&&this.checkDirty(this.props)}},{key:"checkDirty",value:function(e){var t=this.context.muiFormControl;if((0,y.isFilled)(e))return t&&t.onFilled&&t.onFilled(),void(this.props.onFilled&&this.props.onFilled());t&&t.onEmpty&&t.onEmpty(),this.props.onEmpty&&this.props.onEmpty()}},{key:"render",value:function(){var e,t,n=this.props,r=n.autoComplete,s=n.autoFocus,l=n.classes,u=n.className,c=n.defaultValue,f=(n.disabled,n.endAdornment),p=(n.error,n.fullWidth),m=n.id,v=n.inputComponent,y=n.inputProps,b=(y=void 0===y?{}:y).className,_=(0,o.default)(y,["className"]),w=(n.inputRef,n.margin,n.multiline),T=n.name,k=(n.onBlur,n.onChange,n.onClick,n.onEmpty,n.onFilled,n.onFocus,n.onKeyDown),C=n.onKeyUp,E=n.placeholder,M=n.readOnly,A=n.renderPrefix,S=n.rows,O=n.rowsMax,P=n.startAdornment,R=n.type,L=n.value,D=(0,o.default)(n,["autoComplete","autoFocus","classes","className","defaultValue","disabled","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","multiline","name","onBlur","onChange","onClick","onEmpty","onFilled","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderPrefix","rows","rowsMax","startAdornment","type","value"]),I=this.context.muiFormControl,z=x({props:this.props,context:this.context,states:["disabled","error","margin","required","filled"]}),j=(0,h.default)(l.root,(e={},(0,i.default)(e,l.disabled,z.disabled),(0,i.default)(e,l.error,z.error),(0,i.default)(e,l.fullWidth,p),(0,i.default)(e,l.focused,this.state.focused),(0,i.default)(e,l.formControl,I),(0,i.default)(e,l.marginDense,"dense"===z.margin),(0,i.default)(e,l.multiline,w),(0,i.default)(e,l.adornedStart,P),(0,i.default)(e,l.adornedEnd,f),e),u),N=(0,h.default)(l.input,(t={},(0,i.default)(t,l.disabled,z.disabled),(0,i.default)(t,l.inputType,"text"!==R),(0,i.default)(t,l.inputTypeSearch,"search"===R),(0,i.default)(t,l.inputMultiline,w),(0,i.default)(t,l.inputMarginDense,"dense"===z.margin),(0,i.default)(t,l.inputAdornedStart,P),(0,i.default)(t,l.inputAdornedEnd,f),t),b),F=v,B=(0,a.default)({},_,{ref:this.handleRefInput});return"string"!=typeof F?B=(0,a.default)({inputRef:this.handleRefInput,type:R},B,{ref:null}):w?S&&!O?F="textarea":(B=(0,a.default)({rowsMax:O,textareaRef:this.handleRefInput},B,{ref:null}),F=g.default):B=(0,a.default)({type:R},B),d.default.createElement("div",(0,a.default)({className:j,onClick:this.handleClick},D),A?A((0,a.default)({},z,{startAdornment:P,focused:this.state.focused})):null,P,d.default.createElement(F,(0,a.default)({"aria-invalid":z.error,autoComplete:r,autoFocus:s,className:N,defaultValue:c,disabled:z.disabled,id:m,name:T,onBlur:this.handleBlur,onChange:this.handleChange,onFocus:this.handleFocus,onKeyDown:k,onKeyUp:C,placeholder:E,readOnly:M,required:z.required,rows:S,value:L},B)),f)}}]),t}(d.default.Component);_.propTypes={},_.defaultProps={fullWidth:!1,inputComponent:"input",multiline:!1,type:"text"},_.contextTypes={muiFormControl:p.default.object},_.childContextTypes={muiFormControl:p.default.object};var w=(0,m.default)(b,{name:"MuiInputBase"})(_);t.default=w},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.default}});var a=r(n(306))},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.default}});var a=r(n(295))},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.default}});var a=r(n(308))},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.default}});var a=r(n(321))},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.default}});var a=r(n(335))},function(e,t,n){"use strict";var r=n(26);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(0)),i=(0,r(n(37)).default)(a.default.createElement(a.default.Fragment,null,a.default.createElement("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),a.default.createElement("path",{fill:"none",d:"M0 0h24v24H0z"})),"Search");t.default=i},function(e,t,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var r=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,o,s=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),l=1;l<arguments.length;l++){for(var u in n=Object(arguments[l]))a.call(n,u)&&(s[u]=n[u]);if(r){o=r(n);for(var c=0;c<o.length;c++)i.call(n,o[c])&&(s[o[c]]=n[o[c]])}}return s}},function(e,t,n){"use strict";var r=n(179),a=(n(0),{childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0}),i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={};o[r.ForwardRef]={$$typeof:!0,render:!0};var s=Object.defineProperty,l=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,c=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,d=Object.prototype;e.exports=function e(t,n,r){if("string"!=typeof n){if(d){var p=f(n);p&&p!==d&&e(t,p,r)}var h=l(n);u&&(h=h.concat(u(n)));for(var m=o[t.$$typeof]||a,v=o[n.$$typeof]||a,g=0;g<h.length;++g){var y=h[g];if(!(i[y]||r&&r[y]||v&&v[y]||m&&m[y])){var b=c(n,y);try{s(t,y,b)}catch(e){}}}return t}return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.create=t.createGenerateClassName=t.sheets=t.RuleList=t.SheetsManager=t.SheetsRegistry=t.toCssValue=t.getDynamicStyles=void 0;var r=n(182);Object.defineProperty(t,"getDynamicStyles",{enumerable:!0,get:function(){return f(r).default}});var a=n(57);Object.defineProperty(t,"toCssValue",{enumerable:!0,get:function(){return f(a).default}});var i=n(93);Object.defineProperty(t,"SheetsRegistry",{enumerable:!0,get:function(){return f(i).default}});var o=n(183);Object.defineProperty(t,"SheetsManager",{enumerable:!0,get:function(){return f(o).default}});var s=n(47);Object.defineProperty(t,"RuleList",{enumerable:!0,get:function(){return f(s).default}});var l=n(74);Object.defineProperty(t,"sheets",{enumerable:!0,get:function(){return f(l).default}});var u=n(96);Object.defineProperty(t,"createGenerateClassName",{enumerable:!0,get:function(){return f(u).default}});var c=f(n(189));function f(e){return e&&e.__esModule?e:{default:e}}var d=t.create=function(e){return new c.default(e)};t.default=d()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.registry=[]}return r(e,[{key:"add",value:function(e){var t=this.registry,n=e.options.index;if(-1===t.indexOf(e))if(0===t.length||n>=this.index)t.push(e);else for(var r=0;r<t.length;r++)if(t[r].options.index>n)return void t.splice(r,0,e)}},{key:"reset",value:function(){this.registry=[]}},{key:"remove",value:function(e){var t=this.registry.indexOf(e);this.registry.splice(t,1)}},{key:"toString",value:function(e){return this.registry.filter(function(e){return e.attached}).map(function(t){return t.toString(e)}).join("\n")}},{key:"index",get:function(){return 0===this.registry.length?0:this.registry[this.registry.length-1].options.index}}]),e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(n(185));t.default=function(e){return e&&e[r.default]&&e===e[r.default]()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){e.renderable=t,e.rules&&t.cssRules&&e.rules.link(t.cssRules)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(38)),a=(i(n(97)),i(n(188)));function i(e){return e&&e.__esModule?e:{default:e}}t.default=function(){var e=0;return function(t,n){(e+=1)>1e10&&(0,r.default)(!1,"[JSS] You might have a memory leak. Rule counter is at %s.",e);var i="c",o="";return n&&(i=n.options.classNamePrefix||"c",null!=n.options.jss.id&&(o+=n.options.jss.id)),""+i+a.default+o+e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=s(n(95)),o=s(n(47));function s(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(t,n){var a=this;for(var i in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.update=function(e,t){return"string"==typeof e?a.rules.update(e,t):a.rules.update(e),a},this.attached=!1,this.deployed=!1,this.linked=!1,this.classes={},this.options=r({},n,{sheet:this,parent:this,classes:this.classes}),this.renderer=new n.Renderer(this),this.rules=new o.default(this.options),t)this.rules.add(i,t[i]);this.rules.process()}return a(e,[{key:"attach",value:function(){return this.attached?this:(this.deployed||this.deploy(),this.renderer.attach(),!this.linked&&this.options.link&&this.link(),this.attached=!0,this)}},{key:"detach",value:function(){return this.attached?(this.renderer.detach(),this.attached=!1,this):this}},{key:"addRule",value:function(e,t,n){var r=this.queue;this.attached&&!r&&(this.queue=[]);var a=this.rules.add(e,t,n);return this.options.jss.plugins.onProcessRule(a),this.attached?this.deployed?(r?r.push(a):(this.insertRule(a),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0)),a):a:(this.deployed=!1,a)}},{key:"insertRule",value:function(e){var t=this.renderer.insertRule(e);t&&this.options.link&&(0,i.default)(e,t)}},{key:"addRules",value:function(e,t){var n=[];for(var r in e)n.push(this.addRule(r,e[r],t));return n}},{key:"getRule",value:function(e){return this.rules.get(e)}},{key:"deleteRule",value:function(e){var t=this.rules.get(e);return!!t&&(this.rules.remove(t),!this.attached||!t.renderable||this.renderer.deleteRule(t.renderable))}},{key:"indexOf",value:function(e){return this.rules.indexOf(e)}},{key:"deploy",value:function(){return this.renderer.deploy(),this.deployed=!0,this}},{key:"link",value:function(){var e=this.renderer.getRules();return e&&this.rules.link(e),this.linked=!0,this}},{key:"toString",value:function(e){return this.rules.toString(e)}}]),e}();t.default=l},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(202)),i=r(n(203)),o=r(n(205)),s=r(n(207)),l=r(n(209)),u=r(n(214));var c=function(){return{plugins:[(0,a.default)(),(0,i.default)(),(0,o.default)(),(0,s.default)(),"undefined"==typeof window?null:(0,l.default)(),(0,u.default)()]}};t.default=c},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(7));r(n(11)),r(n(100));var i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.baseClasses,n=e.newClasses;if(e.Component,!n)return t;var r=(0,a.default)({},t);return Object.keys(n).forEach(function(e){n[e]&&(r[e]="".concat(t[e]," ").concat(n[e]))}),r};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFunctionName=a,t.default=void 0;var r=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function a(e){var t="".concat(e).match(r);return t&&t[1]||""}var i=function(e){return"string"==typeof e?e:e?e.displayName||e.name||a(e)||"Component":void 0};t.default=i},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.values,n=void 0===t?{xs:0,sm:600,md:960,lg:1280,xl:1920}:t,r=e.unit,s=void 0===r?"px":r,l=e.step,u=void 0===l?5:l,c=(0,i.default)(e,["values","unit","step"]);function f(e){var t="number"==typeof n[e]?n[e]:e;return"@media (min-width:".concat(t).concat(s,")")}function d(e,t){var r=o.indexOf(t)+1;return r===o.length?f(e):"@media (min-width:".concat(n[e]).concat(s,") and ")+"(max-width:".concat(n[o[r]]-u/100).concat(s,")")}return(0,a.default)({keys:o,values:n,up:f,down:function(e){var t=o.indexOf(e)+1,r=n[o[t]];if(t===o.length)return f("xs");return"@media (max-width:".concat(("number"==typeof r&&t>0?r:e)-u/100).concat(s,")")},between:d,only:function(e){return d(e,e)},width:function(e){return n[e]}},c)},t.keys=void 0;var a=r(n(7)),i=r(n(8)),o=["xs","sm","md","lg","xl"];t.keys=o},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dangerouslyUseGlobalCSS,n=void 0!==t&&t,r=e.productionPrefix,a=void 0===r?"jss":r,o=e.seed,s=void 0===o?"":o,l=0;return function(e,t){return l+=1,n&&t&&t.options.name?"".concat(i(t.options.name),"-").concat(e.key):"".concat(a).concat(s).concat(l)}};r(n(11));var a=/([[\].#*$><+~=|^:(),"'`\s])/g;function i(e){return String(e).replace(a,"-")}},function(e,t,n){var r=n(239),a=n(240),i=n(241);e.exports=function(e){return r(e)||a(e)||i()}},function(e,t,n){"use strict";function r(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function a(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!==n&&void 0!==n?n:null}.bind(this))}function i(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}function o(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!=typeof e.getDerivedStateFromProps&&"function"!=typeof t.getSnapshotBeforeUpdate)return e;var n=null,o=null,s=null;if("function"==typeof t.componentWillMount?n="componentWillMount":"function"==typeof t.UNSAFE_componentWillMount&&(n="UNSAFE_componentWillMount"),"function"==typeof t.componentWillReceiveProps?o="componentWillReceiveProps":"function"==typeof t.UNSAFE_componentWillReceiveProps&&(o="UNSAFE_componentWillReceiveProps"),"function"==typeof t.componentWillUpdate?s="componentWillUpdate":"function"==typeof t.UNSAFE_componentWillUpdate&&(s="UNSAFE_componentWillUpdate"),null!==n||null!==o||null!==s){var l=e.displayName||e.name,u="function"==typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+l+" uses "+u+" but also contains the following legacy lifecycles:"+(null!==n?"\n  "+n:"")+(null!==o?"\n  "+o:"")+(null!==s?"\n  "+s:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"==typeof e.getDerivedStateFromProps&&(t.componentWillMount=r,t.componentWillReceiveProps=a),"function"==typeof t.getSnapshotBeforeUpdate){if("function"!=typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=i;var c=t.componentDidUpdate;t.componentDidUpdate=function(e,t,n){var r=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:n;c.call(this,e,t,r)}}return e}n.r(t),n.d(t,"polyfill",function(){return o}),r.__suppressDeprecationWarning=!0,a.__suppressDeprecationWarning=!0,i.__suppressDeprecationWarning=!0},function(e,t,n){"use strict";var r=n(26);t.__esModule=!0,t.default=void 0;var a=r(n(261)),i=function(e){return(0,a.default)("displayName",e)};t.default=i},function(e,t,n){"use strict";var r=n(26);t.__esModule=!0,t.default=void 0;var a=r(n(262)),i=function(e,t){return t+"("+(0,a.default)(e)+")"};t.default=i},function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty;function a(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}e.exports=function(e,t){if(a(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(var o=0;o<n.length;o++)if(!r.call(t,n[o])||!a(e[n[o]],t[n[o]]))return!1;return!0}},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"ModalManager",{enumerable:!0,get:function(){return i.default}});var a=r(n(266)),i=r(n(111))},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.default}});var a=r(n(267))},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.default}});var a=r(n(268))},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(12)),i=r(n(13)),o=r(n(269)),s=r(n(114)),l=r(n(36)),u=r(n(277)),c=n(115);function f(e,t){var n=-1;return e.some(function(e,r){return!!t(e)&&(n=r,!0)}),n}function d(e){return parseInt((0,o.default)(e,"paddingRight")||0,10)}var p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,a.default)(this,e);var n=t.hideSiblingNodes,r=void 0===n||n,i=t.handleContainerOverflow,o=void 0===i||i;this.hideSiblingNodes=r,this.handleContainerOverflow=o,this.modals=[],this.data=[]}return(0,i.default)(e,[{key:"add",value:function(e,t){var n=this.modals.indexOf(e);if(-1!==n)return n;n=this.modals.length,this.modals.push(e),e.modalRef&&(0,c.ariaHidden)(e.modalRef,!1),this.hideSiblingNodes&&(0,c.ariaHiddenSiblings)(t,e.mountNode,e.modalRef,!0);var r=f(this.data,function(e){return e.container===t});if(-1!==r)return this.data[r].modals.push(e),n;var a={modals:[e],container:t,overflowing:(0,u.default)(t),prevPaddings:[]};return this.handleContainerOverflow&&function(e,t){var n={overflow:"hidden"};if(e.style={overflow:t.style.overflow,paddingRight:t.style.paddingRight},e.overflowing){var r=(0,s.default)();n.paddingRight="".concat(d(t)+r,"px");for(var a=(0,l.default)(t).querySelectorAll(".mui-fixed"),i=0;i<a.length;i+=1){var o=d(a[i]);e.prevPaddings.push(o),a[i].style.paddingRight="".concat(o+r,"px")}}Object.keys(n).forEach(function(e){t.style[e]=n[e]})}(a,t),this.data.push(a),n}},{key:"remove",value:function(e){var t=this.modals.indexOf(e);if(-1===t)return t;var n=f(this.data,function(t){return-1!==t.modals.indexOf(e)}),r=this.data[n];if(r.modals.splice(r.modals.indexOf(e),1),this.modals.splice(t,1),0===r.modals.length)this.handleContainerOverflow&&function(e){Object.keys(e.style).forEach(function(t){e.container.style[t]=e.style[t]});for(var t=(0,l.default)(e.container).querySelectorAll(".mui-fixed"),n=0;n<t.length;n+=1)t[n].style.paddingRight="".concat(e.prevPaddings[n],"px")}(r),e.modalRef&&(0,c.ariaHidden)(e.modalRef,!0),this.hideSiblingNodes&&(0,c.ariaHiddenSiblings)(r.container,e.mountNode,e.modalRef,!1),this.data.splice(n,1);else if(this.hideSiblingNodes){var a=r.modals[r.modals.length-1];a.modalRef&&(0,c.ariaHidden)(a.modalRef,!1)}return t}},{key:"isTopModal",value:function(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}]),e}();t.default=p},function(e,t,n){"use strict";var r=n(4);t.__esModule=!0,t.default=function(e){return(0,a.default)(e.replace(i,"ms-"))};var a=r(n(270)),i=/^-ms-/;e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=!("undefined"==typeof window||!window.document||!window.document.createElement);t.default=r,e.exports=t.default},function(e,t,n){"use strict";var r=n(4);t.__esModule=!0,t.default=function(e){if((!a&&0!==a||e)&&i.default){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),a=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return a};var a,i=r(n(113));e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ariaHidden=a,t.ariaHiddenSiblings=function(e,t,n,i){!function(e,t,n,a){var i=[t,n];[].forEach.call(e.children,function(e){-1===i.indexOf(e)&&function(e){return 1===e.nodeType&&-1===r.indexOf(e.tagName.toLowerCase())}(e)&&a(e)})}(e,t,n,function(e){return a(e,i)})};var r=["template","script","style"];function a(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(t){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?e.exports=r=function(e){return n(e)}:e.exports=r=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},r(t)}e.exports=r},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.default}});var a=r(n(307))},function(e,t,n){"use strict";var r=n(4);t.__esModule=!0,t.default=void 0;var a=r(n(317)),i=function(e){return(0,a.default)("displayName",e)};t.default=i},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var a=r(n(7)),i=r(n(8)),o=r(n(12)),s=r(n(13)),l=r(n(14)),u=r(n(15)),c=r(n(16)),f=r(n(0)),d=(r(n(2)),r(n(17))),p=r(n(114)),h=r(n(9)),m=r(n(84)),v=r(n(327)),g={vertical:"top",horizontal:"right"},y={vertical:"top",horizontal:"left"},b={paper:{maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}};t.styles=b;var x=function(e){function t(){var e,n;(0,o.default)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=(0,l.default)(this,(e=(0,u.default)(t)).call.apply(e,[this].concat(a)))).getContentAnchorEl=function(){return n.menuListRef&&n.menuListRef.selectedItemRef?d.default.findDOMNode(n.menuListRef.selectedItemRef):d.default.findDOMNode(n.menuListRef).firstChild},n.focus=function(){if(n.menuListRef&&n.menuListRef.selectedItemRef)d.default.findDOMNode(n.menuListRef.selectedItemRef).focus();else{var e=d.default.findDOMNode(n.menuListRef);e&&e.firstChild&&e.firstChild.focus()}},n.handleEntering=function(e){var t=n.props,r=t.disableAutoFocusItem,a=t.theme,i=d.default.findDOMNode(n.menuListRef);if(!0!==r&&n.focus(),i&&e.clientHeight<i.clientHeight&&!i.style.width){var o="".concat((0,p.default)(),"px");i.style["rtl"===a.direction?"paddingLeft":"paddingRight"]=o,i.style.width="calc(100% + ".concat(o,")")}n.props.onEntering&&n.props.onEntering(e)},n.handleListKeyDown=function(e,t){"tab"===t&&(e.preventDefault(),n.props.onClose&&n.props.onClose(e))},n}return(0,c.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){this.props.open&&!0!==this.props.disableAutoFocusItem&&this.focus()}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,r=t.classes,o=(t.disableAutoFocusItem,t.MenuListProps),s=(t.onEntering,t.PaperProps),l=void 0===s?{}:s,u=t.PopoverClasses,c=t.theme,d=(0,i.default)(t,["children","classes","disableAutoFocusItem","MenuListProps","onEntering","PaperProps","PopoverClasses","theme"]);return f.default.createElement(m.default,(0,a.default)({getContentAnchorEl:this.getContentAnchorEl,classes:u,onEntering:this.handleEntering,anchorOrigin:"rtl"===c.direction?g:y,transformOrigin:"rtl"===c.direction?g:y,PaperProps:(0,a.default)({},l,{classes:(0,a.default)({},l.classes,{root:r.paper})})},d),f.default.createElement(v.default,(0,a.default)({onKeyDown:this.handleListKeyDown},o,{ref:function(t){e.menuListRef=t}}),n))}}]),t}(f.default.Component);x.propTypes={},x.defaultProps={disableAutoFocusItem:!1,transitionDuration:"auto"};var _=(0,h.default)(b,{name:"MuiMenu",withTheme:!0})(x);t.default=_},function(e,t,n){"use strict";function r(e){return null!=e&&!(Array.isArray(e)&&0===e.length)}Object.defineProperty(t,"__esModule",{value:!0}),t.hasValue=r,t.isFilled=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e&&(r(e.value)&&""!==e.value||t&&r(e.defaultValue)&&""!==e.defaultValue)},t.isAdornedStart=function(e){return e.startAdornment}},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(0)),i=r(n(41)),o=r(n(33)),s=a.default.createElement("path",{d:"M7 10l5 5 5-5z"}),l=function(e){return a.default.createElement(o.default,e,s)};(l=(0,i.default)(l)).muiName="SvgIcon";var u=l;t.default=u},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(7)),i=r(n(10)),o=r(n(8)),s=r(n(0)),l=(r(n(2)),r(n(5)));function u(e){var t,n=e.children,r=e.classes,u=e.className,c=e.disabled,f=e.IconComponent,d=e.inputRef,p=e.name,h=e.onChange,m=e.value,v=e.variant,g=(0,o.default)(e,["children","classes","className","disabled","IconComponent","inputRef","name","onChange","value","variant"]);return s.default.createElement("div",{className:r.root},s.default.createElement("select",(0,a.default)({className:(0,l.default)(r.select,(t={},(0,i.default)(t,r.filled,"filled"===v),(0,i.default)(t,r.outlined,"outlined"===v),(0,i.default)(t,r.disabled,c),t),u),name:p,disabled:c,onChange:h,value:m,ref:d},g),n),s.default.createElement(f,{className:r.icon}))}u.propTypes={};var c=u;t.default=c},function(e,t,n){"use strict";function r(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.default}});var a=r(n(249))},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.default}});var a=r(n(254))},function(e,t,n){"use strict";var r=n(26);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(0)),i=(0,r(n(37)).default)(a.default.createElement(a.default.Fragment,null,a.default.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),a.default.createElement("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"})),"Menu");t.default=i},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.default}});var a=r(n(265))},function(e,t,n){"use strict";var r=n(26);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(0)),i=(0,r(n(37)).default)(a.default.createElement(a.default.Fragment,null,a.default.createElement("path",{fill:"none",d:"M0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0z"}),a.default.createElement("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"})),"VisibilityOff");t.default=i},function(e,t,n){"use strict";var r=n(26);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(0)),i=(0,r(n(37)).default)(a.default.createElement(a.default.Fragment,null,a.default.createElement("path",{d:"M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}),a.default.createElement("path",{fill:"none",d:"M0 0h24v24H0z"})),"ExpandLess");t.default=i},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.default}});var a=r(n(337))},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.default}});var a=r(n(119))},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.default}});var a=r(n(338))},function(e,t,n){"use strict";var r=n(26);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(0)),i=(0,r(n(37)).default)(a.default.createElement(a.default.Fragment,null,a.default.createElement("path",{d:"M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z"}),a.default.createElement("path",{fill:"none",d:"M0 0h24v24H0z"})),"List");t.default=i},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.default}});var a=r(n(339))},function(e,t,n){!function(e,t,n,r,a,i,o){"use strict";if(void 0===s)var s={env:{}};var l=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},p=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},h=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},m=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},v=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},g=function(e){function n(){return l(this,n),h(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return d(n,e),u(n,[{key:"render",value:function(){var e=this.props,n=e.rows,i=e.columns,o=e.getRowId,s=e.getCellValue,l=e.rootComponent,u=p(e,["rows","columns","getRowId","getCellValue","rootComponent"]);return t.createElement(r.Plugin,null,t.createElement(r.Getter,{name:"rows",value:n}),t.createElement(r.Getter,{name:"getRowId",value:a.rowIdGetter(o,n)}),t.createElement(r.Getter,{name:"columns",value:i}),t.createElement(r.Getter,{name:"getCellValue",value:a.cellValueGetter(s,i)}),t.createElement(r.Template,{name:"root"},t.createElement(l,u,t.createElement(r.TemplatePlaceholder,{name:"header"}),t.createElement(r.TemplatePlaceholder,{name:"body"}),t.createElement(r.TemplatePlaceholder,{name:"footer"}))))}}]),n}(t.PureComponent);"production"!==s.env.NODE_ENV&&(g.propTypes={rows:n.array.isRequired,getRowId:n.func,getCellValue:n.func,columns:n.array.isRequired,rootComponent:n.func.isRequired}),g.defaultProps={getRowId:void 0,getCellValue:void 0};var y=function(e){var n=e.rows,a=e.columns,i=e.getRowId,o=e.getCellValue,s=e.rootComponent,l=e.children,u=p(e,["rows","columns","getRowId","getCellValue","rootComponent","children"]);return t.createElement(r.PluginHost,null,t.createElement(g,f({rows:n,columns:a,getRowId:i,getCellValue:o,rootComponent:s},u)),l)};"production"!==s.env.NODE_ENV&&(y.propTypes={rows:n.array.isRequired,getRowId:n.func,getCellValue:n.func,columns:n.array.isRequired,rootComponent:n.func.isRequired,children:n.node}),y.defaultProps={getRowId:void 0,getCellValue:void 0,children:void 0};var b=[{name:"TableColumnVisibility"},{name:"Toolbar"}],x=function(e){function n(e){l(this,n);var t=h(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={visible:!1},t.handleToggle=t.handleToggle.bind(t),t.handleHide=t.handleHide.bind(t),t.setButtonRef=t.setButtonRef.bind(t),t}return d(n,e),u(n,[{key:"setButtonRef",value:function(e){this.button=e}},{key:"handleToggle",value:function(){var e=this.state.visible;this.setState({visible:!e})}},{key:"handleHide",value:function(){this.setState({visible:!1})}},{key:"render",value:function(){var e=this,n=this.props,o=n.overlayComponent,s=n.containerComponent,l=n.itemComponent,u=n.toggleButtonComponent,c=n.messages,f=i.getMessagesFormatter(c),d=this.state.visible;return t.createElement(r.Plugin,{name:"ColumnChooser",dependencies:b},t.createElement(r.Template,{name:"toolbarContent"},t.createElement(r.TemplatePlaceholder,null),t.createElement(r.TemplateConnector,null,function(n,r){var i=n.columns,c=n.hiddenColumnNames,p=n.isColumnTogglingEnabled,h=r.toggleColumnVisibility;return t.createElement(t.Fragment,null,t.createElement(u,{buttonRef:e.setButtonRef,onToggle:e.handleToggle,getMessage:f,active:d}),t.createElement(o,{visible:d,target:e.button,onHide:e.handleHide},t.createElement(s,null,a.columnChooserItems(i,c).map(function(e){var n=e.column.name,r=p(n);return t.createElement(l,{key:n,item:e,disabled:!r,onToggle:function(){return h(n)}})}))))})))}}]),n}(t.PureComponent);"production"!==s.env.NODE_ENV&&(x.propTypes={overlayComponent:n.func.isRequired,containerComponent:n.func.isRequired,itemComponent:n.func.isRequired,toggleButtonComponent:n.func.isRequired,messages:n.object}),x.defaultProps={messages:{}},x.components={overlayComponent:"Overlay",containerComponent:"Container",itemComponent:"Item",toggleButtonComponent:"ToggleButton"};var _=function(e){var t=e.filters,n=e.filterExpression;return a.filterExpression(t,n)},w=function(e){function n(e){l(this,n);var t=h(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));t.state={filters:e.filters||e.defaultFilters};var i=r.createStateHelper(t,{filters:function(){var e=t.props.onFiltersChange;return e}});return t.changeColumnFilter=i.applyFieldReducer.bind(i,"filters",a.changeColumnFilter),t}return d(n,e),u(n,[{key:"render",value:function(){var e=this.state.filters,n=this.props,i=n.columnExtensions,o=n.columnFilteringEnabled;return t.createElement(r.Plugin,{name:"FilteringState"},t.createElement(r.Getter,{name:"filters",value:e}),t.createElement(r.Getter,{name:"filterExpression",computed:_}),t.createElement(r.Getter,{name:"isColumnFilteringEnabled",value:function(e,t){return a.getColumnExtensionValueGetter(e,"filteringEnabled",t)}(i,o)}),t.createElement(r.Action,{name:"changeColumnFilter",action:this.changeColumnFilter}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.filters,r=void 0===n?t.filters:n;return{filters:r}}}]),n}(t.PureComponent);"production"!==s.env.NODE_ENV&&(w.propTypes={filters:n.array,defaultFilters:n.array,onFiltersChange:n.func,columnExtensions:n.array,columnFilteringEnabled:n.bool}),w.defaultProps={filters:void 0,defaultFilters:[],onFiltersChange:void 0,columnExtensions:void 0,columnFilteringEnabled:!0};var T=[{name:"FilteringState",optional:!0},{name:"SearchState",optional:!0}],k=function(e){var t=e.rows;return a.filteredCollapsedRowsGetter(t)},C=function(e){var t=e.rows;return a.unwrappedFilteredRows(t)},E=function(e){function n(){return l(this,n),h(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return d(n,e),u(n,[{key:"render",value:function(){var e=this.props.columnExtensions,n=function(t){return a.getColumnExtension(e,t).predicate};return t.createElement(r.Plugin,{name:"IntegratedFiltering",dependencies:T},t.createElement(r.Getter,{name:"rows",computed:function(e){var t=e.rows,r=e.filterExpression,i=e.getCellValue,o=e.getRowLevelKey,s=e.getCollapsedRows;return a.filteredRows(t,r,i,n,o,s)}}),t.createElement(r.Getter,{name:"getCollapsedRows",computed:k}),t.createElement(r.Getter,{name:"rows",computed:C}))}}]),n}(t.PureComponent);E.defaultPredicate=a.defaultFilterPredicate,"production"!==s.env.NODE_ENV&&(E.propTypes={columnExtensions:n.array}),E.defaultProps={columnExtensions:void 0};var M=function(e){function n(e){l(this,n);var t=h(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e)),i=e.rowChanges||e.defaultRowChanges,o=e.addedRows||e.defaultAddedRows;t.state={editingRowIds:e.editingRowIds||e.defaultEditingRowIds,addedRows:o,rowChanges:i,deletedRowIds:e.deletedRowIds||e.defaultDeletedRowIds};var s=r.createStateHelper(t,{editingRowIds:function(){var e=t.props.onEditingRowIdsChange;return e},addedRows:function(){var e=t.props.onAddedRowsChange;return e},rowChanges:function(){var e=t.props.onRowChangesChange;return e},deletedRowIds:function(){var e=t.props.onDeletedRowIdsChange;return e}});return t.startEditRows=s.applyFieldReducer.bind(s,"editingRowIds",a.startEditRows),t.stopEditRows=s.applyFieldReducer.bind(s,"editingRowIds",a.stopEditRows),t.changeRow=s.applyFieldReducer.bind(s,"rowChanges",a.changeRow),t.cancelChangedRows=s.applyFieldReducer.bind(s,"rowChanges",a.cancelChanges),t.commitChangedRows=function(e){var n=e.rowIds,r=t.props.onCommitChanges;r({changed:a.changedRowsByIds(t.state.rowChanges,n)}),t.cancelChangedRows({rowIds:n})},t.addRow=s.applyFieldReducer.bind(s,"addedRows",a.addRow),t.changeAddedRow=s.applyFieldReducer.bind(s,"addedRows",a.changeAddedRow),t.cancelAddedRows=s.applyFieldReducer.bind(s,"addedRows",a.cancelAddedRows),t.commitAddedRows=function(e){var n=e.rowIds,r=t.props.onCommitChanges;r({added:a.addedRowsByIds(t.state.addedRows,n)}),t.cancelAddedRows({rowIds:n})},t.deleteRows=s.applyFieldReducer.bind(s,"deletedRowIds",a.deleteRows),t.cancelDeletedRows=s.applyFieldReducer.bind(s,"deletedRowIds",a.cancelDeletedRows),t.commitDeletedRows=function(e){var n=e.rowIds,r=t.props.onCommitChanges;r({deleted:n}),t.cancelDeletedRows({rowIds:n})},t}return d(n,e),u(n,[{key:"render",value:function(){var e=this.props,n=e.createRowChange,i=e.columnExtensions,o=e.columnEditingEnabled,s=this.state,l=s.editingRowIds,u=s.rowChanges,c=s.addedRows,f=s.deletedRowIds;return t.createElement(r.Plugin,{name:"EditingState"},t.createElement(r.Getter,{name:"createRowChange",value:a.createRowChangeGetter(n,i)}),t.createElement(r.Getter,{name:"editingRowIds",value:l}),t.createElement(r.Action,{name:"startEditRows",action:this.startEditRows}),t.createElement(r.Action,{name:"stopEditRows",action:this.stopEditRows}),t.createElement(r.Getter,{name:"rowChanges",value:u}),t.createElement(r.Action,{name:"changeRow",action:this.changeRow}),t.createElement(r.Action,{name:"cancelChangedRows",action:this.cancelChangedRows}),t.createElement(r.Action,{name:"commitChangedRows",action:this.commitChangedRows}),t.createElement(r.Getter,{name:"addedRows",value:c}),t.createElement(r.Action,{name:"addRow",action:this.addRow}),t.createElement(r.Action,{name:"changeAddedRow",action:this.changeAddedRow}),t.createElement(r.Action,{name:"cancelAddedRows",action:this.cancelAddedRows}),t.createElement(r.Action,{name:"commitAddedRows",action:this.commitAddedRows}),t.createElement(r.Getter,{name:"deletedRowIds",value:f}),t.createElement(r.Action,{name:"deleteRows",action:this.deleteRows}),t.createElement(r.Action,{name:"cancelDeletedRows",action:this.cancelDeletedRows}),t.createElement(r.Action,{name:"commitDeletedRows",action:this.commitDeletedRows}),t.createElement(r.Getter,{name:"isColumnEditingEnabled",value:function(e,t){return a.getColumnExtensionValueGetter(e,"editingEnabled",t)}(i,o)}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.editingRowIds,r=void 0===n?t.editingRowIds:n,a=e.rowChanges,i=void 0===a?t.rowChanges:a,o=e.addedRows,s=void 0===o?t.addedRows:o,l=e.deletedRowIds,u=void 0===l?t.deletedRowIds:l;return{editingRowIds:r,rowChanges:i,addedRows:s,deletedRowIds:u}}}]),n}(t.PureComponent);"production"!==s.env.NODE_ENV&&(M.propTypes={createRowChange:n.func,columnEditingEnabled:n.bool,columnExtensions:n.array,editingRowIds:n.array,defaultEditingRowIds:n.array,onEditingRowIdsChange:n.func,addedRows:n.array,defaultAddedRows:n.array,onAddedRowsChange:n.func,rowChanges:n.object,defaultRowChanges:n.object,onRowChangesChange:n.func,deletedRowIds:n.array,defaultDeletedRowIds:n.array,onDeletedRowIdsChange:n.func,onCommitChanges:n.func.isRequired}),M.defaultProps={createRowChange:void 0,columnEditingEnabled:!0,columnExtensions:void 0,editingRowIds:void 0,defaultEditingRowIds:[],onEditingRowIdsChange:void 0,rowChanges:void 0,defaultRowChanges:{},onRowChangesChange:void 0,addedRows:void 0,defaultAddedRows:[],onAddedRowsChange:void 0,deletedRowIds:void 0,defaultDeletedRowIds:[],onDeletedRowIdsChange:void 0};var A=function(e){function n(e){l(this,n);var t=h(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));t.state={currentPage:e.currentPage||e.defaultCurrentPage,pageSize:void 0!==e.pageSize?e.pageSize:e.defaultPageSize};var i=r.createStateHelper(t,{currentPage:function(){var e=t.props.onCurrentPageChange;return e},pageSize:function(){var e=t.props.onPageSizeChange;return e}});return t.setCurrentPage=i.applyFieldReducer.bind(i,"currentPage",a.setCurrentPage),t.setPageSize=i.applyFieldReducer.bind(i,"pageSize",a.setPageSize),t}return d(n,e),u(n,[{key:"render",value:function(){var e=this.state,n=e.pageSize,a=e.currentPage;return t.createElement(r.Plugin,{name:"PagingState"},t.createElement(r.Getter,{name:"currentPage",value:a}),t.createElement(r.Getter,{name:"pageSize",value:n}),t.createElement(r.Action,{name:"setCurrentPage",action:this.setCurrentPage}),t.createElement(r.Action,{name:"setPageSize",action:this.setPageSize}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.currentPage,r=void 0===n?t.currentPage:n,a=e.pageSize,i=void 0===a?t.pageSize:a;return{currentPage:r,pageSize:i}}}]),n}(t.PureComponent);"production"!==s.env.NODE_ENV&&(A.propTypes={pageSize:n.number,defaultPageSize:n.number,onPageSizeChange:n.func,currentPage:n.number,defaultCurrentPage:n.number,onCurrentPageChange:n.func}),A.defaultProps={pageSize:void 0,defaultPageSize:10,onPageSizeChange:void 0,currentPage:void 0,defaultCurrentPage:0,onCurrentPageChange:void 0};var S=[{name:"PagingState"}],O=function(e){var t=e.rows,n=e.pageSize,r=e.getRowLevelKey;return a.rowsWithPageHeaders(t,n,r)},P=function(e){var t=e.rows;return a.rowCount(t)},R=function(e){var t=e.rows,n=e.pageSize,r=e.currentPage;return a.paginatedRows(t,n,r)},L=function(e,t){var n=e.currentPage,r=e.totalCount,i=e.pageSize,o=t.setCurrentPage;return a.currentPage(n,r,i,o)},D=function(e){function n(){return l(this,n),h(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return d(n,e),u(n,[{key:"render",value:function(){return t.createElement(r.Plugin,{name:"IntegratedPaging",dependencies:S},t.createElement(r.Getter,{name:"rows",computed:O}),t.createElement(r.Getter,{name:"totalCount",computed:P}),t.createElement(r.Getter,{name:"currentPage",computed:L}),t.createElement(r.Getter,{name:"rows",computed:R}))}}]),n}(t.PureComponent),I=[{name:"PagingState"}],z=function(e){function n(){return l(this,n),h(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return d(n,e),u(n,[{key:"render",value:function(){var e=this.props.totalCount;return t.createElement(r.Plugin,{name:"CustomPaging",dependencies:I},t.createElement(r.Getter,{name:"totalCount",value:e}))}}]),n}(t.PureComponent);"production"!==s.env.NODE_ENV&&(z.propTypes={totalCount:n.number}),z.defaultProps={totalCount:0};var j=[{name:"SortingState",optional:!0}],N=function(e){function n(e){l(this,n);var t=h(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={grouping:e.grouping||e.defaultGrouping,draftGrouping:null,expandedGroups:e.expandedGroups||e.defaultExpandedGroups},t.stateHelper=r.createStateHelper(t,{grouping:function(){var e=t.props.onGroupingChange;return e},expandedGroups:function(){var e=t.props.onExpandedGroupsChange;return e}}),t.changeColumnGrouping=t.changeColumnGrouping.bind(t),t.toggleGroupExpanded=t.stateHelper.applyReducer.bind(t.stateHelper,a.toggleExpandedGroups),t.draftColumnGrouping=t.stateHelper.applyReducer.bind(t.stateHelper,a.draftColumnGrouping),t.cancelColumnGroupingDraft=t.stateHelper.applyReducer.bind(t.stateHelper,a.cancelColumnGroupingDraft),t.changeColumnSorting=t.changeColumnSorting.bind(t),t}return d(n,e),u(n,[{key:"changeColumnSorting",value:function(e,t,n){var r=t.sorting,i=n.changeColumnSorting,o=e.columnName,s=e.keepOther,l=p(e,["columnName","keepOther"]),u=this.state.grouping,c=u.findIndex(function(e){return e.columnName===o});if(-1===c)return i(f({columnName:o,keepOther:s||u.map(function(e){return e.columnName})},l)),!1;var d=a.adjustSortIndex(c,u,r);return i(f({columnName:o,keepOther:!0,sortIndex:d},l)),!1}},{key:"changeColumnGrouping",value:function(e,t,n){var r=e.columnName,i=e.groupIndex;this.stateHelper.applyReducer(a.changeColumnGrouping,{columnName:r,groupIndex:i},function(e,i){var o=e.grouping,s=i.grouping,l=t.sorting,u=n.changeColumnSorting;if(l){var c=l.findIndex(function(e){return e.columnName===r}),d=s.findIndex(function(e){return e.columnName===r}),p=o.findIndex(function(e){return e.columnName===r});if(-1!==c&&(d!==s.length-1||-1!==p)){var h=a.adjustSortIndex(-1===p?o.length:p,o,l);c!==h&&u(f({keepOther:!0,sortIndex:h},l[c]))}}})}},{key:"render",value:function(){var e=this.state,n=e.grouping,i=e.draftGrouping,o=e.expandedGroups,s=this.props,l=s.columnExtensions,u=s.columnGroupingEnabled;return t.createElement(r.Plugin,{name:"GroupingState",dependencies:j},t.createElement(r.Getter,{name:"grouping",value:n}),t.createElement(r.Getter,{name:"draftGrouping",value:i||n}),t.createElement(r.Getter,{name:"isColumnGroupingEnabled",value:function(e,t){return a.getColumnExtensionValueGetter(e,"groupingEnabled",t)}(l,u)}),t.createElement(r.Action,{name:"changeColumnGrouping",action:this.changeColumnGrouping}),t.createElement(r.Action,{name:"draftColumnGrouping",action:this.draftColumnGrouping}),t.createElement(r.Action,{name:"cancelColumnGroupingDraft",action:this.cancelColumnGroupingDraft}),t.createElement(r.Getter,{name:"expandedGroups",value:o}),t.createElement(r.Action,{name:"toggleGroupExpanded",action:this.toggleGroupExpanded}),t.createElement(r.Action,{name:"changeColumnSorting",action:this.changeColumnSorting}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.grouping,r=void 0===n?t.grouping:n,a=e.expandedGroups,i=void 0===a?t.expandedGroups:a;return{grouping:r,expandedGroups:i}}}]),n}(t.PureComponent);"production"!==s.env.NODE_ENV&&(N.propTypes={grouping:n.array,defaultGrouping:n.array,onGroupingChange:n.func,expandedGroups:n.array,defaultExpandedGroups:n.array,onExpandedGroupsChange:n.func,columnExtensions:n.array,columnGroupingEnabled:n.bool}),N.defaultProps={grouping:void 0,defaultGrouping:[],onGroupingChange:void 0,expandedGroups:void 0,defaultExpandedGroups:[],onExpandedGroupsChange:void 0,columnExtensions:void 0,columnGroupingEnabled:!0};var F=[{name:"GroupingState"}],B=function(e){var t=e.getCollapsedRows;return a.groupCollapsedRowsGetter(t)},V=function(e){var t=e.rows,n=e.grouping,r=e.expandedGroups;return a.expandedGroupRows(t,n,r)},U=function(e){function n(){return l(this,n),h(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return d(n,e),u(n,[{key:"render",value:function(){var e=this.props.columnExtensions,n=function(t){return a.getColumnExtension(e,t).criteria};return t.createElement(r.Plugin,{name:"IntegratedGrouping",dependencies:F},t.createElement(r.Getter,{name:"isGroupRow",value:a.groupRowChecker}),t.createElement(r.Getter,{name:"getRowLevelKey",value:a.groupRowLevelKeyGetter}),t.createElement(r.Getter,{name:"getCollapsedRows",computed:B}),t.createElement(r.Getter,{name:"rows",computed:function(e){var t=e.rows,r=e.grouping,i=e.getCellValue;return a.groupedRows(t,r,i,n)}}),t.createElement(r.Getter,{name:"rows",computed:V}))}}]),n}(t.PureComponent);"production"!==s.env.NODE_ENV&&(U.propTypes={columnExtensions:n.array}),U.defaultProps={columnExtensions:void 0};var G=[{name:"GroupingState"}],H=function(e){var t=e.getCollapsedRows;return a.groupCollapsedRowsGetter(t)},W=function(e){var t=e.rows,n=e.grouping,r=e.expandedGroups;return a.expandedGroupRows(t,n,r)},q=function(e){var t=e.getRowId,n=e.rows;return a.customGroupingRowIdGetter(t,n)},Y=function(e){function n(){return l(this,n),h(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return d(n,e),u(n,[{key:"render",value:function(){var e=this.props,n=e.getChildGroups,i=e.grouping,o=e.expandedGroups;return t.createElement(r.Plugin,{name:"CustomGrouping",dependencies:G},i&&t.createElement(r.Getter,{name:"grouping",value:i}),o&&t.createElement(r.Getter,{name:"expandedGroups",value:o}),t.createElement(r.Getter,{name:"isGroupRow",value:a.groupRowChecker}),t.createElement(r.Getter,{name:"getRowLevelKey",value:a.groupRowLevelKeyGetter}),t.createElement(r.Getter,{name:"getCollapsedRows",computed:H}),t.createElement(r.Getter,{name:"rows",computed:function(e){var t=e.rows,r=e.grouping;return a.customGroupedRows(t,r,n)}}),t.createElement(r.Getter,{name:"getRowId",computed:q}),t.createElement(r.Getter,{name:"rows",computed:W}))}}]),n}(t.PureComponent);"production"!==s.env.NODE_ENV&&(Y.propTypes={getChildGroups:n.func.isRequired,grouping:n.array,expandedGroups:n.array}),Y.defaultProps={grouping:void 0,expandedGroups:void 0};var X=function(e){function n(e){l(this,n);var t=h(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));t.state={selection:e.selection||e.defaultSelection};var i=r.createStateHelper(t,{selection:function(){var e=t.props.onSelectionChange;return e}});return t.toggleSelection=i.applyFieldReducer.bind(i,"selection",a.toggleSelection),t}return d(n,e),u(n,[{key:"render",value:function(){var e=this.state.selection;return t.createElement(r.Plugin,{name:"SelectionState"},t.createElement(r.Getter,{name:"selection",value:e}),t.createElement(r.Action,{name:"toggleSelection",action:this.toggleSelection}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.selection,r=void 0===n?t.selection:n;return{selection:r}}}]),n}(t.PureComponent);"production"!==s.env.NODE_ENV&&(X.propTypes={selection:n.array,defaultSelection:n.array,onSelectionChange:n.func}),X.defaultProps={selection:void 0,defaultSelection:[],onSelectionChange:void 0};var Z=function(e){var t=e.rows,n=e.getRowId,r=e.isGroupRow;return a.rowsWithAvailableToSelect(t,n,r)},$=function(e){var t=e.rows,n=e.selection;return a.allSelected(t,n)},K=function(e){var t=e.rows,n=e.selection;return a.someSelected(t,n)},J=function(e){var t=e.rows.availableToSelect;return!!t.length},Q=function(e,t,n){var r=t.rows.availableToSelect,a=n.toggleSelection;a({rowIds:r,state:e})},ee=function(e){var t=e.rows;return a.unwrapSelectedRows(t)},te=[{name:"SelectionState"}],ne=function(e){function n(){return l(this,n),h(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return d(n,e),u(n,[{key:"render",value:function(){return t.createElement(r.Plugin,{name:"IntegratedSelection",dependencies:te},t.createElement(r.Getter,{name:"rows",computed:Z}),t.createElement(r.Getter,{name:"allSelected",computed:$}),t.createElement(r.Getter,{name:"someSelected",computed:K}),t.createElement(r.Getter,{name:"selectAllAvailable",computed:J}),t.createElement(r.Action,{name:"toggleSelectAll",action:Q}),t.createElement(r.Getter,{name:"rows",computed:ee}))}}]),n}(t.PureComponent),re=function(e){function n(e){l(this,n);var t=h(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));t.state={sorting:e.sorting||e.defaultSorting};var i=r.createStateHelper(t,{sorting:function(){var e=t.props.onSortingChange;return e}});return t.changeColumnSorting=i.applyReducer.bind(i,function(n,r){var i=t.props.sorting,o=void 0===i?n.sorting:i,s=a.getPersistentSortedColumns(o,e.columnExtensions),l=a.calculateKeepOther(n.sorting,r.keepOther,s);return a.changeColumnSorting(n,f({},r,{keepOther:l}))}),t}return d(n,e),u(n,[{key:"render",value:function(){var e=this.state.sorting,n=this.props,i=n.columnExtensions,o=n.columnSortingEnabled;return t.createElement(r.Plugin,{name:"SortingState"},t.createElement(r.Getter,{name:"sorting",value:e}),t.createElement(r.Getter,{name:"isColumnSortingEnabled",value:function(e,t){return a.getColumnExtensionValueGetter(e,"sortingEnabled",t)}(i,o)}),t.createElement(r.Action,{name:"changeColumnSorting",action:this.changeColumnSorting}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.sorting,r=void 0===n?t.sorting:n;return{sorting:r}}}]),n}(t.PureComponent);"production"!==s.env.NODE_ENV&&(re.propTypes={sorting:n.array,defaultSorting:n.array,onSortingChange:n.func,columnExtensions:n.array,columnSortingEnabled:n.bool}),re.defaultProps={sorting:void 0,defaultSorting:[],onSortingChange:void 0,columnExtensions:void 0,columnSortingEnabled:!0};var ae=[{name:"SortingState"}],ie=function(e){function n(){return l(this,n),h(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return d(n,e),u(n,[{key:"render",value:function(){var e=this.props.columnExtensions,n=function(t){return a.getColumnExtension(e,t).compare};return t.createElement(r.Plugin,{name:"IntegratedSorting",dependencies:ae},t.createElement(r.Getter,{name:"rows",computed:function(e){var t=e.rows,r=e.sorting,i=e.getCellValue,o=e.isGroupRow,s=e.getRowLevelKey;return a.sortedRows(t,r,i,n,o,s)}}))}}]),n}(t.PureComponent);"production"!==s.env.NODE_ENV&&(ie.propTypes={columnExtensions:n.array}),ie.defaultProps={columnExtensions:void 0};var oe=function(e){function n(e){l(this,n);var t=h(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={payload:null,clientOffset:null},t.change=function(e){var n=e.payload,r=e.clientOffset;return t.setState({payload:n,clientOffset:r})},t}return d(n,e),u(n,[{key:"render",value:function(){var e=this.props,n=e.containerComponent,a=e.columnComponent,i=this.state,o=i.payload,s=i.clientOffset;return t.createElement(r.Plugin,{name:"DragDropProvider"},t.createElement(r.Getter,{name:"draggingEnabled",value:!0}),t.createElement(r.Template,{name:"root"},t.createElement(r.DragDropProvider,{onChange:this.change},t.createElement(r.TemplatePlaceholder,null)),o&&t.createElement(r.TemplateConnector,null,function(e){var r=e.columns;return t.createElement(n,{clientOffset:s},function(e,t){return e.filter(function(e){return"column"===e.type}).map(function(e){return t.find(function(t){return t.name===e.columnName})})}(o,r).map(function(e){return t.createElement(a,{key:e.name,column:e})}))})))}}]),n}(t.PureComponent);"production"!==s.env.NODE_ENV&&(oe.propTypes={containerComponent:n.func.isRequired,columnComponent:n.func.isRequired}),oe.components={containerComponent:"Container",columnComponent:"Column"};var se=[{name:"Table"}],le=function(e){var t=e.tableHeaderRows;return a.tableHeaderRowsWithReordering(t)},ue=function(e){function n(e){l(this,n);var t=h(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={order:e.defaultOrder,sourceColumnIndex:-1,targetColumnIndex:-1},t.onOver=t.handleOver.bind(t),t.onLeave=t.handleLeave.bind(t),t.onDrop=t.handleDrop.bind(t),t}return d(n,e),u(n,[{key:"getState",value:function(){var e=this.state.order,t=this.props.order,n=void 0===t?e:t;return f({},this.state,{order:n})}},{key:"getDraftOrder",value:function(){var e=this.getState(),t=e.order,n=e.sourceColumnIndex,r=e.targetColumnIndex;return a.draftOrder(t,n,r)}},{key:"getAvailableColumns",value:function(){var e=this;return this.getDraftOrder().filter(function(t){return!!e.cellDimensionGetters[t]})}},{key:"cacheCellDimensions",value:function(){var e=this;this.cellDimensions=this.cellDimensions&&this.cellDimensions.length?this.cellDimensions:this.getAvailableColumns().map(function(t){return e.cellDimensionGetters[t]()})}},{key:"resetCellDimensions",value:function(){this.cellDimensions=[]}},{key:"ensureCellDimensionGetters",value:function(e){var t=this;Object.keys(this.cellDimensionGetters).forEach(function(n){var r=e.findIndex(function(e){var t=e.type,r=e.column;return t===a.TABLE_DATA_TYPE&&r.name===n});-1===r&&delete t.cellDimensionGetters[n]})}},{key:"storeCellDimensionsGetter",value:function(e,t,n){e.type===a.TABLE_DATA_TYPE&&(this.cellDimensionGetters[e.column.name]=t),this.ensureCellDimensionGetters(n)}},{key:"handleOver",value:function(e){var t=e.payload,n=e.clientOffset.x,r=t[0].columnName,i=this.getAvailableColumns(),o=i.indexOf(r);if(-1!==o){this.cacheCellDimensions();var s=this.cellDimensions,l=s.filter(function(e){var t=e.left,r=e.right;return t<=n&&n<=r});if(!(l.length>1)){var u=a.getTableTargetColumnIndex(s,o,n);if(-1!==u){var c=this.getState(),f=c.sourceColumnIndex,d=c.targetColumnIndex,p=this.getDraftOrder(),h=p.indexOf(i[u]);if(h!==d){var m=-1===f?p.indexOf(r):f;this.setState({sourceColumnIndex:m,targetColumnIndex:h})}}}}}},{key:"handleLeave",value:function(){this.setState({sourceColumnIndex:-1,targetColumnIndex:-1}),this.resetCellDimensions()}},{key:"handleDrop",value:function(){var e=this.getState(),t=e.sourceColumnIndex,n=e.targetColumnIndex,r=e.order,i=this.props.onOrderChange;if(-1!==t||-1!==n){var o=a.changeColumnOrder(r,{sourceColumnName:r[t],targetColumnName:r[n]});this.setState({order:o,sourceColumnIndex:-1,targetColumnIndex:-1}),i&&i(o),this.resetCellDimensions()}}},{key:"render",value:function(){var e=this,n=this.props,i=n.tableContainerComponent,o=n.rowComponent,s=n.cellComponent;return this.cellDimensionGetters={},t.createElement(r.Plugin,{name:"TableColumnReordering",dependencies:se},t.createElement(r.Getter,{name:"tableColumns",computed:function(t){var n=t.tableColumns;return a.orderedColumns(n,e.getDraftOrder())}}),t.createElement(r.Getter,{name:"tableHeaderRows",computed:le}),t.createElement(r.Template,{name:"table"},function(n){return t.createElement(i,f({},n,{onOver:e.onOver,onLeave:e.onLeave,onDrop:e.onDrop}),t.createElement(r.TemplatePlaceholder,null))}),t.createElement(r.Template,{name:"tableRow",predicate:function(e){var t=e.tableRow;return t.type===a.TABLE_REORDERING_TYPE}},function(e){return t.createElement(o,e)}),t.createElement(r.Template,{name:"tableCell",predicate:function(e){var t=e.tableRow;return t.type===a.TABLE_REORDERING_TYPE}},function(n){return t.createElement(r.TemplateConnector,null,function(r){var a=r.tableColumns;return t.createElement(s,f({},n,{getCellDimensions:function(t){return e.storeCellDimensionsGetter(n.tableColumn,t,a)}}))})}))}}]),n}(t.PureComponent);"production"!==s.env.NODE_ENV&&(ue.propTypes={order:n.arrayOf(n.string),defaultOrder:n.arrayOf(n.string),onOrderChange:n.func,tableContainerComponent:n.func.isRequired,rowComponent:n.func.isRequired,cellComponent:n.func.isRequired}),ue.defaultProps={order:void 0,defaultOrder:[],onOrderChange:void 0},ue.components={tableContainerComponent:"TableContainer",rowComponent:"Row",cellComponent:"Cell"};var ce=r.withComponents({TableContainer:function(e){var n=e.onOver,a=e.onLeave,i=e.onDrop,o=e.children;return t.createElement(r.DropTarget,{onOver:n,onLeave:a,onDrop:i},o)}})(ue),fe=function(e){return t.createElement(r.TemplatePlaceholder,{name:"tableRow",params:e})},de=function(e){return t.createElement(r.TemplatePlaceholder,{name:"tableCell",params:e})},pe=[],he=function(e){var t=e.rows,n=e.getRowId;return a.tableRowsWithDataRows(t,n)},me=[],ve={noData:"No data"},ge=function(e){function n(e){l(this,n);var t=h(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.tableColumnsComputed=i.memoize(function(e){return function(t){var n=t.columns;return a.tableColumnsWithDataRows(n,e)}}),t}return d(n,e),u(n,[{key:"render",value:function(){var e=this.props,n=e.layoutComponent,o=e.cellComponent,s=e.rowComponent,l=e.noDataRowComponent,u=e.noDataCellComponent,c=e.stubRowComponent,d=e.stubCellComponent,p=e.stubHeaderCellComponent,h=e.columnExtensions,m=e.messages,v=e.containerComponent,g=e.tableComponent,y=e.headComponent,b=e.bodyComponent,x=e.footerComponent,_=i.getMessagesFormatter(f({},ve,m)),w=this.tableColumnsComputed(h);return t.createElement(r.Plugin,{name:"Table"},t.createElement(r.Getter,{name:"tableHeaderRows",value:pe}),t.createElement(r.Getter,{name:"tableBodyRows",computed:he}),t.createElement(r.Getter,{name:"tableFooterRows",value:me}),t.createElement(r.Getter,{name:"tableColumns",computed:w}),t.createElement(r.Getter,{name:"getTableCellColSpan",value:a.tableCellColSpanGetter}),t.createElement(r.Template,{name:"body"},t.createElement(r.TemplatePlaceholder,{name:"table"})),t.createElement(r.Template,{name:"table"},t.createElement(r.TemplateConnector,null,function(e){var r=e.tableHeaderRows,a=e.tableBodyRows,i=e.tableFooterRows,o=e.tableColumns,s=e.getTableCellColSpan;return t.createElement(n,{tableComponent:g,headComponent:y,bodyComponent:b,footerComponent:x,containerComponent:v,headerRows:r,bodyRows:a,footerRows:i,columns:o,rowComponent:fe,cellComponent:de,getCellColSpan:s})})),t.createElement(r.Template,{name:"tableCell"},function(e){return t.createElement(r.TemplateConnector,null,function(n){var r=n.tableHeaderRows;return a.isHeaderStubTableCell(e.tableRow,r)?t.createElement(p,e):t.createElement(d,e)})}),t.createElement(r.Template,{name:"tableCell",predicate:function(e){var t=e.tableRow,n=e.tableColumn;return a.isDataTableCell(t,n)}},function(e){return t.createElement(r.TemplateConnector,null,function(n){var a=n.getCellValue,i=e.tableColumn.column.name,s=a(e.tableRow.row,i);return t.createElement(r.TemplatePlaceholder,{name:"valueFormatter",params:{row:e.tableRow.row,column:e.tableColumn.column,value:s}},function(n){return t.createElement(o,f({},e,{row:e.tableRow.row,column:e.tableColumn.column,value:s}),n)})})}),t.createElement(r.Template,{name:"tableCell",predicate:function(e){var t=e.tableRow;return a.isNoDataTableRow(t)}},function(e){return t.createElement(r.TemplateConnector,null,function(n){var r=n.tableColumns;return a.isNoDataTableCell(e.tableColumn,r)?t.createElement(u,f({},e,{getMessage:_})):null})}),t.createElement(r.Template,{name:"tableRow"},function(e){return t.createElement(c,e)}),t.createElement(r.Template,{name:"tableRow",predicate:function(e){var t=e.tableRow;return a.isDataTableRow(t)}},function(e){return t.createElement(s,f({},e,{row:e.tableRow.row}))}),t.createElement(r.Template,{name:"tableRow",predicate:function(e){var t=e.tableRow;return a.isNoDataTableRow(t)}},function(e){return t.createElement(l,e)}))}}]),n}(t.PureComponent);ge.COLUMN_TYPE=a.TABLE_DATA_TYPE,ge.ROW_TYPE=a.TABLE_DATA_TYPE,ge.NODATA_ROW_TYPE=a.TABLE_NODATA_TYPE,"production"!==s.env.NODE_ENV&&(ge.propTypes={layoutComponent:n.func.isRequired,tableComponent:n.func.isRequired,headComponent:n.func.isRequired,bodyComponent:n.func.isRequired,footerComponent:n.func.isRequired,containerComponent:n.func.isRequired,cellComponent:n.func.isRequired,rowComponent:n.func.isRequired,noDataCellComponent:n.func.isRequired,noDataRowComponent:n.func.isRequired,stubRowComponent:n.func.isRequired,stubCellComponent:n.func.isRequired,stubHeaderCellComponent:n.func.isRequired,columnExtensions:n.array,messages:n.shape({noData:n.string})}),ge.defaultProps={columnExtensions:void 0,messages:{}},ge.components={tableComponent:"Table",headComponent:"TableHead",bodyComponent:"TableBody",footerComponent:"TableFooter",containerComponent:"Container",layoutComponent:"Layout",rowComponent:"Row",cellComponent:"Cell",noDataRowComponent:"NoDataRow",noDataCellComponent:"NoDataCell",stubRowComponent:"StubRow",stubCellComponent:"StubCell",stubHeaderCellComponent:"StubHeaderCell"};var ye=function(e){function n(){return l(this,n),h(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return d(n,e),u(n,[{key:"render",value:function(){var e=this.props,n=e.highlightRow,i=e.selectByRowClick,o=e.showSelectionColumn,s=e.showSelectAll,l=e.headerCellComponent,u=e.cellComponent,c=e.rowComponent,d=e.selectionColumnWidth;return t.createElement(r.Plugin,{name:"TableSelection",dependencies:[{name:"Table"},{name:"SelectionState"},{name:"IntegratedSelection",optional:!s}]},o&&t.createElement(r.Getter,{name:"tableColumns",computed:function(e){var t=e.tableColumns;return a.tableColumnsWithSelection(t,d)}}),o&&s&&t.createElement(r.Template,{name:"tableCell",predicate:function(e){var t=e.tableRow,n=e.tableColumn;return a.isSelectAllTableCell(t,n)}},function(e){return t.createElement(r.TemplateConnector,null,function(n,r){var a=n.selectAllAvailable,i=n.allSelected,o=n.someSelected,s=r.toggleSelectAll;return t.createElement(l,f({},e,{disabled:!a,allSelected:i,someSelected:o,onToggle:function(e){return s(e)}}))})}),o&&t.createElement(r.Template,{name:"tableCell",predicate:function(e){var t=e.tableRow,n=e.tableColumn;return a.isSelectTableCell(t,n)}},function(e){return t.createElement(r.TemplateConnector,null,function(n,r){var a=n.selection,i=r.toggleSelection;return t.createElement(u,f({},e,{row:e.tableRow.row,selected:-1!==a.indexOf(e.tableRow.rowId),onToggle:function(){return i({rowIds:[e.tableRow.rowId]})}}))})}),(n||i)&&t.createElement(r.Template,{name:"tableRow",predicate:function(e){var t=e.tableRow;return a.isDataTableRow(t)}},function(e){return t.createElement(r.TemplateConnector,null,function(r,a){var o=r.selection,s=a.toggleSelection;return t.createElement(c,f({},e,{selectByRowClick:i,selected:n&&-1!==o.indexOf(e.tableRow.rowId),onToggle:function(){return s({rowIds:[e.tableRow.rowId]})}}))})}))}}]),n}(t.PureComponent);ye.COLUMN_TYPE=a.TABLE_SELECT_TYPE,"production"!==s.env.NODE_ENV&&(ye.propTypes={headerCellComponent:n.func.isRequired,cellComponent:n.func.isRequired,rowComponent:n.func.isRequired,highlightRow:n.bool,selectByRowClick:n.bool,showSelectAll:n.bool,showSelectionColumn:n.bool,selectionColumnWidth:n.number.isRequired}),ye.defaultProps={highlightRow:!1,selectByRowClick:!1,showSelectAll:!1,showSelectionColumn:!0},ye.components={rowComponent:"Row",cellComponent:"Cell",headerCellComponent:"HeaderCell"};var be=function(e){function n(e){l(this,n);var t=h(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));t.state={expandedRowIds:e.expandedRowIds||e.defaultExpandedRowIds};var i=r.createStateHelper(t,{expandedRowIds:function(){var e=t.props.onExpandedRowIdsChange;return e}});return t.toggleDetailRowExpanded=i.applyFieldReducer.bind(i,"expandedRowIds",a.toggleDetailRowExpanded),t}return d(n,e),u(n,[{key:"render",value:function(){var e=this.state.expandedRowIds;return t.createElement(r.Plugin,{name:"RowDetailState"},t.createElement(r.Getter,{name:"expandedDetailRowIds",value:e}),t.createElement(r.Action,{name:"toggleDetailRowExpanded",action:this.toggleDetailRowExpanded}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.expandedRowIds,r=void 0===n?t.expandedRowIds:n;return{expandedRowIds:r}}}]),n}(t.PureComponent);"production"!==s.env.NODE_ENV&&(be.propTypes={expandedRowIds:n.array,defaultExpandedRowIds:n.array,onExpandedRowIdsChange:n.func}),be.defaultProps={expandedRowIds:void 0,defaultExpandedRowIds:[],onExpandedRowIdsChange:void 0};var xe=function(e){var t=e.getTableCellColSpan;return a.tableDetailCellColSpanGetter(t)},_e=[{name:"RowDetailState"},{name:"Table"}],we=function(e){function n(){return l(this,n),h(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return d(n,e),u(n,[{key:"render",value:function(){var e=this.props,n=e.rowHeight,i=e.contentComponent,o=e.toggleCellComponent,s=e.cellComponent,l=e.rowComponent,u=e.toggleColumnWidth;return t.createElement(r.Plugin,{name:"TableRowDetail",dependencies:_e},t.createElement(r.Getter,{name:"tableColumns",computed:function(e){var t=e.tableColumns;return a.tableColumnsWithDetail(t,u)}}),t.createElement(r.Getter,{name:"tableBodyRows",computed:function(e){var t=e.tableBodyRows,r=e.expandedDetailRowIds;return a.tableRowsWithExpandedDetail(t,r,n)}}),t.createElement(r.Getter,{name:"getTableCellColSpan",computed:xe}),t.createElement(r.Template,{name:"tableCell",predicate:function(e){var t=e.tableRow,n=e.tableColumn;return a.isDetailToggleTableCell(t,n)}},function(e){return t.createElement(r.TemplateConnector,null,function(n,r){var i=n.expandedDetailRowIds,s=r.toggleDetailRowExpanded;return t.createElement(o,f({},e,{row:e.tableRow.row,expanded:a.isDetailRowExpanded(i,e.tableRow.rowId),onToggle:function(){return s({rowId:e.tableRow.rowId})}}))})}),t.createElement(r.Template,{name:"tableCell",predicate:function(e){var t=e.tableRow;return a.isDetailTableRow(t)}},function(e){return t.createElement(r.TemplateConnector,null,function(n){var r=n.tableColumns;return a.isDetailTableCell(e.tableColumn,r)?t.createElement(s,f({},e,{row:e.tableRow.row}),t.createElement(i,{row:e.tableRow.row})):null})}),t.createElement(r.Template,{name:"tableRow",predicate:function(e){var t=e.tableRow;return a.isDetailTableRow(t)}},function(e){return t.createElement(l,f({},e,{row:e.tableRow.row}))}))}}]),n}(t.PureComponent);we.ROW_TYPE=a.TABLE_DETAIL_TYPE,we.COLUMN_TYPE=a.TABLE_DETAIL_TYPE,"production"!==s.env.NODE_ENV&&(we.propTypes={contentComponent:n.func,toggleCellComponent:n.func.isRequired,cellComponent:n.func.isRequired,rowComponent:n.func.isRequired,toggleColumnWidth:n.number.isRequired,rowHeight:n.number}),we.defaultProps={contentComponent:function(){return null},rowHeight:void 0},we.components={rowComponent:"Row",cellComponent:"Cell",toggleCellComponent:"ToggleCell"};var Te=[{name:"GroupingState"},{name:"Table"},{name:"DataTypeProvider",optional:!0}],ke=function(e){var t=e.tableBodyRows,n=e.isGroupRow;return a.tableRowsWithGrouping(t,n)},Ce=function(e){var t=e.getTableCellColSpan;return a.tableGroupCellColSpanGetter(t)},Ee=function(e){function n(){return l(this,n),h(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return d(n,e),u(n,[{key:"render",value:function(){var e=this.props,n=e.cellComponent,i=e.rowComponent,o=e.indentCellComponent,s=e.indentColumnWidth,l=e.showColumnsWhenGrouped,u=e.columnExtensions;return t.createElement(r.Plugin,{name:"TableGroupRow",dependencies:Te},t.createElement(r.Getter,{name:"tableColumns",computed:function(e){var t=e.columns,n=e.tableColumns,r=e.grouping,i=e.draftGrouping;return a.tableColumnsWithGrouping(t,n,r,i,s,function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).reduce(function(e,t){return e[t.columnName]=t.showWhenGrouped,e},{});return function(n){return t[n]||e}}(l,u))}}),t.createElement(r.Getter,{name:"tableBodyRows",computed:ke}),t.createElement(r.Getter,{name:"getTableCellColSpan",computed:Ce}),t.createElement(r.Template,{name:"tableCell",predicate:function(e){var t=e.tableRow;return a.isGroupTableRow(t)}},function(e){return t.createElement(r.TemplateConnector,null,function(i,s){var l=i.grouping,u=i.expandedGroups,c=s.toggleGroupExpanded;return a.isGroupTableCell(e.tableRow,e.tableColumn)?t.createElement(r.TemplatePlaceholder,{name:"valueFormatter",params:{column:e.tableColumn.column,value:e.tableRow.row.value}},function(r){return t.createElement(n,f({},e,{row:e.tableRow.row,column:e.tableColumn.column,expanded:-1!==u.indexOf(e.tableRow.row.compoundKey),onToggle:function(){return c({groupKey:e.tableRow.row.compoundKey})}}),r)}):a.isGroupIndentTableCell(e.tableRow,e.tableColumn,l)?o?t.createElement(o,f({},e,{row:e.tableRow.row,column:e.tableColumn.column})):t.createElement(r.TemplatePlaceholder,null):null})}),t.createElement(r.Template,{name:"tableRow",predicate:function(e){var t=e.tableRow;return a.isGroupTableRow(t)}},function(e){return t.createElement(i,f({},e,{row:e.tableRow.row}))}))}}]),n}(t.PureComponent);Ee.ROW_TYPE=a.TABLE_GROUP_TYPE,Ee.COLUMN_TYPE=a.TABLE_GROUP_TYPE,"production"!==s.env.NODE_ENV&&(Ee.propTypes={cellComponent:n.func.isRequired,rowComponent:n.func.isRequired,indentCellComponent:n.func,indentColumnWidth:n.number.isRequired,showColumnsWhenGrouped:n.bool,columnExtensions:n.array}),Ee.defaultProps={indentCellComponent:null,showColumnsWhenGrouped:!1,columnExtensions:void 0},Ee.components={rowComponent:"Row",cellComponent:"Cell"};var Me=function(e){var t=e.tableHeaderRows;return a.tableRowsWithHeading(t)},Ae=function(e){function n(){return l(this,n),h(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return d(n,e),u(n,[{key:"render",value:function(){var e=this.props,n=e.showSortingControls,o=e.showGroupingControls,s=e.cellComponent,l=e.rowComponent,u=e.contentComponent,c=e.sortLabelComponent,d=e.groupButtonComponent,p=e.titleComponent,h=e.messages,m=i.getMessagesFormatter(h);return t.createElement(r.Plugin,{name:"TableHeaderRow",dependencies:[{name:"Table"},{name:"SortingState",optional:!n},{name:"GroupingState",optional:!o},{name:"DragDropProvider",optional:!0},{name:"TableColumnResizing",optional:!0}]},t.createElement(r.Getter,{name:"tableHeaderRows",computed:Me}),t.createElement(r.Template,{name:"tableCell",predicate:function(e){var t=e.tableRow,n=e.tableColumn;return a.isHeadingTableCell(t,n)}},function(e){return t.createElement(r.TemplateConnector,null,function(i,l){var h=i.sorting,v=i.tableColumns,g=i.draggingEnabled,y=i.tableColumnResizingEnabled,b=i.isColumnSortingEnabled,x=i.isColumnGroupingEnabled,_=l.changeColumnSorting,w=l.changeColumnGrouping,T=l.changeTableColumnWidth,k=l.draftTableColumnWidth,C=l.cancelTableColumnWidthDraft,E=e.tableColumn.column,M=E.name,A=E.title,S=v.filter(function(e){var t=e.type;return t===a.TABLE_DATA_TYPE}).length>1,O=b&&b(M),P=x&&x(M)&&S;return t.createElement(s,f({},e,{column:e.tableColumn.column,getMessage:m,draggingEnabled:g&&S,resizingEnabled:y,onWidthChange:function(e){var t=e.shift;return T({columnName:M,shift:t})},onWidthDraft:function(e){var t=e.shift;return k({columnName:M,shift:t})},onWidthDraftCancel:function(){return C()},sortingEnabled:O,groupingEnabled:P,showSortingControls:n,showGroupingControls:o,sortingDirection:n&&void 0!==h?a.getColumnSortingDirection(h,M):void 0,onSort:function(e){var t=e.direction,n=e.keepOther;return _({columnName:M,direction:t,keepOther:n})},onGroup:function(){return w({columnName:M})},before:t.createElement(r.TemplatePlaceholder,{name:"tableHeaderCellBefore",params:{column:e.tableColumn.column}})}),t.createElement(r.TemplatePlaceholder,{name:"tableHeaderCellBefore",params:{column:e.tableColumn.column}}),t.createElement(u,{column:e.tableColumn.column,align:e.tableColumn.align},n?t.createElement(c,{column:e.tableColumn.column,align:e.tableColumn.align,direction:a.getColumnSortingDirection(h,M),disabled:!O,onSort:function(e){var t=e.direction,n=e.keepOther;_({columnName:M,direction:t,keepOther:n})},getMessage:m},t.createElement(p,null,A||M)):t.createElement(p,null,A||M)),o?t.createElement(d,{disabled:!P,onGroup:function(){return w({columnName:M})}}):null)})}),t.createElement(r.Template,{name:"tableRow",predicate:function(e){var t=e.tableRow;return a.isHeadingTableRow(t)}},function(e){return t.createElement(l,e)}))}}]),n}(t.PureComponent);Ae.ROW_TYPE=a.TABLE_HEADING_TYPE,"production"!==s.env.NODE_ENV&&(Ae.propTypes={showSortingControls:n.bool,showGroupingControls:n.bool,cellComponent:n.func.isRequired,contentComponent:n.func.isRequired,rowComponent:n.func.isRequired,titleComponent:n.func.isRequired,sortLabelComponent:n.func.isRequired,groupButtonComponent:n.func.isRequired,messages:n.object}),Ae.defaultProps={showSortingControls:!1,showGroupingControls:!1,messages:null},Ae.components={cellComponent:"Cell",rowComponent:"Row",contentComponent:"Content",sortLabelComponent:"SortLabel",titleComponent:"Title",groupButtonComponent:"GroupButton"};var Se=function(e){return t.createElement(r.TemplatePlaceholder,{params:e})},Oe=function(e){function n(){return l(this,n),h(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return d(n,e),u(n,[{key:"render",value:function(){var e=this.props,n=e.cellComponent,i=e.rowComponent,o=e.bandedHeaderCellComponent,s=e.invisibleCellComponent,l=e.columnBands;return t.createElement(r.Plugin,{name:"TableBandHeader",dependencies:[{name:"Table"},{name:"TableHeaderRow"},{name:"TableSelection",optional:!0},{name:"TableEditColumn",optional:!0}]},t.createElement(r.Getter,{name:"tableHeaderRows",computed:function(e){var t=e.tableHeaderRows,n=e.tableColumns;return a.tableRowsWithBands(t,l,n)}}),t.createElement(r.Template,{name:"tableCell",predicate:function(e){var t=e.tableRow;return a.isBandedOrHeaderRow(t)}},function(e){return t.createElement(r.TemplateConnector,null,function(i){var o=i.tableColumns,u=i.tableHeaderRows,c=a.getBandComponent(e,u,o,l);switch(c.type){case a.BAND_DUPLICATE_RENDER:return t.createElement(r.TemplatePlaceholder,null);case a.BAND_EMPTY_CELL:return t.createElement(s,null);case a.BAND_GROUP_CELL:var d=c.payload,h=d.value,m=p(d,["value"]);return t.createElement(n,f({},e,m),h);case a.BAND_HEADER_CELL:return t.createElement(r.TemplatePlaceholder,{name:"tableCell",params:f({},e,c.payload)});default:return null}})}),t.createElement(r.Template,{name:"tableCell",predicate:function(e){var t=e.tableRow,n=e.tableColumn;return a.isHeadingTableCell(t,n)}},function(e){return t.createElement(o,f({component:Se},e))}),t.createElement(r.Template,{name:"tableRow",predicate:function(e){var t=e.tableRow;return a.isBandedTableRow(t)}},function(e){return t.createElement(i,e)}))}}]),n}(t.PureComponent);Oe.ROW_TYPE=a.TABLE_BAND_TYPE,"production"!==s.env.NODE_ENV&&(Oe.propTypes={columnBands:n.array.isRequired,cellComponent:n.func.isRequired,rowComponent:n.func.isRequired,bandedHeaderCellComponent:n.func.isRequired,invisibleCellComponent:n.func.isRequired}),Oe.components={cellComponent:"Cell",rowComponent:"Row",bandedHeaderCellComponent:"BandedHeaderCell",invisibleCellComponent:"InvisibleCell"};var Pe=[{name:"FilteringState"},{name:"Table"},{name:"DataTypeProvider",optional:!0}],Re={filterPlaceholder:"Filter...",contains:"Contains",notContains:"Does not contain",startsWith:"Starts with",endsWith:"Ends with",equal:"Equals",notEqual:"Does not equal",greaterThan:"Greater than",greaterThanOrEqual:"Greater than or equal to",lessThan:"Less than",lessThanOrEqual:"Less than or equal to"},Le=function(e){function n(e){l(this,n);var t=h(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={filterOperations:{}},t}return d(n,e),u(n,[{key:"render",value:function(){var e=this,n=this.props,o=n.rowHeight,s=n.showFilterSelector,l=n.cellComponent,u=n.rowComponent,d=n.filterSelectorComponent,p=n.iconComponent,h=n.toggleButtonComponent,m=n.editorComponent,v=n.messages,g=i.getMessagesFormatter(f({},Re,v));return t.createElement(r.Plugin,{name:"TableFilterRow",dependencies:Pe},t.createElement(r.Getter,{name:"tableHeaderRows",computed:function(e){var t=e.tableHeaderRows;return a.tableHeaderRowsWithFilter(t,o)}}),t.createElement(r.Template,{name:"tableCell",predicate:function(e){var t=e.tableRow,n=e.tableColumn;return a.isFilterTableCell(t,n)}},function(n){return t.createElement(r.TemplateConnector,null,function(i,o){var u=i.filters,v=i.isColumnFilteringEnabled,y=i.getAvailableFilterOperations,b=o.changeColumnFilter,x=e.state.filterOperations,_=n.tableColumn.column.name,w=a.getColumnFilterConfig(u,_),T=function(e){return b({columnName:_,config:e})},k=a.getColumnFilterOperations(y,_),C=a.getSelectedFilterOperation(x,_,w,k),E=function(t){e.setState({filterOperations:f({},x,c({},_,t))}),w&&!a.isFilterValueEmpty(w.value)&&T({value:w.value,operation:t})},M=function(e){return T(a.isFilterValueEmpty(e)?null:{value:e,operation:C})},A=v(_);return t.createElement(r.TemplatePlaceholder,{name:"valueEditor",params:{column:n.tableColumn.column,value:w?w.value:void 0,onValueChange:M}},function(e){return t.createElement(l,f({},n,{getMessage:g,column:n.tableColumn.column,filter:w,filteringEnabled:A,onFilter:T}),s?t.createElement(d,{toggleButtonComponent:h,iconComponent:p,value:C,availableValues:k,onChange:E,disabled:!A,getMessage:g}):null,e||t.createElement(m,{value:w?w.value:void 0,disabled:!A,getMessage:g,onChange:M}))})})}),t.createElement(r.Template,{name:"tableRow",predicate:function(e){var t=e.tableRow;return a.isFilterTableRow(t)}},function(e){return t.createElement(u,e)}))}}]),n}(t.PureComponent);Le.ROW_TYPE=a.TABLE_FILTER_TYPE,"production"!==s.env.NODE_ENV&&(Le.propTypes={rowHeight:n.any,showFilterSelector:n.bool,messages:n.shape({filterPlaceholder:n.string,contains:n.string,notContains:n.string,startsWith:n.string,endsWith:n.string,equal:n.string,notEqual:n.string,greaterThan:n.string,greaterThanOrEqual:n.string,lessThan:n.string,lessThanOrEqual:n.string}),cellComponent:n.func.isRequired,rowComponent:n.func.isRequired,filterSelectorComponent:n.func.isRequired,toggleButtonComponent:n.func.isRequired,iconComponent:n.func.isRequired,editorComponent:n.func.isRequired}),Le.defaultProps={rowHeight:void 0,showFilterSelector:!1,messages:{}},Le.components={rowComponent:"Row",cellComponent:"Cell",filterSelectorComponent:"FilterSelector",iconComponent:"Icon",editorComponent:"Editor",toggleButtonComponent:"ToggleButton"};var De=[{name:"EditingState"},{name:"Table"},{name:"DataTypeProvider",optional:!0}],Ie=function(e){function n(){return l(this,n),h(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return d(n,e),u(n,[{key:"render",value:function(){var e=this.props,n=e.cellComponent,i=e.rowComponent,o=e.rowHeight;return t.createElement(r.Plugin,{name:"TableEditRow",dependencies:De},t.createElement(r.Getter,{name:"tableBodyRows",computed:function(e){var t=e.tableBodyRows,n=e.editingRowIds,r=e.addedRows;return a.tableRowsWithEditing(t,n,r,o)}}),t.createElement(r.Template,{name:"tableCell",predicate:function(e){var t=e.tableRow,n=e.tableColumn;return a.isEditTableCell(t,n)}},function(e){return t.createElement(r.TemplateConnector,null,function(i,o){var s=i.getCellValue,l=i.createRowChange,u=i.rowChanges,c=i.isColumnEditingEnabled,d=o.changeAddedRow,p=o.changeRow,h=e.tableRow,m=h.rowId,v=h.row,g=e.tableColumn.column,y=g.name,b=a.isAddedTableRow(e.tableRow),x=b?v:f({},v,a.getRowChange(u,m)),_=s(x,y),w=function(e){var t={rowId:m,change:l(x,e,y)};b?d(t):p(t)};return t.createElement(r.TemplatePlaceholder,{name:"valueEditor",params:{column:g,row:v,value:_,onValueChange:w}},function(r){return t.createElement(n,f({},e,{row:v,column:g,value:_,editingEnabled:c(y),onValueChange:w}),r)})})}),t.createElement(r.Template,{name:"tableRow",predicate:function(e){var t=e.tableRow;return a.isEditTableRow(t)||a.isAddedTableRow(t)}},function(e){return t.createElement(i,f({},e,{row:e.tableRow.row}))}))}}]),n}(t.PureComponent);Ie.ADDED_ROW_TYPE=a.TABLE_ADDED_TYPE,Ie.EDIT_ROW_TYPE=a.TABLE_EDIT_TYPE,"production"!==s.env.NODE_ENV&&(Ie.propTypes={rowHeight:n.any,cellComponent:n.func.isRequired,rowComponent:n.func.isRequired}),Ie.defaultProps={rowHeight:void 0},Ie.components={rowComponent:"Row",cellComponent:"Cell"};var ze=[{name:"EditingState"},{name:"Table"}],je={addCommand:"New",editCommand:"Edit",deleteCommand:"Delete",commitCommand:"Save",cancelCommand:"Cancel"},Ne=function(e){function n(){return l(this,n),h(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return d(n,e),u(n,[{key:"render",value:function(){var e=this.props,n=e.cellComponent,o=e.headerCellComponent,s=e.commandComponent,l=e.showAddCommand,u=e.showEditCommand,c=e.showDeleteCommand,d=e.width,p=e.messages,h=i.getMessagesFormatter(f({},je,p));return t.createElement(r.Plugin,{name:"TableEditColumn",dependencies:ze},t.createElement(r.Getter,{name:"tableColumns",computed:function(e){var t=e.tableColumns;return a.tableColumnsWithEditing(t,d)}}),t.createElement(r.Template,{name:"tableCell",predicate:function(e){var t=e.tableRow,n=e.tableColumn;return a.isHeadingEditCommandsTableCell(t,n)}},function(e){return t.createElement(r.TemplateConnector,null,function(n,r){return t.createElement(o,e,l&&t.createElement(s,{id:"add",text:h("addCommand"),onExecute:function(){return r.addRow()}}))})}),t.createElement(r.Template,{name:"tableCell",predicate:function(e){var t=e.tableRow,n=e.tableColumn;return a.isEditCommandsTableCell(t,n)}},function(e){return t.createElement(r.TemplateConnector,null,function(r,i){var o=a.isEditTableRow(e.tableRow),l=a.isAddedTableRow(e.tableRow),d=o||l,p=[e.tableRow.rowId];return t.createElement(n,f({},e,{row:e.tableRow.row}),u&&!d&&t.createElement(s,{id:"edit",text:h("editCommand"),onExecute:function(){return i.startEditRows({rowIds:p})}}),c&&!d&&t.createElement(s,{id:"delete",text:h("deleteCommand"),onExecute:function(){i.deleteRows({rowIds:p}),i.commitDeletedRows({rowIds:p})}}),d&&t.createElement(s,{id:"commit",text:h("commitCommand"),onExecute:function(){l?i.commitAddedRows({rowIds:p}):(i.stopEditRows({rowIds:p}),i.commitChangedRows({rowIds:p}))}}),d&&t.createElement(s,{id:"cancel",text:h("cancelCommand"),onExecute:function(){l?i.cancelAddedRows({rowIds:p}):(i.stopEditRows({rowIds:p}),i.cancelChangedRows({rowIds:p}))}}))})}))}}]),n}(t.PureComponent);Ne.COLUMN_TYPE=a.TABLE_EDIT_COMMAND_TYPE,"production"!==s.env.NODE_ENV&&(Ne.propTypes={cellComponent:n.func.isRequired,headerCellComponent:n.func.isRequired,commandComponent:n.func.isRequired,showAddCommand:n.bool,showEditCommand:n.bool,showDeleteCommand:n.bool,width:n.number,messages:n.shape({addCommand:n.string,editCommand:n.string,deleteCommand:n.string,commitCommand:n.string,cancelCommand:n.string})}),Ne.defaultProps={showAddCommand:!1,showEditCommand:!1,showDeleteCommand:!1,width:140,messages:{}},Ne.components={cellComponent:"Cell",headerCellComponent:"HeaderCell",commandComponent:"Command"};var Fe=[{name:"Table"}],Be=function(e){function n(e){l(this,n);var t=h(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));t.state={columnWidths:e.columnWidths||e.defaultColumnWidths,draftColumnWidths:[]};var o=r.createStateHelper(t,{columnWidths:function(){var e=t.props.onColumnWidthsChange;return e}});return t.tableColumnsComputed=i.memoize(function(e){return function(t){var n=t.tableColumns;return a.tableColumnsWithWidths(n,e)}}),t.tableColumnsDraftComputed=i.memoize(function(e){return function(t){var n=t.tableColumns;return a.tableColumnsWithDraftWidths(n,e)}}),t.changeTableColumnWidth=o.applyReducer.bind(o,function(e,n){var r=t.props.minColumnWidth;return a.changeTableColumnWidth(e,f({},n,{minColumnWidth:r}))}),t.draftTableColumnWidth=o.applyReducer.bind(o,function(e,n){var r=t.props.minColumnWidth;return a.draftTableColumnWidth(e,f({},n,{minColumnWidth:r}))}),t.cancelTableColumnWidthDraft=o.applyReducer.bind(o,a.cancelTableColumnWidthDraft),t}return d(n,e),u(n,[{key:"render",value:function(){var e=this.state,n=e.columnWidths,a=e.draftColumnWidths,i=this.tableColumnsComputed(n),o=this.tableColumnsDraftComputed(a);return t.createElement(r.Plugin,{name:"TableColumnResizing",dependencies:Fe},t.createElement(r.Getter,{name:"tableColumnResizingEnabled",value:!0}),t.createElement(r.Getter,{name:"tableColumns",computed:i}),t.createElement(r.Getter,{name:"tableColumns",computed:o}),t.createElement(r.Action,{name:"changeTableColumnWidth",action:this.changeTableColumnWidth}),t.createElement(r.Action,{name:"draftTableColumnWidth",action:this.draftTableColumnWidth}),t.createElement(r.Action,{name:"cancelTableColumnWidthDraft",action:this.cancelTableColumnWidthDraft}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.columnWidths,r=void 0===n?t.columnWidths:n;return{columnWidths:r}}}]),n}(t.PureComponent);"production"!==s.env.NODE_ENV&&(Be.propTypes={defaultColumnWidths:n.array,columnWidths:n.array,onColumnWidthsChange:n.func,minColumnWidth:n.number.isRequired}),Be.defaultProps={defaultColumnWidths:[],columnWidths:void 0,onColumnWidthsChange:void 0};var Ve=[{name:"PagingState"}],Ue={showAll:"All",info:function(e){var t=e.from,n=e.to,r=e.count;return t+(t<n?"-"+n:"")+" of "+r}},Ge=function(e){function n(){return l(this,n),h(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return d(n,e),u(n,[{key:"render",value:function(){var e=this.props,n=e.containerComponent,o=e.pageSizes,s=e.messages,l=i.getMessagesFormatter(f({},Ue,s));return t.createElement(r.Plugin,{name:"PagingPanel",dependencies:Ve},t.createElement(r.Template,{name:"footer"},t.createElement(r.TemplatePlaceholder,null),t.createElement(r.TemplateConnector,null,function(e,r){var i=e.currentPage,s=e.pageSize,u=e.totalCount,c=r.setCurrentPage,f=r.setPageSize;return t.createElement(n,{currentPage:i,pageSize:s,totalCount:u,totalPages:a.pageCount(u,s),pageSizes:o,getMessage:l,onCurrentPageChange:c,onPageSizeChange:f})})))}}]),n}(t.PureComponent);"production"!==s.env.NODE_ENV&&(Ge.propTypes={pageSizes:n.arrayOf(n.number),containerComponent:n.func.isRequired,messages:n.shape({showAll:n.string,info:n.oneOfType([n.string,n.func])})}),Ge.defaultProps={pageSizes:[],messages:{}},Ge.components={containerComponent:"Container"};var He=function(e){function n(e){l(this,n);var t=h(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={dragging:!1},t}return d(n,e),u(n,[{key:"render",value:function(){var e=this,n=this.props,a=n.item,i=n.itemComponent,o=n.draggingEnabled,s=n.onDragStart,l=n.onDragEnd,u=this.state.dragging,c=t.createElement(i,{item:f({},a,{draft:u||a.draft})});return o?t.createElement(r.DragSource,{payload:[{type:"column",columnName:a.column.name}],onStart:function(){e.setState({dragging:!0}),s()},onEnd:function(){e.setState({dragging:!1}),l()}},c):c}}]),n}(t.PureComponent);"production"!==s.env.NODE_ENV&&(He.propTypes={item:n.shape({column:n.object,draft:n.bool}).isRequired,itemComponent:n.func.isRequired,draggingEnabled:n.bool,onDragStart:n.func,onDragEnd:n.func}),He.defaultProps={draggingEnabled:!1,onDragStart:function(){},onDragEnd:function(){}};var We=function(e){function n(e){l(this,n);var t=h(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={sourceColumnName:null,targetItemIndex:-1},t.handleDragEvent=function(e,n){var r=n.payload,a=p(n,["payload"]),i=t.props.isColumnGroupingEnabled,o=r[0].columnName;i(o)&&e(f({payload:r},a))},t.onEnter=function(e){var n=e.payload;t.setState({sourceColumnName:n[0].columnName})},t.onOver=function(e){var n=e.clientOffset,r=t.props,i=r.onGroupDraft,s=r.items,l=t.state,u=l.sourceColumnName,c=l.targetItemIndex,f=t.itemRefs.map(function(e){return o.findDOMNode(e).getBoundingClientRect()}),d=s.findIndex(function(e){var t=e.column;return t.name===u}),p=a.getGroupCellTargetIndex(f,d,n);c!==p&&(i({columnName:u,groupIndex:p}),t.setState({targetItemIndex:p}))},t.onLeave=function(){var e=t.props.onGroupDraft,n=t.state.sourceColumnName;t.draggingColumnName?(e({columnName:n,groupIndex:-1}),t.setState({targetItemIndex:-1})):t.resetState()},t.onDrop=function(){var e=t.props.onGroup,n=t.state,r=n.sourceColumnName,a=n.targetItemIndex;t.resetState(),e({columnName:r,groupIndex:a})},t.onDragStart=function(e){t.draggingColumnName=e},t.onDragEnd=function(){t.draggingColumnName=null;var e=t.state,n=e.sourceColumnName,r=e.targetItemIndex,a=t.props.onGroup;n&&-1===r&&a({columnName:n}),t.resetState()},t}return d(n,e),u(n,[{key:"resetState",value:function(){var e=this.props.onGroupDraftCancel;e(),this.setState({sourceColumnName:null,targetItemIndex:-1})}},{key:"render",value:function(){var e=this,n=this.props,a=n.items,i=n.emptyMessageComponent,o=n.containerComponent,s=n.itemComponent,l=n.draggingEnabled,u=n.isColumnGroupingEnabled;this.itemRefs=[];var c=a.length?t.createElement(o,null,a.map(function(n){var r=n.column.name;return t.createElement(He,{key:r,ref:function(t){return t&&e.itemRefs.push(t)},item:n,itemComponent:s,draggingEnabled:l&&u(r),onDragStart:function(){return e.onDragStart(r)},onDragEnd:e.onDragEnd})})):t.createElement(i,null);return l?t.createElement(r.DropTarget,{onEnter:function(t){return e.handleDragEvent(e.onEnter,t)},onOver:function(t){return e.handleDragEvent(e.onOver,t)},onLeave:function(t){return e.handleDragEvent(e.onLeave,t)},onDrop:function(t){return e.handleDragEvent(e.onDrop,t)}},c):c}}]),n}(t.PureComponent);"production"!==s.env.NODE_ENV&&(We.propTypes={items:n.arrayOf(n.shape({column:n.object,draft:n.bool})).isRequired,onGroup:n.func,itemComponent:n.func.isRequired,containerComponent:n.func.isRequired,emptyMessageComponent:n.func.isRequired,draggingEnabled:n.bool,isColumnGroupingEnabled:n.func,onGroupDraft:n.func,onGroupDraftCancel:n.func}),We.defaultProps={onGroup:function(){},draggingEnabled:!1,isColumnGroupingEnabled:function(){},onGroupDraft:function(){},onGroupDraftCancel:function(){}};var qe={groupByColumn:"Drag a column header here to group by that column"},Ye=function(e){function n(){return l(this,n),h(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return d(n,e),u(n,[{key:"render",value:function(){var e=this.props,n=e.layoutComponent,o=e.containerComponent,s=e.itemComponent,l=e.emptyMessageComponent,u=e.showSortingControls,c=e.showGroupingControls,d=e.messages,p=i.getMessagesFormatter(f({},qe,d)),h=function(){return t.createElement(l,{getMessage:p})},m=function(e){var n=e.item,i=n.column.name;return t.createElement(r.TemplateConnector,null,function(e,r){var o=e.sorting,l=e.isColumnSortingEnabled,f=e.isColumnGroupingEnabled,d=r.changeColumnGrouping,p=r.changeColumnSorting,h=l&&l(i),m=f&&f(i);return t.createElement(s,{item:n,sortingEnabled:h,groupingEnabled:m,showSortingControls:u,sortingDirection:u?a.getColumnSortingDirection(o,i):void 0,showGroupingControls:c,onGroup:function(){return d({columnName:i})},onSort:function(e){var t=e.direction,n=e.keepOther;return p({columnName:i,direction:t,keepOther:n})}})})};return t.createElement(r.Plugin,{name:"GroupingPanel",dependencies:[{name:"GroupingState"},{name:"Toolbar"},{name:"SortingState",optional:!u}]},t.createElement(r.Template,{name:"toolbarContent"},t.createElement(r.TemplateConnector,null,function(e,r){var i=e.columns,s=e.grouping,l=e.draftGrouping,u=e.draggingEnabled,c=e.isColumnGroupingEnabled,f=r.changeColumnGrouping,d=r.draftColumnGrouping,p=r.cancelColumnGroupingDraft;return t.createElement(n,{items:a.groupingPanelItems(i,s,l),isColumnGroupingEnabled:c,draggingEnabled:u,onGroup:f,onGroupDraft:d,onGroupDraftCancel:p,itemComponent:m,emptyMessageComponent:h,containerComponent:o})}),t.createElement(r.TemplatePlaceholder,null)))}}]),n}(t.PureComponent);"production"!==s.env.NODE_ENV&&(Ye.propTypes={showSortingControls:n.bool,showGroupingControls:n.bool,layoutComponent:n.func.isRequired,containerComponent:n.func.isRequired,itemComponent:n.func.isRequired,emptyMessageComponent:n.func.isRequired,messages:n.object}),Ye.defaultProps={showSortingControls:!1,showGroupingControls:!1,messages:{}},Ye.components={layoutComponent:"Layout",containerComponent:"Container",itemComponent:"Item",emptyMessageComponent:"EmptyMessage"};var Xe=r.withComponents({Layout:We})(Ye),Ze=function(e){function n(){return l(this,n),h(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return d(n,e),u(n,[{key:"render",value:function(){var e=this.props,n=e.for,i=e.formatterComponent,o=e.editorComponent,s=e.availableFilterOperations;return t.createElement(r.Plugin,{name:"DataTypeProvider"},t.createElement(r.Getter,{name:"getAvailableFilterOperations",computed:function(e){var t=e.getAvailableFilterOperations;return a.getAvailableFilterOperationsGetter(t,s,n)}}),i?t.createElement(r.Template,{name:"valueFormatter",predicate:function(e){var t=e.column;return n.includes(t.name)}},function(e){return t.createElement(i,e)}):null,o?t.createElement(r.Template,{name:"valueEditor",predicate:function(e){var t=e.column;return n.includes(t.name)}},function(e){return t.createElement(o,e)}):null)}}]),n}(t.PureComponent);"production"!==s.env.NODE_ENV&&(Ze.propTypes={for:n.arrayOf(n.string).isRequired,formatterComponent:n.func,editorComponent:n.func,availableFilterOperations:n.arrayOf(n.string)}),Ze.defaultProps={formatterComponent:void 0,editorComponent:void 0,availableFilterOperations:void 0};var $e=[{name:"Table"}],Ke={noColumns:"Nothing to show"},Je=function(e){var t=e.tableColumns,n=e.hiddenColumnNames;return a.visibleTableColumns(t,n)},Qe=function(e){function n(e){l(this,n);var t=h(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));t.state={hiddenColumnNames:e.hiddenColumnNames||e.defaultHiddenColumnNames};var i=r.createStateHelper(t,{hiddenColumnNames:function(){var e=t.props.onHiddenColumnNamesChange;return e}});return t.toggleColumnVisibility=i.applyFieldReducer.bind(i,"hiddenColumnNames",a.toggleColumn),t}return d(n,e),u(n,[{key:"render",value:function(){var e=this.props,n=e.emptyMessageComponent,o=e.messages,s=i.getMessagesFormatter(f({},Ke,o)),l=this.state.hiddenColumnNames,u=this.props,c=u.columnExtensions,d=u.columnTogglingEnabled;return t.createElement(r.Plugin,{name:"TableColumnVisibility",dependencies:$e},t.createElement(r.Getter,{name:"hiddenColumnNames",value:l}),t.createElement(r.Getter,{name:"tableColumns",computed:Je}),t.createElement(r.Getter,{name:"isColumnTogglingEnabled",value:function(e,t){return a.getColumnExtensionValueGetter(e,"togglingEnabled",t)}(c,d)}),t.createElement(r.Action,{name:"toggleColumnVisibility",action:this.toggleColumnVisibility}),t.createElement(r.Template,{name:"table"},function(e){return t.createElement(r.TemplateConnector,null,function(i){var o=i.tableColumns;return a.tableDataColumnsExist(o)?t.createElement(r.TemplatePlaceholder,null):t.createElement(n,f({getMessage:s},e))})}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.hiddenColumnNames,r=void 0===n?t.hiddenColumnNames:n;return{hiddenColumnNames:r}}}]),n}(t.PureComponent);"production"!==s.env.NODE_ENV&&(Qe.propTypes={hiddenColumnNames:n.arrayOf(n.string),defaultHiddenColumnNames:n.arrayOf(n.string),emptyMessageComponent:n.func.isRequired,onHiddenColumnNamesChange:n.func,messages:n.object,columnExtensions:n.array,columnTogglingEnabled:n.bool}),Qe.defaultProps={hiddenColumnNames:void 0,defaultHiddenColumnNames:[],onHiddenColumnNamesChange:void 0,messages:{},columnExtensions:void 0,columnTogglingEnabled:!0},Qe.components={emptyMessageComponent:"EmptyMessage"};var et=function(e){function n(){return l(this,n),h(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return d(n,e),u(n,[{key:"render",value:function(){var e=this.props,n=e.rootComponent,a=e.flexibleSpaceComponent;return t.createElement(r.Plugin,{name:"Toolbar"},t.createElement(r.Template,{name:"header"},t.createElement(n,null,t.createElement(r.TemplatePlaceholder,{name:"toolbarContent"})),t.createElement(r.TemplatePlaceholder,null)),t.createElement(r.Template,{name:"toolbarContent"},t.createElement(a,null)))}}]),n}(t.PureComponent);"production"!==s.env.NODE_ENV&&(et.propTypes={rootComponent:n.func.isRequired,flexibleSpaceComponent:n.func.isRequired}),et.components={rootComponent:"Root",flexibleSpaceComponent:"FlexibleSpace"};var tt=function(e){function n(e){l(this,n);var t=h(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));t.state={expandedRowIds:e.expandedRowIds||e.defaultExpandedRowIds};var i=r.createStateHelper(t,{expandedRowIds:function(){var e=t.props.onExpandedRowIdsChange;return e}});return t.toggleRowExpanded=i.applyFieldReducer.bind(i,"expandedRowIds",a.toggleRowExpanded),t}return d(n,e),u(n,[{key:"render",value:function(){var e=this.state.expandedRowIds;return t.createElement(r.Plugin,{name:"TreeDataState"},t.createElement(r.Getter,{name:"expandedRowIds",value:e})," ",t.createElement(r.Action,{name:"toggleRowExpanded",action:this.toggleRowExpanded}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.expandedRowIds,r=void 0===n?t.expandedRowIds:n;return{expandedRowIds:r}}}]),n}(t.PureComponent);"production"!==s.env.NODE_ENV&&(tt.propTypes={expandedRowIds:n.array,defaultExpandedRowIds:n.array,onExpandedRowIdsChange:n.func}),tt.defaultProps={expandedRowIds:void 0,defaultExpandedRowIds:[],onExpandedRowIdsChange:void 0};var nt=[{name:"TreeDataState"}],rt=function(e){var t=e.rows,n=e.getRowId,r=e.expandedRowIds;return a.expandedTreeRows(t,n,r)},at=function(e){var t=e.getRowId,n=e.rows;return a.customTreeRowIdGetter(t,n)},it=function(e){var t=e.getRowLevelKey,n=e.rows;return a.customTreeRowLevelKeyGetter(t,n)},ot=function(e){var t=e.rows;return a.isTreeRowLeafGetter(t)},st=function(e){var t=e.rows;return a.getTreeRowLevelGetter(t)},lt=function(e){var t=e.rows,n=e.getCollapsedRows;return a.collapsedTreeRowsGetter(n,t)},ut=function(e){var t=e.rows;return a.unwrappedCustomTreeRows(t)},ct=function(e){function n(){return l(this,n),h(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return d(n,e),u(n,[{key:"render",value:function(){var e=this.props.getChildRows;return t.createElement(r.Plugin,{name:"CustomTreeData",dependencies:nt},t.createElement(r.Getter,{name:"rows",computed:function(t){var n=t.rows;return a.customTreeRowsWithMeta(n,e)}}),t.createElement(r.Getter,{name:"getRowId",computed:at}),t.createElement(r.Getter,{name:"getRowLevelKey",computed:it}),t.createElement(r.Getter,{name:"isTreeRowLeaf",computed:ot}),t.createElement(r.Getter,{name:"getTreeRowLevel",computed:st}),t.createElement(r.Getter,{name:"rows",computed:rt}),t.createElement(r.Getter,{name:"getCollapsedRows",computed:lt}),t.createElement(r.Getter,{name:"rows",computed:ut}))}}]),n}(t.PureComponent);"production"!==s.env.NODE_ENV&&(ct.propTypes={getChildRows:n.func.isRequired});var ft=function(e){function n(){return l(this,n),h(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return d(n,e),u(n,[{key:"render",value:function(){var e=this.props,n=e.for,i=e.showSelectionControls,o=e.showSelectAll,s=e.indentComponent,l=e.expandButtonComponent,u=e.checkboxComponent,c=e.contentComponent,d=e.cellComponent;return t.createElement(r.Plugin,{name:"TableTreeColumn",dependencies:[{name:"DataTypeProvider",optional:!0},{name:"TreeDataState"},{name:"SelectionState",optional:!i},{name:"IntegratedSelection",optional:!o},{name:"Table"},{name:"TableHeaderRow",optional:!0}]},t.createElement(r.Getter,{name:"tableTreeColumnName",value:n}),t.createElement(r.Template,{name:"tableHeaderCellBefore",predicate:function(e){var t=e.column;return t.name===n}},t.createElement(l,{visible:!1}),i&&o&&t.createElement(r.TemplateConnector,null,function(e,n){var r=e.selectAllAvailable,a=e.allSelected,i=e.someSelected,o=n.toggleSelectAll;return t.createElement(u,{disabled:!r,checked:a,indeterminate:i,onChange:o})})),t.createElement(r.Template,{name:"tableCell",predicate:function(e){var t=e.tableRow,r=e.tableColumn;return a.isTreeTableCell(t,r,n)}},function(e){return t.createElement(r.TemplateConnector,null,function(n,a){var o=n.getCollapsedRows,p=n.expandedRowIds,h=n.selection,m=n.isTreeRowLeaf,v=n.getTreeRowLevel,g=n.getCellValue,y=a.toggleRowExpanded,b=a.toggleSelection,x=e.tableRow,_=x.row,w=x.rowId,T=e.tableColumn.column.name,k=g(_,T),C=o(_);return t.createElement(r.TemplatePlaceholder,{name:"valueFormatter",params:{row:_,column:e.tableColumn.column,value:k}},function(n){return t.createElement(d,f({},e,{row:_,column:e.tableColumn.column,value:k}),t.createElement(s,{level:v(_)}),t.createElement(l,{visible:C?!!C.length:!m(_),expanded:p.indexOf(w)>-1,onToggle:function(){return y({rowId:w})}}),i&&t.createElement(u,{disabled:!1,checked:h.indexOf(w)>-1,indeterminate:!1,onChange:function(){return b({rowIds:[w]})}}),t.createElement(c,null,n||k))})})}))}}]),n}(t.PureComponent);"production"!==s.env.NODE_ENV&&(ft.propTypes={for:n.string.isRequired,showSelectionControls:n.bool,showSelectAll:n.bool,cellComponent:n.func.isRequired,indentComponent:n.func.isRequired,expandButtonComponent:n.func.isRequired,checkboxComponent:n.func.isRequired,contentComponent:n.func.isRequired}),ft.defaultProps={showSelectionControls:!1,showSelectAll:!1},ft.components={cellComponent:"Cell",contentComponent:"Content",indentComponent:"Indent",expandButtonComponent:"ExpandButton",checkboxComponent:"Checkbox"};var dt=function(e){function n(e){l(this,n);var t=h(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));t.state={value:e.value||e.defaultValue};var i=r.createStateHelper(t,{value:function(){var e=t.props.onValueChange;return e}});return t.changeValue=i.applyFieldReducer.bind(i,"value",a.changeSearchValue),t}return d(n,e),u(n,[{key:"render",value:function(){var e=this.state.value;return t.createElement(r.Plugin,{name:"SearchState"},t.createElement(r.Getter,{name:"filterExpression",computed:function(t){var n=t.filterExpression,r=t.columns;return a.searchFilterExpression(e,r,n)}}),t.createElement(r.Getter,{name:"searchValue",value:e}),t.createElement(r.Action,{name:"changeSearchValue",action:this.changeValue}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.value,r=void 0===n?t.value:n;return{value:r}}}]),n}(t.PureComponent);"production"!==s.env.NODE_ENV&&(dt.propTypes={value:n.string,defaultValue:n.string,onValueChange:n.func}),dt.defaultProps={value:void 0,defaultValue:"",onValueChange:void 0};var pt=[{name:"Toolbar"},{name:"SearchState"}],ht={searchPlaceholder:"Search..."},mt=function(e){function n(){return l(this,n),h(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return d(n,e),u(n,[{key:"render",value:function(){var e=this.props,n=e.inputComponent,a=e.messages,o=i.getMessagesFormatter(f({},ht,a));return t.createElement(r.Plugin,{name:"SearchPanel",dependencies:pt},t.createElement(r.Template,{name:"toolbarContent"},t.createElement(r.TemplatePlaceholder,null),t.createElement(r.TemplateConnector,null,function(e,r){var a=e.searchValue,i=r.changeSearchValue;return t.createElement(n,{value:a,onValueChange:i,getMessage:o})})))}}]),n}(t.PureComponent);"production"!==s.env.NODE_ENV&&(mt.propTypes={inputComponent:n.func.isRequired,messages:n.object}),mt.defaultProps={messages:{}},mt.components={inputComponent:"Input"};var vt=function(e){var t=e.tableHeaderRows;return a.tableHeaderRowsWithFixed(t)},gt=function(e){return t.createElement(r.TemplatePlaceholder,{params:e})},yt=[{name:"Table"}],bt=function(e){function n(e){l(this,n);var t=h(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={tableColumnDimensions:{}},t}return d(n,e),u(n,[{key:"handleListenerSizeChange",value:function(e,t){this.setState(function(n){return{tableColumnDimensions:f({},n.tableColumnDimensions,c({},e,t))}})}},{key:"render",value:function(){var e=this,n=this.props,i=n.leftColumns,o=n.rightColumns,s=n.cellComponent,l=n.listenerRowComponent,u=n.listenerCellComponent;return t.createElement(r.Plugin,{name:"TableFixedColumns",dependencies:yt},t.createElement(r.Getter,{name:"tableHeaderRows",computed:vt}),t.createElement(r.Getter,{name:"tableColumns",computed:function(e){var t=e.tableColumns;return a.tableColumnsWithFixed(t,i,o)}}),t.createElement(r.Template,{name:"tableCell",predicate:function(e){var t=e.tableColumn;return!!t.fixed}},function(n){return t.createElement(r.TemplateConnector,null,function(r){var l=r.tableColumns,u=e.state.tableColumnDimensions,c=a.calculateFixedColumnProps(n,{leftColumns:i,rightColumns:o},l,u);return t.createElement(s,f({},n,c,{component:gt}))})}),t.createElement(r.Template,{name:"tableRow",predicate:function(e){var t=e.tableRow;return a.isFixedTableRow(t)}},function(e){return t.createElement(l,e)}),t.createElement(r.Template,{name:"tableCell",predicate:function(e){var t=e.tableRow;return a.isFixedTableRow(t)}},function(n){return t.createElement(u,f({},n,{listen:!!n.tableColumn.fixed,onSizeChange:function(t){var r=t.width;return e.handleListenerSizeChange(n.tableColumn.key,r)}}))}))}}]),n}(t.PureComponent);"production"!==s.env.NODE_ENV&&(bt.propTypes={leftColumns:n.arrayOf(n.oneOfType([n.string,n.symbol])),rightColumns:n.arrayOf(n.oneOfType([n.string,n.symbol])),cellComponent:n.func.isRequired,listenerRowComponent:n.func.isRequired,listenerCellComponent:n.func.isRequired}),bt.defaultProps={leftColumns:[],rightColumns:[]},bt.components={cellComponent:"Cell",listenerRowComponent:"ListenerRow",listenerCellComponent:"ListenerCell"};var xt=function(e){function n(){return l(this,n),h(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return d(n,e),u(n,[{key:"render",value:function(){var e=this.props,n=e.totalItems,a=e.groupItems,i=e.treeItems;return t.createElement(r.Plugin,{name:"SummaryState"},t.createElement(r.Getter,{name:"totalSummaryItems",value:n}),t.createElement(r.Getter,{name:"groupSummaryItems",value:a}),t.createElement(r.Getter,{name:"treeSummaryItems",value:i}))}}]),n}(t.PureComponent);"production"!==s.env.NODE_ENV&&(xt.propTypes={totalItems:n.array,groupItems:n.array,treeItems:n.array}),xt.defaultProps={totalItems:void 0,groupItems:void 0,treeItems:void 0};var _t=[{name:"SummaryState"}],wt=function(e){function n(){return l(this,n),h(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return d(n,e),u(n,[{key:"render",value:function(){var e=this.props.calculator;return t.createElement(r.Plugin,{name:"IntegratedSummary",dependencies:_t},t.createElement(r.Getter,{name:"totalSummaryValues",computed:function(t){var n=t.rows,r=t.totalSummaryItems,i=t.getCellValue,o=t.getRowLevelKey,s=t.isGroupRow,l=t.getCollapsedRows;return a.totalSummaryValues(n,r,i,o,s,l,e)}}),t.createElement(r.Getter,{name:"groupSummaryValues",computed:function(t){var n=t.rows,r=t.groupSummaryItems,i=t.getCellValue,o=t.getRowLevelKey,s=t.isGroupRow;return a.groupSummaryValues(n,r,i,o,s,e)}}),t.createElement(r.Getter,{name:"treeSummaryValues",computed:function(t){var n=t.rows,r=t.treeSummaryItems,i=t.getCellValue,o=t.getRowLevelKey,s=t.isGroupRow,l=t.getRowId;return a.treeSummaryValues(n,r,i,o,s,l,e)}}))}}]),n}(t.PureComponent);wt.defaultCalculator=a.defaultSummaryCalculator,"production"!==s.env.NODE_ENV&&(wt.propTypes={calculator:n.func}),wt.defaultProps={calculator:void 0};var Tt=[{name:"SummaryState"}],kt=function(e){function n(){return l(this,n),h(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return d(n,e),u(n,[{key:"render",value:function(){var e=this.props,n=e.totalValues,a=e.groupValues,i=e.treeValues;return t.createElement(r.Plugin,{name:"CustomSummary",dependencies:Tt},t.createElement(r.Getter,{name:"totalSummaryValues",value:n}),t.createElement(r.Getter,{name:"groupSummaryValues",value:a}),t.createElement(r.Getter,{name:"treeSummaryValues",value:i}))}}]),n}(t.PureComponent);"production"!==s.env.NODE_ENV&&(kt.propTypes={totalValues:n.array,groupValues:n.object,treeValues:n.object}),kt.defaultProps={totalValues:void 0,groupValues:void 0,treeValues:void 0};var Ct=[{name:"DataTypeProvider",optional:!0},{name:"SummaryState"},{name:"CustomSummary",optional:!0},{name:"IntegratedSummary",optional:!0},{name:"Table"},{name:"TableTreeColumn",optional:!0}],Et={sum:"Sum",min:"Min",max:"Max",avg:"Avg",count:"Count"},Mt=function(e){var t=e.tableBodyRows,n=e.getRowLevelKey,r=e.isGroupRow,i=e.getRowId;return a.tableRowsWithSummaries(t,n,r,i)},At=function(e){var t=e.tableFooterRows;return a.tableRowsWithTotalSummaries(t)},St=["count"],Ot=function(e){function n(){return l(this,n),h(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return d(n,e),u(n,[{key:"renderContent",value:function(e,n){var a=this.props,o=a.formatlessSummaryTypes,s=a.itemComponent,l=a.messages,u=i.getMessagesFormatter(f({},Et,l));return t.createElement(t.Fragment,null,n.map(function(n){return null===n.value||o.includes(n.type)||St.includes(n.type)?t.createElement(s,{key:n.type},u(n.type),":",String(n.value)):t.createElement(r.TemplatePlaceholder,{key:n.type,name:"valueFormatter",params:{column:e,value:n.value}},function(e){return t.createElement(s,null,u(n.type),":",e||String(n.value))})}))}},{key:"render",value:function(){var e=this,n=this.props,i=n.totalRowComponent,o=n.groupRowComponent,s=n.treeRowComponent,l=n.totalCellComponent,u=n.groupCellComponent,c=n.treeCellComponent,d=n.treeColumnCellComponent,p=n.treeColumnContentComponent,h=n.treeColumnIndentComponent;return t.createElement(r.Plugin,{name:"TableSummaryRow",dependencies:Ct},t.createElement(r.Getter,{name:"tableBodyRows",computed:Mt}),t.createElement(r.Getter,{name:"tableFooterRows",computed:At}),t.createElement(r.Template,{name:"tableCell",predicate:function(e){var t=e.tableRow,n=e.tableColumn;return a.isTotalSummaryTableCell(t,n)}},function(n){return t.createElement(r.TemplateConnector,null,function(r){var i=r.totalSummaryItems,o=r.totalSummaryValues,s=a.getColumnSummaries(i,n.tableColumn.column.name,o);return t.createElement(l,f({},n,{column:n.tableColumn.column}),e.renderContent(n.tableColumn.column,s))})}),t.createElement(r.Template,{name:"tableCell",predicate:function(e){var t=e.tableRow,n=e.tableColumn;return a.isGroupSummaryTableCell(t,n)}},function(n){return t.createElement(r.TemplateConnector,null,function(r){var i=r.groupSummaryItems,o=r.groupSummaryValues,s=a.getColumnSummaries(i,n.tableColumn.column.name,o[n.tableRow.row.compoundKey]);return t.createElement(u,f({},n,{column:n.tableColumn.column}),e.renderContent(n.tableColumn.column,s))})}),t.createElement(r.Template,{name:"tableCell",predicate:function(e){var t=e.tableRow,n=e.tableColumn;return a.isTreeSummaryTableCell(t,n)}},function(n){return t.createElement(r.TemplateConnector,null,function(r){var i=r.treeSummaryItems,o=r.treeSummaryValues,s=r.tableTreeColumnName,l=r.getRowId,u=r.getTreeRowLevel,m=a.getColumnSummaries(i,n.tableColumn.column.name,o[l(n.tableRow.row)]);return s===n.tableColumn.column.name?t.createElement(d,f({},n,{column:n.tableColumn.column}),t.createElement(h,{level:u(n.tableRow.row)}),t.createElement(p,null,e.renderContent(n.tableColumn.column,m))):t.createElement(c,f({},n,{column:n.tableColumn.column}),e.renderContent(n.tableColumn.column,m))})}),t.createElement(r.Template,{name:"tableRow",predicate:function(e){var t=e.tableRow;return a.isTotalSummaryTableRow(t)}},function(e){return t.createElement(i,e)}),t.createElement(r.Template,{name:"tableRow",predicate:function(e){var t=e.tableRow;return a.isGroupSummaryTableRow(t)}},function(e){return t.createElement(o,e)}),t.createElement(r.Template,{name:"tableRow",predicate:function(e){var t=e.tableRow;return a.isTreeSummaryTableRow(t)}},function(e){return t.createElement(s,e)}))}}]),n}(t.PureComponent);Ot.TREE_ROW_TYPE=a.TABLE_TREE_SUMMARY_TYPE,Ot.GROUP_ROW_TYPE=a.TABLE_GROUP_SUMMARY_TYPE,Ot.TOTAL_ROW_TYPE=a.TABLE_TOTAL_SUMMARY_TYPE,"production"!==s.env.NODE_ENV&&(Ot.propTypes={formatlessSummaryTypes:n.array,totalRowComponent:n.func.isRequired,groupRowComponent:n.func.isRequired,treeRowComponent:n.func.isRequired,totalCellComponent:n.func.isRequired,groupCellComponent:n.func.isRequired,treeCellComponent:n.func.isRequired,treeColumnCellComponent:n.func.isRequired,treeColumnContentComponent:n.func.isRequired,treeColumnIndentComponent:n.func.isRequired,itemComponent:n.func.isRequired,messages:n.shape({sum:n.string,min:n.string,max:n.string,avg:n.string,count:n.string})}),Ot.defaultProps={formatlessSummaryTypes:[],messages:{}},Ot.components={totalRowComponent:"TotalRow",groupRowComponent:"GroupRow",treeRowComponent:"TreeRow",totalCellComponent:"TotalCell",groupCellComponent:"GroupCell",treeCellComponent:"TreeCell",treeColumnCellComponent:"TableTreeCell",treeColumnContentComponent:"TableTreeContent",treeColumnIndentComponent:"TableTreeIndent",itemComponent:"Item"};var Pt=function(e){function n(e){l(this,n);var t=h(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={animationState:new Map},t.animations=new Map,t.tableNode=null,t.setRef=function(e){e&&(t.tableNode=e)},t}return d(n,e),u(n,[{key:"componentDidUpdate",value:function(e){var t=this.props.columns,n=e.columns,r=o.findDOMNode(this).scrollWidth;this.animations=a.getAnimations(n,t,r,this.animations),cancelAnimationFrame(this.raf),this.raf=requestAnimationFrame(this.processAnimationFrame.bind(this))}},{key:"getColumns",value:function(){var e=this.props.columns,t=this.state.animationState,n=e,r=0===e.filter(function(e){return void 0===e.width}).length;return r&&(n=n.slice()).push({key:a.TABLE_FLEX_TYPE.toString(),type:a.TABLE_FLEX_TYPE}),t.size&&(n=n.map(function(e){return t.has(e.key)?f({},e,{animationState:t.get(e.key)}):e})),n}},{key:"processAnimationFrame",value:function(){var e=this.state.animationState;if(this.animations=a.filterActiveAnimations(this.animations),this.animations.size){var t=a.evalAnimations(this.animations);this.setState({animationState:t})}else e.size&&this.setState({animationState:new Map})}},{key:"render",value:function(){var e=this.props,n=e.layoutComponent,r=e.minColumnWidth,i=p(e,["layoutComponent","minColumnWidth"]),o=this.getColumns(),s=o.map(function(e){return e.width||(e.type===a.TABLE_FLEX_TYPE?0:r)}).reduce(function(e,t){return e+t},0);return t.createElement(n,f({},i,{columns:o,minWidth:s,minColumnWidth:r}))}}]),n}(t.PureComponent);"production"!==s.env.NODE_ENV&&(Pt.propTypes={columns:n.array.isRequired,minColumnWidth:n.number.isRequired,layoutComponent:n.func.isRequired});var Rt=function(e){function n(){return l(this,n),h(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return d(n,e),u(n,[{key:"render",value:function(){var e=this.props.columns;return t.createElement("colgroup",null,e.map(function(e){return t.createElement("col",{key:e.key,style:void 0!==e.width?{width:e.width+"px"}:null})}))}}]),n}(t.PureComponent);"production"!==s.env.NODE_ENV&&(Rt.propTypes={columns:n.array.isRequired});var Lt=function(e){function n(e){l(this,n);var t=h(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={rowHeights:new Map,viewportTop:0,viewportLeft:0,width:800,height:600},t.state.headerHeight=e.headerRows.reduce(function(e,n){return e+t.getRowHeight(n)},0),t.state.bodyHeight=0,t.state.footerHeight=e.footerRows.reduce(function(e,n){return e+t.getRowHeight(n)},0),t.rowRefs=new Map,t.blockRefs=new Map,t.registerRowRef=t.registerRowRef.bind(t),t.getRowHeight=t.getRowHeight.bind(t),t.updateViewport=t.updateViewport.bind(t),t.handleContainerSizeChange=t.handleContainerSizeChange.bind(t),t}return d(n,e),u(n,[{key:"componentDidMount",value:function(){this.storeRowHeights(),this.storeBloksHeights()}},{key:"componentDidUpdate",value:function(){this.storeRowHeights(),this.storeBloksHeights()}},{key:"getRowHeight",value:function(e){var t=this.state.rowHeights,n=this.props.estimatedRowHeight,r=t.get(e.key);return void 0!==r?r:e.height?e.height:n}},{key:"storeRowHeights",value:function(){var e=this,t=Array.from(this.rowRefs.entries()).map(function(e){var t=m(e,2),n=t[0],r=t[1];return[n,o.findDOMNode(r)]}).filter(function(e){var t=m(e,2),n=t[1];return!!n}).map(function(e){var t=m(e,2),n=t[0],r=t[1];return[n,r.getBoundingClientRect().height]}).filter(function(e){var t=m(e,1),n=t[0];return n.type!==a.TABLE_STUB_TYPE}).filter(function(t){var n=m(t,2),r=n[0],a=n[1];return a!==e.getRowHeight(r)});if(t.length){var n=this.state.rowHeights;t.forEach(function(e){var t=m(e,2),r=t[0],a=t[1];return n.set(r.key,a)}),this.setState({rowHeights:n})}}},{key:"storeBloksHeights",value:function(){var e=this.blockRefs.get("header")?o.findDOMNode(this.blockRefs.get("header")).getBoundingClientRect().height:0,t=this.blockRefs.get("body")?o.findDOMNode(this.blockRefs.get("body")).getBoundingClientRect().height:0,n=this.blockRefs.get("footer")?o.findDOMNode(this.blockRefs.get("footer")).getBoundingClientRect().height:0,r=this.state,a=r.headerHeight,i=r.bodyHeight,s=r.footerHeight;a===e&&i===t&&s===n||this.setState({headerHeight:e,bodyHeight:t,footerHeight:n})}},{key:"registerRowRef",value:function(e,t){null===t?this.rowRefs.delete(e):this.rowRefs.set(e,t)}},{key:"registerBlockRef",value:function(e,t){null===t?this.blockRefs.delete(e):this.blockRefs.set(e,t)}},{key:"updateViewport",value:function(e){var t=e.target;if(t===e.currentTarget){var n=parseInt(t.scrollLeft+t.clientWidth,10),r=parseInt(t.scrollTop+t.clientHeight,10);t.scrollTop<0||t.scrollLeft<0||n>Math.max(t.scrollWidth,t.clientWidth)||r>Math.max(t.scrollHeight,t.clientHeight)||this.setState({viewportTop:t.scrollTop,viewportLeft:t.scrollLeft})}}},{key:"handleContainerSizeChange",value:function(e){var t=e.width,n=e.height;this.setState({width:t,height:n})}},{key:"renderRowsBlock",value:function(e,n,a,i,o){var s=this,l=this.props,u=l.minWidth,c=l.rowComponent,d=l.cellComponent;return t.createElement(r.RefHolder,{ref:function(t){return s.registerBlockRef(e,t)}},t.createElement(a,{style:f({minWidth:u+"px"},o?{marginBottom:o+"px"}:null)},t.createElement(Rt,{columns:n.columns}),t.createElement(i,null,n.rows.map(function(e){var n=e.row,a=e.cells,i=void 0===a?[]:a;return t.createElement(r.RefHolder,{key:n.key,ref:function(e){return s.registerRowRef(n,e)}},t.createElement(c,{tableRow:n,style:void 0!==n.height?{height:n.height+"px"}:void 0},i.map(function(e){var r=e.column;return t.createElement(d,{key:r.key,tableRow:n,tableColumn:r,style:r.animationState,colSpan:e.colSpan})})))}))))}},{key:"render",value:function(){var e=this.props,n=e.headerRows,i=e.bodyRows,o=e.footerRows,s=e.columns,l=e.minColumnWidth,u=e.height,c=e.containerComponent,d=e.headTableComponent,p=e.footerTableComponent,h=e.tableComponent,m=e.headComponent,v=e.bodyComponent,g=e.footerComponent,y=e.getCellColSpan,b=this.state,x=b.viewportLeft,_=b.viewportTop,w=b.headerHeight,T=b.bodyHeight,k=b.footerHeight,C=b.width,E=b.height,M=function(e){return e.type===a.TABLE_FLEX_TYPE?0:e.width||l},A=function(e,t){return y({tableRow:e,tableColumn:t,tableColumns:s})},S=a.getCollapsedGrid({rows:n,columns:s,top:0,left:x,width:C,height:w,getColumnWidth:M,getRowHeight:this.getRowHeight,getColSpan:A}),O=a.getCollapsedGrid({rows:i,columns:s,top:_,left:x,width:C,height:E-w-k,getColumnWidth:M,getRowHeight:this.getRowHeight,getColSpan:A}),P=a.getCollapsedGrid({rows:o,columns:s,top:0,left:x,width:C,height:k,getColumnWidth:M,getRowHeight:this.getRowHeight,getColSpan:A});return t.createElement(r.Sizer,{onSizeChange:this.handleContainerSizeChange,containerComponent:c,style:f({},"auto"===u?null:{height:u+"px"}),onScroll:this.updateViewport},!!n.length&&this.renderRowsBlock("header",S,d,m),this.renderRowsBlock("body",O,h,v,Math.max(0,E-w-T-k)),!!o.length&&this.renderRowsBlock("footer",P,p,g))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=t.rowHeights,r=[].concat(v(e.headerRows),v(e.bodyRows),v(e.footerRows)).reduce(function(e,t){var r=n.get(t.key);return void 0!==r&&e.set(t.key,r),e},new Map);return{rowHeights:r}}}]),n}(t.PureComponent);"production"!==s.env.NODE_ENV&&(Lt.propTypes={minWidth:n.number.isRequired,minColumnWidth:n.number.isRequired,height:n.oneOfType([n.number,n.oneOf(["auto"])]).isRequired,headerRows:n.array,bodyRows:n.array.isRequired,footerRows:n.array,columns:n.array.isRequired,cellComponent:n.func.isRequired,rowComponent:n.func.isRequired,bodyComponent:n.func.isRequired,headComponent:n.func,footerComponent:n.func,tableComponent:n.func.isRequired,headTableComponent:n.func,footerTableComponent:n.func,containerComponent:n.func.isRequired,estimatedRowHeight:n.number.isRequired,getCellColSpan:n.func.isRequired}),Lt.defaultProps={headerRows:[],footerRows:[],headComponent:function(){return null},headTableComponent:function(){return null},footerComponent:function(){return null},footerTableComponent:function(){return null}};var Dt=function(e){function n(){return l(this,n),h(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return d(n,e),u(n,[{key:"render",value:function(){var e=this.props,n=e.row,r=e.columns,a=e.rowComponent,i=e.cellComponent,o=e.getCellColSpan;return t.createElement(a,{tableRow:n,style:function(e){var t=e.row;return void 0!==t.height?{height:t.height+"px"}:void 0}({row:n})},r.map(function(e){return t.createElement(i,{key:e.key,tableRow:n,tableColumn:e,style:function(e){return e.column.animationState}({column:e}),colSpan:function(e,t){return o({tableRow:e,tableColumn:t,tableColumns:r})}(n,e)})}))}}]),n}(t.PureComponent);"production"!==s.env.NODE_ENV&&(Dt.propTypes={row:n.any.isRequired,columns:n.array.isRequired,rowComponent:n.func.isRequired,cellComponent:n.func.isRequired,getCellColSpan:n.func.isRequired});var It=function(e){function n(){return l(this,n),h(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return d(n,e),u(n,[{key:"render",value:function(){var e=this.props,n=e.rows,r=e.columns,a=e.blockComponent,i=e.rowComponent,o=e.cellComponent,s=e.getCellColSpan;return t.createElement(a,null,n.map(function(e){return t.createElement(Dt,{key:e.key,row:e,columns:r,rowComponent:i,cellComponent:o,getCellColSpan:s})}))}}]),n}(t.PureComponent);"production"!==s.env.NODE_ENV&&(It.propTypes={rows:n.array.isRequired,columns:n.array.isRequired,blockComponent:n.func.isRequired,rowComponent:n.func.isRequired,cellComponent:n.func.isRequired,getCellColSpan:n.func.isRequired});var zt=function(e){function n(){return l(this,n),h(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return d(n,e),u(n,[{key:"render",value:function(){var e=this.props,n=e.headerRows,r=e.bodyRows,a=e.footerRows,i=e.columns,o=e.minWidth,s=e.containerComponent,l=e.tableComponent,u=e.headComponent,c=e.bodyComponent,f=e.footerComponent,d=e.rowComponent,p=e.cellComponent,h=e.getCellColSpan;return t.createElement(s,null,t.createElement(l,{style:{minWidth:o+"px"}},t.createElement(Rt,{columns:i}),!!n.length&&t.createElement(It,{rows:n,columns:i,blockComponent:u,rowComponent:d,cellComponent:p,getCellColSpan:h}),t.createElement(It,{rows:r,columns:i,blockComponent:c,rowComponent:d,cellComponent:p,getCellColSpan:h}),!!a.length&&t.createElement(It,{rows:a,columns:i,blockComponent:f,rowComponent:d,cellComponent:p,getCellColSpan:h})))}}]),n}(t.PureComponent);"production"!==s.env.NODE_ENV&&(zt.propTypes={headerRows:n.array,bodyRows:n.array.isRequired,footerRows:n.array,columns:n.array.isRequired,minWidth:n.number.isRequired,containerComponent:n.func.isRequired,tableComponent:n.func.isRequired,headComponent:n.func,bodyComponent:n.func.isRequired,footerComponent:n.func,rowComponent:n.func.isRequired,cellComponent:n.func.isRequired,getCellColSpan:n.func.isRequired}),zt.defaultProps={headerRows:[],footerRows:[],headComponent:function(){return null},footerComponent:function(){return null}},e.Grid=y,e.ColumnChooser=x,e.FilteringState=w,e.IntegratedFiltering=E,e.EditingState=M,e.PagingState=A,e.IntegratedPaging=D,e.CustomPaging=z,e.GroupingState=N,e.IntegratedGrouping=U,e.CustomGrouping=Y,e.SelectionState=X,e.IntegratedSelection=ne,e.SortingState=re,e.IntegratedSorting=ie,e.DragDropProvider=oe,e.TableColumnReordering=ce,e.Table=ge,e.TableSelection=ye,e.RowDetailState=be,e.TableRowDetail=we,e.TableGroupRow=Ee,e.TableHeaderRow=Ae,e.TableBandHeader=Oe,e.TableFilterRow=Le,e.TableEditRow=Ie,e.TableEditColumn=Ne,e.TableColumnResizing=Be,e.PagingPanel=Ge,e.GroupingPanel=Xe,e.DataTypeProvider=Ze,e.TableColumnVisibility=Qe,e.Toolbar=et,e.TreeDataState=tt,e.CustomTreeData=ct,e.TableTreeColumn=ft,e.SearchState=dt,e.SearchPanel=mt,e.TableFixedColumns=bt,e.SummaryState=xt,e.IntegratedSummary=wt,e.CustomSummary=kt,e.TableSummaryRow=Ot,e.TableLayout=Pt,e.VirtualTableLayout=Lt,e.StaticTableLayout=zt,e.GroupPanelLayout=We,e.makeVirtualTable=function(e,a){var i=a.VirtualLayout,o=a.FixedHeader,c=a.FixedFooter,m=a.defaultEstimatedRowHeight,v=a.defaultHeight,g=function(n){function a(e){l(this,a);var t=h(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e)),n=e.height,o=e.estimatedRowHeight,s=e.headTableComponent,u=e.footerTableComponent;return t.layoutRenderComponent=r.connectProps(i,function(){return{height:n,estimatedRowHeight:o,headTableComponent:s,footerTableComponent:u}}),t}return d(a,n),u(a,[{key:"componentDidUpdate",value:function(){this.layoutRenderComponent.update()}},{key:"render",value:function(){var n=this.props,r=(n.height,n.estimatedRowHeight,n.headTableComponent,p(n,["height","estimatedRowHeight","headTableComponent"]));return t.createElement(e,f({layoutComponent:this.layoutRenderComponent},r))}}]),a}(t.PureComponent);return"production"!==s.env.NODE_ENV&&(g.propTypes={estimatedRowHeight:n.number,height:n.oneOfType([n.number,n.oneOf(["auto"])]),headTableComponent:n.func,footerTableComponent:n.func}),g.defaultProps={estimatedRowHeight:m,height:v,headTableComponent:o,footerTableComponent:c},Object.values(e.components).forEach(function(t){g[t]=e[t]}),g.FixedHeader=o,g.FixedFooter=c,g},Object.defineProperty(e,"__esModule",{value:!0})}(t,n(0),n(2),n(1),n(3),n(21),n(17))},function(e,t,n){var r=n(343);e.exports=h,e.exports.parse=i,e.exports.compile=function(e,t){return l(i(e,t))},e.exports.tokensToFunction=l,e.exports.tokensToRegExp=p;var a=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function i(e,t){for(var n,r=[],i=0,o=0,s="",l=t&&t.delimiter||"/";null!=(n=a.exec(e));){var f=n[0],d=n[1],p=n.index;if(s+=e.slice(o,p),o=p+f.length,d)s+=d[1];else{var h=e[o],m=n[2],v=n[3],g=n[4],y=n[5],b=n[6],x=n[7];s&&(r.push(s),s="");var _=null!=m&&null!=h&&h!==m,w="+"===b||"*"===b,T="?"===b||"*"===b,k=n[2]||l,C=g||y;r.push({name:v||i++,prefix:m||"",delimiter:k,optional:T,repeat:w,partial:_,asterisk:!!x,pattern:C?c(C):x?".*":"[^"+u(k)+"]+?"})}}return o<e.length&&(s+=e.substr(o)),s&&r.push(s),r}function o(e){return encodeURI(e).replace(/[\/?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function s(e){return encodeURI(e).replace(/[?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function l(e){for(var t=new Array(e.length),n=0;n<e.length;n++)"object"==typeof e[n]&&(t[n]=new RegExp("^(?:"+e[n].pattern+")$"));return function(n,a){for(var i="",l=n||{},u=(a||{}).pretty?o:encodeURIComponent,c=0;c<e.length;c++){var f=e[c];if("string"!=typeof f){var d,p=l[f.name];if(null==p){if(f.optional){f.partial&&(i+=f.prefix);continue}throw new TypeError('Expected "'+f.name+'" to be defined')}if(r(p)){if(!f.repeat)throw new TypeError('Expected "'+f.name+'" to not repeat, but received `'+JSON.stringify(p)+"`");if(0===p.length){if(f.optional)continue;throw new TypeError('Expected "'+f.name+'" to not be empty')}for(var h=0;h<p.length;h++){if(d=u(p[h]),!t[c].test(d))throw new TypeError('Expected all "'+f.name+'" to match "'+f.pattern+'", but received `'+JSON.stringify(d)+"`");i+=(0===h?f.prefix:f.delimiter)+d}}else{if(d=f.asterisk?s(p):u(p),!t[c].test(d))throw new TypeError('Expected "'+f.name+'" to match "'+f.pattern+'", but received "'+d+'"');i+=f.prefix+d}}else i+=f}return i}}function u(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function c(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function f(e,t){return e.keys=t,e}function d(e){return e.sensitive?"":"i"}function p(e,t,n){r(t)||(n=t||n,t=[]);for(var a=(n=n||{}).strict,i=!1!==n.end,o="",s=0;s<e.length;s++){var l=e[s];if("string"==typeof l)o+=u(l);else{var c=u(l.prefix),p="(?:"+l.pattern+")";t.push(l),l.repeat&&(p+="(?:"+c+p+")*"),o+=p=l.optional?l.partial?c+"("+p+")?":"(?:"+c+"("+p+"))?":c+"("+p+")"}}var h=u(n.delimiter||"/"),m=o.slice(-h.length)===h;return a||(o=(m?o.slice(0,-h.length):o)+"(?:"+h+"(?=$))?"),o+=i?"$":a&&m?"":"(?="+h+"|$)",f(new RegExp("^"+o,d(n)),t)}function h(e,t,n){return r(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return f(e,t)}(e,t):r(e)?function(e,t,n){for(var r=[],a=0;a<e.length;a++)r.push(h(e[a],t,n).source);return f(new RegExp("(?:"+r.join("|")+")",d(n)),t)}(e,t,n):function(e,t,n){return p(i(e,n),t,n)}(e,t,n)}},function(e,t,n){e.exports=n(344)},function(e,t,n){"use strict";
/** @license React v16.6.0
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(90),a="function"==typeof Symbol&&Symbol.for,i=a?Symbol.for("react.element"):60103,o=a?Symbol.for("react.portal"):60106,s=a?Symbol.for("react.fragment"):60107,l=a?Symbol.for("react.strict_mode"):60108,u=a?Symbol.for("react.profiler"):60114,c=a?Symbol.for("react.provider"):60109,f=a?Symbol.for("react.context"):60110,d=a?Symbol.for("react.concurrent_mode"):60111,p=a?Symbol.for("react.forward_ref"):60112,h=a?Symbol.for("react.suspense"):60113,m=a?Symbol.for("react.memo"):60115,v=a?Symbol.for("react.lazy"):60116,g="function"==typeof Symbol&&Symbol.iterator;function y(e){for(var t=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);!function(e,t,n,r,a,i,o,s){if(!e){if(e=void 0,void 0===t)e=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,a,i,o,s],u=0;(e=Error(t.replace(/%s/g,function(){return l[u++]}))).name="Invariant Violation"}throw e.framesToPop=1,e}}(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x={};function _(e,t,n){this.props=e,this.context=t,this.refs=x,this.updater=n||b}function w(){}function T(e,t,n){this.props=e,this.context=t,this.refs=x,this.updater=n||b}_.prototype.isReactComponent={},_.prototype.setState=function(e,t){"object"!=typeof e&&"function"!=typeof e&&null!=e&&y("85"),this.updater.enqueueSetState(this,e,t,"setState")},_.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},w.prototype=_.prototype;var k=T.prototype=new w;k.constructor=T,r(k,_.prototype),k.isPureReactComponent=!0;var C={current:null,currentDispatcher:null},E=Object.prototype.hasOwnProperty,M={key:!0,ref:!0,__self:!0,__source:!0};function A(e,t,n){var r=void 0,a={},o=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)E.call(t,r)&&!M.hasOwnProperty(r)&&(a[r]=t[r]);var l=arguments.length-2;if(1===l)a.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];a.children=u}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===a[r]&&(a[r]=l[r]);return{$$typeof:i,type:e,key:o,ref:s,props:a,_owner:C.current}}function S(e){return"object"==typeof e&&null!==e&&e.$$typeof===i}var O=/\/+/g,P=[];function R(e,t,n,r){if(P.length){var a=P.pop();return a.result=e,a.keyPrefix=t,a.func=n,a.context=r,a.count=0,a}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function L(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>P.length&&P.push(e)}function D(e,t,n){return null==e?0:function e(t,n,r,a){var s=typeof t;"undefined"!==s&&"boolean"!==s||(t=null);var l=!1;if(null===t)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case i:case o:l=!0}}if(l)return r(a,t,""===n?"."+I(t,0):n),1;if(l=0,n=""===n?".":n+":",Array.isArray(t))for(var u=0;u<t.length;u++){var c=n+I(s=t[u],u);l+=e(s,c,r,a)}else if(c=null===t||"object"!=typeof t?null:"function"==typeof(c=g&&t[g]||t["@@iterator"])?c:null,"function"==typeof c)for(t=c.call(t),u=0;!(s=t.next()).done;)l+=e(s=s.value,c=n+I(s,u++),r,a);else"object"===s&&y("31","[object Object]"==(r=""+t)?"object with keys {"+Object.keys(t).join(", ")+"}":r,"");return l}(e,"",t,n)}function I(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}(e.key):t.toString(36)}function z(e,t){e.func.call(e.context,t,e.count++)}function j(e,t,n){var r=e.result,a=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?N(e,r,n,function(e){return e}):null!=e&&(S(e)&&(e=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,a+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(O,"$&/")+"/")+n)),r.push(e))}function N(e,t,n,r,a){var i="";null!=n&&(i=(""+n).replace(O,"$&/")+"/"),D(e,j,t=R(t,i,r,a)),L(t)}var F={Children:{map:function(e,t,n){if(null==e)return e;var r=[];return N(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;D(e,z,t=R(null,null,t,n)),L(t)},count:function(e){return D(e,function(){return null},null)},toArray:function(e){var t=[];return N(e,t,null,function(e){return e}),t},only:function(e){return S(e)||y("143"),e}},createRef:function(){return{current:null}},Component:_,PureComponent:T,createContext:function(e,t){return void 0===t&&(t=null),(e={$$typeof:f,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,Provider:null,Consumer:null}).Provider={$$typeof:c,_context:e},e.Consumer=e},forwardRef:function(e){return{$$typeof:p,render:e}},lazy:function(e){return{$$typeof:v,_ctor:e,_status:-1,_result:null}},memo:function(e,t){return{$$typeof:m,type:e,compare:void 0===t?null:t}},Fragment:s,StrictMode:l,unstable_ConcurrentMode:d,Suspense:h,unstable_Profiler:u,createElement:A,cloneElement:function(e,t,n){(null===e||void 0===e)&&y("267",e);var a=void 0,o=r({},e.props),s=e.key,l=e.ref,u=e._owner;if(null!=t){void 0!==t.ref&&(l=t.ref,u=C.current),void 0!==t.key&&(s=""+t.key);var c=void 0;for(a in e.type&&e.type.defaultProps&&(c=e.type.defaultProps),t)E.call(t,a)&&!M.hasOwnProperty(a)&&(o[a]=void 0===t[a]&&void 0!==c?c[a]:t[a])}if(1===(a=arguments.length-2))o.children=n;else if(1<a){c=Array(a);for(var f=0;f<a;f++)c[f]=arguments[f+2];o.children=c}return{$$typeof:i,type:e.type,key:s,ref:l,props:o,_owner:u}},createFactory:function(e){var t=A.bind(null,e);return t.type=e,t},isValidElement:S,version:"16.6.0",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:C,assign:r}},B={default:F},V=B&&F||B;e.exports=V.default||V},function(e,t,n){"use strict";
/** @license React v16.6.0
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(0),a=n(90),i=n(140);function o(e){for(var t=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);!function(e,t,n,r,a,i,o,s){if(!e){if(e=void 0,void 0===t)e=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,a,i,o,s],u=0;(e=Error(t.replace(/%s/g,function(){return l[u++]}))).name="Invariant Violation"}throw e.framesToPop=1,e}}(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}r||o("227");var s=!1,l=null,u=!1,c=null,f={onError:function(e){s=!0,l=e}};function d(e,t,n,r,a,i,o,u,c){s=!1,l=null,function(e,t,n,r,a,i,o,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(e){this.onError(e)}}.apply(f,arguments)}var p=null,h={};function m(){if(p)for(var e in h){var t=h[e],n=p.indexOf(e);if(-1<n||o("96",e),!g[n])for(var r in t.extractEvents||o("97",e),g[n]=t,n=t.eventTypes){var a=void 0,i=n[r],s=t,l=r;y.hasOwnProperty(l)&&o("99",l),y[l]=i;var u=i.phasedRegistrationNames;if(u){for(a in u)u.hasOwnProperty(a)&&v(u[a],s,l);a=!0}else i.registrationName?(v(i.registrationName,s,l),a=!0):a=!1;a||o("98",r,e)}}}function v(e,t,n){b[e]&&o("100",e),b[e]=t,x[e]=t.eventTypes[n].dependencies}var g=[],y={},b={},x={},_=null,w=null,T=null;function k(e,t,n,r){t=e.type||"unknown-event",e.currentTarget=T(r),function(e,t,n,r,a,i,f,p,h){if(d.apply(this,arguments),s){if(s){var m=l;s=!1,l=null}else o("198"),m=void 0;u||(u=!0,c=m)}}(t,n,void 0,e),e.currentTarget=null}function C(e,t){return null==t&&o("30"),null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function E(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var M=null;function A(e,t){if(e){var n=e._dispatchListeners,r=e._dispatchInstances;if(Array.isArray(n))for(var a=0;a<n.length&&!e.isPropagationStopped();a++)k(e,t,n[a],r[a]);else n&&k(e,t,n,r);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function S(e){return A(e,!0)}function O(e){return A(e,!1)}var P={injectEventPluginOrder:function(e){p&&o("101"),p=Array.prototype.slice.call(e),m()},injectEventPluginsByName:function(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];h.hasOwnProperty(t)&&h[t]===r||(h[t]&&o("102",t),h[t]=r,n=!0)}n&&m()}};function R(e,t){var n=e.stateNode;if(!n)return null;var r=_(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}return e?null:(n&&"function"!=typeof n&&o("231",t,typeof n),n)}function L(e,t){if(null!==e&&(M=C(M,e)),e=M,M=null,e&&(E(e,t?S:O),M&&o("95"),u))throw t=c,u=!1,c=null,t}var D=Math.random().toString(36).slice(2),I="__reactInternalInstance$"+D,z="__reactEventHandlers$"+D;function j(e){if(e[I])return e[I];for(;!e[I];){if(!e.parentNode)return null;e=e.parentNode}return 5===(e=e[I]).tag||6===e.tag?e:null}function N(e){return!(e=e[I])||5!==e.tag&&6!==e.tag?null:e}function F(e){if(5===e.tag||6===e.tag)return e.stateNode;o("33")}function B(e){return e[z]||null}function V(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function U(e,t,n){(t=R(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=C(n._dispatchListeners,t),n._dispatchInstances=C(n._dispatchInstances,e))}function G(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=V(t);for(t=n.length;0<t--;)U(n[t],"captured",e);for(t=0;t<n.length;t++)U(n[t],"bubbled",e)}}function H(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=R(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=C(n._dispatchListeners,t),n._dispatchInstances=C(n._dispatchInstances,e))}function W(e){e&&e.dispatchConfig.registrationName&&H(e._targetInst,null,e)}function q(e){E(e,G)}var Y=!("undefined"==typeof window||!window.document||!window.document.createElement);function X(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Z={animationend:X("Animation","AnimationEnd"),animationiteration:X("Animation","AnimationIteration"),animationstart:X("Animation","AnimationStart"),transitionend:X("Transition","TransitionEnd")},$={},K={};function J(e){if($[e])return $[e];if(!Z[e])return e;var t,n=Z[e];for(t in n)if(n.hasOwnProperty(t)&&t in K)return $[e]=n[t];return e}Y&&(K=document.createElement("div").style,"AnimationEvent"in window||(delete Z.animationend.animation,delete Z.animationiteration.animation,delete Z.animationstart.animation),"TransitionEvent"in window||delete Z.transitionend.transition);var Q=J("animationend"),ee=J("animationiteration"),te=J("animationstart"),ne=J("transitionend"),re="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ae=null,ie=null,oe=null;function se(){if(oe)return oe;var e,t,n=ie,r=n.length,a="value"in ae?ae.value:ae.textContent,i=a.length;for(e=0;e<r&&n[e]===a[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===a[i-t];t++);return oe=a.slice(e,1<t?1-t:void 0)}function le(){return!0}function ue(){return!1}function ce(e,t,n,r){for(var a in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(a)&&((t=e[a])?this[a]=t(n):"target"===a?this.target=r:this[a]=n[a]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?le:ue,this.isPropagationStopped=ue,this}function fe(e,t,n,r){if(this.eventPool.length){var a=this.eventPool.pop();return this.call(a,e,t,n,r),a}return new this(e,t,n,r)}function de(e){e instanceof this||o("279"),e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function pe(e){e.eventPool=[],e.getPooled=fe,e.release=de}a(ce.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=le)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=le)},persist:function(){this.isPersistent=le},isPersistent:ue,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=ue,this._dispatchInstances=this._dispatchListeners=null}}),ce.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},ce.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var i=new t;return a(i,n.prototype),n.prototype=i,n.prototype.constructor=n,n.Interface=a({},r.Interface,e),n.extend=r.extend,pe(n),n},pe(ce);var he=ce.extend({data:null}),me=ce.extend({data:null}),ve=[9,13,27,32],ge=Y&&"CompositionEvent"in window,ye=null;Y&&"documentMode"in document&&(ye=document.documentMode);var be=Y&&"TextEvent"in window&&!ye,xe=Y&&(!ge||ye&&8<ye&&11>=ye),_e=String.fromCharCode(32),we={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},Te=!1;function ke(e,t){switch(e){case"keyup":return-1!==ve.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function Ce(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Ee=!1;var Me={eventTypes:we,extractEvents:function(e,t,n,r){var a=void 0,i=void 0;if(ge)e:{switch(e){case"compositionstart":a=we.compositionStart;break e;case"compositionend":a=we.compositionEnd;break e;case"compositionupdate":a=we.compositionUpdate;break e}a=void 0}else Ee?ke(e,n)&&(a=we.compositionEnd):"keydown"===e&&229===n.keyCode&&(a=we.compositionStart);return a?(xe&&"ko"!==n.locale&&(Ee||a!==we.compositionStart?a===we.compositionEnd&&Ee&&(i=se()):(ie="value"in(ae=r)?ae.value:ae.textContent,Ee=!0)),a=he.getPooled(a,t,n,r),i?a.data=i:null!==(i=Ce(n))&&(a.data=i),q(a),i=a):i=null,(e=be?function(e,t){switch(e){case"compositionend":return Ce(t);case"keypress":return 32!==t.which?null:(Te=!0,_e);case"textInput":return(e=t.data)===_e&&Te?null:e;default:return null}}(e,n):function(e,t){if(Ee)return"compositionend"===e||!ge&&ke(e,t)?(e=se(),oe=ie=ae=null,Ee=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return xe&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))?((t=me.getPooled(we.beforeInput,t,n,r)).data=e,q(t)):t=null,null===i?t:null===t?i:[i,t]}},Ae=null,Se=null,Oe=null;function Pe(e){if(e=w(e)){"function"!=typeof Ae&&o("280");var t=_(e.stateNode);Ae(e.stateNode,e.type,t)}}function Re(e){Se?Oe?Oe.push(e):Oe=[e]:Se=e}function Le(){if(Se){var e=Se,t=Oe;if(Oe=Se=null,Pe(e),t)for(e=0;e<t.length;e++)Pe(t[e])}}function De(e,t){return e(t)}function Ie(e,t,n){return e(t,n)}function ze(){}var je=!1;function Ne(e,t){if(je)return e(t);je=!0;try{return De(e,t)}finally{je=!1,(null!==Se||null!==Oe)&&(ze(),Le())}}var Fe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Be(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Fe[e.type]:"textarea"===t}function Ve(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function Ue(e){if(!Y)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"==typeof t[e]),t}function Ge(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function He(e){e._valueTracker||(e._valueTracker=function(e){var t=Ge(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function We(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Ge(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}var qe=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ye=/^(.*)[\\\/]/,Xe="function"==typeof Symbol&&Symbol.for,Ze=Xe?Symbol.for("react.element"):60103,$e=Xe?Symbol.for("react.portal"):60106,Ke=Xe?Symbol.for("react.fragment"):60107,Je=Xe?Symbol.for("react.strict_mode"):60108,Qe=Xe?Symbol.for("react.profiler"):60114,et=Xe?Symbol.for("react.provider"):60109,tt=Xe?Symbol.for("react.context"):60110,nt=Xe?Symbol.for("react.concurrent_mode"):60111,rt=Xe?Symbol.for("react.forward_ref"):60112,at=Xe?Symbol.for("react.suspense"):60113,it=Xe?Symbol.for("react.memo"):60115,ot=Xe?Symbol.for("react.lazy"):60116,st="function"==typeof Symbol&&Symbol.iterator;function lt(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=st&&e[st]||e["@@iterator"])?e:null}function ut(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case nt:return"ConcurrentMode";case Ke:return"Fragment";case $e:return"Portal";case Qe:return"Profiler";case Je:return"StrictMode";case at:return"Suspense"}if("object"==typeof e)switch(e.$$typeof){case tt:return"Context.Consumer";case et:return"Context.Provider";case rt:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case it:return ut(e.type);case ot:if(e=1===e._status?e._result:null)return ut(e)}return null}function ct(e){var t="";do{e:switch(e.tag){case 2:case 16:case 0:case 1:case 5:case 8:var n=e._debugOwner,r=e._debugSource,a=ut(e.type),i=null;n&&(i=ut(n.type)),n=a,a="",r?a=" (at "+r.fileName.replace(Ye,"")+":"+r.lineNumber+")":i&&(a=" (created by "+i+")"),i="\n    in "+(n||"Unknown")+a;break e;default:i=""}t+=i,e=e.return}while(e);return t}var ft=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,dt=Object.prototype.hasOwnProperty,pt={},ht={};function mt(e,t,n,r,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t}var vt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){vt[e]=new mt(e,0,!1,e,null)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];vt[t]=new mt(t,1,!1,e[1],null)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){vt[e]=new mt(e,2,!1,e.toLowerCase(),null)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){vt[e]=new mt(e,2,!1,e,null)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){vt[e]=new mt(e,3,!1,e.toLowerCase(),null)}),["checked","multiple","muted","selected"].forEach(function(e){vt[e]=new mt(e,3,!0,e,null)}),["capture","download"].forEach(function(e){vt[e]=new mt(e,4,!1,e,null)}),["cols","rows","size","span"].forEach(function(e){vt[e]=new mt(e,6,!1,e,null)}),["rowSpan","start"].forEach(function(e){vt[e]=new mt(e,5,!1,e.toLowerCase(),null)});var gt=/[\-:]([a-z])/g;function yt(e){return e[1].toUpperCase()}function bt(e,t,n,r){var a=vt.hasOwnProperty(t)?vt[t]:null;(null!==a?0===a.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||void 0===t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!dt.call(ht,e)||!dt.call(pt,e)&&(ft.test(e)?ht[e]=!0:(pt[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}function xt(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function _t(e,t){var n=t.checked;return a({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function wt(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=xt(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Tt(e,t){null!=(t=t.checked)&&bt(e,"checked",t,!1)}function kt(e,t){Tt(e,t);var n=xt(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?Et(e,t.type,n):t.hasOwnProperty("defaultValue")&&Et(e,t.type,xt(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Ct(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!e.defaultChecked,e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function Et(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(gt,yt);vt[t]=new mt(t,1,!1,e,null)}),"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(gt,yt);vt[t]=new mt(t,1,!1,e,"http://www.w3.org/1999/xlink")}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(gt,yt);vt[t]=new mt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace")}),vt.tabIndex=new mt("tabIndex",1,!1,"tabindex",null);var Mt={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function At(e,t,n){return(e=ce.getPooled(Mt.change,e,t,n)).type="change",Re(n),q(e),e}var St=null,Ot=null;function Pt(e){L(e,!1)}function Rt(e){if(We(F(e)))return e}function Lt(e,t){if("change"===e)return t}var Dt=!1;function It(){St&&(St.detachEvent("onpropertychange",zt),Ot=St=null)}function zt(e){"value"===e.propertyName&&Rt(Ot)&&Ne(Pt,e=At(Ot,e,Ve(e)))}function jt(e,t,n){"focus"===e?(It(),Ot=n,(St=t).attachEvent("onpropertychange",zt)):"blur"===e&&It()}function Nt(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Rt(Ot)}function Ft(e,t){if("click"===e)return Rt(t)}function Bt(e,t){if("input"===e||"change"===e)return Rt(t)}Y&&(Dt=Ue("input")&&(!document.documentMode||9<document.documentMode));var Vt={eventTypes:Mt,_isInputEventSupported:Dt,extractEvents:function(e,t,n,r){var a=t?F(t):window,i=void 0,o=void 0,s=a.nodeName&&a.nodeName.toLowerCase();if("select"===s||"input"===s&&"file"===a.type?i=Lt:Be(a)?Dt?i=Bt:(i=Nt,o=jt):(s=a.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(i=Ft),i&&(i=i(e,t)))return At(i,n,r);o&&o(e,a,t),"blur"===e&&(e=a._wrapperState)&&e.controlled&&"number"===a.type&&Et(a,"number",a.value)}},Ut=ce.extend({view:null,detail:null}),Gt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ht(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Gt[e])&&!!t[e]}function Wt(){return Ht}var qt=0,Yt=0,Xt=!1,Zt=!1,$t=Ut.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Wt,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=qt;return qt=e.screenX,Xt?"mousemove"===e.type?e.screenX-t:0:(Xt=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Yt;return Yt=e.screenY,Zt?"mousemove"===e.type?e.screenY-t:0:(Zt=!0,0)}}),Kt=$t.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Jt={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Qt={eventTypes:Jt,extractEvents:function(e,t,n,r){var a="mouseover"===e||"pointerover"===e,i="mouseout"===e||"pointerout"===e;if(a&&(n.relatedTarget||n.fromElement)||!i&&!a)return null;if(a=r.window===r?r:(a=r.ownerDocument)?a.defaultView||a.parentWindow:window,i?(i=t,t=(t=n.relatedTarget||n.toElement)?j(t):null):i=null,i===t)return null;var o=void 0,s=void 0,l=void 0,u=void 0;"mouseout"===e||"mouseover"===e?(o=$t,s=Jt.mouseLeave,l=Jt.mouseEnter,u="mouse"):"pointerout"!==e&&"pointerover"!==e||(o=Kt,s=Jt.pointerLeave,l=Jt.pointerEnter,u="pointer");var c=null==i?a:F(i);if(a=null==t?a:F(t),(e=o.getPooled(s,i,n,r)).type=u+"leave",e.target=c,e.relatedTarget=a,(n=o.getPooled(l,t,n,r)).type=u+"enter",n.target=a,n.relatedTarget=c,r=t,i&&r)e:{for(a=r,u=0,o=t=i;o;o=V(o))u++;for(o=0,l=a;l;l=V(l))o++;for(;0<u-o;)t=V(t),u--;for(;0<o-u;)a=V(a),o--;for(;u--;){if(t===a||t===a.alternate)break e;t=V(t),a=V(a)}t=null}else t=null;for(a=t,t=[];i&&i!==a&&(null===(u=i.alternate)||u!==a);)t.push(i),i=V(i);for(i=[];r&&r!==a&&(null===(u=r.alternate)||u!==a);)i.push(r),r=V(r);for(r=0;r<t.length;r++)H(t[r],"bubbled",e);for(r=i.length;0<r--;)H(i[r],"captured",n);return[e,n]}},en=Object.prototype.hasOwnProperty;function tn(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function nn(e,t){if(tn(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!en.call(t,n[r])||!tn(e[n[r]],t[n[r]]))return!1;return!0}function rn(e){var t=e;if(e.alternate)for(;t.return;)t=t.return;else{if(0!=(2&t.effectTag))return 1;for(;t.return;)if(0!=(2&(t=t.return).effectTag))return 1}return 3===t.tag?2:3}function an(e){2!==rn(e)&&o("188")}function on(e){if(!(e=function(e){var t=e.alternate;if(!t)return 3===(t=rn(e))&&o("188"),1===t?null:e;for(var n=e,r=t;;){var a=n.return,i=a?a.alternate:null;if(!a||!i)break;if(a.child===i.child){for(var s=a.child;s;){if(s===n)return an(a),e;if(s===r)return an(a),t;s=s.sibling}o("188")}if(n.return!==r.return)n=a,r=i;else{s=!1;for(var l=a.child;l;){if(l===n){s=!0,n=a,r=i;break}if(l===r){s=!0,r=a,n=i;break}l=l.sibling}if(!s){for(l=i.child;l;){if(l===n){s=!0,n=i,r=a;break}if(l===r){s=!0,r=i,n=a;break}l=l.sibling}s||o("189")}}n.alternate!==r&&o("190")}return 3!==n.tag&&o("188"),n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}var sn=ce.extend({animationName:null,elapsedTime:null,pseudoElement:null}),ln=ce.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),un=Ut.extend({relatedTarget:null});function cn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var fn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pn=Ut.extend({key:function(e){if(e.key){var t=fn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=cn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?dn[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Wt,charCode:function(e){return"keypress"===e.type?cn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?cn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),hn=$t.extend({dataTransfer:null}),mn=Ut.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Wt}),vn=ce.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),gn=$t.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),yn=[["abort","abort"],[Q,"animationEnd"],[ee,"animationIteration"],[te,"animationStart"],["canplay","canPlay"],["canplaythrough","canPlayThrough"],["drag","drag"],["dragenter","dragEnter"],["dragexit","dragExit"],["dragleave","dragLeave"],["dragover","dragOver"],["durationchange","durationChange"],["emptied","emptied"],["encrypted","encrypted"],["ended","ended"],["error","error"],["gotpointercapture","gotPointerCapture"],["load","load"],["loadeddata","loadedData"],["loadedmetadata","loadedMetadata"],["loadstart","loadStart"],["lostpointercapture","lostPointerCapture"],["mousemove","mouseMove"],["mouseout","mouseOut"],["mouseover","mouseOver"],["playing","playing"],["pointermove","pointerMove"],["pointerout","pointerOut"],["pointerover","pointerOver"],["progress","progress"],["scroll","scroll"],["seeking","seeking"],["stalled","stalled"],["suspend","suspend"],["timeupdate","timeUpdate"],["toggle","toggle"],["touchmove","touchMove"],[ne,"transitionEnd"],["waiting","waiting"],["wheel","wheel"]],bn={},xn={};function _n(e,t){var n=e[0],r="on"+((e=e[1])[0].toUpperCase()+e.slice(1));t={phasedRegistrationNames:{bubbled:r,captured:r+"Capture"},dependencies:[n],isInteractive:t},bn[e]=t,xn[n]=t}[["blur","blur"],["cancel","cancel"],["click","click"],["close","close"],["contextmenu","contextMenu"],["copy","copy"],["cut","cut"],["auxclick","auxClick"],["dblclick","doubleClick"],["dragend","dragEnd"],["dragstart","dragStart"],["drop","drop"],["focus","focus"],["input","input"],["invalid","invalid"],["keydown","keyDown"],["keypress","keyPress"],["keyup","keyUp"],["mousedown","mouseDown"],["mouseup","mouseUp"],["paste","paste"],["pause","pause"],["play","play"],["pointercancel","pointerCancel"],["pointerdown","pointerDown"],["pointerup","pointerUp"],["ratechange","rateChange"],["reset","reset"],["seeked","seeked"],["submit","submit"],["touchcancel","touchCancel"],["touchend","touchEnd"],["touchstart","touchStart"],["volumechange","volumeChange"]].forEach(function(e){_n(e,!0)}),yn.forEach(function(e){_n(e,!1)});var wn={eventTypes:bn,isInteractiveTopLevelEventType:function(e){return void 0!==(e=xn[e])&&!0===e.isInteractive},extractEvents:function(e,t,n,r){var a=xn[e];if(!a)return null;switch(e){case"keypress":if(0===cn(n))return null;case"keydown":case"keyup":e=pn;break;case"blur":case"focus":e=un;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=$t;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=hn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=mn;break;case Q:case ee:case te:e=sn;break;case ne:e=vn;break;case"scroll":e=Ut;break;case"wheel":e=gn;break;case"copy":case"cut":case"paste":e=ln;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=Kt;break;default:e=ce}return q(t=e.getPooled(a,t,n,r)),t}},Tn=wn.isInteractiveTopLevelEventType,kn=[];function Cn(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r;for(r=n;r.return;)r=r.return;if(!(r=3!==r.tag?null:r.stateNode.containerInfo))break;e.ancestors.push(n),n=j(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var a=Ve(e.nativeEvent);r=e.topLevelType;for(var i=e.nativeEvent,o=null,s=0;s<g.length;s++){var l=g[s];l&&(l=l.extractEvents(r,t,i,a))&&(o=C(o,l))}L(o,!1)}}var En=!0;function Mn(e,t){if(!t)return null;var n=(Tn(e)?Sn:On).bind(null,e);t.addEventListener(e,n,!1)}function An(e,t){if(!t)return null;var n=(Tn(e)?Sn:On).bind(null,e);t.addEventListener(e,n,!0)}function Sn(e,t){Ie(On,e,t)}function On(e,t){if(En){var n=Ve(t);if(null===(n=j(n))||"number"!=typeof n.tag||2===rn(n)||(n=null),kn.length){var r=kn.pop();r.topLevelType=e,r.nativeEvent=t,r.targetInst=n,e=r}else e={topLevelType:e,nativeEvent:t,targetInst:n,ancestors:[]};try{Ne(Cn,e)}finally{e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>kn.length&&kn.push(e)}}}var Pn={},Rn=0,Ln="_reactListenersID"+(""+Math.random()).slice(2);function Dn(e){return Object.prototype.hasOwnProperty.call(e,Ln)||(e[Ln]=Rn++,Pn[e[Ln]]={}),Pn[e[Ln]]}function In(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function zn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function jn(e,t){var n,r=zn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=zn(r)}}function Nn(){for(var e=window,t=In();t instanceof e.HTMLIFrameElement;){try{e=t.contentDocument.defaultView}catch(e){break}t=In(e.document)}return t}function Fn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var Bn=Y&&"documentMode"in document&&11>=document.documentMode,Vn={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Un=null,Gn=null,Hn=null,Wn=!1;function qn(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return Wn||null==Un||Un!==In(n)?null:("selectionStart"in(n=Un)&&Fn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Hn&&nn(Hn,n)?null:(Hn=n,(e=ce.getPooled(Vn.select,Gn,e,t)).type="select",e.target=Un,q(e),e))}var Yn={eventTypes:Vn,extractEvents:function(e,t,n,r){var a,i=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;if(!(a=!i)){e:{i=Dn(i),a=x.onSelect;for(var o=0;o<a.length;o++){var s=a[o];if(!i.hasOwnProperty(s)||!i[s]){i=!1;break e}}i=!0}a=!i}if(a)return null;switch(i=t?F(t):window,e){case"focus":(Be(i)||"true"===i.contentEditable)&&(Un=i,Gn=t,Hn=null);break;case"blur":Hn=Gn=Un=null;break;case"mousedown":Wn=!0;break;case"contextmenu":case"mouseup":case"dragend":return Wn=!1,qn(n,r);case"selectionchange":if(Bn)break;case"keydown":case"keyup":return qn(n,r)}return null}};function Xn(e,t){return e=a({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,function(e){null!=e&&(t+=e)}),t}(t.children))&&(e.children=t),e}function Zn(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+xt(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function $n(e,t){return null!=t.dangerouslySetInnerHTML&&o("91"),a({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Kn(e,t){var n=t.value;null==n&&(n=t.defaultValue,null!=(t=t.children)&&(null!=n&&o("92"),Array.isArray(t)&&(1>=t.length||o("93"),t=t[0]),n=t),null==n&&(n="")),e._wrapperState={initialValue:xt(n)}}function Jn(e,t){var n=xt(t.value),r=xt(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function Qn(e){var t=e.textContent;t===e._wrapperState.initialValue&&(e.value=t)}P.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),_=B,w=N,T=F,P.injectEventPluginsByName({SimpleEventPlugin:wn,EnterLeaveEventPlugin:Qt,ChangeEventPlugin:Vt,SelectEventPlugin:Yn,BeforeInputEventPlugin:Me});var er={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function tr(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function nr(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?tr(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var rr=void 0,ar=function(e){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n)})}:e}(function(e,t){if(e.namespaceURI!==er.svg||"innerHTML"in e)e.innerHTML=t;else{for((rr=rr||document.createElement("div")).innerHTML="<svg>"+t+"</svg>",t=rr.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ir(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var or={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sr=["Webkit","ms","Moz","O"];function lr(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=n,i=t[n];a=null==i||"boolean"==typeof i||""===i?"":r||"number"!=typeof i||0===i||or.hasOwnProperty(a)&&or[a]?(""+i).trim():i+"px","float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(or).forEach(function(e){sr.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),or[t]=or[e]})});var ur=a({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function cr(e,t){t&&(ur[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML)&&o("137",e,""),null!=t.dangerouslySetInnerHTML&&(null!=t.children&&o("60"),"object"==typeof t.dangerouslySetInnerHTML&&"__html"in t.dangerouslySetInnerHTML||o("61")),null!=t.style&&"object"!=typeof t.style&&o("62",""))}function fr(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function dr(e,t){var n=Dn(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=x[t];for(var r=0;r<t.length;r++){var a=t[r];if(!n.hasOwnProperty(a)||!n[a]){switch(a){case"scroll":An("scroll",e);break;case"focus":case"blur":An("focus",e),An("blur",e),n.blur=!0,n.focus=!0;break;case"cancel":case"close":Ue(a)&&An(a,e);break;case"invalid":case"submit":case"reset":break;default:-1===re.indexOf(a)&&Mn(a,e)}n[a]=!0}}}function pr(){}var hr=null,mr=null;function vr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function gr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var yr=setTimeout,br=clearTimeout;function xr(e){for(e=e.nextSibling;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e}function _r(e){for(e=e.firstChild;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e}new Set;var wr=[],Tr=-1;function kr(e){0>Tr||(e.current=wr[Tr],wr[Tr]=null,Tr--)}function Cr(e,t){wr[++Tr]=e.current,e.current=t}var Er={},Mr={current:Er},Ar={current:!1},Sr=Er;function Or(e,t){var n=e.type.contextTypes;if(!n)return Er;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,i={};for(a in n)i[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Pr(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Rr(e){kr(Ar),kr(Mr)}function Lr(e){kr(Ar),kr(Mr)}function Dr(e,t,n){Mr.current!==Er&&o("168"),Cr(Mr,t),Cr(Ar,n)}function Ir(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())i in e||o("108",ut(t)||"Unknown",i);return a({},n,r)}function zr(e){var t=e.stateNode;return t=t&&t.__reactInternalMemoizedMergedChildContext||Er,Sr=Mr.current,Cr(Mr,t),Cr(Ar,Ar.current),!0}function jr(e,t,n){var r=e.stateNode;r||o("169"),n?(t=Ir(e,t,Sr),r.__reactInternalMemoizedMergedChildContext=t,kr(Ar),kr(Mr),Cr(Mr,t)):kr(Ar),Cr(Ar,n)}var Nr=null,Fr=null;function Br(e){return function(t){try{return e(t)}catch(e){}}}function Vr(e,t,n,r){return new function(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.firstContextDependency=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}(e,t,n,r)}function Ur(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Gr(e,t){var n=e.alternate;return null===n?((n=Vr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,n.firstContextDependency=e.firstContextDependency,n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Hr(e,t,n,r,a,i){var s=2;if(r=e,"function"==typeof e)Ur(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case Ke:return Wr(n.children,a,i,t);case nt:return qr(n,3|a,i,t);case Je:return qr(n,2|a,i,t);case Qe:return(e=Vr(12,n,t,4|a)).elementType=Qe,e.type=Qe,e.expirationTime=i,e;case at:return(e=Vr(13,n,t,a)).elementType=at,e.type=at,e.expirationTime=i,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case et:s=10;break e;case tt:s=9;break e;case rt:s=11;break e;case it:s=14;break e;case ot:s=16,r=null;break e}o("130",null==e?e:typeof e,"")}return(t=Vr(s,n,t,a)).elementType=e,t.type=r,t.expirationTime=i,t}function Wr(e,t,n,r){return(e=Vr(7,e,r,t)).expirationTime=n,e}function qr(e,t,n,r){return e=Vr(8,e,r,t),t=0==(1&t)?Je:nt,e.elementType=t,e.type=t,e.expirationTime=n,e}function Yr(e,t,n){return(e=Vr(6,e,null,t)).expirationTime=n,e}function Xr(e,t,n){return(t=Vr(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Zr(e,t){e.didError=!1;var n=e.earliestPendingTime;0===n?e.earliestPendingTime=e.latestPendingTime=t:n>t?e.earliestPendingTime=t:e.latestPendingTime<t&&(e.latestPendingTime=t),Jr(t,e)}function $r(e,t){e.didError=!1;var n=e.latestPingedTime;0!==n&&n<=t&&(e.latestPingedTime=0),n=e.earliestPendingTime;var r=e.latestPendingTime;n===t?e.earliestPendingTime=r===t?e.latestPendingTime=0:r:r===t&&(e.latestPendingTime=n),n=e.earliestSuspendedTime,r=e.latestSuspendedTime,0===n?e.earliestSuspendedTime=e.latestSuspendedTime=t:n>t?e.earliestSuspendedTime=t:r<t&&(e.latestSuspendedTime=t),Jr(t,e)}function Kr(e,t){var n=e.earliestPendingTime;return e=e.earliestSuspendedTime,(0===t||0!==n&&n<t)&&(t=n),(0===t||0!==e&&e<t)&&(t=e),t}function Jr(e,t){var n=t.earliestSuspendedTime,r=t.latestSuspendedTime,a=t.earliestPendingTime,i=t.latestPingedTime;0===(a=0!==a?a:i)&&(0===e||r>e)&&(a=r),0!==(e=a)&&0!==n&&n<e&&(e=n),t.nextExpirationTimeToWorkOn=a,t.expirationTime=e}var Qr=!1;function ea(e){return{baseState:e,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function ta(e){return{baseState:e.baseState,firstUpdate:e.firstUpdate,lastUpdate:e.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function na(e){return{expirationTime:e,tag:0,payload:null,callback:null,next:null,nextEffect:null}}function ra(e,t){null===e.lastUpdate?e.firstUpdate=e.lastUpdate=t:(e.lastUpdate.next=t,e.lastUpdate=t)}function aa(e,t){var n=e.alternate;if(null===n){var r=e.updateQueue,a=null;null===r&&(r=e.updateQueue=ea(e.memoizedState))}else r=e.updateQueue,a=n.updateQueue,null===r?null===a?(r=e.updateQueue=ea(e.memoizedState),a=n.updateQueue=ea(n.memoizedState)):r=e.updateQueue=ta(a):null===a&&(a=n.updateQueue=ta(r));null===a||r===a?ra(r,t):null===r.lastUpdate||null===a.lastUpdate?(ra(r,t),ra(a,t)):(ra(r,t),a.lastUpdate=t)}function ia(e,t){var n=e.updateQueue;null===(n=null===n?e.updateQueue=ea(e.memoizedState):oa(e,n)).lastCapturedUpdate?n.firstCapturedUpdate=n.lastCapturedUpdate=t:(n.lastCapturedUpdate.next=t,n.lastCapturedUpdate=t)}function oa(e,t){var n=e.alternate;return null!==n&&t===n.updateQueue&&(t=e.updateQueue=ta(t)),t}function sa(e,t,n,r,i,o){switch(n.tag){case 1:return"function"==typeof(e=n.payload)?e.call(o,r,i):e;case 3:e.effectTag=-1025&e.effectTag|64;case 0:if(null===(i="function"==typeof(e=n.payload)?e.call(o,r,i):e)||void 0===i)break;return a({},r,i);case 2:Qr=!0}return r}function la(e,t,n,r,a){Qr=!1;for(var i=(t=oa(e,t)).baseState,o=null,s=0,l=t.firstUpdate,u=i;null!==l;){var c=l.expirationTime;c>a?(null===o&&(o=l,i=u),(0===s||s>c)&&(s=c)):(u=sa(e,0,l,u,n,r),null!==l.callback&&(e.effectTag|=32,l.nextEffect=null,null===t.lastEffect?t.firstEffect=t.lastEffect=l:(t.lastEffect.nextEffect=l,t.lastEffect=l))),l=l.next}for(c=null,l=t.firstCapturedUpdate;null!==l;){var f=l.expirationTime;f>a?(null===c&&(c=l,null===o&&(i=u)),(0===s||s>f)&&(s=f)):(u=sa(e,0,l,u,n,r),null!==l.callback&&(e.effectTag|=32,l.nextEffect=null,null===t.lastCapturedEffect?t.firstCapturedEffect=t.lastCapturedEffect=l:(t.lastCapturedEffect.nextEffect=l,t.lastCapturedEffect=l))),l=l.next}null===o&&(t.lastUpdate=null),null===c?t.lastCapturedUpdate=null:e.effectTag|=32,null===o&&null===c&&(i=u),t.baseState=i,t.firstUpdate=o,t.firstCapturedUpdate=c,e.expirationTime=s,e.memoizedState=u}function ua(e,t,n){null!==t.firstCapturedUpdate&&(null!==t.lastUpdate&&(t.lastUpdate.next=t.firstCapturedUpdate,t.lastUpdate=t.lastCapturedUpdate),t.firstCapturedUpdate=t.lastCapturedUpdate=null),ca(t.firstEffect,n),t.firstEffect=t.lastEffect=null,ca(t.firstCapturedEffect,n),t.firstCapturedEffect=t.lastCapturedEffect=null}function ca(e,t){for(;null!==e;){var n=e.callback;if(null!==n){e.callback=null;var r=t;"function"!=typeof n&&o("191",n),n.call(r)}e=e.nextEffect}}function fa(e,t){return{value:e,source:t,stack:ct(t)}}var da={current:null},pa=null,ha=null,ma=null;function va(e,t){var n=e.type._context;Cr(da,n._currentValue),n._currentValue=t}function ga(e){var t=da.current;kr(da),e.type._context._currentValue=t}function ya(e){pa=e,ma=ha=null,e.firstContextDependency=null}function ba(e,t){return ma!==e&&!1!==t&&0!==t&&("number"==typeof t&&1073741823!==t||(ma=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ha?(null===pa&&o("293"),pa.firstContextDependency=ha=t):ha=ha.next=t),e._currentValue}var xa={},_a={current:xa},wa={current:xa},Ta={current:xa};function ka(e){return e===xa&&o("174"),e}function Ca(e,t){Cr(Ta,t),Cr(wa,e),Cr(_a,xa);var n=t.nodeType;switch(n){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:nr(null,"");break;default:t=nr(t=(n=8===n?t.parentNode:t).namespaceURI||null,n=n.tagName)}kr(_a),Cr(_a,t)}function Ea(e){kr(_a),kr(wa),kr(Ta)}function Ma(e){ka(Ta.current);var t=ka(_a.current),n=nr(t,e.type);t!==n&&(Cr(wa,e),Cr(_a,n))}function Aa(e){wa.current===e&&(kr(_a),kr(wa))}var Sa=qe.ReactCurrentOwner,Oa=(new r.Component).refs;function Pa(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:a({},t,n),e.memoizedState=n,null!==(r=e.updateQueue)&&0===e.expirationTime&&(r.baseState=n)}var Ra={isMounted:function(e){return!!(e=e._reactInternalFiber)&&2===rn(e)},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=To(),a=na(r=Wi(r,e));a.payload=t,void 0!==n&&null!==n&&(a.callback=n),aa(e,a),Xi(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=To(),a=na(r=Wi(r,e));a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),aa(e,a),Xi(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=To(),r=na(n=Wi(n,e));r.tag=2,void 0!==t&&null!==t&&(r.callback=t),aa(e,r),Xi(e,n)}};function La(e,t,n,r,a,i,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,o):!t.prototype||!t.prototype.isPureReactComponent||(!nn(n,r)||!nn(a,i))}function Da(e,t,n){var r=!1,a=Er,i=t.contextType;return"object"==typeof i&&null!==i?i=Sa.currentDispatcher.readContext(i):(a=Pr(t)?Sr:Mr.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?Or(e,a):Er),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Ra,e.stateNode=t,t._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function Ia(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ra.enqueueReplaceState(t,t.state,null)}function za(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs=Oa;var i=t.contextType;"object"==typeof i&&null!==i?a.context=Sa.currentDispatcher.readContext(i):(i=Pr(t)?Sr:Mr.current,a.context=Or(e,i)),null!==(i=e.updateQueue)&&(la(e,i,n,a,r),a.state=e.memoizedState),"function"==typeof(i=t.getDerivedStateFromProps)&&(Pa(e,t,i,n),a.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof a.getSnapshotBeforeUpdate||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||(t=a.state,"function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&Ra.enqueueReplaceState(a,a.state,null),null!==(i=e.updateQueue)&&(la(e,i,n,a,r),a.state=e.memoizedState)),"function"==typeof a.componentDidMount&&(e.effectTag|=4)}var ja=Array.isArray;function Na(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){var r=void 0;(n=n._owner)&&(1!==n.tag&&o("289"),r=n.stateNode),r||o("147",e);var a=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===a?t.ref:((t=function(e){var t=r.refs;t===Oa&&(t=r.refs={}),null===e?delete t[a]:t[a]=e})._stringRef=a,t)}"string"!=typeof e&&o("284"),n._owner||o("290",e)}return e}function Fa(e,t){"textarea"!==e.type&&o("31","[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,"")}function Ba(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t,n){return(e=Gr(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.effectTag=2,n):r:(t.effectTag=2,n):n}function s(t){return e&&null===t.alternate&&(t.effectTag=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Yr(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function u(e,t,n,r){return null!==t&&t.elementType===n.type?((r=a(t,n.props)).ref=Na(e,t,n),r.return=e,r):((r=Hr(n.type,n.key,n.props,null,e.mode,r)).ref=Na(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Xr(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function f(e,t,n,r,i){return null===t||7!==t.tag?((t=Wr(n,e.mode,r,i)).return=e,t):((t=a(t,n)).return=e,t)}function d(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=Yr(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case Ze:return(n=Hr(t.type,t.key,t.props,null,e.mode,n)).ref=Na(e,null,t),n.return=e,n;case $e:return(t=Xr(t,e.mode,n)).return=e,t}if(ja(t)||lt(t))return(t=Wr(t,e.mode,n,null)).return=e,t;Fa(e,t)}return null}function p(e,t,n,r){var a=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==a?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case Ze:return n.key===a?n.type===Ke?f(e,t,n.props.children,r,a):u(e,t,n,r):null;case $e:return n.key===a?c(e,t,n,r):null}if(ja(n)||lt(n))return null!==a?null:f(e,t,n,r,null);Fa(e,n)}return null}function h(e,t,n,r,a){if("string"==typeof r||"number"==typeof r)return l(t,e=e.get(n)||null,""+r,a);if("object"==typeof r&&null!==r){switch(r.$$typeof){case Ze:return e=e.get(null===r.key?n:r.key)||null,r.type===Ke?f(t,e,r.props.children,a,r.key):u(t,e,r,a);case $e:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a)}if(ja(r)||lt(r))return f(t,e=e.get(n)||null,r,a,null);Fa(t,r)}return null}function m(a,o,s,l){for(var u=null,c=null,f=o,m=o=0,v=null;null!==f&&m<s.length;m++){f.index>m?(v=f,f=null):v=f.sibling;var g=p(a,f,s[m],l);if(null===g){null===f&&(f=v);break}e&&f&&null===g.alternate&&t(a,f),o=i(g,o,m),null===c?u=g:c.sibling=g,c=g,f=v}if(m===s.length)return n(a,f),u;if(null===f){for(;m<s.length;m++)(f=d(a,s[m],l))&&(o=i(f,o,m),null===c?u=f:c.sibling=f,c=f);return u}for(f=r(a,f);m<s.length;m++)(v=h(f,a,m,s[m],l))&&(e&&null!==v.alternate&&f.delete(null===v.key?m:v.key),o=i(v,o,m),null===c?u=v:c.sibling=v,c=v);return e&&f.forEach(function(e){return t(a,e)}),u}function v(a,s,l,u){var c=lt(l);"function"!=typeof c&&o("150"),null==(l=c.call(l))&&o("151");for(var f=c=null,m=s,v=s=0,g=null,y=l.next();null!==m&&!y.done;v++,y=l.next()){m.index>v?(g=m,m=null):g=m.sibling;var b=p(a,m,y.value,u);if(null===b){m||(m=g);break}e&&m&&null===b.alternate&&t(a,m),s=i(b,s,v),null===f?c=b:f.sibling=b,f=b,m=g}if(y.done)return n(a,m),c;if(null===m){for(;!y.done;v++,y=l.next())null!==(y=d(a,y.value,u))&&(s=i(y,s,v),null===f?c=y:f.sibling=y,f=y);return c}for(m=r(a,m);!y.done;v++,y=l.next())null!==(y=h(m,a,v,y.value,u))&&(e&&null!==y.alternate&&m.delete(null===y.key?v:y.key),s=i(y,s,v),null===f?c=y:f.sibling=y,f=y);return e&&m.forEach(function(e){return t(a,e)}),c}return function(e,r,i,l){var u="object"==typeof i&&null!==i&&i.type===Ke&&null===i.key;u&&(i=i.props.children);var c="object"==typeof i&&null!==i;if(c)switch(i.$$typeof){case Ze:e:{for(c=i.key,u=r;null!==u;){if(u.key===c){if(7===u.tag?i.type===Ke:u.elementType===i.type){n(e,u.sibling),(r=a(u,i.type===Ke?i.props.children:i.props)).ref=Na(e,u,i),r.return=e,e=r;break e}n(e,u);break}t(e,u),u=u.sibling}i.type===Ke?((r=Wr(i.props.children,e.mode,l,i.key)).return=e,e=r):((l=Hr(i.type,i.key,i.props,null,e.mode,l)).ref=Na(e,r,i),l.return=e,e=l)}return s(e);case $e:e:{for(u=i.key;null!==r;){if(r.key===u){if(4===r.tag&&r.stateNode.containerInfo===i.containerInfo&&r.stateNode.implementation===i.implementation){n(e,r.sibling),(r=a(r,i.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Xr(i,e.mode,l)).return=e,e=r}return s(e)}if("string"==typeof i||"number"==typeof i)return i=""+i,null!==r&&6===r.tag?(n(e,r.sibling),(r=a(r,i)).return=e,e=r):(n(e,r),(r=Yr(i,e.mode,l)).return=e,e=r),s(e);if(ja(i))return m(e,r,i,l);if(lt(i))return v(e,r,i,l);if(c&&Fa(e,i),void 0===i&&!u)switch(e.tag){case 1:case 0:o("152",(l=e.type).displayName||l.name||"Component")}return n(e,r)}}var Va=Ba(!0),Ua=Ba(!1),Ga=null,Ha=null,Wa=!1;function qa(e,t){var n=Vr(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Ya(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Xa(e){if(Wa){var t=Ha;if(t){var n=t;if(!Ya(e,t)){if(!(t=xr(n))||!Ya(e,t))return e.effectTag|=2,Wa=!1,void(Ga=e);qa(Ga,n)}Ga=e,Ha=_r(t)}else e.effectTag|=2,Wa=!1,Ga=e}}function Za(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag;)e=e.return;Ga=e}function $a(e){if(e!==Ga)return!1;if(!Wa)return Za(e),Wa=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!gr(t,e.memoizedProps))for(t=Ha;t;)qa(e,t),t=xr(t);return Za(e),Ha=Ga?xr(e.stateNode):null,!0}function Ka(){Ha=Ga=null,Wa=!1}var Ja=qe.ReactCurrentOwner;function Qa(e,t,n,r){t.child=null===e?Ua(t,null,n,r):Va(t,e.child,n,r)}function ei(e,t,n,r,a){n=n.render;var i=t.ref;return Ar.current||t.memoizedProps!==r||i!==(null!==e?e.ref:null)?(Qa(e,t,r=n(r,i),a),t.child):ci(e,t,a)}function ti(e,t,n,r,a,i){if(null===e){var o=n.type;return"function"!=typeof o||Ur(o)||void 0!==o.defaultProps||null!==n.compare?((e=Hr(n.type,null,r,null,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,ni(e,t,o,r,a,i))}return o=e.child,(0===a||a>i)&&(a=o.memoizedProps,(n=null!==(n=n.compare)?n:nn)(a,r)&&e.ref===t.ref)?ci(e,t,i):((e=Gr(o,r)).ref=t.ref,e.return=t,t.child=e)}function ni(e,t,n,r,a,i){return null!==e&&(0===a||a>i)&&nn(e.memoizedProps,r)&&e.ref===t.ref?ci(e,t,i):ai(e,t,n,r,i)}function ri(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function ai(e,t,n,r,a){var i=Pr(n)?Sr:Mr.current;return i=Or(t,i),ya(t),n=n(r,i),t.effectTag|=1,Qa(e,t,n,a),t.child}function ii(e,t,n,r,a){if(Pr(n)){var i=!0;zr(t)}else i=!1;if(ya(t),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),Da(t,n,r),za(t,n,r,a),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,u=n.contextType;"object"==typeof u&&null!==u?u=Sa.currentDispatcher.readContext(u):u=Or(t,u=Pr(n)?Sr:Mr.current);var c=n.getDerivedStateFromProps,f="function"==typeof c||"function"==typeof o.getSnapshotBeforeUpdate;f||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s!==r||l!==u)&&Ia(t,o,r,u),Qr=!1;var d=t.memoizedState;l=o.state=d;var p=t.updateQueue;null!==p&&(la(t,p,r,o,a),l=t.memoizedState),s!==r||d!==l||Ar.current||Qr?("function"==typeof c&&(Pa(t,n,c,r),l=t.memoizedState),(s=Qr||La(t,n,s,r,d,l,u))?(f||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.effectTag|=4)):("function"==typeof o.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=s):("function"==typeof o.componentDidMount&&(t.effectTag|=4),r=!1)}else o=t.stateNode,s=t.memoizedProps,o.props=s,l=o.context,"object"==typeof(u=n.contextType)&&null!==u?u=Sa.currentDispatcher.readContext(u):u=Or(t,u=Pr(n)?Sr:Mr.current),(f="function"==typeof(c=n.getDerivedStateFromProps)||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s!==r||l!==u)&&Ia(t,o,r,u),Qr=!1,l=t.memoizedState,d=o.state=l,null!==(p=t.updateQueue)&&(la(t,p,r,o,a),d=t.memoizedState),s!==r||l!==d||Ar.current||Qr?("function"==typeof c&&(Pa(t,n,c,r),d=t.memoizedState),(c=Qr||La(t,n,s,r,l,d,u))?(f||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(r,d,u),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,d,u)),"function"==typeof o.componentDidUpdate&&(t.effectTag|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!=typeof o.componentDidUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!=typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=d),o.props=r,o.state=d,o.context=u,r=c):("function"!=typeof o.componentDidUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!=typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),r=!1);return oi(e,t,n,r,i,a)}function oi(e,t,n,r,a,i){ri(e,t);var o=0!=(64&t.effectTag);if(!r&&!o)return a&&jr(t,n,!1),ci(e,t,i);r=t.stateNode,Ja.current=t;var s=o&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&o?(t.child=Va(t,e.child,null,i),t.child=Va(t,null,s,i)):Qa(e,t,s,i),t.memoizedState=r.state,a&&jr(t,n,!0),t.child}function si(e){var t=e.stateNode;t.pendingContext?Dr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Dr(0,t.context,!1),Ca(e,t.containerInfo)}function li(e,t){if(e&&e.defaultProps)for(var n in t=a({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}function ui(e,t,n){var r=t.mode,a=t.pendingProps,i=t.memoizedState;null!==i&&(i.alreadyCaptured?null!==e&&i===e.memoizedState?i={alreadyCaptured:!0,didTimeout:!0,timedOutAt:i.timedOutAt}:(i.alreadyCaptured=!0,i.didTimeout=!0):i=null);var o=null!==i&&i.didTimeout;if(null===e)o?(o=a.fallback,a=Wr(null,r,0,null),r=Wr(o,r,n,null),a.sibling=r,(n=a).return=r.return=t):n=r=Ua(t,null,a.children,n);else{var s=e.memoizedState;null!==s&&s.didTimeout?(e=(r=e.child).sibling,o?(n=a.fallback,(r=Gr(r,r.pendingProps)).effectTag|=2,(a=r.sibling=Gr(e,n,e.expirationTime)).effectTag|=2,n=r,r.childExpirationTime=0,r=a,n.return=r.return=t):(o=e.child,r=Va(t,r.child,a.children,n),Va(t,o,null,n),n=r)):(e=e.child,o?(o=a.fallback,(a=Wr(null,r,0,null)).effectTag|=2,a.child=e,e.return=a,(r=a.sibling=Wr(o,r,n,null)).effectTag|=2,n=a,a.childExpirationTime=0,n.return=r.return=t):r=n=Va(t,e,a.children,n))}return t.memoizedState=i,t.child=n,r}function ci(e,t,n){null!==e&&(t.firstContextDependency=e.firstContextDependency);var r=t.childExpirationTime;if(0===r||r>n)return null;if(null!==e&&t.child!==e.child&&o("153"),null!==t.child){for(n=Gr(e=t.child,e.pendingProps,e.expirationTime),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Gr(e,e.pendingProps,e.expirationTime)).return=t;n.sibling=null}return t.child}function fi(e,t,n){var r=t.expirationTime;if(null!==e&&e.memoizedProps===t.pendingProps&&!Ar.current&&(0===r||r>n)){switch(t.tag){case 3:si(t),Ka();break;case 5:Ma(t);break;case 1:Pr(t.type)&&zr(t);break;case 4:Ca(t,t.stateNode.containerInfo);break;case 10:va(t,t.memoizedProps.value);break;case 13:if(null!==(r=t.memoizedState)&&r.didTimeout)return 0!==(r=t.child.childExpirationTime)&&r<=n?ui(e,t,n):null!==(t=ci(e,t,n))?t.sibling:null}return ci(e,t,n)}switch(t.expirationTime=0,t.tag){case 2:r=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps;var a=Or(t,Mr.current);if(ya(t),a=r(e,a),t.effectTag|=1,"object"==typeof a&&null!==a&&"function"==typeof a.render&&void 0===a.$$typeof){if(t.tag=1,Pr(r)){var i=!0;zr(t)}else i=!1;t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null;var s=r.getDerivedStateFromProps;"function"==typeof s&&Pa(t,r,s,e),a.updater=Ra,t.stateNode=a,a._reactInternalFiber=t,za(t,r,e,n),t=oi(null,t,r,!0,i,n)}else t.tag=0,Qa(null,t,a,n),t=t.child;return t;case 16:switch(a=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),i=t.pendingProps,e=function(e){var t=e._result;switch(e._status){case 1:return t;case 2:case 0:throw t;default:throw e._status=0,(t=(t=e._ctor)()).then(function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)},function(t){0===e._status&&(e._status=2,e._result=t)}),e._result=t,t}}(a),t.type=e,a=t.tag=function(e){if("function"==typeof e)return Ur(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===rt)return 11;if(e===it)return 14}return 2}(e),i=li(e,i),s=void 0,a){case 0:s=ai(null,t,e,i,n);break;case 1:s=ii(null,t,e,i,n);break;case 11:s=ei(null,t,e,i,n);break;case 14:s=ti(null,t,e,li(e.type,i),r,n);break;default:o("283",e)}return s;case 0:return r=t.type,a=t.pendingProps,ai(e,t,r,a=t.elementType===r?a:li(r,a),n);case 1:return r=t.type,a=t.pendingProps,ii(e,t,r,a=t.elementType===r?a:li(r,a),n);case 3:return si(t),null===(r=t.updateQueue)&&o("282"),a=null!==(a=t.memoizedState)?a.element:null,la(t,r,t.pendingProps,null,n),(r=t.memoizedState.element)===a?(Ka(),t=ci(e,t,n)):(a=t.stateNode,(a=(null===e||null===e.child)&&a.hydrate)&&(Ha=_r(t.stateNode.containerInfo),Ga=t,a=Wa=!0),a?(t.effectTag|=2,t.child=Ua(t,null,r,n)):(Qa(e,t,r,n),Ka()),t=t.child),t;case 5:return Ma(t),null===e&&Xa(t),r=t.type,a=t.pendingProps,i=null!==e?e.memoizedProps:null,s=a.children,gr(r,a)?s=null:null!==i&&gr(r,i)&&(t.effectTag|=16),ri(e,t),1073741823!==n&&1&t.mode&&a.hidden?(t.expirationTime=1073741823,t=null):(Qa(e,t,s,n),t=t.child),t;case 6:return null===e&&Xa(t),null;case 13:return ui(e,t,n);case 4:return Ca(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Va(t,null,r,n):Qa(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,ei(e,t,r,a=t.elementType===r?a:li(r,a),n);case 7:return Qa(e,t,t.pendingProps,n),t.child;case 8:case 12:return Qa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,s=t.memoizedProps,va(t,i=a.value),null!==s){var l=s.value;if(0===(i=l===i&&(0!==l||1/l==1/i)||l!=l&&i!=i?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(l,i):1073741823))){if(s.children===a.children&&!Ar.current){t=ci(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){if(null!==(l=s.firstContextDependency))do{if(l.context===r&&0!=(l.observedBits&i)){if(1===s.tag){var u=na(n);u.tag=2,aa(s,u)}(0===s.expirationTime||s.expirationTime>n)&&(s.expirationTime=n),null!==(u=s.alternate)&&(0===u.expirationTime||u.expirationTime>n)&&(u.expirationTime=n);for(var c=s.return;null!==c;){if(u=c.alternate,0===c.childExpirationTime||c.childExpirationTime>n)c.childExpirationTime=n,null!==u&&(0===u.childExpirationTime||u.childExpirationTime>n)&&(u.childExpirationTime=n);else{if(null===u||!(0===u.childExpirationTime||u.childExpirationTime>n))break;u.childExpirationTime=n}c=c.return}}u=s.child,l=l.next}while(null!==l);else u=10===s.tag&&s.type===t.type?null:s.child;if(null!==u)u.return=s;else for(u=s;null!==u;){if(u===t){u=null;break}if(null!==(s=u.sibling)){s.return=u.return,u=s;break}u=u.return}s=u}}Qa(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=(i=t.pendingProps).children,ya(t),r=r(a=ba(a,i.unstable_observedBits)),t.effectTag|=1,Qa(e,t,r,n),t.child;case 14:return ti(e,t,a=t.type,i=li(a.type,t.pendingProps),r,n);case 15:return ni(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:li(r,a),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,Pr(r)?(e=!0,zr(t)):e=!1,ya(t),Da(t,r,a),za(t,r,a,n),oi(null,t,r,!0,e,n);default:o("156")}}function di(e){e.effectTag|=4}var pi=void 0,hi=void 0,mi=void 0,vi=void 0;function gi(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=ct(n)),null!==n&&ut(n.type),t=t.value,null!==e&&1===e.tag&&ut(e.type);try{console.error(t)}catch(e){setTimeout(function(){throw e})}}function yi(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){Hi(e,t)}else t.current=null}function bi(e){switch("function"==typeof Fr&&Fr(e),e.tag){case 1:yi(e);var t=e.stateNode;if("function"==typeof t.componentWillUnmount)try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(t){Hi(e,t)}break;case 5:yi(e);break;case 4:wi(e)}}function xi(e){return 5===e.tag||3===e.tag||4===e.tag}function _i(e){e:{for(var t=e.return;null!==t;){if(xi(t)){var n=t;break e}t=t.return}o("160"),n=void 0}var r=t=void 0;switch(n.tag){case 5:t=n.stateNode,r=!1;break;case 3:case 4:t=n.stateNode.containerInfo,r=!0;break;default:o("161")}16&n.effectTag&&(ir(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||xi(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}for(var a=e;;){if(5===a.tag||6===a.tag)if(n)if(r){var i=t,s=a.stateNode,l=n;8===i.nodeType?i.parentNode.insertBefore(s,l):i.insertBefore(s,l)}else t.insertBefore(a.stateNode,n);else r?(s=t,l=a.stateNode,8===s.nodeType?(i=s.parentNode).insertBefore(l,s):(i=s).appendChild(l),null!==(s=s._reactRootContainer)&&void 0!==s||null!==i.onclick||(i.onclick=pr)):t.appendChild(a.stateNode);else if(4!==a.tag&&null!==a.child){a.child.return=a,a=a.child;continue}if(a===e)break;for(;null===a.sibling;){if(null===a.return||a.return===e)return;a=a.return}a.sibling.return=a.return,a=a.sibling}}function wi(e){for(var t=e,n=!1,r=void 0,a=void 0;;){if(!n){n=t.return;e:for(;;){switch(null===n&&o("160"),n.tag){case 5:r=n.stateNode,a=!1;break e;case 3:case 4:r=n.stateNode.containerInfo,a=!0;break e}n=n.return}n=!0}if(5===t.tag||6===t.tag){e:for(var i=t,s=i;;)if(bi(s),null!==s.child&&4!==s.tag)s.child.return=s,s=s.child;else{if(s===i)break;for(;null===s.sibling;){if(null===s.return||s.return===i)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}a?(i=r,s=t.stateNode,8===i.nodeType?i.parentNode.removeChild(s):i.removeChild(s)):r.removeChild(t.stateNode)}else if(4===t.tag?(r=t.stateNode.containerInfo,a=!0):bi(t),null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return;4===(t=t.return).tag&&(n=!1)}t.sibling.return=t.return,t=t.sibling}}function Ti(e,t){switch(t.tag){case 1:break;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps,a=null!==e?e.memoizedProps:r;e=t.type;var i=t.updateQueue;if(t.updateQueue=null,null!==i){for(n[z]=r,"input"===e&&"radio"===r.type&&null!=r.name&&Tt(n,r),fr(e,a),t=fr(e,r),a=0;a<i.length;a+=2){var s=i[a],l=i[a+1];"style"===s?lr(n,l):"dangerouslySetInnerHTML"===s?ar(n,l):"children"===s?ir(n,l):bt(n,s,l,t)}switch(e){case"input":kt(n,r);break;case"textarea":Jn(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(i=r.value)?Zn(n,!!r.multiple,i,!1):e!==!!r.multiple&&(null!=r.defaultValue?Zn(n,!!r.multiple,r.defaultValue,!0):Zn(n,!!r.multiple,r.multiple?[]:"",!1))}}}break;case 6:null===t.stateNode&&o("162"),t.stateNode.nodeValue=t.memoizedProps;break;case 3:case 12:case 13:case 17:break;default:o("163")}}function ki(e,t,n){(n=na(n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ro(r),gi(e,t)},n}function Ci(e,t,n){(n=na(n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var a=t.value;n.payload=function(){return r(a)}}var i=e.stateNode;return null!==i&&"function"==typeof i.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===Fi?Fi=new Set([this]):Fi.add(this));var n=t.value,a=t.stack;gi(e,t),this.componentDidCatch(n,{componentStack:null!==a?a:""})}),n}function Ei(e){switch(e.tag){case 1:Pr(e.type)&&Rr();var t=e.effectTag;return 1024&t?(e.effectTag=-1025&t|64,e):null;case 3:return Ea(),Lr(),0!=(64&(t=e.effectTag))&&o("285"),e.effectTag=-1025&t|64,e;case 5:return Aa(e),null;case 13:if(1024&(t=e.effectTag)){e.effectTag=-1025&t|64,t=null!==(t=e.alternate)?t.memoizedState:null;var n=e.memoizedState;return null===n?n={alreadyCaptured:!0,didTimeout:!1,timedOutAt:0}:t===n?n={alreadyCaptured:!0,didTimeout:n.didTimeout,timedOutAt:n.timedOutAt}:n.alreadyCaptured=!0,e.memoizedState=n,e}return null;case 4:return Ea(),null;case 10:return ga(e),null;default:return null}}pi=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},hi=function(){},mi=function(e,t,n,r,i){var o=e.memoizedProps;if(o!==r){var s=t.stateNode;switch(ka(_a.current),e=null,n){case"input":o=_t(s,o),r=_t(s,r),e=[];break;case"option":o=Xn(s,o),r=Xn(s,r),e=[];break;case"select":o=a({},o,{value:void 0}),r=a({},r,{value:void 0}),e=[];break;case"textarea":o=$n(s,o),r=$n(s,r),e=[];break;default:"function"!=typeof o.onClick&&"function"==typeof r.onClick&&(s.onclick=pr)}cr(n,r),s=n=void 0;var l=null;for(n in o)if(!r.hasOwnProperty(n)&&o.hasOwnProperty(n)&&null!=o[n])if("style"===n){var u=o[n];for(s in u)u.hasOwnProperty(s)&&(l||(l={}),l[s]="")}else"dangerouslySetInnerHTML"!==n&&"children"!==n&&"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&"autoFocus"!==n&&(b.hasOwnProperty(n)?e||(e=[]):(e=e||[]).push(n,null));for(n in r){var c=r[n];if(u=null!=o?o[n]:void 0,r.hasOwnProperty(n)&&c!==u&&(null!=c||null!=u))if("style"===n)if(u){for(s in u)!u.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(l||(l={}),l[s]="");for(s in c)c.hasOwnProperty(s)&&u[s]!==c[s]&&(l||(l={}),l[s]=c[s])}else l||(e||(e=[]),e.push(n,l)),l=c;else"dangerouslySetInnerHTML"===n?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(e=e||[]).push(n,""+c)):"children"===n?u===c||"string"!=typeof c&&"number"!=typeof c||(e=e||[]).push(n,""+c):"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&(b.hasOwnProperty(n)?(null!=c&&dr(i,n),e||u===c||(e=[])):(e=e||[]).push(n,c))}l&&(e=e||[]).push("style",l),i=e,(t.updateQueue=i)&&di(t)}},vi=function(e,t,n,r){n!==r&&di(t)};var Mi={readContext:ba},Ai=qe.ReactCurrentOwner,Si=0,Oi=0,Pi=!1,Ri=null,Li=null,Di=0,Ii=-1,zi=!1,ji=null,Ni=!1,Fi=null;function Bi(){if(null!==Ri)for(var e=Ri.return;null!==e;){var t=e;switch(t.tag){case 1:var n=t.type.childContextTypes;null!==n&&void 0!==n&&Rr();break;case 3:Ea(),Lr();break;case 5:Aa(t);break;case 4:Ea();break;case 10:ga(t)}e=e.return}Li=null,Di=0,Ii=-1,zi=!1,Ri=null}function Vi(e){for(;;){var t=e.alternate,n=e.return,r=e.sibling;if(0==(512&e.effectTag)){var i=t,s=(t=e).pendingProps;switch(t.tag){case 2:case 16:break;case 15:case 0:break;case 1:Pr(t.type)&&Rr();break;case 3:Ea(),Lr(),(s=t.stateNode).pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),null!==i&&null!==i.child||($a(t),t.effectTag&=-3),hi(t);break;case 5:Aa(t);var l=ka(Ta.current),u=t.type;if(null!==i&&null!=t.stateNode)mi(i,t,u,s,l),i.ref!==t.ref&&(t.effectTag|=128);else if(s){var c=ka(_a.current);if($a(t)){i=(s=t).stateNode;var f=s.type,d=s.memoizedProps,p=l;switch(i[I]=s,i[z]=d,u=void 0,l=f){case"iframe":case"object":Mn("load",i);break;case"video":case"audio":for(f=0;f<re.length;f++)Mn(re[f],i);break;case"source":Mn("error",i);break;case"img":case"image":case"link":Mn("error",i),Mn("load",i);break;case"form":Mn("reset",i),Mn("submit",i);break;case"details":Mn("toggle",i);break;case"input":wt(i,d),Mn("invalid",i),dr(p,"onChange");break;case"select":i._wrapperState={wasMultiple:!!d.multiple},Mn("invalid",i),dr(p,"onChange");break;case"textarea":Kn(i,d),Mn("invalid",i),dr(p,"onChange")}for(u in cr(l,d),f=null,d)d.hasOwnProperty(u)&&(c=d[u],"children"===u?"string"==typeof c?i.textContent!==c&&(f=["children",c]):"number"==typeof c&&i.textContent!==""+c&&(f=["children",""+c]):b.hasOwnProperty(u)&&null!=c&&dr(p,u));switch(l){case"input":He(i),Ct(i,d,!0);break;case"textarea":He(i),Qn(i);break;case"select":case"option":break;default:"function"==typeof d.onClick&&(i.onclick=pr)}u=f,s.updateQueue=u,(s=null!==u)&&di(t)}else{d=t,i=u,p=s,f=9===l.nodeType?l:l.ownerDocument,c===er.html&&(c=tr(i)),c===er.html?"script"===i?((i=f.createElement("div")).innerHTML="<script><\/script>",f=i.removeChild(i.firstChild)):"string"==typeof p.is?f=f.createElement(i,{is:p.is}):(f=f.createElement(i),"select"===i&&p.multiple&&(f.multiple=!0)):f=f.createElementNS(c,i),(i=f)[I]=d,i[z]=s,pi(i,t,!1,!1),p=i;var h=l,m=fr(f=u,d=s);switch(f){case"iframe":case"object":Mn("load",p),l=d;break;case"video":case"audio":for(l=0;l<re.length;l++)Mn(re[l],p);l=d;break;case"source":Mn("error",p),l=d;break;case"img":case"image":case"link":Mn("error",p),Mn("load",p),l=d;break;case"form":Mn("reset",p),Mn("submit",p),l=d;break;case"details":Mn("toggle",p),l=d;break;case"input":wt(p,d),l=_t(p,d),Mn("invalid",p),dr(h,"onChange");break;case"option":l=Xn(p,d);break;case"select":p._wrapperState={wasMultiple:!!d.multiple},l=a({},d,{value:void 0}),Mn("invalid",p),dr(h,"onChange");break;case"textarea":Kn(p,d),l=$n(p,d),Mn("invalid",p),dr(h,"onChange");break;default:l=d}cr(f,l),c=void 0;var v=f,g=p,y=l;for(c in y)if(y.hasOwnProperty(c)){var x=y[c];"style"===c?lr(g,x):"dangerouslySetInnerHTML"===c?null!=(x=x?x.__html:void 0)&&ar(g,x):"children"===c?"string"==typeof x?("textarea"!==v||""!==x)&&ir(g,x):"number"==typeof x&&ir(g,""+x):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(b.hasOwnProperty(c)?null!=x&&dr(h,c):null!=x&&bt(g,c,x,m))}switch(f){case"input":He(p),Ct(p,d,!1);break;case"textarea":He(p),Qn(p);break;case"option":null!=d.value&&p.setAttribute("value",""+xt(d.value));break;case"select":(l=p).multiple=!!d.multiple,null!=(p=d.value)?Zn(l,!!d.multiple,p,!1):null!=d.defaultValue&&Zn(l,!!d.multiple,d.defaultValue,!0);break;default:"function"==typeof l.onClick&&(p.onclick=pr)}(s=vr(u,s))&&di(t),t.stateNode=i}null!==t.ref&&(t.effectTag|=128)}else null===t.stateNode&&o("166");break;case 6:i&&null!=t.stateNode?vi(i,t,i.memoizedProps,s):("string"!=typeof s&&(null===t.stateNode&&o("166")),i=ka(Ta.current),ka(_a.current),$a(t)?(u=(s=t).stateNode,i=s.memoizedProps,u[I]=s,(s=u.nodeValue!==i)&&di(t)):(u=t,(s=(9===i.nodeType?i:i.ownerDocument).createTextNode(s))[I]=t,u.stateNode=s));break;case 11:break;case 13:s=t.memoizedState,u=null!==i?i.memoizedState:null,(null!==s&&s.didTimeout)!==(null!==u&&u.didTimeout)&&(t.effectTag|=4);break;case 7:case 8:case 12:break;case 4:Ea(),hi(t);break;case 10:ga(t);break;case 9:case 14:break;case 17:Pr(t.type)&&Rr();break;default:o("156")}if(Ri=null,t=e,1073741823===Di||1073741823!==t.childExpirationTime){for(s=0,u=t.child;null!==u;)i=u.expirationTime,l=u.childExpirationTime,(0===s||0!==i&&i<s)&&(s=i),(0===s||0!==l&&l<s)&&(s=l),u=u.sibling;t.childExpirationTime=s}null!==n&&0==(512&n.effectTag)&&(null===n.firstEffect&&(n.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==n.lastEffect&&(n.lastEffect.nextEffect=e.firstEffect),n.lastEffect=e.lastEffect),1<e.effectTag&&(null!==n.lastEffect?n.lastEffect.nextEffect=e:n.firstEffect=e,n.lastEffect=e))}else{if(null!==(e=Ei(e)))return e.effectTag&=511,e;null!==n&&(n.firstEffect=n.lastEffect=null,n.effectTag|=512)}if(null!==r)return r;if(null===n)break;e=n}return null}function Ui(e){var t=fi(e.alternate,e,Di);return e.memoizedProps=e.pendingProps,null===t&&(t=Vi(e)),Ai.current=null,t}function Gi(e,t,n){Pi&&o("243"),Pi=!0,Ai.currentDispatcher=Mi;var r=e.nextExpirationTimeToWorkOn;r===Di&&e===Li&&null!==Ri||(Bi(),Di=r,Ri=Gr((Li=e).current,null),e.pendingCommitExpirationTime=0);for(var a=!1;;){try{if(t)for(;null!==Ri&&!Po();)Ri=Ui(Ri);else for(;null!==Ri;)Ri=Ui(Ri)}catch(t){if(null===Ri)a=!0,Ro(t);else{null===Ri&&o("271");var i=Ri,s=i.return;if(null!==s){e:{var l=e,u=s,c=i,f=t;if(s=Di,c.effectTag|=512,c.firstEffect=c.lastEffect=null,null!==f&&"object"==typeof f&&"function"==typeof f.then){var d=f;f=u;var p=-1,h=-1;do{if(13===f.tag){var m=f.alternate;if(null!==m&&(null!==(m=m.memoizedState)&&m.didTimeout)){h=10*(m.timedOutAt-2);break}"number"==typeof(m=f.pendingProps.maxDuration)&&(0>=m?p=0:(-1===p||m<p)&&(p=m))}f=f.return}while(null!==f);f=u;do{if((m=13===f.tag)&&(void 0===f.memoizedProps.fallback?m=!1:m=null===(m=f.memoizedState)||!m.didTimeout),m){if(u=qi.bind(null,l,f,c,0==(1&f.mode)?1:s),d.then(u,u),0==(1&f.mode)){f.effectTag|=32,Qa(c.alternate,c,null,s),c.effectTag&=-513,1===c.tag&&(c.effectTag&=-421,null===c.alternate&&(c.tag=17));break e}-1===p?l=1073741823:(-1===h&&(h=10*(Kr(l,s)-2)-5e3),l=h+p),0<=l&&Ii<l&&(Ii=l),f.effectTag|=1024,f.expirationTime=s;break e}f=f.return}while(null!==f);f=Error("An update was suspended, but no placeholder UI was provided.")}zi=!0,f=fa(f,c),l=u;do{switch(l.tag){case 3:c=f,l.effectTag|=1024,l.expirationTime=s,ia(l,s=ki(l,c,s));break e;case 1:if(c=f,u=l.type,d=l.stateNode,0==(64&l.effectTag)&&("function"==typeof u.getDerivedStateFromError||null!==d&&"function"==typeof d.componentDidCatch&&(null===Fi||!Fi.has(d)))){l.effectTag|=1024,l.expirationTime=s,ia(l,s=Ci(l,c,s));break e}}l=l.return}while(null!==l)}Ri=Vi(i);continue}a=!0,Ro(t)}}break}if(Pi=!1,ma=ha=pa=Ai.currentDispatcher=null,a)Li=null,e.finishedWork=null;else if(null!==Ri)e.finishedWork=null;else{if(null===(t=e.current.alternate)&&o("281"),Li=null,zi){if(a=e.latestPendingTime,i=e.latestSuspendedTime,s=e.latestPingedTime,0!==a&&a>r||0!==i&&i>r||0!==s&&s>r)return $r(e,r),void wo(e,t,r,e.expirationTime,-1);if(!e.didError&&!n)return e.didError=!0,r=e.nextExpirationTimeToWorkOn=r,n=e.expirationTime=1,void wo(e,t,r,n,-1)}n||-1===Ii?(e.pendingCommitExpirationTime=r,e.finishedWork=t):($r(e,r),(n=10*(Kr(e,r)-2))<Ii&&(Ii=n),n=10*(To()-2),n=Ii-n,wo(e,t,r,e.expirationTime,0>n?0:n))}}function Hi(e,t){var n;e:{for(Pi&&!Ni&&o("263"),n=e.return;null!==n;){switch(n.tag){case 1:var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Fi||!Fi.has(r))){aa(n,e=Ci(n,e=fa(t,e),1)),Xi(n,1),n=void 0;break e}break;case 3:aa(n,e=ki(n,e=fa(t,e),1)),Xi(n,1),n=void 0;break e}n=n.return}3===e.tag&&(aa(e,n=ki(e,n=fa(t,e),1)),Xi(e,1)),n=void 0}return n}function Wi(e,t){return 0!==Oi?e=Oi:Pi?e=Ni?1:Di:1&t.mode?(e=co?2+10*(1+((e-2+15)/10|0)):2+25*(1+((e-2+500)/25|0)),null!==Li&&e===Di&&(e+=1)):e=1,co&&e>ro&&(ro=e),e}function qi(e,t,n,r){var a=e.earliestSuspendedTime,i=e.latestSuspendedTime;if(0!==a&&r>=a&&r<=i){i=a=r,e.didError=!1;var o=e.latestPingedTime;(0===o||o<i)&&(e.latestPingedTime=i),Jr(i,e)}else Zr(e,a=Wi(a=To(),t));0!=(1&t.mode)&&e===Li&&Di===r&&(Li=null),Yi(t,a),0==(1&t.mode)&&(Yi(n,a),1===n.tag&&null!==n.stateNode&&((t=na(a)).tag=2,aa(n,t))),0!==(n=e.expirationTime)&&ko(e,n)}function Yi(e,t){(0===e.expirationTime||e.expirationTime>t)&&(e.expirationTime=t);var n=e.alternate;null!==n&&(0===n.expirationTime||n.expirationTime>t)&&(n.expirationTime=t);var r=e.return,a=null;if(null===r&&3===e.tag)a=e.stateNode;else for(;null!==r;){if(n=r.alternate,(0===r.childExpirationTime||r.childExpirationTime>t)&&(r.childExpirationTime=t),null!==n&&(0===n.childExpirationTime||n.childExpirationTime>t)&&(n.childExpirationTime=t),null===r.return&&3===r.tag){a=r.stateNode;break}r=r.return}return null===a?null:a}function Xi(e,t){null!==(e=Yi(e,t))&&(!Pi&&0!==Di&&t<Di&&Bi(),Zr(e,t),Pi&&!Ni&&Li===e||ko(e,e.expirationTime),go>vo&&(go=0,o("185")))}function Zi(e,t,n,r,a){var i=Oi;Oi=1;try{return e(t,n,r,a)}finally{Oi=i}}var $i=null,Ki=null,Ji=0,Qi=void 0,eo=!1,to=null,no=0,ro=0,ao=!1,io=!1,oo=null,so=null,lo=!1,uo=!1,co=!1,fo=null,po=i.unstable_now(),ho=2+(po/10|0),mo=ho,vo=50,go=0,yo=null,bo=1;function xo(){ho=2+((i.unstable_now()-po)/10|0)}function _o(e,t){if(0!==Ji){if(t>Ji)return;null!==Qi&&i.unstable_cancelCallback(Qi)}Ji=t,e=i.unstable_now()-po,Qi=i.unstable_scheduleCallback(Eo,{timeout:10*(t-2)-e})}function wo(e,t,n,r,a){e.expirationTime=r,0!==a||Po()?0<a&&(e.timeoutHandle=yr(function(e,t,n){e.pendingCommitExpirationTime=n,e.finishedWork=t,xo(),mo=ho,Ao(e,n)}.bind(null,e,t,n),a)):(e.pendingCommitExpirationTime=n,e.finishedWork=t)}function To(){return eo?mo:(Co(),0!==no&&1073741823!==no||(xo(),mo=ho),mo)}function ko(e,t){if(null===e.nextScheduledRoot)e.expirationTime=t,null===Ki?($i=Ki=e,e.nextScheduledRoot=e):(Ki=Ki.nextScheduledRoot=e).nextScheduledRoot=$i;else{var n=e.expirationTime;(0===n||t<n)&&(e.expirationTime=t)}eo||(lo?uo&&(to=e,no=1,So(e,1,!0)):1===t?Mo(1,null):_o(e,t))}function Co(){var e=0,t=null;if(null!==Ki)for(var n=Ki,r=$i;null!==r;){var a=r.expirationTime;if(0===a){if((null===n||null===Ki)&&o("244"),r===r.nextScheduledRoot){$i=Ki=r.nextScheduledRoot=null;break}if(r===$i)$i=a=r.nextScheduledRoot,Ki.nextScheduledRoot=a,r.nextScheduledRoot=null;else{if(r===Ki){(Ki=n).nextScheduledRoot=$i,r.nextScheduledRoot=null;break}n.nextScheduledRoot=r.nextScheduledRoot,r.nextScheduledRoot=null}r=n.nextScheduledRoot}else{if((0===e||a<e)&&(e=a,t=r),r===Ki)break;if(1===e)break;n=r,r=r.nextScheduledRoot}}to=t,no=e}function Eo(e){if(e.didTimeout&&null!==$i){xo();var t=$i;do{var n=t.expirationTime;0!==n&&ho>=n&&(t.nextExpirationTimeToWorkOn=ho),t=t.nextScheduledRoot}while(t!==$i)}Mo(0,e)}function Mo(e,t){if(so=t,Co(),null!==so)for(xo(),mo=ho;null!==to&&0!==no&&(0===e||e>=no)&&(!ao||ho>=no);)So(to,no,ho>=no),Co(),xo(),mo=ho;else for(;null!==to&&0!==no&&(0===e||e>=no);)So(to,no,!0),Co();if(null!==so&&(Ji=0,Qi=null),0!==no&&_o(to,no),so=null,ao=!1,go=0,yo=null,null!==fo)for(e=fo,fo=null,t=0;t<e.length;t++){var n=e[t];try{n._onComplete()}catch(e){io||(io=!0,oo=e)}}if(io)throw e=oo,oo=null,io=!1,e}function Ao(e,t){eo&&o("253"),to=e,no=t,So(e,t,!0),Mo(1,null)}function So(e,t,n){if(eo&&o("245"),eo=!0,null===so||n){var r=e.finishedWork;null!==r?Oo(e,r,t):(e.finishedWork=null,-1!==(r=e.timeoutHandle)&&(e.timeoutHandle=-1,br(r)),Gi(e,!1,n),null!==(r=e.finishedWork)&&Oo(e,r,t))}else null!==(r=e.finishedWork)?Oo(e,r,t):(e.finishedWork=null,-1!==(r=e.timeoutHandle)&&(e.timeoutHandle=-1,br(r)),Gi(e,!0,n),null!==(r=e.finishedWork)&&(Po()?e.finishedWork=r:Oo(e,r,t)));eo=!1}function Oo(e,t,n){var r=e.firstBatch;if(null!==r&&r._expirationTime<=n&&(null===fo?fo=[r]:fo.push(r),r._defer))return e.finishedWork=t,void(e.expirationTime=0);e.finishedWork=null,e===yo?go++:(yo=e,go=0),Ni=Pi=!0,e.current===t&&o("177");var a=e.pendingCommitExpirationTime;0===a&&o("261"),e.pendingCommitExpirationTime=0;var i=t.expirationTime,s=t.childExpirationTime,l=0===i||0!==s&&s<i?s:i;if(e.didError=!1,0===l)e.earliestPendingTime=0,e.latestPendingTime=0,e.earliestSuspendedTime=0,e.latestSuspendedTime=0,e.latestPingedTime=0;else{var u=e.latestPendingTime;0!==u&&(u<l?e.earliestPendingTime=e.latestPendingTime=0:e.earliestPendingTime<l&&(e.earliestPendingTime=e.latestPendingTime));var c=e.earliestSuspendedTime;0===c?Zr(e,l):l>e.latestSuspendedTime?(e.earliestSuspendedTime=0,e.latestSuspendedTime=0,e.latestPingedTime=0,Zr(e,l)):l<c&&Zr(e,l)}if(Jr(0,e),Ai.current=null,1<t.effectTag)if(null!==t.lastEffect){t.lastEffect.nextEffect=t;var f=t.firstEffect}else f=t;else f=t.firstEffect;hr=En;var d=Nn();if(Fn(d)){if("selectionStart"in d)var p={start:d.selectionStart,end:d.selectionEnd};else e:{var h=d.ownerDocument,m=h&&h.defaultView||window,v=m.getSelection&&m.getSelection();if(v&&0!==v.rangeCount){var g=v.anchorNode,y=v.anchorOffset,b=v.focusNode,x=v.focusOffset;try{g.nodeType,b.nodeType}catch(e){p=null;break e}var _=0,w=-1,T=-1,k=0,C=0,E=d,M=null;t:for(;;){for(var A;E!==g||0!==y&&3!==E.nodeType||(w=_+y),E!==b||0!==x&&3!==E.nodeType||(T=_+x),3===E.nodeType&&(_+=E.nodeValue.length),null!==(A=E.firstChild);)M=E,E=A;for(;;){if(E===d)break t;if(M===g&&++k===y&&(w=_),M===b&&++C===x&&(T=_),null!==(A=E.nextSibling))break;M=(E=M).parentNode}E=A}p=-1===w||-1===T?null:{start:w,end:T}}else p=null}var S=p||{start:0,end:0}}else S=null;for(mr={focusedElem:d,selectionRange:S},En=!1,ji=f;null!==ji;){var O=!1,P=void 0;try{for(;null!==ji;){if(256&ji.effectTag){var R=ji.alternate;e:{var L=ji;switch(L.tag){case 1:if(256&L.effectTag&&null!==R){var D=R.memoizedProps,I=R.memoizedState,z=L.stateNode;z.props=L.memoizedProps,z.state=L.memoizedState;var j=z.getSnapshotBeforeUpdate(D,I);z.__reactInternalSnapshotBeforeUpdate=j}break e;case 3:case 5:case 6:case 4:case 17:break e;default:o("163")}}}ji=ji.nextEffect}}catch(e){O=!0,P=e}O&&(null===ji&&o("178"),Hi(ji,P),null!==ji&&(ji=ji.nextEffect))}for(ji=f;null!==ji;){var N=!1,F=void 0;try{for(;null!==ji;){var B=ji.effectTag;if(16&B&&ir(ji.stateNode,""),128&B){var V=ji.alternate;if(null!==V){var U=V.ref;null!==U&&("function"==typeof U?U(null):U.current=null)}}switch(14&B){case 2:_i(ji),ji.effectTag&=-3;break;case 6:_i(ji),ji.effectTag&=-3,Ti(ji.alternate,ji);break;case 4:Ti(ji.alternate,ji);break;case 8:var G=ji;wi(G);var H=G;H.return=null,H.child=null,H.alternate&&(H.alternate.child=null,H.alternate.return=null)}ji=ji.nextEffect}}catch(e){N=!0,F=e}N&&(null===ji&&o("178"),Hi(ji,F),null!==ji&&(ji=ji.nextEffect))}var W=mr,q=Nn(),Y=W.focusedElem,X=W.selectionRange;if(q!==Y&&Y&&Y.ownerDocument&&function e(t,n){return!(!t||!n)&&(t===n||(!t||3!==t.nodeType)&&(n&&3===n.nodeType?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}(Y.ownerDocument.documentElement,Y)){if(null!==X&&Fn(Y)){var Z=X.start,$=X.end;if(void 0===$&&($=Z),"selectionStart"in Y)Y.selectionStart=Z,Y.selectionEnd=Math.min($,Y.value.length);else{var K=Y.ownerDocument||document,J=(K&&K.defaultView||window).getSelection(),Q=Y.textContent.length,ee=Math.min(X.start,Q),te=void 0===X.end?ee:Math.min(X.end,Q);if(!J.extend&&ee>te){var ne=te;te=ee,ee=ne}var re=jn(Y,ee),ae=jn(Y,te);if(re&&ae&&(1!==J.rangeCount||J.anchorNode!==re.node||J.anchorOffset!==re.offset||J.focusNode!==ae.node||J.focusOffset!==ae.offset)){var ie=K.createRange();ie.setStart(re.node,re.offset),J.removeAllRanges(),ee>te?(J.addRange(ie),J.extend(ae.node,ae.offset)):(ie.setEnd(ae.node,ae.offset),J.addRange(ie))}}}for(var oe=[],se=Y;se=se.parentNode;)1===se.nodeType&&oe.push({element:se,left:se.scrollLeft,top:se.scrollTop});"function"==typeof Y.focus&&Y.focus();for(var le=0;le<oe.length;le++){var ue=oe[le];ue.element.scrollLeft=ue.left,ue.element.scrollTop=ue.top}}for(mr=null,En=!!hr,hr=null,e.current=t,ji=f;null!==ji;){var ce=!1,fe=void 0;try{for(;null!==ji;){var de=ji.effectTag;if(36&de){var pe=void 0,he=ji.alternate,me=ji;switch(me.tag){case 1:var ve=me.stateNode;if(4&me.effectTag)if(null===he)ve.props=me.memoizedProps,ve.state=me.memoizedState,ve.componentDidMount();else{var ge=he.memoizedProps,ye=he.memoizedState;ve.props=me.memoizedProps,ve.state=me.memoizedState,ve.componentDidUpdate(ge,ye,ve.__reactInternalSnapshotBeforeUpdate)}var be=me.updateQueue;null!==be&&(ve.props=me.memoizedProps,ve.state=me.memoizedState,ua(0,be,ve));break;case 3:var xe=me.updateQueue;if(null!==xe){var _e=null;if(null!==me.child)switch(me.child.tag){case 5:_e=me.child.stateNode;break;case 1:_e=me.child.stateNode}ua(0,xe,_e)}break;case 5:var we=me.stateNode;null===he&&4&me.effectTag&&vr(me.type,me.memoizedProps)&&we.focus();break;case 6:case 4:case 12:break;case 13:if(32&me.effectTag){me.memoizedState={alreadyCaptured:!0,didTimeout:!1,timedOutAt:0},Xi(me,1);break}var Te=null!==he?he.memoizedState:null,ke=me.memoizedState,Ce=null!==Te&&Te.didTimeout,Ee=me;if(null===ke?pe=!1:(pe=ke.didTimeout)&&(Ee=me.child,ke.alreadyCaptured=!1,0===ke.timedOutAt&&(ke.timedOutAt=To())),pe!==Ce&&null!==Ee)e:for(var Me=Ee,Ae=pe,Se=Me;;){if(5===Se.tag){var Oe=Se.stateNode;if(Ae)Oe.style.display="none";else{var Pe=Se.stateNode,Re=Se.memoizedProps.style,Le=void 0!==Re&&null!==Re&&Re.hasOwnProperty("display")?Re.display:null;Pe.style.display=Le}}else if(6===Se.tag)Se.stateNode.nodeValue=Ae?"":Se.memoizedProps;else if(null!==Se.child){Se.child.return=Se,Se=Se.child;continue}if(Se===Me)break e;for(;null===Se.sibling;){if(null===Se.return||Se.return===Me)break e;Se=Se.return}Se.sibling.return=Se.return,Se=Se.sibling}break;case 17:break;default:o("163")}}if(128&de){var De=ji.ref;if(null!==De){var Ie=ji.stateNode;switch(ji.tag){case 5:var ze=Ie;break;default:ze=Ie}"function"==typeof De?De(ze):De.current=ze}}var je=ji.nextEffect;ji.nextEffect=null,ji=je}}catch(e){ce=!0,fe=e}ce&&(null===ji&&o("178"),Hi(ji,fe),null!==ji&&(ji=ji.nextEffect))}Pi=Ni=!1,"function"==typeof Nr&&Nr(t.stateNode);var Ne=t.expirationTime,Fe=t.childExpirationTime,Be=0===Ne||0!==Fe&&Fe<Ne?Fe:Ne;0===Be&&(Fi=null),e.expirationTime=Be,e.finishedWork=null}function Po(){return!!ao||!(null===so||so.timeRemaining()>bo)&&(ao=!0)}function Ro(e){null===to&&o("246"),to.expirationTime=0,io||(io=!0,oo=e)}function Lo(e,t){var n=lo;lo=!0;try{return e(t)}finally{(lo=n)||eo||Mo(1,null)}}function Do(e,t){if(lo&&!uo){uo=!0;try{return e(t)}finally{uo=!1}}return e(t)}function Io(e,t,n){if(co)return e(t,n);lo||eo||0===ro||(Mo(ro,null),ro=0);var r=co,a=lo;lo=co=!0;try{return e(t,n)}finally{co=r,(lo=a)||eo||Mo(1,null)}}function zo(e,t,n,r,a){var i=t.current;e:if(n){n=n._reactInternalFiber;t:{2===rn(n)&&1===n.tag||o("170");var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(Pr(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(null!==s);o("171"),s=void 0}if(1===n.tag){var l=n.type;if(Pr(l)){n=Ir(n,l,s);break e}}n=s}else n=Er;return null===t.context?t.context=n:t.pendingContext=n,t=a,(a=na(r)).payload={element:e},null!==(t=void 0===t?null:t)&&(a.callback=t),aa(i,a),Xi(i,r),r}function jo(e,t,n,r){var a=t.current;return zo(e,t,n,a=Wi(To(),a),r)}function No(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Fo(e){var t=2+25*(1+((To()-2+500)/25|0));t<=Si&&(t=Si+1),this._expirationTime=Si=t,this._root=e,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function Bo(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function Vo(e,t,n){e={current:t=Vr(3,null,null,t?3:0),containerInfo:e,pendingChildren:null,earliestPendingTime:0,latestPendingTime:0,earliestSuspendedTime:0,latestSuspendedTime:0,latestPingedTime:0,didError:!1,pendingCommitExpirationTime:0,finishedWork:null,timeoutHandle:-1,context:null,pendingContext:null,hydrate:n,nextExpirationTimeToWorkOn:0,expirationTime:0,firstBatch:null,nextScheduledRoot:null},this._internalRoot=t.stateNode=e}function Uo(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Go(e,t,n,r,a){Uo(n)||o("200");var i=n._reactRootContainer;if(i){if("function"==typeof a){var s=a;a=function(){var e=No(i._internalRoot);s.call(e)}}null!=e?i.legacy_renderSubtreeIntoContainer(e,t,a):i.render(t,a)}else{if(i=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new Vo(e,!1,t)}(n,r),"function"==typeof a){var l=a;a=function(){var e=No(i._internalRoot);l.call(e)}}Do(function(){null!=e?i.legacy_renderSubtreeIntoContainer(e,t,a):i.render(t,a)})}return No(i._internalRoot)}function Ho(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return Uo(t)||o("200"),function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:$e,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}Ae=function(e,t,n){switch(t){case"input":if(kt(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=B(r);a||o("90"),We(r),kt(r,a)}}}break;case"textarea":Jn(e,n);break;case"select":null!=(t=n.value)&&Zn(e,!!n.multiple,t,!1)}},Fo.prototype.render=function(e){this._defer||o("250"),this._hasChildren=!0,this._children=e;var t=this._root._internalRoot,n=this._expirationTime,r=new Bo;return zo(e,t,null,n,r._onCommit),r},Fo.prototype.then=function(e){if(this._didComplete)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},Fo.prototype.commit=function(){var e=this._root._internalRoot,t=e.firstBatch;if(this._defer&&null!==t||o("251"),this._hasChildren){var n=this._expirationTime;if(t!==this){this._hasChildren&&(n=this._expirationTime=t._expirationTime,this.render(this._children));for(var r=null,a=t;a!==this;)r=a,a=a._next;null===r&&o("251"),r._next=a._next,this._next=t,e.firstBatch=this}this._defer=!1,Ao(e,n),t=this._next,this._next=null,null!==(t=e.firstBatch=t)&&t._hasChildren&&t.render(t._children)}else this._next=null,this._defer=!1},Fo.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++)(0,e[t])()}},Bo.prototype.then=function(e){if(this._didCommit)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},Bo.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++){var n=e[t];"function"!=typeof n&&o("191",n),n()}}},Vo.prototype.render=function(e,t){var n=this._internalRoot,r=new Bo;return null!==(t=void 0===t?null:t)&&r.then(t),jo(e,n,null,r._onCommit),r},Vo.prototype.unmount=function(e){var t=this._internalRoot,n=new Bo;return null!==(e=void 0===e?null:e)&&n.then(e),jo(null,t,null,n._onCommit),n},Vo.prototype.legacy_renderSubtreeIntoContainer=function(e,t,n){var r=this._internalRoot,a=new Bo;return null!==(n=void 0===n?null:n)&&a.then(n),jo(t,r,e,a._onCommit),a},Vo.prototype.createBatch=function(){var e=new Fo(this),t=e._expirationTime,n=this._internalRoot,r=n.firstBatch;if(null===r)n.firstBatch=e,e._next=null;else{for(n=null;null!==r&&r._expirationTime<=t;)n=r,r=r._next;e._next=r,null!==n&&(n._next=e)}return e},De=Lo,Ie=Io,ze=function(){eo||0===ro||(Mo(ro,null),ro=0)};var Wo={createPortal:Ho,findDOMNode:function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;return void 0===t&&("function"==typeof e.render?o("188"):o("268",Object.keys(e))),e=null===(e=on(t))?null:e.stateNode},hydrate:function(e,t,n){return Go(null,e,t,!0,n)},render:function(e,t,n){return Go(null,e,t,!1,n)},unstable_renderSubtreeIntoContainer:function(e,t,n,r){return(null==e||void 0===e._reactInternalFiber)&&o("38"),Go(e,t,n,!1,r)},unmountComponentAtNode:function(e){return Uo(e)||o("40"),!!e._reactRootContainer&&(Do(function(){Go(null,null,e,!1,function(){e._reactRootContainer=null})}),!0)},unstable_createPortal:function(){return Ho.apply(void 0,arguments)},unstable_batchedUpdates:Lo,unstable_interactiveUpdates:Io,flushSync:function(e,t){eo&&o("187");var n=lo;lo=!0;try{return Zi(e,t)}finally{lo=n,Mo(1,null)}},unstable_flushControlled:function(e){var t=lo;lo=!0;try{Zi(e)}finally{(lo=t)||eo||Mo(1,null)}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[N,F,B,P.injectEventPluginsByName,y,q,function(e){E(e,W)},Re,Le,On,L]},unstable_createRoot:function(e,t){return Uo(e)||o("278"),new Vo(e,!0,null!=t&&!0===t.hydrate)}};!function(e){var t=e.findFiberByHostInstance;(function(e){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);Nr=Br(function(e){return t.onCommitFiberRoot(n,e)}),Fr=Br(function(e){return t.onCommitFiberUnmount(n,e)})}catch(e){}})(a({},e,{findHostInstanceByFiber:function(e){return null===(e=on(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null}}))}({findFiberByHostInstance:j,bundleType:0,version:"16.6.0",rendererPackageName:"react-dom"});var qo={default:Wo},Yo=qo&&Wo||qo;e.exports=Yo.default||Yo},function(e,t,n){"use strict";e.exports=n(141)},function(e,t,n){"use strict";
/** @license React v16.6.0
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Object.defineProperty(t,"__esModule",{value:!0});var r=null,a=3,i=-1,o=-1,s=!1,l=!1,u="object"==typeof performance&&"function"==typeof performance.now,c={timeRemaining:u?function(){if(null!==r&&r.expirationTime<o)return 0;var e=b()-performance.now();return 0<e?e:0}:function(){if(null!==r&&r.expirationTime<o)return 0;var e=b()-Date.now();return 0<e?e:0},didTimeout:!1};function f(){if(!s){var e=r.expirationTime;l?y():l=!0,g(h,e)}}function d(){var e=r,t=r.next;if(r===t)r=null;else{var n=r.previous;r=n.next=t,t.previous=n}e.next=e.previous=null,n=e.callback,t=e.expirationTime,e=e.priorityLevel;var i=a,s=o;a=e,o=t;try{var l=n(c)}finally{a=i,o=s}if("function"==typeof l)if(l={callback:l,priorityLevel:e,expirationTime:t,next:null,previous:null},null===r)r=l.next=l.previous=l;else{n=null,e=r;do{if(e.expirationTime>=t){n=e;break}e=e.next}while(e!==r);null===n?n=r:n===r&&(r=l,f()),(t=n.previous).next=n.previous=l,l.next=n,l.previous=t}}function p(){if(-1===i&&null!==r&&1===r.priorityLevel){s=!0,c.didTimeout=!0;try{do{d()}while(null!==r&&1===r.priorityLevel)}finally{s=!1,null!==r?f():l=!1}}}function h(e){s=!0,c.didTimeout=e;try{if(e)for(;null!==r;){var n=t.unstable_now();if(!(r.expirationTime<=n))break;do{d()}while(null!==r&&r.expirationTime<=n)}else if(null!==r)do{d()}while(null!==r&&0<b()-t.unstable_now())}finally{s=!1,null!==r?f():l=!1,p()}}var m,v,g,y,b,x=Date,_="function"==typeof setTimeout?setTimeout:void 0,w="function"==typeof clearTimeout?clearTimeout:void 0,T="function"==typeof requestAnimationFrame?requestAnimationFrame:void 0,k="function"==typeof cancelAnimationFrame?cancelAnimationFrame:void 0;function C(e){m=T(function(t){w(v),e(t)}),v=_(function(){k(m),e(t.unstable_now())},100)}if(u){var E=performance;t.unstable_now=function(){return E.now()}}else t.unstable_now=function(){return x.now()};if("undefined"!=typeof window&&window._schedMock){var M=window._schedMock;g=M[0],y=M[1],b=M[2]}else if("undefined"==typeof window||"function"!=typeof window.addEventListener){var A=null,S=-1,O=function(e,t){if(null!==A){var n=A;A=null;try{S=t,n(e)}finally{S=-1}}};g=function(e,t){-1!==S?setTimeout(g,0,e,t):(A=e,setTimeout(O,t,!0,t),setTimeout(O,1073741823,!1,1073741823))},y=function(){A=null},b=function(){return 1/0},t.unstable_now=function(){return-1===S?0:S}}else{"undefined"!=typeof console&&("function"!=typeof T&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof k&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"));var P=null,R=!1,L=-1,D=!1,I=!1,z=0,j=33,N=33;b=function(){return z};var F="__reactIdleCallback$"+Math.random().toString(36).slice(2);window.addEventListener("message",function(e){if(e.source===window&&e.data===F){R=!1,e=P;var n=L;P=null,L=-1;var r=t.unstable_now(),a=!1;if(0>=z-r){if(!(-1!==n&&n<=r))return D||(D=!0,C(B)),P=e,void(L=n);a=!0}if(null!==e){I=!0;try{e(a)}finally{I=!1}}}},!1);var B=function(e){if(null!==P){C(B);var t=e-z+N;t<N&&j<N?(8>t&&(t=8),N=t<j?j:t):j=t,z=e+N,R||(R=!0,window.postMessage(F,"*"))}else D=!1};g=function(e,t){P=e,L=t,I||0>t?window.postMessage(F,"*"):D||(D=!0,C(B))},y=function(){P=null,R=!1,L=-1}}t.unstable_ImmediatePriority=1,t.unstable_UserBlockingPriority=2,t.unstable_NormalPriority=3,t.unstable_IdlePriority=4,t.unstable_runWithPriority=function(e,n){switch(e){case 1:case 2:case 3:case 4:break;default:e=3}var r=a,o=i;a=e,i=t.unstable_now();try{return n()}finally{a=r,i=o,p()}},t.unstable_scheduleCallback=function(e,n){var o=-1!==i?i:t.unstable_now();if("object"==typeof n&&null!==n&&"number"==typeof n.timeout)n=o+n.timeout;else switch(a){case 1:n=o+-1;break;case 2:n=o+250;break;case 4:n=o+1073741823;break;default:n=o+5e3}if(e={callback:e,priorityLevel:a,expirationTime:n,next:null,previous:null},null===r)r=e.next=e.previous=e,f();else{o=null;var s=r;do{if(s.expirationTime>n){o=s;break}s=s.next}while(s!==r);null===o?o=r:o===r&&(r=e,f()),(n=o.previous).next=o.previous=e,e.next=o,e.previous=n}return e},t.unstable_cancelCallback=function(e){var t=e.next;if(null!==t){if(t===e)r=null;else{e===r&&(r=t);var n=e.previous;n.next=t,t.previous=n}e.next=e.previous=null}},t.unstable_wrapCallback=function(e){var n=a;return function(){var r=a,o=i;a=n,i=t.unstable_now();try{return e.apply(this,arguments)}finally{a=r,i=o,p()}}},t.unstable_getCurrentPriorityLevel=function(){return a}},function(e,t,n){n(143),e.exports=self.fetch.bind(self)},function(e,t,n){"use strict";n.r(t),n.d(t,"Headers",function(){return u}),n.d(t,"Request",function(){return v}),n.d(t,"Response",function(){return y}),n.d(t,"DOMException",function(){return x}),n.d(t,"fetch",function(){return _});var r={searchParams:"URLSearchParams"in self,iterable:"Symbol"in self&&"iterator"in Symbol,blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self};if(r.arrayBuffer)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],i=ArrayBuffer.isView||function(e){return e&&a.indexOf(Object.prototype.toString.call(e))>-1};function o(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function s(e){return"string"!=typeof e&&(e=String(e)),e}function l(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return r.iterable&&(t[Symbol.iterator]=function(){return t}),t}function u(e){this.map={},e instanceof u?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function c(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function f(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function d(e){var t=new FileReader,n=f(t);return t.readAsArrayBuffer(e),n}function p(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function h(){return this.bodyUsed=!1,this._initBody=function(e){this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:r.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:r.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:r.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():r.arrayBuffer&&r.blob&&function(e){return e&&DataView.prototype.isPrototypeOf(e)}(e)?(this._bodyArrayBuffer=p(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):r.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||i(e))?this._bodyArrayBuffer=p(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r.blob&&(this.blob=function(){var e=c(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?c(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(d)}),this.text=function(){var e=c(this);if(e)return e;if(this._bodyBlob)return function(e){var t=new FileReader,n=f(t);return t.readAsText(e),n}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r.formData&&(this.formData=function(){return this.text().then(g)}),this.json=function(){return this.text().then(JSON.parse)},this}u.prototype.append=function(e,t){e=o(e),t=s(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},u.prototype.delete=function(e){delete this.map[o(e)]},u.prototype.get=function(e){return e=o(e),this.has(e)?this.map[e]:null},u.prototype.has=function(e){return this.map.hasOwnProperty(o(e))},u.prototype.set=function(e,t){this.map[o(e)]=s(t)},u.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},u.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),l(e)},u.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),l(e)},u.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),l(e)},r.iterable&&(u.prototype[Symbol.iterator]=u.prototype.entries);var m=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function v(e,t){var n=(t=t||{}).body;if(e instanceof v){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new u(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new u(t.headers)),this.method=function(e){var t=e.toUpperCase();return m.indexOf(t)>-1?t:e}(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function g(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),a=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(a))}}),t}function y(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new u(t.headers),this.url=t.url||"",this._initBody(e)}v.prototype.clone=function(){return new v(this,{body:this._bodyInit})},h.call(v.prototype),h.call(y.prototype),y.prototype.clone=function(){return new y(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new u(this.headers),url:this.url})},y.error=function(){var e=new y(null,{status:0,statusText:""});return e.type="error",e};var b=[301,302,303,307,308];y.redirect=function(e,t){if(-1===b.indexOf(t))throw new RangeError("Invalid status code");return new y(null,{status:t,headers:{location:e}})};var x=self.DOMException;try{new x}catch(e){(x=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack}).prototype=Object.create(Error.prototype),x.prototype.constructor=x}function _(e,t){return new Promise(function(n,a){var i=new v(e,t);if(i.signal&&i.signal.aborted)return a(new x("Aborted","AbortError"));var o=new XMLHttpRequest;function s(){o.abort()}o.onload=function(){var e={status:o.status,statusText:o.statusText,headers:function(e){var t=new u;return e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(e){var n=e.split(":"),r=n.shift().trim();if(r){var a=n.join(":").trim();t.append(r,a)}}),t}(o.getAllResponseHeaders()||"")};e.url="responseURL"in o?o.responseURL:e.headers.get("X-Request-URL");var t="response"in o?o.response:o.responseText;n(new y(t,e))},o.onerror=function(){a(new TypeError("Network request failed"))},o.ontimeout=function(){a(new TypeError("Network request failed"))},o.onabort=function(){a(new x("Aborted","AbortError"))},o.open(i.method,i.url,!0),"include"===i.credentials?o.withCredentials=!0:"omit"===i.credentials&&(o.withCredentials=!1),"responseType"in o&&r.blob&&(o.responseType="blob"),i.headers.forEach(function(e,t){o.setRequestHeader(t,e)}),i.signal&&(i.signal.addEventListener("abort",s),o.onreadystatechange=function(){4===o.readyState&&i.signal.removeEventListener("abort",s)}),o.send(void 0===i._bodyInit?null:i._bodyInit)})}_.polyfill=!0,self.fetch||(self.fetch=_,self.Headers=u,self.Request=v,self.Response=y)},function(e,t,n){var r=n(145);"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(172)(r,a);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(146);(e.exports=n(147)(!1)).push([e.i,"/* roboto-100normal - latin */\n@font-face {\n  font-family: 'Roboto';\n  font-style: normal;\n  font-display: swap;\n  font-weight: 100;\n  src:\n    local('Roboto Thin '),\n    local('Roboto-Thin'),\n    url("+r(n(148))+") format('woff2'), \n    url("+r(n(149))+") format('woff'); /* Modern Browsers */\n}\n\n/* roboto-100italic - latin */\n@font-face {\n  font-family: 'Roboto';\n  font-style: italic;\n  font-display: swap;\n  font-weight: 100;\n  src:\n    local('Roboto Thin italic'),\n    local('Roboto-Thinitalic'),\n    url("+r(n(150))+") format('woff2'), \n    url("+r(n(151))+") format('woff'); /* Modern Browsers */\n}\n\n/* roboto-300normal - latin */\n@font-face {\n  font-family: 'Roboto';\n  font-style: normal;\n  font-display: swap;\n  font-weight: 300;\n  src:\n    local('Roboto Light '),\n    local('Roboto-Light'),\n    url("+r(n(152))+") format('woff2'), \n    url("+r(n(153))+") format('woff'); /* Modern Browsers */\n}\n\n/* roboto-300italic - latin */\n@font-face {\n  font-family: 'Roboto';\n  font-style: italic;\n  font-display: swap;\n  font-weight: 300;\n  src:\n    local('Roboto Light italic'),\n    local('Roboto-Lightitalic'),\n    url("+r(n(154))+") format('woff2'), \n    url("+r(n(155))+") format('woff'); /* Modern Browsers */\n}\n\n/* roboto-400normal - latin */\n@font-face {\n  font-family: 'Roboto';\n  font-style: normal;\n  font-display: swap;\n  font-weight: 400;\n  src:\n    local('Roboto Regular '),\n    local('Roboto-Regular'),\n    url("+r(n(156))+") format('woff2'), \n    url("+r(n(157))+") format('woff'); /* Modern Browsers */\n}\n\n/* roboto-400italic - latin */\n@font-face {\n  font-family: 'Roboto';\n  font-style: italic;\n  font-display: swap;\n  font-weight: 400;\n  src:\n    local('Roboto Regular italic'),\n    local('Roboto-Regularitalic'),\n    url("+r(n(158))+") format('woff2'), \n    url("+r(n(159))+") format('woff'); /* Modern Browsers */\n}\n\n/* roboto-500normal - latin */\n@font-face {\n  font-family: 'Roboto';\n  font-style: normal;\n  font-display: swap;\n  font-weight: 500;\n  src:\n    local('Roboto Medium '),\n    local('Roboto-Medium'),\n    url("+r(n(160))+") format('woff2'), \n    url("+r(n(161))+") format('woff'); /* Modern Browsers */\n}\n\n/* roboto-500italic - latin */\n@font-face {\n  font-family: 'Roboto';\n  font-style: italic;\n  font-display: swap;\n  font-weight: 500;\n  src:\n    local('Roboto Medium italic'),\n    local('Roboto-Mediumitalic'),\n    url("+r(n(162))+") format('woff2'), \n    url("+r(n(163))+") format('woff'); /* Modern Browsers */\n}\n\n/* roboto-700normal - latin */\n@font-face {\n  font-family: 'Roboto';\n  font-style: normal;\n  font-display: swap;\n  font-weight: 700;\n  src:\n    local('Roboto Bold '),\n    local('Roboto-Bold'),\n    url("+r(n(164))+") format('woff2'), \n    url("+r(n(165))+") format('woff'); /* Modern Browsers */\n}\n\n/* roboto-700italic - latin */\n@font-face {\n  font-family: 'Roboto';\n  font-style: italic;\n  font-display: swap;\n  font-weight: 700;\n  src:\n    local('Roboto Bold italic'),\n    local('Roboto-Bolditalic'),\n    url("+r(n(166))+") format('woff2'), \n    url("+r(n(167))+") format('woff'); /* Modern Browsers */\n}\n\n/* roboto-900normal - latin */\n@font-face {\n  font-family: 'Roboto';\n  font-style: normal;\n  font-display: swap;\n  font-weight: 900;\n  src:\n    local('Roboto Black '),\n    local('Roboto-Black'),\n    url("+r(n(168))+") format('woff2'), \n    url("+r(n(169))+") format('woff'); /* Modern Browsers */\n}\n\n/* roboto-900italic - latin */\n@font-face {\n  font-family: 'Roboto';\n  font-style: italic;\n  font-display: swap;\n  font-weight: 900;\n  src:\n    local('Roboto Black italic'),\n    local('Roboto-Blackitalic'),\n    url("+r(n(170))+") format('woff2'), \n    url("+r(n(171))+") format('woff'); /* Modern Browsers */\n}\n\n",""])},function(e,t){e.exports=function(e){return"string"!=typeof e?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),/["'() \t\n]/.test(e)?'"'+e.replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"':e)}},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var a=function(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}(r),i=r.sources.map(function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"});return[n].concat(i).concat([a]).join("\n")}return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},a=0;a<this.length;a++){var i=this[a][0];"number"==typeof i&&(r[i]=!0)}for(a=0;a<e.length;a++){var o=e[a];"number"==typeof o[0]&&r[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),t.push(o))}},t}},function(e,t,n){e.exports=n.p+"987b84570ea69ee660455b8d5e91f5f1.woff2"},function(e,t,n){e.exports=n.p+"e9dbbe8a693dd275c16d32feb101f1c1.woff"},function(e,t,n){e.exports=n.p+"6232f43d15b0e7a0bf0fe82e295bdd06.woff2"},function(e,t,n){e.exports=n.p+"d704bb3d579b7d5e40880c75705c8a71.woff"},function(e,t,n){e.exports=n.p+"55536c8e9e9a532651e3cf374f290ea3.woff2"},function(e,t,n){e.exports=n.p+"a1471d1d6431c893582a5f6a250db3f9.woff"},function(e,t,n){e.exports=n.p+"d69924b98acd849cdeba9fbff3f88ea6.woff2"},function(e,t,n){e.exports=n.p+"210a7c781f5a354a0e4985656ab456d9.woff"},function(e,t,n){e.exports=n.p+"5d4aeb4e5f5ef754e307d7ffaef688bd.woff2"},function(e,t,n){e.exports=n.p+"bafb105baeb22d965c70fe52ba6b49d9.woff"},function(e,t,n){e.exports=n.p+"d8bcbe724fd6f4ba44d0ee6a2675890f.woff2"},function(e,t,n){e.exports=n.p+"9680d5a0c32d2fd084e07bbc4c8b2923.woff"},function(e,t,n){e.exports=n.p+"285467176f7fe6bb6a9c6873b3dad2cc.woff2"},function(e,t,n){e.exports=n.p+"de8b7431b74642e830af4d4f4b513ec9.woff"},function(e,t,n){e.exports=n.p+"510dec37fa69fba39593e01a469ee018.woff2"},function(e,t,n){e.exports=n.p+"ffcc050b2d92d4b14a4fcb527ee0bcc8.woff"},function(e,t,n){e.exports=n.p+"037d830416495def72b7881024c14b7b.woff2"},function(e,t,n){e.exports=n.p+"cf6613d1adf490972c557a8e318e0868.woff"},function(e,t,n){e.exports=n.p+"010c1aeee3c6d1cbb1d5761d80353823.woff2"},function(e,t,n){e.exports=n.p+"846d1890aee87fde5d8ced8eba360c3a.woff"},function(e,t,n){e.exports=n.p+"19b7a0adfdd4f808b53af7e2ce2ad4e5.woff2"},function(e,t,n){e.exports=n.p+"8c2ade503b34e31430d6c98aa29a52a3.woff"},function(e,t,n){e.exports=n.p+"7b770d6c53423deb1a8e49d3c9175184.woff2"},function(e,t,n){e.exports=n.p+"bc833e725c137257c2c42a789845d82f.woff"},function(e,t,n){var r={},a=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}}(function(){return window&&document&&document.all&&!window.atob}),i=function(e){var t={};return function(e,n){if("function"==typeof e)return e();if(void 0===t[e]){var r=function(e,t){return t?t.querySelector(e):document.querySelector(e)}.call(this,e,n);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}}(),o=null,s=0,l=[],u=n(173);function c(e,t){for(var n=0;n<e.length;n++){var a=e[n],i=r[a.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](a.parts[o]);for(;o<a.parts.length;o++)i.parts.push(v(a.parts[o],t))}else{var s=[];for(o=0;o<a.parts.length;o++)s.push(v(a.parts[o],t));r[a.id]={id:a.id,refs:1,parts:s}}}}function f(e,t){for(var n=[],r={},a=0;a<e.length;a++){var i=e[a],o=t.base?i[0]+t.base:i[0],s={css:i[1],media:i[2],sourceMap:i[3]};r[o]?r[o].parts.push(s):n.push(r[o]={id:o,parts:[s]})}return n}function d(e,t){var n=i(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=l[l.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),l.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var a=i(e.insertAt.before,n);n.insertBefore(t,a)}}function p(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=l.indexOf(e);t>=0&&l.splice(t,1)}function h(e){var t=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var r=function(){0;return n.nc}();r&&(e.attrs.nonce=r)}return m(t,e.attrs),d(e,t),t}function m(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function v(e,t){var n,r,a,i;if(t.transform&&e.css){if(!(i="function"==typeof t.transform?t.transform(e.css):t.transform.default(e.css)))return function(){};e.css=i}if(t.singleton){var l=s++;n=o||(o=h(t)),r=y.bind(null,n,l,!1),a=y.bind(null,n,l,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",m(t,e.attrs),d(e,t),t}(t),r=function(e,t,n){var r=n.css,a=n.sourceMap,i=void 0===t.convertToAbsoluteUrls&&a;(t.convertToAbsoluteUrls||i)&&(r=u(r));a&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */");var o=new Blob([r],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(o),s&&URL.revokeObjectURL(s)}.bind(null,n,t),a=function(){p(n),n.href&&URL.revokeObjectURL(n.href)}):(n=h(t),r=function(e,t){var n=t.css,r=t.media;r&&e.setAttribute("media",r);if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,n),a=function(){p(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else a()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=a()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=f(e,t);return c(n,t),function(e){for(var a=[],i=0;i<n.length;i++){var o=n[i];(s=r[o.id]).refs--,a.push(s)}e&&c(f(e,t),t);for(i=0;i<a.length;i++){var s;if(0===(s=a[i]).refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete r[s.id]}}}};var g=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}();function y(e,t,n,r){var a=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=g(t,a);else{var i=document.createTextNode(a),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(i,o[t]):e.appendChild(i)}}},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var a,i=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?e:(a=0===i.indexOf("//")?i:0===i.indexOf("/")?n+i:r+i.replace(/^\.\//,""),"url("+JSON.stringify(a)+")")})}},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var a=r(n(7)),i=r(n(10)),o=r(n(8)),s=r(n(0)),l=(r(n(2)),r(n(5))),u=r(n(9)),c=n(29),f=(r(n(78)),function(e){return{root:{display:"block",margin:0},display4:e.typography.display4,display3:e.typography.display3,display2:e.typography.display2,display1:e.typography.display1,headline:e.typography.headline,title:e.typography.title,subheading:e.typography.subheading,body2:e.typography.body2,body1:e.typography.body1,caption:e.typography.caption,button:e.typography.button,h1:e.typography.h1,h2:e.typography.h2,h3:e.typography.h3,h4:e.typography.h4,h5:e.typography.h5,h6:e.typography.h6,subtitle1:e.typography.subtitle1,subtitle2:e.typography.subtitle2,overline:e.typography.overline,srOnly:{position:"absolute",height:1,width:1,overflow:"hidden"},alignLeft:{textAlign:"left"},alignCenter:{textAlign:"center"},alignRight:{textAlign:"right"},alignJustify:{textAlign:"justify"},noWrap:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},gutterBottom:{marginBottom:"0.35em"},paragraph:{marginBottom:16},colorInherit:{color:"inherit"},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},colorTextPrimary:{color:e.palette.text.primary},colorTextSecondary:{color:e.palette.text.secondary},colorError:{color:e.palette.error.main}}});t.styles=f;var d={display4:"h1",display3:"h2",display2:"h3",display1:"h4",headline:"h5",title:"h6",subheading:"subtitle1"};var p={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",display4:"h1",display3:"h1",display2:"h1",display1:"h1",headline:"h1",title:"h2",subheading:"h3"};function h(e){var t,n=e.align,r=e.classes,u=e.className,f=e.color,h=e.component,m=e.gutterBottom,v=e.headlineMapping,g=(e.internalDeprecatedVariant,e.noWrap),y=e.paragraph,b=e.theme,x=e.variant,_=(0,o.default)(e,["align","classes","className","color","component","gutterBottom","headlineMapping","internalDeprecatedVariant","noWrap","paragraph","theme","variant"]),w=function(e,t){var n=e.typography,r=t;return r||(r=n.useNextVariants?"body2":"body1"),n.useNextVariants&&(r=d[r]||r),r}(b,x),T=(0,l.default)(r.root,(t={},(0,i.default)(t,r[w],"inherit"!==w),(0,i.default)(t,r["color".concat((0,c.capitalize)(f))],"default"!==f),(0,i.default)(t,r.noWrap,g),(0,i.default)(t,r.gutterBottom,m),(0,i.default)(t,r.paragraph,y),(0,i.default)(t,r["align".concat((0,c.capitalize)(n))],"inherit"!==n),t),u),k=h||(y?"p":v[w]||p[w])||"span";return s.default.createElement(k,(0,a.default)({className:T},_))}h.propTypes={},h.defaultProps={align:"inherit",color:"default",gutterBottom:!1,headlineMapping:p,noWrap:!1,paragraph:!1};var m=(0,u.default)(f,{name:"MuiTypography",withTheme:!0})(h);t.default=m},function(e,t){e.exports=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}},function(e,t,n){"use strict";var r=n(177);function a(){}e.exports=function(){function e(e,t,n,a,i,o){if(o!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=a,n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,r)}e.exports=n},function(e,t,n){"use strict";e.exports=n(180)},function(e,t,n){"use strict";
/** @license React v16.6.0
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&Symbol.for,a=r?Symbol.for("react.element"):60103,i=r?Symbol.for("react.portal"):60106,o=r?Symbol.for("react.fragment"):60107,s=r?Symbol.for("react.strict_mode"):60108,l=r?Symbol.for("react.profiler"):60114,u=r?Symbol.for("react.provider"):60109,c=r?Symbol.for("react.context"):60110,f=r?Symbol.for("react.concurrent_mode"):60111,d=r?Symbol.for("react.forward_ref"):60112,p=r?Symbol.for("react.suspense"):60113,h=r?Symbol.for("react.memo"):60115,m=r?Symbol.for("react.lazy"):60116;function v(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case a:switch(e=e.type){case f:case o:case l:case s:return e;default:switch(e=e&&e.$$typeof){case c:case d:case u:return e;default:return t}}case i:return t}}}function g(e){return v(e)===f}t.typeOf=v,t.AsyncMode=f,t.ConcurrentMode=f,t.ContextConsumer=c,t.ContextProvider=u,t.Element=a,t.ForwardRef=d,t.Fragment=o,t.Profiler=l,t.Portal=i,t.StrictMode=s,t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===o||e===f||e===l||e===s||e===p||"object"==typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===h||e.$$typeof===u||e.$$typeof===c||e.$$typeof===d)},t.isAsyncMode=function(e){return g(e)},t.isConcurrentMode=g,t.isContextConsumer=function(e){return v(e)===c},t.isContextProvider=function(e){return v(e)===u},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===a},t.isForwardRef=function(e){return v(e)===d},t.isFragment=function(e){return v(e)===o},t.isProfiler=function(e){return v(e)===l},t.isPortal=function(e){return v(e)===i},t.isStrictMode=function(e){return v(e)===s}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=function(e){return"string"==typeof e?e:e?e.displayName||e.name||"Component":void 0};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function e(t){var n=null;for(var a in t){var i=t[a],o=void 0===i?"undefined":r(i);if("function"===o)n||(n={}),n[a]=i;else if("object"===o&&null!==i&&!Array.isArray(i)){var s=e(i);s&&(n||(n={}),n[a]=s)}}return n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e){return e&&e.__esModule?e:{default:e}}(n(38));var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sheets=[],this.refs=[],this.keys=[]}return r(e,[{key:"get",value:function(e){var t=this.keys.indexOf(e);return this.sheets[t]}},{key:"add",value:function(e,t){var n=this.sheets,r=this.refs,a=this.keys,i=n.indexOf(t);return-1!==i?i:(n.push(t),r.push(0),a.push(e),n.length-1)}},{key:"manage",value:function(e){var t=this.keys.indexOf(e),n=this.sheets[t];return 0===this.refs[t]&&n.attach(),this.refs[t]++,this.keys[t]||this.keys.splice(t,0,e),n}},{key:"unmanage",value:function(e){var t=this.keys.indexOf(e);-1!==t?this.refs[t]>0&&(this.refs[t]--,0===this.refs[t]&&this.sheets[t].detach()):(0,a.default)(!1,"SheetsManager: can't find sheet to unmanage")}},{key:"size",get:function(){return this.keys.length}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function e(t){if(null==t)return t;var n=void 0===t?"undefined":r(t);if("string"===n||"number"===n||"function"===n)return t;if(i(t))return t.map(e);if((0,a.default)(t))return t;var o={};for(var s in t){var l=t[s];"object"!==(void 0===l?"undefined":r(l))?o[s]=l:o[s]=e(l)}return o};var a=function(e){return e&&e.__esModule?e:{default:e}}(n(94));var i=Array.isArray},function(e,t,n){"use strict";n.r(t),function(e,r){var a,i=n(123);a="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:r;var o=Object(i.a)(a);t.default=o}.call(this,n(48),n(186)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});e.CSS;t.default=function(e){return e}}).call(this,n(48))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n="2f1acc6c3a606b082e5eef5e54414ffb";null==e[n]&&(e[n]=0),t.default=e[n]++}).call(this,n(48))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=y(n(59)),s=y(n(97)),l=y(n(190)),u=y(n(191)),c=y(n(197)),f=y(n(198)),d=y(n(74)),p=y(n(39)),h=y(n(96)),m=y(n(58)),v=y(n(199)),g=y(n(200));function y(e){return e&&e.__esModule?e:{default:e}}var b=u.default.concat([c.default,f.default]),x=0,_=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=x++,this.version="9.8.7",this.plugins=new l.default,this.options={createGenerateClassName:h.default,Renderer:o.default?v.default:g.default,plugins:[]},this.generateClassName=(0,h.default)(),this.use.apply(this,b),this.setup(t)}return i(e,[{key:"setup",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.createGenerateClassName&&(this.options.createGenerateClassName=e.createGenerateClassName,this.generateClassName=e.createGenerateClassName()),null!=e.insertionPoint&&(this.options.insertionPoint=e.insertionPoint),(e.virtual||e.Renderer)&&(this.options.Renderer=e.Renderer||(e.virtual?g.default:v.default)),e.plugins&&this.use.apply(this,e.plugins),this}},{key:"createStyleSheet",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.index;"number"!=typeof n&&(n=0===d.default.index?0:d.default.index+1);var r=new s.default(e,a({},t,{jss:this,generateClassName:t.generateClassName||this.generateClassName,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:n}));return this.plugins.onProcessSheet(r),r}},{key:"removeStyleSheet",value:function(e){return e.detach(),d.default.remove(e),this}},{key:"createRule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"object"===(void 0===e?"undefined":r(e))&&(n=t,t=e,e=void 0);var a=n;a.jss=this,a.Renderer=this.options.Renderer,a.generateClassName||(a.generateClassName=this.generateClassName),a.classes||(a.classes={});var i=(0,m.default)(e,t,a);return!a.selector&&i instanceof p.default&&(i.selector="."+a.generateClassName(i)),this.plugins.onProcessRule(i),i}},{key:"use",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach(function(t){-1===e.options.plugins.indexOf(t)&&(e.options.plugins.push(t),e.plugins.use(t))}),this}}]),e}();t.default=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e){return e&&e.__esModule?e:{default:e}}(n(38));var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hooks={onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}}return r(e,[{key:"onCreateRule",value:function(e,t,n){for(var r=0;r<this.hooks.onCreateRule.length;r++){var a=this.hooks.onCreateRule[r](e,t,n);if(a)return a}return null}},{key:"onProcessRule",value:function(e){if(!e.isProcessed){for(var t=e.options.sheet,n=0;n<this.hooks.onProcessRule.length;n++)this.hooks.onProcessRule[n](e,t);e.style&&this.onProcessStyle(e.style,e,t),e.isProcessed=!0}}},{key:"onProcessStyle",value:function(e,t,n){for(var r=e,a=0;a<this.hooks.onProcessStyle.length;a++)r=this.hooks.onProcessStyle[a](r,t,n),t.style=r}},{key:"onProcessSheet",value:function(e){for(var t=0;t<this.hooks.onProcessSheet.length;t++)this.hooks.onProcessSheet[t](e)}},{key:"onUpdate",value:function(e,t,n){for(var r=0;r<this.hooks.onUpdate.length;r++)this.hooks.onUpdate[r](e,t,n)}},{key:"onChangeValue",value:function(e,t,n){for(var r=e,a=0;a<this.hooks.onChangeValue.length;a++)r=this.hooks.onChangeValue[a](r,t,n);return r}},{key:"use",value:function(e){for(var t in e)this.hooks[t]?this.hooks[t].push(e[t]):(0,a.default)(!1,'[JSS] Unknown hook "%s".',t)}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=l(n(192)),a=l(n(193)),i=l(n(194)),o=l(n(195)),s=l(n(196));function l(e){return e&&e.__esModule?e:{default:e}}var u={"@charset":r.default,"@import":r.default,"@namespace":r.default,"@keyframes":a.default,"@media":i.default,"@supports":i.default,"@font-face":o.default,"@viewport":s.default,"@-ms-viewport":s.default},c=Object.keys(u).map(function(e){var t=new RegExp("^"+e),n=u[e];return{onCreateRule:function(e,r,a){return t.test(e)?new n(e,r,a):null}}});t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var a=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type="simple",this.isProcessed=!1,this.key=t,this.value=n,this.options=r}return r(e,[{key:"toString",value:function(e){if(Array.isArray(this.value)){for(var t="",n=0;n<this.value.length;n++)t+=this.key+" "+this.value[n]+";",this.value[n+1]&&(t+="\n");return t}return this.key+" "+this.value+";"}}]),e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e){return e&&e.__esModule?e:{default:e}}(n(47));var o=function(){function e(t,n,a){for(var o in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type="keyframes",this.isProcessed=!1,this.key=t,this.options=a,this.rules=new i.default(r({},a,{parent:this})),n)this.rules.add(o,n[o],r({},this.options,{parent:this,selector:o}));this.rules.process()}return a(e,[{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{indent:1},t=this.rules.toString(e);return t&&(t+="\n"),this.key+" {\n"+t+"}"}}]),e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e){return e&&e.__esModule?e:{default:e}}(n(47));var o=function(){function e(t,n,a){for(var o in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type="conditional",this.isProcessed=!1,this.key=t,this.options=a,this.rules=new i.default(r({},a,{parent:this})),n)this.rules.add(o,n[o]);this.rules.process()}return a(e,[{key:"getRule",value:function(e){return this.rules.get(e)}},{key:"indexOf",value:function(e){return this.rules.indexOf(e)}},{key:"addRule",value:function(e,t,n){var r=this.rules.add(e,t,n);return this.options.jss.plugins.onProcessRule(r),r}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{indent:1},t=this.rules.toString(e);return t?this.key+" {\n"+t+"\n}":""}}]),e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e){return e&&e.__esModule?e:{default:e}}(n(73));var i=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type="font-face",this.isProcessed=!1,this.key=t,this.style=n,this.options=r}return r(e,[{key:"toString",value:function(e){if(Array.isArray(this.style)){for(var t="",n=0;n<this.style.length;n++)t+=(0,a.default)(this.key,this.style[n]),this.style[n+1]&&(t+="\n");return t}return(0,a.default)(this.key,this.style,e)}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e){return e&&e.__esModule?e:{default:e}}(n(73));var i=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type="viewport",this.isProcessed=!1,this.key=t,this.style=n,this.options=r}return r(e,[{key:"toString",value:function(e){return(0,a.default)(this.key,this.style,e)}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(39)),a=o(n(58)),i=o(n(94));function o(e){return e&&e.__esModule?e:{default:e}}t.default={onCreateRule:function(e,t,n){if(!(0,i.default)(t))return null;var r=t,o=(0,a.default)(e,{},n);return r.subscribe(function(e){for(var t in e)o.prop(t,e[t])}),o},onProcessRule:function(e){if(e instanceof r.default){var t=e,n=t.style,a=function(e){var r=n[e];if(!(0,i.default)(r))return"continue";delete n[e],r.subscribe({next:function(n){t.prop(e,n)}})};for(var o in n)a(o)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(47)),a=o(n(39)),i=o(n(58));function o(e){return e&&e.__esModule?e:{default:e}}var s=Date.now(),l="fnValues"+s,u="fnStyle"+ ++s;t.default={onCreateRule:function(e,t,n){if("function"!=typeof t)return null;var r=(0,i.default)(e,{},n);return r[u]=t,r},onProcessStyle:function(e,t){var n={};for(var r in e){var a=e[r];"function"==typeof a&&(delete e[r],n[r]=a)}return(t=t)[l]=n,e},onUpdate:function(e,t){if(t.rules instanceof r.default)t.rules.update(e);else if(t instanceof a.default){if((t=t)[l])for(var n in t[l])t.prop(n,t[l][n](e));var i=(t=t)[u];if(i){var o=i(e);for(var s in o)t.prop(s,o[s])}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=l(n(38)),i=l(n(74)),o=l(n(39)),s=l(n(57));function l(e){return e&&e.__esModule?e:{default:e}}var u=function(e){var t=void 0;return function(){return t||(t=e()),t}};function c(e,t){try{return e.style.getPropertyValue(t)}catch(e){return""}}function f(e,t,n){try{var r=n;if(Array.isArray(n)&&(r=(0,s.default)(n,!0),"!important"===n[n.length-1]))return e.style.setProperty(t,r,"important"),!0;e.style.setProperty(t,r)}catch(e){return!1}return!0}function d(e,t){try{e.style.removeProperty(t)}catch(e){(0,a.default)(!1,'[JSS] DOMException "%s" was thrown. Tried to remove property "%s".',e.message,t)}}var p=1,h=7,m=function(){var e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.substr(t,e.indexOf("{")-1)};return function(t){if(t.type===p)return t.selectorText;if(t.type===h){var n=t.name;if(n)return"@keyframes "+n;var r=t.cssText;return"@"+e(r,r.indexOf("keyframes"))}return e(t.cssText)}}();function v(e,t){return e.selectorText=t,e.selectorText===t}var g=u(function(){return document.head||document.getElementsByTagName("head")[0]}),y=function(){var e=void 0,t=!1;return function(n){var r={};e||(e=document.createElement("style"));for(var a=0;a<n.length;a++){var i=n[a];if(i instanceof o.default){var s=i.selector;if(s&&-1!==s.indexOf("\\")){t||(g().appendChild(e),t=!0),e.textContent=s+" {}";var l=e.sheet;if(l){var u=l.cssRules;u&&(r[u[0].selectorText]=i.key)}}}}return t&&(g().removeChild(e),t=!1),r}}();function b(e){var t=i.default.registry;if(t.length>0){var n=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.attached&&r.options.index>t.index&&r.options.insertionPoint===t.insertionPoint)return r}return null}(t,e);if(n)return n.renderer.element;if(n=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e[n];if(r.attached&&r.options.insertionPoint===t.insertionPoint)return r}return null}(t,e))return n.renderer.element.nextElementSibling}var r=e.insertionPoint;if(r&&"string"==typeof r){var o=function(e){for(var t=g(),n=0;n<t.childNodes.length;n++){var r=t.childNodes[n];if(8===r.nodeType&&r.nodeValue.trim()===e)return r}return null}(r);if(o)return o.nextSibling;(0,a.default)("jss"===r,'[JSS] Insertion point "%s" not found.',r)}return null}var x=u(function(){var e=document.querySelector('meta[property="csp-nonce"]');return e?e.getAttribute("content"):null}),_=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.getPropertyValue=c,this.setProperty=f,this.removeProperty=d,this.setSelector=v,this.getKey=m,this.getUnescapedKeysMap=y,this.hasInsertedRules=!1,t&&i.default.add(t),this.sheet=t;var n=this.sheet?this.sheet.options:{},r=n.media,a=n.meta,o=n.element;this.element=o||document.createElement("style"),this.element.setAttribute("data-jss",""),r&&this.element.setAttribute("media",r),a&&this.element.setAttribute("data-meta",a);var s=x();s&&this.element.setAttribute("nonce",s)}return r(e,[{key:"attach",value:function(){!this.element.parentNode&&this.sheet&&(this.hasInsertedRules&&(this.deploy(),this.hasInsertedRules=!1),function(e,t){var n=t.insertionPoint,r=b(t);if(r){var i=r.parentNode;i&&i.insertBefore(e,r)}else if(n&&"number"==typeof n.nodeType){var o=n,s=o.parentNode;s?s.insertBefore(e,o.nextSibling):(0,a.default)(!1,"[JSS] Insertion point is not in the DOM.")}else g().insertBefore(e,r)}(this.element,this.sheet.options))}},{key:"detach",value:function(){this.element.parentNode.removeChild(this.element)}},{key:"deploy",value:function(){this.sheet&&(this.element.textContent="\n"+this.sheet.toString()+"\n")}},{key:"insertRule",value:function(e,t){var n=this.element.sheet,r=n.cssRules,i=e.toString();if(t||(t=r.length),!i)return!1;try{n.insertRule(i,t)}catch(t){return(0,a.default)(!1,"[JSS] Can not insert an unsupported rule \n\r%s",e),!1}return this.hasInsertedRules=!0,r[t]}},{key:"deleteRule",value:function(e){var t=this.element.sheet,n=this.indexOf(e);return-1!==n&&(t.deleteRule(n),!0)}},{key:"indexOf",value:function(e){for(var t=this.element.sheet.cssRules,n=0;n<t.length;n++)if(e===t[n])return n;return-1}},{key:"replaceRule",value:function(e,t){var n=this.indexOf(e),r=this.insertRule(t,n);return this.element.sheet.deleteRule(n),r}},{key:"getRules",value:function(){return this.element.sheet.cssRules}}]),e}();t.default=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"setProperty",value:function(){return!0}},{key:"getPropertyValue",value:function(){return""}},{key:"removeProperty",value:function(){}},{key:"setSelector",value:function(){return!0}},{key:"getKey",value:function(){return""}},{key:"attach",value:function(){}},{key:"detach",value:function(){}},{key:"deploy",value:function(){}},{key:"insertRule",value:function(){return!1}},{key:"deleteRule",value:function(){return!0}},{key:"replaceRule",value:function(){return!1}},{key:"getRules",value:function(){}},{key:"indexOf",value:function(){return-1}}]),e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={jss:"64a55d578f856d258dc345b094a2a2b3",sheetsRegistry:"d4bd0baacbc52bbd48bbb9eb24344ecd",sheetOptions:"6fc570d6bd61383819d0f9e7407c452d"};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=function(){return{onCreateRule:function(e,t,n){if(e===s)return new u(e,t,n);if("@"===e[0]&&e.substr(0,l.length)===l)return new c(e,t,n);var r=n.parent;r&&("global"!==r.type&&"global"!==r.options.parent.type||(n.global=!0));n.global&&(n.selector=e);return null},onProcessRule:function(e){if("style"!==e.type)return;(function(e){var t=e.options,n=e.style,a=n[s];if(!a)return;for(var i in a)t.sheet.addRule(i,a[i],r({},t,{selector:d(i,e.selector)}));delete n[s]})(e),function(e){var t=e.options,n=e.style;for(var a in n)if(a.substr(0,s.length)===s){var i=d(a.substr(s.length),e.selector);t.sheet.addRule(i,n[a],r({},t,{selector:i})),delete n[a]}}(e)}}};var i=n(92);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s="@global",l="@global ",u=function(){function e(t,n,a){for(var s in o(this,e),this.type="global",this.key=t,this.options=a,this.rules=new i.RuleList(r({},a,{parent:this})),n)this.rules.add(s,n[s],{selector:s});this.rules.process()}return a(e,[{key:"getRule",value:function(e){return this.rules.get(e)}},{key:"addRule",value:function(e,t,n){var r=this.rules.add(e,t,n);return this.options.jss.plugins.onProcessRule(r),r}},{key:"indexOf",value:function(e){return this.rules.indexOf(e)}},{key:"toString",value:function(){return this.rules.toString()}}]),e}(),c=function(){function e(t,n,a){o(this,e),this.name=t,this.options=a;var i=t.substr(l.length);this.rule=a.jss.createRule(i,n,r({},a,{parent:this,selector:i}))}return a(e,[{key:"toString",value:function(e){return this.rule.toString(e)}}]),e}(),f=/\s*,\s*/g;function d(e,t){for(var n=e.split(f),r="",a=0;a<n.length;a++)r+=t+" "+n[a].trim(),n[a+1]&&(r+=", ");return r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function(){function e(e){return function(t,n){var r=e.getRule(n);return r?r.selector:((0,a.default)(!1,"[JSS] Could not find the referenced rule %s in %s.",n,e.options.meta||e),n)}}var t=function(e){return-1!==e.indexOf("&")};function n(e,n){for(var r=n.split(i),a=e.split(i),s="",l=0;l<r.length;l++)for(var u=r[l],c=0;c<a.length;c++){var f=a[c];s&&(s+=", "),s+=t(f)?f.replace(o,u):u+" "+f}return s}function l(e,t,n){if(n)return r({},n,{index:n.index+1});var a=e.options.nestingLevel;return a=void 0===a?1:a+1,r({},e.options,{nestingLevel:a,index:t.indexOf(e)+1})}return{onProcessStyle:function(a,i){if("style"!==i.type)return a;var o=i.options.parent,u=void 0,c=void 0;for(var f in a){var d=t(f),p="@"===f[0];if(d||p){if(u=l(i,o,u),d){var h=n(f,i.selector);c||(c=e(o)),h=h.replace(s,c),o.addRule(h,a[f],r({},u,{selector:h}))}else p&&o.addRule(f,null,u).addRule(i.key,a[f],{selector:i.selector});delete a[f]}}return a}}};var a=function(e){return e&&e.__esModule?e:{default:e}}(n(204));var i=/\s*,\s*/g,o=/&/g,s=/\$([\w-]+)/g},function(e,t,n){"use strict";e.exports=function(){}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{onProcessStyle:function(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)e[t]=a(e[t]);return e}return a(e)},onChangeValue:function(e,t,n){var a=(0,r.default)(t);return t===a?e:(n.prop(a,e),null)}}};var r=function(e){return e&&e.__esModule?e:{default:e}}(n(206));function a(e){var t={};for(var n in e)t[(0,r.default)(n)]=e[n];return e.fallbacks&&(Array.isArray(e.fallbacks)?t.fallbacks=e.fallbacks.map(a):t.fallbacks=a(e.fallbacks)),t}},function(e,t,n){"use strict";var r=/[A-Z]/g,a=/^ms-/,i={};e.exports=function(e){return e in i?i[e]:i[e]=e.replace(r,"-$&").toLowerCase().replace(a,"-ms-")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function a(e){var t=/(-[a-z])/g,n=function(e){return e[1].toUpperCase()},r={};for(var a in e)r[a]=e[a],r[a.replace(t,n)]=e[a];return r}t.default=function(){var e=a(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});return{onProcessStyle:function(t,n){if("style"!==n.type)return t;for(var r in t)t[r]=o(r,t[r],e);return t},onChangeValue:function(t,n){return o(n,t,e)}}};var i=a(function(e){return e&&e.__esModule?e:{default:e}}(n(208)).default);function o(e,t,n){if(!t)return t;var a=t,s=void 0===t?"undefined":r(t);switch("object"===s&&Array.isArray(t)&&(s="array"),s){case"object":if("fallbacks"===e){for(var l in t)t[l]=o(l,t[l],n);break}for(var u in t)t[u]=o(e+"-"+u,t[u],n);break;case"array":for(var c=0;c<t.length;c++)t[c]=o(e,t[c],n);break;case"number":0!==t&&(a=t+(n[e]||i[e]||""))}return a}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={"animation-delay":"ms","animation-duration":"ms","background-position":"px","background-position-x":"px","background-position-y":"px","background-size":"px",border:"px","border-bottom":"px","border-bottom-left-radius":"px","border-bottom-right-radius":"px","border-bottom-width":"px","border-left":"px","border-left-width":"px","border-radius":"px","border-right":"px","border-right-width":"px","border-spacing":"px","border-top":"px","border-top-left-radius":"px","border-top-right-radius":"px","border-top-width":"px","border-width":"px","border-after-width":"px","border-before-width":"px","border-end-width":"px","border-horizontal-spacing":"px","border-start-width":"px","border-vertical-spacing":"px",bottom:"px","box-shadow":"px","column-gap":"px","column-rule":"px","column-rule-width":"px","column-width":"px","flex-basis":"px","font-size":"px","font-size-delta":"px",height:"px",left:"px","letter-spacing":"px","logical-height":"px","logical-width":"px",margin:"px","margin-after":"px","margin-before":"px","margin-bottom":"px","margin-left":"px","margin-right":"px","margin-top":"px","max-height":"px","max-width":"px","margin-end":"px","margin-start":"px","mask-position-x":"px","mask-position-y":"px","mask-size":"px","max-logical-height":"px","max-logical-width":"px","min-height":"px","min-width":"px","min-logical-height":"px","min-logical-width":"px",motion:"px","motion-offset":"px",outline:"px","outline-offset":"px","outline-width":"px",padding:"px","padding-bottom":"px","padding-left":"px","padding-right":"px","padding-top":"px","padding-after":"px","padding-before":"px","padding-end":"px","padding-start":"px","perspective-origin-x":"%","perspective-origin-y":"%",perspective:"px",right:"px","shape-margin":"px",size:"px","text-indent":"px","text-stroke":"px","text-stroke-width":"px",top:"px","transform-origin":"%","transform-origin-x":"%","transform-origin-y":"%","transform-origin-z":"%","transition-delay":"ms","transition-duration":"ms","vertical-align":"px",width:"px","word-spacing":"px","box-shadow-x":"px","box-shadow-y":"px","box-shadow-blur":"px","box-shadow-spread":"px","font-line-height":"px","text-shadow-x":"px","text-shadow-y":"px","text-shadow-blur":"px"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{onProcessRule:function(e){"keyframes"===e.type&&(e.key="@"+r.prefix.css+e.key.substr(1))},onProcessStyle:function(e,t){if("style"!==t.type)return e;for(var n in e){var a=e[n],i=!1,o=r.supportedProperty(n);o&&o!==n&&(i=!0);var s=!1,l=r.supportedValue(o,a);l&&l!==a&&(s=!0),(i||s)&&(i&&delete e[n],e[o||n]=l||a)}return e},onChangeValue:function(e,t){return r.supportedValue(t,e)}}};var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(210))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.supportedValue=t.supportedProperty=t.prefix=void 0;var r=o(n(75)),a=o(n(211)),i=o(n(213));function o(e){return e&&e.__esModule?e:{default:e}}t.default={prefix:r.default,supportedProperty:a.default,supportedValue:i.default},
/**
    * CSS Vendor prefix detection and property feature testing.
    *
    * @copyright Oleg Slobodskoi 2015
    * @website https://github.com/jsstyles/css-vendor
    * @license MIT
    */
t.prefix=r.default,t.supportedProperty=a.default,t.supportedValue=i.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!s)return e;if(null!=l[e])return l[e];(0,i.default)(e)in s.style?l[e]=e:a.default.js+(0,i.default)("-"+e)in s.style?l[e]=a.default.css+e:l[e]=!1;return l[e]};var r=o(n(59)),a=o(n(75)),i=o(n(212));function o(e){return e&&e.__esModule?e:{default:e}}var s=void 0,l={};if(r.default){s=document.createElement("p");var u=window.getComputedStyle(document.documentElement,"");for(var c in u)isNaN(c)||(l[u[c]]=u[c])}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.replace(r,a)};var r=/[-\s]+(.)?/g;function a(e,t){return t?t.toUpperCase():""}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(!s)return t;if("string"!=typeof t||!isNaN(parseInt(t,10)))return t;var n=e+t;if(null!=o[n])return o[n];try{s.style[e]=t}catch(e){return o[n]=!1,!1}""!==s.style[e]?o[n]=t:("-ms-flex"===(t=a.default.css+t)&&(t="-ms-flexbox"),s.style[e]=t,""!==s.style[e]&&(o[n]=t));o[n]||(o[n]=!1);return s.style[e]="",o[n]};var r=i(n(59)),a=i(n(75));function i(e){return e&&e.__esModule?e:{default:e}}var o={},s=void 0;r.default&&(s=document.createElement("p"))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){function e(e,t){return e.length-t.length}return{onProcessStyle:function(t,n){if("style"!==n.type)return t;var r={},a=Object.keys(t).sort(e);for(var i in a)r[a[i]]=t[a[i]];return r}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={set:function(e,t,n,r){var a=e.get(t);a||(a=new Map,e.set(t,a)),a.set(n,r)},get:function(e,t,n){var r=e.get(t);return r?r.get(n):void 0},delete:function(e,t,n){e.get(t).delete(n)}};t.default=r},function(e,t,n){"use strict";
/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var r=n(217);function a(e){return!0===r(e)&&"[object Object]"===Object.prototype.toString.call(e)}e.exports=function(e){var t,n;return!1!==a(e)&&("function"==typeof(t=e.constructor)&&(!1!==a(n=t.prototype)&&!1!==n.hasOwnProperty("isPrototypeOf")))}},function(e,t,n){"use strict";
/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */e.exports=function(e){return null!=e&&"object"==typeof e&&!1===Array.isArray(e)}},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r;return(0,i.default)({gutters:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.default)({paddingLeft:2*t.unit,paddingRight:2*t.unit},n,(0,a.default)({},e.up("sm"),(0,i.default)({paddingLeft:3*t.unit,paddingRight:3*t.unit},n[e.up("sm")])))},toolbar:(r={minHeight:56},(0,a.default)(r,"".concat(e.up("xs")," and (orientation: landscape)"),{minHeight:48}),(0,a.default)(r,e.up("sm"),{minHeight:64}),r)},n)};var a=r(n(10)),i=r(n(7))},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.primary,n=void 0===t?{light:s.default[300],main:s.default[500],dark:s.default[700]}:t,r=e.secondary,v=void 0===r?{light:l.default.A200,main:l.default.A400,dark:l.default.A700}:r,g=e.error,y=void 0===g?{light:c.default[300],main:c.default[500],dark:c.default[700]}:g,b=e.type,x=void 0===b?"light":b,_=e.contrastThreshold,w=void 0===_?3:_,T=e.tonalOffset,k=void 0===T?.2:T,C=(0,i.default)(e,["primary","secondary","error","type","contrastThreshold","tonalOffset"]);function E(e){var t=(0,d.getContrastRatio)(e,h.text.primary)>=w?h.text.primary:p.text.primary;return t}function M(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:700;return!e.main&&e[t]&&(e.main=e[t]),m(e,"light",n,k),m(e,"dark",r,k),e.contrastText||(e.contrastText=E(e.main)),e}M(n),M(v,"A400","A200","A700"),M(y);var A={dark:h,light:p};return(0,o.default)((0,a.default)({common:f.default,type:x,primary:n,secondary:v,error:y,grey:u.default,contrastThreshold:w,getContrastText:E,augmentColor:M,tonalOffset:k},A[x]),C,{clone:!1})},t.dark=t.light=void 0;var a=r(n(7)),i=r(n(8)),o=(r(n(11)),r(n(60))),s=r(n(220)),l=r(n(221)),u=r(n(222)),c=r(n(223)),f=r(n(224)),d=n(32),p={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",hint:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:f.default.white,default:u.default[50]},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.08)",hoverOpacity:.08,selected:"rgba(0, 0, 0, 0.14)",disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)"}};t.light=p;var h={text:{primary:f.default.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",hint:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:u.default[800],default:"#303030"},action:{active:f.default.white,hover:"rgba(255, 255, 255, 0.1)",hoverOpacity:.1,selected:"rgba(255, 255, 255, 0.2)",disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)"}};function m(e,t,n,r){e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=(0,d.lighten)(e.main,r):"dark"===t&&(e.dark=(0,d.darken)(e.main,1.5*r)))}t.dark=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",A100:"#8c9eff",A200:"#536dfe",A400:"#3d5afe",A700:"#304ffe"};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#d5d5d5",A200:"#aaaaaa",A400:"#303030",A700:"#616161"};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={black:"#000",white:"#fff"};t.default=r},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n="function"==typeof t?t(e):t,r=n.fontFamily,f=void 0===r?c:r,d=n.fontSize,p=void 0===d?14:d,h=n.fontWeightLight,m=void 0===h?300:h,v=n.fontWeightRegular,g=void 0===v?400:v,y=n.fontWeightMedium,b=void 0===y?500:y,x=n.htmlFontSize,_=void 0===x?16:x,w=n.useNextVariants,T=void 0===w?Boolean(s.default.__MUI_USE_NEXT_TYPOGRAPHY_VARIANTS__):w,k=(n.suppressWarning,n.allVariants),C=(0,i.default)(n,["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","htmlFontSize","useNextVariants","suppressWarning","allVariants"]);var E=p/14,M=function(e){return"".concat(e/_*E,"rem")},A=function(t,n,r,i,o){return(0,a.default)({color:e.text.primary,fontFamily:f,fontWeight:t,fontSize:M(n),lineHeight:r},f===c?{letterSpacing:"".concat(l(i/n),"em")}:{},o,k)},S={h1:A(m,96,1,-1.5),h2:A(m,60,1,-.5),h3:A(g,48,1.04,0),h4:A(g,34,1.17,.25),h5:A(g,24,1.33,0),h6:A(b,20,1.6,.15),subtitle1:A(g,16,1.75,.15),subtitle2:A(b,14,1.57,.1),body1Next:A(g,16,1.5,.15),body2Next:A(g,14,1.5,.15),buttonNext:A(b,14,1.5,.4,u),captionNext:A(g,12,1.66,.4),overline:A(g,12,2.66,1,u)},O={display4:(0,a.default)({fontSize:M(112),fontWeight:m,fontFamily:f,letterSpacing:"-.04em",lineHeight:"".concat(l(128/112),"em"),marginLeft:"-.04em",color:e.text.secondary},k),display3:(0,a.default)({fontSize:M(56),fontWeight:g,fontFamily:f,letterSpacing:"-.02em",lineHeight:"".concat(l(73/56),"em"),marginLeft:"-.02em",color:e.text.secondary},k),display2:(0,a.default)({fontSize:M(45),fontWeight:g,fontFamily:f,lineHeight:"".concat(l(51/45),"em"),marginLeft:"-.02em",color:e.text.secondary},k),display1:(0,a.default)({fontSize:M(34),fontWeight:g,fontFamily:f,lineHeight:"".concat(l(41/34),"em"),color:e.text.secondary},k),headline:(0,a.default)({fontSize:M(24),fontWeight:g,fontFamily:f,lineHeight:"".concat(l(32.5/24),"em"),color:e.text.primary},k),title:(0,a.default)({fontSize:M(21),fontWeight:b,fontFamily:f,lineHeight:"".concat(l(24.5/21),"em"),color:e.text.primary},k),subheading:(0,a.default)({fontSize:M(16),fontWeight:g,fontFamily:f,lineHeight:"".concat(l(1.5),"em"),color:e.text.primary},k),body2:(0,a.default)({fontSize:M(14),fontWeight:b,fontFamily:f,lineHeight:"".concat(l(24/14),"em"),color:e.text.primary},k),body1:(0,a.default)({fontSize:M(14),fontWeight:g,fontFamily:f,lineHeight:"".concat(l(20.5/14),"em"),color:e.text.primary},k),caption:(0,a.default)({fontSize:M(12),fontWeight:g,fontFamily:f,lineHeight:"".concat(l(1.375),"em"),color:e.text.secondary},k),button:(0,a.default)({fontSize:M(14),textTransform:"uppercase",fontWeight:b,fontFamily:f,color:e.text.primary},k)};return(0,o.default)((0,a.default)({pxToRem:M,round:l,fontFamily:f,fontSize:p,fontWeightLight:m,fontWeightRegular:g,fontWeightMedium:b},O,S,T?{body1:S.body1Next,body2:S.body2Next,button:S.buttonNext,caption:S.captionNext}:{},{useNextVariants:T}),C,{clone:!1})};var a=r(n(7)),i=r(n(8)),o=r(n(60)),s=(r(n(11)),r(n(226)));function l(e){return Math.round(1e5*e)/1e5}var u={textTransform:"uppercase"},c='"Roboto", "Helvetica", "Arial", sans-serif'},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=.2,a=.14,i=.12;function o(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0, 0, 0, ").concat(r,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0, 0, 0, ").concat(a,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0, 0, 0, ").concat(i,")")].join(",")}var s=["none",o(0,1,3,0,0,1,1,0,0,2,1,-1),o(0,1,5,0,0,2,2,0,0,3,1,-2),o(0,1,8,0,0,3,4,0,0,3,3,-2),o(0,2,4,-1,0,4,5,0,0,1,10,0),o(0,3,5,-1,0,5,8,0,0,1,14,0),o(0,3,5,-1,0,6,10,0,0,1,18,0),o(0,4,5,-2,0,7,10,1,0,2,16,1),o(0,5,5,-3,0,8,10,1,0,3,14,2),o(0,5,6,-3,0,9,12,1,0,3,16,2),o(0,6,6,-3,0,10,14,1,0,4,18,3),o(0,6,7,-4,0,11,15,1,0,4,20,3),o(0,7,8,-4,0,12,17,2,0,5,22,4),o(0,7,8,-4,0,13,19,2,0,5,24,4),o(0,7,9,-4,0,14,21,2,0,5,26,4),o(0,8,9,-5,0,15,22,2,0,6,28,5),o(0,8,10,-5,0,16,24,2,0,6,30,5),o(0,8,11,-5,0,17,26,2,0,6,32,5),o(0,9,11,-5,0,18,28,2,0,7,34,6),o(0,9,12,-6,0,19,29,2,0,7,36,6),o(0,10,13,-6,0,20,31,3,0,8,38,7),o(0,10,13,-6,0,21,33,3,0,8,40,7),o(0,10,14,-6,0,22,35,3,0,8,42,7),o(0,11,14,-7,0,23,36,3,0,9,44,8),o(0,11,15,-7,0,24,38,3,0,9,46,8)];t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={borderRadius:4};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={unit:8};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={mobileStepper:1e3,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};t.default=r},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(7)),i=(r(n(55)),r(n(11)),r(n(60)));function o(e,t){return t}var s=function(e){var t="function"==typeof e;return{create:function(n,r){var s=t?e(n):e;if(!r||!n.overrides||!n.overrides[r])return s;var l=n.overrides[r],u=(0,a.default)({},s);return Object.keys(l).forEach(function(e){u[e]=(0,i.default)(u[e],l[e],{arrayMerge:o})}),u},options:{},themingEnabled:t}};t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){var t=e.theme,n=e.name,r=e.props;if(!t.props||!n||!t.props[n])return r;var a,i=t.props[n];for(a in i)void 0===r[a]&&(r[a]=i[a]);return r};t.default=r},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var a=r(n(7)),i=r(n(10)),o=r(n(8)),s=r(n(0)),l=(r(n(2)),r(n(5))),u=r(n(9)),c=r(n(62)),f=n(50),d=r(n(247)),p=function(e){return{root:{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",paddingTop:11,paddingBottom:11,"&$selected, &$selected:hover":{backgroundColor:e.palette.action.selected}},container:{position:"relative"},focusVisible:{backgroundColor:e.palette.action.hover},default:{},dense:{paddingTop:8,paddingBottom:8},disabled:{opacity:.5},divider:{borderBottom:"1px solid ".concat(e.palette.divider),backgroundClip:"padding-box"},gutters:e.mixins.gutters(),button:{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:e.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}},secondaryAction:{paddingRight:32},selected:{}}};function h(e){var t=e.button,n=e.children,r=e.classes,u=e.className,p=e.component,h=e.ContainerComponent,m=e.ContainerProps,v=(m=void 0===m?{}:m).className,g=(0,o.default)(m,["className"]),y=e.dense,b=e.disabled,x=e.disableGutters,_=e.divider,w=e.focusVisibleClassName,T=e.selected,k=(0,o.default)(e,["button","children","classes","className","component","ContainerComponent","ContainerProps","dense","disabled","disableGutters","divider","focusVisibleClassName","selected"]);return s.default.createElement(d.default,{dense:y},function(e){var o,d=e.dense,m=s.default.Children.toArray(n),y=m.some(function(e){return(0,f.isMuiElement)(e,["ListItemAvatar"])}),C=m.length&&(0,f.isMuiElement)(m[m.length-1],["ListItemSecondaryAction"]),E=(0,l.default)(r.root,r.default,(o={},(0,i.default)(o,r.dense,d||y),(0,i.default)(o,r.gutters,!x),(0,i.default)(o,r.divider,_),(0,i.default)(o,r.disabled,b),(0,i.default)(o,r.button,t),(0,i.default)(o,r.secondaryAction,C),(0,i.default)(o,r.selected,T),o),u),M=(0,a.default)({className:E,disabled:b},k),A=p||"li";return t&&(M.component=p||"div",M.focusVisibleClassName=(0,l.default)(r.focusVisible,w),A=c.default),C?(A=M.component||p?A:"div","li"===h&&("li"===A?A="div":"li"===M.component&&(M.component="div")),s.default.createElement(h,(0,a.default)({className:(0,l.default)(r.container,v)},g),s.default.createElement(A,M,m),m.pop())):s.default.createElement(A,M,m)})}t.styles=p,h.propTypes={},h.defaultProps={button:!1,ContainerComponent:"li",dense:!1,disabled:!1,disableGutters:!1,divider:!1,selected:!1};var m=(0,u.default)(p,{name:"MuiListItem"})(h);t.default=m},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var a=r(n(7)),i=r(n(10)),o=r(n(8)),s=r(n(12)),l=r(n(13)),u=r(n(14)),c=r(n(15)),f=r(n(16)),d=r(n(46)),p=r(n(0)),h=(r(n(2)),r(n(17))),m=r(n(5)),v=r(n(40)),g=r(n(63)),y=r(n(9)),b=r(n(235)),x=n(237),_=r(n(238)),w=r(n(246)),T={root:{display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:"none",border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle","-moz-appearance":"none","-webkit-appearance":"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},"&$disabled":{pointerEvents:"none",cursor:"default"}},disabled:{},focusVisible:{}};t.styles=T;var k=function(e){function t(){var e,n;(0,s.default)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=(0,u.default)(this,(e=(0,c.default)(t)).call.apply(e,[this].concat(a)))).state={},n.keyDown=!1,n.focusVisibleCheckTime=50,n.focusVisibleMaxCheckTimes=5,n.handleMouseDown=(0,w.default)((0,d.default)((0,d.default)(n)),"MouseDown","start",function(){clearTimeout(n.focusVisibleTimeout),n.state.focusVisible&&n.setState({focusVisible:!1})}),n.handleMouseUp=(0,w.default)((0,d.default)((0,d.default)(n)),"MouseUp","stop"),n.handleMouseLeave=(0,w.default)((0,d.default)((0,d.default)(n)),"MouseLeave","stop",function(e){n.state.focusVisible&&e.preventDefault()}),n.handleTouchStart=(0,w.default)((0,d.default)((0,d.default)(n)),"TouchStart","start"),n.handleTouchEnd=(0,w.default)((0,d.default)((0,d.default)(n)),"TouchEnd","stop"),n.handleTouchMove=(0,w.default)((0,d.default)((0,d.default)(n)),"TouchMove","stop"),n.handleBlur=(0,w.default)((0,d.default)((0,d.default)(n)),"Blur","stop",function(){clearTimeout(n.focusVisibleTimeout),n.state.focusVisible&&n.setState({focusVisible:!1})}),n.onRippleRef=function(e){n.ripple=e},n.onFocusVisibleHandler=function(e){n.keyDown=!1,n.setState({focusVisible:!0}),n.props.onFocusVisible&&n.props.onFocusVisible(e)},n.handleKeyDown=function(e){var t=n.props,r=t.component,a=t.focusRipple,i=t.onKeyDown,o=t.onClick,s=(0,v.default)(e);a&&!n.keyDown&&n.state.focusVisible&&n.ripple&&"space"===s&&(n.keyDown=!0,e.persist(),n.ripple.stop(e,function(){n.ripple.start(e)})),i&&i(e),e.target!==e.currentTarget||!r||"button"===r||"space"!==s&&"enter"!==s||"A"===n.button.tagName&&n.button.href||(e.preventDefault(),o&&o(e))},n.handleKeyUp=function(e){n.props.focusRipple&&"space"===(0,v.default)(e)&&n.ripple&&n.state.focusVisible&&(n.keyDown=!1,e.persist(),n.ripple.stop(e,function(){n.ripple.pulsate(e)})),n.props.onKeyUp&&n.props.onKeyUp(e)},n.handleFocus=function(e){n.props.disabled||(n.button||(n.button=e.currentTarget),e.persist(),(0,x.detectFocusVisible)((0,d.default)((0,d.default)(n)),n.button,function(){n.onFocusVisibleHandler(e)}),n.props.onFocus&&n.props.onFocus(e))},n}return(0,f.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){var e=this;this.button=h.default.findDOMNode(this),(0,x.listenForFocusKeys)((0,g.default)(this.button)),this.props.action&&this.props.action({focusVisible:function(){e.setState({focusVisible:!0}),e.button.focus()}})}},{key:"componentDidUpdate",value:function(e,t){this.props.focusRipple&&!this.props.disableRipple&&!t.focusVisible&&this.state.focusVisible&&this.ripple.pulsate()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.focusVisibleTimeout)}},{key:"render",value:function(){var e,t=this.props,n=(t.action,t.buttonRef),r=t.centerRipple,s=t.children,l=t.classes,u=t.className,c=t.component,f=t.disabled,d=t.disableRipple,h=(t.disableTouchRipple,t.focusRipple,t.focusVisibleClassName),v=(t.onBlur,t.onFocus,t.onFocusVisible,t.onKeyDown,t.onKeyUp,t.onMouseDown,t.onMouseLeave,t.onMouseUp,t.onTouchEnd,t.onTouchMove,t.onTouchStart,t.tabIndex),g=t.TouchRippleProps,y=t.type,x=(0,o.default)(t,["action","buttonRef","centerRipple","children","classes","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","onBlur","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","type"]),w=(0,m.default)(l.root,(e={},(0,i.default)(e,l.disabled,f),(0,i.default)(e,l.focusVisible,this.state.focusVisible),(0,i.default)(e,h,this.state.focusVisible),e),u),T=c;"button"===T&&x.href&&(T="a");var k={};return"button"===T?(k.type=y||"button",k.disabled=f):k.role="button",p.default.createElement(T,(0,a.default)({className:w,onBlur:this.handleBlur,onFocus:this.handleFocus,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,onMouseDown:this.handleMouseDown,onMouseLeave:this.handleMouseLeave,onMouseUp:this.handleMouseUp,onTouchEnd:this.handleTouchEnd,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,ref:n,tabIndex:f?"-1":v},k,x),s,d||f?null:p.default.createElement(b.default,null,p.default.createElement(_.default,(0,a.default)({innerRef:this.onRippleRef,center:r},g))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return void 0===t.focusVisible?{focusVisible:!1,lastDisabled:e.disabled}:!t.prevState&&e.disabled&&t.focusVisible?{focusVisible:!1,lastDisabled:e.disabled}:{lastDisabled:e.disabled}}}]),t}(p.default.Component);k.propTypes={},k.defaultProps={centerRipple:!1,component:"button",disableRipple:!1,disableTouchRipple:!1,focusRipple:!1,tabIndex:"0",type:"button"};var C=(0,y.default)(T,{name:"MuiButtonBase"})(k);t.default=C},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.default}});var a=r(n(236))},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(12)),i=r(n(13)),o=r(n(14)),s=r(n(15)),l=r(n(16)),u=r(n(0)),c=(r(n(2)),r(n(49)),function(e){function t(){var e,n;(0,a.default)(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(n=(0,o.default)(this,(e=(0,s.default)(t)).call.apply(e,[this].concat(i)))).mounted=!1,n.state={mounted:!1},n}return(0,l.default)(t,e),(0,i.default)(t,[{key:"componentDidMount",value:function(){var e=this;this.mounted=!0,this.props.defer?requestAnimationFrame(function(){requestAnimationFrame(function(){e.mounted&&e.setState({mounted:!0})})}):this.setState({mounted:!0})}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.fallback;return this.state.mounted?t:n}}]),t}(u.default.Component));c.propTypes={},c.propTypes={},c.defaultProps={defer:!1,fallback:null};var f=c;t.default=f},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.detectFocusVisible=function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;t.focusVisibleTimeout=setTimeout(function(){var s=(0,i.default)(n),l=function(e){var t=e.activeElement;for(;t&&t.shadowRoot&&t.shadowRoot.activeElement;)t=t.shadowRoot.activeElement;return t}(s);o.focusKeyPressed&&(l===n||n.contains(l))?r():a<t.focusVisibleMaxCheckTimes&&e(t,n,r,a+1)},t.focusVisibleCheckTime)},t.listenForFocusKeys=function(e){e.addEventListener("keyup",l)};var a=r(n(40)),i=(r(n(11)),r(n(36))),o={focusKeyPressed:!1,keyUpEventTimeout:-1};var s=["tab","enter","space","esc","up","down","left","right"];var l=function(e){(function(e){return s.indexOf((0,a.default)(e))>-1})(e)&&(o.focusKeyPressed=!0,clearTimeout(o.keyUpEventTimeout),o.keyUpEventTimeout=setTimeout(function(){o.focusKeyPressed=!1},1e3))}},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=t.DELAY_RIPPLE=void 0;var a=r(n(7)),i=r(n(8)),o=r(n(103)),s=r(n(12)),l=r(n(13)),u=r(n(14)),c=r(n(15)),f=r(n(16)),d=r(n(46)),p=r(n(0)),h=(r(n(2)),r(n(17))),m=r(n(242)),v=r(n(5)),g=r(n(9)),y=r(n(244)),b=550,x=80;t.DELAY_RIPPLE=x;var _=function(e){return{root:{display:"block",position:"absolute",overflow:"hidden",borderRadius:"inherit",width:"100%",height:"100%",left:0,top:0,pointerEvents:"none",zIndex:0},ripple:{width:50,height:50,left:0,top:0,opacity:0,position:"absolute"},rippleVisible:{opacity:.3,transform:"scale(1)",animation:"mui-ripple-enter ".concat(b,"ms ").concat(e.transitions.easing.easeInOut)},ripplePulsate:{animationDuration:"".concat(e.transitions.duration.shorter,"ms")},child:{opacity:1,display:"block",width:"100%",height:"100%",borderRadius:"50%",backgroundColor:"currentColor"},childLeaving:{opacity:0,animation:"mui-ripple-exit ".concat(b,"ms ").concat(e.transitions.easing.easeInOut)},childPulsate:{position:"absolute",left:0,top:0,animation:"mui-ripple-pulsate 2500ms ".concat(e.transitions.easing.easeInOut," 200ms infinite")},"@keyframes mui-ripple-enter":{"0%":{transform:"scale(0)",opacity:.1},"100%":{transform:"scale(1)",opacity:.3}},"@keyframes mui-ripple-exit":{"0%":{opacity:1},"100%":{opacity:0}},"@keyframes mui-ripple-pulsate":{"0%":{transform:"scale(1)"},"50%":{transform:"scale(0.92)"},"100%":{transform:"scale(1)"}}}};t.styles=_;var w=function(e){function t(){var e,n;(0,s.default)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=(0,u.default)(this,(e=(0,c.default)(t)).call.apply(e,[this].concat(a)))).state={nextKey:0,ripples:[]},n.pulsate=function(){n.start({},{pulsate:!0})},n.start=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,a=t.pulsate,i=void 0!==a&&a,o=t.center,s=void 0===o?n.props.center||t.pulsate:o,l=t.fakeElement,u=void 0!==l&&l;if("mousedown"===e.type&&n.ignoringMouseDown)n.ignoringMouseDown=!1;else{"touchstart"===e.type&&(n.ignoringMouseDown=!0);var c,f,p,m=u?null:h.default.findDOMNode((0,d.default)((0,d.default)(n))),v=m?m.getBoundingClientRect():{width:0,height:0,left:0,top:0};if(s||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)c=Math.round(v.width/2),f=Math.round(v.height/2);else{var g=e.clientX?e.clientX:e.touches[0].clientX,y=e.clientY?e.clientY:e.touches[0].clientY;c=Math.round(g-v.left),f=Math.round(y-v.top)}if(s)(p=Math.sqrt((2*Math.pow(v.width,2)+Math.pow(v.height,2))/3))%2==0&&(p+=1);else{var b=2*Math.max(Math.abs((m?m.clientWidth:0)-c),c)+2,_=2*Math.max(Math.abs((m?m.clientHeight:0)-f),f)+2;p=Math.sqrt(Math.pow(b,2)+Math.pow(_,2))}e.touches?(n.startTimerCommit=function(){n.startCommit({pulsate:i,rippleX:c,rippleY:f,rippleSize:p,cb:r})},n.startTimer=setTimeout(function(){n.startTimerCommit&&(n.startTimerCommit(),n.startTimerCommit=null)},x)):n.startCommit({pulsate:i,rippleX:c,rippleY:f,rippleSize:p,cb:r})}},n.startCommit=function(e){var t=e.pulsate,r=e.rippleX,a=e.rippleY,i=e.rippleSize,s=e.cb;n.setState(function(e){return{nextKey:e.nextKey+1,ripples:(0,o.default)(e.ripples).concat([p.default.createElement(y.default,{key:e.nextKey,classes:n.props.classes,timeout:{exit:b,enter:b},pulsate:t,rippleX:r,rippleY:a,rippleSize:i})])}},s)},n.stop=function(e,t){clearTimeout(n.startTimer);var r=n.state.ripples;if("touchend"===e.type&&n.startTimerCommit)return e.persist(),n.startTimerCommit(),n.startTimerCommit=null,void(n.startTimer=setTimeout(function(){n.stop(e,t)},0));n.startTimerCommit=null,r&&r.length&&n.setState({ripples:r.slice(1)},t)},n}return(0,f.default)(t,e),(0,l.default)(t,[{key:"componentWillUnmount",value:function(){clearTimeout(this.startTimer)}},{key:"render",value:function(){var e=this.props,t=(e.center,e.classes),n=e.className,r=(0,i.default)(e,["center","classes","className"]);return p.default.createElement(m.default,(0,a.default)({component:"span",enter:!0,exit:!0,className:(0,v.default)(t.root,n)},r),this.state.ripples)}}]),t}(p.default.PureComponent);w.propTypes={},w.defaultProps={center:!1};var T=(0,g.default)(_,{flip:!1,name:"MuiTouchRipple"})(w);t.default=T},function(e,t){e.exports=function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}},function(e,t){e.exports=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=s(n(2)),a=s(n(0)),i=n(104),o=n(243);function s(e){return e&&e.__esModule?e:{default:e}}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var c=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},f=function(e){function t(t,n){var r,a=(r=e.call(this,t,n)||this).handleExited.bind(u(u(r)));return r.state={handleExited:a,firstRender:!0},r}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e);var n=t.prototype;return n.getChildContext=function(){return{transitionGroup:{isMounting:!this.appeared}}},n.componentDidMount=function(){this.appeared=!0},t.getDerivedStateFromProps=function(e,t){var n=t.children,r=t.handleExited;return{children:t.firstRender?(0,o.getInitialChildMapping)(e,r):(0,o.getNextChildMapping)(e,n,r),firstRender:!1}},n.handleExited=function(e,t){var n=(0,o.getChildMapping)(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.setState(function(t){var n=l({},t.children);return delete n[e.key],{children:n}}))},n.render=function(){var e=this.props,t=e.component,n=e.childFactory,r=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["component","childFactory"]),i=c(this.state.children).map(n);return delete r.appear,delete r.enter,delete r.exit,null===t?i:a.default.createElement(t,r,i)},t}(a.default.Component);f.childContextTypes={transitionGroup:r.default.object.isRequired},f.propTypes={},f.defaultProps={component:"div",childFactory:function(e){return e}};var d=(0,i.polyfill)(f);t.default=d,e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.getChildMapping=a,t.mergeChildMappings=i,t.getInitialChildMapping=function(e,t){return a(e.children,function(n){return(0,r.cloneElement)(n,{onExited:t.bind(null,n),in:!0,appear:o(n,"appear",e),enter:o(n,"enter",e),exit:o(n,"exit",e)})})},t.getNextChildMapping=function(e,t,n){var s=a(e.children),l=i(t,s);return Object.keys(l).forEach(function(a){var i=l[a];if((0,r.isValidElement)(i)){var u=a in t,c=a in s,f=t[a],d=(0,r.isValidElement)(f)&&!f.props.in;!c||u&&!d?c||!u||d?c&&u&&(0,r.isValidElement)(f)&&(l[a]=(0,r.cloneElement)(i,{onExited:n.bind(null,i),in:f.props.in,exit:o(i,"exit",e),enter:o(i,"enter",e)})):l[a]=(0,r.cloneElement)(i,{in:!1}):l[a]=(0,r.cloneElement)(i,{onExited:n.bind(null,i),in:!0,exit:o(i,"exit",e),enter:o(i,"enter",e)})}}),l};var r=n(0);function a(e,t){var n=Object.create(null);return e&&r.Children.map(e,function(e){return e}).forEach(function(e){n[e.key]=function(e){return t&&(0,r.isValidElement)(e)?t(e):e}(e)}),n}function i(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,a=Object.create(null),i=[];for(var o in e)o in t?i.length&&(a[o]=i,i=[]):i.push(o);var s={};for(var l in t){if(a[l])for(r=0;r<a[l].length;r++){var u=a[l][r];s[a[l][r]]=n(u)}s[l]=n(l)}for(r=0;r<i.length;r++)s[i[r]]=n(i[r]);return s}function o(e,t,n){return null!=n[t]?n[t]:e.props[t]}},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(7)),i=r(n(10)),o=r(n(8)),s=r(n(12)),l=r(n(13)),u=r(n(14)),c=r(n(15)),f=r(n(16)),d=r(n(0)),p=(r(n(2)),r(n(5))),h=r(n(64)),m=function(e){function t(){var e,n;(0,s.default)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=(0,u.default)(this,(e=(0,c.default)(t)).call.apply(e,[this].concat(a)))).state={visible:!1,leaving:!1},n.handleEnter=function(){n.setState({visible:!0})},n.handleExit=function(){n.setState({leaving:!0})},n}return(0,f.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e,t,n=this.props,r=n.classes,s=n.className,l=n.pulsate,u=n.rippleX,c=n.rippleY,f=n.rippleSize,m=(0,o.default)(n,["classes","className","pulsate","rippleX","rippleY","rippleSize"]),v=this.state,g=v.visible,y=v.leaving,b=(0,p.default)(r.ripple,(e={},(0,i.default)(e,r.rippleVisible,g),(0,i.default)(e,r.ripplePulsate,l),e),s),x={width:f,height:f,top:-f/2+c,left:-f/2+u},_=(0,p.default)(r.child,(t={},(0,i.default)(t,r.childLeaving,y),(0,i.default)(t,r.childPulsate,l),t));return d.default.createElement(h.default,(0,a.default)({onEnter:this.handleEnter,onExit:this.handleExit},m),d.default.createElement("span",{className:b,style:x},d.default.createElement("span",{className:_})))}}]),t}(d.default.Component);m.propTypes={},m.defaultProps={pulsate:!1};var v=m;t.default=v},function(e,t,n){"use strict";t.__esModule=!0,t.transitionTimeout=function(e){var t="transition"+e+"Timeout",n="transition"+e;return function(e){if(e[n]){if(null==e[t])return new Error(t+" wasn't supplied to CSSTransitionGroup: this can cause unreliable animations and won't be supported in a future version of React. See https://fb.me/react-animation-transition-group-timeout for more information.");if("number"!=typeof e[t])return new Error(t+" must be a number (in milliseconds)")}return null}},t.classNamesShape=t.timeoutsShape=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(2));var a=r.default.oneOfType([r.default.number,r.default.shape({enter:r.default.number,exit:r.default.number}).isRequired]);t.timeoutsShape=a;var i=r.default.oneOfType([r.default.string,r.default.shape({enter:r.default.string,exit:r.default.string,active:r.default.string}),r.default.shape({enter:r.default.string,enterDone:r.default.string,enterActive:r.default.string,exit:r.default.string,exitDone:r.default.string,exitActive:r.default.string})]);t.classNamesShape=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t,n,r){return function(a){r&&r.call(e,a);var i=!1;return a.defaultPrevented&&(i=!0),e.props.disableTouchRipple&&"Blur"!==t&&(i=!0),!i&&e.ripple&&e.ripple[n](a),"function"==typeof e.props["on".concat(t)]&&e.props["on".concat(t)](a),!0}};"undefined"==typeof window&&(r=function(){return function(){}});var a=r;t.default=a},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(0)),i=(r(n(2)),r(n(79)));function o(e){var t=e.children,n=e.dense;return a.default.createElement(i.default.Consumer,null,function(e){var r={dense:n||e.dense||!1};return a.default.createElement(i.default.Provider,{value:r},t(r))})}o.propTypes={};var s=o;t.default=s},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var a=r(n(7)),i=r(n(10)),o=r(n(8)),s=r(n(0)),l=(r(n(2)),r(n(5))),u=r(n(9)),c=r(n(22)),f=r(n(79)),d=function(e){return{root:{flex:"1 1 auto",minWidth:0,padding:"0 16px","&:first-child":{paddingLeft:0}},inset:{"&:first-child":{paddingLeft:56}},dense:{fontSize:e.typography.pxToRem(13)},primary:{"&$textDense":{fontSize:"inherit"}},secondary:{"&$textDense":{fontSize:"inherit"}},textDense:{}}};function p(e){var t=e.children,n=e.classes,r=e.className,u=e.disableTypography,d=e.inset,p=e.primary,h=e.primaryTypographyProps,m=e.secondary,v=e.secondaryTypographyProps,g=(0,o.default)(e,["children","classes","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"]);return s.default.createElement(f.default.Consumer,null,function(e){var o,f=e.dense,y=null!=p?p:t;null==y||y.type===c.default||u||(y=s.default.createElement(c.default,(0,a.default)({variant:"subheading",internalDeprecatedVariant:!0,className:(0,l.default)(n.primary,(0,i.default)({},n.textDense,f)),component:"span"},h),y));var b=m;return null==b||b.type===c.default||u||(b=s.default.createElement(c.default,(0,a.default)({className:(0,l.default)(n.secondary,(0,i.default)({},n.textDense,f)),color:"textSecondary"},v),b)),s.default.createElement("div",(0,a.default)({className:(0,l.default)(n.root,(o={},(0,i.default)(o,n.dense,f),(0,i.default)(o,n.inset,d),o),r)},g),y,b)})}t.styles=d,p.propTypes={},p.defaultProps={disableTypography:!1,inset:!1};var h=(0,u.default)(d,{name:"MuiListItemText"})(p);t.default=h},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(12)),i=r(n(13)),o=r(n(14)),s=r(n(15)),l=r(n(16)),u=r(n(0)),c=(r(n(2)),n(6)),f=(r(n(49)),function(e){function t(){return(0,a.default)(this,t),(0,o.default)(this,(0,s.default)(t).apply(this,arguments))}return(0,l.default)(t,e),(0,i.default)(t,[{key:"render",value:function(){return this.props.children}}]),t}(u.default.Component));f.propTypes={},f.propTypes={},f.defaultProps={children:null};var d=(0,c.withStyles)(function(e){return{"@global":{html:{WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box"},"*, *::before, *::after":{boxSizing:"inherit"},body:{margin:0,backgroundColor:e.palette.background.default,"@media print":{backgroundColor:e.palette.common.white}}}}},{name:"MuiCssBaseline"})(f);t.default=d},function(e,t,n){"use strict";var r=n(251),a=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(7)),o=a(n(10)),s=a(n(12)),l=a(n(13)),u=a(n(14)),c=a(n(15)),f=a(n(16)),d=a(n(0)),p=a(n(2)),h=(a(n(11)),a(n(252))),m=r(n(77)),v=(a(n(49)),function(e){function t(e,n){var r;return(0,s.default)(this,t),(r=(0,u.default)(this,(0,c.default)(t).call(this))).broadcast=(0,h.default)(),r.outerTheme=m.default.initial(n),r.broadcast.setState(r.mergeOuterLocalTheme(e.theme)),r}return(0,f.default)(t,e),(0,l.default)(t,[{key:"getChildContext",value:function(){var e,t=this.props,n=t.disableStylesGeneration,r=t.sheetsCache,a=t.sheetsManager,i=this.context.muiThemeProviderOptions||{};return void 0!==n&&(i.disableStylesGeneration=n),void 0!==r&&(i.sheetsCache=r),void 0!==a&&(i.sheetsManager=a),e={},(0,o.default)(e,m.CHANNEL,this.broadcast),(0,o.default)(e,"muiThemeProviderOptions",i),e}},{key:"componentDidMount",value:function(){var e=this;this.unsubscribeId=m.default.subscribe(this.context,function(t){e.outerTheme=t,e.broadcast.setState(e.mergeOuterLocalTheme(e.props.theme))})}},{key:"componentDidUpdate",value:function(e){this.props.theme!==e.theme&&this.broadcast.setState(this.mergeOuterLocalTheme(this.props.theme))}},{key:"componentWillUnmount",value:function(){null!==this.unsubscribeId&&m.default.unsubscribe(this.context,this.unsubscribeId)}},{key:"mergeOuterLocalTheme",value:function(e){return"function"==typeof e?e(this.outerTheme):this.outerTheme?(0,i.default)({},this.outerTheme,e):e}},{key:"render",value:function(){return this.props.children}}]),t}(d.default.Component));v.propTypes={},v.propTypes={},v.childContextTypes=(0,i.default)({},m.default.contextTypes,{muiThemeProviderOptions:p.default.object}),v.contextTypes=(0,i.default)({},m.default.contextTypes,{muiThemeProviderOptions:p.default.object});var g=v;t.default=g},function(e,t){e.exports=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}},function(e,t,n){"use strict";n.r(t),t.default=function(e){var t={},n=1,r=e;return{getState:function(){return r},setState:function(e){r=e;for(var n=Object.keys(t),a=0,i=n.length;a<i;a++)t[n[a]]&&t[n[a]](e)},subscribe:function(e){if("function"!=typeof e)throw new Error("listener must be a function.");var r=n;return t[r]=e,n+=1,r},unsubscribe:function(e){t[e]=void 0}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e}},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var a=r(n(7)),i=r(n(10)),o=r(n(8)),s=r(n(0)),l=(r(n(2)),r(n(5))),u=r(n(9)),c=n(29),f=r(n(65)),d=function(e){var t="light"===e.palette.type?e.palette.grey[100]:e.palette.grey[900];return{root:{display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",zIndex:e.zIndex.appBar,flexShrink:0},positionFixed:{position:"fixed",top:0,left:"auto",right:0},positionAbsolute:{position:"absolute",top:0,left:"auto",right:0},positionSticky:{position:"sticky",top:0,left:"auto",right:0},positionStatic:{position:"static"},positionRelative:{position:"relative"},colorDefault:{backgroundColor:t,color:e.palette.getContrastText(t)},colorPrimary:{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText},colorSecondary:{backgroundColor:e.palette.secondary.main,color:e.palette.secondary.contrastText}}};function p(e){var t,n=e.children,r=e.classes,u=e.className,d=e.color,p=e.position,h=(0,o.default)(e,["children","classes","className","color","position"]),m=(0,l.default)(r.root,r["position".concat((0,c.capitalize)(p))],(t={},(0,i.default)(t,r["color".concat((0,c.capitalize)(d))],"inherit"!==d),(0,i.default)(t,"mui-fixed","fixed"===p),t),u);return s.default.createElement(f.default,(0,a.default)({square:!0,component:"header",elevation:4,className:m},h),n)}t.styles=d,p.propTypes={},p.defaultProps={color:"primary",position:"fixed"};var h=(0,u.default)(d,{name:"MuiAppBar"})(p);t.default=h},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var a=r(n(10)),i=r(n(8)),o=r(n(7)),s=r(n(0)),l=(r(n(2)),r(n(5))),u=(r(n(11)),r(n(9))),c=function(e){var t={};return e.shadows.forEach(function(e,n){t["elevation".concat(n)]={boxShadow:e}}),(0,o.default)({root:{backgroundColor:e.palette.background.paper},rounded:{borderRadius:e.shape.borderRadius}},t)};function f(e){var t=e.classes,n=e.className,r=e.component,u=e.square,c=e.elevation,f=(0,i.default)(e,["classes","className","component","square","elevation"]),d=(0,l.default)(t.root,t["elevation".concat(c)],(0,a.default)({},t.rounded,!u),n);return s.default.createElement(r,(0,o.default)({className:d},f))}t.styles=c,f.propTypes={},f.defaultProps={component:"div",elevation:2,square:!1};var d=(0,u.default)(c,{name:"MuiPaper"})(f);t.default=d},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var a=r(n(7)),i=r(n(10)),o=r(n(8)),s=r(n(0)),l=(r(n(2)),r(n(5))),u=r(n(9)),c=function(e){return{root:{position:"relative",display:"flex",alignItems:"center"},gutters:e.mixins.gutters(),regular:e.mixins.toolbar,dense:{minHeight:48}}};function f(e){var t=e.children,n=e.classes,r=e.className,u=e.disableGutters,c=e.variant,f=(0,o.default)(e,["children","classes","className","disableGutters","variant"]),d=(0,l.default)(n.root,n[c],(0,i.default)({},n.gutters,!u),r);return s.default.createElement("div",(0,a.default)({className:d},f),t)}t.styles=c,f.propTypes={},f.defaultProps={disableGutters:!1,variant:"regular"};var d=(0,u.default)(c,{name:"MuiToolbar"})(f);t.default=d},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var a=r(n(7)),i=r(n(10)),o=r(n(8)),s=r(n(0)),l=(r(n(2)),r(n(5))),u=r(n(9)),c=n(32),f=r(n(62)),d=n(29),p=function(e){return{root:{textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:12,borderRadius:"50%",overflow:"visible",color:e.palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{backgroundColor:(0,c.fade)(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"},"&$disabled":{backgroundColor:"transparent"}},"&$disabled":{color:e.palette.action.disabled}},colorInherit:{color:"inherit"},colorPrimary:{color:e.palette.primary.main,"&:hover":{backgroundColor:(0,c.fade)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},colorSecondary:{color:e.palette.secondary.main,"&:hover":{backgroundColor:(0,c.fade)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},disabled:{},label:{width:"100%",display:"flex",alignItems:"inherit",justifyContent:"inherit"}}};function h(e){var t,n=e.children,r=e.classes,u=e.className,c=e.color,p=e.disabled,h=(0,o.default)(e,["children","classes","className","color","disabled"]);return s.default.createElement(f.default,(0,a.default)({className:(0,l.default)(r.root,(t={},(0,i.default)(t,r["color".concat((0,d.capitalize)(c))],"default"!==c),(0,i.default)(t,r.disabled,p),t),u),centerRipple:!0,focusRipple:!0,disabled:p},h),s.default.createElement("span",{className:r.label},n))}t.styles=p,h.propTypes={},h.defaultProps={color:"default",disabled:!1};var m=(0,u.default)(p,{name:"MuiIconButton"})(h);t.default=m},function(e,t,n){"use strict";var r=n(26);t.__esModule=!0,t.default=void 0;var a=r(n(259)),i=r(n(263)),o=(r(n(105)),r(n(106)),function(e){return(0,a.default)(function(e,t){return!(0,i.default)(e,t)})(e)});t.default=o},function(e,t,n){"use strict";var r=n(26);t.__esModule=!0,t.default=void 0;var a=r(n(260)),i=n(0),o=(r(n(105)),r(n(106)),function(e){return function(t){var n=(0,i.createFactory)(t);return function(t){function r(){return t.apply(this,arguments)||this}(0,a.default)(r,t);var i=r.prototype;return i.shouldComponentUpdate=function(t){return e(this.props,t)},i.render=function(){return n(this.props)},r}(i.Component)}});t.default=o},function(e,t){e.exports=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=function(e,t){return function(n){return n[e]=t,n}};t.default=r},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=function(e){return"string"==typeof e?e:e?e.displayName||e.name||"Component":void 0};t.default=r},function(e,t,n){"use strict";var r=n(26);t.__esModule=!0,t.default=void 0;var a=r(n(107)).default;t.default=a},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var a=r(n(7)),i=r(n(10)),o=r(n(8)),s=r(n(0)),l=(r(n(2)),r(n(5))),u=r(n(9)),c=n(29),f=function(e){return{root:{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,fontSize:24,transition:e.transitions.create("fill",{duration:e.transitions.duration.shorter})},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},colorAction:{color:e.palette.action.active},colorError:{color:e.palette.error.main},colorDisabled:{color:e.palette.action.disabled},fontSizeInherit:{fontSize:"inherit"},fontSizeSmall:{fontSize:20},fontSizeLarge:{fontSize:35}}};function d(e){var t,n=e.children,r=e.classes,u=e.className,f=e.color,d=e.component,p=e.fontSize,h=e.nativeColor,m=e.titleAccess,v=e.viewBox,g=(0,o.default)(e,["children","classes","className","color","component","fontSize","nativeColor","titleAccess","viewBox"]);return s.default.createElement(d,(0,a.default)({className:(0,l.default)(r.root,(t={},(0,i.default)(t,r["color".concat((0,c.capitalize)(f))],"inherit"!==f),(0,i.default)(t,r["fontSize".concat((0,c.capitalize)(p))],"default"!==p),t),u),focusable:"false",viewBox:v,color:h,"aria-hidden":m?"false":"true",role:m?"img":"presentation"},g),n,m?s.default.createElement("title",null,m):null)}t.styles=f,d.propTypes={},d.defaultProps={color:"inherit",component:"svg",fontSize:"default",viewBox:"0 0 24 24"},d.muiName="SvgIcon";var p=(0,u.default)(f,{name:"MuiSvgIcon"})(d);t.default=p},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.isHorizontal=_,t.getAnchor=w,t.default=t.styles=void 0;var a=r(n(7)),i=r(n(10)),o=r(n(8)),s=r(n(12)),l=r(n(13)),u=r(n(14)),c=r(n(15)),f=r(n(16)),d=r(n(0)),p=(r(n(2)),r(n(5))),h=r(n(108)),m=r(n(9)),v=r(n(283)),g=r(n(65)),y=n(29),b=n(61),x={left:"right",right:"left",top:"down",bottom:"up"};function _(e){return-1!==["left","right"].indexOf(e.anchor)}function w(e){return"rtl"===e.theme.direction&&_(e)?x[e.anchor]:e.anchor}var T=function(e){return{root:{},docked:{flex:"0 0 auto"},paper:{overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:e.zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:"none"},paperAnchorLeft:{left:0,right:"auto"},paperAnchorRight:{left:"auto",right:0},paperAnchorTop:{top:0,left:0,bottom:"auto",right:0,height:"auto",maxHeight:"100%"},paperAnchorBottom:{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"},paperAnchorDockedLeft:{borderRight:"1px solid ".concat(e.palette.divider)},paperAnchorDockedTop:{borderBottom:"1px solid ".concat(e.palette.divider)},paperAnchorDockedRight:{borderLeft:"1px solid ".concat(e.palette.divider)},paperAnchorDockedBottom:{borderTop:"1px solid ".concat(e.palette.divider)},modal:{}}};t.styles=T;var k=function(e){function t(){var e,n;(0,s.default)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=(0,u.default)(this,(e=(0,c.default)(t)).call.apply(e,[this].concat(a)))).mounted=!1,n}return(0,f.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"render",value:function(){var e=this.props,t=(e.anchor,e.BackdropProps),n=e.children,r=e.classes,s=e.className,l=e.elevation,u=e.ModalProps,c=(u=void 0===u?{}:u).BackdropProps,f=(0,o.default)(u,["BackdropProps"]),m=e.onClose,b=e.open,_=e.PaperProps,T=e.SlideProps,k=(e.theme,e.transitionDuration),C=e.variant,E=(0,o.default)(e,["anchor","BackdropProps","children","classes","className","elevation","ModalProps","onClose","open","PaperProps","SlideProps","theme","transitionDuration","variant"]),M=w(this.props),A=d.default.createElement(g.default,(0,a.default)({elevation:"temporary"===C?l:0,square:!0,className:(0,p.default)(r.paper,r["paperAnchor".concat((0,y.capitalize)(M))],(0,i.default)({},r["paperAnchorDocked".concat((0,y.capitalize)(M))],"temporary"!==C))},_),n);if("permanent"===C)return d.default.createElement("div",(0,a.default)({className:(0,p.default)(r.root,r.docked,s)},E),A);var S=d.default.createElement(v.default,(0,a.default)({in:b,direction:x[M],timeout:k,appear:this.mounted},T),A);return"persistent"===C?d.default.createElement("div",(0,a.default)({className:(0,p.default)(r.root,r.docked,s)},E),S):d.default.createElement(h.default,(0,a.default)({BackdropProps:(0,a.default)({},t,c,{transitionDuration:k}),className:(0,p.default)(r.root,r.modal,s),open:b,onClose:m},E,f),S)}}]),t}(d.default.Component);k.propTypes={},k.defaultProps={anchor:"left",elevation:16,open:!1,transitionDuration:{enter:b.duration.enteringScreen,exit:b.duration.leavingScreen},variant:"temporary"};var C=(0,m.default)(T,{name:"MuiDrawer",flip:!1,withTheme:!0})(k);t.default=C},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var a=r(n(7)),i=r(n(10)),o=r(n(8)),s=r(n(12)),l=r(n(13)),u=r(n(14)),c=r(n(15)),f=r(n(16)),d=r(n(46)),p=r(n(0)),h=r(n(17)),m=(r(n(2)),r(n(5))),v=(r(n(11)),r(n(40))),g=r(n(36)),y=r(n(109)),b=r(n(110)),x=n(29),_=r(n(9)),w=r(n(111)),T=r(n(279)),k=n(115);function C(e){return!!e.children&&e.children.props.hasOwnProperty("in")}var E=function(e){return{root:{position:"fixed",zIndex:e.zIndex.modal,right:0,bottom:0,top:0,left:0},hidden:{visibility:"hidden"}}};t.styles=E;var M=function(e){function t(e){var n;return(0,s.default)(this,t),(n=(0,u.default)(this,(0,c.default)(t).call(this))).mounted=!1,n.handleOpen=function(){var e=(0,g.default)(n.mountNode),t=function(e,t){return e="function"==typeof e?e():e,h.default.findDOMNode(e)||t}(n.props.container,e.body);n.props.manager.add((0,d.default)((0,d.default)(n)),t),e.addEventListener("keydown",n.handleDocumentKeyDown),e.addEventListener("focus",n.enforceFocus,!0),n.dialogRef&&n.handleOpened()},n.handleRendered=function(){n.props.onRendered&&n.props.onRendered(),n.props.open?n.handleOpened():(0,k.ariaHidden)(n.modalRef,!0)},n.handleOpened=function(){n.autoFocus(),n.modalRef.scrollTop=0},n.handleClose=function(){n.props.manager.remove((0,d.default)((0,d.default)(n)));var e=(0,g.default)(n.mountNode);e.removeEventListener("keydown",n.handleDocumentKeyDown),e.removeEventListener("focus",n.enforceFocus,!0),n.restoreLastFocus()},n.handleExited=function(){n.setState({exited:!0})},n.handleBackdropClick=function(e){e.target===e.currentTarget&&(n.props.onBackdropClick&&n.props.onBackdropClick(e),!n.props.disableBackdropClick&&n.props.onClose&&n.props.onClose(e,"backdropClick"))},n.handleDocumentKeyDown=function(e){"esc"===(0,v.default)(e)&&n.isTopModal()&&!e.defaultPrevented&&(n.props.onEscapeKeyDown&&n.props.onEscapeKeyDown(e),!n.props.disableEscapeKeyDown&&n.props.onClose&&n.props.onClose(e,"escapeKeyDown"))},n.enforceFocus=function(){if(n.isTopModal()&&!n.props.disableEnforceFocus&&n.mounted&&n.dialogRef){var e=(0,g.default)(n.mountNode).activeElement;n.dialogRef.contains(e)||n.dialogRef.focus()}},n.handlePortalRef=function(e){n.mountNode=e?e.getMountNode():e},n.handleModalRef=function(e){n.modalRef=e},n.onRootRef=function(e){n.dialogRef=e},n.state={exited:!e.open},n}return(0,f.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){this.mounted=!0,this.props.open&&this.handleOpen()}},{key:"componentDidUpdate",value:function(e){e.open&&!this.props.open?this.handleClose():!e.open&&this.props.open&&(this.lastFocus=(0,g.default)(this.mountNode).activeElement,this.handleOpen())}},{key:"componentWillUnmount",value:function(){this.mounted=!1,(this.props.open||C(this.props)&&!this.state.exited)&&this.handleClose()}},{key:"autoFocus",value:function(){if(!this.props.disableAutoFocus&&this.dialogRef){var e=(0,g.default)(this.mountNode).activeElement;this.dialogRef.contains(e)||(this.dialogRef.hasAttribute("tabIndex")||this.dialogRef.setAttribute("tabIndex",-1),this.lastFocus=e,this.dialogRef.focus())}}},{key:"restoreLastFocus",value:function(){!this.props.disableRestoreFocus&&this.lastFocus&&(this.lastFocus.focus&&this.lastFocus.focus(),this.lastFocus=null)}},{key:"isTopModal",value:function(){return this.props.manager.isTopModal(this)}},{key:"render",value:function(){var e=this.props,t=e.BackdropComponent,n=e.BackdropProps,r=e.children,s=e.classes,l=e.className,u=e.container,c=(e.disableAutoFocus,e.disableBackdropClick,e.disableEnforceFocus,e.disableEscapeKeyDown,e.disablePortal),f=(e.disableRestoreFocus,e.hideBackdrop),d=e.keepMounted,h=(e.manager,e.onBackdropClick,e.onClose,e.onEscapeKeyDown,e.onRendered,e.open),v=(0,o.default)(e,["BackdropComponent","BackdropProps","children","classes","className","container","disableAutoFocus","disableBackdropClick","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onEscapeKeyDown","onRendered","open"]),g=this.state.exited,_=C(this.props);if(!d&&!h&&(!_||g))return null;var w={};return _&&(w.onExited=(0,x.createChainedFunction)(this.handleExited,r.props.onExited)),void 0===r.props.role&&(w.role=r.props.role||"document"),void 0===r.props.tabIndex&&(w.tabIndex=r.props.tabIndex||"-1"),p.default.createElement(b.default,{ref:this.handlePortalRef,container:u,disablePortal:c,onRendered:this.handleRendered},p.default.createElement("div",(0,a.default)({ref:this.handleModalRef,className:(0,m.default)(s.root,l,(0,i.default)({},s.hidden,g))},v),f?null:p.default.createElement(t,(0,a.default)({open:h,onClick:this.handleBackdropClick},n)),p.default.createElement(y.default,{rootRef:this.onRootRef},p.default.cloneElement(r,w))))}}],[{key:"getDerivedStateFromProps",value:function(e){return e.open?{exited:!1}:C(e)?null:{exited:!0}}}]),t}(p.default.Component);M.propTypes={},M.defaultProps={BackdropComponent:T.default,disableAutoFocus:!1,disableBackdropClick:!1,disableEnforceFocus:!1,disableEscapeKeyDown:!1,disablePortal:!1,disableRestoreFocus:!1,hideBackdrop:!1,keepMounted:!1,manager:new w.default};var A=(0,_.default)(E,{flip:!1,name:"MuiModal"})(M);t.default=A},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(12)),i=r(n(13)),o=r(n(14)),s=r(n(15)),l=r(n(16)),u=r(n(0)),c=r(n(17)),f=(r(n(2)),r(n(49)),n(50)),d=function(e){function t(){return(0,a.default)(this,t),(0,o.default)(this,(0,s.default)(t).apply(this,arguments))}return(0,l.default)(t,e),(0,i.default)(t,[{key:"componentDidMount",value:function(){this.ref=c.default.findDOMNode(this),(0,f.setRef)(this.props.rootRef,this.ref)}},{key:"componentDidUpdate",value:function(e){var t=c.default.findDOMNode(this);e.rootRef===this.props.rootRef&&this.ref===t||(e.rootRef!==this.props.rootRef&&(0,f.setRef)(e.rootRef,null),this.ref=t,(0,f.setRef)(this.props.rootRef,this.ref))}},{key:"componentWillUnmount",value:function(){this.ref=null,(0,f.setRef)(this.props.rootRef,null)}},{key:"render",value:function(){return this.props.children}}]),t}(u.default.Component);d.propTypes={},d.propTypes={};var p=d;t.default=p},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(12)),i=r(n(13)),o=r(n(14)),s=r(n(15)),l=r(n(16)),u=r(n(0)),c=r(n(17)),f=(r(n(2)),r(n(36)));r(n(49));var d=function(e){function t(){var e,n;(0,a.default)(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(n=(0,o.default)(this,(e=(0,s.default)(t)).call.apply(e,[this].concat(i)))).getMountNode=function(){return n.mountNode},n}return(0,l.default)(t,e),(0,i.default)(t,[{key:"componentDidMount",value:function(){this.setMountNode(this.props.container),this.props.disablePortal||this.forceUpdate(this.props.onRendered)}},{key:"componentDidUpdate",value:function(e){e.container===this.props.container&&e.disablePortal===this.props.disablePortal||(this.setMountNode(this.props.container),this.props.disablePortal||this.forceUpdate(this.props.onRendered))}},{key:"componentWillUnmount",value:function(){this.mountNode=null}},{key:"setMountNode",value:function(e){this.props.disablePortal?this.mountNode=c.default.findDOMNode(this).parentElement:this.mountNode=function(e,t){return e="function"==typeof e?e():e,c.default.findDOMNode(e)||t}(e,function(e){return(0,f.default)(c.default.findDOMNode(e))}(this).body)}},{key:"render",value:function(){var e=this.props,t=e.children;return e.disablePortal?t:this.mountNode?c.default.createPortal(t,this.mountNode):null}}]),t}(u.default.Component);d.propTypes={},d.defaultProps={disablePortal:!1},d.propTypes={};var p=d;t.default=p},function(e,t,n){"use strict";var r=n(4);t.__esModule=!0,t.default=function(e,t,n){var r="",c="",f=t;if("string"==typeof t){if(void 0===n)return e.style[(0,a.default)(t)]||(0,o.default)(e).getPropertyValue((0,i.default)(t));(f={})[t]=n}Object.keys(f).forEach(function(t){var n=f[t];n||0===n?(0,u.default)(t)?c+=t+"("+n+") ":r+=(0,i.default)(t)+": "+n+";":(0,s.default)(e,(0,i.default)(t))}),c&&(r+=l.transform+": "+c+";");e.style.cssText+=";"+r};var a=r(n(112)),i=r(n(271)),o=r(n(273)),s=r(n(274)),l=n(275),u=r(n(276));e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){return e.replace(r,function(e,t){return t.toUpperCase()})};var r=/-(.)/g;e.exports=t.default},function(e,t,n){"use strict";var r=n(4);t.__esModule=!0,t.default=function(e){return(0,a.default)(e).replace(i,"-ms-")};var a=r(n(272)),i=/^ms-/;e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){return e.replace(r,"-$1").toLowerCase()};var r=/([A-Z])/g;e.exports=t.default},function(e,t,n){"use strict";var r=n(4);t.__esModule=!0,t.default=function(e){if(!e)throw new TypeError("No Element passed to `getComputedStyle()`");var t=e.ownerDocument;return"defaultView"in t?t.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):window.getComputedStyle(e,null):{getPropertyValue:function(t){var n=e.style;"float"==(t=(0,a.default)(t))&&(t="styleFloat");var r=e.currentStyle[t]||null;if(null==r&&n&&n[t]&&(r=n[t]),o.test(r)&&!i.test(t)){var s=n.left,l=e.runtimeStyle,u=l&&l.left;u&&(l.left=e.currentStyle.left),n.left="fontSize"===t?"1em":r,r=n.pixelLeft+"px",n.left=s,u&&(l.left=u)}return r}}};var a=r(n(112)),i=/^(top|right|bottom|left)$/,o=/^([+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|))(?!px)[a-z%]+$/i;e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){return"removeProperty"in e.style?e.style.removeProperty(t):e.style.removeAttribute(t)},e.exports=t.default},function(e,t,n){"use strict";var r=n(4);t.__esModule=!0,t.default=t.animationEnd=t.animationDelay=t.animationTiming=t.animationDuration=t.animationName=t.transitionEnd=t.transitionDuration=t.transitionDelay=t.transitionTiming=t.transitionProperty=t.transform=void 0;var a,i,o,s,l,u,c,f,d,p,h,m=r(n(113)),v="transform";if(t.transform=v,t.animationEnd=o,t.transitionEnd=i,t.transitionDelay=c,t.transitionTiming=u,t.transitionDuration=l,t.transitionProperty=s,t.animationDelay=h,t.animationTiming=p,t.animationDuration=d,t.animationName=f,m.default){var g=function(){for(var e,t,n=document.createElement("div").style,r={O:function(e){return"o"+e.toLowerCase()},Moz:function(e){return e.toLowerCase()},Webkit:function(e){return"webkit"+e},ms:function(e){return"MS"+e}},a=Object.keys(r),i="",o=0;o<a.length;o++){var s=a[o];if(s+"TransitionProperty"in n){i="-"+s.toLowerCase(),e=r[s]("TransitionEnd"),t=r[s]("AnimationEnd");break}}!e&&"transitionProperty"in n&&(e="transitionend");!t&&"animationName"in n&&(t="animationend");return n=null,{animationEnd:t,transitionEnd:e,prefix:i}}();a=g.prefix,t.transitionEnd=i=g.transitionEnd,t.animationEnd=o=g.animationEnd,t.transform=v=a+"-"+v,t.transitionProperty=s=a+"-transition-property",t.transitionDuration=l=a+"-transition-duration",t.transitionDelay=c=a+"-transition-delay",t.transitionTiming=u=a+"-transition-timing-function",t.animationName=f=a+"-animation-name",t.animationDuration=d=a+"-animation-duration",t.animationTiming=p=a+"-animation-delay",t.animationDelay=h=a+"-animation-timing-function"}var y={transform:v,end:i,property:s,timing:u,delay:c,duration:l};t.default=y},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){return!(!e||!r.test(e))};var r=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;e.exports=t.default},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.isBody=s,t.default=function(e){var t=(0,i.default)(e),n=(0,o.default)(t);if(!(0,a.default)(t)&&!s(e))return e.scrollHeight>e.clientHeight;var r=n.getComputedStyle(t.body),l=parseInt(r.getPropertyValue("margin-left"),10),u=parseInt(r.getPropertyValue("margin-right"),10);return l+t.body.clientWidth+u<n.innerWidth};var a=r(n(278)),i=r(n(36)),o=r(n(63));function s(e){return e&&"body"===e.tagName.toLowerCase()}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){return e===e.window?e:9===e.nodeType&&(e.defaultView||e.parentWindow)},e.exports=t.default},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.default}});var a=r(n(280))},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var a=r(n(7)),i=r(n(10)),o=r(n(8)),s=r(n(0)),l=(r(n(2)),r(n(5))),u=r(n(9)),c=r(n(281)),f={root:{zIndex:-1,position:"fixed",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",touchAction:"none"},invisible:{backgroundColor:"transparent"}};function d(e){var t=e.classes,n=e.className,r=e.invisible,u=e.open,f=e.transitionDuration,d=(0,o.default)(e,["classes","className","invisible","open","transitionDuration"]);return s.default.createElement(c.default,(0,a.default)({in:u,timeout:f},d),s.default.createElement("div",{className:(0,l.default)(t.root,(0,i.default)({},t.invisible,r),n),"aria-hidden":"true"}))}t.styles=f,d.propTypes={},d.defaultProps={invisible:!1};var p=(0,u.default)(f,{name:"MuiBackdrop"})(d);t.default=p},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.default}});var a=r(n(282))},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(7)),i=r(n(8)),o=r(n(12)),s=r(n(13)),l=r(n(14)),u=r(n(15)),c=r(n(16)),f=r(n(0)),d=(r(n(2)),r(n(64))),p=n(61),h=r(n(51)),m=n(80),v={entering:{opacity:1},entered:{opacity:1}},g=function(e){function t(){var e,n;(0,o.default)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=(0,l.default)(this,(e=(0,u.default)(t)).call.apply(e,[this].concat(a)))).handleEnter=function(e){var t=n.props.theme;(0,m.reflow)(e);var r=(0,m.getTransitionProps)(n.props,{mode:"enter"});e.style.webkitTransition=t.transitions.create("opacity",r),e.style.transition=t.transitions.create("opacity",r),n.props.onEnter&&n.props.onEnter(e)},n.handleExit=function(e){var t=n.props.theme,r=(0,m.getTransitionProps)(n.props,{mode:"exit"});e.style.webkitTransition=t.transitions.create("opacity",r),e.style.transition=t.transitions.create("opacity",r),n.props.onExit&&n.props.onExit(e)},n}return(0,c.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=(e.onEnter,e.onExit,e.style),r=(e.theme,(0,i.default)(e,["children","onEnter","onExit","style","theme"])),o=(0,a.default)({},n,f.default.isValidElement(t)?t.props.style:{});return f.default.createElement(d.default,(0,a.default)({appear:!0,onEnter:this.handleEnter,onExit:this.handleExit},r),function(e,n){return f.default.cloneElement(t,(0,a.default)({style:(0,a.default)({opacity:0,willChange:"opacity"},v[e],o)},n))})}}]),t}(f.default.Component);g.propTypes={},g.defaultProps={timeout:{enter:p.duration.enteringScreen,exit:p.duration.leavingScreen}};var y=(0,h.default)()(g);t.default=y},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.default}});var a=r(n(284))},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.setTranslateValue=_,t.default=void 0;var a=r(n(8)),i=r(n(7)),o=r(n(12)),s=r(n(13)),l=r(n(14)),u=r(n(15)),c=r(n(16)),f=r(n(0)),d=(r(n(2)),r(n(17))),p=r(n(81)),h=r(n(82)),m=r(n(64)),v=r(n(63)),g=r(n(51)),y=n(61),b=n(80),x=24;function _(e,t){var n=function(e,t){var n,r=e.direction,a=t.getBoundingClientRect();if(t.fakeTransform)n=t.fakeTransform;else{var i=(0,v.default)(t).getComputedStyle(t);n=i.getPropertyValue("-webkit-transform")||i.getPropertyValue("transform")}var o=0,s=0;if(n&&"none"!==n&&"string"==typeof n){var l=n.split("(")[1].split(")")[0].split(",");o=parseInt(l[4],10),s=parseInt(l[5],10)}return"left"===r?"translateX(100vw) translateX(-".concat(a.left-o,"px)"):"right"===r?"translateX(-".concat(a.left+a.width+x-o,"px)"):"up"===r?"translateY(100vh) translateY(-".concat(a.top-s,"px)"):"translateY(-".concat(a.top+a.height+x-s,"px)")}(e,t);n&&(t.style.webkitTransform=n,t.style.transform=n)}var w=function(e){function t(){var e;return(0,o.default)(this,t),(e=(0,l.default)(this,(0,u.default)(t).call(this))).mounted=!1,e.handleEnter=function(t){_(e.props,t),(0,b.reflow)(t),e.props.onEnter&&e.props.onEnter(t)},e.handleEntering=function(t){var n=e.props.theme,r=(0,b.getTransitionProps)(e.props,{mode:"enter"});t.style.webkitTransition=n.transitions.create("-webkit-transform",(0,i.default)({},r,{easing:n.transitions.easing.easeOut})),t.style.transition=n.transitions.create("transform",(0,i.default)({},r,{easing:n.transitions.easing.easeOut})),t.style.webkitTransform="translate(0, 0)",t.style.transform="translate(0, 0)",e.props.onEntering&&e.props.onEntering(t)},e.handleExit=function(t){var n=e.props.theme,r=(0,b.getTransitionProps)(e.props,{mode:"exit"});t.style.webkitTransition=n.transitions.create("-webkit-transform",(0,i.default)({},r,{easing:n.transitions.easing.sharp})),t.style.transition=n.transitions.create("transform",(0,i.default)({},r,{easing:n.transitions.easing.sharp})),_(e.props,t),e.props.onExit&&e.props.onExit(t)},e.handleExited=function(t){t.style.webkitTransition="",t.style.transition="",e.props.onExited&&e.props.onExited(t)},"undefined"!=typeof window&&(e.handleResize=(0,h.default)(function(){e.props.in||"down"===e.props.direction||"right"===e.props.direction||e.transitionRef&&_(e.props,e.transitionRef)},166)),e}return(0,c.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){this.mounted=!0,this.props.in||this.updatePosition()}},{key:"componentDidUpdate",value:function(e){e.direction===this.props.direction||this.props.in||this.updatePosition()}},{key:"componentWillUnmount",value:function(){this.handleResize.clear()}},{key:"updatePosition",value:function(){this.transitionRef&&(this.transitionRef.style.visibility="inherit",_(this.props,this.transitionRef))}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,r=(t.onEnter,t.onEntering,t.onExit,t.onExited,t.style),o=(t.theme,(0,a.default)(t,["children","onEnter","onEntering","onExit","onExited","style","theme"])),s={};return this.props.in||this.mounted||(s.visibility="hidden"),s=(0,i.default)({},s,r,f.default.isValidElement(n)?n.props.style:{}),f.default.createElement(p.default,{target:"window",onResize:this.handleResize},f.default.createElement(m.default,(0,i.default)({onEnter:this.handleEnter,onEntering:this.handleEntering,onExit:this.handleExit,onExited:this.handleExited,appear:!0,style:s,ref:function(t){e.transitionRef=d.default.findDOMNode(t)}},o),n))}}]),t}(f.default.Component);w.propTypes={},w.defaultProps={direction:"down",timeout:{enter:y.duration.enteringScreen,exit:y.duration.leavingScreen}};var T=(0,g.default)()(w);t.default=T},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},function(e,t,n){var r=n(116),a=n(288);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?a(e):t}},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},function(e,t,n){var r=n(291);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,r)}e.exports=n},function(e,t,n){var r=n(293);e.exports=function(e,t){if(null==e)return{};var n,a,i=r(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}},function(e,t){e.exports=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}},function(e,t){function n(){return e.exports=n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},n.apply(this,arguments)}e.exports=n},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var a=r(n(7)),i=r(n(10)),o=r(n(8)),s=r(n(0)),l=(r(n(2)),r(n(5))),u=r(n(9)),c=n(32),f=function(e){return{root:{height:1,margin:0,border:"none",flexShrink:0,backgroundColor:e.palette.divider},absolute:{position:"absolute",bottom:0,left:0,width:"100%"},inset:{marginLeft:72},light:{backgroundColor:(0,c.fade)(e.palette.divider,.08)}}};function d(e){var t,n=e.absolute,r=e.classes,u=e.className,c=e.component,f=e.inset,d=e.light,p=(0,o.default)(e,["absolute","classes","className","component","inset","light"]),h=(0,l.default)(r.root,(t={},(0,i.default)(t,r.absolute,n),(0,i.default)(t,r.inset,f),(0,i.default)(t,r.light,d),t),u);return s.default.createElement(c,(0,a.default)({className:h},p))}t.styles=f,d.propTypes={},d.defaultProps={absolute:!1,component:"hr",inset:!1,light:!1};var p=(0,u.default)(f,{name:"MuiDivider"})(d);t.default=p},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var a=r(n(7)),i=r(n(10)),o=r(n(8)),s=r(n(0)),l=(r(n(2)),r(n(5))),u=r(n(9)),c=r(n(79)),f={root:{listStyle:"none",margin:0,padding:0,position:"relative"},padding:{paddingTop:8,paddingBottom:8},dense:{paddingTop:4,paddingBottom:4},subheader:{paddingTop:0}};function d(e){var t,n=e.children,r=e.classes,u=e.className,f=e.component,d=e.dense,p=e.disablePadding,h=e.subheader,m=(0,o.default)(e,["children","classes","className","component","dense","disablePadding","subheader"]);return s.default.createElement(f,(0,a.default)({className:(0,l.default)(r.root,(t={},(0,i.default)(t,r.dense,d&&!p),(0,i.default)(t,r.padding,!p),(0,i.default)(t,r.subheader,h),t),u)},m),s.default.createElement(c.default.Provider,{value:{dense:d}},h,n))}t.styles=f,d.propTypes={},d.defaultProps={component:"ul",dense:!1,disablePadding:!1};var p=(0,u.default)(f,{name:"MuiList"})(d);t.default=p},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var a=r(n(7)),i=r(n(8)),o=r(n(0)),s=(r(n(2)),r(n(5))),l=r(n(65)),u=r(n(9)),c={root:{overflow:"hidden"}};function f(e){var t=e.classes,n=e.className,r=e.raised,u=(0,i.default)(e,["classes","className","raised"]);return o.default.createElement(l.default,(0,a.default)({className:(0,s.default)(t.root,n),elevation:r?8:1},u))}t.styles=c,f.propTypes={},f.defaultProps={raised:!1};var d=(0,u.default)(c,{name:"MuiCard"})(f);t.default=d},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var a=r(n(7)),i=r(n(8)),o=r(n(0)),s=(r(n(2)),r(n(5))),l=r(n(9)),u=function(e){return{root:e.mixins.gutters({paddingTop:16,paddingBottom:16,"&:last-child":{paddingBottom:24}})}};function c(e){var t=e.classes,n=e.className,r=e.component,l=(0,i.default)(e,["classes","className","component"]);return o.default.createElement(r,(0,a.default)({className:(0,s.default)(t.root,n)},l))}t.styles=u,c.propTypes={},c.defaultProps={component:"div"};var f=(0,l.default)(u,{name:"MuiCardContent"})(c);t.default=f},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var a=r(n(10)),i=r(n(8)),o=r(n(7)),s=r(n(0)),l=(r(n(2)),r(n(5))),u=r(n(9)),c=n(101),f=(r(n(300)),[0,8,16,24,32,40]),d=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12];var p=function(e){return(0,o.default)({container:{boxSizing:"border-box",display:"flex",flexWrap:"wrap",width:"100%"},item:{boxSizing:"border-box",margin:"0"},zeroMinWidth:{minWidth:0},"direction-xs-column":{flexDirection:"column"},"direction-xs-column-reverse":{flexDirection:"column-reverse"},"direction-xs-row-reverse":{flexDirection:"row-reverse"},"wrap-xs-nowrap":{flexWrap:"nowrap"},"wrap-xs-wrap-reverse":{flexWrap:"wrap-reverse"},"align-items-xs-center":{alignItems:"center"},"align-items-xs-flex-start":{alignItems:"flex-start"},"align-items-xs-flex-end":{alignItems:"flex-end"},"align-items-xs-baseline":{alignItems:"baseline"},"align-content-xs-center":{alignContent:"center"},"align-content-xs-flex-start":{alignContent:"flex-start"},"align-content-xs-flex-end":{alignContent:"flex-end"},"align-content-xs-space-between":{alignContent:"space-between"},"align-content-xs-space-around":{alignContent:"space-around"},"justify-xs-center":{justifyContent:"center"},"justify-xs-flex-end":{justifyContent:"flex-end"},"justify-xs-space-between":{justifyContent:"space-between"},"justify-xs-space-around":{justifyContent:"space-around"},"justify-xs-space-evenly":{justifyContent:"space-evenly"}},function(e,t){var n={};return f.forEach(function(e,r){0!==r&&(n["spacing-".concat(t,"-").concat(e)]={margin:-e/2,width:"calc(100% + ".concat(e,"px)"),"& > $item":{padding:e/2}})}),n}(0,"xs"),c.keys.reduce(function(t,n){return function(e,t,n){var r={};d.forEach(function(e){var t="grid-".concat(n,"-").concat(e);if(!0!==e)if("auto"!==e){var a="".concat(Math.round(e/12*1e8)/1e6,"%");r[t]={flexBasis:a,flexGrow:0,maxWidth:a}}else r[t]={flexBasis:"auto",flexGrow:0,maxWidth:"none"};else r[t]={flexBasis:0,flexGrow:1,maxWidth:"100%"}}),"xs"===n?(0,o.default)(e,r):e[t.breakpoints.up(n)]=r}(t,e,n),t},{}))};function h(e){var t,n=e.alignContent,r=e.alignItems,u=e.classes,c=e.className,f=e.component,d=e.container,p=e.direction,m=e.item,v=e.justify,g=e.lg,y=e.md,b=e.sm,x=e.spacing,_=e.wrap,w=e.xl,T=e.xs,k=e.zeroMinWidth,C=(0,i.default)(e,["alignContent","alignItems","classes","className","component","container","direction","item","justify","lg","md","sm","spacing","wrap","xl","xs","zeroMinWidth"]),E=(0,l.default)((t={},(0,a.default)(t,u.container,d),(0,a.default)(t,u.item,m),(0,a.default)(t,u.zeroMinWidth,k),(0,a.default)(t,u["spacing-xs-".concat(String(x))],d&&0!==x),(0,a.default)(t,u["direction-xs-".concat(String(p))],p!==h.defaultProps.direction),(0,a.default)(t,u["wrap-xs-".concat(String(_))],_!==h.defaultProps.wrap),(0,a.default)(t,u["align-items-xs-".concat(String(r))],r!==h.defaultProps.alignItems),(0,a.default)(t,u["align-content-xs-".concat(String(n))],n!==h.defaultProps.alignContent),(0,a.default)(t,u["justify-xs-".concat(String(v))],v!==h.defaultProps.justify),(0,a.default)(t,u["grid-xs-".concat(String(T))],!1!==T),(0,a.default)(t,u["grid-sm-".concat(String(b))],!1!==b),(0,a.default)(t,u["grid-md-".concat(String(y))],!1!==y),(0,a.default)(t,u["grid-lg-".concat(String(g))],!1!==g),(0,a.default)(t,u["grid-xl-".concat(String(w))],!1!==w),t),c);return s.default.createElement(f,(0,o.default)({className:E},C))}t.styles=p,h.propTypes={},h.defaultProps={alignContent:"stretch",alignItems:"stretch",component:"div",container:!1,direction:"row",item:!1,justify:"flex-start",lg:!1,md:!1,sm:!1,spacing:0,wrap:"wrap",xl:!1,xs:!1,zeroMinWidth:!1};var m=(0,u.default)(p,{name:"MuiGrid"})(h);t.default=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){return function(){return null}};t.default=r},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var a=r(n(7)),i=r(n(8)),o=r(n(12)),s=r(n(13)),l=r(n(14)),u=r(n(15)),c=r(n(16)),f=r(n(0)),d=r(n(2)),p=r(n(5)),h=r(n(9)),m=function(e){return{root:{display:"table",fontFamily:e.typography.fontFamily,width:"100%",borderCollapse:"collapse",borderSpacing:0}}};t.styles=m;var v=function(e){function t(){return(0,o.default)(this,t),(0,l.default)(this,(0,u.default)(t).apply(this,arguments))}return(0,c.default)(t,e),(0,s.default)(t,[{key:"getChildContext",value:function(){return{table:{padding:this.props.padding}}}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.className,r=e.component,o=(e.padding,(0,i.default)(e,["classes","className","component","padding"]));return f.default.createElement(r,(0,a.default)({className:(0,p.default)(t.root,n)},o))}}]),t}(f.default.Component);v.propTypes={},v.defaultProps={component:"table",padding:"default"},v.childContextTypes={table:d.default.object};var g=(0,h.default)(m,{name:"MuiTable"})(v);t.default=g},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var a=r(n(7)),i=r(n(8)),o=r(n(12)),s=r(n(13)),l=r(n(14)),u=r(n(15)),c=r(n(16)),f=r(n(0)),d=r(n(2)),p=r(n(5)),h=r(n(9)),m={root:{display:"table-header-group"}};t.styles=m;var v=function(e){function t(){return(0,o.default)(this,t),(0,l.default)(this,(0,u.default)(t).apply(this,arguments))}return(0,c.default)(t,e),(0,s.default)(t,[{key:"getChildContext",value:function(){return{tablelvl2:{variant:"head"}}}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.className,r=e.component,o=(0,i.default)(e,["classes","className","component"]);return f.default.createElement(r,(0,a.default)({className:(0,p.default)(t.root,n)},o))}}]),t}(f.default.Component);v.propTypes={},v.defaultProps={component:"thead"},v.childContextTypes={tablelvl2:d.default.object};var g=(0,h.default)(m,{name:"MuiTableHead"})(v);t.default=g},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var a=r(n(7)),i=r(n(10)),o=r(n(8)),s=r(n(0)),l=r(n(2)),u=r(n(5)),c=r(n(9)),f=function(e){return{root:{color:"inherit",display:"table-row",height:48,verticalAlign:"middle",outline:"none","&$selected":{backgroundColor:"light"===e.palette.type?"rgba(0, 0, 0, 0.04)":"rgba(255, 255, 255, 0.08)"},"&$hover:hover":{backgroundColor:"light"===e.palette.type?"rgba(0, 0, 0, 0.07)":"rgba(255, 255, 255, 0.14)"}},selected:{},hover:{},head:{height:56},footer:{height:56}}};function d(e,t){var n,r=e.classes,l=e.className,c=e.component,f=e.hover,d=e.selected,p=(0,o.default)(e,["classes","className","component","hover","selected"]),h=t.tablelvl2,m=(0,u.default)(r.root,(n={},(0,i.default)(n,r.head,h&&"head"===h.variant),(0,i.default)(n,r.footer,h&&"footer"===h.variant),(0,i.default)(n,r.hover,f),(0,i.default)(n,r.selected,d),n),l);return s.default.createElement(c,(0,a.default)({className:m},p))}t.styles=f,d.propTypes={},d.defaultProps={component:"tr",hover:!1,selected:!1},d.contextTypes={tablelvl2:l.default.object};var p=(0,c.default)(f,{name:"MuiTableRow"})(d);t.default=p},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var a=r(n(7)),i=r(n(10)),o=r(n(8)),s=r(n(0)),l=r(n(2)),u=r(n(5)),c=r(n(9)),f=n(29),d=n(32),p=function(e){return{root:{display:"table-cell",verticalAlign:"inherit",borderBottom:"1px solid\n    ".concat("light"===e.palette.type?(0,d.lighten)((0,d.fade)(e.palette.divider,1),.88):(0,d.darken)((0,d.fade)(e.palette.divider,1),.68)),textAlign:"left",padding:"4px 56px 4px 24px","&:last-child":{paddingRight:24}},head:{color:e.palette.text.secondary,fontSize:e.typography.pxToRem(12),fontWeight:e.typography.fontWeightMedium},body:{color:e.palette.text.primary,fontSize:e.typography.pxToRem(13),fontWeight:e.typography.fontWeightRegular},footer:{borderBottom:0,color:e.palette.text.secondary,fontSize:e.typography.pxToRem(12)},numeric:{textAlign:"right",flexDirection:"row-reverse"},paddingDense:{paddingRight:24},paddingCheckbox:{padding:"0 12px","&:last-child":{paddingRight:12}},paddingNone:{padding:0,"&:last-child":{padding:0}}}};function h(e,t){var n,r,l=e.children,c=e.classes,d=e.className,p=e.component,h=e.sortDirection,m=e.numeric,v=e.padding,g=e.scope,y=e.variant,b=(0,o.default)(e,["children","classes","className","component","sortDirection","numeric","padding","scope","variant"]),x=t.table,_=t.tablelvl2;r=p||(_&&"head"===_.variant?"th":"td");var w=g;!w&&_&&"head"===_.variant&&(w="col");var T=v||(x&&x.padding?x.padding:"default"),k=(0,u.default)(c.root,(n={},(0,i.default)(n,c.head,y?"head"===y:_&&"head"===_.variant),(0,i.default)(n,c.body,y?"body"===y:_&&"body"===_.variant),(0,i.default)(n,c.footer,y?"footer"===y:_&&"footer"===_.variant),(0,i.default)(n,c.numeric,m),(0,i.default)(n,c["padding".concat((0,f.capitalize)(T))],"default"!==T),n),d),C=null;return h&&(C="asc"===h?"ascending":"descending"),s.default.createElement(r,(0,a.default)({className:k,"aria-sort":C,scope:w},b),l)}t.styles=p,h.propTypes={},h.defaultProps={numeric:!1},h.contextTypes={table:l.default.object,tablelvl2:l.default.object};var m=(0,c.default)(p,{name:"MuiTableCell"})(h);t.default=m},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var a=r(n(7)),i=r(n(8)),o=r(n(12)),s=r(n(13)),l=r(n(14)),u=r(n(15)),c=r(n(16)),f=r(n(0)),d=r(n(2)),p=r(n(5)),h=r(n(9)),m={root:{display:"table-row-group"}};t.styles=m;var v=function(e){function t(){return(0,o.default)(this,t),(0,l.default)(this,(0,u.default)(t).apply(this,arguments))}return(0,c.default)(t,e),(0,s.default)(t,[{key:"getChildContext",value:function(){return{tablelvl2:{variant:"body"}}}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.className,r=e.component,o=(0,i.default)(e,["classes","className","component"]);return f.default.createElement(r,(0,a.default)({className:(0,p.default)(t.root,n)},o))}}]),t}(f.default.Component);v.propTypes={},v.defaultProps={component:"tbody"},v.childContextTypes={tablelvl2:d.default.object};var g=(0,h.default)(m,{name:"MuiTableBody"})(v);t.default=g},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var a=r(n(7)),i=r(n(8)),o=r(n(12)),s=r(n(13)),l=r(n(14)),u=r(n(15)),c=r(n(16)),f=r(n(0)),d=(r(n(2)),r(n(17))),p=(r(n(11)),r(n(82))),h=r(n(81)),m=r(n(36)),v=r(n(63)),g=r(n(9)),y=r(n(108)),b=r(n(117)),x=r(n(65));function _(e,t){var n=0;return"number"==typeof t?n=t:"center"===t?n=e.height/2:"bottom"===t&&(n=e.height),n}function w(e,t){var n=0;return"number"==typeof t?n=t:"center"===t?n=e.width/2:"right"===t&&(n=e.width),n}function T(e){return[e.horizontal,e.vertical].map(function(e){return"number"==typeof e?"".concat(e,"px"):e}).join(" ")}function k(e){return"function"==typeof e?e():e}var C={paper:{position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:"none"}};t.styles=C;var E=function(e){function t(){var e;return(0,o.default)(this,t),(e=(0,l.default)(this,(0,u.default)(t).call(this))).handleGetOffsetTop=_,e.handleGetOffsetLeft=w,e.componentWillUnmount=function(){e.handleResize.clear()},e.setPositioningStyles=function(t){var n=e.getPositioningStyle(t);null!==n.top&&(t.style.top=n.top),null!==n.left&&(t.style.left=n.left),t.style.transformOrigin=n.transformOrigin},e.getPositioningStyle=function(t){var n=e.props,r=n.anchorEl,a=n.anchorReference,i=n.marginThreshold,o=e.getContentAnchorOffset(t),s={width:t.offsetWidth,height:t.offsetHeight},l=e.getTransformOrigin(s,o);if("none"===a)return{top:null,left:null,transformOrigin:T(l)};var u=e.getAnchorOffset(o),c=u.top-l.vertical,f=u.left-l.horizontal,d=c+s.height,p=f+s.width,h=(0,v.default)(k(r)),m=h.innerHeight-i,g=h.innerWidth-i;if(c<i){var y=c-i;c-=y,l.vertical+=y}else if(d>m){var b=d-m;c-=b,l.vertical+=b}if(f<i){var x=f-i;f-=x,l.horizontal+=x}else if(p>g){var _=p-g;f-=_,l.horizontal+=_}return{top:"".concat(c,"px"),left:"".concat(f,"px"),transformOrigin:T(l)}},e.handleEntering=function(t){e.props.onEntering&&e.props.onEntering(t),e.setPositioningStyles(t)},"undefined"!=typeof window&&(e.handleResize=(0,p.default)(function(){e.setPositioningStyles(e.paperRef)},166)),e}return(0,c.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){this.props.action&&this.props.action({updatePosition:this.handleResize})}},{key:"getAnchorOffset",value:function(e){var t=this.props,n=t.anchorEl,r=t.anchorOrigin,a=t.anchorReference,i=t.anchorPosition;if("anchorPosition"===a)return i;var o=(k(n)||(0,m.default)(this.paperRef).body).getBoundingClientRect(),s=0===e?r.vertical:"center";return{top:o.top+this.handleGetOffsetTop(o,s),left:o.left+this.handleGetOffsetLeft(o,r.horizontal)}}},{key:"getContentAnchorOffset",value:function(e){var t=this.props,n=t.getContentAnchorEl,r=t.anchorReference,a=0;if(n&&"anchorEl"===r){var i=n(e);if(i&&e.contains(i)){var o=function(e,t){for(var n=t,r=0;n&&n!==e;)r+=(n=n.parentNode).scrollTop;return r}(e,i);a=i.offsetTop+i.clientHeight/2-o||0}}return a}},{key:"getTransformOrigin",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.props.transformOrigin;return{vertical:this.handleGetOffsetTop(e,n.vertical)+t,horizontal:this.handleGetOffsetLeft(e,n.horizontal)}}},{key:"render",value:function(){var e=this,t=this.props,n=(t.action,t.anchorEl),r=(t.anchorOrigin,t.anchorPosition,t.anchorReference,t.children),o=t.classes,s=t.container,l=t.elevation,u=(t.getContentAnchorEl,t.marginThreshold,t.ModalClasses),c=t.onEnter,p=t.onEntered,v=(t.onEntering,t.onExit),g=t.onExited,b=t.onExiting,_=t.open,w=t.PaperProps,T=t.role,C=(t.transformOrigin,t.TransitionComponent),E=t.transitionDuration,M=t.TransitionProps,A=(0,i.default)(t,["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","classes","container","elevation","getContentAnchorEl","marginThreshold","ModalClasses","onEnter","onEntered","onEntering","onExit","onExited","onExiting","open","PaperProps","role","transformOrigin","TransitionComponent","transitionDuration","TransitionProps"]),S=E;"auto"!==E||C.muiSupportAuto||(S=void 0);var O=s||(n?(0,m.default)(k(n)).body:void 0);return f.default.createElement(y.default,(0,a.default)({classes:u,container:O,open:_,BackdropProps:{invisible:!0}},A),f.default.createElement(C,(0,a.default)({appear:!0,in:_,onEnter:c,onEntered:p,onEntering:this.handleEntering,onExit:v,onExited:g,onExiting:b,role:T,timeout:S},M),f.default.createElement(x.default,(0,a.default)({className:o.paper,elevation:l,ref:function(t){e.paperRef=d.default.findDOMNode(t)}},w),f.default.createElement(h.default,{target:"window",onResize:this.handleResize}),r)))}}]),t}(f.default.Component);E.propTypes={},E.defaultProps={anchorReference:"anchorEl",anchorOrigin:{vertical:"top",horizontal:"left"},elevation:8,marginThreshold:16,transformOrigin:{vertical:"top",horizontal:"left"},TransitionComponent:b.default,transitionDuration:"auto"};var M=(0,g.default)(C,{name:"MuiPopover"})(E);t.default=M},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(7)),i=r(n(8)),o=r(n(12)),s=r(n(13)),l=r(n(14)),u=r(n(15)),c=r(n(16)),f=r(n(0)),d=(r(n(2)),r(n(64))),p=r(n(51)),h=n(80);function m(e){return"scale(".concat(e,", ").concat(Math.pow(e,2),")")}var v={entering:{opacity:1,transform:m(1)},entered:{opacity:1,transform:"".concat(m(1)," translateZ(0)")}},g=function(e){function t(){var e,n;(0,o.default)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=(0,l.default)(this,(e=(0,u.default)(t)).call.apply(e,[this].concat(a)))).handleEnter=function(e){var t=n.props,r=t.theme,a=t.timeout;(0,h.reflow)(e);var i=(0,h.getTransitionProps)(n.props,{mode:"enter"}),o=i.duration,s=i.delay,l=0;"auto"===a?(l=r.transitions.getAutoHeightDuration(e.clientHeight),n.autoTimeout=l):l=o,e.style.transition=[r.transitions.create("opacity",{duration:l,delay:s}),r.transitions.create("transform",{duration:.666*l,delay:s})].join(","),n.props.onEnter&&n.props.onEnter(e)},n.handleExit=function(e){var t=n.props,r=t.theme,a=t.timeout,i=0,o=(0,h.getTransitionProps)(n.props,{mode:"exit"}),s=o.duration,l=o.delay;"auto"===a?(i=r.transitions.getAutoHeightDuration(e.clientHeight),n.autoTimeout=i):i=s,e.style.transition=[r.transitions.create("opacity",{duration:i,delay:l}),r.transitions.create("transform",{duration:.666*i,delay:l||.333*i})].join(","),e.style.opacity="0",e.style.transform=m(.75),n.props.onExit&&n.props.onExit(e)},n.addEndListener=function(e,t){"auto"===n.props.timeout&&(n.timer=setTimeout(t,n.autoTimeout||0))},n}return(0,c.default)(t,e),(0,s.default)(t,[{key:"componentWillUnmount",value:function(){clearTimeout(this.timer)}},{key:"render",value:function(){var e=this.props,t=e.children,n=(e.onEnter,e.onExit,e.style),r=(e.theme,e.timeout),o=(0,i.default)(e,["children","onEnter","onExit","style","theme","timeout"]),s=(0,a.default)({},n,f.default.isValidElement(t)?t.props.style:{});return f.default.createElement(d.default,(0,a.default)({appear:!0,onEnter:this.handleEnter,onExit:this.handleExit,addEndListener:this.addEndListener,timeout:"auto"===r?null:r},o),function(e,n){return f.default.cloneElement(t,(0,a.default)({style:(0,a.default)({opacity:0,transform:m(.75)},v[e],s)},n))})}}]),t}(f.default.Component);g.propTypes={},g.defaultProps={timeout:"auto"},g.muiSupportAuto=!0;var y=(0,p.default)()(g);t.default=y},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var a=r(n(7)),i=r(n(8)),o=r(n(12)),s=r(n(13)),l=r(n(14)),u=r(n(15)),c=r(n(16)),f=r(n(10)),d=r(n(0)),p=(r(n(2)),r(n(11)),r(n(5))),h=r(n(109)),m=r(n(9)),v=n(29),g=r(n(117)),y=r(n(309)),b=function(e){return{popper:{zIndex:e.zIndex.tooltip,opacity:.9},tooltip:{backgroundColor:e.palette.grey[700],borderRadius:e.shape.borderRadius,color:e.palette.common.white,fontFamily:e.typography.fontFamily,padding:"4px 8px",fontSize:e.typography.pxToRem(10),lineHeight:"".concat(e.typography.round(1.4),"em"),maxWidth:300},touch:{padding:"8px 16px",fontSize:e.typography.pxToRem(14),lineHeight:"".concat(e.typography.round(16/14),"em")},tooltipPlacementLeft:(0,f.default)({transformOrigin:"right center",margin:"0 24px "},e.breakpoints.up("sm"),{margin:"0 14px"}),tooltipPlacementRight:(0,f.default)({transformOrigin:"left center",margin:"0 24px"},e.breakpoints.up("sm"),{margin:"0 14px"}),tooltipPlacementTop:(0,f.default)({transformOrigin:"center bottom",margin:"24px 0"},e.breakpoints.up("sm"),{margin:"14px 0"}),tooltipPlacementBottom:(0,f.default)({transformOrigin:"center top",margin:"24px 0"},e.breakpoints.up("sm"),{margin:"14px 0"})}};t.styles=b;var x=function(e){function t(e){var n;return(0,o.default)(this,t),(n=(0,l.default)(this,(0,u.default)(t).call(this))).ignoreNonTouchEvents=!1,n.onRootRef=function(e){n.childrenRef=e},n.handleFocus=function(e){e.persist(),n.focusTimer=setTimeout(function(){n.childrenRef===document.activeElement&&n.handleEnter(e)},0);var t=n.props.children.props;t.onFocus&&t.onFocus(e)},n.handleEnter=function(e){var t=n.props,r=t.children,a=t.enterDelay,i=r.props;"mouseover"===e.type&&i.onMouseOver&&i.onMouseOver(e),n.ignoreNonTouchEvents&&"touchstart"!==e.type||(n.childrenRef.setAttribute("title",""),clearTimeout(n.enterTimer),clearTimeout(n.leaveTimer),a?(e.persist(),n.enterTimer=setTimeout(function(){n.handleOpen(e)},a)):n.handleOpen(e))},n.handleOpen=function(e){n.isControlled||n.state.open||n.setState({open:!0}),n.props.onOpen&&n.props.onOpen(e)},n.handleLeave=function(e){var t=n.props,r=t.children,a=t.leaveDelay,i=r.props;"blur"===e.type&&i.onBlur&&i.onBlur(e),"mouseleave"===e.type&&i.onMouseLeave&&i.onMouseLeave(e),clearTimeout(n.enterTimer),clearTimeout(n.leaveTimer),a?(e.persist(),n.leaveTimer=setTimeout(function(){n.handleClose(e)},a)):n.handleClose(e)},n.handleClose=function(e){n.isControlled||n.setState({open:!1}),n.props.onClose&&n.props.onClose(e),clearTimeout(n.closeTimer),n.closeTimer=setTimeout(function(){n.ignoreNonTouchEvents=!1},n.props.theme.transitions.duration.shortest)},n.handleTouchStart=function(e){n.ignoreNonTouchEvents=!0;var t=n.props,r=t.children,a=t.enterTouchDelay;r.props.onTouchStart&&r.props.onTouchStart(e),clearTimeout(n.leaveTimer),clearTimeout(n.closeTimer),clearTimeout(n.touchTimer),e.persist(),n.touchTimer=setTimeout(function(){n.handleEnter(e)},a)},n.handleTouchEnd=function(e){var t=n.props,r=t.children,a=t.leaveTouchDelay;r.props.onTouchEnd&&r.props.onTouchEnd(e),clearTimeout(n.touchTimer),clearTimeout(n.leaveTimer),e.persist(),n.leaveTimer=setTimeout(function(){n.handleClose(e)},a)},n.isControlled=null!=e.open,n.state={open:null},n.isControlled||(n.state.open=!1),n}return(0,c.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){this.defaultId="mui-tooltip-".concat(Math.round(1e5*Math.random())),this.props.open&&this.forceUpdate()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.closeTimer),clearTimeout(this.enterTimer),clearTimeout(this.focusTimer),clearTimeout(this.leaveTimer),clearTimeout(this.touchTimer)}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,r=t.classes,o=t.disableFocusListener,s=t.disableHoverListener,l=t.disableTouchListener,u=(t.enterDelay,t.enterTouchDelay,t.id),c=t.interactive,m=(t.leaveDelay,t.leaveTouchDelay,t.onClose,t.onOpen,t.open),g=t.placement,b=t.PopperProps,x=t.theme,_=t.title,w=t.TransitionComponent,T=t.TransitionProps,k=(0,i.default)(t,["children","classes","disableFocusListener","disableHoverListener","disableTouchListener","enterDelay","enterTouchDelay","id","interactive","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperProps","theme","title","TransitionComponent","TransitionProps"]),C=this.isControlled?m:this.state.open;""===_&&(C=!1);var E=(0,a.default)({"aria-describedby":C?u||this.defaultId:null,title:C||"string"!=typeof _?null:_},k);l||(E.onTouchStart=this.handleTouchStart,E.onTouchEnd=this.handleTouchEnd),s||(E.onMouseOver=this.handleEnter,E.onMouseLeave=this.handleLeave),o||(E.onFocus=this.handleFocus,E.onBlur=this.handleLeave);var M=c?{onMouseOver:E.onMouseOver,onMouseLeave:E.onMouseLeave,onFocus:E.onFocus,onBlur:E.onBlur}:{};return d.default.createElement(d.default.Fragment,null,d.default.createElement(h.default,{rootRef:this.onRootRef},d.default.cloneElement(n,E)),d.default.createElement(y.default,(0,a.default)({className:r.popper,placement:g,anchorEl:this.childrenRef,open:C,id:E["aria-describedby"],transition:!0},M,b),function(t){var n=t.placement,i=t.TransitionProps;return d.default.createElement(w,(0,a.default)({timeout:x.transitions.duration.shorter},i,T),d.default.createElement("div",{className:(0,p.default)(r.tooltip,(0,f.default)({},r.touch,e.ignoreNonTouchEvents),r["tooltipPlacement".concat((0,v.capitalize)(n.split("-")[0]))])},_))}))}}]),t}(d.default.Component);x.propTypes={},x.defaultProps={disableFocusListener:!1,disableHoverListener:!1,disableTouchListener:!1,enterDelay:0,enterTouchDelay:1e3,interactive:!1,leaveDelay:0,leaveTouchDelay:1500,placement:"bottom",TransitionComponent:g.default};var _=(0,m.default)(b,{name:"MuiTooltip",withTheme:!0})(x);t.default=_},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.default}});var a=r(n(310))},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(8)),i=r(n(7)),o=r(n(12)),s=r(n(13)),l=r(n(14)),u=r(n(15)),c=r(n(16)),f=r(n(46)),d=r(n(0)),p=r(n(17)),h=(r(n(2)),r(n(311))),m=r(n(51)),v=r(n(110));function g(e,t){if("rtl"!==e.direction)return t;switch(t){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return t}}var y=function(e){function t(e){var n;return(0,o.default)(this,t),(n=(0,l.default)(this,(0,u.default)(t).call(this))).handleOpen=function(){var e=n.props,t=e.anchorEl,r=e.modifiers,a=e.open,o=e.placement,s=e.popperOptions,l=void 0===s?{}:s,u=e.theme,c=e.disablePortal,d=p.default.findDOMNode((0,f.default)((0,f.default)(n)));d&&t&&a&&(n.popper&&(n.popper.destroy(),n.popper=null),n.popper=new h.default(function(e){return"function"==typeof e?e():e}(t),d,(0,i.default)({placement:g(u,o)},l,{modifiers:(0,i.default)({},c?{}:{preventOverflow:{boundariesElement:"window"}},r,l.modifiers),onCreate:n.handlePopperUpdate,onUpdate:n.handlePopperUpdate})))},n.handlePopperUpdate=function(e){e.placement!==n.state.placement&&n.setState({placement:e.placement})},n.handleExited=function(){n.setState({exited:!0}),n.handleClose()},n.handleClose=function(){n.popper&&(n.popper.destroy(),n.popper=null)},n.state={exited:!e.open},n}return(0,c.default)(t,e),(0,s.default)(t,[{key:"componentDidUpdate",value:function(e){e.open===this.props.open||this.props.open||this.props.transition||this.handleClose(),e.open===this.props.open&&e.anchorEl===this.props.anchorEl&&e.popperOptions===this.props.popperOptions&&e.modifiers===this.props.modifiers&&e.disablePortal===this.props.disablePortal&&e.placement===this.props.placement||this.handleOpen()}},{key:"componentWillUnmount",value:function(){this.handleClose()}},{key:"render",value:function(){var e=this.props,t=(e.anchorEl,e.children),n=e.container,r=e.disablePortal,o=e.keepMounted,s=(e.modifiers,e.open),l=e.placement,u=(e.popperOptions,e.theme),c=e.transition,f=(0,a.default)(e,["anchorEl","children","container","disablePortal","keepMounted","modifiers","open","placement","popperOptions","theme","transition"]),p=this.state,h=p.exited,m=p.placement;if(!o&&!s&&(!c||h))return null;var y={placement:m||g(u,l)};return c&&(y.TransitionProps={in:s,onExited:this.handleExited}),d.default.createElement(v.default,{onRendered:this.handleOpen,disablePortal:r,container:n},d.default.createElement("div",(0,i.default)({role:"tooltip",style:{position:"absolute"}},f),"function"==typeof t?t(y):t))}}],[{key:"getDerivedStateFromProps",value:function(e){return e.open?{exited:!1}:e.transition?null:{exited:!0}}}]),t}(d.default.Component);y.propTypes={},y.defaultProps={disablePortal:!1,placement:"bottom",transition:!1};var b=(0,m.default)()(y);t.default=b},function(e,t,n){"use strict";n.r(t),function(e){for(
/**!
 * @fileOverview Kickass library to create and place poppers near their reference elements.
 * @version 1.14.4
 * @license
 * Copyright (c) 2016 Federico Zivolo and contributors
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
var n="undefined"!=typeof window&&"undefined"!=typeof document,r=["Edge","Trident","Firefox"],a=0,i=0;i<r.length;i+=1)if(n&&navigator.userAgent.indexOf(r[i])>=0){a=1;break}var o=n&&window.Promise?function(e){var t=!1;return function(){t||(t=!0,window.Promise.resolve().then(function(){t=!1,e()}))}}:function(e){var t=!1;return function(){t||(t=!0,setTimeout(function(){t=!1,e()},a))}};function s(e){return e&&"[object Function]"==={}.toString.call(e)}function l(e,t){if(1!==e.nodeType)return[];var n=getComputedStyle(e,null);return t?n[t]:n}function u(e){return"HTML"===e.nodeName?e:e.parentNode||e.host}function c(e){if(!e)return document.body;switch(e.nodeName){case"HTML":case"BODY":return e.ownerDocument.body;case"#document":return e.body}var t=l(e),n=t.overflow,r=t.overflowX,a=t.overflowY;return/(auto|scroll|overlay)/.test(n+a+r)?e:c(u(e))}var f=n&&!(!window.MSInputMethodContext||!document.documentMode),d=n&&/MSIE 10/.test(navigator.userAgent);function p(e){return 11===e?f:10===e?d:f||d}function h(e){if(!e)return document.documentElement;for(var t=p(10)?document.body:null,n=e.offsetParent;n===t&&e.nextElementSibling;)n=(e=e.nextElementSibling).offsetParent;var r=n&&n.nodeName;return r&&"BODY"!==r&&"HTML"!==r?-1!==["TD","TABLE"].indexOf(n.nodeName)&&"static"===l(n,"position")?h(n):n:e?e.ownerDocument.documentElement:document.documentElement}function m(e){return null!==e.parentNode?m(e.parentNode):e}function v(e,t){if(!(e&&e.nodeType&&t&&t.nodeType))return document.documentElement;var n=e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING,r=n?e:t,a=n?t:e,i=document.createRange();i.setStart(r,0),i.setEnd(a,0);var o=i.commonAncestorContainer;if(e!==o&&t!==o||r.contains(a))return function(e){var t=e.nodeName;return"BODY"!==t&&("HTML"===t||h(e.firstElementChild)===e)}(o)?o:h(o);var s=m(e);return s.host?v(s.host,t):v(e,m(t).host)}function g(e){var t="top"===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top")?"scrollTop":"scrollLeft",n=e.nodeName;if("BODY"===n||"HTML"===n){var r=e.ownerDocument.documentElement;return(e.ownerDocument.scrollingElement||r)[t]}return e[t]}function y(e,t){var n="x"===t?"Left":"Top",r="Left"===n?"Right":"Bottom";return parseFloat(e["border"+n+"Width"],10)+parseFloat(e["border"+r+"Width"],10)}function b(e,t,n,r){return Math.max(t["offset"+e],t["scroll"+e],n["client"+e],n["offset"+e],n["scroll"+e],p(10)?parseInt(n["offset"+e])+parseInt(r["margin"+("Height"===e?"Top":"Left")])+parseInt(r["margin"+("Height"===e?"Bottom":"Right")]):0)}function x(e){var t=e.body,n=e.documentElement,r=p(10)&&getComputedStyle(n);return{height:b("Height",t,n,r),width:b("Width",t,n,r)}}var _=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},w=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),T=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function C(e){return k({},e,{right:e.left+e.width,bottom:e.top+e.height})}function E(e){var t={};try{if(p(10)){t=e.getBoundingClientRect();var n=g(e,"top"),r=g(e,"left");t.top+=n,t.left+=r,t.bottom+=n,t.right+=r}else t=e.getBoundingClientRect()}catch(e){}var a={left:t.left,top:t.top,width:t.right-t.left,height:t.bottom-t.top},i="HTML"===e.nodeName?x(e.ownerDocument):{},o=i.width||e.clientWidth||a.right-a.left,s=i.height||e.clientHeight||a.bottom-a.top,u=e.offsetWidth-o,c=e.offsetHeight-s;if(u||c){var f=l(e);u-=y(f,"x"),c-=y(f,"y"),a.width-=u,a.height-=c}return C(a)}function M(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=p(10),a="HTML"===t.nodeName,i=E(e),o=E(t),s=c(e),u=l(t),f=parseFloat(u.borderTopWidth,10),d=parseFloat(u.borderLeftWidth,10);n&&a&&(o.top=Math.max(o.top,0),o.left=Math.max(o.left,0));var h=C({top:i.top-o.top-f,left:i.left-o.left-d,width:i.width,height:i.height});if(h.marginTop=0,h.marginLeft=0,!r&&a){var m=parseFloat(u.marginTop,10),v=parseFloat(u.marginLeft,10);h.top-=f-m,h.bottom-=f-m,h.left-=d-v,h.right-=d-v,h.marginTop=m,h.marginLeft=v}return(r&&!n?t.contains(s):t===s&&"BODY"!==s.nodeName)&&(h=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=g(t,"top"),a=g(t,"left"),i=n?-1:1;return e.top+=r*i,e.bottom+=r*i,e.left+=a*i,e.right+=a*i,e}(h,t)),h}function A(e){if(!e||!e.parentElement||p())return document.documentElement;for(var t=e.parentElement;t&&"none"===l(t,"transform");)t=t.parentElement;return t||document.documentElement}function S(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i={top:0,left:0},o=a?A(e):v(e,t);if("viewport"===r)i=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.ownerDocument.documentElement,r=M(e,n),a=Math.max(n.clientWidth,window.innerWidth||0),i=Math.max(n.clientHeight,window.innerHeight||0),o=t?0:g(n),s=t?0:g(n,"left");return C({top:o-r.top+r.marginTop,left:s-r.left+r.marginLeft,width:a,height:i})}(o,a);else{var s=void 0;"scrollParent"===r?"BODY"===(s=c(u(t))).nodeName&&(s=e.ownerDocument.documentElement):s="window"===r?e.ownerDocument.documentElement:r;var f=M(s,o,a);if("HTML"!==s.nodeName||function e(t){var n=t.nodeName;return"BODY"!==n&&"HTML"!==n&&("fixed"===l(t,"position")||e(u(t)))}(o))i=f;else{var d=x(e.ownerDocument),p=d.height,h=d.width;i.top+=f.top-f.marginTop,i.bottom=p+f.top,i.left+=f.left-f.marginLeft,i.right=h+f.left}}var m="number"==typeof(n=n||0);return i.left+=m?n:n.left||0,i.top+=m?n:n.top||0,i.right-=m?n:n.right||0,i.bottom-=m?n:n.bottom||0,i}function O(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(-1===e.indexOf("auto"))return e;var o=S(n,r,i,a),s={top:{width:o.width,height:t.top-o.top},right:{width:o.right-t.right,height:o.height},bottom:{width:o.width,height:o.bottom-t.bottom},left:{width:t.left-o.left,height:o.height}},l=Object.keys(s).map(function(e){return k({key:e},s[e],{area:function(e){return e.width*e.height}(s[e])})}).sort(function(e,t){return t.area-e.area}),u=l.filter(function(e){var t=e.width,r=e.height;return t>=n.clientWidth&&r>=n.clientHeight}),c=u.length>0?u[0].key:l[0].key,f=e.split("-")[1];return c+(f?"-"+f:"")}function P(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return M(n,r?A(t):v(t,n),r)}function R(e){var t=getComputedStyle(e),n=parseFloat(t.marginTop)+parseFloat(t.marginBottom),r=parseFloat(t.marginLeft)+parseFloat(t.marginRight);return{width:e.offsetWidth+r,height:e.offsetHeight+n}}function L(e){var t={left:"right",right:"left",bottom:"top",top:"bottom"};return e.replace(/left|right|bottom|top/g,function(e){return t[e]})}function D(e,t,n){n=n.split("-")[0];var r=R(e),a={width:r.width,height:r.height},i=-1!==["right","left"].indexOf(n),o=i?"top":"left",s=i?"left":"top",l=i?"height":"width",u=i?"width":"height";return a[o]=t[o]+t[l]/2-r[l]/2,a[s]=n===s?t[s]-r[u]:t[L(s)],a}function I(e,t){return Array.prototype.find?e.find(t):e.filter(t)[0]}function z(e,t,n){return(void 0===n?e:e.slice(0,function(e,t,n){if(Array.prototype.findIndex)return e.findIndex(function(e){return e[t]===n});var r=I(e,function(e){return e[t]===n});return e.indexOf(r)}(e,"name",n))).forEach(function(e){e.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var n=e.function||e.fn;e.enabled&&s(n)&&(t.offsets.popper=C(t.offsets.popper),t.offsets.reference=C(t.offsets.reference),t=n(t,e))}),t}function j(e,t){return e.some(function(e){var n=e.name;return e.enabled&&n===t})}function N(e){for(var t=[!1,"ms","Webkit","Moz","O"],n=e.charAt(0).toUpperCase()+e.slice(1),r=0;r<t.length;r++){var a=t[r],i=a?""+a+n:e;if(void 0!==document.body.style[i])return i}return null}function F(e){var t=e.ownerDocument;return t?t.defaultView:window}function B(e,t,n,r){n.updateBound=r,F(e).addEventListener("resize",n.updateBound,{passive:!0});var a=c(e);return function e(t,n,r,a){var i="BODY"===t.nodeName,o=i?t.ownerDocument.defaultView:t;o.addEventListener(n,r,{passive:!0}),i||e(c(o.parentNode),n,r,a),a.push(o)}(a,"scroll",n.updateBound,n.scrollParents),n.scrollElement=a,n.eventsEnabled=!0,n}function V(){this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=function(e,t){return F(e).removeEventListener("resize",t.updateBound),t.scrollParents.forEach(function(e){e.removeEventListener("scroll",t.updateBound)}),t.updateBound=null,t.scrollParents=[],t.scrollElement=null,t.eventsEnabled=!1,t}(this.reference,this.state))}function U(e){return""!==e&&!isNaN(parseFloat(e))&&isFinite(e)}function G(e,t){Object.keys(t).forEach(function(n){var r="";-1!==["width","height","top","right","bottom","left"].indexOf(n)&&U(t[n])&&(r="px"),e.style[n]=t[n]+r})}function H(e,t,n){var r=I(e,function(e){return e.name===t}),a=!!r&&e.some(function(e){return e.name===n&&e.enabled&&e.order<r.order});if(!a){var i="`"+t+"`",o="`"+n+"`";console.warn(o+" modifier is required by "+i+" modifier in order to work, be sure to include it before "+i+"!")}return a}var W=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],q=W.slice(3);function Y(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=q.indexOf(e),r=q.slice(n+1).concat(q.slice(0,n));return t?r.reverse():r}var X={FLIP:"flip",CLOCKWISE:"clockwise",COUNTERCLOCKWISE:"counterclockwise"};function Z(e,t,n,r){var a=[0,0],i=-1!==["right","left"].indexOf(r),o=e.split(/(\+|\-)/).map(function(e){return e.trim()}),s=o.indexOf(I(o,function(e){return-1!==e.search(/,|\s/)}));o[s]&&-1===o[s].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var l=/\s*,\s*|\s+/,u=-1!==s?[o.slice(0,s).concat([o[s].split(l)[0]]),[o[s].split(l)[1]].concat(o.slice(s+1))]:[o];return(u=u.map(function(e,r){var a=(1===r?!i:i)?"height":"width",o=!1;return e.reduce(function(e,t){return""===e[e.length-1]&&-1!==["+","-"].indexOf(t)?(e[e.length-1]=t,o=!0,e):o?(e[e.length-1]+=t,o=!1,e):e.concat(t)},[]).map(function(e){return function(e,t,n,r){var a=e.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),i=+a[1],o=a[2];if(!i)return e;if(0===o.indexOf("%")){var s=void 0;switch(o){case"%p":s=n;break;case"%":case"%r":default:s=r}return C(s)[t]/100*i}if("vh"===o||"vw"===o)return("vh"===o?Math.max(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0))/100*i;return i}(e,a,t,n)})})).forEach(function(e,t){e.forEach(function(n,r){U(n)&&(a[t]+=n*("-"===e[r-1]?-1:1))})}),a}var $={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(e){var t=e.placement,n=t.split("-")[0],r=t.split("-")[1];if(r){var a=e.offsets,i=a.reference,o=a.popper,s=-1!==["bottom","top"].indexOf(n),l=s?"left":"top",u=s?"width":"height",c={start:T({},l,i[l]),end:T({},l,i[l]+i[u]-o[u])};e.offsets.popper=k({},o,c[r])}return e}},offset:{order:200,enabled:!0,fn:function(e,t){var n=t.offset,r=e.placement,a=e.offsets,i=a.popper,o=a.reference,s=r.split("-")[0],l=void 0;return l=U(+n)?[+n,0]:Z(n,i,o,s),"left"===s?(i.top+=l[0],i.left-=l[1]):"right"===s?(i.top+=l[0],i.left+=l[1]):"top"===s?(i.left+=l[0],i.top-=l[1]):"bottom"===s&&(i.left+=l[0],i.top+=l[1]),e.popper=i,e},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(e,t){var n=t.boundariesElement||h(e.instance.popper);e.instance.reference===n&&(n=h(n));var r=N("transform"),a=e.instance.popper.style,i=a.top,o=a.left,s=a[r];a.top="",a.left="",a[r]="";var l=S(e.instance.popper,e.instance.reference,t.padding,n,e.positionFixed);a.top=i,a.left=o,a[r]=s,t.boundaries=l;var u=t.priority,c=e.offsets.popper,f={primary:function(e){var n=c[e];return c[e]<l[e]&&!t.escapeWithReference&&(n=Math.max(c[e],l[e])),T({},e,n)},secondary:function(e){var n="right"===e?"left":"top",r=c[n];return c[e]>l[e]&&!t.escapeWithReference&&(r=Math.min(c[n],l[e]-("right"===e?c.width:c.height))),T({},n,r)}};return u.forEach(function(e){var t=-1!==["left","top"].indexOf(e)?"primary":"secondary";c=k({},c,f[t](e))}),e.offsets.popper=c,e},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(e){var t=e.offsets,n=t.popper,r=t.reference,a=e.placement.split("-")[0],i=Math.floor,o=-1!==["top","bottom"].indexOf(a),s=o?"right":"bottom",l=o?"left":"top",u=o?"width":"height";return n[s]<i(r[l])&&(e.offsets.popper[l]=i(r[l])-n[u]),n[l]>i(r[s])&&(e.offsets.popper[l]=i(r[s])),e}},arrow:{order:500,enabled:!0,fn:function(e,t){var n;if(!H(e.instance.modifiers,"arrow","keepTogether"))return e;var r=t.element;if("string"==typeof r){if(!(r=e.instance.popper.querySelector(r)))return e}else if(!e.instance.popper.contains(r))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),e;var a=e.placement.split("-")[0],i=e.offsets,o=i.popper,s=i.reference,u=-1!==["left","right"].indexOf(a),c=u?"height":"width",f=u?"Top":"Left",d=f.toLowerCase(),p=u?"left":"top",h=u?"bottom":"right",m=R(r)[c];s[h]-m<o[d]&&(e.offsets.popper[d]-=o[d]-(s[h]-m)),s[d]+m>o[h]&&(e.offsets.popper[d]+=s[d]+m-o[h]),e.offsets.popper=C(e.offsets.popper);var v=s[d]+s[c]/2-m/2,g=l(e.instance.popper),y=parseFloat(g["margin"+f],10),b=parseFloat(g["border"+f+"Width"],10),x=v-e.offsets.popper[d]-y-b;return x=Math.max(Math.min(o[c]-m,x),0),e.arrowElement=r,e.offsets.arrow=(T(n={},d,Math.round(x)),T(n,p,""),n),e},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(e,t){if(j(e.instance.modifiers,"inner"))return e;if(e.flipped&&e.placement===e.originalPlacement)return e;var n=S(e.instance.popper,e.instance.reference,t.padding,t.boundariesElement,e.positionFixed),r=e.placement.split("-")[0],a=L(r),i=e.placement.split("-")[1]||"",o=[];switch(t.behavior){case X.FLIP:o=[r,a];break;case X.CLOCKWISE:o=Y(r);break;case X.COUNTERCLOCKWISE:o=Y(r,!0);break;default:o=t.behavior}return o.forEach(function(s,l){if(r!==s||o.length===l+1)return e;r=e.placement.split("-")[0],a=L(r);var u=e.offsets.popper,c=e.offsets.reference,f=Math.floor,d="left"===r&&f(u.right)>f(c.left)||"right"===r&&f(u.left)<f(c.right)||"top"===r&&f(u.bottom)>f(c.top)||"bottom"===r&&f(u.top)<f(c.bottom),p=f(u.left)<f(n.left),h=f(u.right)>f(n.right),m=f(u.top)<f(n.top),v=f(u.bottom)>f(n.bottom),g="left"===r&&p||"right"===r&&h||"top"===r&&m||"bottom"===r&&v,y=-1!==["top","bottom"].indexOf(r),b=!!t.flipVariations&&(y&&"start"===i&&p||y&&"end"===i&&h||!y&&"start"===i&&m||!y&&"end"===i&&v);(d||g||b)&&(e.flipped=!0,(d||g)&&(r=o[l+1]),b&&(i=function(e){return"end"===e?"start":"start"===e?"end":e}(i)),e.placement=r+(i?"-"+i:""),e.offsets.popper=k({},e.offsets.popper,D(e.instance.popper,e.offsets.reference,e.placement)),e=z(e.instance.modifiers,e,"flip"))}),e},behavior:"flip",padding:5,boundariesElement:"viewport"},inner:{order:700,enabled:!1,fn:function(e){var t=e.placement,n=t.split("-")[0],r=e.offsets,a=r.popper,i=r.reference,o=-1!==["left","right"].indexOf(n),s=-1===["top","left"].indexOf(n);return a[o?"left":"top"]=i[n]-(s?a[o?"width":"height"]:0),e.placement=L(t),e.offsets.popper=C(a),e}},hide:{order:800,enabled:!0,fn:function(e){if(!H(e.instance.modifiers,"hide","preventOverflow"))return e;var t=e.offsets.reference,n=I(e.instance.modifiers,function(e){return"preventOverflow"===e.name}).boundaries;if(t.bottom<n.top||t.left>n.right||t.top>n.bottom||t.right<n.left){if(!0===e.hide)return e;e.hide=!0,e.attributes["x-out-of-boundaries"]=""}else{if(!1===e.hide)return e;e.hide=!1,e.attributes["x-out-of-boundaries"]=!1}return e}},computeStyle:{order:850,enabled:!0,fn:function(e,t){var n=t.x,r=t.y,a=e.offsets.popper,i=I(e.instance.modifiers,function(e){return"applyStyle"===e.name}).gpuAcceleration;void 0!==i&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var o=void 0!==i?i:t.gpuAcceleration,s=h(e.instance.popper),l=E(s),u={position:a.position},c={left:Math.floor(a.left),top:Math.round(a.top),bottom:Math.round(a.bottom),right:Math.floor(a.right)},f="bottom"===n?"top":"bottom",d="right"===r?"left":"right",p=N("transform"),m=void 0,v=void 0;if(v="bottom"===f?"HTML"===s.nodeName?-s.clientHeight+c.bottom:-l.height+c.bottom:c.top,m="right"===d?"HTML"===s.nodeName?-s.clientWidth+c.right:-l.width+c.right:c.left,o&&p)u[p]="translate3d("+m+"px, "+v+"px, 0)",u[f]=0,u[d]=0,u.willChange="transform";else{var g="bottom"===f?-1:1,y="right"===d?-1:1;u[f]=v*g,u[d]=m*y,u.willChange=f+", "+d}var b={"x-placement":e.placement};return e.attributes=k({},b,e.attributes),e.styles=k({},u,e.styles),e.arrowStyles=k({},e.offsets.arrow,e.arrowStyles),e},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(e){return G(e.instance.popper,e.styles),function(e,t){Object.keys(t).forEach(function(n){!1!==t[n]?e.setAttribute(n,t[n]):e.removeAttribute(n)})}(e.instance.popper,e.attributes),e.arrowElement&&Object.keys(e.arrowStyles).length&&G(e.arrowElement,e.arrowStyles),e},onLoad:function(e,t,n,r,a){var i=P(a,t,e,n.positionFixed),o=O(n.placement,i,t,e,n.modifiers.flip.boundariesElement,n.modifiers.flip.padding);return t.setAttribute("x-placement",o),G(t,{position:n.positionFixed?"fixed":"absolute"}),n},gpuAcceleration:void 0}}},K=function(){function e(t,n){var r=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_(this,e),this.scheduleUpdate=function(){return requestAnimationFrame(r.update)},this.update=o(this.update.bind(this)),this.options=k({},e.Defaults,a),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=t&&t.jquery?t[0]:t,this.popper=n&&n.jquery?n[0]:n,this.options.modifiers={},Object.keys(k({},e.Defaults.modifiers,a.modifiers)).forEach(function(t){r.options.modifiers[t]=k({},e.Defaults.modifiers[t]||{},a.modifiers?a.modifiers[t]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(e){return k({name:e},r.options.modifiers[e])}).sort(function(e,t){return e.order-t.order}),this.modifiers.forEach(function(e){e.enabled&&s(e.onLoad)&&e.onLoad(r.reference,r.popper,r.options,e,r.state)}),this.update();var i=this.options.eventsEnabled;i&&this.enableEventListeners(),this.state.eventsEnabled=i}return w(e,[{key:"update",value:function(){return function(){if(!this.state.isDestroyed){var e={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};e.offsets.reference=P(this.state,this.popper,this.reference,this.options.positionFixed),e.placement=O(this.options.placement,e.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),e.originalPlacement=e.placement,e.positionFixed=this.options.positionFixed,e.offsets.popper=D(this.popper,e.offsets.reference,e.placement),e.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",e=z(this.modifiers,e),this.state.isCreated?this.options.onUpdate(e):(this.state.isCreated=!0,this.options.onCreate(e))}}.call(this)}},{key:"destroy",value:function(){return function(){return this.state.isDestroyed=!0,j(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[N("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}.call(this)}},{key:"enableEventListeners",value:function(){return function(){this.state.eventsEnabled||(this.state=B(this.reference,this.options,this.state,this.scheduleUpdate))}.call(this)}},{key:"disableEventListeners",value:function(){return V.call(this)}}]),e}();K.Utils=("undefined"!=typeof window?window:e).PopperUtils,K.placements=W,K.Defaults=$,t.default=K}.call(this,n(48))},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var a=r(n(7)),i=r(n(10)),o=r(n(8)),s=r(n(0)),l=(r(n(2)),r(n(5))),u=r(n(313)),c=r(n(314)),f=r(n(319)),d=r(n(320)),p=n(29),h=r(n(9)),m=function(e){return{root:{color:e.palette.text.secondary},checked:{},disabled:{},indeterminate:{},colorPrimary:{"&$checked":{color:e.palette.primary.main},"&$disabled":{color:e.palette.action.disabled}},colorSecondary:{"&$checked":{color:e.palette.secondary.main},"&$disabled":{color:e.palette.action.disabled}}}};function v(e){var t=e.checkedIcon,n=e.classes,r=e.className,c=e.color,f=e.icon,d=e.indeterminate,h=e.indeterminateIcon,m=e.inputProps,v=(0,o.default)(e,["checkedIcon","classes","className","color","icon","indeterminate","indeterminateIcon","inputProps"]);return s.default.createElement(u.default,(0,a.default)({type:"checkbox",checkedIcon:d?h:t,className:(0,l.default)((0,i.default)({},n.indeterminate,d),r),classes:{root:(0,l.default)(n.root,n["color".concat((0,p.capitalize)(c))]),checked:n.checked,disabled:n.disabled},inputProps:(0,a.default)({"data-indeterminate":d},m),icon:d?h:f},v))}t.styles=m,v.propTypes={},v.defaultProps={checkedIcon:s.default.createElement(f.default,null),color:"secondary",icon:s.default.createElement(c.default,null),indeterminate:!1,indeterminateIcon:s.default.createElement(d.default,null)};var g=(0,h.default)(m,{name:"MuiCheckbox"})(v);t.default=g},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var a=r(n(7)),i=r(n(10)),o=r(n(8)),s=r(n(12)),l=r(n(13)),u=r(n(14)),c=r(n(15)),f=r(n(16)),d=r(n(0)),p=r(n(2)),h=r(n(5)),m=r(n(9)),v=r(n(31)),g={root:{display:"inline-flex",alignItems:"center",transition:"none","&:hover":{backgroundColor:"transparent"}},checked:{},disabled:{},input:{cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0}};t.styles=g;var y=function(e){function t(e){var n;return(0,s.default)(this,t),(n=(0,u.default)(this,(0,c.default)(t).call(this))).handleFocus=function(e){n.props.onFocus&&n.props.onFocus(e);var t=n.context.muiFormControl;t&&t.onFocus&&t.onFocus(e)},n.handleBlur=function(e){n.props.onBlur&&n.props.onBlur(e);var t=n.context.muiFormControl;t&&t.onBlur&&t.onBlur(e)},n.handleInputChange=function(e){var t=e.target.checked;n.isControlled||n.setState({checked:t}),n.props.onChange&&n.props.onChange(e,t)},n.isControlled=null!=e.checked,n.state={},n.isControlled||(n.state.checked=void 0!==e.defaultChecked&&e.defaultChecked),n}return(0,f.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e,t=this.props,n=t.autoFocus,r=t.checked,s=t.checkedIcon,l=t.classes,u=t.className,c=t.disabled,f=t.icon,p=t.id,m=t.inputProps,g=t.inputRef,y=t.name,b=(t.onBlur,t.onChange,t.onFocus,t.readOnly),x=t.required,_=t.tabIndex,w=t.type,T=t.value,k=(0,o.default)(t,["autoFocus","checked","checkedIcon","classes","className","disabled","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"]),C=this.context.muiFormControl,E=c;C&&void 0===E&&(E=C.disabled);var M=this.isControlled?r:this.state.checked,A="checkbox"===w||"radio"===w;return d.default.createElement(v.default,(0,a.default)({component:"span",className:(0,h.default)(l.root,(e={},(0,i.default)(e,l.checked,M),(0,i.default)(e,l.disabled,E),e),u),disabled:E,tabIndex:null,role:void 0,onFocus:this.handleFocus,onBlur:this.handleBlur},k),M?s:f,d.default.createElement("input",(0,a.default)({autoFocus:n,checked:M,className:l.input,disabled:E,id:A&&p,name:y,onChange:this.handleInputChange,readOnly:b,ref:g,required:x,tabIndex:_,type:w,value:T},m)))}}]),t}(d.default.Component);y.propTypes={},y.contextTypes={muiFormControl:p.default.object};var b=(0,m.default)(g,{name:"MuiPrivateSwitchBase"})(y);t.default=b},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(0)),i=r(n(41)),o=r(n(33)),s=a.default.createElement("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),l=function(e){return a.default.createElement(o.default,e,s)};(l=(0,i.default)(l)).muiName="SvgIcon";var u=l;t.default=u},function(e,t,n){"use strict";var r=n(4);t.__esModule=!0,t.default=void 0;var a=r(n(316)),i=n(0),o=(r(n(118)),r(n(56)),function(e){return function(t){var n=(0,i.createFactory)(t);return function(t){function r(){return t.apply(this,arguments)||this}(0,a.default)(r,t);var i=r.prototype;return i.shouldComponentUpdate=function(t){return e(this.props,t)},i.render=function(){return n(this.props)},r}(i.Component)}});t.default=o},function(e,t){e.exports=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=function(e,t){return function(n){return n[e]=t,n}};t.default=r},function(e,t,n){"use strict";var r=n(4);t.__esModule=!0,t.default=void 0;var a=r(n(107)).default;t.default=a},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(0)),i=r(n(41)),o=r(n(33)),s=a.default.createElement("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),l=function(e){return a.default.createElement(o.default,e,s)};(l=(0,i.default)(l)).muiName="SvgIcon";var u=l;t.default=u},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(0)),i=r(n(41)),o=r(n(33)),s=a.default.createElement("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),l=function(e){return a.default.createElement(o.default,e,s)};(l=(0,i.default)(l)).muiName="SvgIcon";var u=l;t.default=u},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var a=r(n(7)),i=r(n(10)),o=r(n(8)),s=r(n(12)),l=r(n(13)),u=r(n(14)),c=r(n(15)),f=r(n(16)),d=r(n(0)),p=(r(n(2)),r(n(5))),h=r(n(40)),m=(r(n(11)),r(n(322))),v=r(n(9)),g=n(32),y=(r(n(323)),n(29));n(324);var b=function(e){var t="light"===e.palette.type?e.palette.grey[300]:e.palette.grey[700],n=(0,g.fade)(e.palette.text.primary,.26);return{root:{fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:e.palette.getContrastText(t),backgroundColor:t,borderRadius:16,whiteSpace:"nowrap",transition:e.transitions.create(["background-color","box-shadow"]),cursor:"default",outline:"none",textDecoration:"none",border:"none",padding:0,verticalAlign:"middle"},colorPrimary:{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText},colorSecondary:{backgroundColor:e.palette.secondary.main,color:e.palette.secondary.contrastText},clickable:{WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover, &:focus":{backgroundColor:(0,g.emphasize)(t,.08)},"&:active":{boxShadow:e.shadows[1],backgroundColor:(0,g.emphasize)(t,.12)}},clickableColorPrimary:{"&:hover, &:focus":{backgroundColor:(0,g.emphasize)(e.palette.primary.main,.08)},"&:active":{backgroundColor:(0,g.emphasize)(e.palette.primary.main,.12)}},clickableColorSecondary:{"&:hover, &:focus":{backgroundColor:(0,g.emphasize)(e.palette.secondary.main,.08)},"&:active":{backgroundColor:(0,g.emphasize)(e.palette.secondary.main,.12)}},deletable:{"&:focus":{backgroundColor:(0,g.emphasize)(t,.08)}},deletableColorPrimary:{"&:focus":{backgroundColor:(0,g.emphasize)(e.palette.primary.main,.2)}},deletableColorSecondary:{"&:focus":{backgroundColor:(0,g.emphasize)(e.palette.secondary.main,.2)}},outlined:{backgroundColor:"transparent",border:"1px solid ".concat("light"===e.palette.type?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"),"$clickable&:hover, $clickable&:focus, $deletable&:focus":{backgroundColor:(0,g.fade)(e.palette.text.primary,e.palette.action.hoverOpacity)}},outlinedPrimary:{color:e.palette.primary.main,border:"1px solid ".concat(e.palette.primary.main),"$clickable&:hover, $clickable&:focus, $deletable&:focus":{backgroundColor:(0,g.fade)(e.palette.primary.main,e.palette.action.hoverOpacity)}},outlinedSecondary:{color:e.palette.secondary.main,border:"1px solid ".concat(e.palette.secondary.main),"$clickable&:hover, $clickable&:focus, $deletable&:focus":{backgroundColor:(0,g.fade)(e.palette.secondary.main,e.palette.action.hoverOpacity)}},avatar:{marginRight:-4,width:32,height:32,color:"light"===e.palette.type?e.palette.grey[700]:e.palette.grey[300],fontSize:e.typography.pxToRem(16)},avatarColorPrimary:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.dark},avatarColorSecondary:{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.dark},avatarChildren:{width:19,height:19},icon:{color:"light"===e.palette.type?e.palette.grey[700]:e.palette.grey[300],marginLeft:4,marginRight:-8},iconColorPrimary:{color:"inherit"},iconColorSecondary:{color:"inherit"},label:{display:"flex",alignItems:"center",paddingLeft:12,paddingRight:12,userSelect:"none",whiteSpace:"nowrap",cursor:"inherit"},deleteIcon:{WebkitTapHighlightColor:"transparent",color:n,cursor:"pointer",height:"auto",margin:"0 4px 0 -8px","&:hover":{color:(0,g.fade)(n,.4)}},deleteIconColorPrimary:{color:(0,g.fade)(e.palette.primary.contrastText,.7),"&:hover, &:active":{color:e.palette.primary.contrastText}},deleteIconColorSecondary:{color:(0,g.fade)(e.palette.primary.contrastText,.7),"&:hover, &:active":{color:e.palette.primary.contrastText}},deleteIconOutlinedColorPrimary:{color:(0,g.fade)(e.palette.primary.main,.7),"&:hover, &:active":{color:e.palette.primary.main}},deleteIconOutlinedColorSecondary:{color:(0,g.fade)(e.palette.secondary.main,.7),"&:hover, &:active":{color:e.palette.secondary.main}}}};t.styles=b;var x=function(e){function t(){var e,n;(0,s.default)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=(0,u.default)(this,(e=(0,c.default)(t)).call.apply(e,[this].concat(a)))).handleDeleteIconClick=function(e){e.stopPropagation();var t=n.props.onDelete;t&&t(e)},n.handleKeyDown=function(e){var t=n.props.onKeyDown;if(t&&t(e),e.currentTarget===e.target){var r=(0,h.default)(e);"space"!==r&&"enter"!==r&&"backspace"!==r&&"esc"!==r||e.preventDefault()}},n.handleKeyUp=function(e){var t=n.props,r=t.onClick,a=t.onDelete,i=t.onKeyUp;if(i&&i(e),e.currentTarget===e.target){var o=(0,h.default)(e);!r||"space"!==o&&"enter"!==o?a&&"backspace"===o?a(e):"esc"===o&&n.chipRef&&n.chipRef.blur():r(e)}},n}return(0,f.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e,t=this,n=this.props,r=n.avatar,s=n.classes,l=n.className,u=n.clickable,c=n.color,f=n.component,h=n.deleteIcon,v=n.icon,g=n.label,b=n.onClick,x=n.onDelete,_=(n.onKeyDown,n.onKeyUp,n.tabIndex),w=n.variant,T=(0,o.default)(n,["avatar","classes","className","clickable","color","component","deleteIcon","icon","label","onClick","onDelete","onKeyDown","onKeyUp","tabIndex","variant"]),k=!(!1===u||!b)||u,C=(0,p.default)(s.root,(e={},(0,i.default)(e,s["color".concat((0,y.capitalize)(c))],"default"!==c),(0,i.default)(e,s.clickable,k),(0,i.default)(e,s["clickableColor".concat((0,y.capitalize)(c))],k&&"default"!==c),(0,i.default)(e,s.deletable,x),(0,i.default)(e,s["deletableColor".concat((0,y.capitalize)(c))],x&&"default"!==c),(0,i.default)(e,s.outlined,"outlined"===w),(0,i.default)(e,s.outlinedPrimary,"outlined"===w&&"primary"===c),(0,i.default)(e,s.outlinedSecondary,"outlined"===w&&"secondary"===c),e),l),E=null;if(x){var M,A=(M={},(0,i.default)(M,s["deleteIconColor".concat((0,y.capitalize)(c))],"default"!==c&&"outlined"!==w),(0,i.default)(M,s["deleteIconOutlinedColor".concat((0,y.capitalize)(c))],"default"!==c&&"outlined"===w),M);E=h&&d.default.isValidElement(h)?d.default.cloneElement(h,{className:(0,p.default)(h.props.className,s.deleteIcon,A),onClick:this.handleDeleteIconClick}):d.default.createElement(m.default,{className:(0,p.default)(s.deleteIcon,A),onClick:this.handleDeleteIconClick})}var S=null;r&&d.default.isValidElement(r)&&(S=d.default.cloneElement(r,{className:(0,p.default)(s.avatar,r.props.className,(0,i.default)({},s["avatarColor".concat((0,y.capitalize)(c))],"default"!==c)),childrenClassName:(0,p.default)(s.avatarChildren,r.props.childrenClassName)}));var O=null;v&&d.default.isValidElement(v)&&(O=d.default.cloneElement(v,{className:(0,p.default)(s.icon,v.props.className,(0,i.default)({},s["iconColor".concat((0,y.capitalize)(c))],"default"!==c))}));var P=_;return P||(P=b||x||k?0:-1),d.default.createElement(f,(0,a.default)({role:"button",className:C,tabIndex:P,onClick:b,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,ref:function(e){t.chipRef=e}},T),S||O,d.default.createElement("span",{className:s.label},g),E)}}]),t}(d.default.Component);x.propTypes={},x.defaultProps={component:"div",color:"default",variant:"default"};var _=(0,v.default)(b,{name:"MuiChip"})(x);t.default=_},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(0)),i=r(n(41)),o=r(n(33)),s=a.default.createElement("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),l=function(e){return a.default.createElement(o.default,e,s)};(l=(0,i.default)(l)).muiName="SvgIcon";var u=l;t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t,n,r,a){return null};t.default=r},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var a=r(n(7)),i=r(n(10)),o=r(n(8)),s=r(n(0)),l=(r(n(2)),r(n(5))),u=r(n(9)),c=function(e){return{root:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),borderRadius:"50%",overflow:"hidden",userSelect:"none"},colorDefault:{color:e.palette.background.default,backgroundColor:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[600]},img:{width:"100%",height:"100%",textAlign:"center",objectFit:"cover"}}};function f(e){var t=e.alt,n=e.children,r=e.childrenClassName,u=e.classes,c=e.className,f=e.component,d=e.imgProps,p=e.sizes,h=e.src,m=e.srcSet,v=(0,o.default)(e,["alt","children","childrenClassName","classes","className","component","imgProps","sizes","src","srcSet"]),g=(0,l.default)(u.root,(0,i.default)({},u.colorDefault,n&&!h&&!m),c),y=null;if(h||m)y=s.default.createElement("img",(0,a.default)({alt:t,src:h,srcSet:m,sizes:p,className:u.img},d));else if(r&&s.default.isValidElement(n)){var b=(0,l.default)(r,n.props.className);y=s.default.cloneElement(n,{className:b})}else y=n;return s.default.createElement(f,(0,a.default)({className:g},v),y)}t.styles=c,f.propTypes={},f.defaultProps={component:"div"};var d=(0,u.default)(c,{name:"MuiAvatar"})(f);t.default=d},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var a=r(n(7)),i=r(n(8)),o=r(n(0)),s=r(n(2)),l=r(n(326)),u=r(n(9)),c=r(n(99)),f=r(n(121)),d=r(n(34)),p=n(83),h=n(332),m=r(n(122)),v=h.styles;function g(e,t){var n=e.autoWidth,r=e.children,s=e.classes,u=e.displayEmpty,f=e.IconComponent,d=e.input,h=e.inputProps,v=e.MenuProps,y=e.multiple,b=e.native,x=e.onClose,_=e.onOpen,w=e.open,T=e.renderValue,k=e.SelectDisplayProps,C=(e.variant,(0,i.default)(e,["autoWidth","children","classes","displayEmpty","IconComponent","input","inputProps","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"])),E=b?m.default:l.default,M=(0,p.formControlState)({props:e,context:t,states:["variant"]});return o.default.cloneElement(d,(0,a.default)({inputComponent:E,inputProps:(0,a.default)({children:r,IconComponent:f,variant:M.variant,type:void 0},b?{}:{autoWidth:n,displayEmpty:u,MenuProps:v,multiple:y,onClose:x,onOpen:_,open:w,renderValue:T,SelectDisplayProps:k},h,{classes:h?(0,c.default)({baseClasses:s,newClasses:h.classes,Component:g}):s},d?d.props.inputProps:{})},C))}t.styles=v,g.propTypes={},g.defaultProps={autoWidth:!1,displayEmpty:!1,IconComponent:f.default,input:o.default.createElement(d.default,null),multiple:!1,native:!1},g.contextTypes={muiFormControl:s.default.object},g.muiName="Select";var y=(0,u.default)(h.styles,{name:"MuiSelect"})(g);t.default=y},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(7)),i=r(n(10)),o=r(n(8)),s=r(n(103)),l=r(n(12)),u=r(n(13)),c=r(n(14)),f=r(n(15)),d=r(n(16)),p=r(n(55)),h=r(n(0)),m=(r(n(2)),r(n(5))),v=r(n(40)),g=(r(n(11)),r(n(119))),y=n(120),b=n(50);function x(e,t){return"object"===(0,p.default)(t)&&null!==t?e===t:String(e)===String(t)}var _=function(e){function t(e){var n;return(0,l.default)(this,t),(n=(0,c.default)(this,(0,f.default)(t).call(this))).ignoreNextBlur=!1,n.update=function(e){var t=e.event,r=e.open;n.isOpenControlled?r?n.props.onOpen(t):n.props.onClose(t):n.setState({menuMinWidth:n.props.autoWidth?null:n.displayRef.clientWidth,open:r})},n.handleClick=function(e){n.ignoreNextBlur=!0,n.update({open:!0,event:e})},n.handleClose=function(e){n.update({open:!1,event:e})},n.handleItemClick=function(e){return function(t){n.props.multiple||n.update({open:!1,event:t});var r=n.props,a=r.onChange,i=r.name;if(a){var o;if(n.props.multiple){var l=(o=Array.isArray(n.props.value)?(0,s.default)(n.props.value):[]).indexOf(e.props.value);-1===l?o.push(e.props.value):o.splice(l,1)}else o=e.props.value;t.persist(),t.target={value:o,name:i},a(t,e)}}},n.handleBlur=function(e){if(!0===n.ignoreNextBlur)return e.stopPropagation(),void(n.ignoreNextBlur=!1);if(n.props.onBlur){var t=n.props,r=t.value,a=t.name;e.persist(),e.target={value:r,name:a},n.props.onBlur(e)}},n.handleKeyDown=function(e){n.props.readOnly||-1!==["space","up","down"].indexOf((0,v.default)(e))&&(e.preventDefault(),n.ignoreNextBlur=!0,n.update({open:!0,event:e}))},n.handleDisplayRef=function(e){n.displayRef=e},n.handleInputRef=function(e){var t=n.props.inputRef;if(t){var r={node:e,value:n.props.value,focus:function(){n.displayRef.focus()}};(0,b.setRef)(t,r)}},n.isOpenControlled=void 0!==e.open,n.state={menuMinWidth:null,open:!1},n}return(0,d.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.isOpenControlled&&this.props.open&&(this.displayRef.focus(),this.forceUpdate()),this.props.autoFocus&&this.displayRef.focus()}},{key:"render",value:function(){var e,t,n=this,r=this.props,s=r.autoWidth,l=r.children,u=r.classes,c=r.className,f=r.disabled,d=r.displayEmpty,p=r.IconComponent,v=(r.inputRef,r.MenuProps),b=void 0===v?{}:v,_=r.multiple,w=r.name,T=(r.onBlur,r.onChange,r.onClose,r.onFocus),k=(r.onOpen,r.open),C=r.readOnly,E=r.renderValue,M=(r.required,r.SelectDisplayProps),A=r.tabIndex,S=r.type,O=void 0===S?"hidden":S,P=r.value,R=r.variant,L=(0,o.default)(r,["autoWidth","children","classes","className","disabled","displayEmpty","IconComponent","inputRef","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","required","SelectDisplayProps","tabIndex","type","value","variant"]),D=this.isOpenControlled&&this.displayRef?k:this.state.open;delete L["aria-invalid"];var I="",z=[],j=!1;((0,y.isFilled)(this.props)||d)&&(E?t=E(P):j=!0);var N=h.default.Children.map(l,function(e){if(!h.default.isValidElement(e))return null;var t;if(_){if(!Array.isArray(P))throw new Error("Material-UI: the `value` property must be an array when using the `Select` component with `multiple`.");(t=P.some(function(t){return x(t,e.props.value)}))&&j&&z.push(e.props.children)}else(t=x(P,e.props.value))&&j&&(I=e.props.children);return h.default.cloneElement(e,{onClick:n.handleItemClick(e),role:"option",selected:t,value:void 0,"data-value":e.props.value})});j&&(t=_?z.join(", "):I);var F,B=this.state.menuMinWidth;return!s&&this.isOpenControlled&&this.displayRef&&(B=this.displayRef.clientWidth),F=void 0!==A?A:f?null:0,h.default.createElement("div",{className:u.root},h.default.createElement("div",(0,a.default)({className:(0,m.default)(u.select,u.selectMenu,(e={},(0,i.default)(e,u.disabled,f),(0,i.default)(e,u.filled,"filled"===R),(0,i.default)(e,u.outlined,"outlined"===R),e),c),ref:this.handleDisplayRef,"aria-pressed":D?"true":"false",tabIndex:F,role:"button","aria-owns":D?"menu-".concat(w||""):void 0,"aria-haspopup":"true",onKeyDown:this.handleKeyDown,onBlur:this.handleBlur,onClick:f||C?null:this.handleClick,onFocus:T},M),t||h.default.createElement("span",{dangerouslySetInnerHTML:{__html:"&#8203;"}})),h.default.createElement("input",(0,a.default)({value:Array.isArray(P)?P.join(","):P,name:w,ref:this.handleInputRef,type:O},L)),h.default.createElement(p,{className:u.icon}),h.default.createElement(g.default,(0,a.default)({id:"menu-".concat(w||""),anchorEl:this.displayRef,open:D,onClose:this.handleClose},b,{MenuListProps:(0,a.default)({role:"listbox"},b.MenuListProps),PaperProps:(0,a.default)({},b.PaperProps,{style:(0,a.default)({minWidth:B},null!=b.PaperProps?b.PaperProps.style:null)})}),N))}}]),t}(h.default.Component);_.propTypes={};var w=_;t.default=w},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.default}});var a=r(n(328))},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(7)),i=r(n(8)),o=r(n(12)),s=r(n(13)),l=r(n(14)),u=r(n(15)),c=r(n(16)),f=r(n(0)),d=(r(n(2)),r(n(17))),p=r(n(40)),h=(r(n(11)),r(n(36))),m=r(n(24)),v=function(e){function t(){var e,n;(0,o.default)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=(0,l.default)(this,(e=(0,u.default)(t)).call.apply(e,[this].concat(a)))).state={currentTabIndex:null},n.handleBlur=function(e){n.blurTimer=setTimeout(function(){if(n.listRef){var e=n.listRef,t=(0,h.default)(e).activeElement;e.contains(t)||n.resetTabIndex()}},30),n.props.onBlur&&n.props.onBlur(e)},n.handleKeyDown=function(e){var t=n.listRef,r=(0,p.default)(e),a=(0,h.default)(t).activeElement;"up"!==r&&"down"!==r||a&&(!a||t.contains(a))?"down"===r?(e.preventDefault(),a.nextElementSibling&&a.nextElementSibling.focus()):"up"===r&&(e.preventDefault(),a.previousElementSibling&&a.previousElementSibling.focus()):n.selectedItemRef?n.selectedItemRef.focus():t.firstChild.focus(),n.props.onKeyDown&&n.props.onKeyDown(e,r)},n.handleItemFocus=function(e){var t=n.listRef;if(t)for(var r=0;r<t.children.length;r+=1)if(t.children[r]===e.currentTarget){n.setTabIndex(r);break}},n}return(0,c.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){this.resetTabIndex()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.blurTimer)}},{key:"setTabIndex",value:function(e){this.setState({currentTabIndex:e})}},{key:"focus",value:function(){var e=this.state.currentTabIndex,t=this.listRef;t&&t.children&&t.firstChild&&(e&&e>=0?t.children[e].focus():t.firstChild.focus())}},{key:"resetTabIndex",value:function(){for(var e=this.listRef,t=(0,h.default)(e).activeElement,n=[],r=0;r<e.children.length;r+=1)n.push(e.children[r]);var a=n.indexOf(t);return-1!==a?this.setTabIndex(a):this.selectedItemRef?this.setTabIndex(n.indexOf(this.selectedItemRef)):this.setTabIndex(0)}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,r=t.className,o=(t.onBlur,t.onKeyDown,(0,i.default)(t,["children","className","onBlur","onKeyDown"]));return f.default.createElement(m.default,(0,a.default)({role:"menu",ref:function(t){e.listRef=d.default.findDOMNode(t)},className:r,onKeyDown:this.handleKeyDown,onBlur:this.handleBlur},o),f.default.Children.map(n,function(t,n){return f.default.isValidElement(t)?f.default.cloneElement(t,{tabIndex:n===e.state.currentTabIndex?0:-1,ref:t.props.selected?function(t){e.selectedItemRef=d.default.findDOMNode(t)}:void 0,onFocus:e.handleItemFocus}):null}))}}]),t}(f.default.Component);v.propTypes={};var g=v;t.default=g},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var a=r(n(10)),i=r(n(7)),o=r(n(8)),s=r(n(0)),l=(r(n(2)),r(n(5))),u=r(n(330)),c=r(n(9)),f=function(e){var t="light"===e.palette.type,n=t?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return{root:{position:"relative"},formControl:{"label + &":{marginTop:16}},focused:{},disabled:{},underline:{"&:after":{borderBottom:"2px solid ".concat(e.palette.primary[t?"dark":"light"]),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},"&$focused:after":{transform:"scaleX(1)"},"&$error:after":{borderBottomColor:e.palette.error.main,transform:"scaleX(1)"},"&:before":{borderBottom:"1px solid ".concat(n),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},"&:hover:not($disabled):not($focused):not($error):before":{borderBottom:"2px solid ".concat(e.palette.text.primary)},"&$disabled:before":{borderBottom:"1px dotted ".concat(n)}},error:{},multiline:{},fullWidth:{},input:{},inputMarginDense:{},inputMultiline:{},inputType:{},inputTypeSearch:{}}};function d(e){var t=e.disableUnderline,n=e.classes,r=(0,o.default)(e,["disableUnderline","classes"]);return s.default.createElement(u.default,(0,i.default)({classes:(0,i.default)({},n,{root:(0,l.default)(n.root,(0,a.default)({},n.underline,!t)),underline:null})},r))}t.styles=f,d.propTypes={},u.default.defaultProps={fullWidth:!1,inputComponent:"input",multiline:!1,type:"text"},d.muiName="Input";var p=(0,c.default)(f,{name:"MuiInput"})(d);t.default=p},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.default}});var a=r(n(83))},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var a=r(n(7)),i=r(n(8)),o=r(n(12)),s=r(n(13)),l=r(n(14)),u=r(n(15)),c=r(n(16)),f=r(n(0)),d=(r(n(2)),r(n(5))),p=r(n(82)),h=r(n(81)),m=r(n(9)),v=n(50),g=19,y={root:{position:"relative",width:"100%"},textarea:{width:"100%",height:"100%",resize:"none",font:"inherit",padding:0,cursor:"inherit",boxSizing:"border-box",lineHeight:"inherit",border:"none",outline:"none",background:"transparent"},shadow:{overflow:"hidden",visibility:"hidden",position:"absolute",height:"auto",whiteSpace:"pre-wrap"}};t.styles=y;var b=function(e){function t(e){var n;return(0,o.default)(this,t),(n=(0,l.default)(this,(0,u.default)(t).call(this))).handleRefInput=function(e){n.inputRef=e,(0,v.setRef)(n.props.textareaRef,e)},n.handleRefSinglelineShadow=function(e){n.singlelineShadowRef=e},n.handleRefShadow=function(e){n.shadowRef=e},n.handleChange=function(e){n.value=e.target.value,n.isControlled||(n.shadowRef.value=n.value,n.syncHeightWithShadow()),n.props.onChange&&n.props.onChange(e)},n.isControlled=null!=e.value,n.value=e.value||e.defaultValue||"",n.state={height:Number(e.rows)*g},"undefined"!=typeof window&&(n.handleResize=(0,p.default)(function(){n.syncHeightWithShadow()},166)),n}return(0,c.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){this.syncHeightWithShadow()}},{key:"componentDidUpdate",value:function(){this.syncHeightWithShadow()}},{key:"componentWillUnmount",value:function(){this.handleResize.clear()}},{key:"syncHeightWithShadow",value:function(){var e=this.props;if(this.shadowRef){this.isControlled&&(this.shadowRef.value=null==e.value?"":String(e.value));var t=this.singlelineShadowRef.scrollHeight,n=this.shadowRef.scrollHeight;void 0!==n&&(Number(e.rowsMax)>=Number(e.rows)&&(n=Math.min(Number(e.rowsMax)*t,n)),n=Math.max(n,t),Math.abs(this.state.height-n)>1&&this.setState({height:n}))}}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.className,r=e.defaultValue,o=(e.onChange,e.rows),s=(e.rowsMax,e.textareaRef,e.value),l=e.style,u=(0,i.default)(e,["classes","className","defaultValue","onChange","rows","rowsMax","textareaRef","value","style"]);return f.default.createElement("div",{className:t.root},f.default.createElement(h.default,{target:"window",onResize:this.handleResize}),f.default.createElement("textarea",{"aria-hidden":"true",className:(0,d.default)(t.textarea,t.shadow),readOnly:!0,ref:this.handleRefSinglelineShadow,rows:"1",tabIndex:-1,value:""}),f.default.createElement("textarea",{"aria-hidden":"true",className:(0,d.default)(t.textarea,t.shadow),defaultValue:r,readOnly:!0,ref:this.handleRefShadow,rows:o,tabIndex:-1,value:s}),f.default.createElement("textarea",(0,a.default)({rows:o,className:(0,d.default)(t.textarea,n),defaultValue:r,value:s,onChange:this.handleChange,ref:this.handleRefInput,style:(0,a.default)({height:this.state.height},l)},u)))}}]),t}(f.default.Component);b.propTypes={},b.defaultProps={rows:1};var x=(0,m.default)(y,{name:"MuiPrivateTextarea"})(b);t.default=x},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var a=r(n(7)),i=r(n(8)),o=r(n(0)),s=r(n(2)),l=r(n(122)),u=r(n(9)),c=n(83),f=r(n(121)),d=r(n(34)),p=function(e){return{root:{position:"relative",width:"100%"},select:{"-moz-appearance":"none","-webkit-appearance":"none",userSelect:"none",paddingRight:32,borderRadius:0,height:"1.1875em",width:"calc(100% - 32px)",minWidth:16,cursor:"pointer","&:focus":{background:"light"===e.palette.type?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)",borderRadius:0},"&::-ms-expand":{display:"none"},"&$disabled":{cursor:"default"}},filled:{width:"calc(100% - 44px)"},outlined:{width:"calc(100% - 46px)",borderRadius:e.shape.borderRadius},selectMenu:{width:"auto",height:"auto",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",minHeight:"1.1875em"},disabled:{},icon:{position:"absolute",right:0,top:"calc(50% - 12px)",color:e.palette.action.active,"pointer-events":"none"}}};function h(e,t){var n=e.children,r=e.classes,s=e.IconComponent,u=e.input,f=e.inputProps,d=(e.variant,(0,i.default)(e,["children","classes","IconComponent","input","inputProps","variant"])),p=(0,c.formControlState)({props:e,context:t,states:["variant"]});return o.default.cloneElement(u,(0,a.default)({inputComponent:l.default,inputProps:(0,a.default)({children:n,classes:r,IconComponent:s,variant:p.variant,type:void 0},f,u?u.props.inputProps:{})},d))}t.styles=p,h.propTypes={},h.defaultProps={IconComponent:f.default,input:o.default.createElement(d.default,null)},h.contextTypes={muiFormControl:s.default.object},h.muiName="Select";var m=(0,u.default)(p,{name:"MuiNativeSelect"})(h);t.default=m},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var a=r(n(10)),i=r(n(8)),o=r(n(7)),s=r(n(0)),l=(r(n(2)),r(n(5))),u=r(n(9)),c=r(n(19)),f=function(e){return{root:(0,o.default)({},e.typography.subheading,{height:24,boxSizing:"content-box",width:"auto",overflow:"hidden",whiteSpace:"nowrap","&$selected":{}}),gutters:{paddingLeft:16,paddingRight:16},selected:{}}};function d(e){var t,n=e.classes,r=e.className,u=e.component,f=e.disableGutters,d=e.role,p=e.selected,h=(0,i.default)(e,["classes","className","component","disableGutters","role","selected"]);return s.default.createElement(c.default,(0,o.default)({button:!0,role:d,tabIndex:-1,component:u,selected:p,disableGutters:f,className:(0,l.default)(n.root,(t={},(0,a.default)(t,n.selected,p),(0,a.default)(t,n.gutters,!f),t),r)},h))}t.styles=f,d.propTypes={},d.defaultProps={component:"li",disableGutters:!1,role:"menuitem"};var p=(0,u.default)(f,{name:"MuiMenuItem"})(d);t.default=p},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var a=r(n(10)),i=r(n(8)),o=r(n(7)),s=r(n(0)),l=(r(n(2)),r(n(5))),u=r(n(9)),c=n(32),f=r(n(62)),d=(r(n(78)),n(29)),p=function(e){return{root:(0,o.default)({},e.typography.button,{boxSizing:"border-box",minWidth:64,minHeight:36,padding:"8px 16px",borderRadius:e.shape.borderRadius,color:e.palette.text.primary,transition:e.transitions.create(["background-color","box-shadow","border"],{duration:e.transitions.duration.short}),"&:hover":{textDecoration:"none",backgroundColor:(0,c.fade)(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"},"&$disabled":{backgroundColor:"transparent"}},"&$disabled":{color:e.palette.action.disabled}}),label:{width:"100%",display:"inherit",alignItems:"inherit",justifyContent:"inherit"},text:{},textPrimary:{color:e.palette.primary.main,"&:hover":{backgroundColor:(0,c.fade)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},textSecondary:{color:e.palette.secondary.main,"&:hover":{backgroundColor:(0,c.fade)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},flat:{},flatPrimary:{},flatSecondary:{},outlined:{border:"1px solid ".concat("light"===e.palette.type?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)")},outlinedPrimary:{color:e.palette.primary.main,border:"1px solid ".concat((0,c.fade)(e.palette.primary.main,.5)),"&:hover":{border:"1px solid ".concat(e.palette.primary.main),backgroundColor:(0,c.fade)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&$disabled":{border:"1px solid ".concat(e.palette.action.disabled)}},outlinedSecondary:{color:e.palette.secondary.main,border:"1px solid ".concat((0,c.fade)(e.palette.secondary.main,.5)),"&:hover":{border:"1px solid ".concat(e.palette.secondary.main),backgroundColor:(0,c.fade)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&$disabled":{border:"1px solid ".concat(e.palette.action.disabled)}},contained:{color:e.palette.getContrastText(e.palette.grey[300]),backgroundColor:e.palette.grey[300],boxShadow:e.shadows[2],"&$focusVisible":{boxShadow:e.shadows[6]},"&:active":{boxShadow:e.shadows[8]},"&$disabled":{color:e.palette.action.disabled,boxShadow:e.shadows[0],backgroundColor:e.palette.action.disabledBackground},"&:hover":{backgroundColor:e.palette.grey.A100,"@media (hover: none)":{backgroundColor:e.palette.grey[300]},"&$disabled":{backgroundColor:e.palette.action.disabledBackground}}},containedPrimary:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:e.palette.primary.dark,"@media (hover: none)":{backgroundColor:e.palette.primary.main}}},containedSecondary:{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.main,"&:hover":{backgroundColor:e.palette.secondary.dark,"@media (hover: none)":{backgroundColor:e.palette.secondary.main}}},raised:{},raisedPrimary:{},raisedSecondary:{},fab:{borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,boxShadow:e.shadows[6],"&:active":{boxShadow:e.shadows[12]}},extendedFab:{borderRadius:24,padding:"0 16px",width:"auto",minWidth:48,height:48},focusVisible:{},disabled:{},colorInherit:{color:"inherit"},mini:{width:40,height:40},sizeSmall:{padding:"7px 8px",minWidth:64,minHeight:32,fontSize:e.typography.pxToRem(13)},sizeLarge:{padding:"8px 24px",minWidth:112,minHeight:40,fontSize:e.typography.pxToRem(15)},fullWidth:{width:"100%"}}};function h(e){var t,n=e.children,r=e.classes,u=e.className,c=e.color,p=e.disabled,h=e.disableFocusRipple,m=e.focusVisibleClassName,v=e.fullWidth,g=e.mini,y=e.size,b=e.variant,x=(0,i.default)(e,["children","classes","className","color","disabled","disableFocusRipple","focusVisibleClassName","fullWidth","mini","size","variant"]),_="fab"===b||"extendedFab"===b,w="contained"===b||"raised"===b,T="text"===b||"flat"===b,k=(0,l.default)(r.root,(t={},(0,a.default)(t,r.fab,_),(0,a.default)(t,r.mini,_&&g),(0,a.default)(t,r.extendedFab,"extendedFab"===b),(0,a.default)(t,r.text,T),(0,a.default)(t,r.textPrimary,T&&"primary"===c),(0,a.default)(t,r.textSecondary,T&&"secondary"===c),(0,a.default)(t,r.flat,"text"===b||"flat"===b),(0,a.default)(t,r.flatPrimary,("text"===b||"flat"===b)&&"primary"===c),(0,a.default)(t,r.flatSecondary,("text"===b||"flat"===b)&&"secondary"===c),(0,a.default)(t,r.contained,w||_),(0,a.default)(t,r.containedPrimary,(w||_)&&"primary"===c),(0,a.default)(t,r.containedSecondary,(w||_)&&"secondary"===c),(0,a.default)(t,r.raised,w||_),(0,a.default)(t,r.raisedPrimary,(w||_)&&"primary"===c),(0,a.default)(t,r.raisedSecondary,(w||_)&&"secondary"===c),(0,a.default)(t,r.outlined,"outlined"===b),(0,a.default)(t,r.outlinedPrimary,"outlined"===b&&"primary"===c),(0,a.default)(t,r.outlinedSecondary,"outlined"===b&&"secondary"===c),(0,a.default)(t,r["size".concat((0,d.capitalize)(y))],"medium"!==y),(0,a.default)(t,r.disabled,p),(0,a.default)(t,r.fullWidth,v),(0,a.default)(t,r.colorInherit,"inherit"===c),t),u);return s.default.createElement(f.default,(0,o.default)({className:k,disabled:p,focusRipple:!h,focusVisibleClassName:(0,l.default)(r.focusVisible,m)},x),s.default.createElement("span",{className:r.label},n))}t.styles=p,h.propTypes={},h.defaultProps={color:"default",component:"button",disabled:!1,disableFocusRipple:!1,fullWidth:!1,mini:!1,size:"medium",type:"button",variant:"text"};var m=(0,u.default)(p,{name:"MuiButton"})(h);t.default=m},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var a=r(n(7)),i=r(n(10)),o=r(n(8)),s=r(n(0)),l=(r(n(2)),r(n(5))),u=r(n(336)),c=r(n(9)),f=r(n(62)),d=n(29),p=function(e){return{root:{cursor:"pointer",display:"inline-flex",justifyContent:"flex-start",flexDirection:"inherit",alignItems:"center","&:hover":{color:e.palette.text.primary},"&:focus":{color:e.palette.text.primary}},active:{color:e.palette.text.primary,"& $icon":{opacity:1}},icon:{height:16,marginRight:4,marginLeft:4,opacity:0,transition:e.transitions.create(["opacity","transform"],{duration:e.transitions.duration.shorter}),userSelect:"none",width:16},iconDirectionDesc:{transform:"rotate(0deg)"},iconDirectionAsc:{transform:"rotate(180deg)"}}};function h(e){var t=e.active,n=e.children,r=e.classes,u=e.className,c=e.direction,p=e.hideSortIcon,h=e.IconComponent,m=(0,o.default)(e,["active","children","classes","className","direction","hideSortIcon","IconComponent"]);return s.default.createElement(f.default,(0,a.default)({className:(0,l.default)(r.root,(0,i.default)({},r.active,t),u),component:"span",disableRipple:!0},m),n,p&&!t?null:s.default.createElement(h,{className:(0,l.default)(r.icon,r["iconDirection".concat((0,d.capitalize)(c))])}))}t.styles=p,h.propTypes={},h.defaultProps={active:!1,direction:"desc",hideSortIcon:!1,IconComponent:u.default};var m=(0,c.default)(p,{name:"MuiTableSortLabel"})(h);t.default=m},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(0)),i=r(n(41)),o=r(n(33)),s=a.default.createElement("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),l=function(e){return a.default.createElement(o.default,e,s)};(l=(0,i.default)(l)).muiName="SvgIcon";var u=l;t.default=u},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var a=r(n(7)),i=r(n(8)),o=r(n(12)),s=r(n(13)),l=r(n(14)),u=r(n(15)),c=r(n(16)),f=r(n(0)),d=r(n(2)),p=r(n(5)),h=r(n(9)),m={root:{display:"table-footer-group"}};t.styles=m;var v=function(e){function t(){return(0,o.default)(this,t),(0,l.default)(this,(0,u.default)(t).apply(this,arguments))}return(0,c.default)(t,e),(0,s.default)(t,[{key:"getChildContext",value:function(){return{tablelvl2:{variant:"footer"}}}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.className,r=e.component,o=(0,i.default)(e,["classes","className","component"]);return f.default.createElement(r,(0,a.default)({className:(0,p.default)(t.root,n)},o))}}]),t}(f.default.Component);v.propTypes={},v.defaultProps={component:"tfoot"},v.childContextTypes={tablelvl2:d.default.object};var g=(0,h.default)(m,{name:"MuiTableFooter"})(v);t.default=g},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var a=r(n(7)),i=r(n(8)),o=r(n(0)),s=(r(n(2)),r(n(5))),l=r(n(9)),u=function(e){return{root:{marginRight:16,color:e.palette.action.active,flexShrink:0,display:"inline-flex"}}};function c(e){var t=e.children,n=e.classes,r=e.className,l=(0,i.default)(e,["children","classes","className"]);return o.default.createElement("div",(0,a.default)({className:(0,s.default)(n.root,r)},l),t)}t.styles=u,c.propTypes={};var f=(0,l.default)(u,{name:"MuiListItemIcon"})(c);t.default=f},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var a=r(n(7)),i=r(n(10)),o=r(n(8)),s=r(n(0)),l=(r(n(2)),r(n(5))),u=r(n(22)),c=r(n(9)),f={root:{display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center"},filled:{"&$positionStart":{marginTop:16}},positionStart:{marginRight:8},positionEnd:{marginLeft:8}};function d(e){var t,n=e.children,r=e.component,c=e.classes,f=e.className,d=e.disableTypography,p=e.position,h=e.variant,m=(0,o.default)(e,["children","component","classes","className","disableTypography","position","variant"]);return s.default.createElement(r,(0,a.default)({className:(0,l.default)(c.root,(t={},(0,i.default)(t,c.filled,"filled"===h),(0,i.default)(t,c.positionStart,"start"===p),(0,i.default)(t,c.positionEnd,"end"===p),t),f)},m),"string"!=typeof n||d?n:s.default.createElement(u.default,{color:"textSecondary"},n))}t.styles=f,d.propTypes={},d.defaultProps={component:"div",disableTypography:!1};var p=(0,c.default)(f,{name:"MuiInputAdornment"})(d);t.default=p},function(e,t,n){"use strict";var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var a=r(n(7)),i=r(n(10)),o=r(n(8)),s=r(n(0)),l=(r(n(2)),r(n(5))),u=r(n(9)),c=n(29),f=(r(n(78)),44);function d(e){return e=function(e,t,n){return(Math.min(Math.max(t,e),n)-t)/(n-t)}(e,0,1),e=(e-=1)*e*e+1}var p=function(e){return{root:{display:"inline-block",lineHeight:1},static:{transition:e.transitions.create("transform")},indeterminate:{animation:"mui-progress-circular-rotate 1.4s linear infinite"},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},svg:{},circle:{stroke:"currentColor"},circleStatic:{transition:e.transitions.create("stroke-dashoffset")},circleIndeterminate:{animation:"mui-progress-circular-dash 1.4s ease-in-out infinite",strokeDasharray:"80px, 200px",strokeDashoffset:"0px"},"@keyframes mui-progress-circular-rotate":{"100%":{transform:"rotate(360deg)"}},"@keyframes mui-progress-circular-dash":{"0%":{strokeDasharray:"1px, 200px",strokeDashoffset:"0px"},"50%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-15px"},"100%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-120px"}},circleDisableShrink:{animation:"none"}}};function h(e){var t,n,r=e.classes,u=e.className,p=e.color,h=e.disableShrink,m=e.size,v=e.style,g=e.thickness,y=e.value,b=e.variant,x=(0,o.default)(e,["classes","className","color","disableShrink","size","style","thickness","value","variant"]),_={},w={},T={};if("determinate"===b||"static"===b){var k=2*Math.PI*((f-g)/2);_.strokeDasharray=k.toFixed(3),T["aria-valuenow"]=Math.round(y),"static"===b?(_.strokeDashoffset="".concat(((100-y)/100*k).toFixed(3),"px"),w.transform="rotate(-90deg)"):(_.strokeDashoffset="".concat((function(e){return e*e}((100-y)/100)*k).toFixed(3),"px"),w.transform="rotate(".concat((270*d(y/70)).toFixed(3),"deg)"))}return s.default.createElement("div",(0,a.default)({className:(0,l.default)(r.root,(t={},(0,i.default)(t,r["color".concat((0,c.capitalize)(p))],"inherit"!==p),(0,i.default)(t,r.indeterminate,"indeterminate"===b),(0,i.default)(t,r.static,"static"===b),t),u),style:(0,a.default)({width:m,height:m},w,v),role:"progressbar"},T,x),s.default.createElement("svg",{className:r.svg,viewBox:"".concat(f/2," ").concat(f/2," ").concat(f," ").concat(f)},s.default.createElement("circle",{className:(0,l.default)(r.circle,(n={},(0,i.default)(n,r.circleIndeterminate,"indeterminate"===b),(0,i.default)(n,r.circleStatic,"static"===b),(0,i.default)(n,r.circleDisableShrink,h),n)),style:_,cx:f,cy:f,r:(f-g)/2,fill:"none",strokeWidth:g})))}t.styles=p,h.propTypes={},h.defaultProps={color:"primary",disableShrink:!1,size:40,thickness:3.6,value:0,variant:"indeterminate"};var m=(0,u.default)(p,{name:"MuiCircularProgress",flip:!1})(h);t.default=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=function(e){var t=function(t){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.p=Promise.resolve(),t.resizeHandler=null,t.handlers={},t.syncWindowResize=t.syncWindowResize.bind(t),t.syncEventHandlers=t.syncEventHandlers.bind(t),t.attachUpdateEvents=t.attachUpdateEvents.bind(t),t.getRef=t.getRef.bind(t),t.handleUpdate=t.handleUpdate.bind(t),t.figureCallback=t.figureCallback.bind(t),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),r(n,[{key:"componentDidMount",value:function(){var t=this;this.p=this.p.then(function(){return e.newPlot(t.el,{data:t.props.data,layout:t.props.layout,config:t.props.config,frames:t.props.frames})}).then(function(){return t.syncWindowResize(null,!0)}).then(this.syncEventHandlers).then(this.attachUpdateEvents).then(function(){return t.figureCallback(t.props.onInitialized)}).catch(function(e){return console.error("Error while plotting:",e),t.props.onError&&t.props.onError(e)})}},{key:"componentWillUpdate",value:function(t){var n=this;if(void 0===t.revision||t.revision!==this.props.revision){var r=this.props.frames&&this.props.frames.length?this.props.frames.length:0,a=t.frames&&t.frames.length?t.frames.length:0;t.layout===this.props.layout&&t.data===this.props.data&&t.config===this.props.config&&a===r||(this.p=this.p.then(function(){return e.react(n.el,{data:t.data,layout:t.layout,config:t.config,frames:t.frames})}).then(function(){return n.syncEventHandlers(t)}).then(function(){return n.syncWindowResize(t)}).then(function(){return n.figureCallback(t.onUpdate)}).catch(function(e){console.error("Error while plotting:",e),n.props.onError&&n.props.onError(e)}))}}},{key:"componentWillUnmount",value:function(){this.figureCallback(this.props.onPurge),this.resizeHandler&&c&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null),this.removeUpdateEvents(),e.purge(this.el)}},{key:"attachUpdateEvents",value:function(){if(this.el&&this.el.removeListener)for(var e=0;e<u.length;e++)this.el.on(u[e],this.handleUpdate)}},{key:"removeUpdateEvents",value:function(){if(this.el&&this.el.removeListener)for(var e=0;e<u.length;e++)this.el.removeListener(u[e],this.handleUpdate)}},{key:"handleUpdate",value:function(){this.figureCallback(this.props.onUpdate)}},{key:"figureCallback",value:function(e){if("function"==typeof e){var t=this.el,n=t.data,r=t.layout,a=this.el._transitionData?this.el._transitionData._frames:null,i={data:n,layout:r,frames:a};e(i,this.el)}}},{key:"syncWindowResize",value:function(t,n){var r=this,a=t||this.props;c&&(a.useResizeHandler&&!this.resizeHandler?(this.resizeHandler=function(){return e.Plots.resize(r.el)},window.addEventListener("resize",this.resizeHandler),n&&this.resizeHandler()):!a.useResizeHandler&&this.resizeHandler&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null))}},{key:"getRef",value:function(e){this.el=e,this.props.debug&&c&&(window.gd=this.el)}},{key:"syncEventHandlers",value:function(e){for(var t=e||this.props,n=0;n<l.length;n++){var r=l[n],a=t["on"+r],i=!!this.handlers[r];a&&!i?(this.handlers[r]=a,this.el.on("plotly_"+r.toLowerCase(),this.handlers[r])):!a&&i&&(this.el.removeListener("plotly_"+r.toLowerCase(),this.handlers[r]),delete this.handlers[r])}}},{key:"render",value:function(){return i.default.createElement("div",{id:this.props.divId,style:this.props.style,ref:this.getRef,className:this.props.className})}}]),n}(a.Component);t.propTypes={data:o.default.arrayOf(o.default.object),config:o.default.object,layout:o.default.object,frames:o.default.arrayOf(o.default.object),revision:o.default.number,onInitialized:o.default.func,onPurge:o.default.func,onError:o.default.func,onUpdate:o.default.func,debug:o.default.bool,style:o.default.object,className:o.default.string,useResizeHandler:o.default.bool,divId:o.default.string};for(var n=0;n<l.length;n++)t.propTypes["on"+l[n]]=o.default.func;return t.defaultProps={debug:!1,useResizeHandler:!1,data:[],style:{position:"relative",display:"inline-block"}},t};var a=n(0),i=s(a),o=s(n(2));function s(e){return e&&e.__esModule?e:{default:e}}var l=["AfterExport","AfterPlot","Animated","AnimatingFrame","AnimationInterrupted","AutoSize","BeforeExport","ButtonClicked","Click","ClickAnnotation","Deselect","DoubleClick","Framework","Hover","LegendClick","LegendDoubleClick","Relayout","Restyle","Redraw","Selected","Selecting","SliderChange","SliderEnd","SliderStart","Transitioning","TransitionInterrupted","Unhover"],u=["plotly_restyle","plotly_redraw","plotly_relayout","plotly_doubleclick","plotly_animated"],c="undefined"!=typeof window;e.exports=t.default},function(e,t,n){(function(t){var n;e.exports=function e(t,r,a){function i(s,l){if(!r[s]){if(!t[s]){var u="function"==typeof n&&n;if(!l&&u)return n(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var f=r[s]={exports:{}};t[s][0].call(f.exports,function(e){var n=t[s][1][e];return i(n||e)},f,f.exports,e,t,r,a)}return r[s].exports}for(var o="function"==typeof n&&n,s=0;s<a.length;s++)i(a[s]);return i}({1:[function(e,t,n){"use strict";var r=e("../src/lib"),a={"X,X div":"direction:ltr;font-family:'Open Sans', verdana, arial, sans-serif;margin:0;padding:0;","X input,X button":"font-family:'Open Sans', verdana, arial, sans-serif;","X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;z-index:1001;","X .modebar--hover":"opacity:0;-webkit-transition:opacity 0.3s ease 0s;-moz-transition:opacity 0.3s ease 0s;-ms-transition:opacity 0.3s ease 0s;-o-transition:opacity 0.3s ease 0s;transition:opacity 0.3s ease 0s;","X:hover .modebar--hover":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;margin-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;margin-left:0px;margin-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":"content:'';position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;","X [data-title]:after":"content:attr(data-title);background:#69738a;color:white;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid transparent;border-left-color:#69738a;margin-top:8px;margin-right:-30px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:white;","X .select-outline-2":"stroke:black;stroke-dasharray:2px 2px;",Y:"font-family:'Open Sans';position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;","Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,0.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:0.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var i in a){var o=i.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");r.addStyleRule(o,a[i])}},{"../src/lib":696}],2:[function(e,t,n){"use strict";t.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},newplotlylogo:{name:"newplotlylogo",svg:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'><defs><style>.cls-1 {fill: #119dff;} .cls-2 {fill: #25fefd;} .cls-3 {fill: #fff;}</style></defs><title>plotly-logomark</title><g id='symbol'><rect class='cls-1' width='132' height='132' rx='6' ry='6'/><circle class='cls-2' cx='78' cy='54' r='6'/><circle class='cls-2' cx='102' cy='30' r='6'/><circle class='cls-2' cx='78' cy='30' r='6'/><circle class='cls-2' cx='54' cy='30' r='6'/><circle class='cls-2' cx='30' cy='30' r='6'/><circle class='cls-2' cx='30' cy='54' r='6'/><path class='cls-3' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/><path class='cls-3' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/><path class='cls-3' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/><path class='cls-3' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/></g></svg>"}}},{}],3:[function(e,t,n){"use strict";t.exports=e("../src/transforms/aggregate")},{"../src/transforms/aggregate":1155}],4:[function(e,t,n){"use strict";t.exports=e("../src/traces/bar")},{"../src/traces/bar":843}],5:[function(e,t,n){"use strict";t.exports=e("../src/traces/barpolar")},{"../src/traces/barpolar":855}],6:[function(e,t,n){"use strict";t.exports=e("../src/traces/box")},{"../src/traces/box":865}],7:[function(e,t,n){"use strict";t.exports=e("../src/components/calendars")},{"../src/components/calendars":568}],8:[function(e,t,n){"use strict";t.exports=e("../src/traces/candlestick")},{"../src/traces/candlestick":874}],9:[function(e,t,n){"use strict";t.exports=e("../src/traces/carpet")},{"../src/traces/carpet":893}],10:[function(e,t,n){"use strict";t.exports=e("../src/traces/choropleth")},{"../src/traces/choropleth":907}],11:[function(e,t,n){"use strict";t.exports=e("../src/traces/cone")},{"../src/traces/cone":915}],12:[function(e,t,n){"use strict";t.exports=e("../src/traces/contour")},{"../src/traces/contour":930}],13:[function(e,t,n){"use strict";t.exports=e("../src/traces/contourcarpet")},{"../src/traces/contourcarpet":941}],14:[function(e,t,n){"use strict";t.exports=e("../src/core")},{"../src/core":675}],15:[function(e,t,n){"use strict";t.exports=e("../src/transforms/filter")},{"../src/transforms/filter":1156}],16:[function(e,t,n){"use strict";t.exports=e("../src/transforms/groupby")},{"../src/transforms/groupby":1157}],17:[function(e,t,n){"use strict";t.exports=e("../src/traces/heatmap")},{"../src/traces/heatmap":953}],18:[function(e,t,n){"use strict";t.exports=e("../src/traces/heatmapgl")},{"../src/traces/heatmapgl":963}],19:[function(e,t,n){"use strict";t.exports=e("../src/traces/histogram")},{"../src/traces/histogram":974}],20:[function(e,t,n){"use strict";t.exports=e("../src/traces/histogram2d")},{"../src/traces/histogram2d":981}],21:[function(e,t,n){"use strict";t.exports=e("../src/traces/histogram2dcontour")},{"../src/traces/histogram2dcontour":985}],22:[function(e,t,n){"use strict";var r=e("./core");r.register([e("./bar"),e("./box"),e("./heatmap"),e("./histogram"),e("./histogram2d"),e("./histogram2dcontour"),e("./pie"),e("./contour"),e("./scatterternary"),e("./violin"),e("./scatter3d"),e("./surface"),e("./mesh3d"),e("./cone"),e("./streamtube"),e("./scattergeo"),e("./choropleth"),e("./scattergl"),e("./splom"),e("./pointcloud"),e("./heatmapgl"),e("./parcoords"),e("./parcats"),e("./scattermapbox"),e("./sankey"),e("./table"),e("./carpet"),e("./scattercarpet"),e("./contourcarpet"),e("./ohlc"),e("./candlestick"),e("./scatterpolar"),e("./scatterpolargl"),e("./barpolar")]),r.register([e("./aggregate"),e("./filter"),e("./groupby"),e("./sort")]),r.register([e("./calendars")]),t.exports=r},{"./aggregate":3,"./bar":4,"./barpolar":5,"./box":6,"./calendars":7,"./candlestick":8,"./carpet":9,"./choropleth":10,"./cone":11,"./contour":12,"./contourcarpet":13,"./core":14,"./filter":15,"./groupby":16,"./heatmap":17,"./heatmapgl":18,"./histogram":19,"./histogram2d":20,"./histogram2dcontour":21,"./mesh3d":23,"./ohlc":24,"./parcats":25,"./parcoords":26,"./pie":27,"./pointcloud":28,"./sankey":29,"./scatter3d":30,"./scattercarpet":31,"./scattergeo":32,"./scattergl":33,"./scattermapbox":34,"./scatterpolar":35,"./scatterpolargl":36,"./scatterternary":37,"./sort":38,"./splom":39,"./streamtube":40,"./surface":41,"./table":42,"./violin":43}],23:[function(e,t,n){"use strict";t.exports=e("../src/traces/mesh3d")},{"../src/traces/mesh3d":990}],24:[function(e,t,n){"use strict";t.exports=e("../src/traces/ohlc")},{"../src/traces/ohlc":995}],25:[function(e,t,n){"use strict";t.exports=e("../src/traces/parcats")},{"../src/traces/parcats":1004}],26:[function(e,t,n){"use strict";t.exports=e("../src/traces/parcoords")},{"../src/traces/parcoords":1013}],27:[function(e,t,n){"use strict";t.exports=e("../src/traces/pie")},{"../src/traces/pie":1024}],28:[function(e,t,n){"use strict";t.exports=e("../src/traces/pointcloud")},{"../src/traces/pointcloud":1033}],29:[function(e,t,n){"use strict";t.exports=e("../src/traces/sankey")},{"../src/traces/sankey":1039}],30:[function(e,t,n){"use strict";t.exports=e("../src/traces/scatter3d")},{"../src/traces/scatter3d":1075}],31:[function(e,t,n){"use strict";t.exports=e("../src/traces/scattercarpet")},{"../src/traces/scattercarpet":1081}],32:[function(e,t,n){"use strict";t.exports=e("../src/traces/scattergeo")},{"../src/traces/scattergeo":1088}],33:[function(e,t,n){"use strict";t.exports=e("../src/traces/scattergl")},{"../src/traces/scattergl":1096}],34:[function(e,t,n){"use strict";t.exports=e("../src/traces/scattermapbox")},{"../src/traces/scattermapbox":1102}],35:[function(e,t,n){"use strict";t.exports=e("../src/traces/scatterpolar")},{"../src/traces/scatterpolar":1109}],36:[function(e,t,n){"use strict";t.exports=e("../src/traces/scatterpolargl")},{"../src/traces/scatterpolargl":1113}],37:[function(e,t,n){"use strict";t.exports=e("../src/traces/scatterternary")},{"../src/traces/scatterternary":1119}],38:[function(e,t,n){"use strict";t.exports=e("../src/transforms/sort")},{"../src/transforms/sort":1159}],39:[function(e,t,n){"use strict";t.exports=e("../src/traces/splom")},{"../src/traces/splom":1124}],40:[function(e,t,n){"use strict";t.exports=e("../src/traces/streamtube")},{"../src/traces/streamtube":1129}],41:[function(e,t,n){"use strict";t.exports=e("../src/traces/surface")},{"../src/traces/surface":1134}],42:[function(e,t,n){"use strict";t.exports=e("../src/traces/table")},{"../src/traces/table":1142}],43:[function(e,t,n){"use strict";t.exports=e("../src/traces/violin")},{"../src/traces/violin":1150}],44:[function(e,t,n){"use strict";t.exports=function(e,t){e=e||document.body;var n=[.01,1/0];"distanceLimits"in(t=t||{})&&(n[0]=t.distanceLimits[0],n[1]=t.distanceLimits[1]),"zoomMin"in t&&(n[0]=t.zoomMin),"zoomMax"in t&&(n[1]=t.zoomMax);var u=a({center:t.center||[0,0,0],up:t.up||[0,1,0],eye:t.eye||[0,0,10],mode:t.mode||"orbit",distanceLimits:n}),c=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],f=0,d=e.clientWidth,p=e.clientHeight,h={view:u,element:e,delay:t.delay||16,rotateSpeed:t.rotateSpeed||1,zoomSpeed:t.zoomSpeed||1,translateSpeed:t.translateSpeed||1,flipX:!!t.flipX,flipY:!!t.flipY,modes:u.modes,tick:function(){var t=r(),n=this.delay;u.idle(t-n),u.flush(t-(100+2*n));var a=t-2*n;u.recalcMatrix(a);for(var i=!0,o=u.computedMatrix,s=0;s<16;++s)i=i&&c[s]===o[s],c[s]=o[s];var l=e.clientWidth===d&&e.clientHeight===p;return d=e.clientWidth,p=e.clientHeight,i?!l:(f=Math.exp(u.computedRadius[0]),!0)},lookAt:function(e,t,n){u.lookAt(u.lastT(),e,t,n)},rotate:function(e,t,n){u.rotate(u.lastT(),e,t,n)},pan:function(e,t,n){u.pan(u.lastT(),e,t,n)},translate:function(e,t,n){u.translate(u.lastT(),e,t,n)}};Object.defineProperties(h,{matrix:{get:function(){return u.computedMatrix},set:function(e){return u.setMatrix(u.lastT(),e),u.computedMatrix},enumerable:!0},mode:{get:function(){return u.getMode()},set:function(e){return u.setMode(e),u.getMode()},enumerable:!0},center:{get:function(){return u.computedCenter},set:function(e){return u.lookAt(u.lastT(),e),u.computedCenter},enumerable:!0},eye:{get:function(){return u.computedEye},set:function(e){return u.lookAt(u.lastT(),null,e),u.computedEye},enumerable:!0},up:{get:function(){return u.computedUp},set:function(e){return u.lookAt(u.lastT(),null,null,e),u.computedUp},enumerable:!0},distance:{get:function(){return f},set:function(e){return u.setDistance(u.lastT(),e),e},enumerable:!0},distanceLimits:{get:function(){return u.getDistanceLimits(n)},set:function(e){return u.setDistanceLimits(e),e},enumerable:!0}}),e.addEventListener("contextmenu",function(e){return e.preventDefault(),!1});var m=0,v=0,g={shift:!1,control:!1,alt:!1,meta:!1};function y(t,n,a,i){var o=1/e.clientHeight,s=o*(n-m),l=o*(a-v),c=h.flipX?1:-1,d=h.flipY?1:-1,p=Math.PI*h.rotateSpeed,y=r();if(1&t)i.shift?u.rotate(y,0,0,-s*p):u.rotate(y,c*p*s,-d*p*l,0);else if(2&t)u.pan(y,-h.translateSpeed*s*f,h.translateSpeed*l*f,0);else if(4&t){var b=h.zoomSpeed*l/window.innerHeight*(y-u.lastT())*50;u.pan(y,0,0,f*(Math.exp(b)-1))}m=n,v=a,g=i}return i(e,y),e.addEventListener("touchstart",function(t){var n=s(t.changedTouches[0],e);y(0,n[0],n[1],g),y(1,n[0],n[1],g),t.preventDefault()},!!l&&{passive:!1}),e.addEventListener("touchmove",function(t){var n=s(t.changedTouches[0],e);y(1,n[0],n[1],g),t.preventDefault()},!!l&&{passive:!1}),e.addEventListener("touchend",function(t){s(t.changedTouches[0],e),y(0,m,v,g),t.preventDefault()},!!l&&{passive:!1}),o(e,function(e,t,n){var a=h.flipX?1:-1,i=h.flipY?1:-1,o=r();if(Math.abs(e)>Math.abs(t))u.rotate(o,0,0,-e*a*Math.PI*h.rotateSpeed/window.innerWidth);else{var s=h.zoomSpeed*i*t/window.innerHeight*(o-u.lastT())/100;u.pan(o,0,0,f*(Math.exp(s)-1))}},!0),h};var r=e("right-now"),a=e("3d-view"),i=e("mouse-change"),o=e("mouse-wheel"),s=e("mouse-event-offset"),l=e("has-passive-events")},{"3d-view":45,"has-passive-events":394,"mouse-change":418,"mouse-event-offset":419,"mouse-wheel":421,"right-now":480}],45:[function(e,t,n){"use strict";t.exports=function(e){var t=(e=e||{}).eye||[0,0,1],n=e.center||[0,0,0],s=e.up||[0,1,0],l=e.distanceLimits||[0,1/0],u=e.mode||"turntable",c=r(),f=a(),d=i();return c.setDistanceLimits(l[0],l[1]),c.lookAt(0,t,n,s),f.setDistanceLimits(l[0],l[1]),f.lookAt(0,t,n,s),d.setDistanceLimits(l[0],l[1]),d.lookAt(0,t,n,s),new o({turntable:c,orbit:f,matrix:d},u)};var r=e("turntable-camera-controller"),a=e("orbit-camera-controller"),i=e("matrix-camera-controller");function o(e,t){this._controllerNames=Object.keys(e),this._controllerList=this._controllerNames.map(function(t){return e[t]}),this._mode=t,this._active=e[t],this._active||(this._mode="turntable",this._active=e.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var s=o.prototype;[["flush",1],["idle",1],["lookAt",4],["rotate",4],["pan",4],["translate",4],["setMatrix",2],["setDistanceLimits",2],["setDistance",2]].forEach(function(e){for(var t=e[0],n=[],r=0;r<e[1];++r)n.push("a"+r);var a="var cc=this._controllerList;for(var i=0;i<cc.length;++i){cc[i]."+e[0]+"("+n.join()+")}";s[t]=Function.apply(null,n.concat(a))}),s.recalcMatrix=function(e){this._active.recalcMatrix(e)},s.getDistance=function(e){return this._active.getDistance(e)},s.getDistanceLimits=function(e){return this._active.getDistanceLimits(e)},s.lastT=function(){return this._active.lastT()},s.setMode=function(e){if(e!==this._mode){var t=this._controllerNames.indexOf(e);if(!(t<0)){var n=this._active,r=this._controllerList[t],a=Math.max(n.lastT(),r.lastT());n.recalcMatrix(a),r.setMatrix(a,n.computedMatrix),this._active=r,this._mode=e,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},s.getMode=function(){return this._mode}},{"matrix-camera-controller":416,"orbit-camera-controller":439,"turntable-camera-controller":519}],46:[function(e,t,n){!function(r,a){"object"==typeof n&&void 0!==t?a(n,e("d3-array"),e("d3-collection"),e("d3-interpolate")):a(r.d3=r.d3||{},r.d3,r.d3,r.d3)}(this,function(e,t,n,r){"use strict";e.sankey=function(){var e={},a=24,i=8,o=[1,1],s=[],l=[],u=2/3;function c(){for(var e,t=s,n=0;t.length;)e=[],t.forEach(function(t){t.x=n,t.dx=a,t.sourceLinks.forEach(function(t){e.indexOf(t.target)<0&&e.push(t.target)})}),t=e,++n;(function(e){s.forEach(function(t){t.sourceLinks.length||(t.x=e-1)})})(n),function(e){s.forEach(function(t){t.x*=e})}((o[0]-a)/(n-1))}function f(){function e(e,t){return e.source.y-t.source.y||e.originalIndex-t.originalIndex}function t(e,t){return e.target.y-t.target.y||e.originalIndex-t.originalIndex}s.forEach(function(n){n.sourceLinks.sort(t),n.targetLinks.sort(e)}),s.forEach(function(e){var t=0,n=0;e.sourceLinks.forEach(function(e){e.sy=t,t+=e.dy}),e.targetLinks.forEach(function(e){e.ty=n,n+=e.dy})})}function d(e){return e.y+e.dy/2}function p(e){return e.value}return e.nodeWidth=function(t){return arguments.length?(a=+t,e):a},e.nodePadding=function(t){return arguments.length?(i=+t,e):i},e.nodes=function(t){return arguments.length?(s=t,e):s},e.links=function(t){return arguments.length?(l=t,e):l},e.size=function(t){return arguments.length?(o=t,e):o},e.layout=function(r){return s.forEach(function(e){e.sourceLinks=[],e.targetLinks=[]}),l.forEach(function(e,t){var n=e.source,r=e.target;"number"==typeof n&&(n=e.source=s[e.source]),"number"==typeof r&&(r=e.target=s[e.target]),e.originalIndex=t,n.sourceLinks.push(e),r.targetLinks.push(e)}),s.forEach(function(e){e.value=Math.max(t.sum(e.sourceLinks,p),t.sum(e.targetLinks,p))}),c(),function(e){var r=n.nest().key(function(e){return e.x}).sortKeys(t.ascending).entries(s).map(function(e){return e.values});(function(){var e=t.max(r,function(e){return e.length}),n=u*o[1]/(e-1);i>n&&(i=n);var a=t.min(r,function(e){return(o[1]-(e.length-1)*i)/t.sum(e,p)});r.forEach(function(e){e.forEach(function(e,t){e.y=t,e.dy=e.value*a})}),l.forEach(function(e){e.dy=e.value*a})})(),h();for(var a=1;e>0;--e)f(a*=.99),h(),c(a),h();function c(e){function n(e){return d(e.source)*e.value}r.forEach(function(r){r.forEach(function(r){if(r.targetLinks.length){var a=t.sum(r.targetLinks,n)/t.sum(r.targetLinks,p);r.y+=(a-d(r))*e}})})}function f(e){function n(e){return d(e.target)*e.value}r.slice().reverse().forEach(function(r){r.forEach(function(r){if(r.sourceLinks.length){var a=t.sum(r.sourceLinks,n)/t.sum(r.sourceLinks,p);r.y+=(a-d(r))*e}})})}function h(){r.forEach(function(e){var t,n,r,a=0,s=e.length;for(e.sort(m),r=0;r<s;++r)t=e[r],(n=a-t.y)>0&&(t.y+=n),a=t.y+t.dy+i;if((n=a-i-o[1])>0)for(a=t.y-=n,r=s-2;r>=0;--r)t=e[r],(n=t.y+t.dy+i-a)>0&&(t.y-=n),a=t.y})}function m(e,t){return e.y-t.y}}(r),f(),e},e.relayout=function(){return f(),e},e.link=function(){var e=.5;function t(t){var n=t.source.x+t.source.dx,a=t.target.x,i=r.interpolateNumber(n,a),o=i(e),s=i(1-e),l=t.source.y+t.sy,u=l+t.dy,c=t.target.y+t.ty,f=c+t.dy;return"M"+n+","+l+"C"+o+","+l+" "+s+","+c+" "+a+","+c+"L"+a+","+f+"C"+s+","+f+" "+o+","+u+" "+n+","+u+"Z"}return t.curvature=function(n){return arguments.length?(e=+n,t):e},t},e},Object.defineProperty(e,"__esModule",{value:!0})})},{"d3-array":140,"d3-collection":141,"d3-interpolate":145}],47:[function(e,t,n){"use strict";var r="undefined"==typeof WeakMap?e("weak-map"):WeakMap,a=e("gl-buffer"),i=e("gl-vao"),o=new r;t.exports=function(e){var t=o.get(e),n=t&&(t._triangleBuffer.handle||t._triangleBuffer.buffer);if(!n||!e.isBuffer(n)){var r=a(e,new Float32Array([-1,-1,-1,4,4,-1]));(t=i(e,[{buffer:r,type:e.FLOAT,size:2}]))._triangleBuffer=r,o.set(e,t)}t.bind(),e.drawArrays(e.TRIANGLES,0,3),t.unbind()}},{"gl-buffer":230,"gl-vao":310,"weak-map":529}],48:[function(e,t,n){t.exports=function(e){var t=0,n=0,r=0,a=0;return e.map(function(e){var i=(e=e.slice())[0],o=i.toUpperCase();if(i!=o)switch(e[0]=o,i){case"a":e[6]+=r,e[7]+=a;break;case"v":e[1]+=a;break;case"h":e[1]+=r;break;default:for(var s=1;s<e.length;)e[s++]+=r,e[s++]+=a}switch(o){case"Z":r=t,a=n;break;case"H":r=e[1];break;case"V":a=e[1];break;case"M":r=t=e[1],a=n=e[2];break;default:r=e[e.length-2],a=e[e.length-1]}return e})}},{}],49:[function(e,t,n){var r=e("pad-left");t.exports=function(e,t,n){t="number"==typeof t?t:1,n=n||": ";var a=e.split(/\r?\n/),i=String(a.length+t-1).length;return a.map(function(e,a){var o=a+t,s=String(o).length,l=r(o,i-s);return l+n+e}).join("\n")}},{"pad-left":440}],50:[function(e,t,n){"use strict";t.exports=function(e){var t=e.length;if(0===t)return[];if(1===t)return[0];for(var n=e[0].length,r=[e[0]],i=[0],o=1;o<t;++o)if(r.push(e[o]),a(r,n)){if(i.push(o),i.length===n+1)return i}else r.pop();return i};var r=e("robust-orientation");function a(e,t){for(var n=new Array(t+1),a=0;a<e.length;++a)n[a]=e[a];for(var a=0;a<=e.length;++a){for(var i=e.length;i<=t;++i){for(var o=new Array(t),s=0;s<t;++s)o[s]=Math.pow(i+1-a,s);n[i]=o}var l=r.apply(void 0,n);if(l)return!0}return!1}},{"robust-orientation":486}],51:[function(e,t,n){"use strict";t.exports=function(e,t){return r(t).filter(function(n){for(var r=new Array(n.length),i=0;i<n.length;++i)r[i]=t[n[i]];return a(r)*e<1})};var r=e("delaunay-triangulate"),a=e("circumradius")},{circumradius:102,"delaunay-triangulate":150}],52:[function(e,t,n){t.exports=function(e,t){return a(r(e,t))};var r=e("alpha-complex"),a=e("simplicial-complex-boundary")},{"alpha-complex":51,"simplicial-complex-boundary":493}],53:[function(e,t,n){"use strict";t.exports=function(e,t){if(!e||null==e.length)throw Error("Argument should be an array");t=null==t?1:Math.floor(t);for(var n=Array(2*t),r=0;r<t;r++){for(var a=-1/0,i=1/0,o=r,s=e.length;o<s;o+=t)e[o]>a&&(a=e[o]),e[o]<i&&(i=e[o]);n[r]=i,n[t+r]=a}return n}},{}],54:[function(e,t,n){"use strict";var r=e("array-bounds");t.exports=function(e,t,n){if(!e||null==e.length)throw Error("Argument should be an array");null==t&&(t=1),null==n&&(n=r(e,t));for(var a=0;a<t;a++){var i=n[t+a],o=n[a],s=a,l=e.length;if(i===1/0&&o===-1/0)for(s=a;s<l;s+=t)e[s]=e[s]===i?1:e[s]===o?0:.5;else if(i===1/0)for(s=a;s<l;s+=t)e[s]=e[s]===i?1:0;else if(o===-1/0)for(s=a;s<l;s+=t)e[s]=e[s]===o?0:1;else{var u=i-o;for(s=a;s<l;s+=t)e[s]=0===u?.5:(e[s]-o)/u}}return e}},{"array-bounds":53}],55:[function(e,t,n){t.exports=function(e,t){var n="number"==typeof e,r="number"==typeof t;n&&!r?(t=e,e=0):n||r||(e=0,t=0);var a=(t|=0)-(e|=0);if(a<0)throw new Error("array length must be positive");for(var i=new Array(a),o=0,s=e;o<a;o++,s++)i[o]=s;return i}},{}],56:[function(e,n,r){(function(t){"use strict";
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function r(e,t){if(e===t)return 0;for(var n=e.length,r=t.length,a=0,i=Math.min(n,r);a<i;++a)if(e[a]!==t[a]){n=e[a],r=t[a];break}return n<r?-1:r<n?1:0}function a(e){return t.Buffer&&"function"==typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var i=e("util/"),o=Object.prototype.hasOwnProperty,s=Array.prototype.slice,l="foo"===function(){}.name;function u(e){return Object.prototype.toString.call(e)}function c(e){return!a(e)&&"function"==typeof t.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer)))}var f=n.exports=g,d=/\s*function\s+([^\(\s]*)\s*/;function p(e){if(i.isFunction(e)){if(l)return e.name;var t=e.toString(),n=t.match(d);return n&&n[1]}}function h(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function m(e){if(l||!i.isFunction(e))return i.inspect(e);var t=p(e),n=t?": "+t:"";return"[Function"+n+"]"}function v(e,t,n,r,a){throw new f.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:a})}function g(e,t){e||v(e,!0,t,"==",f.ok)}function y(e,t,n,o){if(e===t)return!0;if(a(e)&&a(t))return 0===r(e,t);if(i.isDate(e)&&i.isDate(t))return e.getTime()===t.getTime();if(i.isRegExp(e)&&i.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(c(e)&&c(t)&&u(e)===u(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===r(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(a(e)!==a(t))return!1;var l=(o=o||{actual:[],expected:[]}).actual.indexOf(e);return-1!==l&&l===o.expected.indexOf(t)||(o.actual.push(e),o.expected.push(t),function(e,t,n,r){if(null===e||void 0===e||null===t||void 0===t)return!1;if(i.isPrimitive(e)||i.isPrimitive(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var a=b(e),o=b(t);if(a&&!o||!a&&o)return!1;if(a)return e=s.call(e),t=s.call(t),y(e,t,n);var l,u,c=w(e),f=w(t);if(c.length!==f.length)return!1;for(c.sort(),f.sort(),u=c.length-1;u>=0;u--)if(c[u]!==f[u])return!1;for(u=c.length-1;u>=0;u--)if(l=c[u],!y(e[l],t[l],n,r))return!1;return!0}(e,t,n,o))}return n?e===t:e==t}function b(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function x(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function _(e,t,n,r){var a;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),a=function(e){var t;try{e()}catch(e){t=e}return t}(t),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!a&&v(a,n,"Missing expected exception"+r);var o="string"==typeof r,s=!e&&i.isError(a),l=!e&&a&&!n;if((s&&o&&x(a,n)||l)&&v(a,n,"Got unwanted exception"+r),e&&a&&n&&!x(a,n)||!e&&a)throw a}f.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=function(e){return h(m(e.actual),128)+" "+e.operator+" "+h(m(e.expected),128)}(this),this.generatedMessage=!0);var t=e.stackStartFunction||v;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var r=n.stack,a=p(t),i=r.indexOf("\n"+a);if(i>=0){var o=r.indexOf("\n",i+1);r=r.substring(o+1)}this.stack=r}}},i.inherits(f.AssertionError,Error),f.fail=v,f.ok=g,f.equal=function(e,t,n){e!=t&&v(e,t,n,"==",f.equal)},f.notEqual=function(e,t,n){e==t&&v(e,t,n,"!=",f.notEqual)},f.deepEqual=function(e,t,n){y(e,t,!1)||v(e,t,n,"deepEqual",f.deepEqual)},f.deepStrictEqual=function(e,t,n){y(e,t,!0)||v(e,t,n,"deepStrictEqual",f.deepStrictEqual)},f.notDeepEqual=function(e,t,n){y(e,t,!1)&&v(e,t,n,"notDeepEqual",f.notDeepEqual)},f.notDeepStrictEqual=function e(t,n,r){y(t,n,!0)&&v(t,n,r,"notDeepStrictEqual",e)},f.strictEqual=function(e,t,n){e!==t&&v(e,t,n,"===",f.strictEqual)},f.notStrictEqual=function(e,t,n){e===t&&v(e,t,n,"!==",f.notStrictEqual)},f.throws=function(e,t,n){_(!0,e,t,n)},f.doesNotThrow=function(e,t,n){_(!1,e,t,n)},f.ifError=function(e){if(e)throw e};var w=Object.keys||function(e){var t=[];for(var n in e)o.call(e,n)&&t.push(n);return t}}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"util/":59}],57:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],58:[function(e,t,n){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],59:[function(e,n,r){(function(t,n){var a=/%[sdj%]/g;r.format=function(e){if(!g(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(s(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,i=r.length,o=String(e).replace(a,function(e){if("%%"===e)return"%";if(n>=i)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}}),l=r[n];n<i;l=r[++n])m(l)||!x(l)?o+=" "+l:o+=" "+s(l);return o},r.deprecate=function(e,a){if(y(n.process))return function(){return r.deprecate(e,a).apply(this,arguments)};if(!0===t.noDeprecation)return e;var i=!1;return function(){if(!i){if(t.throwDeprecation)throw new Error(a);t.traceDeprecation?console.trace(a):console.error(a),i=!0}return e.apply(this,arguments)}};var i,o={};function s(e,t){var n={seen:[],stylize:u};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),h(t)?n.showHidden=t:t&&r._extend(n,t),y(n.showHidden)&&(n.showHidden=!1),y(n.depth)&&(n.depth=2),y(n.colors)&&(n.colors=!1),y(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=l),c(n,e,n.depth)}function l(e,t){var n=s.styles[t];return n?"["+s.colors[n][0]+"m"+e+"["+s.colors[n][1]+"m":e}function u(e,t){return e}function c(e,t,n){if(e.customInspect&&t&&T(t.inspect)&&t.inspect!==r.inspect&&(!t.constructor||t.constructor.prototype!==t)){var a=t.inspect(n,e);return g(a)||(a=c(e,a,n)),a}var i=function(e,t){if(y(t))return e.stylize("undefined","undefined");if(g(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return v(t)?e.stylize(""+t,"number"):h(t)?e.stylize(""+t,"boolean"):m(t)?e.stylize("null","null"):void 0}(e,t);if(i)return i;var o=Object.keys(t),s=function(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(t)),w(t)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return f(t);if(0===o.length){if(T(t)){var l=t.name?": "+t.name:"";return e.stylize("[Function"+l+"]","special")}if(b(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(_(t))return e.stylize(Date.prototype.toString.call(t),"date");if(w(t))return f(t)}var u,x="",k=!1,C=["{","}"];if(p(t)&&(k=!0,C=["[","]"]),T(t)){var E=t.name?": "+t.name:"";x=" [Function"+E+"]"}return b(t)&&(x=" "+RegExp.prototype.toString.call(t)),_(t)&&(x=" "+Date.prototype.toUTCString.call(t)),w(t)&&(x=" "+f(t)),0!==o.length||k&&0!=t.length?n<0?b(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),u=k?function(e,t,n,r,a){for(var i=[],o=0,s=t.length;o<s;++o)M(t,String(o))?i.push(d(e,t,n,r,String(o),!0)):i.push("");return a.forEach(function(a){a.match(/^\d+$/)||i.push(d(e,t,n,r,a,!0))}),i}(e,t,n,s,o):o.map(function(r){return d(e,t,n,s,r,k)}),e.seen.pop(),function(e,t,n){return e.reduce(function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}(u,x,C)):C[0]+x+C[1]}function f(e){return"["+Error.prototype.toString.call(e)+"]"}function d(e,t,n,r,a,i){var o,s,l;if((l=Object.getOwnPropertyDescriptor(t,a)||{value:t[a]}).get?s=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(s=e.stylize("[Setter]","special")),M(r,a)||(o="["+a+"]"),s||(e.seen.indexOf(l.value)<0?(s=m(n)?c(e,l.value,null):c(e,l.value,n-1)).indexOf("\n")>-1&&(s=i?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")):s=e.stylize("[Circular]","special")),y(o)){if(i&&a.match(/^\d+$/))return s;(o=JSON.stringify(""+a)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+s}function p(e){return Array.isArray(e)}function h(e){return"boolean"==typeof e}function m(e){return null===e}function v(e){return"number"==typeof e}function g(e){return"string"==typeof e}function y(e){return void 0===e}function b(e){return x(e)&&"[object RegExp]"===k(e)}function x(e){return"object"==typeof e&&null!==e}function _(e){return x(e)&&"[object Date]"===k(e)}function w(e){return x(e)&&("[object Error]"===k(e)||e instanceof Error)}function T(e){return"function"==typeof e}function k(e){return Object.prototype.toString.call(e)}function C(e){return e<10?"0"+e.toString(10):e.toString(10)}r.debuglog=function(e){if(y(i)&&(i=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!o[e])if(new RegExp("\\b"+e+"\\b","i").test(i)){var n=t.pid;o[e]=function(){var t=r.format.apply(r,arguments);console.error("%s %d: %s",e,n,t)}}else o[e]=function(){};return o[e]},r.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},r.isArray=p,r.isBoolean=h,r.isNull=m,r.isNullOrUndefined=function(e){return null==e},r.isNumber=v,r.isString=g,r.isSymbol=function(e){return"symbol"==typeof e},r.isUndefined=y,r.isRegExp=b,r.isObject=x,r.isDate=_,r.isError=w,r.isFunction=T,r.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},r.isBuffer=e("./support/isBuffer");var E=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function M(e,t){return Object.prototype.hasOwnProperty.call(e,t)}r.log=function(){console.log("%s - %s",function(){var e=new Date,t=[C(e.getHours()),C(e.getMinutes()),C(e.getSeconds())].join(":");return[e.getDate(),E[e.getMonth()],t].join(" ")}(),r.format.apply(r,arguments))},r.inherits=e("inherits"),r._extend=function(e,t){if(!t||!x(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(this,e("_process"),void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":58,_process:465,inherits:57}],60:[function(e,t,n){t.exports=function(e){return atob(e)}},{}],61:[function(e,t,n){"use strict";t.exports=function(e,t){for(var n=t.length,i=new Array(n+1),o=0;o<n;++o){for(var s=new Array(n+1),l=0;l<=n;++l)s[l]=e[l][o];i[o]=s}i[n]=new Array(n+1);for(var o=0;o<=n;++o)i[n][o]=1;for(var u=new Array(n+1),o=0;o<n;++o)u[o]=t[o];u[n]=1;var c=r(i,u),f=a(c[n+1]);0===f&&(f=1);for(var d=new Array(n+1),o=0;o<=n;++o)d[o]=a(c[o])/f;return d};var r=e("robust-linear-solve");function a(e){for(var t=0,n=0;n<e.length;++n)t+=e[n];return t}},{"robust-linear-solve":485}],62:[function(e,t,n){"use strict";n.byteLength=function(e){var t=u(e),n=t[0],r=t[1];return 3*(n+r)/4-r},n.toByteArray=function(e){for(var t,n=u(e),r=n[0],o=n[1],s=new i(function(e,t,n){return 3*(t+n)/4-n}(0,r,o)),l=0,c=o>0?r-4:r,f=0;f<c;f+=4)t=a[e.charCodeAt(f)]<<18|a[e.charCodeAt(f+1)]<<12|a[e.charCodeAt(f+2)]<<6|a[e.charCodeAt(f+3)],s[l++]=t>>16&255,s[l++]=t>>8&255,s[l++]=255&t;return 2===o&&(t=a[e.charCodeAt(f)]<<2|a[e.charCodeAt(f+1)]>>4,s[l++]=255&t),1===o&&(t=a[e.charCodeAt(f)]<<10|a[e.charCodeAt(f+1)]<<4|a[e.charCodeAt(f+2)]>>2,s[l++]=t>>8&255,s[l++]=255&t),s},n.fromByteArray=function(e){for(var t,n=e.length,a=n%3,i=[],o=0,s=n-a;o<s;o+=16383)i.push(f(e,o,o+16383>s?s:o+16383));return 1===a?(t=e[n-1],i.push(r[t>>2]+r[t<<4&63]+"==")):2===a&&(t=(e[n-2]<<8)+e[n-1],i.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),i.join("")};for(var r=[],a=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,l=o.length;s<l;++s)r[s]=o[s],a[o.charCodeAt(s)]=s;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");-1===n&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function c(e){return r[e>>18&63]+r[e>>12&63]+r[e>>6&63]+r[63&e]}function f(e,t,n){for(var r,a=[],i=t;i<n;i+=3)r=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(255&e[i+2]),a.push(c(r));return a.join("")}a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63},{}],63:[function(e,t,n){"use strict";var r=e("./lib/rationalize");t.exports=function(e,t){return r(e[0].mul(t[1]).add(t[0].mul(e[1])),e[1].mul(t[1]))}},{"./lib/rationalize":73}],64:[function(e,t,n){"use strict";t.exports=function(e,t){return e[0].mul(t[1]).cmp(t[0].mul(e[1]))}},{}],65:[function(e,t,n){"use strict";var r=e("./lib/rationalize");t.exports=function(e,t){return r(e[0].mul(t[1]),e[1].mul(t[0]))}},{"./lib/rationalize":73}],66:[function(e,t,n){"use strict";var r=e("./is-rat"),a=e("./lib/is-bn"),i=e("./lib/num-to-bn"),o=e("./lib/str-to-bn"),s=e("./lib/rationalize"),l=e("./div");t.exports=function e(t,n){if(r(t))return n?l(t,e(n)):[t[0].clone(),t[1].clone()];var u,c,f=0;if(a(t))u=t.clone();else if("string"==typeof t)u=o(t);else{if(0===t)return[i(0),i(1)];if(t===Math.floor(t))u=i(t);else{for(;t!==Math.floor(t);)t*=Math.pow(2,256),f-=256;u=i(t)}}if(r(n))u.mul(n[1]),c=n[0].clone();else if(a(n))c=n.clone();else if("string"==typeof n)c=o(n);else if(n)if(n===Math.floor(n))c=i(n);else{for(;n!==Math.floor(n);)n*=Math.pow(2,256),f+=256;c=i(n)}else c=i(1);return f>0?u=u.ushln(f):f<0&&(c=c.ushln(-f)),s(u,c)}},{"./div":65,"./is-rat":67,"./lib/is-bn":71,"./lib/num-to-bn":72,"./lib/rationalize":73,"./lib/str-to-bn":74}],67:[function(e,t,n){"use strict";var r=e("./lib/is-bn");t.exports=function(e){return Array.isArray(e)&&2===e.length&&r(e[0])&&r(e[1])}},{"./lib/is-bn":71}],68:[function(e,t,n){"use strict";var r=e("bn.js");t.exports=function(e){return e.cmp(new r(0))}},{"bn.js":82}],69:[function(e,t,n){"use strict";var r=e("./bn-sign");t.exports=function(e){var t=e.length,n=e.words,a=0;if(1===t)a=n[0];else if(2===t)a=n[0]+67108864*n[1];else for(var i=0;i<t;i++){var o=n[i];a+=o*Math.pow(67108864,i)}return r(e)*a}},{"./bn-sign":68}],70:[function(e,t,n){"use strict";var r=e("double-bits"),a=e("bit-twiddle").countTrailingZeros;t.exports=function(e){var t=a(r.lo(e));if(t<32)return t;var n=a(r.hi(e));return n>20?52:n+32}},{"bit-twiddle":80,"double-bits":152}],71:[function(e,t,n){"use strict";e("bn.js"),t.exports=function(e){return e&&"object"==typeof e&&Boolean(e.words)}},{"bn.js":82}],72:[function(e,t,n){"use strict";var r=e("bn.js"),a=e("double-bits");t.exports=function(e){var t=a.exponent(e);return t<52?new r(e):new r(e*Math.pow(2,52-t)).ushln(t-52)}},{"bn.js":82,"double-bits":152}],73:[function(e,t,n){"use strict";var r=e("./num-to-bn"),a=e("./bn-sign");t.exports=function(e,t){var n=a(e),i=a(t);if(0===n)return[r(0),r(1)];if(0===i)return[r(0),r(0)];i<0&&(e=e.neg(),t=t.neg());var o=e.gcd(t);return o.cmpn(1)?[e.div(o),t.div(o)]:[e,t]}},{"./bn-sign":68,"./num-to-bn":72}],74:[function(e,t,n){"use strict";var r=e("bn.js");t.exports=function(e){return new r(e)}},{"bn.js":82}],75:[function(e,t,n){"use strict";var r=e("./lib/rationalize");t.exports=function(e,t){return r(e[0].mul(t[0]),e[1].mul(t[1]))}},{"./lib/rationalize":73}],76:[function(e,t,n){"use strict";var r=e("./lib/bn-sign");t.exports=function(e){return r(e[0])*r(e[1])}},{"./lib/bn-sign":68}],77:[function(e,t,n){"use strict";var r=e("./lib/rationalize");t.exports=function(e,t){return r(e[0].mul(t[1]).sub(e[1].mul(t[0])),e[1].mul(t[1]))}},{"./lib/rationalize":73}],78:[function(e,t,n){"use strict";var r=e("./lib/bn-to-num"),a=e("./lib/ctz");t.exports=function(e){var t=e[0],n=e[1];if(0===t.cmpn(0))return 0;var i=t.abs().divmod(n.abs()),o=i.div,s=r(o),l=i.mod,u=t.negative!==n.negative?-1:1;if(0===l.cmpn(0))return u*s;if(s){var c=a(s)+4,f=r(l.ushln(c).divRound(n));return u*(s+f*Math.pow(2,-c))}var d=n.bitLength()-l.bitLength()+53,f=r(l.ushln(d).divRound(n));return d<1023?u*f*Math.pow(2,-d):(f*=Math.pow(2,-1023),u*f*Math.pow(2,1023-d))}},{"./lib/bn-to-num":69,"./lib/ctz":70}],79:[function(e,t,n){"use strict";function r(e,t,n,r,a,i){var o=["function ",e,"(a,l,h,",r.join(","),"){",i?"":"var i=",n?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a",a?".get(m)":"[m]"];return i?t.indexOf("c")<0?o.push(";if(x===y){return m}else if(x<=y){"):o.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):o.push(";if(",t,"){i=m;"),n?o.push("l=m+1}else{h=m-1}"):o.push("h=m-1}else{l=m+1}"),o.push("}"),i?o.push("return -1};"):o.push("return i};"),o.join("")}function a(e,t,n,a){var i=new Function([r("A","x"+e+"y",t,["y"],!1,a),r("B","x"+e+"y",t,["y"],!0,a),r("P","c(x,y)"+e+"0",t,["y","c"],!1,a),r("Q","c(x,y)"+e+"0",t,["y","c"],!0,a),"function dispatchBsearch",n,"(a,y,c,l,h){if(a.shape){if(typeof(c)==='function'){return Q(a,(l===undefined)?0:l|0,(h===undefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c===undefined)?0:c|0,(l===undefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)==='function'){return P(a,(l===undefined)?0:l|0,(h===undefined)?a.length-1:h|0,y,c)}else{return A(a,(c===undefined)?0:c|0,(l===undefined)?a.length-1:l|0,y)}}}return dispatchBsearch",n].join(""));return i()}t.exports={ge:a(">=",!1,"GE"),gt:a(">",!1,"GT"),lt:a("<",!0,"LT"),le:a("<=",!0,"LE"),eq:a("-",!0,"EQ",!0)}},{}],80:[function(e,t,n){"use strict";"use restrict";function r(e){var t=32;return(e&=-e)&&t--,65535&e&&(t-=16),16711935&e&&(t-=8),252645135&e&&(t-=4),858993459&e&&(t-=2),1431655765&e&&(t-=1),t}n.INT_BITS=32,n.INT_MAX=2147483647,n.INT_MIN=-1<<31,n.sign=function(e){return(e>0)-(e<0)},n.abs=function(e){var t=e>>31;return(e^t)-t},n.min=function(e,t){return t^(e^t)&-(e<t)},n.max=function(e,t){return e^(e^t)&-(e<t)},n.isPow2=function(e){return!(e&e-1||!e)},n.log2=function(e){var t,n;return t=(e>65535)<<4,t|=n=((e>>>=t)>255)<<3,t|=n=((e>>>=n)>15)<<2,(t|=n=((e>>>=n)>3)<<1)|(e>>>=n)>>1},n.log10=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0},n.popCount=function(e){return 16843009*((e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135)>>>24},n.countTrailingZeros=r,n.nextPow2=function(e){return e+=0===e,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,1+(e|=e>>>16)},n.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)-(e>>>1)},n.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,27030>>>(e&=15)&1};var a=new Array(256);!function(e){for(var t=0;t<256;++t){var n=t,r=t,a=7;for(n>>>=1;n;n>>>=1)r<<=1,r|=1&n,--a;e[t]=r<<a&255}}(a),n.reverse=function(e){return a[255&e]<<24|a[e>>>8&255]<<16|a[e>>>16&255]<<8|a[e>>>24&255]},n.interleave2=function(e,t){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))<<1},n.deinterleave2=function(e,t){return(e=65535&((e=16711935&((e=252645135&((e=858993459&((e=e>>>t&1431655765)|e>>>1))|e>>>2))|e>>>4))|e>>>16))<<16>>16},n.interleave3=function(e,t,n){return e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2),(e|=(t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2))<<1)|(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<2},n.deinterleave3=function(e,t){return(e=1023&((e=4278190335&((e=251719695&((e=3272356035&((e=e>>>t&1227133513)|e>>>2))|e>>>4))|e>>>8))|e>>>16))<<22>>22},n.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>r(e)+1}},{}],81:[function(e,t,n){"use strict";var r=e("clamp");t.exports=function(e,t){t||(t={});var n,o,s,l,u,c,f,d,p,h,m,v=null==t.cutoff?.25:t.cutoff,g=null==t.radius?8:t.radius,y=t.channel||0;if(ArrayBuffer.isView(e)||Array.isArray(e)){if(!t.width||!t.height)throw Error("For raw data width and height should be provided by options");n=t.width,o=t.height,l=e,c=t.stride?t.stride:Math.floor(e.length/n/o)}else window.HTMLCanvasElement&&e instanceof window.HTMLCanvasElement?(f=(d=e).getContext("2d"),n=d.width,o=d.height,p=f.getImageData(0,0,n,o),l=p.data,c=4):window.CanvasRenderingContext2D&&e instanceof window.CanvasRenderingContext2D?(d=e.canvas,f=e,n=d.width,o=d.height,p=f.getImageData(0,0,n,o),l=p.data,c=4):window.ImageData&&e instanceof window.ImageData&&(p=e,n=e.width,o=e.height,l=p.data,c=4);if(s=Math.max(n,o),window.Uint8ClampedArray&&l instanceof window.Uint8ClampedArray||window.Uint8Array&&l instanceof window.Uint8Array)for(u=l,l=Array(n*o),h=0,m=u.length;h<m;h++)l[h]=u[h*c+y]/255;else if(1!==c)throw Error("Raw data can have only 1 value per pixel");var b=Array(n*o),x=Array(n*o),_=Array(s),w=Array(s),T=Array(s+1),k=Array(s);for(h=0,m=n*o;h<m;h++){var C=l[h];b[h]=1===C?0:0===C?a:Math.pow(Math.max(0,.5-C),2),x[h]=1===C?a:0===C?0:Math.pow(Math.max(0,C-.5),2)}i(b,n,o,_,w,k,T),i(x,n,o,_,w,k,T);var E=window.Float32Array?new Float32Array(n*o):new Array(n*o);for(h=0,m=n*o;h<m;h++)E[h]=r(1-((b[h]-x[h])/g+v),0,1);return E};var a=1e20;function i(e,t,n,r,a,i,s){for(var l=0;l<t;l++){for(var u=0;u<n;u++)r[u]=e[u*t+l];for(o(r,a,i,s,n),u=0;u<n;u++)e[u*t+l]=a[u]}for(u=0;u<n;u++){for(l=0;l<t;l++)r[l]=e[u*t+l];for(o(r,a,i,s,t),l=0;l<t;l++)e[u*t+l]=Math.sqrt(a[l])}}function o(e,t,n,r,i){n[0]=0,r[0]=-a,r[1]=+a;for(var o=1,s=0;o<i;o++){for(var l=(e[o]+o*o-(e[n[s]]+n[s]*n[s]))/(2*o-2*n[s]);l<=r[s];)s--,l=(e[o]+o*o-(e[n[s]]+n[s]*n[s]))/(2*o-2*n[s]);n[++s]=o,r[s]=l,r[s+1]=+a}for(o=0,s=0;o<i;o++){for(;r[s+1]<o;)s++;t[o]=(o-n[s])*(o-n[s])+e[n[s]]}}},{clamp:103}],82:[function(e,t,n){!function(t,n){"use strict";function r(e,t){if(!e)throw new Error(t||"Assertion failed")}function a(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}function i(e,t,n){if(i.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(n=t,t=10),this._init(e||0,t||10,n||"be"))}var o;"object"==typeof t?t.exports=i:n.BN=i,i.BN=i,i.wordSize=26;try{o=e("buffer").Buffer}catch(e){}function s(e,t,n){for(var r=0,a=Math.min(e.length,n),i=t;i<a;i++){var o=e.charCodeAt(i)-48;r<<=4,r|=o>=49&&o<=54?o-49+10:o>=17&&o<=22?o-17+10:15&o}return r}function l(e,t,n,r){for(var a=0,i=Math.min(e.length,n),o=t;o<i;o++){var s=e.charCodeAt(o)-48;a*=r,a+=s>=49?s-49+10:s>=17?s-17+10:s}return a}i.isBN=function(e){return e instanceof i||null!==e&&"object"==typeof e&&e.constructor.wordSize===i.wordSize&&Array.isArray(e.words)},i.max=function(e,t){return e.cmp(t)>0?e:t},i.min=function(e,t){return e.cmp(t)<0?e:t},i.prototype._init=function(e,t,n){if("number"==typeof e)return this._initNumber(e,t,n);if("object"==typeof e)return this._initArray(e,t,n);"hex"===t&&(t=16),r(t===(0|t)&&t>=2&&t<=36);var a=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&a++,16===t?this._parseHex(e,a):this._parseBase(e,t,a),"-"===e[0]&&(this.negative=1),this.strip(),"le"===n&&this._initArray(this.toArray(),t,n)},i.prototype._initNumber=function(e,t,n){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(r(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),t,n)},i.prototype._initArray=function(e,t,n){if(r("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;var i,o,s=0;if("be"===n)for(a=e.length-1,i=0;a>=0;a-=3)o=e[a]|e[a-1]<<8|e[a-2]<<16,this.words[i]|=o<<s&67108863,this.words[i+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,i++);else if("le"===n)for(a=0,i=0;a<e.length;a+=3)o=e[a]|e[a+1]<<8|e[a+2]<<16,this.words[i]|=o<<s&67108863,this.words[i+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,i++);return this.strip()},i.prototype._parseHex=function(e,t){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var r,a,i=0;for(n=e.length-6,r=0;n>=t;n-=6)a=s(e,n,n+6),this.words[r]|=a<<i&67108863,this.words[r+1]|=a>>>26-i&4194303,(i+=24)>=26&&(i-=26,r++);n+6!==t&&(a=s(e,t,n+6),this.words[r]|=a<<i&67108863,this.words[r+1]|=a>>>26-i&4194303),this.strip()},i.prototype._parseBase=function(e,t,n){this.words=[0],this.length=1;for(var r=0,a=1;a<=67108863;a*=t)r++;r--,a=a/t|0;for(var i=e.length-n,o=i%r,s=Math.min(i,i-o)+n,u=0,c=n;c<s;c+=r)u=l(e,c,c+r,t),this.imuln(a),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==o){var f=1;for(u=l(e,c,e.length,t),c=0;c<o;c++)f*=t;this.imuln(f),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}},i.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},i.prototype.clone=function(){var e=new i(null);return this.copy(e),e},i.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},i.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],c=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function d(e,t,n){n.negative=t.negative^e.negative;var r=e.length+t.length|0;n.length=r,r=r-1|0;var a=0|e.words[0],i=0|t.words[0],o=a*i,s=67108863&o,l=o/67108864|0;n.words[0]=s;for(var u=1;u<r;u++){for(var c=l>>>26,f=67108863&l,d=Math.min(u,t.length-1),p=Math.max(0,u-e.length+1);p<=d;p++){var h=u-p|0;a=0|e.words[h],i=0|t.words[p],c+=(o=a*i+f)/67108864|0,f=67108863&o}n.words[u]=0|f,l=0|c}return 0!==l?n.words[u]=0|l:n.length--,n.strip()}i.prototype.toString=function(e,t){var n;if(e=e||10,t=0|t||1,16===e||"hex"===e){n="";for(var a=0,i=0,o=0;o<this.length;o++){var s=this.words[o],l=(16777215&(s<<a|i)).toString(16);n=0!=(i=s>>>24-a&16777215)||o!==this.length-1?u[6-l.length]+l+n:l+n,(a+=2)>=26&&(a-=26,o--)}for(0!==i&&(n=i.toString(16)+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(e===(0|e)&&e>=2&&e<=36){var d=c[e],p=f[e];n="";var h=this.clone();for(h.negative=0;!h.isZero();){var m=h.modn(p).toString(e);h=h.idivn(p),n=h.isZero()?m+n:u[d-m.length]+m+n}for(this.isZero()&&(n="0"+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(e,t){return r(void 0!==o),this.toArrayLike(o,e,t)},i.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},i.prototype.toArrayLike=function(e,t,n){var a=this.byteLength(),i=n||Math.max(1,a);r(a<=i,"byte array longer than desired length"),r(i>0,"Requested array length <= 0"),this.strip();var o,s,l="le"===t,u=new e(i),c=this.clone();if(l){for(s=0;!c.isZero();s++)o=c.andln(255),c.iushrn(8),u[s]=o;for(;s<i;s++)u[s]=0}else{for(s=0;s<i-a;s++)u[s]=0;for(s=0;!c.isZero();s++)o=c.andln(255),c.iushrn(8),u[i-s-1]=o}return u},Math.clz32?i.prototype._countBits=function(e){return 32-Math.clz32(e)}:i.prototype._countBits=function(e){var t=e,n=0;return t>=4096&&(n+=13,t>>>=13),t>=64&&(n+=7,t>>>=7),t>=8&&(n+=4,t>>>=4),t>=2&&(n+=2,t>>>=2),n+t},i.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,n=0;return 0==(8191&t)&&(n+=13,t>>>=13),0==(127&t)&&(n+=7,t>>>=7),0==(15&t)&&(n+=4,t>>>=4),0==(3&t)&&(n+=2,t>>>=2),0==(1&t)&&n++,n},i.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var n=this._zeroBits(this.words[t]);if(e+=n,26!==n)break}return e},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},i.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return 0!==this.negative},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},i.prototype.ior=function(e){return r(0==(this.negative|e.negative)),this.iuor(e)},i.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},i.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},i.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var n=0;n<t.length;n++)this.words[n]=this.words[n]&e.words[n];return this.length=t.length,this.strip()},i.prototype.iand=function(e){return r(0==(this.negative|e.negative)),this.iuand(e)},i.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},i.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},i.prototype.iuxor=function(e){var t,n;this.length>e.length?(t=this,n=e):(t=e,n=this);for(var r=0;r<n.length;r++)this.words[r]=t.words[r]^n.words[r];if(this!==t)for(;r<t.length;r++)this.words[r]=t.words[r];return this.length=t.length,this.strip()},i.prototype.ixor=function(e){return r(0==(this.negative|e.negative)),this.iuxor(e)},i.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},i.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},i.prototype.inotn=function(e){r("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),n=e%26;this._expand(t),n>0&&t--;for(var a=0;a<t;a++)this.words[a]=67108863&~this.words[a];return n>0&&(this.words[a]=~this.words[a]&67108863>>26-n),this.strip()},i.prototype.notn=function(e){return this.clone().inotn(e)},i.prototype.setn=function(e,t){r("number"==typeof e&&e>=0);var n=e/26|0,a=e%26;return this._expand(n+1),this.words[n]=t?this.words[n]|1<<a:this.words[n]&~(1<<a),this.strip()},i.prototype.iadd=function(e){var t,n,r;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(n=this,r=e):(n=e,r=this);for(var a=0,i=0;i<r.length;i++)t=(0|n.words[i])+(0|r.words[i])+a,this.words[i]=67108863&t,a=t>>>26;for(;0!==a&&i<n.length;i++)t=(0|n.words[i])+a,this.words[i]=67108863&t,a=t>>>26;if(this.length=n.length,0!==a)this.words[this.length]=a,this.length++;else if(n!==this)for(;i<n.length;i++)this.words[i]=n.words[i];return this},i.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},i.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var n,r,a=this.cmp(e);if(0===a)return this.negative=0,this.length=1,this.words[0]=0,this;a>0?(n=this,r=e):(n=e,r=this);for(var i=0,o=0;o<r.length;o++)t=(0|n.words[o])-(0|r.words[o])+i,i=t>>26,this.words[o]=67108863&t;for(;0!==i&&o<n.length;o++)t=(0|n.words[o])+i,i=t>>26,this.words[o]=67108863&t;if(0===i&&o<n.length&&n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this.length=Math.max(this.length,o),n!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(e){return this.clone().isub(e)};var p=function(e,t,n){var r,a,i,o=e.words,s=t.words,l=n.words,u=0,c=0|o[0],f=8191&c,d=c>>>13,p=0|o[1],h=8191&p,m=p>>>13,v=0|o[2],g=8191&v,y=v>>>13,b=0|o[3],x=8191&b,_=b>>>13,w=0|o[4],T=8191&w,k=w>>>13,C=0|o[5],E=8191&C,M=C>>>13,A=0|o[6],S=8191&A,O=A>>>13,P=0|o[7],R=8191&P,L=P>>>13,D=0|o[8],I=8191&D,z=D>>>13,j=0|o[9],N=8191&j,F=j>>>13,B=0|s[0],V=8191&B,U=B>>>13,G=0|s[1],H=8191&G,W=G>>>13,q=0|s[2],Y=8191&q,X=q>>>13,Z=0|s[3],$=8191&Z,K=Z>>>13,J=0|s[4],Q=8191&J,ee=J>>>13,te=0|s[5],ne=8191&te,re=te>>>13,ae=0|s[6],ie=8191&ae,oe=ae>>>13,se=0|s[7],le=8191&se,ue=se>>>13,ce=0|s[8],fe=8191&ce,de=ce>>>13,pe=0|s[9],he=8191&pe,me=pe>>>13;n.negative=e.negative^t.negative,n.length=19,r=Math.imul(f,V),a=(a=Math.imul(f,U))+Math.imul(d,V)|0,i=Math.imul(d,U);var ve=(u+r|0)+((8191&a)<<13)|0;u=(i+(a>>>13)|0)+(ve>>>26)|0,ve&=67108863,r=Math.imul(h,V),a=(a=Math.imul(h,U))+Math.imul(m,V)|0,i=Math.imul(m,U),r=r+Math.imul(f,H)|0,a=(a=a+Math.imul(f,W)|0)+Math.imul(d,H)|0,i=i+Math.imul(d,W)|0;var ge=(u+r|0)+((8191&a)<<13)|0;u=(i+(a>>>13)|0)+(ge>>>26)|0,ge&=67108863,r=Math.imul(g,V),a=(a=Math.imul(g,U))+Math.imul(y,V)|0,i=Math.imul(y,U),r=r+Math.imul(h,H)|0,a=(a=a+Math.imul(h,W)|0)+Math.imul(m,H)|0,i=i+Math.imul(m,W)|0,r=r+Math.imul(f,Y)|0,a=(a=a+Math.imul(f,X)|0)+Math.imul(d,Y)|0,i=i+Math.imul(d,X)|0;var ye=(u+r|0)+((8191&a)<<13)|0;u=(i+(a>>>13)|0)+(ye>>>26)|0,ye&=67108863,r=Math.imul(x,V),a=(a=Math.imul(x,U))+Math.imul(_,V)|0,i=Math.imul(_,U),r=r+Math.imul(g,H)|0,a=(a=a+Math.imul(g,W)|0)+Math.imul(y,H)|0,i=i+Math.imul(y,W)|0,r=r+Math.imul(h,Y)|0,a=(a=a+Math.imul(h,X)|0)+Math.imul(m,Y)|0,i=i+Math.imul(m,X)|0,r=r+Math.imul(f,$)|0,a=(a=a+Math.imul(f,K)|0)+Math.imul(d,$)|0,i=i+Math.imul(d,K)|0;var be=(u+r|0)+((8191&a)<<13)|0;u=(i+(a>>>13)|0)+(be>>>26)|0,be&=67108863,r=Math.imul(T,V),a=(a=Math.imul(T,U))+Math.imul(k,V)|0,i=Math.imul(k,U),r=r+Math.imul(x,H)|0,a=(a=a+Math.imul(x,W)|0)+Math.imul(_,H)|0,i=i+Math.imul(_,W)|0,r=r+Math.imul(g,Y)|0,a=(a=a+Math.imul(g,X)|0)+Math.imul(y,Y)|0,i=i+Math.imul(y,X)|0,r=r+Math.imul(h,$)|0,a=(a=a+Math.imul(h,K)|0)+Math.imul(m,$)|0,i=i+Math.imul(m,K)|0,r=r+Math.imul(f,Q)|0,a=(a=a+Math.imul(f,ee)|0)+Math.imul(d,Q)|0,i=i+Math.imul(d,ee)|0;var xe=(u+r|0)+((8191&a)<<13)|0;u=(i+(a>>>13)|0)+(xe>>>26)|0,xe&=67108863,r=Math.imul(E,V),a=(a=Math.imul(E,U))+Math.imul(M,V)|0,i=Math.imul(M,U),r=r+Math.imul(T,H)|0,a=(a=a+Math.imul(T,W)|0)+Math.imul(k,H)|0,i=i+Math.imul(k,W)|0,r=r+Math.imul(x,Y)|0,a=(a=a+Math.imul(x,X)|0)+Math.imul(_,Y)|0,i=i+Math.imul(_,X)|0,r=r+Math.imul(g,$)|0,a=(a=a+Math.imul(g,K)|0)+Math.imul(y,$)|0,i=i+Math.imul(y,K)|0,r=r+Math.imul(h,Q)|0,a=(a=a+Math.imul(h,ee)|0)+Math.imul(m,Q)|0,i=i+Math.imul(m,ee)|0,r=r+Math.imul(f,ne)|0,a=(a=a+Math.imul(f,re)|0)+Math.imul(d,ne)|0,i=i+Math.imul(d,re)|0;var _e=(u+r|0)+((8191&a)<<13)|0;u=(i+(a>>>13)|0)+(_e>>>26)|0,_e&=67108863,r=Math.imul(S,V),a=(a=Math.imul(S,U))+Math.imul(O,V)|0,i=Math.imul(O,U),r=r+Math.imul(E,H)|0,a=(a=a+Math.imul(E,W)|0)+Math.imul(M,H)|0,i=i+Math.imul(M,W)|0,r=r+Math.imul(T,Y)|0,a=(a=a+Math.imul(T,X)|0)+Math.imul(k,Y)|0,i=i+Math.imul(k,X)|0,r=r+Math.imul(x,$)|0,a=(a=a+Math.imul(x,K)|0)+Math.imul(_,$)|0,i=i+Math.imul(_,K)|0,r=r+Math.imul(g,Q)|0,a=(a=a+Math.imul(g,ee)|0)+Math.imul(y,Q)|0,i=i+Math.imul(y,ee)|0,r=r+Math.imul(h,ne)|0,a=(a=a+Math.imul(h,re)|0)+Math.imul(m,ne)|0,i=i+Math.imul(m,re)|0,r=r+Math.imul(f,ie)|0,a=(a=a+Math.imul(f,oe)|0)+Math.imul(d,ie)|0,i=i+Math.imul(d,oe)|0;var we=(u+r|0)+((8191&a)<<13)|0;u=(i+(a>>>13)|0)+(we>>>26)|0,we&=67108863,r=Math.imul(R,V),a=(a=Math.imul(R,U))+Math.imul(L,V)|0,i=Math.imul(L,U),r=r+Math.imul(S,H)|0,a=(a=a+Math.imul(S,W)|0)+Math.imul(O,H)|0,i=i+Math.imul(O,W)|0,r=r+Math.imul(E,Y)|0,a=(a=a+Math.imul(E,X)|0)+Math.imul(M,Y)|0,i=i+Math.imul(M,X)|0,r=r+Math.imul(T,$)|0,a=(a=a+Math.imul(T,K)|0)+Math.imul(k,$)|0,i=i+Math.imul(k,K)|0,r=r+Math.imul(x,Q)|0,a=(a=a+Math.imul(x,ee)|0)+Math.imul(_,Q)|0,i=i+Math.imul(_,ee)|0,r=r+Math.imul(g,ne)|0,a=(a=a+Math.imul(g,re)|0)+Math.imul(y,ne)|0,i=i+Math.imul(y,re)|0,r=r+Math.imul(h,ie)|0,a=(a=a+Math.imul(h,oe)|0)+Math.imul(m,ie)|0,i=i+Math.imul(m,oe)|0,r=r+Math.imul(f,le)|0,a=(a=a+Math.imul(f,ue)|0)+Math.imul(d,le)|0,i=i+Math.imul(d,ue)|0;var Te=(u+r|0)+((8191&a)<<13)|0;u=(i+(a>>>13)|0)+(Te>>>26)|0,Te&=67108863,r=Math.imul(I,V),a=(a=Math.imul(I,U))+Math.imul(z,V)|0,i=Math.imul(z,U),r=r+Math.imul(R,H)|0,a=(a=a+Math.imul(R,W)|0)+Math.imul(L,H)|0,i=i+Math.imul(L,W)|0,r=r+Math.imul(S,Y)|0,a=(a=a+Math.imul(S,X)|0)+Math.imul(O,Y)|0,i=i+Math.imul(O,X)|0,r=r+Math.imul(E,$)|0,a=(a=a+Math.imul(E,K)|0)+Math.imul(M,$)|0,i=i+Math.imul(M,K)|0,r=r+Math.imul(T,Q)|0,a=(a=a+Math.imul(T,ee)|0)+Math.imul(k,Q)|0,i=i+Math.imul(k,ee)|0,r=r+Math.imul(x,ne)|0,a=(a=a+Math.imul(x,re)|0)+Math.imul(_,ne)|0,i=i+Math.imul(_,re)|0,r=r+Math.imul(g,ie)|0,a=(a=a+Math.imul(g,oe)|0)+Math.imul(y,ie)|0,i=i+Math.imul(y,oe)|0,r=r+Math.imul(h,le)|0,a=(a=a+Math.imul(h,ue)|0)+Math.imul(m,le)|0,i=i+Math.imul(m,ue)|0,r=r+Math.imul(f,fe)|0,a=(a=a+Math.imul(f,de)|0)+Math.imul(d,fe)|0,i=i+Math.imul(d,de)|0;var ke=(u+r|0)+((8191&a)<<13)|0;u=(i+(a>>>13)|0)+(ke>>>26)|0,ke&=67108863,r=Math.imul(N,V),a=(a=Math.imul(N,U))+Math.imul(F,V)|0,i=Math.imul(F,U),r=r+Math.imul(I,H)|0,a=(a=a+Math.imul(I,W)|0)+Math.imul(z,H)|0,i=i+Math.imul(z,W)|0,r=r+Math.imul(R,Y)|0,a=(a=a+Math.imul(R,X)|0)+Math.imul(L,Y)|0,i=i+Math.imul(L,X)|0,r=r+Math.imul(S,$)|0,a=(a=a+Math.imul(S,K)|0)+Math.imul(O,$)|0,i=i+Math.imul(O,K)|0,r=r+Math.imul(E,Q)|0,a=(a=a+Math.imul(E,ee)|0)+Math.imul(M,Q)|0,i=i+Math.imul(M,ee)|0,r=r+Math.imul(T,ne)|0,a=(a=a+Math.imul(T,re)|0)+Math.imul(k,ne)|0,i=i+Math.imul(k,re)|0,r=r+Math.imul(x,ie)|0,a=(a=a+Math.imul(x,oe)|0)+Math.imul(_,ie)|0,i=i+Math.imul(_,oe)|0,r=r+Math.imul(g,le)|0,a=(a=a+Math.imul(g,ue)|0)+Math.imul(y,le)|0,i=i+Math.imul(y,ue)|0,r=r+Math.imul(h,fe)|0,a=(a=a+Math.imul(h,de)|0)+Math.imul(m,fe)|0,i=i+Math.imul(m,de)|0,r=r+Math.imul(f,he)|0,a=(a=a+Math.imul(f,me)|0)+Math.imul(d,he)|0,i=i+Math.imul(d,me)|0;var Ce=(u+r|0)+((8191&a)<<13)|0;u=(i+(a>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,r=Math.imul(N,H),a=(a=Math.imul(N,W))+Math.imul(F,H)|0,i=Math.imul(F,W),r=r+Math.imul(I,Y)|0,a=(a=a+Math.imul(I,X)|0)+Math.imul(z,Y)|0,i=i+Math.imul(z,X)|0,r=r+Math.imul(R,$)|0,a=(a=a+Math.imul(R,K)|0)+Math.imul(L,$)|0,i=i+Math.imul(L,K)|0,r=r+Math.imul(S,Q)|0,a=(a=a+Math.imul(S,ee)|0)+Math.imul(O,Q)|0,i=i+Math.imul(O,ee)|0,r=r+Math.imul(E,ne)|0,a=(a=a+Math.imul(E,re)|0)+Math.imul(M,ne)|0,i=i+Math.imul(M,re)|0,r=r+Math.imul(T,ie)|0,a=(a=a+Math.imul(T,oe)|0)+Math.imul(k,ie)|0,i=i+Math.imul(k,oe)|0,r=r+Math.imul(x,le)|0,a=(a=a+Math.imul(x,ue)|0)+Math.imul(_,le)|0,i=i+Math.imul(_,ue)|0,r=r+Math.imul(g,fe)|0,a=(a=a+Math.imul(g,de)|0)+Math.imul(y,fe)|0,i=i+Math.imul(y,de)|0,r=r+Math.imul(h,he)|0,a=(a=a+Math.imul(h,me)|0)+Math.imul(m,he)|0,i=i+Math.imul(m,me)|0;var Ee=(u+r|0)+((8191&a)<<13)|0;u=(i+(a>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,r=Math.imul(N,Y),a=(a=Math.imul(N,X))+Math.imul(F,Y)|0,i=Math.imul(F,X),r=r+Math.imul(I,$)|0,a=(a=a+Math.imul(I,K)|0)+Math.imul(z,$)|0,i=i+Math.imul(z,K)|0,r=r+Math.imul(R,Q)|0,a=(a=a+Math.imul(R,ee)|0)+Math.imul(L,Q)|0,i=i+Math.imul(L,ee)|0,r=r+Math.imul(S,ne)|0,a=(a=a+Math.imul(S,re)|0)+Math.imul(O,ne)|0,i=i+Math.imul(O,re)|0,r=r+Math.imul(E,ie)|0,a=(a=a+Math.imul(E,oe)|0)+Math.imul(M,ie)|0,i=i+Math.imul(M,oe)|0,r=r+Math.imul(T,le)|0,a=(a=a+Math.imul(T,ue)|0)+Math.imul(k,le)|0,i=i+Math.imul(k,ue)|0,r=r+Math.imul(x,fe)|0,a=(a=a+Math.imul(x,de)|0)+Math.imul(_,fe)|0,i=i+Math.imul(_,de)|0,r=r+Math.imul(g,he)|0,a=(a=a+Math.imul(g,me)|0)+Math.imul(y,he)|0,i=i+Math.imul(y,me)|0;var Me=(u+r|0)+((8191&a)<<13)|0;u=(i+(a>>>13)|0)+(Me>>>26)|0,Me&=67108863,r=Math.imul(N,$),a=(a=Math.imul(N,K))+Math.imul(F,$)|0,i=Math.imul(F,K),r=r+Math.imul(I,Q)|0,a=(a=a+Math.imul(I,ee)|0)+Math.imul(z,Q)|0,i=i+Math.imul(z,ee)|0,r=r+Math.imul(R,ne)|0,a=(a=a+Math.imul(R,re)|0)+Math.imul(L,ne)|0,i=i+Math.imul(L,re)|0,r=r+Math.imul(S,ie)|0,a=(a=a+Math.imul(S,oe)|0)+Math.imul(O,ie)|0,i=i+Math.imul(O,oe)|0,r=r+Math.imul(E,le)|0,a=(a=a+Math.imul(E,ue)|0)+Math.imul(M,le)|0,i=i+Math.imul(M,ue)|0,r=r+Math.imul(T,fe)|0,a=(a=a+Math.imul(T,de)|0)+Math.imul(k,fe)|0,i=i+Math.imul(k,de)|0,r=r+Math.imul(x,he)|0,a=(a=a+Math.imul(x,me)|0)+Math.imul(_,he)|0,i=i+Math.imul(_,me)|0;var Ae=(u+r|0)+((8191&a)<<13)|0;u=(i+(a>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,r=Math.imul(N,Q),a=(a=Math.imul(N,ee))+Math.imul(F,Q)|0,i=Math.imul(F,ee),r=r+Math.imul(I,ne)|0,a=(a=a+Math.imul(I,re)|0)+Math.imul(z,ne)|0,i=i+Math.imul(z,re)|0,r=r+Math.imul(R,ie)|0,a=(a=a+Math.imul(R,oe)|0)+Math.imul(L,ie)|0,i=i+Math.imul(L,oe)|0,r=r+Math.imul(S,le)|0,a=(a=a+Math.imul(S,ue)|0)+Math.imul(O,le)|0,i=i+Math.imul(O,ue)|0,r=r+Math.imul(E,fe)|0,a=(a=a+Math.imul(E,de)|0)+Math.imul(M,fe)|0,i=i+Math.imul(M,de)|0,r=r+Math.imul(T,he)|0,a=(a=a+Math.imul(T,me)|0)+Math.imul(k,he)|0,i=i+Math.imul(k,me)|0;var Se=(u+r|0)+((8191&a)<<13)|0;u=(i+(a>>>13)|0)+(Se>>>26)|0,Se&=67108863,r=Math.imul(N,ne),a=(a=Math.imul(N,re))+Math.imul(F,ne)|0,i=Math.imul(F,re),r=r+Math.imul(I,ie)|0,a=(a=a+Math.imul(I,oe)|0)+Math.imul(z,ie)|0,i=i+Math.imul(z,oe)|0,r=r+Math.imul(R,le)|0,a=(a=a+Math.imul(R,ue)|0)+Math.imul(L,le)|0,i=i+Math.imul(L,ue)|0,r=r+Math.imul(S,fe)|0,a=(a=a+Math.imul(S,de)|0)+Math.imul(O,fe)|0,i=i+Math.imul(O,de)|0,r=r+Math.imul(E,he)|0,a=(a=a+Math.imul(E,me)|0)+Math.imul(M,he)|0,i=i+Math.imul(M,me)|0;var Oe=(u+r|0)+((8191&a)<<13)|0;u=(i+(a>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,r=Math.imul(N,ie),a=(a=Math.imul(N,oe))+Math.imul(F,ie)|0,i=Math.imul(F,oe),r=r+Math.imul(I,le)|0,a=(a=a+Math.imul(I,ue)|0)+Math.imul(z,le)|0,i=i+Math.imul(z,ue)|0,r=r+Math.imul(R,fe)|0,a=(a=a+Math.imul(R,de)|0)+Math.imul(L,fe)|0,i=i+Math.imul(L,de)|0,r=r+Math.imul(S,he)|0,a=(a=a+Math.imul(S,me)|0)+Math.imul(O,he)|0,i=i+Math.imul(O,me)|0;var Pe=(u+r|0)+((8191&a)<<13)|0;u=(i+(a>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,r=Math.imul(N,le),a=(a=Math.imul(N,ue))+Math.imul(F,le)|0,i=Math.imul(F,ue),r=r+Math.imul(I,fe)|0,a=(a=a+Math.imul(I,de)|0)+Math.imul(z,fe)|0,i=i+Math.imul(z,de)|0,r=r+Math.imul(R,he)|0,a=(a=a+Math.imul(R,me)|0)+Math.imul(L,he)|0,i=i+Math.imul(L,me)|0;var Re=(u+r|0)+((8191&a)<<13)|0;u=(i+(a>>>13)|0)+(Re>>>26)|0,Re&=67108863,r=Math.imul(N,fe),a=(a=Math.imul(N,de))+Math.imul(F,fe)|0,i=Math.imul(F,de),r=r+Math.imul(I,he)|0,a=(a=a+Math.imul(I,me)|0)+Math.imul(z,he)|0,i=i+Math.imul(z,me)|0;var Le=(u+r|0)+((8191&a)<<13)|0;u=(i+(a>>>13)|0)+(Le>>>26)|0,Le&=67108863,r=Math.imul(N,he),a=(a=Math.imul(N,me))+Math.imul(F,he)|0,i=Math.imul(F,me);var De=(u+r|0)+((8191&a)<<13)|0;return u=(i+(a>>>13)|0)+(De>>>26)|0,De&=67108863,l[0]=ve,l[1]=ge,l[2]=ye,l[3]=be,l[4]=xe,l[5]=_e,l[6]=we,l[7]=Te,l[8]=ke,l[9]=Ce,l[10]=Ee,l[11]=Me,l[12]=Ae,l[13]=Se,l[14]=Oe,l[15]=Pe,l[16]=Re,l[17]=Le,l[18]=De,0!==u&&(l[19]=u,n.length++),n};function h(e,t,n){var r=new m;return r.mulp(e,t,n)}function m(e,t){this.x=e,this.y=t}Math.imul||(p=d),i.prototype.mulTo=function(e,t){var n=this.length+e.length;return 10===this.length&&10===e.length?p(this,e,t):n<63?d(this,e,t):n<1024?function(e,t,n){n.negative=t.negative^e.negative,n.length=e.length+t.length;for(var r=0,a=0,i=0;i<n.length-1;i++){var o=a;a=0;for(var s=67108863&r,l=Math.min(i,t.length-1),u=Math.max(0,i-e.length+1);u<=l;u++){var c=i-u,f=0|e.words[c],d=0|t.words[u],p=f*d,h=67108863&p;s=67108863&(h=h+s|0),a+=(o=(o=o+(p/67108864|0)|0)+(h>>>26)|0)>>>26,o&=67108863}n.words[i]=s,r=o,o=a}return 0!==r?n.words[i]=r:n.length--,n.strip()}(this,e,t):h(this,e,t)},m.prototype.makeRBT=function(e){for(var t=new Array(e),n=i.prototype._countBits(e)-1,r=0;r<e;r++)t[r]=this.revBin(r,n,e);return t},m.prototype.revBin=function(e,t,n){if(0===e||e===n-1)return e;for(var r=0,a=0;a<t;a++)r|=(1&e)<<t-a-1,e>>=1;return r},m.prototype.permute=function(e,t,n,r,a,i){for(var o=0;o<i;o++)r[o]=t[e[o]],a[o]=n[e[o]]},m.prototype.transform=function(e,t,n,r,a,i){this.permute(i,e,t,n,r,a);for(var o=1;o<a;o<<=1)for(var s=o<<1,l=Math.cos(2*Math.PI/s),u=Math.sin(2*Math.PI/s),c=0;c<a;c+=s)for(var f=l,d=u,p=0;p<o;p++){var h=n[c+p],m=r[c+p],v=n[c+p+o],g=r[c+p+o],y=f*v-d*g;g=f*g+d*v,v=y,n[c+p]=h+v,r[c+p]=m+g,n[c+p+o]=h-v,r[c+p+o]=m-g,p!==s&&(y=l*f-u*d,d=l*d+u*f,f=y)}},m.prototype.guessLen13b=function(e,t){var n=1|Math.max(t,e),r=1&n,a=0;for(n=n/2|0;n;n>>>=1)a++;return 1<<a+1+r},m.prototype.conjugate=function(e,t,n){if(!(n<=1))for(var r=0;r<n/2;r++){var a=e[r];e[r]=e[n-r-1],e[n-r-1]=a,a=t[r],t[r]=-t[n-r-1],t[n-r-1]=-a}},m.prototype.normalize13b=function(e,t){for(var n=0,r=0;r<t/2;r++){var a=8192*Math.round(e[2*r+1]/t)+Math.round(e[2*r]/t)+n;e[r]=67108863&a,n=a<67108864?0:a/67108864|0}return e},m.prototype.convert13b=function(e,t,n,a){for(var i=0,o=0;o<t;o++)i+=0|e[o],n[2*o]=8191&i,i>>>=13,n[2*o+1]=8191&i,i>>>=13;for(o=2*t;o<a;++o)n[o]=0;r(0===i),r(0==(-8192&i))},m.prototype.stub=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=0;return t},m.prototype.mulp=function(e,t,n){var r=2*this.guessLen13b(e.length,t.length),a=this.makeRBT(r),i=this.stub(r),o=new Array(r),s=new Array(r),l=new Array(r),u=new Array(r),c=new Array(r),f=new Array(r),d=n.words;d.length=r,this.convert13b(e.words,e.length,o,r),this.convert13b(t.words,t.length,u,r),this.transform(o,i,s,l,r,a),this.transform(u,i,c,f,r,a);for(var p=0;p<r;p++){var h=s[p]*c[p]-l[p]*f[p];l[p]=s[p]*f[p]+l[p]*c[p],s[p]=h}return this.conjugate(s,l,r),this.transform(s,l,d,i,r,a),this.conjugate(d,i,r),this.normalize13b(d,r),n.negative=e.negative^t.negative,n.length=e.length+t.length,n.strip()},i.prototype.mul=function(e){var t=new i(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},i.prototype.mulf=function(e){var t=new i(null);return t.words=new Array(this.length+e.length),h(this,e,t)},i.prototype.imul=function(e){return this.clone().mulTo(e,this)},i.prototype.imuln=function(e){r("number"==typeof e),r(e<67108864);for(var t=0,n=0;n<this.length;n++){var a=(0|this.words[n])*e,i=(67108863&a)+(67108863&t);t>>=26,t+=a/67108864|0,t+=i>>>26,this.words[n]=67108863&i}return 0!==t&&(this.words[n]=t,this.length++),this},i.prototype.muln=function(e){return this.clone().imuln(e)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),n=0;n<t.length;n++){var r=n/26|0,a=n%26;t[n]=(e.words[r]&1<<a)>>>a}return t}(e);if(0===t.length)return new i(1);for(var n=this,r=0;r<t.length&&0===t[r];r++,n=n.sqr());if(++r<t.length)for(var a=n.sqr();r<t.length;r++,a=a.sqr())0!==t[r]&&(n=n.mul(a));return n},i.prototype.iushln=function(e){r("number"==typeof e&&e>=0);var t,n=e%26,a=(e-n)/26,i=67108863>>>26-n<<26-n;if(0!==n){var o=0;for(t=0;t<this.length;t++){var s=this.words[t]&i,l=(0|this.words[t])-s<<n;this.words[t]=l|o,o=s>>>26-n}o&&(this.words[t]=o,this.length++)}if(0!==a){for(t=this.length-1;t>=0;t--)this.words[t+a]=this.words[t];for(t=0;t<a;t++)this.words[t]=0;this.length+=a}return this.strip()},i.prototype.ishln=function(e){return r(0===this.negative),this.iushln(e)},i.prototype.iushrn=function(e,t,n){var a;r("number"==typeof e&&e>=0),a=t?(t-t%26)/26:0;var i=e%26,o=Math.min((e-i)/26,this.length),s=67108863^67108863>>>i<<i,l=n;if(a-=o,a=Math.max(0,a),l){for(var u=0;u<o;u++)l.words[u]=this.words[u];l.length=o}if(0===o);else if(this.length>o)for(this.length-=o,u=0;u<this.length;u++)this.words[u]=this.words[u+o];else this.words[0]=0,this.length=1;var c=0;for(u=this.length-1;u>=0&&(0!==c||u>=a);u--){var f=0|this.words[u];this.words[u]=c<<26-i|f>>>i,c=f&s}return l&&0!==c&&(l.words[l.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(e,t,n){return r(0===this.negative),this.iushrn(e,t,n)},i.prototype.shln=function(e){return this.clone().ishln(e)},i.prototype.ushln=function(e){return this.clone().iushln(e)},i.prototype.shrn=function(e){return this.clone().ishrn(e)},i.prototype.ushrn=function(e){return this.clone().iushrn(e)},i.prototype.testn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26,a=1<<t;if(this.length<=n)return!1;var i=this.words[n];return!!(i&a)},i.prototype.imaskn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==t&&n++,this.length=Math.min(n,this.length),0!==t){var a=67108863^67108863>>>t<<t;this.words[this.length-1]&=a}return this.strip()},i.prototype.maskn=function(e){return this.clone().imaskn(e)},i.prototype.iaddn=function(e){return r("number"==typeof e),r(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},i.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},i.prototype.isubn=function(e){if(r("number"==typeof e),r(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},i.prototype.addn=function(e){return this.clone().iaddn(e)},i.prototype.subn=function(e){return this.clone().isubn(e)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(e,t,n){var a,i,o=e.length+n;this._expand(o);var s=0;for(a=0;a<e.length;a++){i=(0|this.words[a+n])+s;var l=(0|e.words[a])*t;s=((i-=67108863&l)>>26)-(l/67108864|0),this.words[a+n]=67108863&i}for(;a<this.length-n;a++)i=(0|this.words[a+n])+s,s=i>>26,this.words[a+n]=67108863&i;if(0===s)return this.strip();for(r(-1===s),s=0,a=0;a<this.length;a++)i=-(0|this.words[a])+s,s=i>>26,this.words[a]=67108863&i;return this.negative=1,this.strip()},i.prototype._wordDiv=function(e,t){var n=this.length-e.length,r=this.clone(),a=e,o=0|a.words[a.length-1],s=this._countBits(o);0!=(n=26-s)&&(a=a.ushln(n),r.iushln(n),o=0|a.words[a.length-1]);var l,u=r.length-a.length;if("mod"!==t){(l=new i(null)).length=u+1,l.words=new Array(l.length);for(var c=0;c<l.length;c++)l.words[c]=0}var f=r.clone()._ishlnsubmul(a,1,u);0===f.negative&&(r=f,l&&(l.words[u]=1));for(var d=u-1;d>=0;d--){var p=67108864*(0|r.words[a.length+d])+(0|r.words[a.length+d-1]);for(p=Math.min(p/o|0,67108863),r._ishlnsubmul(a,p,d);0!==r.negative;)p--,r.negative=0,r._ishlnsubmul(a,1,d),r.isZero()||(r.negative^=1);l&&(l.words[d]=p)}return l&&l.strip(),r.strip(),"div"!==t&&0!==n&&r.iushrn(n),{div:l||null,mod:r}},i.prototype.divmod=function(e,t,n){return r(!e.isZero()),this.isZero()?{div:new i(0),mod:new i(0)}:0!==this.negative&&0===e.negative?(s=this.neg().divmod(e,t),"mod"!==t&&(a=s.div.neg()),"div"!==t&&(o=s.mod.neg(),n&&0!==o.negative&&o.iadd(e)),{div:a,mod:o}):0===this.negative&&0!==e.negative?(s=this.divmod(e.neg(),t),"mod"!==t&&(a=s.div.neg()),{div:a,mod:s.mod}):0!=(this.negative&e.negative)?(s=this.neg().divmod(e.neg(),t),"div"!==t&&(o=s.mod.neg(),n&&0!==o.negative&&o.isub(e)),{div:s.div,mod:o}):e.length>this.length||this.cmp(e)<0?{div:new i(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new i(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new i(this.modn(e.words[0]))}:this._wordDiv(e,t);var a,o,s},i.prototype.div=function(e){return this.divmod(e,"div",!1).div},i.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},i.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},i.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var n=0!==t.div.negative?t.mod.isub(e):t.mod,r=e.ushrn(1),a=e.andln(1),i=n.cmp(r);return i<0||1===a&&0===i?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},i.prototype.modn=function(e){r(e<=67108863);for(var t=(1<<26)%e,n=0,a=this.length-1;a>=0;a--)n=(t*n+(0|this.words[a]))%e;return n},i.prototype.idivn=function(e){r(e<=67108863);for(var t=0,n=this.length-1;n>=0;n--){var a=(0|this.words[n])+67108864*t;this.words[n]=a/e|0,t=a%e}return this.strip()},i.prototype.divn=function(e){return this.clone().idivn(e)},i.prototype.egcd=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var a=new i(1),o=new i(0),s=new i(0),l=new i(1),u=0;t.isEven()&&n.isEven();)t.iushrn(1),n.iushrn(1),++u;for(var c=n.clone(),f=t.clone();!t.isZero();){for(var d=0,p=1;0==(t.words[0]&p)&&d<26;++d,p<<=1);if(d>0)for(t.iushrn(d);d-- >0;)(a.isOdd()||o.isOdd())&&(a.iadd(c),o.isub(f)),a.iushrn(1),o.iushrn(1);for(var h=0,m=1;0==(n.words[0]&m)&&h<26;++h,m<<=1);if(h>0)for(n.iushrn(h);h-- >0;)(s.isOdd()||l.isOdd())&&(s.iadd(c),l.isub(f)),s.iushrn(1),l.iushrn(1);t.cmp(n)>=0?(t.isub(n),a.isub(s),o.isub(l)):(n.isub(t),s.isub(a),l.isub(o))}return{a:s,b:l,gcd:n.iushln(u)}},i.prototype._invmp=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var a,o=new i(1),s=new i(0),l=n.clone();t.cmpn(1)>0&&n.cmpn(1)>0;){for(var u=0,c=1;0==(t.words[0]&c)&&u<26;++u,c<<=1);if(u>0)for(t.iushrn(u);u-- >0;)o.isOdd()&&o.iadd(l),o.iushrn(1);for(var f=0,d=1;0==(n.words[0]&d)&&f<26;++f,d<<=1);if(f>0)for(n.iushrn(f);f-- >0;)s.isOdd()&&s.iadd(l),s.iushrn(1);t.cmp(n)>=0?(t.isub(n),o.isub(s)):(n.isub(t),s.isub(o))}return(a=0===t.cmpn(1)?o:s).cmpn(0)<0&&a.iadd(e),a},i.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),n=e.clone();t.negative=0,n.negative=0;for(var r=0;t.isEven()&&n.isEven();r++)t.iushrn(1),n.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;n.isEven();)n.iushrn(1);var a=t.cmp(n);if(a<0){var i=t;t=n,n=i}else if(0===a||0===n.cmpn(1))break;t.isub(n)}return n.iushln(r)},i.prototype.invm=function(e){return this.egcd(e).a.umod(e)},i.prototype.isEven=function(){return 0==(1&this.words[0])},i.prototype.isOdd=function(){return 1==(1&this.words[0])},i.prototype.andln=function(e){return this.words[0]&e},i.prototype.bincn=function(e){r("number"==typeof e);var t=e%26,n=(e-t)/26,a=1<<t;if(this.length<=n)return this._expand(n+1),this.words[n]|=a,this;for(var i=a,o=n;0!==i&&o<this.length;o++){var s=0|this.words[o];i=(s+=i)>>>26,s&=67108863,this.words[o]=s}return 0!==i&&(this.words[o]=i,this.length++),this},i.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},i.prototype.cmpn=function(e){var t,n=e<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)t=1;else{n&&(e=-e),r(e<=67108863,"Number is too big");var a=0|this.words[0];t=a===e?0:a<e?-1:1}return 0!==this.negative?0|-t:t},i.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},i.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,n=this.length-1;n>=0;n--){var r=0|this.words[n],a=0|e.words[n];if(r!==a){r<a?t=-1:r>a&&(t=1);break}}return t},i.prototype.gtn=function(e){return 1===this.cmpn(e)},i.prototype.gt=function(e){return 1===this.cmp(e)},i.prototype.gten=function(e){return this.cmpn(e)>=0},i.prototype.gte=function(e){return this.cmp(e)>=0},i.prototype.ltn=function(e){return-1===this.cmpn(e)},i.prototype.lt=function(e){return-1===this.cmp(e)},i.prototype.lten=function(e){return this.cmpn(e)<=0},i.prototype.lte=function(e){return this.cmp(e)<=0},i.prototype.eqn=function(e){return 0===this.cmpn(e)},i.prototype.eq=function(e){return 0===this.cmp(e)},i.red=function(e){return new w(e)},i.prototype.toRed=function(e){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(e){return this.red=e,this},i.prototype.forceRed=function(e){return r(!this.red,"Already a number in reduction context"),this._forceRed(e)},i.prototype.redAdd=function(e){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},i.prototype.redIAdd=function(e){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},i.prototype.redSub=function(e){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},i.prototype.redISub=function(e){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},i.prototype.redShl=function(e){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},i.prototype.redMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},i.prototype.redIMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(e){return r(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var v={k256:null,p224:null,p192:null,p25519:null};function g(e,t){this.name=e,this.p=new i(t,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function y(){g.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function b(){g.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function x(){g.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function _(){g.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function w(e){if("string"==typeof e){var t=i._prime(e);this.m=t.p,this.prime=t}else r(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function T(e){w.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}g.prototype._tmp=function(){var e=new i(null);return e.words=new Array(Math.ceil(this.n/13)),e},g.prototype.ireduce=function(e){var t,n=e;do{this.split(n,this.tmp),n=(n=this.imulK(n)).iadd(this.tmp),t=n.bitLength()}while(t>this.n);var r=t<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):r>0?n.isub(this.p):n.strip(),n},g.prototype.split=function(e,t){e.iushrn(this.n,0,t)},g.prototype.imulK=function(e){return e.imul(this.k)},a(y,g),y.prototype.split=function(e,t){for(var n=Math.min(e.length,9),r=0;r<n;r++)t.words[r]=e.words[r];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var a=e.words[9];for(t.words[t.length++]=4194303&a,r=10;r<e.length;r++){var i=0|e.words[r];e.words[r-10]=(4194303&i)<<4|a>>>22,a=i}a>>>=22,e.words[r-10]=a,0===a&&e.length>10?e.length-=10:e.length-=9},y.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,n=0;n<e.length;n++){var r=0|e.words[n];t+=977*r,e.words[n]=67108863&t,t=64*r+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},a(b,g),a(x,g),a(_,g),_.prototype.imulK=function(e){for(var t=0,n=0;n<e.length;n++){var r=19*(0|e.words[n])+t,a=67108863&r;r>>>=26,e.words[n]=a,t=r}return 0!==t&&(e.words[e.length++]=t),e},i._prime=function(e){if(v[e])return v[e];var t;if("k256"===e)t=new y;else if("p224"===e)t=new b;else if("p192"===e)t=new x;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new _}return v[e]=t,t},w.prototype._verify1=function(e){r(0===e.negative,"red works only with positives"),r(e.red,"red works only with red numbers")},w.prototype._verify2=function(e,t){r(0==(e.negative|t.negative),"red works only with positives"),r(e.red&&e.red===t.red,"red works only with red numbers")},w.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},w.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},w.prototype.add=function(e,t){this._verify2(e,t);var n=e.add(t);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},w.prototype.iadd=function(e,t){this._verify2(e,t);var n=e.iadd(t);return n.cmp(this.m)>=0&&n.isub(this.m),n},w.prototype.sub=function(e,t){this._verify2(e,t);var n=e.sub(t);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},w.prototype.isub=function(e,t){this._verify2(e,t);var n=e.isub(t);return n.cmpn(0)<0&&n.iadd(this.m),n},w.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},w.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},w.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},w.prototype.isqr=function(e){return this.imul(e,e.clone())},w.prototype.sqr=function(e){return this.mul(e,e)},w.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(r(t%2==1),3===t){var n=this.m.add(new i(1)).iushrn(2);return this.pow(e,n)}for(var a=this.m.subn(1),o=0;!a.isZero()&&0===a.andln(1);)o++,a.iushrn(1);r(!a.isZero());var s=new i(1).toRed(this),l=s.redNeg(),u=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new i(2*c*c).toRed(this);0!==this.pow(c,u).cmp(l);)c.redIAdd(l);for(var f=this.pow(c,a),d=this.pow(e,a.addn(1).iushrn(1)),p=this.pow(e,a),h=o;0!==p.cmp(s);){for(var m=p,v=0;0!==m.cmp(s);v++)m=m.redSqr();r(v<h);var g=this.pow(f,new i(1).iushln(h-v-1));d=d.redMul(g),f=g.redSqr(),p=p.redMul(f),h=v}return d},w.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},w.prototype.pow=function(e,t){if(t.isZero())return new i(1).toRed(this);if(0===t.cmpn(1))return e.clone();var n=new Array(16);n[0]=new i(1).toRed(this),n[1]=e;for(var r=2;r<n.length;r++)n[r]=this.mul(n[r-1],e);var a=n[0],o=0,s=0,l=t.bitLength()%26;for(0===l&&(l=26),r=t.length-1;r>=0;r--){for(var u=t.words[r],c=l-1;c>=0;c--){var f=u>>c&1;a!==n[0]&&(a=this.sqr(a)),0!==f||0!==o?(o<<=1,o|=f,(4==++s||0===r&&0===c)&&(a=this.mul(a,n[o]),s=0,o=0)):s=0}l=26}return a},w.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},w.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},i.mont=function(e){return new T(e)},a(T,w),T.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},T.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},T.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var n=e.imul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),a=n.isub(r).iushrn(this.shift),i=a;return a.cmp(this.m)>=0?i=a.isub(this.m):a.cmpn(0)<0&&(i=a.iadd(this.m)),i._forceRed(this)},T.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new i(0)._forceRed(this);var n=e.mul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),a=n.isub(r).iushrn(this.shift),o=a;return a.cmp(this.m)>=0?o=a.isub(this.m):a.cmpn(0)<0&&(o=a.iadd(this.m)),o._forceRed(this)},T.prototype.invm=function(e){var t=this.imod(e._invmp(this.m).mul(this.r2));return t._forceRed(this)}}(void 0===t||t,this)},{buffer:91}],83:[function(e,t,n){"use strict";t.exports=function(e){var t,n,r,a=e.length,i=0;for(t=0;t<a;++t)i+=e[t].length;var o=new Array(i),s=0;for(t=0;t<a;++t){var l=e[t],u=l.length;for(n=0;n<u;++n){var c=o[s++]=new Array(u-1),f=0;for(r=0;r<u;++r)r!==n&&(c[f++]=l[r]);if(1&n){var d=c[1];c[1]=c[0],c[0]=d}}}return o}},{}],84:[function(e,t,n){"use strict";t.exports=function(e,t,n){switch(arguments.length){case 1:return function(e){return r=[],u(e,e,c,!0),r}(e);case 2:return"function"==typeof t?u(e,e,t,!0):function(e,t){return r=[],u(e,t,c,!1),r}(e,t);case 3:return u(e,t,n,!1);default:throw new Error("box-intersect: Invalid arguments")}};var r,a=e("typedarray-pool"),i=e("./lib/sweep"),o=e("./lib/intersect");function s(e,t){for(var n=0;n<e;++n)if(!(t[n]<=t[n+e]))return!0;return!1}function l(e,t,n,r){for(var a=0,i=0,o=0,l=e.length;o<l;++o){var u=e[o];if(!s(t,u)){for(var c=0;c<2*t;++c)n[a++]=u[c];r[i++]=o}}return i}function u(e,t,n,r){var s=e.length,u=t.length;if(!(s<=0||u<=0)){var c=e[0].length>>>1;if(!(c<=0)){var f,d=a.mallocDouble(2*c*s),p=a.mallocInt32(s);if((s=l(e,c,d,p))>0){if(1===c&&r)i.init(s),f=i.sweepComplete(c,n,0,s,d,p,0,s,d,p);else{var h=a.mallocDouble(2*c*u),m=a.mallocInt32(u);(u=l(t,c,h,m))>0&&(i.init(s+u),f=1===c?i.sweepBipartite(c,n,0,s,d,p,0,u,h,m):o(c,n,r,s,d,p,u,h,m),a.free(h),a.free(m))}a.free(d),a.free(p)}return f}}}function c(e,t){r.push([e,t])}},{"./lib/intersect":86,"./lib/sweep":90,"typedarray-pool":522}],85:[function(e,t,n){"use strict";var r="d",a="ax",i="vv",o="fp",s="es",l="rs",u="re",c="rb",f="ri",d="rp",p="bs",h="be",m="bb",v="bi",g="bp",y="rv",b="Q",x=[r,a,i,l,u,c,f,p,h,m,v];function _(e){var t="bruteForce"+(e?"Full":"Partial"),n=[],_=x.slice();e||_.splice(3,0,o);var w=["function "+t+"("+_.join()+"){"];function T(t,o){var _=function(e,t,n){var o="bruteForce"+(e?"Red":"Blue")+(t?"Flip":"")+(n?"Full":""),_=["function ",o,"(",x.join(),"){","var ",s,"=2*",r,";"],w="for(var i="+l+","+d+"="+s+"*"+l+";i<"+u+";++i,"+d+"+="+s+"){var x0="+c+"["+a+"+"+d+"],x1="+c+"["+a+"+"+d+"+"+r+"],xi="+f+"[i];",T="for(var j="+p+","+g+"="+s+"*"+p+";j<"+h+";++j,"+g+"+="+s+"){var y0="+m+"["+a+"+"+g+"],"+(n?"y1="+m+"["+a+"+"+g+"+"+r+"],":"")+"yi="+v+"[j];";return e?_.push(w,b,":",T):_.push(T,b,":",w),n?_.push("if(y1<x0||x1<y0)continue;"):t?_.push("if(y0<=x0||x1<y0)continue;"):_.push("if(y0<x0||x1<y0)continue;"),_.push("for(var k="+a+"+1;k<"+r+";++k){var r0="+c+"[k+"+d+"],r1="+c+"[k+"+r+"+"+d+"],b0="+m+"[k+"+g+"],b1="+m+"[k+"+r+"+"+g+"];if(r1<b0||b1<r0)continue "+b+";}var "+y+"="+i+"("),t?_.push("yi,xi"):_.push("xi,yi"),_.push(");if("+y+"!==void 0)return "+y+";}}}"),{name:o,code:_.join("")}}(t,o,e);n.push(_.code),w.push("return "+_.name+"("+x.join()+");")}w.push("if("+u+"-"+l+">"+h+"-"+p+"){"),e?(T(!0,!1),w.push("}else{"),T(!1,!1)):(w.push("if("+o+"){"),T(!0,!0),w.push("}else{"),T(!0,!1),w.push("}}else{if("+o+"){"),T(!1,!0),w.push("}else{"),T(!1,!1),w.push("}")),w.push("}}return "+t);var k=n.join("")+w.join(""),C=new Function(k);return C()}n.partial=_(!1),n.full=_(!0)},{}],86:[function(e,t,n){"use strict";t.exports=function(e,t,n,i,c,M,A,S,O){!function(e,t){var n=8*a.log2(t+1)*(e+1)|0,i=a.nextPow2(x*n);w.length<i&&(r.free(w),w=r.mallocInt32(i));var o=a.nextPow2(_*n);T<o&&(r.free(T),T=r.mallocDouble(o))}(e,i+A);var P,R=0,L=2*e;for(k(R++,0,0,i,0,A,n?16:0,-1/0,1/0),n||k(R++,0,0,A,0,i,1,-1/0,1/0);R>0;){var D=(R-=1)*x,I=w[D],z=w[D+1],j=w[D+2],N=w[D+3],F=w[D+4],B=w[D+5],V=R*_,U=T[V],G=T[V+1],H=1&B,W=!!(16&B),q=c,Y=M,X=S,Z=O;if(H&&(q=S,Y=O,X=c,Z=M),!(2&B&&(j=v(e,I,z,j,q,Y,G),z>=j)||4&B&&(z=g(e,I,z,j,q,Y,U))>=j)){var $=j-z,K=F-N;if(W){if(e*$*($+K)<p){if(void 0!==(P=l.scanComplete(e,I,t,z,j,q,Y,N,F,X,Z)))return P;continue}}else{if(e*Math.min($,K)<f){if(void 0!==(P=o(e,I,t,H,z,j,q,Y,N,F,X,Z)))return P;continue}if(e*$*K<d){if(void 0!==(P=l.scanBipartite(e,I,t,H,z,j,q,Y,N,F,X,Z)))return P;continue}}var J=h(e,I,z,j,q,Y,U,G);if(z<J)if(e*(J-z)<f){if(void 0!==(P=s(e,I+1,t,z,J,q,Y,N,F,X,Z)))return P}else if(I===e-2){if(void 0!==(P=H?l.sweepBipartite(e,t,N,F,X,Z,z,J,q,Y):l.sweepBipartite(e,t,z,J,q,Y,N,F,X,Z)))return P}else k(R++,I+1,z,J,N,F,H,-1/0,1/0),k(R++,I+1,N,F,z,J,1^H,-1/0,1/0);if(J<j){var Q=u(e,I,N,F,X,Z),ee=X[L*Q+I],te=m(e,I,Q,F,X,Z,ee);if(te<F&&k(R++,I,J,j,te,F,(4|H)+(W?16:0),ee,G),N<Q&&k(R++,I,J,j,N,Q,(2|H)+(W?16:0),U,ee),Q+1===te){if(void 0!==(P=W?E(e,I,t,J,j,q,Y,Q,X,Z[Q]):C(e,I,t,H,J,j,q,Y,Q,X,Z[Q])))return P}else if(Q<te){var ne;if(W){if(ne=y(e,I,J,j,q,Y,ee),J<ne){var re=m(e,I,J,ne,q,Y,ee);if(I===e-2){if(J<re&&void 0!==(P=l.sweepComplete(e,t,J,re,q,Y,Q,te,X,Z)))return P;if(re<ne&&void 0!==(P=l.sweepBipartite(e,t,re,ne,q,Y,Q,te,X,Z)))return P}else J<re&&k(R++,I+1,J,re,Q,te,16,-1/0,1/0),re<ne&&(k(R++,I+1,re,ne,Q,te,0,-1/0,1/0),k(R++,I+1,Q,te,re,ne,1,-1/0,1/0))}}else ne=H?b(e,I,J,j,q,Y,ee):y(e,I,J,j,q,Y,ee),J<ne&&(I===e-2?P=H?l.sweepBipartite(e,t,Q,te,X,Z,J,ne,q,Y):l.sweepBipartite(e,t,J,ne,q,Y,Q,te,X,Z):(k(R++,I+1,J,ne,Q,te,H,-1/0,1/0),k(R++,I+1,Q,te,J,ne,1^H,-1/0,1/0)))}}}}};var r=e("typedarray-pool"),a=e("bit-twiddle"),i=e("./brute"),o=i.partial,s=i.full,l=e("./sweep"),u=e("./median"),c=e("./partition"),f=128,d=1<<22,p=1<<22,h=c("!(lo>=p0)&&!(p1>=hi)",["p0","p1"]),m=c("lo===p0",["p0"]),v=c("lo<p0",["p0"]),g=c("hi<=p0",["p0"]),y=c("lo<=p0&&p0<=hi",["p0"]),b=c("lo<p0&&p0<=hi",["p0"]),x=6,_=2,w=r.mallocInt32(1024),T=r.mallocDouble(1024);function k(e,t,n,r,a,i,o,s,l){var u=x*e;w[u]=t,w[u+1]=n,w[u+2]=r,w[u+3]=a,w[u+4]=i,w[u+5]=o;var c=_*e;T[c]=s,T[c+1]=l}function C(e,t,n,r,a,i,o,s,l,u,c){var f=2*e,d=l*f,p=u[d+t];e:for(var h=a,m=a*f;h<i;++h,m+=f){var v=o[m+t],g=o[m+t+e];if(!(p<v||g<p||r&&p===v)){for(var y,b=s[h],x=t+1;x<e;++x){var v=o[m+x],g=o[m+x+e],_=u[d+x],w=u[d+x+e];if(g<_||w<v)continue e}if(void 0!==(y=r?n(c,b):n(b,c)))return y}}}function E(e,t,n,r,a,i,o,s,l,u){var c=2*e,f=s*c,d=l[f+t];e:for(var p=r,h=r*c;p<a;++p,h+=c){var m=o[p];if(m!==u){var v=i[h+t],g=i[h+t+e];if(!(d<v||g<d)){for(var y=t+1;y<e;++y){var v=i[h+y],g=i[h+y+e],b=l[f+y],x=l[f+y+e];if(g<b||x<v)continue e}var _=n(m,u);if(void 0!==_)return _}}}}},{"./brute":85,"./median":87,"./partition":88,"./sweep":90,"bit-twiddle":80,"typedarray-pool":522}],87:[function(e,t,n){"use strict";t.exports=function(e,t,n,r,s,l){if(r<=n+1)return n;for(var u=n,c=r,f=r+n>>>1,d=2*e,p=f,h=s[d*f+t];u<c;){if(c-u<i){o(e,t,u,c,s,l),h=s[d*f+t];break}var m=c-u,v=Math.random()*m+u|0,g=s[d*v+t],y=Math.random()*m+u|0,b=s[d*y+t],x=Math.random()*m+u|0,_=s[d*x+t];g<=b?_>=b?(p=y,h=b):g>=_?(p=v,h=g):(p=x,h=_):b>=_?(p=y,h=b):_>=g?(p=v,h=g):(p=x,h=_);for(var w=d*(c-1),T=d*p,k=0;k<d;++k,++w,++T){var C=s[w];s[w]=s[T],s[T]=C}var E=l[c-1];l[c-1]=l[p],l[p]=E,p=a(e,t,u,c-1,s,l,h);for(var w=d*(c-1),T=d*p,k=0;k<d;++k,++w,++T){var C=s[w];s[w]=s[T],s[T]=C}var E=l[c-1];if(l[c-1]=l[p],l[p]=E,f<p){for(c=p-1;u<c&&s[d*(c-1)+t]===h;)c-=1;c+=1}else{if(!(p<f))break;for(u=p+1;u<c&&s[d*u+t]===h;)u+=1}}return a(e,t,n,f,s,l,s[d*f+t])};var r=e("./partition"),a=r("lo<p0",["p0"]),i=8;function o(e,t,n,r,a,i){for(var o=2*e,s=o*(n+1)+t,l=n+1;l<r;++l,s+=o)for(var u=a[s],c=l,f=o*(l-1);c>n&&a[f+t]>u;--c,f-=o){for(var d=f,p=f+o,h=0;h<o;++h,++d,++p){var m=a[d];a[d]=a[p],a[p]=m}var v=i[c];i[c]=i[c-1],i[c-1]=v}}},{"./partition":88}],88:[function(e,t,n){"use strict";t.exports=function(e,t){var n="abcdef".split("").concat(t),a=[];return e.indexOf("lo")>=0&&a.push("lo=e[k+n]"),e.indexOf("hi")>=0&&a.push("hi=e[k+o]"),n.push(r.replace("_",a.join()).replace("$",e)),Function.apply(void 0,n)};var r="for(var j=2*a,k=j*c,l=k,m=c,n=b,o=a+b,p=c;d>p;++p,k+=j){var _;if($)if(m===p)m+=1,l+=j;else{for(var s=0;j>s;++s){var t=e[k+s];e[k+s]=e[l],e[l++]=t}var u=f[p];f[p]=f[m],f[m++]=u}}return m"},{}],89:[function(e,t,n){"use strict";t.exports=function(e,t){t<=4*r?a(0,t-1,e):function e(t,n,f){var d=(n-t+1)/6|0,p=t+d,h=n-d,m=t+n>>1,v=m-d,g=m+d,y=p,b=v,x=m,_=g,w=h,T=t+1,k=n-1,C=0;u(y,b,f)&&(C=y,y=b,b=C),u(_,w,f)&&(C=_,_=w,w=C),u(y,x,f)&&(C=y,y=x,x=C),u(b,x,f)&&(C=b,b=x,x=C),u(y,_,f)&&(C=y,y=_,_=C),u(x,_,f)&&(C=x,x=_,_=C),u(b,w,f)&&(C=b,b=w,w=C),u(b,x,f)&&(C=b,b=x,x=C),u(_,w,f)&&(C=_,_=w,w=C);for(var E=f[2*b],M=f[2*b+1],A=f[2*_],S=f[2*_+1],O=2*y,P=2*x,R=2*w,L=2*p,D=2*m,I=2*h,z=0;z<2;++z){var j=f[O+z],N=f[P+z],F=f[R+z];f[L+z]=j,f[D+z]=N,f[I+z]=F}o(v,t,f),o(g,n,f);for(var B=T;B<=k;++B)if(c(B,E,M,f))B!==T&&i(B,T,f),++T;else if(!c(B,A,S,f))for(;;){if(c(k,A,S,f)){c(k,E,M,f)?(s(B,T,k,f),++T,--k):(i(B,k,f),--k);break}if(--k<B)break}l(t,T-1,E,M,f),l(n,k+1,A,S,f),T-2-t<=r?a(t,T-2,f):e(t,T-2,f),n-(k+2)<=r?a(k+2,n,f):e(k+2,n,f),k-T<=r?a(T,k,f):e(T,k,f)}(0,t-1,e)};var r=32;function a(e,t,n){for(var r=2*(e+1),a=e+1;a<=t;++a){for(var i=n[r++],o=n[r++],s=a,l=r-2;s-- >e;){var u=n[l-2],c=n[l-1];if(u<i)break;if(u===i&&c<o)break;n[l]=u,n[l+1]=c,l-=2}n[l]=i,n[l+1]=o}}function i(e,t,n){t*=2;var r=n[e*=2],a=n[e+1];n[e]=n[t],n[e+1]=n[t+1],n[t]=r,n[t+1]=a}function o(e,t,n){t*=2,n[e*=2]=n[t],n[e+1]=n[t+1]}function s(e,t,n,r){t*=2,n*=2;var a=r[e*=2],i=r[e+1];r[e]=r[t],r[e+1]=r[t+1],r[t]=r[n],r[t+1]=r[n+1],r[n]=a,r[n+1]=i}function l(e,t,n,r,a){t*=2,a[e*=2]=a[t],a[t]=n,a[e+1]=a[t+1],a[t+1]=r}function u(e,t,n){t*=2;var r=n[e*=2],a=n[t];return!(r<a)&&(r!==a||n[e+1]>n[t+1])}function c(e,t,n,r){var a=r[e*=2];return a<t||a===t&&r[e+1]<n}},{}],90:[function(e,t,n){"use strict";t.exports={init:function(e){var t=a.nextPow2(e);s.length<t&&(r.free(s),s=r.mallocInt32(t)),l.length<t&&(r.free(l),l=r.mallocInt32(t)),u.length<t&&(r.free(u),u=r.mallocInt32(t)),c.length<t&&(r.free(c),c=r.mallocInt32(t)),f.length<t&&(r.free(f),f=r.mallocInt32(t)),d.length<t&&(r.free(d),d=r.mallocInt32(t));var n=8*t;p.length<n&&(r.free(p),p=r.mallocDouble(n))},sweepBipartite:function(e,t,n,r,a,f,d,v,g,y){for(var b=0,x=2*e,_=e-1,w=x-1,T=n;T<r;++T){var k=f[T],C=x*T;p[b++]=a[C+_],p[b++]=-(k+1),p[b++]=a[C+w],p[b++]=k}for(var T=d;T<v;++T){var k=y[T]+o,E=x*T;p[b++]=g[E+_],p[b++]=-k,p[b++]=g[E+w],p[b++]=k}var M=b>>>1;i(p,M);for(var A=0,S=0,T=0;T<M;++T){var O=0|p[2*T+1];if(O>=o)h(u,c,S--,O=O-o|0);else if(O>=0)h(s,l,A--,O);else if(O<=-o){O=-O-o|0;for(var P=0;P<A;++P){var R=t(s[P],O);if(void 0!==R)return R}m(u,c,S++,O)}else{O=-O-1|0;for(var P=0;P<S;++P){var R=t(O,u[P]);if(void 0!==R)return R}m(s,l,A++,O)}}},sweepComplete:function(e,t,n,r,a,o,v,g,y,b){for(var x=0,_=2*e,w=e-1,T=_-1,k=n;k<r;++k){var C=o[k]+1<<1,E=_*k;p[x++]=a[E+w],p[x++]=-C,p[x++]=a[E+T],p[x++]=C}for(var k=v;k<g;++k){var C=b[k]+1<<1,M=_*k;p[x++]=y[M+w],p[x++]=1|-C,p[x++]=y[M+T],p[x++]=1|C}var A=x>>>1;i(p,A);for(var S=0,O=0,P=0,k=0;k<A;++k){var R=0|p[2*k+1],L=1&R;if(k<A-1&&R>>1==p[2*k+3]>>1&&(L=2,k+=1),R<0){for(var D=-(R>>1)-1,I=0;I<P;++I){var z=t(f[I],D);if(void 0!==z)return z}if(0!==L)for(var I=0;I<S;++I){var z=t(s[I],D);if(void 0!==z)return z}if(1!==L)for(var I=0;I<O;++I){var z=t(u[I],D);if(void 0!==z)return z}0===L?m(s,l,S++,D):1===L?m(u,c,O++,D):2===L&&m(f,d,P++,D)}else{var D=(R>>1)-1;0===L?h(s,l,S--,D):1===L?h(u,c,O--,D):2===L&&h(f,d,P--,D)}}},scanBipartite:function(e,t,n,r,a,u,c,f,d,v,g,y){var b=0,x=2*e,_=t,w=t+e,T=1,k=1;r?k=o:T=o;for(var C=a;C<u;++C){var E=C+T,M=x*C;p[b++]=c[M+_],p[b++]=-E,p[b++]=c[M+w],p[b++]=E}for(var C=d;C<v;++C){var E=C+k,A=x*C;p[b++]=g[A+_],p[b++]=-E}var S=b>>>1;i(p,S);for(var O=0,C=0;C<S;++C){var P=0|p[2*C+1];if(P<0){var E=-P,R=!1;if(E>=o?(R=!r,E-=o):(R=!!r,E-=1),R)m(s,l,O++,E);else{var L=y[E],D=x*E,I=g[D+t+1],z=g[D+t+1+e];e:for(var j=0;j<O;++j){var N=s[j],F=x*N;if(!(z<c[F+t+1]||c[F+t+1+e]<I)){for(var B=t+2;B<e;++B)if(g[D+B+e]<c[F+B]||c[F+B+e]<g[D+B])continue e;var V,U=f[N];if(void 0!==(V=r?n(L,U):n(U,L)))return V}}}}else h(s,l,O--,P-T)}},scanComplete:function(e,t,n,r,a,l,u,c,f,d,h){for(var m=0,v=2*e,g=t,y=t+e,b=r;b<a;++b){var x=b+o,_=v*b;p[m++]=l[_+g],p[m++]=-x,p[m++]=l[_+y],p[m++]=x}for(var b=c;b<f;++b){var x=b+1,w=v*b;p[m++]=d[w+g],p[m++]=-x}var T=m>>>1;i(p,T);for(var k=0,b=0;b<T;++b){var C=0|p[2*b+1];if(C<0){var x=-C;if(x>=o)s[k++]=x-o;else{var E=h[x-=1],M=v*x,A=d[M+t+1],S=d[M+t+1+e];e:for(var O=0;O<k;++O){var P=s[O],R=u[P];if(R===E)break;var L=v*P;if(!(S<l[L+t+1]||l[L+t+1+e]<A)){for(var D=t+2;D<e;++D)if(d[M+D+e]<l[L+D]||l[L+D+e]<d[M+D])continue e;var I=n(R,E);if(void 0!==I)return I}}}}else{for(var x=C-o,O=k-1;O>=0;--O)if(s[O]===x){for(var D=O+1;D<k;++D)s[D-1]=s[D];break}--k}}}};var r=e("typedarray-pool"),a=e("bit-twiddle"),i=e("./sort"),o=1<<28,s=r.mallocInt32(1024),l=r.mallocInt32(1024),u=r.mallocInt32(1024),c=r.mallocInt32(1024),f=r.mallocInt32(1024),d=r.mallocInt32(1024),p=r.mallocDouble(8192);function h(e,t,n,r){var a=t[r],i=e[n-1];e[a]=i,t[i]=a}function m(e,t,n,r){e[n]=r,t[r]=n}},{"./sort":89,"bit-twiddle":80,"typedarray-pool":522}],91:[function(e,t,n){},{}],92:[function(e,t,n){var r=Object.create||function(e){var t=function(){};return t.prototype=e,new t},a=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return n},i=Function.prototype.bind||function(e){var t=this;return function(){return t.apply(e,arguments)}};function o(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=r(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}t.exports=o,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._maxListeners=void 0;var s,l=10;try{var u={};Object.defineProperty&&Object.defineProperty(u,"x",{value:0}),s=0===u.x}catch(e){s=!1}function c(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function f(e,t,n,a){var i,o,s;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((o=e._events)?(o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),s=o[t]):(o=e._events=r(null),e._eventsCount=0),s){if("function"==typeof s?s=o[t]=a?[n,s]:[s,n]:a?s.unshift(n):s.push(n),!s.warned&&(i=c(e))&&i>0&&s.length>i){s.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+s.length+' "'+String(t)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=s.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",l.name,l.message)}}else s=o[t]=n,++e._eventsCount;return e}function d(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}function p(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},a=i.call(d,r);return a.listener=n,r.wrapFn=a,a}function h(e,t,n){var r=e._events;if(!r)return[];var a=r[t];return a?"function"==typeof a?n?[a.listener||a]:[a]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(a):v(a,a.length):[]}function m(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function v(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}s?Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(e){if("number"!=typeof e||e<0||e!=e)throw new TypeError('"defaultMaxListeners" must be a positive number');l=e}}):o.defaultMaxListeners=l,o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return c(this)},o.prototype.emit=function(e){var t,n,r,a,i,o,s="error"===e;if(o=this._events)s=s&&null==o.error;else if(!s)return!1;if(s){if(arguments.length>1&&(t=arguments[1]),t instanceof Error)throw t;var l=new Error('Unhandled "error" event. ('+t+")");throw l.context=t,l}if(!(n=o[e]))return!1;var u="function"==typeof n;switch(r=arguments.length){case 1:!function(e,t,n){if(t)e.call(n);else for(var r=e.length,a=v(e,r),i=0;i<r;++i)a[i].call(n)}(n,u,this);break;case 2:!function(e,t,n,r){if(t)e.call(n,r);else for(var a=e.length,i=v(e,a),o=0;o<a;++o)i[o].call(n,r)}(n,u,this,arguments[1]);break;case 3:!function(e,t,n,r,a){if(t)e.call(n,r,a);else for(var i=e.length,o=v(e,i),s=0;s<i;++s)o[s].call(n,r,a)}(n,u,this,arguments[1],arguments[2]);break;case 4:!function(e,t,n,r,a,i){if(t)e.call(n,r,a,i);else for(var o=e.length,s=v(e,o),l=0;l<o;++l)s[l].call(n,r,a,i)}(n,u,this,arguments[1],arguments[2],arguments[3]);break;default:for(a=new Array(r-1),i=1;i<r;i++)a[i-1]=arguments[i];!function(e,t,n,r){if(t)e.apply(n,r);else for(var a=e.length,i=v(e,a),o=0;o<a;++o)i[o].apply(n,r)}(n,u,this,a)}return!0},o.prototype.addListener=function(e,t){return f(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return f(this,e,t,!0)},o.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,p(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,p(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,a,i,o,s;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(a=this._events))return this;if(!(n=a[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=r(null):(delete a[e],a.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){s=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(var n=t,r=n+1,a=e.length;r<a;n+=1,r+=1)e[n]=e[r];e.pop()}(n,i),1===n.length&&(a[e]=n[0]),a.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.removeAllListeners=function(e){var t,n,i;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=r(null),this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=r(null):delete n[e]),this;if(0===arguments.length){var o,s=a(n);for(i=0;i<s.length;++i)"removeListener"!==(o=s[i])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=r(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},o.prototype.listeners=function(e){return h(this,e,!0)},o.prototype.rawListeners=function(e){return h(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},o.prototype.listenerCount=m,o.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},{}],93:[function(e,t,n){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
"use strict";var r=e("base64-js"),a=e("ieee754");n.Buffer=s,n.SlowBuffer=function(e){return+e!=e&&(e=0),s.alloc(+e)},n.INSPECT_MAX_BYTES=50;var i=2147483647;function o(e){if(e>i)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return t.__proto__=s.prototype,t}function s(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return c(e)}return l(e,t,n)}function l(e,t,n){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!s.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|p(e,t),r=o(n),a=r.write(e,t);return a!==n&&(r=r.slice(0,a)),r}(e,t);if(ArrayBuffer.isView(e))return f(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(B(e,ArrayBuffer)||e&&B(e.buffer,ArrayBuffer))return function(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return(r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n)).__proto__=s.prototype,r}(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return s.from(r,t,n);var a=function(e){if(s.isBuffer(e)){var t=0|d(e.length),n=o(t);return 0===n.length?n:(e.copy(n,0,0,t),n)}return void 0!==e.length?"number"!=typeof e.length||V(e.length)?o(0):f(e):"Buffer"===e.type&&Array.isArray(e.data)?f(e.data):void 0}(e);if(a)return a;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return s.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function c(e){return u(e),o(e<0?0:0|d(e))}function f(e){for(var t=e.length<0?0:0|d(e.length),n=o(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function d(e){if(e>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|e}function p(e,t){if(s.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||B(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var a=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return j(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return N(e).length;default:if(a)return r?-1:j(e).length;t=(""+t).toLowerCase(),a=!0}}function h(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function m(e,t,n,r,a){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),V(n=+n)&&(n=a?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(a)return-1;n=e.length-1}else if(n<0){if(!a)return-1;n=0}if("string"==typeof t&&(t=s.from(t,r)),s.isBuffer(t))return 0===t.length?-1:v(e,t,n,r,a);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):v(e,[t],n,r,a);throw new TypeError("val must be string, number or Buffer")}function v(e,t,n,r,a){var i,o=1,s=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;o=2,s/=2,l/=2,n/=2}function u(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(a){var c=-1;for(i=n;i<s;i++)if(u(e,i)===u(t,-1===c?0:i-c)){if(-1===c&&(c=i),i-c+1===l)return c*o}else-1!==c&&(i-=i-c),c=-1}else for(n+l>s&&(n=s-l),i=n;i>=0;i--){for(var f=!0,d=0;d<l;d++)if(u(e,i+d)!==u(t,d)){f=!1;break}if(f)return i}return-1}function g(e,t,n,r){n=Number(n)||0;var a=e.length-n;r?(r=Number(r))>a&&(r=a):r=a;var i=t.length;r>i/2&&(r=i/2);for(var o=0;o<r;++o){var s=parseInt(t.substr(2*o,2),16);if(V(s))return o;e[n+o]=s}return o}function y(e,t,n,r){return F(j(t,e.length-n),e,n,r)}function b(e,t,n,r){return F(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function x(e,t,n,r){return b(e,t,n,r)}function _(e,t,n,r){return F(N(t),e,n,r)}function w(e,t,n,r){return F(function(e,t){for(var n,r,a,i=[],o=0;o<e.length&&!((t-=2)<0);++o)n=e.charCodeAt(o),r=n>>8,a=n%256,i.push(a),i.push(r);return i}(t,e.length-n),e,n,r)}function T(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function k(e,t,n){n=Math.min(e.length,n);for(var r=[],a=t;a<n;){var i,o,s,l,u=e[a],c=null,f=u>239?4:u>223?3:u>191?2:1;if(a+f<=n)switch(f){case 1:u<128&&(c=u);break;case 2:128==(192&(i=e[a+1]))&&(l=(31&u)<<6|63&i)>127&&(c=l);break;case 3:i=e[a+1],o=e[a+2],128==(192&i)&&128==(192&o)&&(l=(15&u)<<12|(63&i)<<6|63&o)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:i=e[a+1],o=e[a+2],s=e[a+3],128==(192&i)&&128==(192&o)&&128==(192&s)&&(l=(15&u)<<18|(63&i)<<12|(63&o)<<6|63&s)>65535&&l<1114112&&(c=l)}null===c?(c=65533,f=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),a+=f}return function(e){var t=e.length;if(t<=C)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=C));return n}(r)}n.kMaxLength=i,s.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}(),s.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),s.poolSize=8192,s.from=function(e,t,n){return l(e,t,n)},s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,s.alloc=function(e,t,n){return function(e,t,n){return u(e),e<=0?o(e):void 0!==t?"string"==typeof n?o(e).fill(t,n):o(e).fill(t):o(e)}(e,t,n)},s.allocUnsafe=function(e){return c(e)},s.allocUnsafeSlow=function(e){return c(e)},s.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==s.prototype},s.compare=function(e,t){if(B(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),B(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),!s.isBuffer(e)||!s.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,a=0,i=Math.min(n,r);a<i;++a)if(e[a]!==t[a]){n=e[a],r=t[a];break}return n<r?-1:r<n?1:0},s.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return s.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=s.allocUnsafe(t),a=0;for(n=0;n<e.length;++n){var i=e[n];if(B(i,Uint8Array)&&(i=s.from(i)),!s.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(r,a),a+=i.length}return r},s.byteLength=p,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)h(this,t,t+1);return this},s.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)h(this,t,t+3),h(this,t+1,t+2);return this},s.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)h(this,t,t+7),h(this,t+1,t+6),h(this,t+2,t+5),h(this,t+3,t+4);return this},s.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?k(this,0,e):function(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return A(this,t,n);case"utf8":case"utf-8":return k(this,t,n);case"ascii":return E(this,t,n);case"latin1":case"binary":return M(this,t,n);case"base64":return T(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(e){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===s.compare(this,e)},s.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},s.prototype.compare=function(e,t,n,r,a){if(B(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),!s.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===a&&(a=this.length),t<0||n>e.length||r<0||a>this.length)throw new RangeError("out of range index");if(r>=a&&t>=n)return 0;if(r>=a)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,a>>>=0,this===e)return 0;for(var i=a-r,o=n-t,l=Math.min(i,o),u=this.slice(r,a),c=e.slice(t,n),f=0;f<l;++f)if(u[f]!==c[f]){i=u[f],o=c[f];break}return i<o?-1:o<i?1:0},s.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},s.prototype.indexOf=function(e,t,n){return m(this,e,t,n,!0)},s.prototype.lastIndexOf=function(e,t,n){return m(this,e,t,n,!1)},s.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var a=this.length-t;if((void 0===n||n>a)&&(n=a),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return g(this,e,t,n);case"utf8":case"utf-8":return y(this,e,t,n);case"ascii":return b(this,e,t,n);case"latin1":case"binary":return x(this,e,t,n);case"base64":return _(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w(this,e,t,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var C=4096;function E(e,t,n){var r="";n=Math.min(e.length,n);for(var a=t;a<n;++a)r+=String.fromCharCode(127&e[a]);return r}function M(e,t,n){var r="";n=Math.min(e.length,n);for(var a=t;a<n;++a)r+=String.fromCharCode(e[a]);return r}function A(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var a="",i=t;i<n;++i)a+=z(e[i]);return a}function S(e,t,n){for(var r=e.slice(t,n),a="",i=0;i<r.length;i+=2)a+=String.fromCharCode(r[i]+256*r[i+1]);return a}function O(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function P(e,t,n,r,a,i){if(!s.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>a||t<i)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function R(e,t,n,r,a,i){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function L(e,t,n,r,i){return t=+t,n>>>=0,i||R(e,0,n,4),a.write(e,t,n,r,23,4),n+4}function D(e,t,n,r,i){return t=+t,n>>>=0,i||R(e,0,n,8),a.write(e,t,n,r,52,8),n+8}s.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n)<0&&(e=0):e>n&&(e=n),t<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return r.__proto__=s.prototype,r},s.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||O(e,t,this.length);for(var r=this[e],a=1,i=0;++i<t&&(a*=256);)r+=this[e+i]*a;return r},s.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||O(e,t,this.length);for(var r=this[e+--t],a=1;t>0&&(a*=256);)r+=this[e+--t]*a;return r},s.prototype.readUInt8=function(e,t){return e>>>=0,t||O(e,1,this.length),this[e]},s.prototype.readUInt16LE=function(e,t){return e>>>=0,t||O(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUInt16BE=function(e,t){return e>>>=0,t||O(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUInt32LE=function(e,t){return e>>>=0,t||O(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},s.prototype.readUInt32BE=function(e,t){return e>>>=0,t||O(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||O(e,t,this.length);for(var r=this[e],a=1,i=0;++i<t&&(a*=256);)r+=this[e+i]*a;return r>=(a*=128)&&(r-=Math.pow(2,8*t)),r},s.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||O(e,t,this.length);for(var r=t,a=1,i=this[e+--r];r>0&&(a*=256);)i+=this[e+--r]*a;return i>=(a*=128)&&(i-=Math.pow(2,8*t)),i},s.prototype.readInt8=function(e,t){return e>>>=0,t||O(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},s.prototype.readInt16LE=function(e,t){e>>>=0,t||O(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt16BE=function(e,t){e>>>=0,t||O(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt32LE=function(e,t){return e>>>=0,t||O(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return e>>>=0,t||O(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readFloatLE=function(e,t){return e>>>=0,t||O(e,4,this.length),a.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return e>>>=0,t||O(e,4,this.length),a.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return e>>>=0,t||O(e,8,this.length),a.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return e>>>=0,t||O(e,8,this.length),a.read(this,e,!1,52,8)},s.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){var a=Math.pow(2,8*n)-1;P(this,e,t,n,a,0)}var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},s.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){var a=Math.pow(2,8*n)-1;P(this,e,t,n,a,0)}var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},s.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,1,255,0),this[t]=255&e,t+1},s.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},s.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},s.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},s.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},s.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var a=Math.pow(2,8*n-1);P(this,e,t,n,a-1,-a)}var i=0,o=1,s=0;for(this[t]=255&e;++i<n&&(o*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+n},s.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var a=Math.pow(2,8*n-1);P(this,e,t,n,a-1,-a)}var i=n-1,o=1,s=0;for(this[t+i]=255&e;--i>=0&&(o*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+n},s.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},s.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},s.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},s.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},s.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},s.prototype.writeFloatLE=function(e,t,n){return L(this,e,t,!0,n)},s.prototype.writeFloatBE=function(e,t,n){return L(this,e,t,!1,n)},s.prototype.writeDoubleLE=function(e,t,n){return D(this,e,t,!0,n)},s.prototype.writeDoubleBE=function(e,t,n){return D(this,e,t,!1,n)},s.prototype.copy=function(e,t,n,r){if(!s.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var a=r-n;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,n,r);else if(this===e&&n<t&&t<r)for(var i=a-1;i>=0;--i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,r),t);return a},s.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!s.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var a=e.charCodeAt(0);("utf8"===r&&a<128||"latin1"===r)&&(e=a)}}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{var o=s.isBuffer(e)?e:s.from(e,r),l=o.length;if(0===l)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<n-t;++i)this[i+t]=o[i%l]}return this};var I=/[^+/0-9A-Za-z-_]/g;function z(e){return e<16?"0"+e.toString(16):e.toString(16)}function j(e,t){var n;t=t||1/0;for(var r=e.length,a=null,i=[],o=0;o<r;++o){if((n=e.charCodeAt(o))>55295&&n<57344){if(!a){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&i.push(239,191,189);continue}a=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),a=n;continue}n=65536+(a-55296<<10|n-56320)}else a&&(t-=3)>-1&&i.push(239,191,189);if(a=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function N(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(I,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function F(e,t,n,r){for(var a=0;a<r&&!(a+n>=t.length||a>=e.length);++a)t[a+n]=e[a];return a}function B(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function V(e){return e!=e}},{"base64-js":62,ieee754:395}],94:[function(e,t,n){"use strict";var r=e("./lib/monotone"),a=e("./lib/triangulation"),i=e("./lib/delaunay"),o=e("./lib/filter");function s(e){return[Math.min(e[0],e[1]),Math.max(e[0],e[1])]}function l(e,t){return e[0]-t[0]||e[1]-t[1]}function u(e,t,n){return t in e?e[t]:n}t.exports=function(e,t,n){Array.isArray(t)?(n=n||{},t=t||[]):(n=t||{},t=[]);var c=!!u(n,"delaunay",!0),f=!!u(n,"interior",!0),d=!!u(n,"exterior",!0),p=!!u(n,"infinity",!1);if(!f&&!d||0===e.length)return[];var h=r(e,t);if(c||f!==d||p){for(var m=a(e.length,function(e){return e.map(s).sort(l)}(t)),v=0;v<h.length;++v){var g=h[v];m.addTriangle(g[0],g[1],g[2])}return c&&i(e,m),d?f?p?o(m,0,p):m.cells():o(m,1,p):o(m,-1)}return h}},{"./lib/delaunay":95,"./lib/filter":96,"./lib/monotone":97,"./lib/triangulation":98}],95:[function(e,t,n){"use strict";var r=e("robust-in-sphere")[4];function a(e,t,n,a,i,o){var s=t.opposite(a,i);if(!(s<0)){if(i<a){var l=a;a=i,i=l,l=o,o=s,s=l}t.isConstraint(a,i)||r(e[a],e[i],e[o],e[s])<0&&n.push(a,i)}}e("binary-search-bounds"),t.exports=function(e,t){for(var n=[],i=e.length,o=t.stars,s=0;s<i;++s)for(var l=o[s],u=1;u<l.length;u+=2){var c=l[u];if(!(c<s||t.isConstraint(s,c))){for(var f=l[u-1],d=-1,p=1;p<l.length;p+=2)if(l[p-1]===c){d=l[p];break}d<0||r(e[s],e[c],e[f],e[d])<0&&n.push(s,c)}}for(;n.length>0;){for(var c=n.pop(),s=n.pop(),f=-1,d=-1,l=o[s],h=1;h<l.length;h+=2){var m=l[h-1],v=l[h];m===c?d=v:v===c&&(f=m)}f<0||d<0||r(e[s],e[c],e[f],e[d])>=0||(t.flip(s,c),a(e,t,n,f,s,d),a(e,t,n,s,d,f),a(e,t,n,d,c,f),a(e,t,n,c,f,d))}}},{"binary-search-bounds":99,"robust-in-sphere":484}],96:[function(e,t,n){"use strict";var r=e("binary-search-bounds");function a(e,t,n,r,a,i,o){this.cells=e,this.neighbor=t,this.flags=r,this.constraint=n,this.active=a,this.next=i,this.boundary=o}t.exports=function(e,t,n){var r=function(e,t){for(var n=e.cells(),r=n.length,i=0;i<r;++i){var s=n[i],l=s[0],u=s[1],c=s[2];u<c?u<l&&(s[0]=u,s[1]=c,s[2]=l):c<l&&(s[0]=c,s[1]=l,s[2]=u)}n.sort(o);for(var f=new Array(r),i=0;i<f.length;++i)f[i]=0;var d=[],p=[],h=new Array(3*r),m=new Array(3*r),v=null;t&&(v=[]);for(var g=new a(n,h,m,f,d,p,v),i=0;i<r;++i)for(var s=n[i],y=0;y<3;++y){var l=s[y],u=s[(y+1)%3],b=h[3*i+y]=g.locate(u,l,e.opposite(u,l)),x=m[3*i+y]=e.isConstraint(l,u);b<0&&(x?p.push(i):(d.push(i),f[i]=1),t&&v.push([u,l,-1]))}return g}(e,n);if(0===t)return n?r.cells.concat(r.boundary):r.cells;for(var i=1,s=r.active,l=r.next,u=r.flags,c=r.cells,f=r.constraint,d=r.neighbor;s.length>0||l.length>0;){for(;s.length>0;){var p=s.pop();if(u[p]!==-i){u[p]=i,c[p];for(var h=0;h<3;++h){var m=d[3*p+h];m>=0&&0===u[m]&&(f[3*p+h]?l.push(m):(s.push(m),u[m]=i))}}}var v=l;l=s,s=v,l.length=0,i=-i}var g=function(e,t,n){for(var r=0,a=0;a<e.length;++a)t[a]===n&&(e[r++]=e[a]);return e.length=r,e}(c,u,t);return n?g.concat(r.boundary):g};var i=a.prototype;function o(e,t){return e[0]-t[0]||e[1]-t[1]||e[2]-t[2]}i.locate=function(){var e=[0,0,0];return function(t,n,a){var i=t,s=n,l=a;return n<a?n<t&&(i=n,s=a,l=t):a<t&&(i=a,s=t,l=n),i<0?-1:(e[0]=i,e[1]=s,e[2]=l,r.eq(this.cells,e,o))}}()},{"binary-search-bounds":99}],97:[function(e,t,n){"use strict";var r=e("binary-search-bounds"),a=e("robust-orientation")[3],i=0,o=1,s=2;function l(e,t,n,r,a){this.a=e,this.b=t,this.idx=n,this.lowerIds=r,this.upperIds=a}function u(e,t,n,r){this.a=e,this.b=t,this.type=n,this.idx=r}function c(e,t){var n=e.a[0]-t.a[0]||e.a[1]-t.a[1]||e.type-t.type;return n||(e.type!==i&&(n=a(e.a,e.b,t.b))?n:e.idx-t.idx)}function f(e,t){return a(e.a,e.b,t)}function d(e,t,n,i,o){for(var s=r.lt(t,i,f),l=r.gt(t,i,f),u=s;u<l;++u){for(var c=t[u],d=c.lowerIds,p=d.length;p>1&&a(n[d[p-2]],n[d[p-1]],i)>0;)e.push([d[p-1],d[p-2],o]),p-=1;d.length=p,d.push(o);for(var h=c.upperIds,p=h.length;p>1&&a(n[h[p-2]],n[h[p-1]],i)<0;)e.push([h[p-2],h[p-1],o]),p-=1;h.length=p,h.push(o)}}function p(e,t){var n;return(n=e.a[0]<t.a[0]?a(e.a,e.b,t.a):a(t.b,t.a,e.a))?n:(n=t.b[0]<e.b[0]?a(e.a,e.b,t.b):a(t.b,t.a,e.b))||e.idx-t.idx}function h(e,t,n){var a=r.le(e,n,p),i=e[a],o=i.upperIds,s=o[o.length-1];i.upperIds=[s],e.splice(a+1,0,new l(n.a,n.b,n.idx,[s],o))}function m(e,t,n){var a=n.a;n.a=n.b,n.b=a;var i=r.eq(e,n,p),o=e[i],s=e[i-1];s.upperIds=o.upperIds,e.splice(i,1)}t.exports=function(e,t){for(var n=e.length,r=t.length,a=[],f=0;f<n;++f)a.push(new u(e[f],null,i,f));for(var f=0;f<r;++f){var p=t[f],v=e[p[0]],g=e[p[1]];v[0]<g[0]?a.push(new u(v,g,s,f),new u(g,v,o,f)):v[0]>g[0]&&a.push(new u(g,v,s,f),new u(v,g,o,f))}a.sort(c);for(var y=a[0].a[0]-(1+Math.abs(a[0].a[0]))*Math.pow(2,-52),b=[new l([y,1],[y,0],-1,[],[],[],[])],x=[],f=0,_=a.length;f<_;++f){var w=a[f],T=w.type;T===i?d(x,b,e,w.a,w.idx):T===s?h(b,0,w):m(b,0,w)}return x}},{"binary-search-bounds":99,"robust-orientation":486}],98:[function(e,t,n){"use strict";var r=e("binary-search-bounds");function a(e,t){this.stars=e,this.edges=t}t.exports=function(e,t){for(var n=new Array(e),r=0;r<e;++r)n[r]=[];return new a(n,t)};var i=a.prototype;function o(e,t,n){for(var r=1,a=e.length;r<a;r+=2)if(e[r-1]===t&&e[r]===n)return e[r-1]=e[a-2],e[r]=e[a-1],void(e.length=a-2)}i.isConstraint=function(){var e=[0,0];function t(e,t){return e[0]-t[0]||e[1]-t[1]}return function(n,a){return e[0]=Math.min(n,a),e[1]=Math.max(n,a),r.eq(this.edges,e,t)>=0}}(),i.removeTriangle=function(e,t,n){var r=this.stars;o(r[e],t,n),o(r[t],n,e),o(r[n],e,t)},i.addTriangle=function(e,t,n){var r=this.stars;r[e].push(t,n),r[t].push(n,e),r[n].push(e,t)},i.opposite=function(e,t){for(var n=this.stars[t],r=1,a=n.length;r<a;r+=2)if(n[r]===e)return n[r-1];return-1},i.flip=function(e,t){var n=this.opposite(e,t),r=this.opposite(t,e);this.removeTriangle(e,t,n),this.removeTriangle(t,e,r),this.addTriangle(e,r,n),this.addTriangle(t,n,r)},i.edges=function(){for(var e=this.stars,t=[],n=0,r=e.length;n<r;++n)for(var a=e[n],i=0,o=a.length;i<o;i+=2)t.push([a[i],a[i+1]]);return t},i.cells=function(){for(var e=this.stars,t=[],n=0,r=e.length;n<r;++n)for(var a=e[n],i=0,o=a.length;i<o;i+=2){var s=a[i],l=a[i+1];n<Math.min(s,l)&&t.push([n,s,l])}return t}},{"binary-search-bounds":99}],99:[function(e,t,n){"use strict";function r(e,t,n,r,a){var i=["function ",e,"(a,l,h,",r.join(","),"){",a?"":"var i=",n?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a[m]"];return a?t.indexOf("c")<0?i.push(";if(x===y){return m}else if(x<=y){"):i.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):i.push(";if(",t,"){i=m;"),n?i.push("l=m+1}else{h=m-1}"):i.push("h=m-1}else{l=m+1}"),i.push("}"),a?i.push("return -1};"):i.push("return i};"),i.join("")}function a(e,t,n,a){var i=new Function([r("A","x"+e+"y",t,["y"],a),r("P","c(x,y)"+e+"0",t,["y","c"],a),"function dispatchBsearch",n,"(a,y,c,l,h){if(typeof(c)==='function'){return P(a,(l===void 0)?0:l|0,(h===void 0)?a.length-1:h|0,y,c)}else{return A(a,(c===void 0)?0:c|0,(l===void 0)?a.length-1:l|0,y)}}return dispatchBsearch",n].join(""));return i()}t.exports={ge:a(">=",!1,"GE"),gt:a(">",!1,"GT"),lt:a("<",!0,"LT"),le:a("<=",!0,"LE"),eq:a("-",!0,"EQ",!0)}},{}],100:[function(e,t,n){"use strict";t.exports=function(e){for(var t=1,n=1;n<e.length;++n)for(var r=0;r<n;++r)if(e[n]<e[r])t=-t;else if(e[r]===e[n])return 0;return t}},{}],101:[function(e,t,n){"use strict";var r=e("dup"),a=e("robust-linear-solve");function i(e,t){for(var n=0,r=e.length,a=0;a<r;++a)n+=e[a]*t[a];return n}function o(e){var t=e.length;if(0===t)return[];e[0].length;var n=r([e.length+1,e.length+1],1),o=r([e.length+1],1);n[t][t]=0;for(var s=0;s<t;++s){for(var l=0;l<=s;++l)n[l][s]=n[s][l]=2*i(e[s],e[l]);o[s]=i(e[s],e[s])}for(var u=a(n,o),c=0,f=u[t+1],s=0;s<f.length;++s)c+=f[s];for(var d=new Array(t),s=0;s<t;++s){for(var f=u[s],p=0,l=0;l<f.length;++l)p+=f[l];d[s]=p/c}return d}function s(e){if(0===e.length)return[];for(var t=e[0].length,n=r([t]),a=o(e),i=0;i<e.length;++i)for(var s=0;s<t;++s)n[s]+=e[i][s]*a[i];return n}s.barycenetric=o,t.exports=s},{dup:155,"robust-linear-solve":485}],102:[function(e,t,n){t.exports=function(e){for(var t=r(e),n=0,a=0;a<e.length;++a)for(var i=e[a],o=0;o<t.length;++o)n+=Math.pow(i[o]-t[o],2);return Math.sqrt(n/e.length)};var r=e("circumcenter")},{circumcenter:101}],103:[function(e,t,n){t.exports=function(e,t,n){return t<n?e<t?t:e>n?n:e:e<n?n:e>t?t:e}},{}],104:[function(e,t,n){"use strict";t.exports=function(e,t,n){var r;if(n){r=t;for(var a=new Array(t.length),i=0;i<t.length;++i){var o=t[i];a[i]=[o[0],o[1],n[i]]}t=a}for(var s=function(e,t,n){var r=h(e,[],p(e));return g(t,r,n),!!r}(e,t,!!n);y(e,t,!!n);)s=!0;if(n&&s){r.length=0,n.length=0;for(var i=0;i<t.length;++i){var o=t[i];r.push([o[0],o[1]]),n.push(o[2])}}return s};var r=e("union-find"),a=e("box-intersect"),i=e("robust-segment-intersect"),o=e("big-rat"),s=e("big-rat/cmp"),l=e("big-rat/to-float"),u=e("rat-vec"),c=e("nextafter"),f=e("./lib/rat-seg-intersect");function d(e){var t=l(e);return[c(t,-1/0),c(t,1/0)]}function p(e){for(var t=new Array(e.length),n=0;n<e.length;++n){var r=e[n];t[n]=[c(r[0],-1/0),c(r[1],-1/0),c(r[0],1/0),c(r[1],1/0)]}return t}function h(e,t,n){for(var i=t.length,o=new r(i),s=[],l=0;l<t.length;++l){var u=t[l],f=d(u[0]),p=d(u[1]);s.push([c(f[0],-1/0),c(p[0],-1/0),c(f[1],1/0),c(p[1],1/0)])}a(s,function(e,t){o.link(e,t)});for(var h=!0,m=new Array(i),l=0;l<i;++l){var v=o.find(l);v!==l&&(h=!1,e[v]=[Math.min(e[l][0],e[v][0]),Math.min(e[l][1],e[v][1])])}if(h)return null;for(var g=0,l=0;l<i;++l){var v=o.find(l);v===l?(m[l]=g,e[g++]=e[l]):m[l]=-1}e.length=g;for(var l=0;l<i;++l)m[l]<0&&(m[l]=m[o.find(l)]);return m}function m(e,t){return e[0]-t[0]||e[1]-t[1]}function v(e,t){var n=e[0]-t[0]||e[1]-t[1];return n||(e[2]<t[2]?-1:e[2]>t[2]?1:0)}function g(e,t,n){if(0!==e.length){if(t)for(var r=0;r<e.length;++r){var a=e[r],i=t[a[0]],o=t[a[1]];a[0]=Math.min(i,o),a[1]=Math.max(i,o)}else for(var r=0;r<e.length;++r){var a=e[r],i=a[0],o=a[1];a[0]=Math.min(i,o),a[1]=Math.max(i,o)}n?e.sort(v):e.sort(m);for(var s=1,r=1;r<e.length;++r){var l=e[r-1],u=e[r];(u[0]!==l[0]||u[1]!==l[1]||n&&u[2]!==l[2])&&(e[s++]=u)}e.length=s}}function y(e,t,n){var r=function(e,t){for(var n=new Array(t.length),r=0;r<t.length;++r){var a=t[r],i=e[a[0]],o=e[a[1]];n[r]=[c(Math.min(i[0],o[0]),-1/0),c(Math.min(i[1],o[1]),-1/0),c(Math.max(i[0],o[0]),1/0),c(Math.max(i[1],o[1]),1/0)]}return n}(e,t),d=function(e,t,n){var r=[];return a(n,function(n,a){var o=t[n],s=t[a];if(o[0]!==s[0]&&o[0]!==s[1]&&o[1]!==s[0]&&o[1]!==s[1]){var l=e[o[0]],u=e[o[1]],c=e[s[0]],f=e[s[1]];i(l,u,c,f)&&r.push([n,a])}}),r}(e,t,r),m=p(e),v=function(e,t,n,r){var o=[];return a(n,r,function(n,r){var a=t[n];if(a[0]!==r&&a[1]!==r){var s=e[r],l=e[a[0]],u=e[a[1]];i(l,u,s,s)&&o.push([n,r])}}),o}(e,t,r,m),y=function(e,t,n,r,a){var i,c,d=e.map(function(e){return[o(e[0]),o(e[1])]});for(i=0;i<n.length;++i){var p=n[i];c=p[0];var h=p[1],m=t[c],v=t[h],g=f(u(e[m[0]]),u(e[m[1]]),u(e[v[0]]),u(e[v[1]]));if(g){var y=e.length;e.push([l(g[0]),l(g[1])]),d.push(g),r.push([c,y],[h,y])}}for(r.sort(function(e,t){if(e[0]!==t[0])return e[0]-t[0];var n=d[e[1]],r=d[t[1]];return s(n[0],r[0])||s(n[1],r[1])}),i=r.length-1;i>=0;--i){var b=r[i];c=b[0];var x=t[c],_=x[0],w=x[1],T=e[_],k=e[w];if((T[0]-k[0]||T[1]-k[1])<0){var C=_;_=w,w=C}x[0]=_;var E,M=x[1]=b[1];for(a&&(E=x[2]);i>0&&r[i-1][0]===c;){var b=r[--i],A=b[1];a?t.push([M,A,E]):t.push([M,A]),M=A}a?t.push([M,w,E]):t.push([M,w])}return d}(e,t,d,v,n),b=h(e,y);return g(t,b,n),!!b||d.length>0||v.length>0}},{"./lib/rat-seg-intersect":105,"big-rat":66,"big-rat/cmp":64,"big-rat/to-float":78,"box-intersect":84,nextafter:434,"rat-vec":469,"robust-segment-intersect":489,"union-find":523}],105:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){var i=s(t,e),f=s(r,n),d=c(i,f);if(0===o(d))return null;var p=s(e,n),h=c(f,p),m=a(h,d),v=u(i,m);return l(e,v)};var r=e("big-rat/mul"),a=e("big-rat/div"),i=e("big-rat/sub"),o=e("big-rat/sign"),s=e("rat-vec/sub"),l=e("rat-vec/add"),u=e("rat-vec/muls");function c(e,t){return i(r(e[0],t[1]),r(e[1],t[0]))}},{"big-rat/div":65,"big-rat/mul":75,"big-rat/sign":76,"big-rat/sub":77,"rat-vec/add":468,"rat-vec/muls":470,"rat-vec/sub":471}],106:[function(e,t,n){"use strict";var r=e("clamp");function a(e,t){null==t&&(t=!0);var n=e[0],a=e[1],i=e[2],o=e[3];null==o&&(o=t?1:255),t&&(n*=255,a*=255,i*=255,o*=255),n=255&r(n,0,255),a=255&r(a,0,255),i=255&r(i,0,255),o=255&r(o,0,255);var s=16777216*n+(a<<16)+(i<<8)+o;return s}t.exports=a,t.exports.to=a,t.exports.from=function(e,t){var n=(e=+e)>>>24,r=(16711680&e)>>>16,a=(65280&e)>>>8,i=255&e;return!1===t?[n,r,a,i]:[n/255,r/255,a/255,i/255]}},{clamp:103}],107:[function(e,t,n){"use strict";t.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],108:[function(e,t,n){"use strict";var r=e("color-rgba"),a=e("clamp"),i=e("dtype");t.exports=function(e,t){"float"!==t&&t||(t="array"),"uint"===t&&(t="uint8"),"uint_clamped"===t&&(t="uint8_clamped");var n=i(t),o=new n(4),s="uint8"!==t&&"uint8_clamped"!==t;return e.length&&"string"!=typeof e||((e=r(e))[0]/=255,e[1]/=255,e[2]/=255),function(e){return e instanceof Uint8Array||e instanceof Uint8ClampedArray||!!(Array.isArray(e)&&(e[0]>1||0===e[0])&&(e[1]>1||0===e[1])&&(e[2]>1||0===e[2])&&(!e[3]||e[3]>1))}(e)?(o[0]=e[0],o[1]=e[1],o[2]=e[2],o[3]=null!=e[3]?e[3]:255,s&&(o[0]/=255,o[1]/=255,o[2]/=255,o[3]/=255),o):(s?(o[0]=e[0],o[1]=e[1],o[2]=e[2],o[3]=null!=e[3]?e[3]:1):(o[0]=a(Math.floor(255*e[0]),0,255),o[1]=a(Math.floor(255*e[1]),0,255),o[2]=a(Math.floor(255*e[2]),0,255),o[3]=null==e[3]?255:a(Math.floor(255*e[3]),0,255)),o)}},{clamp:103,"color-rgba":110,dtype:154}],109:[function(e,n,r){(function(t){"use strict";var r=e("color-name"),a=e("is-plain-obj"),i=e("defined");n.exports=function(e){var n,s,l=[],u=1;if("string"==typeof e)if(r[e])l=r[e].slice(),s="rgb";else if("transparent"===e)u=0,s="rgb",l=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(e)){var c=e.slice(1),f=c.length,d=f<=4;u=1,d?(l=[parseInt(c[0]+c[0],16),parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16)],4===f&&(u=parseInt(c[3]+c[3],16)/255)):(l=[parseInt(c[0]+c[1],16),parseInt(c[2]+c[3],16),parseInt(c[4]+c[5],16)],8===f&&(u=parseInt(c[6]+c[7],16)/255)),l[0]||(l[0]=0),l[1]||(l[1]=0),l[2]||(l[2]=0),s="rgb"}else if(n=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(e)){var p=n[1],c=p.replace(/a$/,"");s=c;var f="cmyk"===c?4:"gray"===c?1:3;l=n[2].trim().split(/\s*,\s*/).map(function(e,t){if(/%$/.test(e))return t===f?parseFloat(e)/100:"rgb"===c?255*parseFloat(e)/100:parseFloat(e);if("h"===c[t]){if(/deg$/.test(e))return parseFloat(e);if(void 0!==o[e])return o[e]}return parseFloat(e)}),p===c&&l.push(1),u=void 0===l[f]?1:l[f],l=l.slice(0,f)}else e.length>10&&/[0-9](?:\s|\/)/.test(e)&&(l=e.match(/([0-9]+)/g).map(function(e){return parseFloat(e)}),s=e.match(/([a-z])/gi).join("").toLowerCase());else if(isNaN(e))if(a(e)){var h=i(e.r,e.red,e.R,null);null!==h?(s="rgb",l=[h,i(e.g,e.green,e.G),i(e.b,e.blue,e.B)]):(s="hsl",l=[i(e.h,e.hue,e.H),i(e.s,e.saturation,e.S),i(e.l,e.lightness,e.L,e.b,e.brightness)]),u=i(e.a,e.alpha,e.opacity,1),null!=e.opacity&&(u/=100)}else(Array.isArray(e)||t.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(e))&&(l=[e[0],e[1],e[2]],s="rgb",u=4===e.length?e[3]:1);else s="rgb",l=[e>>>16,(65280&e)>>>8,255&e];return{space:s,values:l,alpha:u}};var o={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"color-name":107,defined:149,"is-plain-obj":405}],110:[function(e,t,n){"use strict";var r=e("color-parse"),a=e("color-space/hsl"),i=e("clamp");t.exports=function(e){var t,n=r(e);return n.space?((t=Array(3))[0]=i(n.values[0],0,255),t[1]=i(n.values[1],0,255),t[2]=i(n.values[2],0,255),"h"===n.space[0]&&(t=a.rgb(t)),t.push(i(n.alpha,0,1)),t):[]}},{clamp:103,"color-parse":109,"color-space/hsl":111}],111:[function(e,t,n){"use strict";var r=e("./rgb");t.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(e){var t,n,r,a,i,o=e[0]/360,s=e[1]/100,l=e[2]/100;if(0===s)return[i=255*l,i,i];t=2*l-(n=l<.5?l*(1+s):l+s-l*s),a=[0,0,0];for(var u=0;u<3;u++)(r=o+1/3*-(u-1))<0?r++:r>1&&r--,i=6*r<1?t+6*(n-t)*r:2*r<1?n:3*r<2?t+(n-t)*(2/3-r)*6:t,a[u]=255*i;return a}},r.hsl=function(e){var t,n,r=e[0]/255,a=e[1]/255,i=e[2]/255,o=Math.min(r,a,i),s=Math.max(r,a,i),l=s-o;return s===o?t=0:r===s?t=(a-i)/l:a===s?t=2+(i-r)/l:i===s&&(t=4+(r-a)/l),(t=Math.min(60*t,360))<0&&(t+=360),n=(o+s)/2,[t,100*(s===o?0:n<=.5?l/(s+o):l/(2-s-o)),100*n]}},{"./rgb":112}],112:[function(e,t,n){"use strict";t.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},{}],113:[function(e,t,n){t.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],cool:[{index:0,rgb:[0,255,255]},{index:1,rgb:[255,0,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},{}],114:[function(e,t,n){"use strict";var r=e("./colorScale"),a=e("lerp");function i(e){return[e[0]/255,e[1]/255,e[2]/255,e[3]]}function o(e){for(var t,n="#",r=0;r<3;++r)t=(t=e[r]).toString(16),n+=("00"+t).substr(t.length);return n}function s(e){return"rgba("+e.join(",")+")"}t.exports=function(e){var t,n,l,u,c,f,d,p,h,m;if(e||(e={}),p=(e.nshades||72)-1,d=e.format||"hex",(f=e.colormap)||(f="jet"),"string"==typeof f){if(f=f.toLowerCase(),!r[f])throw Error(f+" not a supported colorscale");c=r[f]}else{if(!Array.isArray(f))throw Error("unsupported colormap option",f);c=f.slice()}if(c.length>p)throw new Error(f+" map requires nshades to be at least size "+c.length);h=Array.isArray(e.alpha)?2!==e.alpha.length?[1,1]:e.alpha.slice():"number"==typeof e.alpha?[e.alpha,e.alpha]:[1,1],t=c.map(function(e){return Math.round(e.index*p)}),h[0]=Math.min(Math.max(h[0],0),1),h[1]=Math.min(Math.max(h[1],0),1);var v=c.map(function(e,t){var n=c[t].index,r=c[t].rgb.slice();return 4===r.length&&r[3]>=0&&r[3]<=1?r:(r[3]=h[0]+(h[1]-h[0])*n,r)}),g=[];for(m=0;m<t.length-1;++m){u=t[m+1]-t[m],n=v[m],l=v[m+1];for(var y=0;y<u;y++){var b=y/u;g.push([Math.round(a(n[0],l[0],b)),Math.round(a(n[1],l[1],b)),Math.round(a(n[2],l[2],b)),a(n[3],l[3],b)])}}return g.push(c[c.length-1].rgb.concat(h[1])),"hex"===d?g=g.map(o):"rgbaString"===d?g=g.map(s):"float"===d&&(g=g.map(i)),g}},{"./colorScale":113,lerp:408}],115:[function(e,t,n){"use strict";t.exports=function(e,t,n,i){var o=r(t,n,i);if(0===o){var s=a(r(e,t,n)),u=a(r(e,t,i));if(s===u){if(0===s){var c=l(e,t,n),f=l(e,t,i);return c===f?0:c?1:-1}return 0}return 0===u?s>0?-1:l(e,t,i)?-1:1:0===s?u>0?1:l(e,t,n)?1:-1:a(u-s)}var d=r(e,t,n);if(d>0)return o>0&&r(e,t,i)>0?1:-1;if(d<0)return o>0||r(e,t,i)>0?1:-1;var p=r(e,t,i);return p>0?1:l(e,t,n)?1:-1};var r=e("robust-orientation"),a=e("signum"),i=e("two-sum"),o=e("robust-product"),s=e("robust-sum");function l(e,t,n){var r=i(e[0],-t[0]),a=i(e[1],-t[1]),l=i(n[0],-t[0]),u=i(n[1],-t[1]),c=s(o(r,l),o(a,u));return c[c.length-1]>=0}},{"robust-orientation":486,"robust-product":487,"robust-sum":491,signum:492,"two-sum":521}],116:[function(e,t,n){t.exports=function(e,t){var n=e.length,i=e.length-t.length;if(i)return i;switch(n){case 0:return 0;case 1:return e[0]-t[0];case 2:return e[0]+e[1]-t[0]-t[1]||r(e[0],e[1])-r(t[0],t[1]);case 3:var o=e[0]+e[1],s=t[0]+t[1];if(i=o+e[2]-(s+t[2]))return i;var l=r(e[0],e[1]),u=r(t[0],t[1]);return r(l,e[2])-r(u,t[2])||r(l+e[2],o)-r(u+t[2],s);case 4:var c=e[0],f=e[1],d=e[2],p=e[3],h=t[0],m=t[1],v=t[2],g=t[3];return c+f+d+p-(h+m+v+g)||r(c,f,d,p)-r(h,m,v,g,h)||r(c+f,c+d,c+p,f+d,f+p,d+p)-r(h+m,h+v,h+g,m+v,m+g,v+g)||r(c+f+d,c+f+p,c+d+p,f+d+p)-r(h+m+v,h+m+g,h+v+g,m+v+g);default:for(var y=e.slice().sort(a),b=t.slice().sort(a),x=0;x<n;++x)if(i=y[x]-b[x])return i;return 0}};var r=Math.min;function a(e,t){return e-t}},{}],117:[function(e,t,n){"use strict";var r=e("compare-cell"),a=e("cell-orientation");t.exports=function(e,t){return r(e,t)||a(e)-a(t)}},{"cell-orientation":100,"compare-cell":116}],118:[function(e,t,n){"use strict";var r=e("./lib/ch1d"),a=e("./lib/ch2d"),i=e("./lib/chnd");t.exports=function(e){var t=e.length;if(0===t)return[];if(1===t)return[[0]];var n=e[0].length;return 0===n?[]:1===n?r(e):2===n?a(e):i(e,n)}},{"./lib/ch1d":119,"./lib/ch2d":120,"./lib/chnd":121}],119:[function(e,t,n){"use strict";t.exports=function(e){for(var t=0,n=0,r=1;r<e.length;++r)e[r][0]<e[t][0]&&(t=r),e[r][0]>e[n][0]&&(n=r);return t<n?[[t],[n]]:t>n?[[n],[t]]:[[t]]}},{}],120:[function(e,t,n){"use strict";t.exports=function(e){var t=r(e),n=t.length;if(n<=2)return[];for(var a=new Array(n),i=t[n-1],o=0;o<n;++o){var s=t[o];a[o]=[i,s],i=s}return a};var r=e("monotone-convex-hull-2d")},{"monotone-convex-hull-2d":417}],121:[function(e,t,n){"use strict";t.exports=function(e,t){try{return r(e,!0)}catch(s){var n=a(e);if(n.length<=t)return[];var i=function(e,t){for(var n=e.length,r=new Array(n),a=0;a<t.length;++a)r[a]=e[t[a]];for(var i=t.length,a=0;a<n;++a)t.indexOf(a)<0&&(r[i++]=e[a]);return r}(e,n),o=r(i,!0);return function(e,t){for(var n=e.length,r=t.length,a=0;a<n;++a)for(var i=e[a],o=0;o<i.length;++o){var s=i[o];if(s<r)i[o]=t[s];else{s-=r;for(var l=0;l<r;++l)s>=t[l]&&(s+=1);i[o]=s}}return e}(o,n)}};var r=e("incremental-convex-hull"),a=e("affine-hull")},{"affine-hull":50,"incremental-convex-hull":396}],122:[function(e,t,n){t.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|)o.?tom(e|)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},{}],123:[function(e,t,n){t.exports=["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]},{}],124:[function(e,t,n){t.exports=["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]},{}],125:[function(e,t,n){t.exports=["normal","italic","oblique"]},{}],126:[function(e,t,n){t.exports=["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]},{}],127:[function(e,t,n){"use strict";t.exports={parse:e("./parse"),stringify:e("./stringify")}},{"./parse":129,"./stringify":130}],128:[function(e,t,n){"use strict";var r=e("css-font-size-keywords");t.exports={isSize:function(e){return/^[\d\.]/.test(e)||-1!==e.indexOf("/")||-1!==r.indexOf(e)}}},{"css-font-size-keywords":123}],129:[function(e,t,n){"use strict";var r=e("unquote"),a=e("css-global-keywords"),i=e("css-system-font-keywords"),o=e("css-font-weight-keywords"),s=e("css-font-style-keywords"),l=e("css-font-stretch-keywords"),u=e("string-split-by"),c=e("./lib/util").isSize;t.exports=d;var f=d.cache={};function d(e){if("string"!=typeof e)throw new Error("Font argument must be a string.");if(f[e])return f[e];if(""===e)throw new Error("Cannot parse an empty string.");if(-1!==i.indexOf(e))return f[e]={system:e};for(var t,n={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},d=u(e,/\s+/);t=d.shift();){if(-1!==a.indexOf(t))return["style","variant","weight","stretch"].forEach(function(e){n[e]=t}),f[e]=n;if(-1===s.indexOf(t))if("normal"!==t&&"small-caps"!==t)if(-1===l.indexOf(t)){if(-1===o.indexOf(t)){if(c(t)){var h=u(t,"/");if(n.size=h[0],null!=h[1]?n.lineHeight=p(h[1]):"/"===d[0]&&(d.shift(),n.lineHeight=p(d.shift())),!d.length)throw new Error("Missing required font-family.");return n.family=u(d.join(" "),/\s*,\s*/).map(r),f[e]=n}throw new Error("Unknown or unsupported font token: "+t)}n.weight=t}else n.stretch=t;else n.variant=t;else n.style=t}throw new Error("Missing required font-size.")}function p(e){var t=parseFloat(e);return t.toString()===e?t:e}},{"./lib/util":128,"css-font-stretch-keywords":124,"css-font-style-keywords":125,"css-font-weight-keywords":126,"css-global-keywords":131,"css-system-font-keywords":132,"string-split-by":505,unquote:525}],130:[function(e,t,n){"use strict";var r=e("pick-by-alias"),a=e("./lib/util").isSize,i=h(e("css-global-keywords")),o=h(e("css-system-font-keywords")),s=h(e("css-font-weight-keywords")),l=h(e("css-font-style-keywords")),u=h(e("css-font-stretch-keywords")),c={normal:1,"small-caps":1},f={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},d={style:"normal",variant:"normal",weight:"normal",stretch:"normal",size:"1rem",lineHeight:"normal",family:"serif"};function p(e,t){if(e&&!t[e]&&!i[e])throw Error("Unknown keyword `"+e+"`");return e}function h(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=1;return t}t.exports=function(e){if((e=r(e,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"})).system)return e.system&&p(e.system,o),e.system;if(p(e.style,l),p(e.variant,c),p(e.weight,s),p(e.stretch,u),null==e.size&&(e.size=d.size),"number"==typeof e.size&&(e.size+="px"),!a)throw Error("Bad size value `"+e.size+"`");e.family||(e.family=d.family),Array.isArray(e.family)&&(e.family.length||(e.family=[d.family]),e.family=e.family.map(function(e){return f[e]?e:'"'+e+'"'}).join(", "));var t=[];return t.push(e.style),e.variant!==e.style&&t.push(e.variant),e.weight!==e.variant&&e.weight!==e.style&&t.push(e.weight),e.stretch!==e.weight&&e.stretch!==e.variant&&e.stretch!==e.style&&t.push(e.stretch),t.push(e.size+(null==e.lineHeight||"normal"===e.lineHeight||e.lineHeight+""=="1"?"":"/"+e.lineHeight)),t.push(e.family),t.filter(Boolean).join(" ")}},{"./lib/util":128,"css-font-stretch-keywords":124,"css-font-style-keywords":125,"css-font-weight-keywords":126,"css-global-keywords":131,"css-system-font-keywords":132,"pick-by-alias":448}],131:[function(e,t,n){t.exports=["inherit","initial","unset"]},{}],132:[function(e,t,n){t.exports=["caption","icon","menu","message-box","small-caption","status-bar"]},{}],133:[function(e,t,n){"use strict";t.exports=function(e,t,n,r,a,i){var o=a-1,s=a*a,l=o*o,u=(1+2*a)*l,c=a*l,f=s*(3-2*a),d=s*o;if(e.length){i||(i=new Array(e.length));for(var p=e.length-1;p>=0;--p)i[p]=u*e[p]+c*t[p]+f*n[p]+d*r[p];return i}return u*e+c*t+f*n+d*r},t.exports.derivative=function(e,t,n,r,a,i){var o=6*a*a-6*a,s=3*a*a-4*a+1,l=-6*a*a+6*a,u=3*a*a-2*a;if(e.length){i||(i=new Array(e.length));for(var c=e.length-1;c>=0;--c)i[c]=o*e[c]+s*t[c]+l*n[c]+u*r[c];return i}return o*e+s*t+l*n[c]+u*r}},{}],134:[function(e,t,n){"use strict";var r=e("./lib/thunk.js");t.exports=function(e){var t=new function(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1};t.pre=e.pre,t.body=e.body,t.post=e.post;var n=e.args.slice(0);t.argTypes=n;for(var a=0;a<n.length;++a){var i=n[a];if("array"===i||"object"==typeof i&&i.blockIndices){if(t.argTypes[a]="array",t.arrayArgs.push(a),t.arrayBlockIndices.push(i.blockIndices?i.blockIndices:0),t.shimArgs.push("array"+a),a<t.pre.args.length&&t.pre.args[a].count>0)throw new Error("cwise: pre() block may not reference array args");if(a<t.post.args.length&&t.post.args[a].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===i)t.scalarArgs.push(a),t.shimArgs.push("scalar"+a);else if("index"===i){if(t.indexArgs.push(a),a<t.pre.args.length&&t.pre.args[a].count>0)throw new Error("cwise: pre() block may not reference array index");if(a<t.body.args.length&&t.body.args[a].lvalue)throw new Error("cwise: body() block may not write to array index");if(a<t.post.args.length&&t.post.args[a].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===i){if(t.shapeArgs.push(a),a<t.pre.args.length&&t.pre.args[a].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(a<t.body.args.length&&t.body.args[a].lvalue)throw new Error("cwise: body() block may not write to array shape");if(a<t.post.args.length&&t.post.args[a].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!=typeof i||!i.offset)throw new Error("cwise: Unknown argument type "+n[a]);t.argTypes[a]="offset",t.offsetArgs.push({array:i.array,offset:i.offset}),t.offsetArgIndex.push(a)}}if(t.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(t.pre.args.length>n.length)throw new Error("cwise: Too many arguments in pre() block");if(t.body.args.length>n.length)throw new Error("cwise: Too many arguments in body() block");if(t.post.args.length>n.length)throw new Error("cwise: Too many arguments in post() block");return t.debug=!!e.printCode||!!e.debug,t.funcName=e.funcName||"cwise",t.blockSize=e.blockSize||64,r(t)}},{"./lib/thunk.js":136}],135:[function(e,t,n){"use strict";var r=e("uniq");function a(e,t,n){var r,a,i=e.length,o=t.arrayArgs.length,s=t.indexArgs.length>0,l=[],u=[],c=0,f=0;for(r=0;r<i;++r)u.push(["i",r,"=0"].join(""));for(a=0;a<o;++a)for(r=0;r<i;++r)f=c,c=e[r],0===r?u.push(["d",a,"s",r,"=t",a,"p",c].join("")):u.push(["d",a,"s",r,"=(t",a,"p",c,"-s",f,"*t",a,"p",f,")"].join(""));for(u.length>0&&l.push("var "+u.join(",")),r=i-1;r>=0;--r)c=e[r],l.push(["for(i",r,"=0;i",r,"<s",c,";++i",r,"){"].join(""));for(l.push(n),r=0;r<i;++r){for(f=c,c=e[r],a=0;a<o;++a)l.push(["p",a,"+=d",a,"s",r].join(""));s&&(r>0&&l.push(["index[",f,"]-=s",f].join("")),l.push(["++index[",c,"]"].join(""))),l.push("}")}return l.join("\n")}function i(e,t,n){for(var r=e.body,a=[],i=[],o=0;o<e.args.length;++o){var s=e.args[o];if(!(s.count<=0)){var l=new RegExp(s.name,"g"),u="",c=t.arrayArgs.indexOf(o);switch(t.argTypes[o]){case"offset":var f=t.offsetArgIndex.indexOf(o),d=t.offsetArgs[f];c=d.array,u="+q"+f;case"array":u="p"+c+u;var p="l"+o,h="a"+c;if(0===t.arrayBlockIndices[c])1===s.count?"generic"===n[c]?s.lvalue?(a.push(["var ",p,"=",h,".get(",u,")"].join("")),r=r.replace(l,p),i.push([h,".set(",u,",",p,")"].join(""))):r=r.replace(l,[h,".get(",u,")"].join("")):r=r.replace(l,[h,"[",u,"]"].join("")):"generic"===n[c]?(a.push(["var ",p,"=",h,".get(",u,")"].join("")),r=r.replace(l,p),s.lvalue&&i.push([h,".set(",u,",",p,")"].join(""))):(a.push(["var ",p,"=",h,"[",u,"]"].join("")),r=r.replace(l,p),s.lvalue&&i.push([h,"[",u,"]=",p].join("")));else{for(var m=[s.name],v=[u],g=0;g<Math.abs(t.arrayBlockIndices[c]);g++)m.push("\\s*\\[([^\\]]+)\\]"),v.push("$"+(g+1)+"*t"+c+"b"+g);if(l=new RegExp(m.join(""),"g"),u=v.join("+"),"generic"===n[c])throw new Error("cwise: Generic arrays not supported in combination with blocks!");r=r.replace(l,[h,"[",u,"]"].join(""))}break;case"scalar":r=r.replace(l,"Y"+t.scalarArgs.indexOf(o));break;case"index":r=r.replace(l,"index");break;case"shape":r=r.replace(l,"shape")}}}return[a.join("\n"),r,i.join("\n")].join("\n").trim()}t.exports=function(e,t){for(var n=t[1].length-Math.abs(e.arrayBlockIndices[0])|0,o=new Array(e.arrayArgs.length),s=new Array(e.arrayArgs.length),l=0;l<e.arrayArgs.length;++l)s[l]=t[2*l],o[l]=t[2*l+1];for(var u=[],c=[],f=[],d=[],p=[],l=0;l<e.arrayArgs.length;++l){e.arrayBlockIndices[l]<0?(f.push(0),d.push(n),u.push(n),c.push(n+e.arrayBlockIndices[l])):(f.push(e.arrayBlockIndices[l]),d.push(e.arrayBlockIndices[l]+n),u.push(0),c.push(e.arrayBlockIndices[l]));for(var h=[],m=0;m<o[l].length;m++)f[l]<=o[l][m]&&o[l][m]<d[l]&&h.push(o[l][m]-f[l]);p.push(h)}for(var v=["SS"],g=["'use strict'"],y=[],m=0;m<n;++m)y.push(["s",m,"=SS[",m,"]"].join(""));for(var l=0;l<e.arrayArgs.length;++l){v.push("a"+l),v.push("t"+l),v.push("p"+l);for(var m=0;m<n;++m)y.push(["t",l,"p",m,"=t",l,"[",f[l]+m,"]"].join(""));for(var m=0;m<Math.abs(e.arrayBlockIndices[l]);++m)y.push(["t",l,"b",m,"=t",l,"[",u[l]+m,"]"].join(""))}for(var l=0;l<e.scalarArgs.length;++l)v.push("Y"+l);if(e.shapeArgs.length>0&&y.push("shape=SS.slice(0)"),e.indexArgs.length>0){for(var b=new Array(n),l=0;l<n;++l)b[l]="0";y.push(["index=[",b.join(","),"]"].join(""))}for(var l=0;l<e.offsetArgs.length;++l){for(var x=e.offsetArgs[l],_=[],m=0;m<x.offset.length;++m)0!==x.offset[m]&&(1===x.offset[m]?_.push(["t",x.array,"p",m].join("")):_.push([x.offset[m],"*t",x.array,"p",m].join("")));0===_.length?y.push("q"+l+"=0"):y.push(["q",l,"=",_.join("+")].join(""))}var w=r([].concat(e.pre.thisVars).concat(e.body.thisVars).concat(e.post.thisVars));(y=y.concat(w)).length>0&&g.push("var "+y.join(","));for(var l=0;l<e.arrayArgs.length;++l)g.push("p"+l+"|=0");e.pre.body.length>3&&g.push(i(e.pre,e,s));var T=i(e.body,e,s),k=function(e){for(var t=0,n=e[0].length;t<n;){for(var r=1;r<e.length;++r)if(e[r][t]!==e[0][t])return t;++t}return t}(p);k<n?g.push(function(e,t,n,r){for(var i=t.length,o=n.arrayArgs.length,s=n.blockSize,l=n.indexArgs.length>0,u=[],c=0;c<o;++c)u.push(["var offset",c,"=p",c].join(""));for(var c=e;c<i;++c)u.push(["for(var j"+c+"=SS[",t[c],"]|0;j",c,">0;){"].join("")),u.push(["if(j",c,"<",s,"){"].join("")),u.push(["s",t[c],"=j",c].join("")),u.push(["j",c,"=0"].join("")),u.push(["}else{s",t[c],"=",s].join("")),u.push(["j",c,"-=",s,"}"].join("")),l&&u.push(["index[",t[c],"]=j",c].join(""));for(var c=0;c<o;++c){for(var f=["offset"+c],d=e;d<i;++d)f.push(["j",d,"*t",c,"p",t[d]].join(""));u.push(["p",c,"=(",f.join("+"),")"].join(""))}u.push(a(t,n,r));for(var c=e;c<i;++c)u.push("}");return u.join("\n")}(k,p[0],e,T)):g.push(a(p[0],e,T)),e.post.body.length>3&&g.push(i(e.post,e,s)),e.debug&&console.log("-----Generated cwise routine for ",t,":\n"+g.join("\n")+"\n----------");var C=[e.funcName||"unnamed","_cwise_loop_",o[0].join("s"),"m",k,function(e){for(var t=new Array(e.length),n=!0,r=0;r<e.length;++r){var a=e[r],i=a.match(/\d+/);i=i?i[0]:"",0===a.charAt(0)?t[r]="u"+a.charAt(1)+i:t[r]=a.charAt(0)+i,r>0&&(n=n&&t[r]===t[r-1])}return n?t[0]:t.join("")}(s)].join("");return new Function(["function ",C,"(",v.join(","),"){",g.join("\n"),"} return ",C].join(""))()}},{uniq:524}],136:[function(e,t,n){"use strict";var r=e("./compile.js");t.exports=function(e){var t=["'use strict'","var CACHED={}"],n=[],a=e.funcName+"_cwise_thunk";t.push(["return function ",a,"(",e.shimArgs.join(","),"){"].join(""));for(var i=[],o=[],s=[["array",e.arrayArgs[0],".shape.slice(",Math.max(0,e.arrayBlockIndices[0]),e.arrayBlockIndices[0]<0?","+e.arrayBlockIndices[0]+")":")"].join("")],l=[],u=[],c=0;c<e.arrayArgs.length;++c){var f=e.arrayArgs[c];n.push(["t",f,"=array",f,".dtype,","r",f,"=array",f,".order"].join("")),i.push("t"+f),i.push("r"+f),o.push("t"+f),o.push("r"+f+".join()"),s.push("array"+f+".data"),s.push("array"+f+".stride"),s.push("array"+f+".offset|0"),c>0&&(l.push("array"+e.arrayArgs[0]+".shape.length===array"+f+".shape.length+"+(Math.abs(e.arrayBlockIndices[0])-Math.abs(e.arrayBlockIndices[c]))),u.push("array"+e.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[0])+"]===array"+f+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[c])+"]"))}e.arrayArgs.length>1&&(t.push("if (!("+l.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),t.push("for(var shapeIndex=array"+e.arrayArgs[0]+".shape.length-"+Math.abs(e.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),t.push("if (!("+u.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),t.push("}"));for(var c=0;c<e.scalarArgs.length;++c)s.push("scalar"+e.scalarArgs[c]);return n.push(["type=[",o.join(","),"].join()"].join("")),n.push("proc=CACHED[type]"),t.push("var "+n.join(",")),t.push(["if(!proc){","CACHED[type]=proc=compile([",i.join(","),"])}","return proc(",s.join(","),")}"].join("")),e.debug&&console.log("-----Generated thunk:\n"+t.join("\n")+"\n----------"),new Function("compile",t.join("\n"))(r.bind(void 0,e))}},{"./compile.js":135}],137:[function(e,t,n){t.exports=e("cwise-compiler")},{"cwise-compiler":134}],138:[function(e,t,n){"use strict";var r,a=e("es5-ext/object/copy"),i=e("es5-ext/object/normalize-options"),o=e("es5-ext/object/valid-callable"),s=e("es5-ext/object/map"),l=e("es5-ext/object/valid-callable"),u=e("es5-ext/object/valid-value"),c=Function.prototype.bind,f=Object.defineProperty,d=Object.prototype.hasOwnProperty;r=function(e,t,n){var r,i=u(t)&&l(t.value);return delete(r=a(t)).writable,delete r.value,r.get=function(){return!n.overwriteDefinition&&d.call(this,e)?i:(t.value=c.call(i,n.resolveContext?n.resolveContext(this):this),f(this,e,t),this[e])},r},t.exports=function(e){var t=i(arguments[1]);return null!=t.resolveContext&&o(t.resolveContext),s(e,function(e,n){return r(n,e,t)})}},{"es5-ext/object/copy":174,"es5-ext/object/map":183,"es5-ext/object/normalize-options":184,"es5-ext/object/valid-callable":188,"es5-ext/object/valid-value":190}],139:[function(e,t,n){"use strict";var r=e("es5-ext/object/assign"),a=e("es5-ext/object/normalize-options"),i=e("es5-ext/object/is-callable"),o=e("es5-ext/string/#/contains");(t.exports=function(e,t){var n,i,s,l,u;return arguments.length<2||"string"!=typeof e?(l=t,t=e,e=null):l=arguments[2],null==e?(n=s=!0,i=!1):(n=o.call(e,"c"),i=o.call(e,"e"),s=o.call(e,"w")),u={value:t,configurable:n,enumerable:i,writable:s},l?r(a(l),u):u}).gs=function(e,t,n){var s,l,u,c;return"string"!=typeof e?(u=n,n=t,t=e,e=null):u=arguments[3],null==t?t=void 0:i(t)?null==n?n=void 0:i(n)||(u=n,n=void 0):(u=t,t=n=void 0),null==e?(s=!0,l=!1):(s=o.call(e,"c"),l=o.call(e,"e")),c={get:t,set:n,configurable:s,enumerable:l},u?r(a(u),c):c}},{"es5-ext/object/assign":171,"es5-ext/object/is-callable":177,"es5-ext/object/normalize-options":184,"es5-ext/string/#/contains":191}],140:[function(e,t,n){!function(e,r){r("object"==typeof n&&void 0!==t?n:e.d3=e.d3||{})}(this,function(e){"use strict";function t(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function n(e){return 1===e.length&&(e=function(e){return function(n,r){return t(e(n),r)}}(e)),{left:function(t,n,r,a){for(null==r&&(r=0),null==a&&(a=t.length);r<a;){var i=r+a>>>1;e(t[i],n)<0?r=i+1:a=i}return r},right:function(t,n,r,a){for(null==r&&(r=0),null==a&&(a=t.length);r<a;){var i=r+a>>>1;e(t[i],n)>0?a=i:r=i+1}return r}}}var r=n(t),a=r.right,i=r.left;function o(e,t){return[e,t]}function s(e){return null===e?NaN:+e}function l(e,t){var n,r,a=e.length,i=0,o=-1,l=0,u=0;if(null==t)for(;++o<a;)isNaN(n=s(e[o]))||(l+=(r=n-l)/++i,u+=r*(n-l));else for(;++o<a;)isNaN(n=s(t(e[o],o,e)))||(l+=(r=n-l)/++i,u+=r*(n-l));if(i>1)return u/(i-1)}function u(e,t){var n=l(e,t);return n?Math.sqrt(n):n}function c(e,t){var n,r,a,i=e.length,o=-1;if(null==t){for(;++o<i;)if(null!=(n=e[o])&&n>=n)for(r=a=n;++o<i;)null!=(n=e[o])&&(r>n&&(r=n),a<n&&(a=n))}else for(;++o<i;)if(null!=(n=t(e[o],o,e))&&n>=n)for(r=a=n;++o<i;)null!=(n=t(e[o],o,e))&&(r>n&&(r=n),a<n&&(a=n));return[r,a]}var f=Array.prototype,d=f.slice,p=f.map;function h(e){return function(){return e}}function m(e){return e}function v(e,t,n){e=+e,t=+t,n=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+n;for(var r=-1,a=0|Math.max(0,Math.ceil((t-e)/n)),i=new Array(a);++r<a;)i[r]=e+r*n;return i}var g=Math.sqrt(50),y=Math.sqrt(10),b=Math.sqrt(2);function x(e,t,n){var r=(t-e)/Math.max(0,n),a=Math.floor(Math.log(r)/Math.LN10),i=r/Math.pow(10,a);return a>=0?(i>=g?10:i>=y?5:i>=b?2:1)*Math.pow(10,a):-Math.pow(10,-a)/(i>=g?10:i>=y?5:i>=b?2:1)}function _(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),a=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),i=r/a;return i>=g?a*=10:i>=y?a*=5:i>=b&&(a*=2),t<e?-a:a}function w(e){return Math.ceil(Math.log(e.length)/Math.LN2)+1}function T(e,t,n){if(null==n&&(n=s),r=e.length){if((t=+t)<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,a=(r-1)*t,i=Math.floor(a),o=+n(e[i],i,e),l=+n(e[i+1],i+1,e);return o+(l-o)*(a-i)}}function k(e,t){var n,r,a=e.length,i=-1;if(null==t){for(;++i<a;)if(null!=(n=e[i])&&n>=n)for(r=n;++i<a;)null!=(n=e[i])&&r>n&&(r=n)}else for(;++i<a;)if(null!=(n=t(e[i],i,e))&&n>=n)for(r=n;++i<a;)null!=(n=t(e[i],i,e))&&r>n&&(r=n);return r}function C(e){if(!(a=e.length))return[];for(var t=-1,n=k(e,E),r=new Array(n);++t<n;)for(var a,i=-1,o=r[t]=new Array(a);++i<a;)o[i]=e[i][t];return r}function E(e){return e.length}e.bisect=a,e.bisectRight=a,e.bisectLeft=i,e.ascending=t,e.bisector=n,e.cross=function(e,t,n){var r,a,i,s,l=e.length,u=t.length,c=new Array(l*u);for(null==n&&(n=o),r=i=0;r<l;++r)for(s=e[r],a=0;a<u;++a,++i)c[i]=n(s,t[a]);return c},e.descending=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN},e.deviation=u,e.extent=c,e.histogram=function(){var e=m,t=c,n=w;function r(r){var i,o,s=r.length,l=new Array(s);for(i=0;i<s;++i)l[i]=e(r[i],i,r);var u=t(l),c=u[0],f=u[1],d=n(l,c,f);Array.isArray(d)||(d=_(c,f,d),d=v(Math.ceil(c/d)*d,f,d));for(var p=d.length;d[0]<=c;)d.shift(),--p;for(;d[p-1]>f;)d.pop(),--p;var h,m=new Array(p+1);for(i=0;i<=p;++i)(h=m[i]=[]).x0=i>0?d[i-1]:c,h.x1=i<p?d[i]:f;for(i=0;i<s;++i)o=l[i],c<=o&&o<=f&&m[a(d,o,0,p)].push(r[i]);return m}return r.value=function(t){return arguments.length?(e="function"==typeof t?t:h(t),r):e},r.domain=function(e){return arguments.length?(t="function"==typeof e?e:h([e[0],e[1]]),r):t},r.thresholds=function(e){return arguments.length?(n="function"==typeof e?e:Array.isArray(e)?h(d.call(e)):h(e),r):n},r},e.thresholdFreedmanDiaconis=function(e,n,r){return e=p.call(e,s).sort(t),Math.ceil((r-n)/(2*(T(e,.75)-T(e,.25))*Math.pow(e.length,-1/3)))},e.thresholdScott=function(e,t,n){return Math.ceil((n-t)/(3.5*u(e)*Math.pow(e.length,-1/3)))},e.thresholdSturges=w,e.max=function(e,t){var n,r,a=e.length,i=-1;if(null==t){for(;++i<a;)if(null!=(n=e[i])&&n>=n)for(r=n;++i<a;)null!=(n=e[i])&&n>r&&(r=n)}else for(;++i<a;)if(null!=(n=t(e[i],i,e))&&n>=n)for(r=n;++i<a;)null!=(n=t(e[i],i,e))&&n>r&&(r=n);return r},e.mean=function(e,t){var n,r=e.length,a=r,i=-1,o=0;if(null==t)for(;++i<r;)isNaN(n=s(e[i]))?--a:o+=n;else for(;++i<r;)isNaN(n=s(t(e[i],i,e)))?--a:o+=n;if(a)return o/a},e.median=function(e,n){var r,a=e.length,i=-1,o=[];if(null==n)for(;++i<a;)isNaN(r=s(e[i]))||o.push(r);else for(;++i<a;)isNaN(r=s(n(e[i],i,e)))||o.push(r);return T(o.sort(t),.5)},e.merge=function(e){for(var t,n,r,a=e.length,i=-1,o=0;++i<a;)o+=e[i].length;for(n=new Array(o);--a>=0;)for(r=e[a],t=r.length;--t>=0;)n[--o]=r[t];return n},e.min=k,e.pairs=function(e,t){null==t&&(t=o);for(var n=0,r=e.length-1,a=e[0],i=new Array(r<0?0:r);n<r;)i[n]=t(a,a=e[++n]);return i},e.permute=function(e,t){for(var n=t.length,r=new Array(n);n--;)r[n]=e[t[n]];return r},e.quantile=T,e.range=v,e.scan=function(e,n){if(r=e.length){var r,a,i=0,o=0,s=e[o];for(null==n&&(n=t);++i<r;)(n(a=e[i],s)<0||0!==n(s,s))&&(s=a,o=i);return 0===n(s,s)?o:void 0}},e.shuffle=function(e,t,n){for(var r,a,i=(null==n?e.length:n)-(t=null==t?0:+t);i;)a=Math.random()*i--|0,r=e[i+t],e[i+t]=e[a+t],e[a+t]=r;return e},e.sum=function(e,t){var n,r=e.length,a=-1,i=0;if(null==t)for(;++a<r;)(n=+e[a])&&(i+=n);else for(;++a<r;)(n=+t(e[a],a,e))&&(i+=n);return i},e.ticks=function(e,t,n){var r,a,i,o,s=-1;if(n=+n,(e=+e)==(t=+t)&&n>0)return[e];if((r=t<e)&&(a=e,e=t,t=a),0===(o=x(e,t,n))||!isFinite(o))return[];if(o>0)for(e=Math.ceil(e/o),t=Math.floor(t/o),i=new Array(a=Math.ceil(t-e+1));++s<a;)i[s]=(e+s)*o;else for(e=Math.floor(e*o),t=Math.ceil(t*o),i=new Array(a=Math.ceil(e-t+1));++s<a;)i[s]=(e-s)/o;return r&&i.reverse(),i},e.tickIncrement=x,e.tickStep=_,e.transpose=C,e.variance=l,e.zip=function(){return C(arguments)},Object.defineProperty(e,"__esModule",{value:!0})})},{}],141:[function(e,t,n){!function(e,r){r("object"==typeof n&&void 0!==t?n:e.d3=e.d3||{})}(this,function(e){"use strict";function t(){}function n(e,n){var r=new t;if(e instanceof t)e.each(function(e,t){r.set(t,e)});else if(Array.isArray(e)){var a,i=-1,o=e.length;if(null==n)for(;++i<o;)r.set(i,e[i]);else for(;++i<o;)r.set(n(a=e[i],i,e),a)}else if(e)for(var s in e)r.set(s,e[s]);return r}function r(){return{}}function a(e,t,n){e[t]=n}function i(){return n()}function o(e,t,n){e.set(t,n)}function s(){}t.prototype=n.prototype={constructor:t,has:function(e){return"$"+e in this},get:function(e){return this["$"+e]},set:function(e,t){return this["$"+e]=t,this},remove:function(e){var t="$"+e;return t in this&&delete this[t]},clear:function(){for(var e in this)"$"===e[0]&&delete this[e]},keys:function(){var e=[];for(var t in this)"$"===t[0]&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)"$"===t[0]&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)"$"===t[0]&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)"$"===t[0]&&++e;return e},empty:function(){for(var e in this)if("$"===e[0])return!1;return!0},each:function(e){for(var t in this)"$"===t[0]&&e(this[t],t.slice(1),this)}};var l=n.prototype;function u(e,t){var n=new s;if(e instanceof s)e.each(function(e){n.add(e)});else if(e){var r=-1,a=e.length;if(null==t)for(;++r<a;)n.add(e[r]);else for(;++r<a;)n.add(t(e[r],r,e))}return n}s.prototype=u.prototype={constructor:s,has:l.has,add:function(e){return this["$"+(e+="")]=e,this},remove:l.remove,clear:l.clear,values:l.keys,size:l.size,empty:l.empty,each:l.each},e.nest=function(){var e,t,s,l=[],u=[];function c(r,a,i,o){if(a>=l.length)return null!=e&&r.sort(e),null!=t?t(r):r;for(var s,u,f,d=-1,p=r.length,h=l[a++],m=n(),v=i();++d<p;)(f=m.get(s=h(u=r[d])+""))?f.push(u):m.set(s,[u]);return m.each(function(e,t){o(v,t,c(e,a,i,o))}),v}return s={object:function(e){return c(e,0,r,a)},map:function(e){return c(e,0,i,o)},entries:function(e){return function e(n,r){if(++r>l.length)return n;var a,i=u[r-1];return null!=t&&r>=l.length?a=n.entries():(a=[],n.each(function(t,n){a.push({key:n,values:e(t,r)})})),null!=i?a.sort(function(e,t){return i(e.key,t.key)}):a}(c(e,0,i,o),0)},key:function(e){return l.push(e),s},sortKeys:function(e){return u[l.length-1]=e,s},sortValues:function(t){return e=t,s},rollup:function(e){return t=e,s}}},e.set=u,e.map=n,e.keys=function(e){var t=[];for(var n in e)t.push(n);return t},e.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},e.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},Object.defineProperty(e,"__esModule",{value:!0})})},{}],142:[function(e,t,n){!function(e,r){r("object"==typeof n&&void 0!==t?n:e.d3=e.d3||{})}(this,function(e){"use strict";function t(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function n(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function r(){}var a=1/.7,i="\\s*([+-]?\\d+)\\s*",o="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",s="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",l=/^#([0-9a-f]{3})$/,u=/^#([0-9a-f]{6})$/,c=new RegExp("^rgb\\("+[i,i,i]+"\\)$"),f=new RegExp("^rgb\\("+[s,s,s]+"\\)$"),d=new RegExp("^rgba\\("+[i,i,i,o]+"\\)$"),p=new RegExp("^rgba\\("+[s,s,s,o]+"\\)$"),h=new RegExp("^hsl\\("+[o,s,s]+"\\)$"),m=new RegExp("^hsla\\("+[o,s,s,o]+"\\)$"),v={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function g(e){var t;return e=(e+"").trim().toLowerCase(),(t=l.exec(e))?new w((t=parseInt(t[1],16))>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):(t=u.exec(e))?y(parseInt(t[1],16)):(t=c.exec(e))?new w(t[1],t[2],t[3],1):(t=f.exec(e))?new w(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=d.exec(e))?b(t[1],t[2],t[3],t[4]):(t=p.exec(e))?b(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=h.exec(e))?k(t[1],t[2]/100,t[3]/100,1):(t=m.exec(e))?k(t[1],t[2]/100,t[3]/100,t[4]):v.hasOwnProperty(e)?y(v[e]):"transparent"===e?new w(NaN,NaN,NaN,0):null}function y(e){return new w(e>>16&255,e>>8&255,255&e,1)}function b(e,t,n,r){return r<=0&&(e=t=n=NaN),new w(e,t,n,r)}function x(e){return e instanceof r||(e=g(e)),e?new w((e=e.rgb()).r,e.g,e.b,e.opacity):new w}function _(e,t,n,r){return 1===arguments.length?x(e):new w(e,t,n,null==r?1:r)}function w(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function T(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function k(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new E(e,t,n,r)}function C(e,t,n,a){return 1===arguments.length?function(e){if(e instanceof E)return new E(e.h,e.s,e.l,e.opacity);if(e instanceof r||(e=g(e)),!e)return new E;if(e instanceof E)return e;var t=(e=e.rgb()).r/255,n=e.g/255,a=e.b/255,i=Math.min(t,n,a),o=Math.max(t,n,a),s=NaN,l=o-i,u=(o+i)/2;return l?(s=t===o?(n-a)/l+6*(n<a):n===o?(a-t)/l+2:(t-n)/l+4,l/=u<.5?o+i:2-o-i,s*=60):l=u>0&&u<1?0:s,new E(s,l,u,e.opacity)}(e):new E(e,t,n,null==a?1:a)}function E(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function M(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}t(r,g,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}}),t(w,_,n(r,{brighter:function(e){return e=null==e?a:Math.pow(a,e),new w(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new w(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},hex:function(){return"#"+T(this.r)+T(this.g)+T(this.b)},toString:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}})),t(E,C,n(r,{brighter:function(e){return e=null==e?a:Math.pow(a,e),new E(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new E(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new w(M(e>=240?e-240:e+120,a,r),M(e,a,r),M(e<120?e+240:e-120,a,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var A=Math.PI/180,S=180/Math.PI,O=.96422,P=1,R=.82521,L=4/29,D=6/29,I=3*D*D,z=D*D*D;function j(e){if(e instanceof F)return new F(e.l,e.a,e.b,e.opacity);if(e instanceof q){if(isNaN(e.h))return new F(e.l,0,0,e.opacity);var t=e.h*A;return new F(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}e instanceof w||(e=x(e));var n,r,a=G(e.r),i=G(e.g),o=G(e.b),s=B((.2225045*a+.7168786*i+.0606169*o)/P);return a===i&&i===o?n=r=s:(n=B((.4360747*a+.3850649*i+.1430804*o)/O),r=B((.0139322*a+.0971045*i+.7141733*o)/R)),new F(116*s-16,500*(n-s),200*(s-r),e.opacity)}function N(e,t,n,r){return 1===arguments.length?j(e):new F(e,t,n,null==r?1:r)}function F(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}function B(e){return e>z?Math.pow(e,1/3):e/I+L}function V(e){return e>D?e*e*e:I*(e-L)}function U(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function G(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function H(e){if(e instanceof q)return new q(e.h,e.c,e.l,e.opacity);if(e instanceof F||(e=j(e)),0===e.a&&0===e.b)return new q(NaN,0,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*S;return new q(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function W(e,t,n,r){return 1===arguments.length?H(e):new q(e,t,n,null==r?1:r)}function q(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}t(F,N,n(r,{brighter:function(e){return new F(this.l+18*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new F(this.l-18*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=O*V(t),e=P*V(e),n=R*V(n),new w(U(3.1338561*t-1.6168667*e-.4906146*n),U(-.9787684*t+1.9161415*e+.033454*n),U(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),t(q,W,n(r,{brighter:function(e){return new q(this.h,this.c,this.l+18*(null==e?1:e),this.opacity)},darker:function(e){return new q(this.h,this.c,this.l-18*(null==e?1:e),this.opacity)},rgb:function(){return j(this).rgb()}}));var Y=-.14861,X=1.78277,Z=-.29227,$=-.90649,K=1.97294,J=K*$,Q=K*X,ee=X*Z-$*Y;function te(e,t,n,r){return 1===arguments.length?function(e){if(e instanceof ne)return new ne(e.h,e.s,e.l,e.opacity);e instanceof w||(e=x(e));var t=e.r/255,n=e.g/255,r=e.b/255,a=(ee*r+J*t-Q*n)/(ee+J-Q),i=r-a,o=(K*(n-a)-Z*i)/$,s=Math.sqrt(o*o+i*i)/(K*a*(1-a)),l=s?Math.atan2(o,i)*S-120:NaN;return new ne(l<0?l+360:l,s,a,e.opacity)}(e):new ne(e,t,n,null==r?1:r)}function ne(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}t(ne,te,n(r,{brighter:function(e){return e=null==e?a:Math.pow(a,e),new ne(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new ne(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*A,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),a=Math.sin(e);return new w(255*(t+n*(Y*r+X*a)),255*(t+n*(Z*r+$*a)),255*(t+n*(K*r)),this.opacity)}})),e.color=g,e.rgb=_,e.hsl=C,e.lab=N,e.hcl=W,e.lch=function(e,t,n,r){return 1===arguments.length?H(e):new q(n,t,e,null==r?1:r)},e.gray=function(e,t){return new F(e,0,0,null==t?1:t)},e.cubehelix=te,Object.defineProperty(e,"__esModule",{value:!0})})},{}],143:[function(e,t,n){!function(e,r){r("object"==typeof n&&void 0!==t?n:e.d3=e.d3||{})}(this,function(e){"use strict";var t={value:function(){}};function n(){for(var e,t=0,n=arguments.length,a={};t<n;++t){if(!(e=arguments[t]+"")||e in a)throw new Error("illegal type: "+e);a[e]=[]}return new r(a)}function r(e){this._=e}function a(e,t){for(var n,r=0,a=e.length;r<a;++r)if((n=e[r]).name===t)return n.value}function i(e,n,r){for(var a=0,i=e.length;a<i;++a)if(e[a].name===n){e[a]=t,e=e.slice(0,a).concat(e.slice(a+1));break}return null!=r&&e.push({name:n,value:r}),e}r.prototype=n.prototype={constructor:r,on:function(e,t){var n,r=this._,o=function(e,t){return e.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}})}(e+"",r),s=-1,l=o.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++s<l;)if(n=(e=o[s]).type)r[n]=i(r[n],e.name,t);else if(null==t)for(n in r)r[n]=i(r[n],e.name,null);return this}for(;++s<l;)if((n=(e=o[s]).type)&&(n=a(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new r(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,a=new Array(n),i=0;i<n;++i)a[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(r=this._[e],i=0,n=r.length;i<n;++i)r[i].value.apply(t,a)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],a=0,i=r.length;a<i;++a)r[a].value.apply(t,n)}},e.dispatch=n,Object.defineProperty(e,"__esModule",{value:!0})})},{}],144:[function(e,t,n){!function(r,a){"object"==typeof n&&void 0!==t?a(n,e("d3-quadtree"),e("d3-collection"),e("d3-dispatch"),e("d3-timer")):a(r.d3=r.d3||{},r.d3,r.d3,r.d3,r.d3)}(this,function(e,t,n,r,a){"use strict";var i=function(e){return function(){return e}},o=function(){return 1e-6*(Math.random()-.5)};function s(e){return e.x+e.vx}function l(e){return e.y+e.vy}function u(e){return e.index}function c(e,t){var n=e.get(t);if(!n)throw new Error("missing: "+t);return n}function f(e){return e.x}function d(e){return e.y}var p=10,h=Math.PI*(3-Math.sqrt(5));e.forceCenter=function(e,t){var n;function r(){var r,a,i=n.length,o=0,s=0;for(r=0;r<i;++r)a=n[r],o+=a.x,s+=a.y;for(o=o/i-e,s=s/i-t,r=0;r<i;++r)(a=n[r]).x-=o,a.y-=s}return null==e&&(e=0),null==t&&(t=0),r.initialize=function(e){n=e},r.x=function(t){return arguments.length?(e=+t,r):e},r.y=function(e){return arguments.length?(t=+e,r):t},r},e.forceCollide=function(e){var n,r,a=1,u=1;function c(){for(var e,i,c,d,p,h,m,v=n.length,g=0;g<u;++g)for(i=t.quadtree(n,s,l).visitAfter(f),e=0;e<v;++e)c=n[e],h=r[c.index],m=h*h,d=c.x+c.vx,p=c.y+c.vy,i.visit(y);function y(e,t,n,r,i){var s=e.data,l=e.r,u=h+l;if(!s)return t>d+u||r<d-u||n>p+u||i<p-u;if(s.index>c.index){var f=d-s.x-s.vx,v=p-s.y-s.vy,g=f*f+v*v;g<u*u&&(0===f&&(f=o(),g+=f*f),0===v&&(v=o(),g+=v*v),g=(u-(g=Math.sqrt(g)))/g*a,c.vx+=(f*=g)*(u=(l*=l)/(m+l)),c.vy+=(v*=g)*u,s.vx-=f*(u=1-u),s.vy-=v*u)}}}function f(e){if(e.data)return e.r=r[e.data.index];for(var t=e.r=0;t<4;++t)e[t]&&e[t].r>e.r&&(e.r=e[t].r)}function d(){if(n){var t,a,i=n.length;for(r=new Array(i),t=0;t<i;++t)a=n[t],r[a.index]=+e(a,t,n)}}return"function"!=typeof e&&(e=i(null==e?1:+e)),c.initialize=function(e){n=e,d()},c.iterations=function(e){return arguments.length?(u=+e,c):u},c.strength=function(e){return arguments.length?(a=+e,c):a},c.radius=function(t){return arguments.length?(e="function"==typeof t?t:i(+t),d(),c):e},c},e.forceLink=function(e){var t,r,a,s,l,f=u,d=function(e){return 1/Math.min(s[e.source.index],s[e.target.index])},p=i(30),h=1;function m(n){for(var a=0,i=e.length;a<h;++a)for(var s,u,c,f,d,p,m,v=0;v<i;++v)s=e[v],u=s.source,c=s.target,f=c.x+c.vx-u.x-u.vx||o(),d=c.y+c.vy-u.y-u.vy||o(),p=((p=Math.sqrt(f*f+d*d))-r[v])/p*n*t[v],f*=p,d*=p,c.vx-=f*(m=l[v]),c.vy-=d*m,u.vx+=f*(m=1-m),u.vy+=d*m}function v(){if(a){var i,o,u=a.length,d=e.length,p=n.map(a,f);for(i=0,s=new Array(u);i<d;++i)(o=e[i]).index=i,"object"!=typeof o.source&&(o.source=c(p,o.source)),"object"!=typeof o.target&&(o.target=c(p,o.target)),s[o.source.index]=(s[o.source.index]||0)+1,s[o.target.index]=(s[o.target.index]||0)+1;for(i=0,l=new Array(d);i<d;++i)o=e[i],l[i]=s[o.source.index]/(s[o.source.index]+s[o.target.index]);t=new Array(d),g(),r=new Array(d),y()}}function g(){if(a)for(var n=0,r=e.length;n<r;++n)t[n]=+d(e[n],n,e)}function y(){if(a)for(var t=0,n=e.length;t<n;++t)r[t]=+p(e[t],t,e)}return null==e&&(e=[]),m.initialize=function(e){a=e,v()},m.links=function(t){return arguments.length?(e=t,v(),m):e},m.id=function(e){return arguments.length?(f=e,m):f},m.iterations=function(e){return arguments.length?(h=+e,m):h},m.strength=function(e){return arguments.length?(d="function"==typeof e?e:i(+e),g(),m):d},m.distance=function(e){return arguments.length?(p="function"==typeof e?e:i(+e),y(),m):p},m},e.forceManyBody=function(){var e,n,r,a,s=i(-30),l=1,u=1/0,c=.81;function p(a){var i,o=e.length,s=t.quadtree(e,f,d).visitAfter(m);for(r=a,i=0;i<o;++i)n=e[i],s.visit(v)}function h(){if(e){var t,n,r=e.length;for(a=new Array(r),t=0;t<r;++t)n=e[t],a[n.index]=+s(n,t,e)}}function m(e){var t,n,r,i,o,s=0,l=0;if(e.length){for(r=i=o=0;o<4;++o)(t=e[o])&&(n=Math.abs(t.value))&&(s+=t.value,l+=n,r+=n*t.x,i+=n*t.y);e.x=r/l,e.y=i/l}else{(t=e).x=t.data.x,t.y=t.data.y;do{s+=a[t.data.index]}while(t=t.next)}e.value=s}function v(e,t,i,s){if(!e.value)return!0;var f=e.x-n.x,d=e.y-n.y,p=s-t,h=f*f+d*d;if(p*p/c<h)return h<u&&(0===f&&(f=o(),h+=f*f),0===d&&(d=o(),h+=d*d),h<l&&(h=Math.sqrt(l*h)),n.vx+=f*e.value*r/h,n.vy+=d*e.value*r/h),!0;if(!(e.length||h>=u)){(e.data!==n||e.next)&&(0===f&&(f=o(),h+=f*f),0===d&&(d=o(),h+=d*d),h<l&&(h=Math.sqrt(l*h)));do{e.data!==n&&(p=a[e.data.index]*r/h,n.vx+=f*p,n.vy+=d*p)}while(e=e.next)}}return p.initialize=function(t){e=t,h()},p.strength=function(e){return arguments.length?(s="function"==typeof e?e:i(+e),h(),p):s},p.distanceMin=function(e){return arguments.length?(l=e*e,p):Math.sqrt(l)},p.distanceMax=function(e){return arguments.length?(u=e*e,p):Math.sqrt(u)},p.theta=function(e){return arguments.length?(c=e*e,p):Math.sqrt(c)},p},e.forceRadial=function(e,t,n){var r,a,o,s=i(.1);function l(e){for(var i=0,s=r.length;i<s;++i){var l=r[i],u=l.x-t||1e-6,c=l.y-n||1e-6,f=Math.sqrt(u*u+c*c),d=(o[i]-f)*a[i]*e/f;l.vx+=u*d,l.vy+=c*d}}function u(){if(r){var t,n=r.length;for(a=new Array(n),o=new Array(n),t=0;t<n;++t)o[t]=+e(r[t],t,r),a[t]=isNaN(o[t])?0:+s(r[t],t,r)}}return"function"!=typeof e&&(e=i(+e)),null==t&&(t=0),null==n&&(n=0),l.initialize=function(e){r=e,u()},l.strength=function(e){return arguments.length?(s="function"==typeof e?e:i(+e),u(),l):s},l.radius=function(t){return arguments.length?(e="function"==typeof t?t:i(+t),u(),l):e},l.x=function(e){return arguments.length?(t=+e,l):t},l.y=function(e){return arguments.length?(n=+e,l):n},l},e.forceSimulation=function(e){var t,i=1,o=.001,s=1-Math.pow(o,1/300),l=0,u=.6,c=n.map(),f=a.timer(m),d=r.dispatch("tick","end");function m(){v(),d.call("tick",t),i<o&&(f.stop(),d.call("end",t))}function v(){var t,n,r=e.length;for(i+=(l-i)*s,c.each(function(e){e(i)}),t=0;t<r;++t)null==(n=e[t]).fx?n.x+=n.vx*=u:(n.x=n.fx,n.vx=0),null==n.fy?n.y+=n.vy*=u:(n.y=n.fy,n.vy=0)}function g(){for(var t,n=0,r=e.length;n<r;++n){if((t=e[n]).index=n,isNaN(t.x)||isNaN(t.y)){var a=p*Math.sqrt(n),i=n*h;t.x=a*Math.cos(i),t.y=a*Math.sin(i)}(isNaN(t.vx)||isNaN(t.vy))&&(t.vx=t.vy=0)}}function y(t){return t.initialize&&t.initialize(e),t}return null==e&&(e=[]),g(),t={tick:v,restart:function(){return f.restart(m),t},stop:function(){return f.stop(),t},nodes:function(n){return arguments.length?(e=n,g(),c.each(y),t):e},alpha:function(e){return arguments.length?(i=+e,t):i},alphaMin:function(e){return arguments.length?(o=+e,t):o},alphaDecay:function(e){return arguments.length?(s=+e,t):+s},alphaTarget:function(e){return arguments.length?(l=+e,t):l},velocityDecay:function(e){return arguments.length?(u=1-e,t):1-u},force:function(e,n){return arguments.length>1?(null==n?c.remove(e):c.set(e,y(n)),t):c.get(e)},find:function(t,n,r){var a,i,o,s,l,u=0,c=e.length;for(null==r?r=1/0:r*=r,u=0;u<c;++u)(o=(a=t-(s=e[u]).x)*a+(i=n-s.y)*i)<r&&(l=s,r=o);return l},on:function(e,n){return arguments.length>1?(d.on(e,n),t):d.on(e)}}},e.forceX=function(e){var t,n,r,a=i(.1);function o(e){for(var a,i=0,o=t.length;i<o;++i)(a=t[i]).vx+=(r[i]-a.x)*n[i]*e}function s(){if(t){var i,o=t.length;for(n=new Array(o),r=new Array(o),i=0;i<o;++i)n[i]=isNaN(r[i]=+e(t[i],i,t))?0:+a(t[i],i,t)}}return"function"!=typeof e&&(e=i(null==e?0:+e)),o.initialize=function(e){t=e,s()},o.strength=function(e){return arguments.length?(a="function"==typeof e?e:i(+e),s(),o):a},o.x=function(t){return arguments.length?(e="function"==typeof t?t:i(+t),s(),o):e},o},e.forceY=function(e){var t,n,r,a=i(.1);function o(e){for(var a,i=0,o=t.length;i<o;++i)(a=t[i]).vy+=(r[i]-a.y)*n[i]*e}function s(){if(t){var i,o=t.length;for(n=new Array(o),r=new Array(o),i=0;i<o;++i)n[i]=isNaN(r[i]=+e(t[i],i,t))?0:+a(t[i],i,t)}}return"function"!=typeof e&&(e=i(null==e?0:+e)),o.initialize=function(e){t=e,s()},o.strength=function(e){return arguments.length?(a="function"==typeof e?e:i(+e),s(),o):a},o.y=function(t){return arguments.length?(e="function"==typeof t?t:i(+t),s(),o):e},o},Object.defineProperty(e,"__esModule",{value:!0})})},{"d3-collection":141,"d3-dispatch":143,"d3-quadtree":146,"d3-timer":147}],145:[function(e,t,n){!function(r,a){"object"==typeof n&&void 0!==t?a(n,e("d3-color")):a(r.d3=r.d3||{},r.d3)}(this,function(e,t){"use strict";function n(e,t,n,r,a){var i=e*e,o=i*e;return((1-3*e+3*i-o)*t+(4-6*i+3*o)*n+(1+3*e+3*i-3*o)*r+o*a)/6}function r(e){var t=e.length-1;return function(r){var a=r<=0?r=0:r>=1?(r=1,t-1):Math.floor(r*t),i=e[a],o=e[a+1],s=a>0?e[a-1]:2*i-o,l=a<t-1?e[a+2]:2*o-i;return n((r-a/t)*t,s,i,o,l)}}function a(e){var t=e.length;return function(r){var a=Math.floor(((r%=1)<0?++r:r)*t),i=e[(a+t-1)%t],o=e[a%t],s=e[(a+1)%t],l=e[(a+2)%t];return n((r-a/t)*t,i,o,s,l)}}function i(e){return function(){return e}}function o(e,t){return function(n){return e+n*t}}function s(e,t){var n=t-e;return n?o(e,n>180||n<-180?n-360*Math.round(n/360):n):i(isNaN(e)?t:e)}function l(e){return 1==(e=+e)?u:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):i(isNaN(t)?n:t)}}function u(e,t){var n=t-e;return n?o(e,n):i(isNaN(e)?t:e)}var c=function e(n){var r=l(n);function a(e,n){var a=r((e=t.rgb(e)).r,(n=t.rgb(n)).r),i=r(e.g,n.g),o=r(e.b,n.b),s=u(e.opacity,n.opacity);return function(t){return e.r=a(t),e.g=i(t),e.b=o(t),e.opacity=s(t),e+""}}return a.gamma=e,a}(1);function f(e){return function(n){var r,a,i=n.length,o=new Array(i),s=new Array(i),l=new Array(i);for(r=0;r<i;++r)a=t.rgb(n[r]),o[r]=a.r||0,s[r]=a.g||0,l[r]=a.b||0;return o=e(o),s=e(s),l=e(l),a.opacity=1,function(e){return a.r=o(e),a.g=s(e),a.b=l(e),a+""}}}var d=f(r),p=f(a);function h(e,t){var n,r=t?t.length:0,a=e?Math.min(r,e.length):0,i=new Array(a),o=new Array(r);for(n=0;n<a;++n)i[n]=_(e[n],t[n]);for(;n<r;++n)o[n]=t[n];return function(e){for(n=0;n<a;++n)o[n]=i[n](e);return o}}function m(e,t){var n=new Date;return t-=e=+e,function(r){return n.setTime(e+t*r),n}}function v(e,t){return t-=e=+e,function(n){return e+t*n}}function g(e,t){var n,r={},a={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?r[n]=_(e[n],t[n]):a[n]=t[n];return function(e){for(n in r)a[n]=r[n](e);return a}}var y=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,b=new RegExp(y.source,"g");function x(e,t){var n,r,a,i=y.lastIndex=b.lastIndex=0,o=-1,s=[],l=[];for(e+="",t+="";(n=y.exec(e))&&(r=b.exec(t));)(a=r.index)>i&&(a=t.slice(i,a),s[o]?s[o]+=a:s[++o]=a),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,l.push({i:o,x:v(n,r)})),i=b.lastIndex;return i<t.length&&(a=t.slice(i),s[o]?s[o]+=a:s[++o]=a),s.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)s[(n=l[r]).i]=n.x(e);return s.join("")})}function _(e,n){var r,a=typeof n;return null==n||"boolean"===a?i(n):("number"===a?v:"string"===a?(r=t.color(n))?(n=r,c):x:n instanceof t.color?c:n instanceof Date?m:Array.isArray(n)?h:"function"!=typeof n.valueOf&&"function"!=typeof n.toString||isNaN(n)?g:v)(e,n)}var w,T,k,C,E=180/Math.PI,M={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function A(e,t,n,r,a,i){var o,s,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),e*r<t*n&&(e=-e,t=-t,l=-l,o=-o),{translateX:a,translateY:i,rotate:Math.atan2(t,e)*E,skewX:Math.atan(l)*E,scaleX:o,scaleY:s}}function S(e,t,n,r){function a(e){return e.length?e.pop()+" ":""}return function(i,o){var s=[],l=[];return i=e(i),o=e(o),function(e,r,a,i,o,s){if(e!==a||r!==i){var l=o.push("translate(",null,t,null,n);s.push({i:l-4,x:v(e,a)},{i:l-2,x:v(r,i)})}else(a||i)&&o.push("translate("+a+t+i+n)}(i.translateX,i.translateY,o.translateX,o.translateY,s,l),function(e,t,n,i){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),i.push({i:n.push(a(n)+"rotate(",null,r)-2,x:v(e,t)})):t&&n.push(a(n)+"rotate("+t+r)}(i.rotate,o.rotate,s,l),function(e,t,n,i){e!==t?i.push({i:n.push(a(n)+"skewX(",null,r)-2,x:v(e,t)}):t&&n.push(a(n)+"skewX("+t+r)}(i.skewX,o.skewX,s,l),function(e,t,n,r,i,o){if(e!==n||t!==r){var s=i.push(a(i)+"scale(",null,",",null,")");o.push({i:s-4,x:v(e,n)},{i:s-2,x:v(t,r)})}else 1===n&&1===r||i.push(a(i)+"scale("+n+","+r+")")}(i.scaleX,i.scaleY,o.scaleX,o.scaleY,s,l),i=o=null,function(e){for(var t,n=-1,r=l.length;++n<r;)s[(t=l[n]).i]=t.x(e);return s.join("")}}}var O=S(function(e){return"none"===e?M:(w||(w=document.createElement("DIV"),T=document.documentElement,k=document.defaultView),w.style.transform=e,e=k.getComputedStyle(T.appendChild(w),null).getPropertyValue("transform"),T.removeChild(w),A(+(e=e.slice(7,-1).split(","))[0],+e[1],+e[2],+e[3],+e[4],+e[5]))},"px, ","px)","deg)"),P=S(function(e){return null==e?M:(C||(C=document.createElementNS("http://www.w3.org/2000/svg","g")),C.setAttribute("transform",e),(e=C.transform.baseVal.consolidate())?A((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):M)},", ",")",")"),R=Math.SQRT2,L=2,D=4,I=1e-12;function z(e){return((e=Math.exp(e))+1/e)/2}function j(e){return function(n,r){var a=e((n=t.hsl(n)).h,(r=t.hsl(r)).h),i=u(n.s,r.s),o=u(n.l,r.l),s=u(n.opacity,r.opacity);return function(e){return n.h=a(e),n.s=i(e),n.l=o(e),n.opacity=s(e),n+""}}}var N=j(s),F=j(u);function B(e){return function(n,r){var a=e((n=t.hcl(n)).h,(r=t.hcl(r)).h),i=u(n.c,r.c),o=u(n.l,r.l),s=u(n.opacity,r.opacity);return function(e){return n.h=a(e),n.c=i(e),n.l=o(e),n.opacity=s(e),n+""}}}var V=B(s),U=B(u);function G(e){return function n(r){function a(n,a){var i=e((n=t.cubehelix(n)).h,(a=t.cubehelix(a)).h),o=u(n.s,a.s),s=u(n.l,a.l),l=u(n.opacity,a.opacity);return function(e){return n.h=i(e),n.s=o(e),n.l=s(Math.pow(e,r)),n.opacity=l(e),n+""}}return r=+r,a.gamma=n,a}(1)}var H=G(s),W=G(u);e.interpolate=_,e.interpolateArray=h,e.interpolateBasis=r,e.interpolateBasisClosed=a,e.interpolateDate=m,e.interpolateDiscrete=function(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}},e.interpolateHue=function(e,t){var n=s(+e,+t);return function(e){var t=n(e);return t-360*Math.floor(t/360)}},e.interpolateNumber=v,e.interpolateObject=g,e.interpolateRound=function(e,t){return t-=e=+e,function(n){return Math.round(e+t*n)}},e.interpolateString=x,e.interpolateTransformCss=O,e.interpolateTransformSvg=P,e.interpolateZoom=function(e,t){var n,r,a=e[0],i=e[1],o=e[2],s=t[0],l=t[1],u=t[2],c=s-a,f=l-i,d=c*c+f*f;if(d<I)r=Math.log(u/o)/R,n=function(e){return[a+e*c,i+e*f,o*Math.exp(R*e*r)]};else{var p=Math.sqrt(d),h=(u*u-o*o+D*d)/(2*o*L*p),m=(u*u-o*o-D*d)/(2*u*L*p),v=Math.log(Math.sqrt(h*h+1)-h),g=Math.log(Math.sqrt(m*m+1)-m);r=(g-v)/R,n=function(e){var t=e*r,n=z(v),s=o/(L*p)*(n*function(e){return((e=Math.exp(2*e))-1)/(e+1)}(R*t+v)-function(e){return((e=Math.exp(e))-1/e)/2}(v));return[a+s*c,i+s*f,o*n/z(R*t+v)]}}return n.duration=1e3*r,n},e.interpolateRgb=c,e.interpolateRgbBasis=d,e.interpolateRgbBasisClosed=p,e.interpolateHsl=N,e.interpolateHslLong=F,e.interpolateLab=function(e,n){var r=u((e=t.lab(e)).l,(n=t.lab(n)).l),a=u(e.a,n.a),i=u(e.b,n.b),o=u(e.opacity,n.opacity);return function(t){return e.l=r(t),e.a=a(t),e.b=i(t),e.opacity=o(t),e+""}},e.interpolateHcl=V,e.interpolateHclLong=U,e.interpolateCubehelix=H,e.interpolateCubehelixLong=W,e.piecewise=function(e,t){for(var n=0,r=t.length-1,a=t[0],i=new Array(r<0?0:r);n<r;)i[n]=e(a,a=t[++n]);return function(e){var t=Math.max(0,Math.min(r-1,Math.floor(e*=r)));return i[t](e-t)}},e.quantize=function(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n},Object.defineProperty(e,"__esModule",{value:!0})})},{"d3-color":142}],146:[function(e,t,n){!function(e,r){r("object"==typeof n&&void 0!==t?n:e.d3=e.d3||{})}(this,function(e){"use strict";function t(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var a,i,o,s,l,u,c,f,d,p=e._root,h={data:r},m=e._x0,v=e._y0,g=e._x1,y=e._y1;if(!p)return e._root=h,e;for(;p.length;)if((u=t>=(i=(m+g)/2))?m=i:g=i,(c=n>=(o=(v+y)/2))?v=o:y=o,a=p,!(p=p[f=c<<1|u]))return a[f]=h,e;if(s=+e._x.call(null,p.data),l=+e._y.call(null,p.data),t===s&&n===l)return h.next=p,a?a[f]=h:e._root=h,e;do{a=a?a[f]=new Array(4):e._root=new Array(4),(u=t>=(i=(m+g)/2))?m=i:g=i,(c=n>=(o=(v+y)/2))?v=o:y=o}while((f=c<<1|u)==(d=(l>=o)<<1|s>=i));return a[d]=p,a[f]=h,e}var n=function(e,t,n,r,a){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=a};function r(e){return e[0]}function a(e){return e[1]}function i(e,t,n){var i=new o(null==t?r:t,null==n?a:n,NaN,NaN,NaN,NaN);return null==e?i:i.addAll(e)}function o(e,t,n,r,a,i){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=a,this._y1=i,this._root=void 0}function s(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var l=i.prototype=o.prototype;l.copy=function(){var e,t,n=new o(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=s(r),n;for(e=[{source:r,target:n._root=new Array(4)}];r=e.pop();)for(var a=0;a<4;++a)(t=r.source[a])&&(t.length?e.push({source:t,target:r.target[a]=new Array(4)}):r.target[a]=s(t));return n},l.add=function(e){var n=+this._x.call(null,e),r=+this._y.call(null,e);return t(this.cover(n,r),n,r,e)},l.addAll=function(e){var n,r,a,i,o=e.length,s=new Array(o),l=new Array(o),u=1/0,c=1/0,f=-1/0,d=-1/0;for(r=0;r<o;++r)isNaN(a=+this._x.call(null,n=e[r]))||isNaN(i=+this._y.call(null,n))||(s[r]=a,l[r]=i,a<u&&(u=a),a>f&&(f=a),i<c&&(c=i),i>d&&(d=i));for(f<u&&(u=this._x0,f=this._x1),d<c&&(c=this._y0,d=this._y1),this.cover(u,c).cover(f,d),r=0;r<o;++r)t(this,s[r],l[r],e[r]);return this},l.cover=function(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,a=this._x1,i=this._y1;if(isNaN(n))a=(n=Math.floor(e))+1,i=(r=Math.floor(t))+1;else{if(!(n>e||e>a||r>t||t>i))return this;var o,s,l=a-n,u=this._root;switch(s=(t<(r+i)/2)<<1|e<(n+a)/2){case 0:do{(o=new Array(4))[s]=u,u=o}while(i=r+(l*=2),e>(a=n+l)||t>i);break;case 1:do{(o=new Array(4))[s]=u,u=o}while(i=r+(l*=2),(n=a-l)>e||t>i);break;case 2:do{(o=new Array(4))[s]=u,u=o}while(r=i-(l*=2),e>(a=n+l)||r>t);break;case 3:do{(o=new Array(4))[s]=u,u=o}while(r=i-(l*=2),(n=a-l)>e||r>t)}this._root&&this._root.length&&(this._root=u)}return this._x0=n,this._y0=r,this._x1=a,this._y1=i,this},l.data=function(){var e=[];return this.visit(function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)}),e},l.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},l.find=function(e,t,r){var a,i,o,s,l,u,c,f=this._x0,d=this._y0,p=this._x1,h=this._y1,m=[],v=this._root;for(v&&m.push(new n(v,f,d,p,h)),null==r?r=1/0:(f=e-r,d=t-r,p=e+r,h=t+r,r*=r);u=m.pop();)if(!(!(v=u.node)||(i=u.x0)>p||(o=u.y0)>h||(s=u.x1)<f||(l=u.y1)<d))if(v.length){var g=(i+s)/2,y=(o+l)/2;m.push(new n(v[3],g,y,s,l),new n(v[2],i,y,g,l),new n(v[1],g,o,s,y),new n(v[0],i,o,g,y)),(c=(t>=y)<<1|e>=g)&&(u=m[m.length-1],m[m.length-1]=m[m.length-1-c],m[m.length-1-c]=u)}else{var b=e-+this._x.call(null,v.data),x=t-+this._y.call(null,v.data),_=b*b+x*x;if(_<r){var w=Math.sqrt(r=_);f=e-w,d=t-w,p=e+w,h=t+w,a=v.data}}return a},l.remove=function(e){if(isNaN(i=+this._x.call(null,e))||isNaN(o=+this._y.call(null,e)))return this;var t,n,r,a,i,o,s,l,u,c,f,d,p=this._root,h=this._x0,m=this._y0,v=this._x1,g=this._y1;if(!p)return this;if(p.length)for(;;){if((u=i>=(s=(h+v)/2))?h=s:v=s,(c=o>=(l=(m+g)/2))?m=l:g=l,t=p,!(p=p[f=c<<1|u]))return this;if(!p.length)break;(t[f+1&3]||t[f+2&3]||t[f+3&3])&&(n=t,d=f)}for(;p.data!==e;)if(r=p,!(p=p.next))return this;return(a=p.next)&&delete p.next,r?(a?r.next=a:delete r.next,this):t?(a?t[f]=a:delete t[f],(p=t[0]||t[1]||t[2]||t[3])&&p===(t[3]||t[2]||t[1]||t[0])&&!p.length&&(n?n[d]=p:this._root=p),this):(this._root=a,this)},l.removeAll=function(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this},l.root=function(){return this._root},l.size=function(){var e=0;return this.visit(function(t){if(!t.length)do{++e}while(t=t.next)}),e},l.visit=function(e){var t,r,a,i,o,s,l=[],u=this._root;for(u&&l.push(new n(u,this._x0,this._y0,this._x1,this._y1));t=l.pop();)if(!e(u=t.node,a=t.x0,i=t.y0,o=t.x1,s=t.y1)&&u.length){var c=(a+o)/2,f=(i+s)/2;(r=u[3])&&l.push(new n(r,c,f,o,s)),(r=u[2])&&l.push(new n(r,a,f,c,s)),(r=u[1])&&l.push(new n(r,c,i,o,f)),(r=u[0])&&l.push(new n(r,a,i,c,f))}return this},l.visitAfter=function(e){var t,r=[],a=[];for(this._root&&r.push(new n(this._root,this._x0,this._y0,this._x1,this._y1));t=r.pop();){var i=t.node;if(i.length){var o,s=t.x0,l=t.y0,u=t.x1,c=t.y1,f=(s+u)/2,d=(l+c)/2;(o=i[0])&&r.push(new n(o,s,l,f,d)),(o=i[1])&&r.push(new n(o,f,l,u,d)),(o=i[2])&&r.push(new n(o,s,d,f,c)),(o=i[3])&&r.push(new n(o,f,d,u,c))}a.push(t)}for(;t=a.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this},l.x=function(e){return arguments.length?(this._x=e,this):this._x},l.y=function(e){return arguments.length?(this._y=e,this):this._y},e.quadtree=i,Object.defineProperty(e,"__esModule",{value:!0})})},{}],147:[function(e,t,n){!function(e,r){r("object"==typeof n&&void 0!==t?n:e.d3=e.d3||{})}(this,function(e){"use strict";var t,n,r=0,a=0,i=0,o=1e3,s=0,l=0,u=0,c="object"==typeof performance&&performance.now?performance:Date,f="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function d(){return l||(f(p),l=c.now()+u)}function p(){l=0}function h(){this._call=this._time=this._next=null}function m(e,t,n){var r=new h;return r.restart(e,t,n),r}function v(){d(),++r;for(var e,n=t;n;)(e=l-n._time)>=0&&n._call.call(null,e),n=n._next;--r}function g(){l=(s=c.now())+u,r=a=0;try{v()}finally{r=0,function(){for(var e,r,a=t,i=1/0;a;)a._call?(i>a._time&&(i=a._time),e=a,a=a._next):(r=a._next,a._next=null,a=e?e._next=r:t=r);n=e,b(i)}(),l=0}}function y(){var e=c.now(),t=e-s;t>o&&(u-=t,s=e)}function b(e){if(!r){a&&(a=clearTimeout(a));var t=e-l;t>24?(e<1/0&&(a=setTimeout(g,e-c.now()-u)),i&&(i=clearInterval(i))):(i||(s=c.now(),i=setInterval(y,o)),r=1,f(g))}}h.prototype=m.prototype={constructor:h,restart:function(e,r,a){if("function"!=typeof e)throw new TypeError("callback is not a function");a=(null==a?d():+a)+(null==r?0:+r),this._next||n===this||(n?n._next=this:t=this,n=this),this._call=e,this._time=a,b()},stop:function(){this._call&&(this._call=null,this._time=1/0,b())}},e.now=d,e.timer=m,e.timerFlush=v,e.timeout=function(e,t,n){var r=new h;return t=null==t?0:+t,r.restart(function(n){r.stop(),e(n+t)},t,n),r},e.interval=function(e,t,n){var r=new h,a=t;return null==t?(r.restart(e,t,n),r):(t=+t,n=null==n?d():+n,r.restart(function i(o){o+=a,r.restart(i,a+=t,n),e(o)},t,n),r)},Object.defineProperty(e,"__esModule",{value:!0})})},{}],148:[function(e,t,n){!function(){var e={version:"3.5.17"},n=[].slice,r=function(e){return n.call(e)},a=this.document;function i(e){return e&&(e.ownerDocument||e.document||e).documentElement}function o(e){return e&&(e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView)}if(a)try{r(a.documentElement.childNodes)[0].nodeType}catch(e){r=function(e){for(var t=e.length,n=new Array(t);t--;)n[t]=e[t];return n}}if(Date.now||(Date.now=function(){return+new Date}),a)try{a.createElement("DIV").style.setProperty("opacity",0,"")}catch(e){var s=this.Element.prototype,l=s.setAttribute,u=s.setAttributeNS,c=this.CSSStyleDeclaration.prototype,f=c.setProperty;s.setAttribute=function(e,t){l.call(this,e,t+"")},s.setAttributeNS=function(e,t,n){u.call(this,e,t,n+"")},c.setProperty=function(e,t,n){f.call(this,e,t+"",n)}}function d(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function p(e){return null===e?NaN:+e}function h(e){return!isNaN(e)}function m(e){return{left:function(t,n,r,a){for(arguments.length<3&&(r=0),arguments.length<4&&(a=t.length);r<a;){var i=r+a>>>1;e(t[i],n)<0?r=i+1:a=i}return r},right:function(t,n,r,a){for(arguments.length<3&&(r=0),arguments.length<4&&(a=t.length);r<a;){var i=r+a>>>1;e(t[i],n)>0?a=i:r=i+1}return r}}}e.ascending=d,e.descending=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN},e.min=function(e,t){var n,r,a=-1,i=e.length;if(1===arguments.length){for(;++a<i;)if(null!=(r=e[a])&&r>=r){n=r;break}for(;++a<i;)null!=(r=e[a])&&n>r&&(n=r)}else{for(;++a<i;)if(null!=(r=t.call(e,e[a],a))&&r>=r){n=r;break}for(;++a<i;)null!=(r=t.call(e,e[a],a))&&n>r&&(n=r)}return n},e.max=function(e,t){var n,r,a=-1,i=e.length;if(1===arguments.length){for(;++a<i;)if(null!=(r=e[a])&&r>=r){n=r;break}for(;++a<i;)null!=(r=e[a])&&r>n&&(n=r)}else{for(;++a<i;)if(null!=(r=t.call(e,e[a],a))&&r>=r){n=r;break}for(;++a<i;)null!=(r=t.call(e,e[a],a))&&r>n&&(n=r)}return n},e.extent=function(e,t){var n,r,a,i=-1,o=e.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=e[i])&&r>=r){n=a=r;break}for(;++i<o;)null!=(r=e[i])&&(n>r&&(n=r),a<r&&(a=r))}else{for(;++i<o;)if(null!=(r=t.call(e,e[i],i))&&r>=r){n=a=r;break}for(;++i<o;)null!=(r=t.call(e,e[i],i))&&(n>r&&(n=r),a<r&&(a=r))}return[n,a]},e.sum=function(e,t){var n,r=0,a=e.length,i=-1;if(1===arguments.length)for(;++i<a;)h(n=+e[i])&&(r+=n);else for(;++i<a;)h(n=+t.call(e,e[i],i))&&(r+=n);return r},e.mean=function(e,t){var n,r=0,a=e.length,i=-1,o=a;if(1===arguments.length)for(;++i<a;)h(n=p(e[i]))?r+=n:--o;else for(;++i<a;)h(n=p(t.call(e,e[i],i)))?r+=n:--o;if(o)return r/o},e.quantile=function(e,t){var n=(e.length-1)*t+1,r=Math.floor(n),a=+e[r-1],i=n-r;return i?a+i*(e[r]-a):a},e.median=function(t,n){var r,a=[],i=t.length,o=-1;if(1===arguments.length)for(;++o<i;)h(r=p(t[o]))&&a.push(r);else for(;++o<i;)h(r=p(n.call(t,t[o],o)))&&a.push(r);if(a.length)return e.quantile(a.sort(d),.5)},e.variance=function(e,t){var n,r,a=e.length,i=0,o=0,s=-1,l=0;if(1===arguments.length)for(;++s<a;)h(n=p(e[s]))&&(i+=(r=n-i)/++l,o+=r*(n-i));else for(;++s<a;)h(n=p(t.call(e,e[s],s)))&&(i+=(r=n-i)/++l,o+=r*(n-i));if(l>1)return o/(l-1)},e.deviation=function(){var t=e.variance.apply(this,arguments);return t?Math.sqrt(t):t};var v=m(d);function g(e){return e.length}e.bisectLeft=v.left,e.bisect=e.bisectRight=v.right,e.bisector=function(e){return m(1===e.length?function(t,n){return d(e(t),n)}:e)},e.shuffle=function(e,t,n){(i=arguments.length)<3&&(n=e.length,i<2&&(t=0));for(var r,a,i=n-t;i;)a=Math.random()*i--|0,r=e[i+t],e[i+t]=e[a+t],e[a+t]=r;return e},e.permute=function(e,t){for(var n=t.length,r=new Array(n);n--;)r[n]=e[t[n]];return r},e.pairs=function(e){for(var t=0,n=e.length-1,r=e[0],a=new Array(n<0?0:n);t<n;)a[t]=[r,r=e[++t]];return a},e.transpose=function(t){if(!(i=t.length))return[];for(var n=-1,r=e.min(t,g),a=new Array(r);++n<r;)for(var i,o=-1,s=a[n]=new Array(i);++o<i;)s[o]=t[o][n];return a},e.zip=function(){return e.transpose(arguments)},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t},e.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},e.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},e.merge=function(e){for(var t,n,r,a=e.length,i=-1,o=0;++i<a;)o+=e[i].length;for(n=new Array(o);--a>=0;)for(r=e[a],t=r.length;--t>=0;)n[--o]=r[t];return n};var y=Math.abs;function b(e,t){for(var n in t)Object.defineProperty(e.prototype,n,{value:t[n],enumerable:!1})}function x(){this._=Object.create(null)}e.range=function(e,t,n){if(arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0)),(t-e)/n==1/0)throw new Error("infinite range");var r,a=[],i=function(e){for(var t=1;e*t%1;)t*=10;return t}(y(n)),o=-1;if(e*=i,t*=i,(n*=i)<0)for(;(r=e+n*++o)>t;)a.push(r/i);else for(;(r=e+n*++o)<t;)a.push(r/i);return a},e.map=function(e,t){var n=new x;if(e instanceof x)e.forEach(function(e,t){n.set(e,t)});else if(Array.isArray(e)){var r,a=-1,i=e.length;if(1===arguments.length)for(;++a<i;)n.set(a,e[a]);else for(;++a<i;)n.set(t.call(e,r=e[a],a),r)}else for(var o in e)n.set(o,e[o]);return n};var _="__proto__",w="\0";function T(e){return(e+="")===_||e[0]===w?w+e:e}function k(e){return(e+="")[0]===w?e.slice(1):e}function C(e){return T(e)in this._}function E(e){return(e=T(e))in this._&&delete this._[e]}function M(){var e=[];for(var t in this._)e.push(k(t));return e}function A(){var e=0;for(var t in this._)++e;return e}function S(){for(var e in this._)return!1;return!0}function O(){this._=Object.create(null)}function P(e){return e}function R(e,t,n){return function(){var r=n.apply(t,arguments);return r===t?e:r}}function L(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var n=0,r=D.length;n<r;++n){var a=D[n]+t;if(a in e)return a}}b(x,{has:C,get:function(e){return this._[T(e)]},set:function(e,t){return this._[T(e)]=t},remove:E,keys:M,values:function(){var e=[];for(var t in this._)e.push(this._[t]);return e},entries:function(){var e=[];for(var t in this._)e.push({key:k(t),value:this._[t]});return e},size:A,empty:S,forEach:function(e){for(var t in this._)e.call(this,k(t),this._[t])}}),e.nest=function(){var t,n,r={},a=[],i=[];function o(e,i,s){if(s>=a.length)return n?n.call(r,i):t?i.sort(t):i;for(var l,u,c,f,d=-1,p=i.length,h=a[s++],m=new x;++d<p;)(f=m.get(l=h(u=i[d])))?f.push(u):m.set(l,[u]);return e?(u=e(),c=function(t,n){u.set(t,o(e,n,s))}):(u={},c=function(t,n){u[t]=o(e,n,s)}),m.forEach(c),u}return r.map=function(e,t){return o(t,e,0)},r.entries=function(t){return function e(t,n){if(n>=a.length)return t;var r=[],o=i[n++];return t.forEach(function(t,a){r.push({key:t,values:e(a,n)})}),o?r.sort(function(e,t){return o(e.key,t.key)}):r}(o(e.map,t,0),0)},r.key=function(e){return a.push(e),r},r.sortKeys=function(e){return i[a.length-1]=e,r},r.sortValues=function(e){return t=e,r},r.rollup=function(e){return n=e,r},r},e.set=function(e){var t=new O;if(e)for(var n=0,r=e.length;n<r;++n)t.add(e[n]);return t},b(O,{has:C,add:function(e){return this._[T(e+="")]=!0,e},remove:E,values:M,size:A,empty:S,forEach:function(e){for(var t in this._)e.call(this,k(t))}}),e.behavior={},e.rebind=function(e,t){for(var n,r=1,a=arguments.length;++r<a;)e[n=arguments[r]]=R(e,t,t[n]);return e};var D=["webkit","ms","moz","Moz","o","O"];function I(){}function z(){}function j(e){var t=[],n=new x;function r(){for(var n,r=t,a=-1,i=r.length;++a<i;)(n=r[a].on)&&n.apply(this,arguments);return e}return r.on=function(r,a){var i,o=n.get(r);return arguments.length<2?o&&o.on:(o&&(o.on=null,t=t.slice(0,i=t.indexOf(o)).concat(t.slice(i+1)),n.remove(r)),a&&t.push(n.set(r,{on:a})),e)},r}function N(){e.event.preventDefault()}function F(){for(var t,n=e.event;t=n.sourceEvent;)n=t;return n}function B(t){for(var n=new z,r=0,a=arguments.length;++r<a;)n[arguments[r]]=j(n);return n.of=function(r,a){return function(i){try{var o=i.sourceEvent=e.event;i.target=t,e.event=i,n[i.type].apply(r,a)}finally{e.event=o}}},n}e.dispatch=function(){for(var e=new z,t=-1,n=arguments.length;++t<n;)e[arguments[t]]=j(e);return e},z.prototype.on=function(e,t){var n=e.indexOf("."),r="";if(n>=0&&(r=e.slice(n+1),e=e.slice(0,n)),e)return arguments.length<2?this[e].on(r):this[e].on(r,t);if(2===arguments.length){if(null==t)for(e in this)this.hasOwnProperty(e)&&this[e].on(r,null);return this}},e.event=null,e.requote=function(e){return e.replace(V,"\\$&")};var V=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,U={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]};function G(e){return U(e,Y),e}var H=function(e,t){return t.querySelector(e)},W=function(e,t){return t.querySelectorAll(e)},q=function(e,t){var n=e.matches||e[L(e,"matchesSelector")];return(q=function(e,t){return n.call(e,t)})(e,t)};"function"==typeof Sizzle&&(H=function(e,t){return Sizzle(e,t)[0]||null},W=Sizzle,q=Sizzle.matchesSelector),e.selection=function(){return e.select(a.documentElement)};var Y=e.selection.prototype=[];function X(e){return"function"==typeof e?e:function(){return H(e,this)}}function Z(e){return"function"==typeof e?e:function(){return W(e,this)}}Y.select=function(e){var t,n,r,a,i=[];e=X(e);for(var o=-1,s=this.length;++o<s;){i.push(t=[]),t.parentNode=(r=this[o]).parentNode;for(var l=-1,u=r.length;++l<u;)(a=r[l])?(t.push(n=e.call(a,a.__data__,l,o)),n&&"__data__"in a&&(n.__data__=a.__data__)):t.push(null)}return G(i)},Y.selectAll=function(e){var t,n,a=[];e=Z(e);for(var i=-1,o=this.length;++i<o;)for(var s=this[i],l=-1,u=s.length;++l<u;)(n=s[l])&&(a.push(t=r(e.call(n,n.__data__,l,i))),t.parentNode=n);return G(a)};var $="http://www.w3.org/1999/xhtml",K={svg:"http://www.w3.org/2000/svg",xhtml:$,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function J(t,n){return t=e.ns.qualify(t),null==n?t.local?function(){this.removeAttributeNS(t.space,t.local)}:function(){this.removeAttribute(t)}:"function"==typeof n?t.local?function(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}:function(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}:t.local?function(){this.setAttributeNS(t.space,t.local,n)}:function(){this.setAttribute(t,n)}}function Q(e){return e.trim().replace(/\s+/g," ")}function ee(t){return new RegExp("(?:^|\\s+)"+e.requote(t)+"(?:\\s+|$)","g")}function te(e){return(e+"").trim().split(/^|\s+/)}function ne(e,t){var n=(e=te(e).map(re)).length;return"function"==typeof t?function(){for(var r=-1,a=t.apply(this,arguments);++r<n;)e[r](this,a)}:function(){for(var r=-1;++r<n;)e[r](this,t)}}function re(e){var t=ee(e);return function(n,r){if(a=n.classList)return r?a.add(e):a.remove(e);var a=n.getAttribute("class")||"";r?(t.lastIndex=0,t.test(a)||n.setAttribute("class",Q(a+" "+e))):n.setAttribute("class",Q(a.replace(t," ")))}}function ae(e,t,n){return null==t?function(){this.style.removeProperty(e)}:"function"==typeof t?function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}:function(){this.style.setProperty(e,t,n)}}function ie(e,t){return null==t?function(){delete this[e]}:"function"==typeof t?function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}:function(){this[e]=t}}function oe(t){return"function"==typeof t?t:(t=e.ns.qualify(t)).local?function(){return this.ownerDocument.createElementNS(t.space,t.local)}:function(){var e=this.ownerDocument,n=this.namespaceURI;return n===$&&e.documentElement.namespaceURI===$?e.createElement(t):e.createElementNS(n,t)}}function se(){var e=this.parentNode;e&&e.removeChild(this)}function le(e){return{__data__:e}}function ue(e){return function(){return q(this,e)}}function ce(e,t){for(var n=0,r=e.length;n<r;n++)for(var a,i=e[n],o=0,s=i.length;o<s;o++)(a=i[o])&&t(a,o,n);return e}function fe(e){return U(e,de),e}e.ns={prefix:K,qualify:function(e){var t=e.indexOf(":"),n=e;return t>=0&&"xmlns"!==(n=e.slice(0,t))&&(e=e.slice(t+1)),K.hasOwnProperty(n)?{space:K[n],local:e}:e}},Y.attr=function(t,n){if(arguments.length<2){if("string"==typeof t){var r=this.node();return(t=e.ns.qualify(t)).local?r.getAttributeNS(t.space,t.local):r.getAttribute(t)}for(n in t)this.each(J(n,t[n]));return this}return this.each(J(t,n))},Y.classed=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node(),r=(e=te(e)).length,a=-1;if(t=n.classList){for(;++a<r;)if(!t.contains(e[a]))return!1}else for(t=n.getAttribute("class");++a<r;)if(!ee(e[a]).test(t))return!1;return!0}for(t in e)this.each(ne(t,e[t]));return this}return this.each(ne(e,t))},Y.style=function(e,t,n){var r=arguments.length;if(r<3){if("string"!=typeof e){for(n in r<2&&(t=""),e)this.each(ae(n,e[n],t));return this}if(r<2){var a=this.node();return o(a).getComputedStyle(a,null).getPropertyValue(e)}n=""}return this.each(ae(e,t,n))},Y.property=function(e,t){if(arguments.length<2){if("string"==typeof e)return this.node()[e];for(t in e)this.each(ie(t,e[t]));return this}return this.each(ie(e,t))},Y.text=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}:null==e?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent},Y.html=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}:null==e?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML},Y.append=function(e){return e=oe(e),this.select(function(){return this.appendChild(e.apply(this,arguments))})},Y.insert=function(e,t){return e=oe(e),t=X(t),this.select(function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)})},Y.remove=function(){return this.each(se)},Y.data=function(e,t){var n,r,a=-1,i=this.length;if(!arguments.length){for(e=new Array(i=(n=this[0]).length);++a<i;)(r=n[a])&&(e[a]=r.__data__);return e}function o(e,n){var r,a,i,o=e.length,c=n.length,f=Math.min(o,c),d=new Array(c),p=new Array(c),h=new Array(o);if(t){var m,v=new x,g=new Array(o);for(r=-1;++r<o;)(a=e[r])&&(v.has(m=t.call(a,a.__data__,r))?h[r]=a:v.set(m,a),g[r]=m);for(r=-1;++r<c;)(a=v.get(m=t.call(n,i=n[r],r)))?!0!==a&&(d[r]=a,a.__data__=i):p[r]=le(i),v.set(m,!0);for(r=-1;++r<o;)r in g&&!0!==v.get(g[r])&&(h[r]=e[r])}else{for(r=-1;++r<f;)a=e[r],i=n[r],a?(a.__data__=i,d[r]=a):p[r]=le(i);for(;r<c;++r)p[r]=le(n[r]);for(;r<o;++r)h[r]=e[r]}p.update=d,p.parentNode=d.parentNode=h.parentNode=e.parentNode,s.push(p),l.push(d),u.push(h)}var s=fe([]),l=G([]),u=G([]);if("function"==typeof e)for(;++a<i;)o(n=this[a],e.call(n,n.parentNode.__data__,a));else for(;++a<i;)o(n=this[a],e);return l.enter=function(){return s},l.exit=function(){return u},l},Y.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")},Y.filter=function(e){var t,n,r,a=[];"function"!=typeof e&&(e=ue(e));for(var i=0,o=this.length;i<o;i++){a.push(t=[]),t.parentNode=(n=this[i]).parentNode;for(var s=0,l=n.length;s<l;s++)(r=n[s])&&e.call(r,r.__data__,s,i)&&t.push(r)}return G(a)},Y.order=function(){for(var e=-1,t=this.length;++e<t;)for(var n,r=this[e],a=r.length-1,i=r[a];--a>=0;)(n=r[a])&&(i&&i!==n.nextSibling&&i.parentNode.insertBefore(n,i),i=n);return this},Y.sort=function(e){e=function(e){return arguments.length||(e=d),function(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}}.apply(this,arguments);for(var t=-1,n=this.length;++t<n;)this[t].sort(e);return this.order()},Y.each=function(e){return ce(this,function(t,n,r){e.call(t,t.__data__,n,r)})},Y.call=function(e){var t=r(arguments);return e.apply(t[0]=this,t),this},Y.empty=function(){return!this.node()},Y.node=function(){for(var e=0,t=this.length;e<t;e++)for(var n=this[e],r=0,a=n.length;r<a;r++){var i=n[r];if(i)return i}return null},Y.size=function(){var e=0;return ce(this,function(){++e}),e};var de=[];function pe(t,n,a){var i="__on"+t,o=t.indexOf("."),s=me;o>0&&(t=t.slice(0,o));var l=he.get(t);function u(){var e=this[i];e&&(this.removeEventListener(t,e,e.$),delete this[i])}return l&&(t=l,s=ve),o?n?function(){var e=s(n,r(arguments));u.call(this),this.addEventListener(t,this[i]=e,e.$=a),e._=n}:u:n?I:function(){var n,r=new RegExp("^__on([^.]+)"+e.requote(t)+"$");for(var a in this)if(n=a.match(r)){var i=this[a];this.removeEventListener(n[1],i,i.$),delete this[a]}}}e.selection.enter=fe,e.selection.enter.prototype=de,de.append=Y.append,de.empty=Y.empty,de.node=Y.node,de.call=Y.call,de.size=Y.size,de.select=function(e){for(var t,n,r,a,i,o=[],s=-1,l=this.length;++s<l;){r=(a=this[s]).update,o.push(t=[]),t.parentNode=a.parentNode;for(var u=-1,c=a.length;++u<c;)(i=a[u])?(t.push(r[u]=n=e.call(a.parentNode,i.__data__,u,s)),n.__data__=i.__data__):t.push(null)}return G(o)},de.insert=function(e,t){return arguments.length<2&&(t=function(e){var t,n;return function(r,a,i){var o,s=e[i].update,l=s.length;for(i!=n&&(n=i,t=0),a>=t&&(t=a+1);!(o=s[t])&&++t<l;);return o}}(this)),Y.insert.call(this,e,t)},e.select=function(e){var t;return"string"==typeof e?(t=[H(e,a)]).parentNode=a.documentElement:(t=[e]).parentNode=i(e),G([t])},e.selectAll=function(e){var t;return"string"==typeof e?(t=r(W(e,a))).parentNode=a.documentElement:(t=r(e)).parentNode=null,G([t])},Y.on=function(e,t,n){var r=arguments.length;if(r<3){if("string"!=typeof e){for(n in r<2&&(t=!1),e)this.each(pe(n,e[n],t));return this}if(r<2)return(r=this.node()["__on"+e])&&r._;n=!1}return this.each(pe(e,t,n))};var he=e.map({mouseenter:"mouseover",mouseleave:"mouseout"});function me(t,n){return function(r){var a=e.event;e.event=r,n[0]=this.__data__;try{t.apply(this,n)}finally{e.event=a}}}function ve(e,t){var n=me(e,t);return function(e){var t=e.relatedTarget;t&&(t===this||8&t.compareDocumentPosition(this))||n.call(this,e)}}a&&he.forEach(function(e){"on"+e in a&&he.remove(e)});var ge,ye=0;function be(t){var n=".dragsuppress-"+ ++ye,r="click"+n,a=e.select(o(t)).on("touchmove"+n,N).on("dragstart"+n,N).on("selectstart"+n,N);if(null==ge&&(ge=!("onselectstart"in t)&&L(t.style,"userSelect")),ge){var s=i(t).style,l=s[ge];s[ge]="none"}return function(e){if(a.on(n,null),ge&&(s[ge]=l),e){var t=function(){a.on(r,null)};a.on(r,function(){N(),t()},!0),setTimeout(t,0)}}}e.mouse=function(e){return _e(e,F())};var xe=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function _e(t,n){n.changedTouches&&(n=n.changedTouches[0]);var r=t.ownerSVGElement||t;if(r.createSVGPoint){var a=r.createSVGPoint();if(xe<0){var i=o(t);if(i.scrollX||i.scrollY){var s=(r=e.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();xe=!(s.f||s.e),r.remove()}}return xe?(a.x=n.pageX,a.y=n.pageY):(a.x=n.clientX,a.y=n.clientY),[(a=a.matrixTransform(t.getScreenCTM().inverse())).x,a.y]}var l=t.getBoundingClientRect();return[n.clientX-l.left-t.clientLeft,n.clientY-l.top-t.clientTop]}function we(){return e.event.changedTouches[0].identifier}e.touch=function(e,t,n){if(arguments.length<3&&(n=t,t=F().changedTouches),t)for(var r,a=0,i=t.length;a<i;++a)if((r=t[a]).identifier===n)return _e(e,r)},e.behavior.drag=function(){var t=B(i,"drag","dragstart","dragend"),n=null,r=s(I,e.mouse,o,"mousemove","mouseup"),a=s(we,e.touch,P,"touchmove","touchend");function i(){this.on("mousedown.drag",r).on("touchstart.drag",a)}function s(r,a,i,o,s){return function(){var l,u=e.event.target.correspondingElement||e.event.target,c=this.parentNode,f=t.of(this,arguments),d=0,p=r(),h=".drag"+(null==p?"":"-"+p),m=e.select(i(u)).on(o+h,function(){var e,t,n=a(c,p);n&&(e=n[0]-g[0],t=n[1]-g[1],d|=e|t,g=n,f({type:"drag",x:n[0]+l[0],y:n[1]+l[1],dx:e,dy:t}))}).on(s+h,function(){a(c,p)&&(m.on(o+h,null).on(s+h,null),v(d),f({type:"dragend"}))}),v=be(u),g=a(c,p);l=n?[(l=n.apply(this,arguments)).x-g[0],l.y-g[1]]:[0,0],f({type:"dragstart"})}}return i.origin=function(e){return arguments.length?(n=e,i):n},e.rebind(i,t,"on")},e.touches=function(e,t){return arguments.length<2&&(t=F().touches),t?r(t).map(function(t){var n=_e(e,t);return n.identifier=t.identifier,n}):[]};var Te=1e-6,ke=Te*Te,Ce=Math.PI,Ee=2*Ce,Me=Ee-Te,Ae=Ce/2,Se=Ce/180,Oe=180/Ce;function Pe(e){return e>0?1:e<0?-1:0}function Re(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function Le(e){return e>1?0:e<-1?Ce:Math.acos(e)}function De(e){return e>1?Ae:e<-1?-Ae:Math.asin(e)}function Ie(e){return((e=Math.exp(e))+1/e)/2}function ze(e){return(e=Math.sin(e/2))*e}var je=Math.SQRT2;e.interpolateZoom=function(e,t){var n,r,a=e[0],i=e[1],o=e[2],s=t[0],l=t[1],u=t[2],c=s-a,f=l-i,d=c*c+f*f;if(d<ke)r=Math.log(u/o)/je,n=function(e){return[a+e*c,i+e*f,o*Math.exp(je*e*r)]};else{var p=Math.sqrt(d),h=(u*u-o*o+4*d)/(2*o*2*p),m=(u*u-o*o-4*d)/(2*u*2*p),v=Math.log(Math.sqrt(h*h+1)-h),g=Math.log(Math.sqrt(m*m+1)-m);r=(g-v)/je,n=function(e){var t=e*r,n=Ie(v),s=o/(2*p)*(n*function(e){return((e=Math.exp(2*e))-1)/(e+1)}(je*t+v)-function(e){return((e=Math.exp(e))-1/e)/2}(v));return[a+s*c,i+s*f,o*n/Ie(je*t+v)]}}return n.duration=1e3*r,n},e.behavior.zoom=function(){var t,n,r,i,s,l,u,c,f,d={x:0,y:0,k:1},p=[960,500],h=Be,m=250,v=0,g="mousedown.zoom",y="mousemove.zoom",b="mouseup.zoom",x="touchstart.zoom",_=B(w,"zoomstart","zoom","zoomend");function w(e){e.on(g,P).on(Fe+".zoom",L).on("dblclick.zoom",D).on(x,R)}function T(e){return[(e[0]-d.x)/d.k,(e[1]-d.y)/d.k]}function k(e){d.k=Math.max(h[0],Math.min(h[1],e))}function C(e,t){t=function(e){return[e[0]*d.k+d.x,e[1]*d.k+d.y]}(t),d.x+=e[0]-t[0],d.y+=e[1]-t[1]}function E(t,r,a,i){t.__chart__={x:d.x,y:d.y,k:d.k},k(Math.pow(2,i)),C(n=r,a),t=e.select(t),m>0&&(t=t.transition().duration(m)),t.call(w.event)}function M(){u&&u.domain(l.range().map(function(e){return(e-d.x)/d.k}).map(l.invert)),f&&f.domain(c.range().map(function(e){return(e-d.y)/d.k}).map(c.invert))}function A(e){v++||e({type:"zoomstart"})}function S(e){M(),e({type:"zoom",scale:d.k,translate:[d.x,d.y]})}function O(e){--v||(e({type:"zoomend"}),n=null)}function P(){var t=this,n=_.of(t,arguments),r=0,a=e.select(o(t)).on(y,function(){r=1,C(e.mouse(t),i),S(n)}).on(b,function(){a.on(y,null).on(b,null),s(r),O(n)}),i=T(e.mouse(t)),s=be(t);us.call(t),A(n)}function R(){var t,n=this,r=_.of(n,arguments),a={},i=0,o=".zoom-"+e.event.changedTouches[0].identifier,l="touchmove"+o,u="touchend"+o,c=[],f=e.select(n),p=be(n);function h(){var r=e.touches(n);return t=d.k,r.forEach(function(e){e.identifier in a&&(a[e.identifier]=T(e))}),r}function m(){var t=e.event.target;e.select(t).on(l,v).on(u,y),c.push(t);for(var r=e.event.changedTouches,o=0,f=r.length;o<f;++o)a[r[o].identifier]=null;var p=h(),m=Date.now();if(1===p.length){if(m-s<500){var g=p[0];E(n,g,a[g.identifier],Math.floor(Math.log(d.k)/Math.LN2)+1),N()}s=m}else if(p.length>1){var g=p[0],b=p[1],x=g[0]-b[0],_=g[1]-b[1];i=x*x+_*_}}function v(){var o,l,u,c,f=e.touches(n);us.call(n);for(var d=0,p=f.length;d<p;++d,c=null)if(u=f[d],c=a[u.identifier]){if(l)break;o=u,l=c}if(c){var h=(h=u[0]-o[0])*h+(h=u[1]-o[1])*h,m=i&&Math.sqrt(h/i);o=[(o[0]+u[0])/2,(o[1]+u[1])/2],l=[(l[0]+c[0])/2,(l[1]+c[1])/2],k(m*t)}s=null,C(o,l),S(r)}function y(){if(e.event.touches.length){for(var t=e.event.changedTouches,n=0,i=t.length;n<i;++n)delete a[t[n].identifier];for(var s in a)return void h()}e.selectAll(c).on(o,null),f.on(g,P).on(x,R),p(),O(r)}m(),A(r),f.on(g,null).on(x,m)}function L(){var a=_.of(this,arguments);i?clearTimeout(i):(us.call(this),t=T(n=r||e.mouse(this)),A(a)),i=setTimeout(function(){i=null,O(a)},50),N(),k(Math.pow(2,.002*Ne())*d.k),C(n,t),S(a)}function D(){var t=e.mouse(this),n=Math.log(d.k)/Math.LN2;E(this,t,T(t),e.event.shiftKey?Math.ceil(n)-1:Math.floor(n)+1)}return Fe||(Fe="onwheel"in a?(Ne=function(){return-e.event.deltaY*(e.event.deltaMode?120:1)},"wheel"):"onmousewheel"in a?(Ne=function(){return e.event.wheelDelta},"mousewheel"):(Ne=function(){return-e.event.detail},"MozMousePixelScroll")),w.event=function(t){t.each(function(){var t=_.of(this,arguments),r=d;ds?e.select(this).transition().each("start.zoom",function(){d=this.__chart__||{x:0,y:0,k:1},A(t)}).tween("zoom:zoom",function(){var a=p[0],i=p[1],o=n?n[0]:a/2,s=n?n[1]:i/2,l=e.interpolateZoom([(o-d.x)/d.k,(s-d.y)/d.k,a/d.k],[(o-r.x)/r.k,(s-r.y)/r.k,a/r.k]);return function(e){var n=l(e),r=a/n[2];this.__chart__=d={x:o-n[0]*r,y:s-n[1]*r,k:r},S(t)}}).each("interrupt.zoom",function(){O(t)}).each("end.zoom",function(){O(t)}):(this.__chart__=d,A(t),S(t),O(t))})},w.translate=function(e){return arguments.length?(d={x:+e[0],y:+e[1],k:d.k},M(),w):[d.x,d.y]},w.scale=function(e){return arguments.length?(d={x:d.x,y:d.y,k:null},k(+e),M(),w):d.k},w.scaleExtent=function(e){return arguments.length?(h=null==e?Be:[+e[0],+e[1]],w):h},w.center=function(e){return arguments.length?(r=e&&[+e[0],+e[1]],w):r},w.size=function(e){return arguments.length?(p=e&&[+e[0],+e[1]],w):p},w.duration=function(e){return arguments.length?(m=+e,w):m},w.x=function(e){return arguments.length?(u=e,l=e.copy(),d={x:0,y:0,k:1},w):u},w.y=function(e){return arguments.length?(f=e,c=e.copy(),d={x:0,y:0,k:1},w):f},e.rebind(w,_,"on")};var Ne,Fe,Be=[0,1/0];function Ve(){}function Ue(e,t,n){return this instanceof Ue?(this.h=+e,this.s=+t,void(this.l=+n)):arguments.length<2?e instanceof Ue?new Ue(e.h,e.s,e.l):ct(""+e,ft,Ue):new Ue(e,t,n)}e.color=Ve,Ve.prototype.toString=function(){return this.rgb()+""},e.hsl=Ue;var Ge=Ue.prototype=new Ve;function He(e,t,n){var r,a;function i(e){return Math.round(255*function(e){return e>360?e-=360:e<0&&(e+=360),e<60?r+(a-r)*e/60:e<180?a:e<240?r+(a-r)*(240-e)/60:r}(e))}return e=isNaN(e)?0:(e%=360)<0?e+360:e,t=isNaN(t)?0:t<0?0:t>1?1:t,r=2*(n=n<0?0:n>1?1:n)-(a=n<=.5?n*(1+t):n+t-n*t),new it(i(e+120),i(e),i(e-120))}function We(t,n,r){return this instanceof We?(this.h=+t,this.c=+n,void(this.l=+r)):arguments.length<2?t instanceof We?new We(t.h,t.c,t.l):tt(t instanceof Xe?t.l:(t=dt((t=e.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new We(t,n,r)}Ge.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),new Ue(this.h,this.s,this.l/e)},Ge.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new Ue(this.h,this.s,e*this.l)},Ge.rgb=function(){return He(this.h,this.s,this.l)},e.hcl=We;var qe=We.prototype=new Ve;function Ye(e,t,n){return isNaN(e)&&(e=0),isNaN(t)&&(t=0),new Xe(n,Math.cos(e*=Se)*t,Math.sin(e)*t)}function Xe(e,t,n){return this instanceof Xe?(this.l=+e,this.a=+t,void(this.b=+n)):arguments.length<2?e instanceof Xe?new Xe(e.l,e.a,e.b):e instanceof We?Ye(e.h,e.c,e.l):dt((e=it(e)).r,e.g,e.b):new Xe(e,t,n)}qe.brighter=function(e){return new We(this.h,this.c,Math.min(100,this.l+Ze*(arguments.length?e:1)))},qe.darker=function(e){return new We(this.h,this.c,Math.max(0,this.l-Ze*(arguments.length?e:1)))},qe.rgb=function(){return Ye(this.h,this.c,this.l).rgb()},e.lab=Xe;var Ze=18,$e=.95047,Ke=1,Je=1.08883,Qe=Xe.prototype=new Ve;function et(e,t,n){var r=(e+16)/116,a=r+t/500,i=r-n/200;return a=nt(a)*$e,r=nt(r)*Ke,i=nt(i)*Je,new it(at(3.2404542*a-1.5371385*r-.4985314*i),at(-.969266*a+1.8760108*r+.041556*i),at(.0556434*a-.2040259*r+1.0572252*i))}function tt(e,t,n){return e>0?new We(Math.atan2(n,t)*Oe,Math.sqrt(t*t+n*n),e):new We(NaN,NaN,e)}function nt(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function rt(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function at(e){return Math.round(255*(e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}function it(e,t,n){return this instanceof it?(this.r=~~e,this.g=~~t,void(this.b=~~n)):arguments.length<2?e instanceof it?new it(e.r,e.g,e.b):ct(""+e,it,He):new it(e,t,n)}function ot(e){return new it(e>>16,e>>8&255,255&e)}function st(e){return ot(e)+""}Qe.brighter=function(e){return new Xe(Math.min(100,this.l+Ze*(arguments.length?e:1)),this.a,this.b)},Qe.darker=function(e){return new Xe(Math.max(0,this.l-Ze*(arguments.length?e:1)),this.a,this.b)},Qe.rgb=function(){return et(this.l,this.a,this.b)},e.rgb=it;var lt=it.prototype=new Ve;function ut(e){return e<16?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function ct(e,t,n){var r,a,i,o=0,s=0,l=0;if(r=/([a-z]+)\((.*)\)/.exec(e=e.toLowerCase()))switch(a=r[2].split(","),r[1]){case"hsl":return n(parseFloat(a[0]),parseFloat(a[1])/100,parseFloat(a[2])/100);case"rgb":return t(ht(a[0]),ht(a[1]),ht(a[2]))}return(i=mt.get(e))?t(i.r,i.g,i.b):(null==e||"#"!==e.charAt(0)||isNaN(i=parseInt(e.slice(1),16))||(4===e.length?(o=(3840&i)>>4,o|=o>>4,s=240&i,s|=s>>4,l=15&i,l|=l<<4):7===e.length&&(o=(16711680&i)>>16,s=(65280&i)>>8,l=255&i)),t(o,s,l))}function ft(e,t,n){var r,a,i=Math.min(e/=255,t/=255,n/=255),o=Math.max(e,t,n),s=o-i,l=(o+i)/2;return s?(a=l<.5?s/(o+i):s/(2-o-i),r=e==o?(t-n)/s+(t<n?6:0):t==o?(n-e)/s+2:(e-t)/s+4,r*=60):(r=NaN,a=l>0&&l<1?0:r),new Ue(r,a,l)}function dt(e,t,n){e=pt(e),t=pt(t),n=pt(n);var r=rt((.4124564*e+.3575761*t+.1804375*n)/$e),a=rt((.2126729*e+.7151522*t+.072175*n)/Ke),i=rt((.0193339*e+.119192*t+.9503041*n)/Je);return Xe(116*a-16,500*(r-a),200*(a-i))}function pt(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function ht(e){var t=parseFloat(e);return"%"===e.charAt(e.length-1)?Math.round(2.55*t):t}lt.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,r=this.b,a=30;return t||n||r?(t&&t<a&&(t=a),n&&n<a&&(n=a),r&&r<a&&(r=a),new it(Math.min(255,t/e),Math.min(255,n/e),Math.min(255,r/e))):new it(a,a,a)},lt.darker=function(e){return new it((e=Math.pow(.7,arguments.length?e:1))*this.r,e*this.g,e*this.b)},lt.hsl=function(){return ft(this.r,this.g,this.b)},lt.toString=function(){return"#"+ut(this.r)+ut(this.g)+ut(this.b)};var mt=e.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function vt(e){return"function"==typeof e?e:function(){return e}}function gt(e){return function(t,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=null),yt(t,n,e,r)}}function yt(t,n,a,i){var o={},s=e.dispatch("beforesend","progress","load","error"),l={},u=new XMLHttpRequest,c=null;function f(){var e,t=u.status;if(!t&&function(e){var t=e.responseType;return t&&"text"!==t?e.response:e.responseText}(u)||t>=200&&t<300||304===t){try{e=a.call(o,u)}catch(e){return void s.error.call(o,e)}s.load.call(o,e)}else s.error.call(o,u)}return!this.XDomainRequest||"withCredentials"in u||!/^(http(s)?:)?\/\//.test(t)||(u=new XDomainRequest),"onload"in u?u.onload=u.onerror=f:u.onreadystatechange=function(){u.readyState>3&&f()},u.onprogress=function(t){var n=e.event;e.event=t;try{s.progress.call(o,u)}finally{e.event=n}},o.header=function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?l[e]:(null==t?delete l[e]:l[e]=t+"",o)},o.mimeType=function(e){return arguments.length?(n=null==e?null:e+"",o):n},o.responseType=function(e){return arguments.length?(c=e,o):c},o.response=function(e){return a=e,o},["get","post"].forEach(function(e){o[e]=function(){return o.send.apply(o,[e].concat(r(arguments)))}}),o.send=function(e,r,a){if(2===arguments.length&&"function"==typeof r&&(a=r,r=null),u.open(e,t,!0),null==n||"accept"in l||(l.accept=n+",*/*"),u.setRequestHeader)for(var i in l)u.setRequestHeader(i,l[i]);return null!=n&&u.overrideMimeType&&u.overrideMimeType(n),null!=c&&(u.responseType=c),null!=a&&o.on("error",a).on("load",function(e){a(null,e)}),s.beforesend.call(o,u),u.send(null==r?null:r),o},o.abort=function(){return u.abort(),o},e.rebind(o,s,"on"),null==i?o:o.get(function(e){return 1===e.length?function(t,n){e(null==t?n:null)}:e}(i))}mt.forEach(function(e,t){mt.set(e,ot(t))}),e.functor=vt,e.xhr=gt(P),e.dsv=function(e,t){var n=new RegExp('["'+e+"\n]"),r=e.charCodeAt(0);function a(e,n,r){arguments.length<3&&(r=n,n=null);var a=yt(e,t,null==n?i:o(n),r);return a.row=function(e){return arguments.length?a.response(null==(n=e)?i:o(e)):n},a}function i(e){return a.parse(e.responseText)}function o(e){return function(t){return a.parse(t.responseText,e)}}function s(t){return t.map(l).join(e)}function l(e){return n.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}return a.parse=function(e,t){var n;return a.parseRows(e,function(e,r){if(n)return n(e,r-1);var a=new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}");n=t?function(e,n){return t(a(e),n)}:a})},a.parseRows=function(e,t){var n,a,i={},o={},s=[],l=e.length,u=0,c=0;function f(){if(u>=l)return o;if(a)return a=!1,i;var t=u;if(34===e.charCodeAt(t)){for(var n=t;n++<l;)if(34===e.charCodeAt(n)){if(34!==e.charCodeAt(n+1))break;++n}u=n+2;var s=e.charCodeAt(n+1);return 13===s?(a=!0,10===e.charCodeAt(n+2)&&++u):10===s&&(a=!0),e.slice(t+1,n).replace(/""/g,'"')}for(;u<l;){var s=e.charCodeAt(u++),c=1;if(10===s)a=!0;else if(13===s)a=!0,10===e.charCodeAt(u)&&(++u,++c);else if(s!==r)continue;return e.slice(t,u-c)}return e.slice(t)}for(;(n=f())!==o;){for(var d=[];n!==i&&n!==o;)d.push(n),n=f();t&&null==(d=t(d,c++))||s.push(d)}return s},a.format=function(t){if(Array.isArray(t[0]))return a.formatRows(t);var n=new O,r=[];return t.forEach(function(e){for(var t in e)n.has(t)||r.push(n.add(t))}),[r.map(l).join(e)].concat(t.map(function(t){return r.map(function(e){return l(t[e])}).join(e)})).join("\n")},a.formatRows=function(e){return e.map(s).join("\n")},a},e.csv=e.dsv(",","text/csv"),e.tsv=e.dsv("\t","text/tab-separated-values");var bt,xt,_t,wt,Tt=this[L(this,"requestAnimationFrame")]||function(e){setTimeout(e,17)};function kt(e,t,n){var r=arguments.length;r<2&&(t=0),r<3&&(n=Date.now());var a=n+t,i={c:e,t:a,n:null};return xt?xt.n=i:bt=i,xt=i,_t||(wt=clearTimeout(wt),_t=1,Tt(Ct)),i}function Ct(){var e=Et(),t=Mt()-e;t>24?(isFinite(t)&&(clearTimeout(wt),wt=setTimeout(Ct,t)),_t=0):(_t=1,Tt(Ct))}function Et(){for(var e=Date.now(),t=bt;t;)e>=t.t&&t.c(e-t.t)&&(t.c=null),t=t.n;return e}function Mt(){for(var e,t=bt,n=1/0;t;)t.c?(t.t<n&&(n=t.t),t=(e=t).n):t=e?e.n=t.n:bt=t.n;return xt=e,n}function At(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1)}e.timer=function(){kt.apply(this,arguments)},e.timer.flush=function(){Et(),Mt()},e.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)};var St=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(function(e,t){var n=Math.pow(10,3*y(8-t));return{scale:t>8?function(e){return e/n}:function(e){return e*n},symbol:e}});e.formatPrefix=function(t,n){var r=0;return(t=+t)&&(t<0&&(t*=-1),n&&(t=e.round(t,At(t,n))),r=1+Math.floor(1e-12+Math.log(t)/Math.LN10),r=Math.max(-24,Math.min(24,3*Math.floor((r-1)/3)))),St[8+r/3]};var Ot=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Pt=e.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(t,n){return(t=e.round(t,At(t,n))).toFixed(Math.max(0,Math.min(20,At(t*(1+1e-15),n))))}});function Rt(e){return e+""}var Lt=e.time={},Dt=Date;function It(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}It.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){zt.setUTCDate.apply(this._,arguments)},setDay:function(){zt.setUTCDay.apply(this._,arguments)},setFullYear:function(){zt.setUTCFullYear.apply(this._,arguments)},setHours:function(){zt.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){zt.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){zt.setUTCMinutes.apply(this._,arguments)},setMonth:function(){zt.setUTCMonth.apply(this._,arguments)},setSeconds:function(){zt.setUTCSeconds.apply(this._,arguments)},setTime:function(){zt.setTime.apply(this._,arguments)}};var zt=Date.prototype;function jt(e,t,n){function r(t){var n=e(t),r=i(n,1);return t-n<r-t?n:r}function a(n){return t(n=e(new Dt(n-1)),1),n}function i(e,n){return t(e=new Dt(+e),n),e}function o(e,r,i){var o=a(e),s=[];if(i>1)for(;o<r;)n(o)%i||s.push(new Date(+o)),t(o,1);else for(;o<r;)s.push(new Date(+o)),t(o,1);return s}e.floor=e,e.round=r,e.ceil=a,e.offset=i,e.range=o;var s=e.utc=Nt(e);return s.floor=s,s.round=Nt(r),s.ceil=Nt(a),s.offset=Nt(i),s.range=function(e,t,n){try{Dt=It;var r=new It;return r._=e,o(r,t,n)}finally{Dt=Date}},e}function Nt(e){return function(t,n){try{Dt=It;var r=new It;return r._=t,e(r,n)._}finally{Dt=Date}}}Lt.year=jt(function(e){return(e=Lt.day(e)).setMonth(0,1),e},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e){return e.getFullYear()}),Lt.years=Lt.year.range,Lt.years.utc=Lt.year.utc.range,Lt.day=jt(function(e){var t=new Dt(2e3,0);return t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),t},function(e,t){e.setDate(e.getDate()+t)},function(e){return e.getDate()-1}),Lt.days=Lt.day.range,Lt.days.utc=Lt.day.utc.range,Lt.dayOfYear=function(e){var t=Lt.year(e);return Math.floor((e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(e,t){t=7-t;var n=Lt[e]=jt(function(e){return(e=Lt.day(e)).setDate(e.getDate()-(e.getDay()+t)%7),e},function(e,t){e.setDate(e.getDate()+7*Math.floor(t))},function(e){var n=Lt.year(e).getDay();return Math.floor((Lt.dayOfYear(e)+(n+t)%7)/7)-(n!==t)});Lt[e+"s"]=n.range,Lt[e+"s"].utc=n.utc.range,Lt[e+"OfYear"]=function(e){var n=Lt.year(e).getDay();return Math.floor((Lt.dayOfYear(e)+(n+t)%7)/7)}}),Lt.week=Lt.sunday,Lt.weeks=Lt.sunday.range,Lt.weeks.utc=Lt.sunday.utc.range,Lt.weekOfYear=Lt.sundayOfYear;var Ft={"-":"",_:" ",0:"0"},Bt=/^\s*\d+/,Vt=/^%/;function Ut(e,t,n){var r=e<0?"-":"",a=(r?-e:e)+"",i=a.length;return r+(i<n?new Array(n-i+1).join(t)+a:a)}function Gt(t){return new RegExp("^(?:"+t.map(e.requote).join("|")+")","i")}function Ht(e){for(var t=new x,n=-1,r=e.length;++n<r;)t.set(e[n].toLowerCase(),n);return t}function Wt(e,t,n){Bt.lastIndex=0;var r=Bt.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function qt(e,t,n){Bt.lastIndex=0;var r=Bt.exec(t.slice(n));return r?(e.U=+r[0],n+r[0].length):-1}function Yt(e,t,n){Bt.lastIndex=0;var r=Bt.exec(t.slice(n));return r?(e.W=+r[0],n+r[0].length):-1}function Xt(e,t,n){Bt.lastIndex=0;var r=Bt.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Zt(e,t,n){Bt.lastIndex=0;var r=Bt.exec(t.slice(n,n+2));return r?(e.y=function(e){return e+(e>68?1900:2e3)}(+r[0]),n+r[0].length):-1}function $t(e,t,n){return/^[+-]\d{4}$/.test(t=t.slice(n,n+5))?(e.Z=-t,n+5):-1}function Kt(e,t,n){Bt.lastIndex=0;var r=Bt.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Jt(e,t,n){Bt.lastIndex=0;var r=Bt.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Qt(e,t,n){Bt.lastIndex=0;var r=Bt.exec(t.slice(n,n+3));return r?(e.j=+r[0],n+r[0].length):-1}function en(e,t,n){Bt.lastIndex=0;var r=Bt.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function tn(e,t,n){Bt.lastIndex=0;var r=Bt.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function nn(e,t,n){Bt.lastIndex=0;var r=Bt.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function rn(e,t,n){Bt.lastIndex=0;var r=Bt.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function an(e){var t=e.getTimezoneOffset(),n=t>0?"-":"+",r=y(t)/60|0,a=y(t)%60;return n+Ut(r,"0",2)+Ut(a,"0",2)}function on(e,t,n){Vt.lastIndex=0;var r=Vt.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function sn(e){for(var t=e.length,n=-1;++n<t;)e[n][0]=this(e[n][0]);return function(t){for(var n=0,r=e[n];!r[1](t);)r=e[++n];return r[0](t)}}e.locale=function(t){return{numberFormat:function(t){var n=t.decimal,r=t.thousands,a=t.grouping,i=t.currency,o=a&&r?function(e,t){for(var n=e.length,i=[],o=0,s=a[0],l=0;n>0&&s>0&&(l+s+1>t&&(s=Math.max(1,t-l)),i.push(e.substring(n-=s,n+s)),!((l+=s+1)>t));)s=a[o=(o+1)%a.length];return i.reverse().join(r)}:P;return function(t){var r=Ot.exec(t),a=r[1]||" ",s=r[2]||">",l=r[3]||"-",u=r[4]||"",c=r[5],f=+r[6],d=r[7],p=r[8],h=r[9],m=1,v="",g="",y=!1,b=!0;switch(p&&(p=+p.substring(1)),(c||"0"===a&&"="===s)&&(c=a="0",s="="),h){case"n":d=!0,h="g";break;case"%":m=100,g="%",h="f";break;case"p":m=100,g="%",h="r";break;case"b":case"o":case"x":case"X":"#"===u&&(v="0"+h.toLowerCase());case"c":b=!1;case"d":y=!0,p=0;break;case"s":m=-1,h="r"}"$"===u&&(v=i[0],g=i[1]),"r"!=h||p||(h="g"),null!=p&&("g"==h?p=Math.max(1,Math.min(21,p)):"e"!=h&&"f"!=h||(p=Math.max(0,Math.min(20,p)))),h=Pt.get(h)||Rt;var x=c&&d;return function(t){var r=g;if(y&&t%1)return"";var i=t<0||0===t&&1/t<0?(t=-t,"-"):"-"===l?"":l;if(m<0){var u=e.formatPrefix(t,p);t=u.scale(t),r=u.symbol+g}else t*=m;var _,w,T=(t=h(t,p)).lastIndexOf(".");if(T<0){var k=b?t.lastIndexOf("e"):-1;k<0?(_=t,w=""):(_=t.substring(0,k),w=t.substring(k))}else _=t.substring(0,T),w=n+t.substring(T+1);!c&&d&&(_=o(_,1/0));var C=v.length+_.length+w.length+(x?0:i.length),E=C<f?new Array(C=f-C+1).join(a):"";return x&&(_=o(E+_,E.length?f-w.length:1/0)),i+=v,t=_+w,("<"===s?i+t+E:">"===s?E+i+t:"^"===s?E.substring(0,C>>=1)+i+t+E.substring(C):i+(x?t:E+t))+r}}}(t),timeFormat:function(t){var n=t.dateTime,r=t.date,a=t.time,i=t.periods,o=t.days,s=t.shortDays,l=t.months,u=t.shortMonths;function c(e){var t=e.length;function n(n){for(var r,a,i,o=[],s=-1,l=0;++s<t;)37===e.charCodeAt(s)&&(o.push(e.slice(l,s)),null!=(a=Ft[r=e.charAt(++s)])&&(r=e.charAt(++s)),(i=_[r])&&(r=i(n,null==a?"e"===r?" ":"0":a)),o.push(r),l=s+1);return o.push(e.slice(l,s)),o.join("")}return n.parse=function(t){var n={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},r=f(n,e,t,0);if(r!=t.length)return null;"p"in n&&(n.H=n.H%12+12*n.p);var a=null!=n.Z&&Dt!==It,i=new(a?It:Dt);return"j"in n?i.setFullYear(n.y,0,n.j):"W"in n||"U"in n?("w"in n||(n.w="W"in n?1:0),i.setFullYear(n.y,0,1),i.setFullYear(n.y,0,"W"in n?(n.w+6)%7+7*n.W-(i.getDay()+5)%7:n.w+7*n.U-(i.getDay()+6)%7)):i.setFullYear(n.y,n.m,n.d),i.setHours(n.H+(n.Z/100|0),n.M+n.Z%100,n.S,n.L),a?i._:i},n.toString=function(){return e},n}function f(e,t,n,r){for(var a,i,o,s=0,l=t.length,u=n.length;s<l;){if(r>=u)return-1;if(37===(a=t.charCodeAt(s++))){if(o=t.charAt(s++),!(i=w[o in Ft?t.charAt(s++):o])||(r=i(e,n,r))<0)return-1}else if(a!=n.charCodeAt(r++))return-1}return r}c.utc=function(e){var t=c(e);function n(e){try{var n=new(Dt=It);return n._=e,t(n)}finally{Dt=Date}}return n.parse=function(e){try{Dt=It;var n=t.parse(e);return n&&n._}finally{Dt=Date}},n.toString=t.toString,n},c.multi=c.utc.multi=sn;var d=e.map(),p=Gt(o),h=Ht(o),m=Gt(s),v=Ht(s),g=Gt(l),y=Ht(l),b=Gt(u),x=Ht(u);i.forEach(function(e,t){d.set(e.toLowerCase(),t)});var _={a:function(e){return s[e.getDay()]},A:function(e){return o[e.getDay()]},b:function(e){return u[e.getMonth()]},B:function(e){return l[e.getMonth()]},c:c(n),d:function(e,t){return Ut(e.getDate(),t,2)},e:function(e,t){return Ut(e.getDate(),t,2)},H:function(e,t){return Ut(e.getHours(),t,2)},I:function(e,t){return Ut(e.getHours()%12||12,t,2)},j:function(e,t){return Ut(1+Lt.dayOfYear(e),t,3)},L:function(e,t){return Ut(e.getMilliseconds(),t,3)},m:function(e,t){return Ut(e.getMonth()+1,t,2)},M:function(e,t){return Ut(e.getMinutes(),t,2)},p:function(e){return i[+(e.getHours()>=12)]},S:function(e,t){return Ut(e.getSeconds(),t,2)},U:function(e,t){return Ut(Lt.sundayOfYear(e),t,2)},w:function(e){return e.getDay()},W:function(e,t){return Ut(Lt.mondayOfYear(e),t,2)},x:c(r),X:c(a),y:function(e,t){return Ut(e.getFullYear()%100,t,2)},Y:function(e,t){return Ut(e.getFullYear()%1e4,t,4)},Z:an,"%":function(){return"%"}},w={a:function(e,t,n){m.lastIndex=0;var r=m.exec(t.slice(n));return r?(e.w=v.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(e,t,n){p.lastIndex=0;var r=p.exec(t.slice(n));return r?(e.w=h.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(e,t,n){b.lastIndex=0;var r=b.exec(t.slice(n));return r?(e.m=x.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(e,t,n){g.lastIndex=0;var r=g.exec(t.slice(n));return r?(e.m=y.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(e,t,n){return f(e,_.c.toString(),t,n)},d:Jt,e:Jt,H:en,I:en,j:Qt,L:rn,m:Kt,M:tn,p:function(e,t,n){var r=d.get(t.slice(n,n+=2).toLowerCase());return null==r?-1:(e.p=r,n)},S:nn,U:qt,w:Wt,W:Yt,x:function(e,t,n){return f(e,_.x.toString(),t,n)},X:function(e,t,n){return f(e,_.X.toString(),t,n)},y:Zt,Y:Xt,Z:$t,"%":on};return c}(t)}};var ln=e.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function un(){}e.format=ln.numberFormat,e.geo={},un.prototype={s:0,t:0,add:function(e){fn(e,this.t,cn),fn(cn.s,this.s,this),this.s?this.t+=cn.t:this.s=cn.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var cn=new un;function fn(e,t,n){var r=n.s=e+t,a=r-e,i=r-a;n.t=e-i+(t-a)}function dn(e,t){e&&hn.hasOwnProperty(e.type)&&hn[e.type](e,t)}e.geo.stream=function(e,t){e&&pn.hasOwnProperty(e.type)?pn[e.type](e,t):dn(e,t)};var pn={Feature:function(e,t){dn(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,a=n.length;++r<a;)dn(n[r].geometry,t)}},hn={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,a=n.length;++r<a;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){mn(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,a=n.length;++r<a;)mn(n[r],t,0)},Polygon:function(e,t){vn(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,a=n.length;++r<a;)vn(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,a=n.length;++r<a;)dn(n[r],t)}};function mn(e,t,n){var r,a=-1,i=e.length-n;for(t.lineStart();++a<i;)r=e[a],t.point(r[0],r[1],r[2]);t.lineEnd()}function vn(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)mn(e[n],t,1);t.polygonEnd()}e.geo.area=function(t){return gn=0,e.geo.stream(t,On),gn};var gn,yn,bn,xn,_n,wn,Tn,kn,Cn,En,Mn,An,Sn=new un,On={sphere:function(){gn+=4*Ce},point:I,lineStart:I,lineEnd:I,polygonStart:function(){Sn.reset(),On.lineStart=Pn},polygonEnd:function(){var e=2*Sn;gn+=e<0?4*Ce+e:e,On.lineStart=On.lineEnd=On.point=I}};function Pn(){var e,t,n,r,a;function i(e,t){t=t*Se/2+Ce/4;var i=(e*=Se)-n,o=i>=0?1:-1,s=o*i,l=Math.cos(t),u=Math.sin(t),c=a*u,f=r*l+c*Math.cos(s),d=c*o*Math.sin(s);Sn.add(Math.atan2(d,f)),n=e,r=l,a=u}On.point=function(o,s){On.point=i,n=(e=o)*Se,r=Math.cos(s=(t=s)*Se/2+Ce/4),a=Math.sin(s)},On.lineEnd=function(){i(e,t)}}function Rn(e){var t=e[0],n=e[1],r=Math.cos(n);return[r*Math.cos(t),r*Math.sin(t),Math.sin(n)]}function Ln(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Dn(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function In(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function zn(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function jn(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function Nn(e){return[Math.atan2(e[1],e[0]),De(e[2])]}function Fn(e,t){return y(e[0]-t[0])<Te&&y(e[1]-t[1])<Te}e.geo.bounds=function(){var t,n,r,a,i,o,s,l,u,c,f,d={point:p,lineStart:m,lineEnd:v,polygonStart:function(){d.point=g,d.lineStart=b,d.lineEnd=x,u=0,On.polygonStart()},polygonEnd:function(){On.polygonEnd(),d.point=p,d.lineStart=m,d.lineEnd=v,Sn<0?(t=-(r=180),n=-(a=90)):u>Te?a=90:u<-Te&&(n=-90),f[0]=t,f[1]=r}};function p(e,i){c.push(f=[t=e,r=e]),i<n&&(n=i),i>a&&(a=i)}function h(e,o){var s=Rn([e*Se,o*Se]);if(l){var u=Dn(l,s),c=[u[1],-u[0],0],f=Dn(c,u);jn(f),f=Nn(f);var d=e-i,h=d>0?1:-1,m=f[0]*Oe*h,v=y(d)>180;if(v^(h*i<m&&m<h*e)){var g=f[1]*Oe;g>a&&(a=g)}else if(v^(h*i<(m=(m+360)%360-180)&&m<h*e)){var g=-f[1]*Oe;g<n&&(n=g)}else o<n&&(n=o),o>a&&(a=o);v?e<i?_(t,e)>_(t,r)&&(r=e):_(e,r)>_(t,r)&&(t=e):r>=t?(e<t&&(t=e),e>r&&(r=e)):e>i?_(t,e)>_(t,r)&&(r=e):_(e,r)>_(t,r)&&(t=e)}else p(e,o);l=s,i=e}function m(){d.point=h}function v(){f[0]=t,f[1]=r,d.point=p,l=null}function g(e,t){if(l){var n=e-i;u+=y(n)>180?n+(n>0?360:-360):n}else o=e,s=t;On.point(e,t),h(e,t)}function b(){On.lineStart()}function x(){g(o,s),On.lineEnd(),y(u)>Te&&(t=-(r=180)),f[0]=t,f[1]=r,l=null}function _(e,t){return(t-=e)<0?t+360:t}function w(e,t){return e[0]-t[0]}function T(e,t){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}return function(i){a=r=-(t=n=1/0),c=[],e.geo.stream(i,d);var o=c.length;if(o){c.sort(w);for(var s=1,l=c[0],u=[l];s<o;++s)T((h=c[s])[0],l)||T(h[1],l)?(_(l[0],h[1])>_(l[0],l[1])&&(l[1]=h[1]),_(h[0],l[1])>_(l[0],l[1])&&(l[0]=h[0])):u.push(l=h);for(var p,h,m=-1/0,o=u.length-1,s=0,l=u[o];s<=o;l=h,++s)h=u[s],(p=_(l[1],h[0]))>m&&(m=p,t=h[0],r=l[1])}return c=f=null,t===1/0||n===1/0?[[NaN,NaN],[NaN,NaN]]:[[t,n],[r,a]]}}(),e.geo.centroid=function(t){yn=bn=xn=_n=wn=Tn=kn=Cn=En=Mn=An=0,e.geo.stream(t,Bn);var n=En,r=Mn,a=An,i=n*n+r*r+a*a;return i<ke&&(n=Tn,r=kn,a=Cn,bn<Te&&(n=xn,r=_n,a=wn),(i=n*n+r*r+a*a)<ke)?[NaN,NaN]:[Math.atan2(r,n)*Oe,De(a/Math.sqrt(i))*Oe]};var Bn={sphere:I,point:Vn,lineStart:Gn,lineEnd:Hn,polygonStart:function(){Bn.lineStart=Wn},polygonEnd:function(){Bn.lineStart=Gn}};function Vn(e,t){e*=Se;var n=Math.cos(t*=Se);Un(n*Math.cos(e),n*Math.sin(e),Math.sin(t))}function Un(e,t,n){xn+=(e-xn)/++yn,_n+=(t-_n)/yn,wn+=(n-wn)/yn}function Gn(){var e,t,n;function r(r,a){r*=Se;var i=Math.cos(a*=Se),o=i*Math.cos(r),s=i*Math.sin(r),l=Math.sin(a),u=Math.atan2(Math.sqrt((u=t*l-n*s)*u+(u=n*o-e*l)*u+(u=e*s-t*o)*u),e*o+t*s+n*l);bn+=u,Tn+=u*(e+(e=o)),kn+=u*(t+(t=s)),Cn+=u*(n+(n=l)),Un(e,t,n)}Bn.point=function(a,i){a*=Se;var o=Math.cos(i*=Se);e=o*Math.cos(a),t=o*Math.sin(a),n=Math.sin(i),Bn.point=r,Un(e,t,n)}}function Hn(){Bn.point=Vn}function Wn(){var e,t,n,r,a;function i(e,t){e*=Se;var i=Math.cos(t*=Se),o=i*Math.cos(e),s=i*Math.sin(e),l=Math.sin(t),u=r*l-a*s,c=a*o-n*l,f=n*s-r*o,d=Math.sqrt(u*u+c*c+f*f),p=n*o+r*s+a*l,h=d&&-Le(p)/d,m=Math.atan2(d,p);En+=h*u,Mn+=h*c,An+=h*f,bn+=m,Tn+=m*(n+(n=o)),kn+=m*(r+(r=s)),Cn+=m*(a+(a=l)),Un(n,r,a)}Bn.point=function(o,s){e=o,t=s,Bn.point=i,o*=Se;var l=Math.cos(s*=Se);n=l*Math.cos(o),r=l*Math.sin(o),a=Math.sin(s),Un(n,r,a)},Bn.lineEnd=function(){i(e,t),Bn.lineEnd=Hn,Bn.point=Vn}}function qn(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return(n=t.invert(n,r))&&e.invert(n[0],n[1])}),n}function Yn(){return!0}function Xn(e,t,n,r,a){var i=[],o=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,n=e[0],r=e[t];if(Fn(n,r)){a.lineStart();for(var s=0;s<t;++s)a.point((n=e[s])[0],n[1]);a.lineEnd()}else{var l=new $n(n,e,null,!0),u=new $n(n,null,l,!1);l.o=u,i.push(l),o.push(u),l=new $n(r,e,null,!1),u=new $n(r,null,l,!0),l.o=u,i.push(l),o.push(u)}}}),o.sort(t),Zn(i),Zn(o),i.length){for(var s=0,l=n,u=o.length;s<u;++s)o[s].e=l=!l;for(var c,f,d=i[0];;){for(var p=d,h=!0;p.v;)if((p=p.n)===d)return;c=p.z,a.lineStart();do{if(p.v=p.o.v=!0,p.e){if(h)for(var s=0,u=c.length;s<u;++s)a.point((f=c[s])[0],f[1]);else r(p.x,p.n.x,1,a);p=p.n}else{if(h)for(var s=(c=p.p.z).length-1;s>=0;--s)a.point((f=c[s])[0],f[1]);else r(p.x,p.p.x,-1,a);p=p.p}p=p.o,c=p.z,h=!h}while(!p.v);a.lineEnd()}}}function Zn(e){if(t=e.length){for(var t,n,r=0,a=e[0];++r<t;)a.n=n=e[r],n.p=a,a=n;a.n=n=e[0],n.p=a}}function $n(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Kn(t,n,r,a){return function(i,o){var s,l=n(o),u=i.invert(a[0],a[1]),c={point:f,lineStart:p,lineEnd:h,polygonStart:function(){c.point=x,c.lineStart=_,c.lineEnd=w,s=[],m=[]},polygonEnd:function(){c.point=f,c.lineStart=p,c.lineEnd=h,s=e.merge(s);var t=function(e,t){var n=e[0],r=e[1],a=[Math.sin(n),-Math.cos(n),0],i=0,o=0;Sn.reset();for(var s=0,l=t.length;s<l;++s){var u=t[s],c=u.length;if(c)for(var f=u[0],d=f[0],p=f[1]/2+Ce/4,h=Math.sin(p),m=Math.cos(p),v=1;;){v===c&&(v=0);var g=(e=u[v])[0],y=e[1]/2+Ce/4,b=Math.sin(y),x=Math.cos(y),_=g-d,w=_>=0?1:-1,T=w*_,k=T>Ce,C=h*b;if(Sn.add(Math.atan2(C*w*Math.sin(T),m*x+C*Math.cos(T))),i+=k?_+w*Ee:_,k^d>=n^g>=n){var E=Dn(Rn(f),Rn(e));jn(E);var M=Dn(a,E);jn(M);var A=(k^_>=0?-1:1)*De(M[2]);(r>A||r===A&&(E[0]||E[1]))&&(o+=k^_>=0?1:-1)}if(!v++)break;d=g,h=b,m=x,f=e}}return(i<-Te||i<Te&&Sn<-Te)^1&o}(u,m);s.length?(b||(o.polygonStart(),b=!0),Xn(s,er,t,r,o)):t&&(b||(o.polygonStart(),b=!0),o.lineStart(),r(null,null,1,o),o.lineEnd()),b&&(o.polygonEnd(),b=!1),s=m=null},sphere:function(){o.polygonStart(),o.lineStart(),r(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function f(e,n){var r=i(e,n);t(e=r[0],n=r[1])&&o.point(e,n)}function d(e,t){var n=i(e,t);l.point(n[0],n[1])}function p(){c.point=d,l.lineStart()}function h(){c.point=f,l.lineEnd()}var m,v,g=Qn(),y=n(g),b=!1;function x(e,t){v.push([e,t]);var n=i(e,t);y.point(n[0],n[1])}function _(){y.lineStart(),v=[]}function w(){x(v[0][0],v[0][1]),y.lineEnd();var e,t=y.clean(),n=g.buffer(),r=n.length;if(v.pop(),m.push(v),v=null,r)if(1&t){var a,r=(e=n[0]).length-1,i=-1;if(r>0){for(b||(o.polygonStart(),b=!0),o.lineStart();++i<r;)o.point((a=e[i])[0],a[1]);o.lineEnd()}}else r>1&&2&t&&n.push(n.pop().concat(n.shift())),s.push(n.filter(Jn))}return c}}function Jn(e){return e.length>1}function Qn(){var e,t=[];return{lineStart:function(){t.push(e=[])},point:function(t,n){e.push([t,n])},lineEnd:I,buffer:function(){var n=t;return t=[],e=null,n},rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))}}}function er(e,t){return((e=e.x)[0]<0?e[1]-Ae-Te:Ae-e[1])-((t=t.x)[0]<0?t[1]-Ae-Te:Ae-t[1])}var tr=Kn(Yn,function(e){var t,n=NaN,r=NaN,a=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(i,o){var s=i>0?Ce:-Ce,l=y(i-n);y(l-Ce)<Te?(e.point(n,r=(r+o)/2>0?Ae:-Ae),e.point(a,r),e.lineEnd(),e.lineStart(),e.point(s,r),e.point(i,r),t=0):a!==s&&l>=Ce&&(y(n-a)<Te&&(n-=a*Te),y(i-s)<Te&&(i-=s*Te),r=function(e,t,n,r){var a,i,o=Math.sin(e-n);return y(o)>Te?Math.atan((Math.sin(t)*(i=Math.cos(r))*Math.sin(n)-Math.sin(r)*(a=Math.cos(t))*Math.sin(e))/(a*i*o)):(t+r)/2}(n,r,i,o),e.point(a,r),e.lineEnd(),e.lineStart(),e.point(s,r),t=0),e.point(n=i,r=o),a=s},lineEnd:function(){e.lineEnd(),n=r=NaN},clean:function(){return 2-t}}},function(e,t,n,r){var a;if(null==e)a=n*Ae,r.point(-Ce,a),r.point(0,a),r.point(Ce,a),r.point(Ce,0),r.point(Ce,-a),r.point(0,-a),r.point(-Ce,-a),r.point(-Ce,0),r.point(-Ce,a);else if(y(e[0]-t[0])>Te){var i=e[0]<t[0]?Ce:-Ce;a=n*i/2,r.point(-i,a),r.point(0,a),r.point(i,a)}else r.point(t[0],t[1])},[-Ce,-Ce/2]);function nr(e,t,n,r){return function(a){var i,o=a.a,s=a.b,l=o.x,u=o.y,c=s.x,f=s.y,d=0,p=1,h=c-l,m=f-u;if(i=e-l,h||!(i>0)){if(i/=h,h<0){if(i<d)return;i<p&&(p=i)}else if(h>0){if(i>p)return;i>d&&(d=i)}if(i=n-l,h||!(i<0)){if(i/=h,h<0){if(i>p)return;i>d&&(d=i)}else if(h>0){if(i<d)return;i<p&&(p=i)}if(i=t-u,m||!(i>0)){if(i/=m,m<0){if(i<d)return;i<p&&(p=i)}else if(m>0){if(i>p)return;i>d&&(d=i)}if(i=r-u,m||!(i<0)){if(i/=m,m<0){if(i>p)return;i>d&&(d=i)}else if(m>0){if(i<d)return;i<p&&(p=i)}return d>0&&(a.a={x:l+d*h,y:u+d*m}),p<1&&(a.b={x:l+p*h,y:u+p*m}),a}}}}}}var rr=1e9;function ar(t,n,r,a){return function(l){var u,c,f,d,p,h,m,v,g,y,b,x=l,_=Qn(),w=nr(t,n,r,a),T={point:E,lineStart:function(){T.point=M,c&&c.push(f=[]),y=!0,g=!1,m=v=NaN},lineEnd:function(){u&&(M(d,p),h&&g&&_.rejoin(),u.push(_.buffer())),T.point=E,g&&l.lineEnd()},polygonStart:function(){l=_,u=[],c=[],b=!0},polygonEnd:function(){l=x,u=e.merge(u);var n=function(e){for(var t=0,n=c.length,r=e[1],a=0;a<n;++a)for(var i,o=1,s=c[a],l=s.length,u=s[0];o<l;++o)i=s[o],u[1]<=r?i[1]>r&&Re(u,i,e)>0&&++t:i[1]<=r&&Re(u,i,e)<0&&--t,u=i;return 0!==t}([t,a]),r=b&&n,i=u.length;(r||i)&&(l.polygonStart(),r&&(l.lineStart(),k(null,null,1,l),l.lineEnd()),i&&Xn(u,o,n,k,l),l.polygonEnd()),u=c=f=null}};function k(e,o,l,u){var c=0,f=0;if(null==e||(c=i(e,l))!==(f=i(o,l))||s(e,o)<0^l>0)do{u.point(0===c||3===c?t:r,c>1?a:n)}while((c=(c+l+4)%4)!==f);else u.point(o[0],o[1])}function C(e,i){return t<=e&&e<=r&&n<=i&&i<=a}function E(e,t){C(e,t)&&l.point(e,t)}function M(e,t){e=Math.max(-rr,Math.min(rr,e)),t=Math.max(-rr,Math.min(rr,t));var n=C(e,t);if(c&&f.push([e,t]),y)d=e,p=t,h=n,y=!1,n&&(l.lineStart(),l.point(e,t));else if(n&&g)l.point(e,t);else{var r={a:{x:m,y:v},b:{x:e,y:t}};w(r)?(g||(l.lineStart(),l.point(r.a.x,r.a.y)),l.point(r.b.x,r.b.y),n||l.lineEnd(),b=!1):n&&(l.lineStart(),l.point(e,t),b=!1)}m=e,v=t,g=n}return T};function i(e,a){return y(e[0]-t)<Te?a>0?0:3:y(e[0]-r)<Te?a>0?2:1:y(e[1]-n)<Te?a>0?1:0:a>0?3:2}function o(e,t){return s(e.x,t.x)}function s(e,t){var n=i(e,1),r=i(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}}function ir(e){var t=0,n=Ce/3,r=Mr(e),a=r(t,n);return a.parallels=function(e){return arguments.length?r(t=e[0]*Ce/180,n=e[1]*Ce/180):[t/Ce*180,n/Ce*180]},a}function or(e,t){var n=Math.sin(e),r=(n+Math.sin(t))/2,a=1+n*(2*r-n),i=Math.sqrt(a)/r;function o(e,t){var n=Math.sqrt(a-2*r*Math.sin(t))/r;return[n*Math.sin(e*=r),i-n*Math.cos(e)]}return o.invert=function(e,t){var n=i-t;return[Math.atan2(e,n)/r,De((a-(e*e+n*n)*r*r)/(2*r))]},o}e.geo.clipExtent=function(){var e,t,n,r,a,i,o={stream:function(e){return a&&(a.valid=!1),(a=i(e)).valid=!0,a},extent:function(s){return arguments.length?(i=ar(e=+s[0][0],t=+s[0][1],n=+s[1][0],r=+s[1][1]),a&&(a.valid=!1,a=null),o):[[e,t],[n,r]]}};return o.extent([[0,0],[960,500]])},(e.geo.conicEqualArea=function(){return ir(or)}).raw=or,e.geo.albers=function(){return e.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},e.geo.albersUsa=function(){var t,n,r,a,i=e.geo.albers(),o=e.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=e.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(e,n){t=[e,n]}};function u(e){var i=e[0],o=e[1];return t=null,n(i,o),t||(r(i,o),t)||a(i,o),t}return u.invert=function(e){var t=i.scale(),n=i.translate(),r=(e[0]-n[0])/t,a=(e[1]-n[1])/t;return(a>=.12&&a<.234&&r>=-.425&&r<-.214?o:a>=.166&&a<.234&&r>=-.214&&r<-.115?s:i).invert(e)},u.stream=function(e){var t=i.stream(e),n=o.stream(e),r=s.stream(e);return{point:function(e,a){t.point(e,a),n.point(e,a),r.point(e,a)},sphere:function(){t.sphere(),n.sphere(),r.sphere()},lineStart:function(){t.lineStart(),n.lineStart(),r.lineStart()},lineEnd:function(){t.lineEnd(),n.lineEnd(),r.lineEnd()},polygonStart:function(){t.polygonStart(),n.polygonStart(),r.polygonStart()},polygonEnd:function(){t.polygonEnd(),n.polygonEnd(),r.polygonEnd()}}},u.precision=function(e){return arguments.length?(i.precision(e),o.precision(e),s.precision(e),u):i.precision()},u.scale=function(e){return arguments.length?(i.scale(e),o.scale(.35*e),s.scale(e),u.translate(i.translate())):i.scale()},u.translate=function(e){if(!arguments.length)return i.translate();var t=i.scale(),c=+e[0],f=+e[1];return n=i.translate(e).clipExtent([[c-.455*t,f-.238*t],[c+.455*t,f+.238*t]]).stream(l).point,r=o.translate([c-.307*t,f+.201*t]).clipExtent([[c-.425*t+Te,f+.12*t+Te],[c-.214*t-Te,f+.234*t-Te]]).stream(l).point,a=s.translate([c-.205*t,f+.212*t]).clipExtent([[c-.214*t+Te,f+.166*t+Te],[c-.115*t-Te,f+.234*t-Te]]).stream(l).point,u},u.scale(1070)};var sr,lr,ur,cr,fr,dr,pr={point:I,lineStart:I,lineEnd:I,polygonStart:function(){lr=0,pr.lineStart=hr},polygonEnd:function(){pr.lineStart=pr.lineEnd=pr.point=I,sr+=y(lr/2)}};function hr(){var e,t,n,r;function a(e,t){lr+=r*e-n*t,n=e,r=t}pr.point=function(i,o){pr.point=a,e=n=i,t=r=o},pr.lineEnd=function(){a(e,t)}}var mr={point:function(e,t){e<ur&&(ur=e),e>fr&&(fr=e),t<cr&&(cr=t),t>dr&&(dr=t)},lineStart:I,lineEnd:I,polygonStart:I,polygonEnd:I};function vr(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}var gr,yr={point:br,lineStart:xr,lineEnd:_r,polygonStart:function(){yr.lineStart=wr},polygonEnd:function(){yr.point=br,yr.lineStart=xr,yr.lineEnd=_r}};function br(e,t){xn+=e,_n+=t,++wn}function xr(){var e,t;function n(n,r){var a=n-e,i=r-t,o=Math.sqrt(a*a+i*i);Tn+=o*(e+n)/2,kn+=o*(t+r)/2,Cn+=o,br(e=n,t=r)}yr.point=function(r,a){yr.point=n,br(e=r,t=a)}}function _r(){yr.point=br}function wr(){var e,t,n,r;function a(e,t){var a=e-n,i=t-r,o=Math.sqrt(a*a+i*i);Tn+=o*(n+e)/2,kn+=o*(r+t)/2,Cn+=o,En+=(o=r*e-n*t)*(n+e),Mn+=o*(r+t),An+=3*o,br(n=e,r=t)}yr.point=function(i,o){yr.point=a,br(e=n=i,t=r=o)},yr.lineEnd=function(){a(e,t)}}function Tr(e){var t=.5,n=Math.cos(30*Se),r=16;function a(t){return(r?function(t){var n,a,o,s,l,u,c,f,d,p,h,m,v={point:g,lineStart:y,lineEnd:x,polygonStart:function(){t.polygonStart(),v.lineStart=_},polygonEnd:function(){t.polygonEnd(),v.lineStart=y}};function g(n,r){n=e(n,r),t.point(n[0],n[1])}function y(){f=NaN,v.point=b,t.lineStart()}function b(n,a){var o=Rn([n,a]),s=e(n,a);i(f,d,c,p,h,m,f=s[0],d=s[1],c=n,p=o[0],h=o[1],m=o[2],r,t),t.point(f,d)}function x(){v.point=g,t.lineEnd()}function _(){y(),v.point=w,v.lineEnd=T}function w(e,t){b(n=e,t),a=f,o=d,s=p,l=h,u=m,v.point=b}function T(){i(f,d,c,p,h,m,a,o,n,s,l,u,r,t),v.lineEnd=x,x()}return v}:function(t){return Cr(t,function(n,r){n=e(n,r),t.point(n[0],n[1])})})(t)}function i(r,a,o,s,l,u,c,f,d,p,h,m,v,g){var b=c-r,x=f-a,_=b*b+x*x;if(_>4*t&&v--){var w=s+p,T=l+h,k=u+m,C=Math.sqrt(w*w+T*T+k*k),E=Math.asin(k/=C),M=y(y(k)-1)<Te||y(o-d)<Te?(o+d)/2:Math.atan2(T,w),A=e(M,E),S=A[0],O=A[1],P=S-r,R=O-a,L=x*P-b*R;(L*L/_>t||y((b*P+x*R)/_-.5)>.3||s*p+l*h+u*m<n)&&(i(r,a,o,s,l,u,S,O,M,w/=C,T/=C,k,v,g),g.point(S,O),i(S,O,M,w,T,k,c,f,d,p,h,m,v,g))}}return a.precision=function(e){return arguments.length?(r=(t=e*e)>0&&16,a):Math.sqrt(t)},a}function kr(e){this.stream=e}function Cr(e,t){return{point:t,sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}function Er(e){return Mr(function(){return e})()}function Mr(t){var n,r,a,i,o,s,l=Tr(function(e,t){return[(e=n(e,t))[0]*u+i,o-e[1]*u]}),u=150,c=480,f=250,d=0,p=0,h=0,m=0,v=0,g=tr,b=P,x=null,_=null;function w(e){return[(e=a(e[0]*Se,e[1]*Se))[0]*u+i,o-e[1]*u]}function T(e){return(e=a.invert((e[0]-i)/u,(o-e[1])/u))&&[e[0]*Oe,e[1]*Oe]}function k(){a=qn(r=Pr(h,m,v),n);var e=n(d,p);return i=c-e[0]*u,o=f+e[1]*u,C()}function C(){return s&&(s.valid=!1,s=null),w}return w.stream=function(e){return s&&(s.valid=!1),(s=Ar(g(r,l(b(e))))).valid=!0,s},w.clipAngle=function(e){return arguments.length?(g=null==e?(x=e,tr):function(e){var t=Math.cos(e),n=t>0,r=y(t)>Te;return Kn(a,function(e){var t,s,l,u,c;return{lineStart:function(){u=l=!1,c=1},point:function(f,d){var p,h=[f,d],m=a(f,d),v=n?m?0:o(f,d):m?o(f+(f<0?Ce:-Ce),d):0;if(!t&&(u=l=m)&&e.lineStart(),m!==l&&(p=i(t,h),(Fn(t,p)||Fn(h,p))&&(h[0]+=Te,h[1]+=Te,m=a(h[0],h[1]))),m!==l)c=0,m?(e.lineStart(),p=i(h,t),e.point(p[0],p[1])):(p=i(t,h),e.point(p[0],p[1]),e.lineEnd()),t=p;else if(r&&t&&n^m){var g;v&s||!(g=i(h,t,!0))||(c=0,n?(e.lineStart(),e.point(g[0][0],g[0][1]),e.point(g[1][0],g[1][1]),e.lineEnd()):(e.point(g[1][0],g[1][1]),e.lineEnd(),e.lineStart(),e.point(g[0][0],g[0][1])))}!m||t&&Fn(t,h)||e.point(h[0],h[1]),t=h,l=m,s=v},lineEnd:function(){l&&e.lineEnd(),t=null},clean:function(){return c|(u&&l)<<1}}},Ir(e,6*Se),n?[0,-e]:[-Ce,e-Ce]);function a(e,n){return Math.cos(e)*Math.cos(n)>t}function i(e,n,r){var a=Rn(e),i=Rn(n),o=[1,0,0],s=Dn(a,i),l=Ln(s,s),u=s[0],c=l-u*u;if(!c)return!r&&e;var f=t*l/c,d=-t*u/c,p=Dn(o,s),h=zn(o,f),m=zn(s,d);In(h,m);var v=p,g=Ln(h,v),b=Ln(v,v),x=g*g-b*(Ln(h,h)-1);if(!(x<0)){var _=Math.sqrt(x),w=zn(v,(-g-_)/b);if(In(w,h),w=Nn(w),!r)return w;var T,k=e[0],C=n[0],E=e[1],M=n[1];C<k&&(T=k,k=C,C=T);var A=C-k,S=y(A-Ce)<Te,O=S||A<Te;if(!S&&M<E&&(T=E,E=M,M=T),O?S?E+M>0^w[1]<(y(w[0]-k)<Te?E:M):E<=w[1]&&w[1]<=M:A>Ce^(k<=w[0]&&w[0]<=C)){var P=zn(v,(-g+_)/b);return In(P,h),[w,Nn(P)]}}}function o(t,r){var a=n?e:Ce-e,i=0;return t<-a?i|=1:t>a&&(i|=2),r<-a?i|=4:r>a&&(i|=8),i}}((x=+e)*Se),C()):x},w.clipExtent=function(e){return arguments.length?(_=e,b=e?ar(e[0][0],e[0][1],e[1][0],e[1][1]):P,C()):_},w.scale=function(e){return arguments.length?(u=+e,k()):u},w.translate=function(e){return arguments.length?(c=+e[0],f=+e[1],k()):[c,f]},w.center=function(e){return arguments.length?(d=e[0]%360*Se,p=e[1]%360*Se,k()):[d*Oe,p*Oe]},w.rotate=function(e){return arguments.length?(h=e[0]%360*Se,m=e[1]%360*Se,v=e.length>2?e[2]%360*Se:0,k()):[h*Oe,m*Oe,v*Oe]},e.rebind(w,l,"precision"),function(){return n=t.apply(this,arguments),w.invert=n.invert&&T,k()}}function Ar(e){return Cr(e,function(t,n){e.point(t*Se,n*Se)})}function Sr(e,t){return[e,t]}function Or(e,t){return[e>Ce?e-Ee:e<-Ce?e+Ee:e,t]}function Pr(e,t,n){return e?t||n?qn(Lr(e),Dr(t,n)):Lr(e):t||n?Dr(t,n):Or}function Rr(e){return function(t,n){return[(t+=e)>Ce?t-Ee:t<-Ce?t+Ee:t,n]}}function Lr(e){var t=Rr(e);return t.invert=Rr(-e),t}function Dr(e,t){var n=Math.cos(e),r=Math.sin(e),a=Math.cos(t),i=Math.sin(t);function o(e,t){var o=Math.cos(t),s=Math.cos(e)*o,l=Math.sin(e)*o,u=Math.sin(t),c=u*n+s*r;return[Math.atan2(l*a-c*i,s*n-u*r),De(c*a+l*i)]}return o.invert=function(e,t){var o=Math.cos(t),s=Math.cos(e)*o,l=Math.sin(e)*o,u=Math.sin(t),c=u*a-l*i;return[Math.atan2(l*a+u*i,s*n+c*r),De(c*n-s*r)]},o}function Ir(e,t){var n=Math.cos(e),r=Math.sin(e);return function(a,i,o,s){var l=o*t;null!=a?(a=zr(n,a),i=zr(n,i),(o>0?a<i:a>i)&&(a+=o*Ee)):(a=e+o*Ee,i=e-.5*l);for(var u,c=a;o>0?c>i:c<i;c-=l)s.point((u=Nn([n,-r*Math.cos(c),-r*Math.sin(c)]))[0],u[1])}}function zr(e,t){var n=Rn(t);n[0]-=e,jn(n);var r=Le(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-Te)%(2*Math.PI)}function jr(t,n,r){var a=e.range(t,n-Te,r).concat(n);return function(e){return a.map(function(t){return[e,t]})}}function Nr(t,n,r){var a=e.range(t,n-Te,r).concat(n);return function(e){return a.map(function(t){return[t,e]})}}function Fr(e){return e.source}function Br(e){return e.target}e.geo.path=function(){var t,n,r,a,i,o=4.5;function s(t){return t&&("function"==typeof o&&a.pointRadius(+o.apply(this,arguments)),i&&i.valid||(i=r(a)),e.geo.stream(t,i)),a.result()}function l(){return i=null,s}return s.area=function(t){return sr=0,e.geo.stream(t,r(pr)),sr},s.centroid=function(t){return xn=_n=wn=Tn=kn=Cn=En=Mn=An=0,e.geo.stream(t,r(yr)),An?[En/An,Mn/An]:Cn?[Tn/Cn,kn/Cn]:wn?[xn/wn,_n/wn]:[NaN,NaN]},s.bounds=function(t){return fr=dr=-(ur=cr=1/0),e.geo.stream(t,r(mr)),[[ur,cr],[fr,dr]]},s.projection=function(e){return arguments.length?(r=(t=e)?e.stream||function(e){var t=Tr(function(t,n){return e([t*Oe,n*Oe])});return function(e){return Ar(t(e))}}(e):P,l()):t},s.context=function(e){return arguments.length?(a=null==(n=e)?new function(){var e=vr(4.5),t=[],n={point:r,lineStart:function(){n.point=a},lineEnd:o,polygonStart:function(){n.lineEnd=s},polygonEnd:function(){n.lineEnd=o,n.point=r},pointRadius:function(t){return e=vr(t),n},result:function(){if(t.length){var e=t.join("");return t=[],e}}};function r(n,r){t.push("M",n,",",r,e)}function a(e,r){t.push("M",e,",",r),n.point=i}function i(e,n){t.push("L",e,",",n)}function o(){n.point=r}function s(){t.push("Z")}return n}:new function(e){var t=4.5,n={point:r,lineStart:function(){n.point=a},lineEnd:o,polygonStart:function(){n.lineEnd=s},polygonEnd:function(){n.lineEnd=o,n.point=r},pointRadius:function(e){return t=e,n},result:I};function r(n,r){e.moveTo(n+t,r),e.arc(n,r,t,0,Ee)}function a(t,r){e.moveTo(t,r),n.point=i}function i(t,n){e.lineTo(t,n)}function o(){n.point=r}function s(){e.closePath()}return n}(e),"function"!=typeof o&&a.pointRadius(o),l()):n},s.pointRadius=function(e){return arguments.length?(o="function"==typeof e?e:(a.pointRadius(+e),+e),s):o},s.projection(e.geo.albersUsa()).context(null)},e.geo.transform=function(e){return{stream:function(t){var n=new kr(t);for(var r in e)n[r]=e[r];return n}}},kr.prototype={point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},e.geo.projection=Er,e.geo.projectionMutator=Mr,(e.geo.equirectangular=function(){return Er(Sr)}).raw=Sr.invert=Sr,e.geo.rotation=function(e){function t(t){return(t=e(t[0]*Se,t[1]*Se))[0]*=Oe,t[1]*=Oe,t}return e=Pr(e[0]%360*Se,e[1]*Se,e.length>2?e[2]*Se:0),t.invert=function(t){return(t=e.invert(t[0]*Se,t[1]*Se))[0]*=Oe,t[1]*=Oe,t},t},Or.invert=Sr,e.geo.circle=function(){var e,t,n=[0,0],r=6;function a(){var e="function"==typeof n?n.apply(this,arguments):n,r=Pr(-e[0]*Se,-e[1]*Se,0).invert,a=[];return t(null,null,1,{point:function(e,t){a.push(e=r(e,t)),e[0]*=Oe,e[1]*=Oe}}),{type:"Polygon",coordinates:[a]}}return a.origin=function(e){return arguments.length?(n=e,a):n},a.angle=function(n){return arguments.length?(t=Ir((e=+n)*Se,r*Se),a):e},a.precision=function(n){return arguments.length?(t=Ir(e*Se,(r=+n)*Se),a):r},a.angle(90)},e.geo.distance=function(e,t){var n,r=(t[0]-e[0])*Se,a=e[1]*Se,i=t[1]*Se,o=Math.sin(r),s=Math.cos(r),l=Math.sin(a),u=Math.cos(a),c=Math.sin(i),f=Math.cos(i);return Math.atan2(Math.sqrt((n=f*o)*n+(n=u*c-l*f*s)*n),l*c+u*f*s)},e.geo.graticule=function(){var t,n,r,a,i,o,s,l,u,c,f,d,p=10,h=p,m=90,v=360,g=2.5;function b(){return{type:"MultiLineString",coordinates:x()}}function x(){return e.range(Math.ceil(a/m)*m,r,m).map(f).concat(e.range(Math.ceil(l/v)*v,s,v).map(d)).concat(e.range(Math.ceil(n/p)*p,t,p).filter(function(e){return y(e%m)>Te}).map(u)).concat(e.range(Math.ceil(o/h)*h,i,h).filter(function(e){return y(e%v)>Te}).map(c))}return b.lines=function(){return x().map(function(e){return{type:"LineString",coordinates:e}})},b.outline=function(){return{type:"Polygon",coordinates:[f(a).concat(d(s).slice(1),f(r).reverse().slice(1),d(l).reverse().slice(1))]}},b.extent=function(e){return arguments.length?b.majorExtent(e).minorExtent(e):b.minorExtent()},b.majorExtent=function(e){return arguments.length?(a=+e[0][0],r=+e[1][0],l=+e[0][1],s=+e[1][1],a>r&&(e=a,a=r,r=e),l>s&&(e=l,l=s,s=e),b.precision(g)):[[a,l],[r,s]]},b.minorExtent=function(e){return arguments.length?(n=+e[0][0],t=+e[1][0],o=+e[0][1],i=+e[1][1],n>t&&(e=n,n=t,t=e),o>i&&(e=o,o=i,i=e),b.precision(g)):[[n,o],[t,i]]},b.step=function(e){return arguments.length?b.majorStep(e).minorStep(e):b.minorStep()},b.majorStep=function(e){return arguments.length?(m=+e[0],v=+e[1],b):[m,v]},b.minorStep=function(e){return arguments.length?(p=+e[0],h=+e[1],b):[p,h]},b.precision=function(e){return arguments.length?(g=+e,u=jr(o,i,90),c=Nr(n,t,g),f=jr(l,s,90),d=Nr(a,r,g),b):g},b.majorExtent([[-180,-90+Te],[180,90-Te]]).minorExtent([[-180,-80-Te],[180,80+Te]])},e.geo.greatArc=function(){var t,n,r=Fr,a=Br;function i(){return{type:"LineString",coordinates:[t||r.apply(this,arguments),n||a.apply(this,arguments)]}}return i.distance=function(){return e.geo.distance(t||r.apply(this,arguments),n||a.apply(this,arguments))},i.source=function(e){return arguments.length?(r=e,t="function"==typeof e?null:e,i):r},i.target=function(e){return arguments.length?(a=e,n="function"==typeof e?null:e,i):a},i.precision=function(){return arguments.length?i:0},i},e.geo.interpolate=function(e,t){return function(e,t,n,r){var a=Math.cos(t),i=Math.sin(t),o=Math.cos(r),s=Math.sin(r),l=a*Math.cos(e),u=a*Math.sin(e),c=o*Math.cos(n),f=o*Math.sin(n),d=2*Math.asin(Math.sqrt(ze(r-t)+a*o*ze(n-e))),p=1/Math.sin(d),h=d?function(e){var t=Math.sin(e*=d)*p,n=Math.sin(d-e)*p,r=n*l+t*c,a=n*u+t*f,o=n*i+t*s;return[Math.atan2(a,r)*Oe,Math.atan2(o,Math.sqrt(r*r+a*a))*Oe]}:function(){return[e*Oe,t*Oe]};return h.distance=d,h}(e[0]*Se,e[1]*Se,t[0]*Se,t[1]*Se)},e.geo.length=function(t){return gr=0,e.geo.stream(t,Vr),gr};var Vr={sphere:I,point:I,lineStart:function(){var e,t,n;function r(r,a){var i=Math.sin(a*=Se),o=Math.cos(a),s=y((r*=Se)-e),l=Math.cos(s);gr+=Math.atan2(Math.sqrt((s=o*Math.sin(s))*s+(s=n*i-t*o*l)*s),t*i+n*o*l),e=r,t=i,n=o}Vr.point=function(a,i){e=a*Se,t=Math.sin(i*=Se),n=Math.cos(i),Vr.point=r},Vr.lineEnd=function(){Vr.point=Vr.lineEnd=I}},lineEnd:I,polygonStart:I,polygonEnd:I};function Ur(e,t){function n(t,n){var r=Math.cos(t),a=Math.cos(n),i=e(r*a);return[i*a*Math.sin(t),i*Math.sin(n)]}return n.invert=function(e,n){var r=Math.sqrt(e*e+n*n),a=t(r),i=Math.sin(a),o=Math.cos(a);return[Math.atan2(e*i,r*o),Math.asin(r&&n*i/r)]},n}var Gr=Ur(function(e){return Math.sqrt(2/(1+e))},function(e){return 2*Math.asin(e/2)});(e.geo.azimuthalEqualArea=function(){return Er(Gr)}).raw=Gr;var Hr=Ur(function(e){var t=Math.acos(e);return t&&t/Math.sin(t)},P);function Wr(e,t){var n=Math.cos(e),r=function(e){return Math.tan(Ce/4+e/2)},a=e===t?Math.sin(e):Math.log(n/Math.cos(t))/Math.log(r(t)/r(e)),i=n*Math.pow(r(e),a)/a;if(!a)return Xr;function o(e,t){i>0?t<-Ae+Te&&(t=-Ae+Te):t>Ae-Te&&(t=Ae-Te);var n=i/Math.pow(r(t),a);return[n*Math.sin(a*e),i-n*Math.cos(a*e)]}return o.invert=function(e,t){var n=i-t,r=Pe(a)*Math.sqrt(e*e+n*n);return[Math.atan2(e,n)/a,2*Math.atan(Math.pow(i/r,1/a))-Ae]},o}function qr(e,t){var n=Math.cos(e),r=e===t?Math.sin(e):(n-Math.cos(t))/(t-e),a=n/r+e;if(y(r)<Te)return Sr;function i(e,t){var n=a-t;return[n*Math.sin(r*e),a-n*Math.cos(r*e)]}return i.invert=function(e,t){var n=a-t;return[Math.atan2(e,n)/r,a-Pe(r)*Math.sqrt(e*e+n*n)]},i}(e.geo.azimuthalEquidistant=function(){return Er(Hr)}).raw=Hr,(e.geo.conicConformal=function(){return ir(Wr)}).raw=Wr,(e.geo.conicEquidistant=function(){return ir(qr)}).raw=qr;var Yr=Ur(function(e){return 1/e},Math.atan);function Xr(e,t){return[e,Math.log(Math.tan(Ce/4+t/2))]}function Zr(e){var t,n=Er(e),r=n.scale,a=n.translate,i=n.clipExtent;return n.scale=function(){var e=r.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.translate=function(){var e=a.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.clipExtent=function(e){var o=i.apply(n,arguments);if(o===n){if(t=null==e){var s=Ce*r(),l=a();i([[l[0]-s,l[1]-s],[l[0]+s,l[1]+s]])}}else t&&(o=null);return o},n.clipExtent(null)}(e.geo.gnomonic=function(){return Er(Yr)}).raw=Yr,Xr.invert=function(e,t){return[e,2*Math.atan(Math.exp(t))-Ae]},(e.geo.mercator=function(){return Zr(Xr)}).raw=Xr;var $r=Ur(function(){return 1},Math.asin);(e.geo.orthographic=function(){return Er($r)}).raw=$r;var Kr=Ur(function(e){return 1/(1+e)},function(e){return 2*Math.atan(e)});function Jr(e,t){return[Math.log(Math.tan(Ce/4+t/2)),-e]}function Qr(e){return e[0]}function ea(e){return e[1]}function ta(e){for(var t=e.length,n=[0,1],r=2,a=2;a<t;a++){for(;r>1&&Re(e[n[r-2]],e[n[r-1]],e[a])<=0;)--r;n[r++]=a}return n.slice(0,r)}function na(e,t){return e[0]-t[0]||e[1]-t[1]}(e.geo.stereographic=function(){return Er(Kr)}).raw=Kr,Jr.invert=function(e,t){return[-t,2*Math.atan(Math.exp(e))-Ae]},(e.geo.transverseMercator=function(){var e=Zr(Jr),t=e.center,n=e.rotate;return e.center=function(e){return e?t([-e[1],e[0]]):[(e=t())[1],-e[0]]},e.rotate=function(e){return e?n([e[0],e[1],e.length>2?e[2]+90:90]):[(e=n())[0],e[1],e[2]-90]},n([0,0,90])}).raw=Jr,e.geom={},e.geom.hull=function(e){var t=Qr,n=ea;if(arguments.length)return r(e);function r(e){if(e.length<3)return[];var r,a=vt(t),i=vt(n),o=e.length,s=[],l=[];for(r=0;r<o;r++)s.push([+a.call(this,e[r],r),+i.call(this,e[r],r),r]);for(s.sort(na),r=0;r<o;r++)l.push([s[r][0],-s[r][1]]);var u=ta(s),c=ta(l),f=c[0]===u[0],d=c[c.length-1]===u[u.length-1],p=[];for(r=u.length-1;r>=0;--r)p.push(e[s[u[r]][2]]);for(r=+f;r<c.length-d;++r)p.push(e[s[c[r]][2]]);return p}return r.x=function(e){return arguments.length?(t=e,r):t},r.y=function(e){return arguments.length?(n=e,r):n},r},e.geom.polygon=function(e){return U(e,ra),e};var ra=e.geom.polygon.prototype=[];function aa(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function ia(e,t,n,r){var a=e[0],i=n[0],o=t[0]-a,s=r[0]-i,l=e[1],u=n[1],c=t[1]-l,f=r[1]-u,d=(s*(l-u)-f*(a-i))/(f*o-s*c);return[a+d*o,l+d*c]}function oa(e){var t=e[0],n=e[e.length-1];return!(t[0]-n[0]||t[1]-n[1])}ra.area=function(){for(var e,t=-1,n=this.length,r=this[n-1],a=0;++t<n;)e=r,r=this[t],a+=e[1]*r[0]-e[0]*r[1];return.5*a},ra.centroid=function(e){var t,n,r=-1,a=this.length,i=0,o=0,s=this[a-1];for(arguments.length||(e=-1/(6*this.area()));++r<a;)t=s,s=this[r],n=t[0]*s[1]-s[0]*t[1],i+=(t[0]+s[0])*n,o+=(t[1]+s[1])*n;return[i*e,o*e]},ra.clip=function(e){for(var t,n,r,a,i,o,s=oa(e),l=-1,u=this.length-oa(this),c=this[u-1];++l<u;){for(t=e.slice(),e.length=0,a=this[l],i=t[(r=t.length-s)-1],n=-1;++n<r;)aa(o=t[n],c,a)?(aa(i,c,a)||e.push(ia(i,o,c,a)),e.push(o)):aa(i,c,a)&&e.push(ia(i,o,c,a)),i=o;s&&e.push(e[0]),c=a}return e};var sa,la,ua,ca,fa,da=[],pa=[];function ha(e){var t=da.pop()||new function(){Pa(this),this.edge=this.site=this.circle=null};return t.site=e,t}function ma(e){Ta(e),ua.remove(e),da.push(e),Pa(e)}function va(e){var t=e.circle,n=t.x,r=t.cy,a={x:n,y:r},i=e.P,o=e.N,s=[e];ma(e);for(var l=i;l.circle&&y(n-l.circle.x)<Te&&y(r-l.circle.cy)<Te;)i=l.P,s.unshift(l),ma(l),l=i;s.unshift(l),Ta(l);for(var u=o;u.circle&&y(n-u.circle.x)<Te&&y(r-u.circle.cy)<Te;)o=u.N,s.push(u),ma(u),u=o;s.push(u),Ta(u);var c,f=s.length;for(c=1;c<f;++c)u=s[c],l=s[c-1],Aa(u.edge,l.site,u.site,a);l=s[0],(u=s[f-1]).edge=Ea(l.site,u.site,null,a),wa(l),wa(u)}function ga(e){for(var t,n,r,a,i=e.x,o=e.y,s=ua._;s;)if((r=ya(s,o)-i)>Te)s=s.L;else{if(!((a=i-ba(s,o))>Te)){r>-Te?(t=s.P,n=s):a>-Te?(t=s,n=s.N):t=n=s;break}if(!s.R){t=s;break}s=s.R}var l=ha(e);if(ua.insert(t,l),t||n){if(t===n)return Ta(t),n=ha(t.site),ua.insert(l,n),l.edge=n.edge=Ea(t.site,l.site),wa(t),void wa(n);if(n){Ta(t),Ta(n);var u=t.site,c=u.x,f=u.y,d=e.x-c,p=e.y-f,h=n.site,m=h.x-c,v=h.y-f,g=2*(d*v-p*m),y=d*d+p*p,b=m*m+v*v,x={x:(v*y-p*b)/g+c,y:(d*b-m*y)/g+f};Aa(n.edge,u,h,x),l.edge=Ea(u,e,null,x),n.edge=Ea(e,h,null,x),wa(t),wa(n)}else l.edge=Ea(t.site,l.site)}}function ya(e,t){var n=e.site,r=n.x,a=n.y,i=a-t;if(!i)return r;var o=e.P;if(!o)return-1/0;var s=(n=o.site).x,l=n.y,u=l-t;if(!u)return s;var c=s-r,f=1/i-1/u,d=c/u;return f?(-d+Math.sqrt(d*d-2*f*(c*c/(-2*u)-l+u/2+a-i/2)))/f+r:(r+s)/2}function ba(e,t){var n=e.N;if(n)return ya(n,t);var r=e.site;return r.y===t?r.x:1/0}function xa(e){this.site=e,this.edges=[]}function _a(e,t){return t.angle-e.angle}function wa(e){var t=e.P,n=e.N;if(t&&n){var r=t.site,a=e.site,i=n.site;if(r!==i){var o=a.x,s=a.y,l=r.x-o,u=r.y-s,c=i.x-o,f=i.y-s,d=2*(l*f-u*c);if(!(d>=-ke)){var p=l*l+u*u,h=c*c+f*f,m=(f*p-u*h)/d,v=(l*h-c*p)/d,f=v+s,g=pa.pop()||new function(){Pa(this),this.x=this.y=this.arc=this.site=this.cy=null};g.arc=e,g.site=a,g.x=m+o,g.y=f+Math.sqrt(m*m+v*v),g.cy=f,e.circle=g;for(var y=null,b=fa._;b;)if(g.y<b.y||g.y===b.y&&g.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}fa.insert(y,g),y||(ca=g)}}}}function Ta(e){var t=e.circle;t&&(t.P||(ca=t.N),fa.remove(t),pa.push(t),Pa(t),e.circle=null)}function ka(e,t){var n=e.b;if(n)return!0;var r,a,i=e.a,o=t[0][0],s=t[1][0],l=t[0][1],u=t[1][1],c=e.l,f=e.r,d=c.x,p=c.y,h=f.x,m=f.y,v=(d+h)/2,g=(p+m)/2;if(m===p){if(v<o||v>=s)return;if(d>h){if(i){if(i.y>=u)return}else i={x:v,y:l};n={x:v,y:u}}else{if(i){if(i.y<l)return}else i={x:v,y:u};n={x:v,y:l}}}else if(a=g-(r=(d-h)/(m-p))*v,r<-1||r>1)if(d>h){if(i){if(i.y>=u)return}else i={x:(l-a)/r,y:l};n={x:(u-a)/r,y:u}}else{if(i){if(i.y<l)return}else i={x:(u-a)/r,y:u};n={x:(l-a)/r,y:l}}else if(p<m){if(i){if(i.x>=s)return}else i={x:o,y:r*o+a};n={x:s,y:r*s+a}}else{if(i){if(i.x<o)return}else i={x:s,y:r*s+a};n={x:o,y:r*o+a}}return e.a=i,e.b=n,!0}function Ca(e,t){this.l=e,this.r=t,this.a=this.b=null}function Ea(e,t,n,r){var a=new Ca(e,t);return sa.push(a),n&&Aa(a,e,t,n),r&&Aa(a,t,e,r),la[e.i].edges.push(new Sa(a,e,t)),la[t.i].edges.push(new Sa(a,t,e)),a}function Ma(e,t,n){var r=new Ca(e,null);return r.a=t,r.b=n,sa.push(r),r}function Aa(e,t,n,r){e.a||e.b?e.l===n?e.b=r:e.a=r:(e.a=r,e.l=t,e.r=n)}function Sa(e,t,n){var r=e.a,a=e.b;this.edge=e,this.site=t,this.angle=n?Math.atan2(n.y-t.y,n.x-t.x):e.l===t?Math.atan2(a.x-r.x,r.y-a.y):Math.atan2(r.x-a.x,a.y-r.y)}function Oa(){this._=null}function Pa(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function Ra(e,t){var n=t,r=t.R,a=n.U;a?a.L===n?a.L=r:a.R=r:e._=r,r.U=a,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function La(e,t){var n=t,r=t.L,a=n.U;a?a.L===n?a.L=r:a.R=r:e._=r,r.U=a,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Da(e){for(;e.L;)e=e.L;return e}function Ia(e,t){var n,r,a,i=e.sort(za).pop();for(sa=[],la=new Array(e.length),ua=new Oa,fa=new Oa;;)if(a=ca,i&&(!a||i.y<a.y||i.y===a.y&&i.x<a.x))i.x===n&&i.y===r||(la[i.i]=new xa(i),ga(i),n=i.x,r=i.y),i=e.pop();else{if(!a)break;va(a.arc)}t&&(function(e){for(var t,n=sa,r=nr(e[0][0],e[0][1],e[1][0],e[1][1]),a=n.length;a--;)(!ka(t=n[a],e)||!r(t)||y(t.a.x-t.b.x)<Te&&y(t.a.y-t.b.y)<Te)&&(t.a=t.b=null,n.splice(a,1))}(t),function(e){for(var t,n,r,a,i,o,s,l,u,c,f=e[0][0],d=e[1][0],p=e[0][1],h=e[1][1],m=la,v=m.length;v--;)if((i=m[v])&&i.prepare())for(s=i.edges,l=s.length,o=0;o<l;)c=s[o].end(),r=c.x,a=c.y,u=s[++o%l].start(),t=u.x,n=u.y,(y(r-t)>Te||y(a-n)>Te)&&(s.splice(o,0,new Sa(Ma(i.site,c,y(r-f)<Te&&h-a>Te?{x:f,y:y(t-f)<Te?n:h}:y(a-h)<Te&&d-r>Te?{x:y(n-h)<Te?t:d,y:h}:y(r-d)<Te&&a-p>Te?{x:d,y:y(t-d)<Te?n:p}:y(a-p)<Te&&r-f>Te?{x:y(n-p)<Te?t:f,y:p}:null),i.site,null)),++l)}(t));var o={cells:la,edges:sa};return ua=fa=sa=la=null,o}function za(e,t){return t.y-e.y||t.x-e.x}xa.prototype.prepare=function(){for(var e,t=this.edges,n=t.length;n--;)(e=t[n].edge).b&&e.a||t.splice(n,1);return t.sort(_a),t.length},Sa.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Oa.prototype={insert:function(e,t){var n,r,a;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=Da(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)r=n.U,n===r.L?(a=r.R)&&a.C?(n.C=a.C=!1,r.C=!0,e=r):(e===n.R&&(Ra(this,n),n=(e=n).U),n.C=!1,r.C=!0,La(this,r)):(a=r.L)&&a.C?(n.C=a.C=!1,r.C=!0,e=r):(e===n.L&&(La(this,n),n=(e=n).U),n.C=!1,r.C=!0,Ra(this,r)),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,r,a=e.U,i=e.L,o=e.R;if(n=i?o?Da(o):i:o,a?a.L===e?a.L=n:a.R=n:this._=n,i&&o?(r=n.C,n.C=e.C,n.L=i,i.U=n,n!==o?(a=n.U,n.U=e.U,e=n.R,a.L=e,n.R=o,o.U=n):(n.U=a,a=n,e=n.R)):(r=e.C,e=n),e&&(e.U=a),!r)if(e&&e.C)e.C=!1;else{do{if(e===this._)break;if(e===a.L){if((t=a.R).C&&(t.C=!1,a.C=!0,Ra(this,a),t=a.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,La(this,t),t=a.R),t.C=a.C,a.C=t.R.C=!1,Ra(this,a),e=this._;break}}else if((t=a.L).C&&(t.C=!1,a.C=!0,La(this,a),t=a.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,Ra(this,t),t=a.L),t.C=a.C,a.C=t.L.C=!1,La(this,a),e=this._;break}t.C=!0,e=a,a=a.U}while(!e.C);e&&(e.C=!1)}}},e.geom.voronoi=function(e){var t=Qr,n=ea,r=t,a=n,i=ja;if(e)return o(e);function o(e){var t=new Array(e.length),n=i[0][0],r=i[0][1],a=i[1][0],o=i[1][1];return Ia(s(e),i).cells.forEach(function(i,s){var l=i.edges,u=i.site,c=t[s]=l.length?l.map(function(e){var t=e.start();return[t.x,t.y]}):u.x>=n&&u.x<=a&&u.y>=r&&u.y<=o?[[n,o],[a,o],[a,r],[n,r]]:[];c.point=e[s]}),t}function s(e){return e.map(function(e,t){return{x:Math.round(r(e,t)/Te)*Te,y:Math.round(a(e,t)/Te)*Te,i:t}})}return o.links=function(e){return Ia(s(e)).edges.filter(function(e){return e.l&&e.r}).map(function(t){return{source:e[t.l.i],target:e[t.r.i]}})},o.triangles=function(e){var t=[];return Ia(s(e)).cells.forEach(function(n,r){for(var a,i=n.site,o=n.edges.sort(_a),s=-1,l=o.length,u=o[l-1].edge,c=u.l===i?u.r:u.l;++s<l;)a=c,u=o[s].edge,c=u.l===i?u.r:u.l,r<a.i&&r<c.i&&Na(i,a,c)<0&&t.push([e[r],e[a.i],e[c.i]])}),t},o.x=function(e){return arguments.length?(r=vt(t=e),o):t},o.y=function(e){return arguments.length?(a=vt(n=e),o):n},o.clipExtent=function(e){return arguments.length?(i=null==e?ja:e,o):i===ja?null:i},o.size=function(e){return arguments.length?o.clipExtent(e&&[[0,0],e]):i===ja?null:i&&i[1]},o};var ja=[[-1e6,-1e6],[1e6,1e6]];function Na(e,t,n){return(e.x-n.x)*(t.y-e.y)-(e.x-t.x)*(n.y-e.y)}function Fa(e){return e.x}function Ba(e){return e.y}function Va(t,n){t=e.rgb(t),n=e.rgb(n);var r=t.r,a=t.g,i=t.b,o=n.r-r,s=n.g-a,l=n.b-i;return function(e){return"#"+ut(Math.round(r+o*e))+ut(Math.round(a+s*e))+ut(Math.round(i+l*e))}}function Ua(e,t){var n,r={},a={};for(n in e)n in t?r[n]=Ya(e[n],t[n]):a[n]=e[n];for(n in t)n in e||(a[n]=t[n]);return function(e){for(n in r)a[n]=r[n](e);return a}}function Ga(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Ha(e,t){var n,r,a,i=Wa.lastIndex=qa.lastIndex=0,o=-1,s=[],l=[];for(e+="",t+="";(n=Wa.exec(e))&&(r=qa.exec(t));)(a=r.index)>i&&(a=t.slice(i,a),s[o]?s[o]+=a:s[++o]=a),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,l.push({i:o,x:Ga(n,r)})),i=qa.lastIndex;return i<t.length&&(a=t.slice(i),s[o]?s[o]+=a:s[++o]=a),s.length<2?l[0]?(t=l[0].x,function(e){return t(e)+""}):function(){return t}:(t=l.length,function(e){for(var n,r=0;r<t;++r)s[(n=l[r]).i]=n.x(e);return s.join("")})}e.geom.delaunay=function(t){return e.geom.voronoi().triangles(t)},e.geom.quadtree=function(e,t,n,r,a){var i,o=Qr,s=ea;if(i=arguments.length)return o=Fa,s=Ba,3===i&&(a=n,r=t,n=t=0),l(e);function l(e){var l,u,c,f,d,p,h,m,v,g=vt(o),b=vt(s);if(null!=t)p=t,h=n,m=r,v=a;else if(m=v=-(p=h=1/0),u=[],c=[],d=e.length,i)for(f=0;f<d;++f)(l=e[f]).x<p&&(p=l.x),l.y<h&&(h=l.y),l.x>m&&(m=l.x),l.y>v&&(v=l.y),u.push(l.x),c.push(l.y);else for(f=0;f<d;++f){var x=+g(l=e[f],f),_=+b(l,f);x<p&&(p=x),_<h&&(h=_),x>m&&(m=x),_>v&&(v=_),u.push(x),c.push(_)}var w=m-p,T=v-h;function k(e,t,n,r,a,i,o,s){if(!isNaN(n)&&!isNaN(r))if(e.leaf){var l=e.x,u=e.y;if(null!=l)if(y(l-n)+y(u-r)<.01)C(e,t,n,r,a,i,o,s);else{var c=e.point;e.x=e.y=e.point=null,C(e,c,l,u,a,i,o,s),C(e,t,n,r,a,i,o,s)}else e.x=n,e.y=r,e.point=t}else C(e,t,n,r,a,i,o,s)}function C(e,t,n,r,a,i,o,s){var l=.5*(a+o),u=.5*(i+s),c=n>=l,f=r>=u,d=f<<1|c;e.leaf=!1,e=e.nodes[d]||(e.nodes[d]={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(e){k(E,e,+g(e,++d),+b(e,d),p,h,m,v)},visit:function(e){!function e(t,n,r,a,i,o){if(!t(n,r,a,i,o)){var s=.5*(r+i),l=.5*(a+o),u=n.nodes;u[0]&&e(t,u[0],r,a,s,l),u[1]&&e(t,u[1],s,a,i,l),u[2]&&e(t,u[2],r,l,s,o),u[3]&&e(t,u[3],s,l,i,o)}}(e,E,p,h,m,v)},find:function(e){return function(e,t,n,r,a,i,o){var s,l=1/0;return function e(u,c,f,d,p){if(!(c>i||f>o||d<r||p<a)){if(h=u.point){var h,m=t-u.x,v=n-u.y,g=m*m+v*v;if(g<l){var y=Math.sqrt(l=g);r=t-y,a=n-y,i=t+y,o=n+y,s=h}}for(var b=u.nodes,x=.5*(c+d),_=.5*(f+p),w=(n>=_)<<1|t>=x,T=w+4;w<T;++w)if(u=b[3&w])switch(3&w){case 0:e(u,c,f,x,_);break;case 1:e(u,x,f,d,_);break;case 2:e(u,c,_,x,p);break;case 3:e(u,x,_,d,p)}}}(e,r,a,i,o),s}(E,e[0],e[1],p,h,m,v)}}),c?a=l:o=l,f?i=u:s=u,k(e,t,n,r,a,i,o,s)}w>T?v=h+w:m=p+T;var E={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(e){k(E,e,+g(e,++f),+b(e,f),p,h,m,v)},visit:function(e){!function e(t,n,r,a,i,o){if(!t(n,r,a,i,o)){var s=.5*(r+i),l=.5*(a+o),u=n.nodes;u[0]&&e(t,u[0],r,a,s,l),u[1]&&e(t,u[1],s,a,i,l),u[2]&&e(t,u[2],r,l,s,o),u[3]&&e(t,u[3],s,l,i,o)}}(e,E,p,h,m,v)},find:function(e){return function(e,t,n,r,a,i,o){var s,l=1/0;return function e(u,c,f,d,p){if(!(c>i||f>o||d<r||p<a)){if(h=u.point){var h,m=t-u.x,v=n-u.y,g=m*m+v*v;if(g<l){var y=Math.sqrt(l=g);r=t-y,a=n-y,i=t+y,o=n+y,s=h}}for(var b=u.nodes,x=.5*(c+d),_=.5*(f+p),w=(n>=_)<<1|t>=x,T=w+4;w<T;++w)if(u=b[3&w])switch(3&w){case 0:e(u,c,f,x,_);break;case 1:e(u,x,f,d,_);break;case 2:e(u,c,_,x,p);break;case 3:e(u,x,_,d,p)}}}(e,r,a,i,o),s}(E,e[0],e[1],p,h,m,v)}};if(f=-1,null==t){for(;++f<d;)k(E,e[f],u[f],c[f],p,h,m,v);--f}else e.forEach(E.add);return u=c=e=l=null,E}return l.x=function(e){return arguments.length?(o=e,l):o},l.y=function(e){return arguments.length?(s=e,l):s},l.extent=function(e){return arguments.length?(null==e?t=n=r=a=null:(t=+e[0][0],n=+e[0][1],r=+e[1][0],a=+e[1][1]),l):null==t?null:[[t,n],[r,a]]},l.size=function(e){return arguments.length?(null==e?t=n=r=a=null:(t=n=0,r=+e[0],a=+e[1]),l):null==t?null:[r-t,a-n]},l},e.interpolateRgb=Va,e.interpolateObject=Ua,e.interpolateNumber=Ga,e.interpolateString=Ha;var Wa=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,qa=new RegExp(Wa.source,"g");function Ya(t,n){for(var r,a=e.interpolators.length;--a>=0&&!(r=e.interpolators[a](t,n)););return r}function Xa(e,t){var n,r=[],a=[],i=e.length,o=t.length,s=Math.min(e.length,t.length);for(n=0;n<s;++n)r.push(Ya(e[n],t[n]));for(;n<i;++n)a[n]=e[n];for(;n<o;++n)a[n]=t[n];return function(e){for(n=0;n<s;++n)a[n]=r[n](e);return a}}e.interpolate=Ya,e.interpolators=[function(e,t){var n=typeof t;return("string"===n?mt.has(t.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(t)?Va:Ha:t instanceof Ve?Va:Array.isArray(t)?Xa:"object"===n&&isNaN(t)?Ua:Ga)(e,t)}],e.interpolateArray=Xa;var Za=function(){return P},$a=e.map({linear:Za,poly:function(e){return function(t){return Math.pow(t,e)}},quad:function(){return ei},cubic:function(){return ti},sin:function(){return ri},exp:function(){return ai},circle:function(){return ii},elastic:function(e,t){var n;return arguments.length<2&&(t=.45),arguments.length?n=t/Ee*Math.asin(1/e):(e=1,n=t/4),function(r){return 1+e*Math.pow(2,-10*r)*Math.sin((r-n)*Ee/t)}},back:function(e){return e||(e=1.70158),function(t){return t*t*((e+1)*t-e)}},bounce:function(){return oi}}),Ka=e.map({in:P,out:Ja,"in-out":Qa,"out-in":function(e){return Qa(Ja(e))}});function Ja(e){return function(t){return 1-e(1-t)}}function Qa(e){return function(t){return.5*(t<.5?e(2*t):2-e(2-2*t))}}function ei(e){return e*e}function ti(e){return e*e*e}function ni(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)}function ri(e){return 1-Math.cos(e*Ae)}function ai(e){return Math.pow(2,10*(e-1))}function ii(e){return 1-Math.sqrt(1-e*e)}function oi(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function si(e,t){return t-=e,function(n){return Math.round(e+t*n)}}function li(e){var t=[e.a,e.b],n=[e.c,e.d],r=ci(t),a=ui(t,n),i=ci(function(e,t,n){return e[0]+=n*t[0],e[1]+=n*t[1],e}(n,t,-a))||0;t[0]*n[1]<n[0]*t[1]&&(t[0]*=-1,t[1]*=-1,r*=-1,a*=-1),this.rotate=(r?Math.atan2(t[1],t[0]):Math.atan2(-n[0],n[1]))*Oe,this.translate=[e.e,e.f],this.scale=[r,i],this.skew=i?Math.atan2(a,i)*Oe:0}function ui(e,t){return e[0]*t[0]+e[1]*t[1]}function ci(e){var t=Math.sqrt(ui(e,e));return t&&(e[0]/=t,e[1]/=t),t}e.ease=function(e){var t=e.indexOf("-"),r=t>=0?e.slice(0,t):e,a=t>=0?e.slice(t+1):"in";return r=$a.get(r)||Za,function(e){return function(t){return t<=0?0:t>=1?1:e(t)}}((a=Ka.get(a)||P)(r.apply(null,n.call(arguments,1))))},e.interpolateHcl=function(t,n){t=e.hcl(t),n=e.hcl(n);var r=t.h,a=t.c,i=t.l,o=n.h-r,s=n.c-a,l=n.l-i;return isNaN(s)&&(s=0,a=isNaN(a)?n.c:a),isNaN(o)?(o=0,r=isNaN(r)?n.h:r):o>180?o-=360:o<-180&&(o+=360),function(e){return Ye(r+o*e,a+s*e,i+l*e)+""}},e.interpolateHsl=function(t,n){t=e.hsl(t),n=e.hsl(n);var r=t.h,a=t.s,i=t.l,o=n.h-r,s=n.s-a,l=n.l-i;return isNaN(s)&&(s=0,a=isNaN(a)?n.s:a),isNaN(o)?(o=0,r=isNaN(r)?n.h:r):o>180?o-=360:o<-180&&(o+=360),function(e){return He(r+o*e,a+s*e,i+l*e)+""}},e.interpolateLab=function(t,n){t=e.lab(t),n=e.lab(n);var r=t.l,a=t.a,i=t.b,o=n.l-r,s=n.a-a,l=n.b-i;return function(e){return et(r+o*e,a+s*e,i+l*e)+""}},e.interpolateRound=si,e.transform=function(t){var n=a.createElementNS(e.ns.prefix.svg,"g");return(e.transform=function(e){if(null!=e){n.setAttribute("transform",e);var t=n.transform.baseVal.consolidate()}return new li(t?t.matrix:fi)})(t)},li.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var fi={a:1,b:0,c:0,d:1,e:0,f:0};function di(e){return e.length?e.pop()+",":""}function pi(t,n){var r=[],a=[];return t=e.transform(t),n=e.transform(n),function(e,t,n,r){if(e[0]!==t[0]||e[1]!==t[1]){var a=n.push("translate(",null,",",null,")");r.push({i:a-4,x:Ga(e[0],t[0])},{i:a-2,x:Ga(e[1],t[1])})}else(t[0]||t[1])&&n.push("translate("+t+")")}(t.translate,n.translate,r,a),function(e,t,n,r){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),r.push({i:n.push(di(n)+"rotate(",null,")")-2,x:Ga(e,t)})):t&&n.push(di(n)+"rotate("+t+")")}(t.rotate,n.rotate,r,a),function(e,t,n,r){e!==t?r.push({i:n.push(di(n)+"skewX(",null,")")-2,x:Ga(e,t)}):t&&n.push(di(n)+"skewX("+t+")")}(t.skew,n.skew,r,a),function(e,t,n,r){if(e[0]!==t[0]||e[1]!==t[1]){var a=n.push(di(n)+"scale(",null,",",null,")");r.push({i:a-4,x:Ga(e[0],t[0])},{i:a-2,x:Ga(e[1],t[1])})}else 1===t[0]&&1===t[1]||n.push(di(n)+"scale("+t+")")}(t.scale,n.scale,r,a),t=n=null,function(e){for(var t,n=-1,i=a.length;++n<i;)r[(t=a[n]).i]=t.x(e);return r.join("")}}function hi(e,t){return t=(t-=e=+e)||1/t,function(n){return(n-e)/t}}function mi(e,t){return t=(t-=e=+e)||1/t,function(n){return Math.max(0,Math.min(1,(n-e)/t))}}function vi(e){for(var t=e.source,n=e.target,r=function(e,t){if(e===t)return e;for(var n=gi(e),r=gi(t),a=n.pop(),i=r.pop(),o=null;a===i;)o=a,a=n.pop(),i=r.pop();return o}(t,n),a=[t];t!==r;)t=t.parent,a.push(t);for(var i=a.length;n!==r;)a.splice(i,0,n),n=n.parent;return a}function gi(e){for(var t=[],n=e.parent;null!=n;)t.push(e),e=n,n=n.parent;return t.push(e),t}function yi(e){e.fixed|=2}function bi(e){e.fixed&=-7}function xi(e){e.fixed|=4,e.px=e.x,e.py=e.y}function _i(e){e.fixed&=-5}e.interpolateTransform=pi,e.layout={},e.layout.bundle=function(){return function(e){for(var t=[],n=-1,r=e.length;++n<r;)t.push(vi(e[n]));return t}},e.layout.chord=function(){var t,n,r,a,i,o,s,l={},u=0;function c(){var l,c,d,p,h,m={},v=[],g=e.range(a),y=[];for(t=[],n=[],l=0,p=-1;++p<a;){for(c=0,h=-1;++h<a;)c+=r[p][h];v.push(c),y.push(e.range(a)),l+=c}for(i&&g.sort(function(e,t){return i(v[e],v[t])}),o&&y.forEach(function(e,t){e.sort(function(e,n){return o(r[t][e],r[t][n])})}),l=(Ee-u*a)/l,c=0,p=-1;++p<a;){for(d=c,h=-1;++h<a;){var b=g[p],x=y[b][h],_=r[b][x],w=c,T=c+=_*l;m[b+"-"+x]={index:b,subindex:x,startAngle:w,endAngle:T,value:_}}n[b]={index:b,startAngle:d,endAngle:c,value:v[b]},c+=u}for(p=-1;++p<a;)for(h=p-1;++h<a;){var k=m[p+"-"+h],C=m[h+"-"+p];(k.value||C.value)&&t.push(k.value<C.value?{source:C,target:k}:{source:k,target:C})}s&&f()}function f(){t.sort(function(e,t){return s((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)})}return l.matrix=function(e){return arguments.length?(a=(r=e)&&r.length,t=n=null,l):r},l.padding=function(e){return arguments.length?(u=e,t=n=null,l):u},l.sortGroups=function(e){return arguments.length?(i=e,t=n=null,l):i},l.sortSubgroups=function(e){return arguments.length?(o=e,t=null,l):o},l.sortChords=function(e){return arguments.length?(s=e,t&&f(),l):s},l.chords=function(){return t||c(),t},l.groups=function(){return n||c(),n},l},e.layout.force=function(){var t,n,r,a,i,o,s={},l=e.dispatch("start","tick","end"),u=[1,1],c=.9,f=wi,d=Ti,p=-30,h=ki,m=.1,v=.64,g=[],y=[];function b(e){return function(t,n,r,a){if(t.point!==e){var i=t.cx-e.x,o=t.cy-e.y,s=a-n,l=i*i+o*o;if(s*s/v<l){if(l<h){var u=t.charge/l;e.px-=i*u,e.py-=o*u}return!0}if(t.point&&l&&l<h){var u=t.pointCharge/l;e.px-=i*u,e.py-=o*u}}return!t.charge}}function x(t){t.px=e.event.x,t.py=e.event.y,s.resume()}return s.tick=function(){if((r*=.99)<.005)return t=null,l.end({type:"end",alpha:r=0}),!0;var n,s,f,d,h,v,x,_,w,T=g.length,k=y.length;for(s=0;s<k;++s)f=y[s],d=f.source,h=f.target,_=h.x-d.x,w=h.y-d.y,(v=_*_+w*w)&&(v=r*i[s]*((v=Math.sqrt(v))-a[s])/v,_*=v,w*=v,h.x-=_*(x=d.weight+h.weight?d.weight/(d.weight+h.weight):.5),h.y-=w*x,d.x+=_*(x=1-x),d.y+=w*x);if((x=r*m)&&(_=u[0]/2,w=u[1]/2,s=-1,x))for(;++s<T;)(f=g[s]).x+=(_-f.x)*x,f.y+=(w-f.y)*x;if(p)for(function e(t,n,r){var a=0,i=0;if(t.charge=0,!t.leaf)for(var o,s=t.nodes,l=s.length,u=-1;++u<l;)null!=(o=s[u])&&(e(o,n,r),t.charge+=o.charge,a+=o.charge*o.cx,i+=o.charge*o.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var c=n*r[t.point.index];t.charge+=t.pointCharge=c,a+=c*t.point.x,i+=c*t.point.y}t.cx=a/t.charge,t.cy=i/t.charge}(n=e.geom.quadtree(g),r,o),s=-1;++s<T;)(f=g[s]).fixed||n.visit(b(f));for(s=-1;++s<T;)(f=g[s]).fixed?(f.x=f.px,f.y=f.py):(f.x-=(f.px-(f.px=f.x))*c,f.y-=(f.py-(f.py=f.y))*c);l.tick({type:"tick",alpha:r})},s.nodes=function(e){return arguments.length?(g=e,s):g},s.links=function(e){return arguments.length?(y=e,s):y},s.size=function(e){return arguments.length?(u=e,s):u},s.linkDistance=function(e){return arguments.length?(f="function"==typeof e?e:+e,s):f},s.distance=s.linkDistance,s.linkStrength=function(e){return arguments.length?(d="function"==typeof e?e:+e,s):d},s.friction=function(e){return arguments.length?(c=+e,s):c},s.charge=function(e){return arguments.length?(p="function"==typeof e?e:+e,s):p},s.chargeDistance=function(e){return arguments.length?(h=e*e,s):Math.sqrt(h)},s.gravity=function(e){return arguments.length?(m=+e,s):m},s.theta=function(e){return arguments.length?(v=e*e,s):Math.sqrt(v)},s.alpha=function(e){return arguments.length?(e=+e,r?e>0?r=e:(t.c=null,t.t=NaN,t=null,l.end({type:"end",alpha:r=0})):e>0&&(l.start({type:"start",alpha:r=e}),t=kt(s.tick)),s):r},s.start=function(){var e,t,n,r=g.length,l=y.length,c=u[0],h=u[1];for(e=0;e<r;++e)(n=g[e]).index=e,n.weight=0;for(e=0;e<l;++e)"number"==typeof(n=y[e]).source&&(n.source=g[n.source]),"number"==typeof n.target&&(n.target=g[n.target]),++n.source.weight,++n.target.weight;for(e=0;e<r;++e)n=g[e],isNaN(n.x)&&(n.x=m("x",c)),isNaN(n.y)&&(n.y=m("y",h)),isNaN(n.px)&&(n.px=n.x),isNaN(n.py)&&(n.py=n.y);if(a=[],"function"==typeof f)for(e=0;e<l;++e)a[e]=+f.call(this,y[e],e);else for(e=0;e<l;++e)a[e]=f;if(i=[],"function"==typeof d)for(e=0;e<l;++e)i[e]=+d.call(this,y[e],e);else for(e=0;e<l;++e)i[e]=d;if(o=[],"function"==typeof p)for(e=0;e<r;++e)o[e]=+p.call(this,g[e],e);else for(e=0;e<r;++e)o[e]=p;function m(n,a){if(!t){for(t=new Array(r),u=0;u<r;++u)t[u]=[];for(u=0;u<l;++u){var i=y[u];t[i.source.index].push(i.target),t[i.target.index].push(i.source)}}for(var o,s=t[e],u=-1,c=s.length;++u<c;)if(!isNaN(o=s[u][n]))return o;return Math.random()*a}return s.resume()},s.resume=function(){return s.alpha(.1)},s.stop=function(){return s.alpha(0)},s.drag=function(){if(n||(n=e.behavior.drag().origin(P).on("dragstart.force",yi).on("drag.force",x).on("dragend.force",bi)),!arguments.length)return n;this.on("mouseover.force",xi).on("mouseout.force",_i).call(n)},e.rebind(s,l,"on")};var wi=20,Ti=1,ki=1/0;function Ci(t,n){return e.rebind(t,n,"sort","children","value"),t.nodes=t,t.links=Pi,t}function Ei(e,t){for(var n=[e];null!=(e=n.pop());)if(t(e),(a=e.children)&&(r=a.length))for(var r,a;--r>=0;)n.push(a[r])}function Mi(e,t){for(var n=[e],r=[];null!=(e=n.pop());)if(r.push(e),(i=e.children)&&(a=i.length))for(var a,i,o=-1;++o<a;)n.push(i[o]);for(;null!=(e=r.pop());)t(e)}function Ai(e){return e.children}function Si(e){return e.value}function Oi(e,t){return t.value-e.value}function Pi(t){return e.merge(t.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}e.layout.hierarchy=function(){var e=Oi,t=Ai,n=Si;function r(a){var i,o=[a],s=[];for(a.depth=0;null!=(i=o.pop());)if(s.push(i),(u=t.call(r,i,i.depth))&&(l=u.length)){for(var l,u,c;--l>=0;)o.push(c=u[l]),c.parent=i,c.depth=i.depth+1;n&&(i.value=0),i.children=u}else n&&(i.value=+n.call(r,i,i.depth)||0),delete i.children;return Mi(a,function(t){var r,a;e&&(r=t.children)&&r.sort(e),n&&(a=t.parent)&&(a.value+=t.value)}),s}return r.sort=function(t){return arguments.length?(e=t,r):e},r.children=function(e){return arguments.length?(t=e,r):t},r.value=function(e){return arguments.length?(n=e,r):n},r.revalue=function(e){return n&&(Ei(e,function(e){e.children&&(e.value=0)}),Mi(e,function(e){var t;e.children||(e.value=+n.call(r,e,e.depth)||0),(t=e.parent)&&(t.value+=e.value)})),e},r},e.layout.partition=function(){var t=e.layout.hierarchy(),n=[1,1];function r(e,r){var a=t.call(this,e,r);return function e(t,n,r,a){var i=t.children;if(t.x=n,t.y=t.depth*a,t.dx=r,t.dy=a,i&&(o=i.length)){var o,s,l,u=-1;for(r=t.value?r/t.value:0;++u<o;)e(s=i[u],n,l=s.value*r,a),n+=l}}(a[0],0,n[0],n[1]/function e(t){var n=t.children,r=0;if(n&&(a=n.length))for(var a,i=-1;++i<a;)r=Math.max(r,e(n[i]));return 1+r}(a[0])),a}return r.size=function(e){return arguments.length?(n=e,r):n},Ci(r,t)},e.layout.pie=function(){var t=Number,n=Ri,r=0,a=Ee,i=0;function o(s){var l,u=s.length,c=s.map(function(e,n){return+t.call(o,e,n)}),f=+("function"==typeof r?r.apply(this,arguments):r),d=("function"==typeof a?a.apply(this,arguments):a)-f,p=Math.min(Math.abs(d)/u,+("function"==typeof i?i.apply(this,arguments):i)),h=p*(d<0?-1:1),m=e.sum(c),v=m?(d-u*h)/m:0,g=e.range(u),y=[];return null!=n&&g.sort(n===Ri?function(e,t){return c[t]-c[e]}:function(e,t){return n(s[e],s[t])}),g.forEach(function(e){y[e]={data:s[e],value:l=c[e],startAngle:f,endAngle:f+=l*v+h,padAngle:p}}),y}return o.value=function(e){return arguments.length?(t=e,o):t},o.sort=function(e){return arguments.length?(n=e,o):n},o.startAngle=function(e){return arguments.length?(r=e,o):r},o.endAngle=function(e){return arguments.length?(a=e,o):a},o.padAngle=function(e){return arguments.length?(i=e,o):i},o};var Ri={};function Li(e){return e.x}function Di(e){return e.y}function Ii(e,t,n){e.y0=t,e.y=n}e.layout.stack=function(){var t=P,n=Ni,r=Fi,a=Ii,i=Li,o=Di;function s(l,u){if(!(p=l.length))return l;var c=l.map(function(e,n){return t.call(s,e,n)}),f=c.map(function(e){return e.map(function(e,t){return[i.call(s,e,t),o.call(s,e,t)]})}),d=n.call(s,f,u);c=e.permute(c,d),f=e.permute(f,d);var p,h,m,v,g=r.call(s,f,u),y=c[0].length;for(m=0;m<y;++m)for(a.call(s,c[0][m],v=g[m],f[0][m][1]),h=1;h<p;++h)a.call(s,c[h][m],v+=f[h-1][m][1],f[h][m][1]);return l}return s.values=function(e){return arguments.length?(t=e,s):t},s.order=function(e){return arguments.length?(n="function"==typeof e?e:zi.get(e)||Ni,s):n},s.offset=function(e){return arguments.length?(r="function"==typeof e?e:ji.get(e)||Fi,s):r},s.x=function(e){return arguments.length?(i=e,s):i},s.y=function(e){return arguments.length?(o=e,s):o},s.out=function(e){return arguments.length?(a=e,s):a},s};var zi=e.map({"inside-out":function(t){var n,r,a=t.length,i=t.map(Bi),o=t.map(Vi),s=e.range(a).sort(function(e,t){return i[e]-i[t]}),l=0,u=0,c=[],f=[];for(n=0;n<a;++n)r=s[n],l<u?(l+=o[r],c.push(r)):(u+=o[r],f.push(r));return f.reverse().concat(c)},reverse:function(t){return e.range(t.length).reverse()},default:Ni}),ji=e.map({silhouette:function(e){var t,n,r,a=e.length,i=e[0].length,o=[],s=0,l=[];for(n=0;n<i;++n){for(t=0,r=0;t<a;t++)r+=e[t][n][1];r>s&&(s=r),o.push(r)}for(n=0;n<i;++n)l[n]=(s-o[n])/2;return l},wiggle:function(e){var t,n,r,a,i,o,s,l,u,c=e.length,f=e[0],d=f.length,p=[];for(p[0]=l=u=0,n=1;n<d;++n){for(t=0,a=0;t<c;++t)a+=e[t][n][1];for(t=0,i=0,s=f[n][0]-f[n-1][0];t<c;++t){for(r=0,o=(e[t][n][1]-e[t][n-1][1])/(2*s);r<t;++r)o+=(e[r][n][1]-e[r][n-1][1])/s;i+=o*e[t][n][1]}p[n]=l-=a?i/a*s:0,l<u&&(u=l)}for(n=0;n<d;++n)p[n]-=u;return p},expand:function(e){var t,n,r,a=e.length,i=e[0].length,o=1/a,s=[];for(n=0;n<i;++n){for(t=0,r=0;t<a;t++)r+=e[t][n][1];if(r)for(t=0;t<a;t++)e[t][n][1]/=r;else for(t=0;t<a;t++)e[t][n][1]=o}for(n=0;n<i;++n)s[n]=0;return s},zero:Fi});function Ni(t){return e.range(t.length)}function Fi(e){for(var t=-1,n=e[0].length,r=[];++t<n;)r[t]=0;return r}function Bi(e){for(var t,n=1,r=0,a=e[0][1],i=e.length;n<i;++n)(t=e[n][1])>a&&(r=n,a=t);return r}function Vi(e){return e.reduce(Ui,0)}function Ui(e,t){return e+t[1]}function Gi(e,t){return Hi(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function Hi(e,t){for(var n=-1,r=+e[0],a=(e[1]-r)/t,i=[];++n<=t;)i[n]=a*n+r;return i}function Wi(t){return[e.min(t),e.max(t)]}function qi(e,t){return e.value-t.value}function Yi(e,t){var n=e._pack_next;e._pack_next=t,t._pack_prev=e,t._pack_next=n,n._pack_prev=t}function Xi(e,t){e._pack_next=t,t._pack_prev=e}function Zi(e,t){var n=t.x-e.x,r=t.y-e.y,a=e.r+t.r;return.999*a*a>n*n+r*r}function $i(e){if((t=e.children)&&(l=t.length)){var t,n,r,a,i,o,s,l,u=1/0,c=-1/0,f=1/0,d=-1/0;if(t.forEach(Ki),(n=t[0]).x=-n.r,n.y=0,b(n),l>1&&((r=t[1]).x=r.r,r.y=0,b(r),l>2))for(a=t[2],Qi(n,r,a),b(a),Yi(n,a),n._pack_prev=a,Yi(a,r),r=n._pack_next,i=3;i<l;i++){Qi(n,r,a=t[i]);var p=0,h=1,m=1;for(o=r._pack_next;o!==r;o=o._pack_next,h++)if(Zi(o,a)){p=1;break}if(1==p)for(s=n._pack_prev;s!==o._pack_prev&&!Zi(s,a);s=s._pack_prev,m++);p?(h<m||h==m&&r.r<n.r?Xi(n,r=o):Xi(n=s,r),i--):(Yi(n,a),r=a,b(a))}var v=(u+c)/2,g=(f+d)/2,y=0;for(i=0;i<l;i++)(a=t[i]).x-=v,a.y-=g,y=Math.max(y,a.r+Math.sqrt(a.x*a.x+a.y*a.y));e.r=y,t.forEach(Ji)}function b(e){u=Math.min(e.x-e.r,u),c=Math.max(e.x+e.r,c),f=Math.min(e.y-e.r,f),d=Math.max(e.y+e.r,d)}}function Ki(e){e._pack_next=e._pack_prev=e}function Ji(e){delete e._pack_next,delete e._pack_prev}function Qi(e,t,n){var r=e.r+n.r,a=t.x-e.x,i=t.y-e.y;if(r&&(a||i)){var o=t.r+n.r,s=a*a+i*i,l=.5+((r*=r)-(o*=o))/(2*s),u=Math.sqrt(Math.max(0,2*o*(r+s)-(r-=s)*r-o*o))/(2*s);n.x=e.x+l*a+u*i,n.y=e.y+l*i-u*a}else n.x=e.x+r,n.y=e.y}function eo(e,t){return e.parent==t.parent?1:2}function to(e){var t=e.children;return t.length?t[0]:e.t}function no(e){var t,n=e.children;return(t=n.length)?n[t-1]:e.t}function ro(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function ao(e,t,n){return e.a.parent===t.parent?e.a:n}function io(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function oo(e,t){var n=e.x+t[3],r=e.y+t[0],a=e.dx-t[1]-t[3],i=e.dy-t[0]-t[2];return a<0&&(n+=a/2,a=0),i<0&&(r+=i/2,i=0),{x:n,y:r,dx:a,dy:i}}function so(e){var t=e[0],n=e[e.length-1];return t<n?[t,n]:[n,t]}function lo(e){return e.rangeExtent?e.rangeExtent():so(e.range())}function uo(e,t,n,r){var a=n(e[0],e[1]),i=r(t[0],t[1]);return function(e){return i(a(e))}}function co(e,t){var n,r=0,a=e.length-1,i=e[r],o=e[a];return o<i&&(n=r,r=a,a=n,n=i,i=o,o=n),e[r]=t.floor(i),e[a]=t.ceil(o),e}function fo(e){return e?{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}:po}e.layout.histogram=function(){var t=!0,n=Number,r=Wi,a=Gi;function i(i,o){for(var s,l,u=[],c=i.map(n,this),f=r.call(this,c,o),d=a.call(this,f,c,o),o=-1,p=c.length,h=d.length-1,m=t?1:1/p;++o<h;)(s=u[o]=[]).dx=d[o+1]-(s.x=d[o]),s.y=0;if(h>0)for(o=-1;++o<p;)(l=c[o])>=f[0]&&l<=f[1]&&((s=u[e.bisect(d,l,1,h)-1]).y+=m,s.push(i[o]));return u}return i.value=function(e){return arguments.length?(n=e,i):n},i.range=function(e){return arguments.length?(r=vt(e),i):r},i.bins=function(e){return arguments.length?(a="number"==typeof e?function(t){return Hi(t,e)}:vt(e),i):a},i.frequency=function(e){return arguments.length?(t=!!e,i):t},i},e.layout.pack=function(){var t,n=e.layout.hierarchy().sort(qi),r=0,a=[1,1];function i(e,i){var o=n.call(this,e,i),s=o[0],l=a[0],u=a[1],c=null==t?Math.sqrt:"function"==typeof t?t:function(){return t};if(s.x=s.y=0,Mi(s,function(e){e.r=+c(e.value)}),Mi(s,$i),r){var f=r*(t?1:Math.max(2*s.r/l,2*s.r/u))/2;Mi(s,function(e){e.r+=f}),Mi(s,$i),Mi(s,function(e){e.r-=f})}return function e(t,n,r,a){var i=t.children;if(t.x=n+=a*t.x,t.y=r+=a*t.y,t.r*=a,i)for(var o=-1,s=i.length;++o<s;)e(i[o],n,r,a)}(s,l/2,u/2,t?1:1/Math.max(2*s.r/l,2*s.r/u)),o}return i.size=function(e){return arguments.length?(a=e,i):a},i.radius=function(e){return arguments.length?(t=null==e||"function"==typeof e?e:+e,i):t},i.padding=function(e){return arguments.length?(r=+e,i):r},Ci(i,n)},e.layout.tree=function(){var t=e.layout.hierarchy().sort(null).value(null),n=eo,r=[1,1],a=null;function i(e,i){var u=t.call(this,e,i),c=u[0],f=function(e){for(var t,n={A:null,children:[e]},r=[n];null!=(t=r.pop());)for(var a,i=t.children,o=0,s=i.length;o<s;++o)r.push((i[o]=a={_:i[o],parent:t,children:(a=i[o].children)&&a.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=a);return n.children[0]}(c);if(Mi(f,o),f.parent.m=-f.z,Ei(f,s),a)Ei(c,l);else{var d=c,p=c,h=c;Ei(c,function(e){e.x<d.x&&(d=e),e.x>p.x&&(p=e),e.depth>h.depth&&(h=e)});var m=n(d,p)/2-d.x,v=r[0]/(p.x+n(p,d)/2+m),g=r[1]/(h.depth||1);Ei(c,function(e){e.x=(e.x+m)*v,e.y=e.depth*g})}return u}function o(e){var t=e.children,r=e.parent.children,a=e.i?r[e.i-1]:null;if(t.length){!function(e){for(var t,n=0,r=0,a=e.children,i=a.length;--i>=0;)(t=a[i]).z+=n,t.m+=n,n+=t.s+(r+=t.c)}(e);var i=(t[0].z+t[t.length-1].z)/2;a?(e.z=a.z+n(e._,a._),e.m=e.z-i):e.z=i}else a&&(e.z=a.z+n(e._,a._));e.parent.A=function(e,t,r){if(t){for(var a,i=e,o=e,s=t,l=i.parent.children[0],u=i.m,c=o.m,f=s.m,d=l.m;s=no(s),i=to(i),s&&i;)l=to(l),(o=no(o)).a=e,(a=s.z+f-i.z-u+n(s._,i._))>0&&(ro(ao(s,e,r),e,a),u+=a,c+=a),f+=s.m,u+=i.m,d+=l.m,c+=o.m;s&&!no(o)&&(o.t=s,o.m+=f-c),i&&!to(l)&&(l.t=i,l.m+=u-d,r=e)}return r}(e,a,e.parent.A||r[0])}function s(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function l(e){e.x*=r[0],e.y=e.depth*r[1]}return i.separation=function(e){return arguments.length?(n=e,i):n},i.size=function(e){return arguments.length?(a=null==(r=e)?l:null,i):a?null:r},i.nodeSize=function(e){return arguments.length?(a=null==(r=e)?null:l,i):a?r:null},Ci(i,t)},e.layout.cluster=function(){var t=e.layout.hierarchy().sort(null).value(null),n=eo,r=[1,1],a=!1;function i(i,o){var s,l=t.call(this,i,o),u=l[0],c=0;Mi(u,function(t){var r=t.children;r&&r.length?(t.x=function(e){return e.reduce(function(e,t){return e+t.x},0)/e.length}(r),t.y=function(t){return 1+e.max(t,function(e){return e.y})}(r)):(t.x=s?c+=n(t,s):0,t.y=0,s=t)});var f=function e(t){var n=t.children;return n&&n.length?e(n[0]):t}(u),d=function e(t){var n,r=t.children;return r&&(n=r.length)?e(r[n-1]):t}(u),p=f.x-n(f,d)/2,h=d.x+n(d,f)/2;return Mi(u,a?function(e){e.x=(e.x-u.x)*r[0],e.y=(u.y-e.y)*r[1]}:function(e){e.x=(e.x-p)/(h-p)*r[0],e.y=(1-(u.y?e.y/u.y:1))*r[1]}),l}return i.separation=function(e){return arguments.length?(n=e,i):n},i.size=function(e){return arguments.length?(a=null==(r=e),i):a?null:r},i.nodeSize=function(e){return arguments.length?(a=null!=(r=e),i):a?r:null},Ci(i,t)},e.layout.treemap=function(){var t,n=e.layout.hierarchy(),r=Math.round,a=[1,1],i=null,o=io,s=!1,l="squarify",u=.5*(1+Math.sqrt(5));function c(e,t){for(var n,r,a=-1,i=e.length;++a<i;)r=(n=e[a]).value*(t<0?0:t),n.area=isNaN(r)||r<=0?0:r}function f(e){var t=e.children;if(t&&t.length){var n,r,a,i=o(e),s=[],u=t.slice(),d=1/0,m="slice"===l?i.dx:"dice"===l?i.dy:"slice-dice"===l?1&e.depth?i.dy:i.dx:Math.min(i.dx,i.dy);for(c(u,i.dx*i.dy/e.value),s.area=0;(a=u.length)>0;)s.push(n=u[a-1]),s.area+=n.area,"squarify"!==l||(r=p(s,m))<=d?(u.pop(),d=r):(s.area-=s.pop().area,h(s,m,i,!1),m=Math.min(i.dx,i.dy),s.length=s.area=0,d=1/0);s.length&&(h(s,m,i,!0),s.length=s.area=0),t.forEach(f)}}function d(e){var t=e.children;if(t&&t.length){var n,r=o(e),a=t.slice(),i=[];for(c(a,r.dx*r.dy/e.value),i.area=0;n=a.pop();)i.push(n),i.area+=n.area,null!=n.z&&(h(i,n.z?r.dx:r.dy,r,!a.length),i.length=i.area=0);t.forEach(d)}}function p(e,t){for(var n,r=e.area,a=0,i=1/0,o=-1,s=e.length;++o<s;)(n=e[o].area)&&(n<i&&(i=n),n>a&&(a=n));return t*=t,(r*=r)?Math.max(t*a*u/r,r/(t*i*u)):1/0}function h(e,t,n,a){var i,o=-1,s=e.length,l=n.x,u=n.y,c=t?r(e.area/t):0;if(t==n.dx){for((a||c>n.dy)&&(c=n.dy);++o<s;)(i=e[o]).x=l,i.y=u,i.dy=c,l+=i.dx=Math.min(n.x+n.dx-l,c?r(i.area/c):0);i.z=!0,i.dx+=n.x+n.dx-l,n.y+=c,n.dy-=c}else{for((a||c>n.dx)&&(c=n.dx);++o<s;)(i=e[o]).x=l,i.y=u,i.dx=c,u+=i.dy=Math.min(n.y+n.dy-u,c?r(i.area/c):0);i.z=!1,i.dy+=n.y+n.dy-u,n.x+=c,n.dx-=c}}function m(e){var r=t||n(e),i=r[0];return i.x=i.y=0,i.value?(i.dx=a[0],i.dy=a[1]):i.dx=i.dy=0,t&&n.revalue(i),c([i],i.dx*i.dy/i.value),(t?d:f)(i),s&&(t=r),r}return m.size=function(e){return arguments.length?(a=e,m):a},m.padding=function(e){if(!arguments.length)return i;function t(t){return oo(t,e)}var n;return o=null==(i=e)?io:"function"==(n=typeof e)?function(t){var n=e.call(m,t,t.depth);return null==n?io(t):oo(t,"number"==typeof n?[n,n,n,n]:n)}:"number"===n?(e=[e,e,e,e],t):t,m},m.round=function(e){return arguments.length?(r=e?Math.round:Number,m):r!=Number},m.sticky=function(e){return arguments.length?(s=e,t=null,m):s},m.ratio=function(e){return arguments.length?(u=e,m):u},m.mode=function(e){return arguments.length?(l=e+"",m):l},Ci(m,n)},e.random={normal:function(e,t){var n=arguments.length;return n<2&&(t=1),n<1&&(e=0),function(){var n,r,a;do{n=2*Math.random()-1,r=2*Math.random()-1,a=n*n+r*r}while(!a||a>1);return e+t*n*Math.sqrt(-2*Math.log(a)/a)}},logNormal:function(){var t=e.random.normal.apply(e,arguments);return function(){return Math.exp(t())}},bates:function(t){var n=e.random.irwinHall(t);return function(){return n()/t}},irwinHall:function(e){return function(){for(var t=0,n=0;n<e;n++)t+=Math.random();return t}}},e.scale={};var po={floor:P,ceil:P};function ho(t,n,r,a){var i=[],o=[],s=0,l=Math.min(t.length,n.length)-1;for(t[l]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++s<=l;)i.push(r(t[s-1],t[s])),o.push(a(n[s-1],n[s]));return function(n){var r=e.bisect(t,n,1,l)-1;return o[r](i[r](n))}}function mo(t,n){return e.rebind(t,n,"range","rangeRound","interpolate","clamp")}function vo(e,t){return co(e,fo(go(e,t)[2])),co(e,fo(go(e,t)[2])),e}function go(e,t){null==t&&(t=10);var n=so(e),r=n[1]-n[0],a=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),i=t/r*a;return i<=.15?a*=10:i<=.35?a*=5:i<=.75&&(a*=2),n[0]=Math.ceil(n[0]/a)*a,n[1]=Math.floor(n[1]/a)*a+.5*a,n[2]=a,n}function yo(t,n){return e.range.apply(e,go(t,n))}function bo(t,n,r){var a=go(t,n);if(r){var i=Ot.exec(r);if(i.shift(),"s"===i[8]){var o=e.formatPrefix(Math.max(y(a[0]),y(a[1])));return i[7]||(i[7]="."+_o(o.scale(a[2]))),i[8]="f",r=e.format(i.join("")),function(e){return r(o.scale(e))+o.symbol}}i[7]||(i[7]="."+function(e,t){var n=_o(t[2]);return e in xo?Math.abs(n-_o(Math.max(y(t[0]),y(t[1]))))+ +("e"!==e):n-2*("%"===e)}(i[8],a)),r=i.join("")}else r=",."+_o(a[2])+"f";return e.format(r)}e.scale.linear=function(){return function e(t,n,r,a){var i,o;function s(){var e=Math.min(t.length,n.length)>2?ho:uo,s=a?mi:hi;return i=e(t,n,s,r),o=e(n,t,s,Ya),l}function l(e){return i(e)}return l.invert=function(e){return o(e)},l.domain=function(e){return arguments.length?(t=e.map(Number),s()):t},l.range=function(e){return arguments.length?(n=e,s()):n},l.rangeRound=function(e){return l.range(e).interpolate(si)},l.clamp=function(e){return arguments.length?(a=e,s()):a},l.interpolate=function(e){return arguments.length?(r=e,s()):r},l.ticks=function(e){return yo(t,e)},l.tickFormat=function(e,n){return bo(t,e,n)},l.nice=function(e){return vo(t,e),s()},l.copy=function(){return e(t,n,r,a)},s()}([0,1],[0,1],Ya,!1)};var xo={s:1,g:1,p:1,r:1,e:1};function _o(e){return-Math.floor(Math.log(e)/Math.LN10+.01)}e.scale.log=function(){return function t(n,r,a,i){function o(e){return(a?Math.log(e<0?0:e):-Math.log(e>0?0:-e))/Math.log(r)}function s(e){return a?Math.pow(r,e):-Math.pow(r,-e)}function l(e){return n(o(e))}return l.invert=function(e){return s(n.invert(e))},l.domain=function(e){return arguments.length?(a=e[0]>=0,n.domain((i=e.map(Number)).map(o)),l):i},l.base=function(e){return arguments.length?(r=+e,n.domain(i.map(o)),l):r},l.nice=function(){var e=co(i.map(o),a?Math:To);return n.domain(e),i=e.map(s),l},l.ticks=function(){var e=so(i),t=[],n=e[0],l=e[1],u=Math.floor(o(n)),c=Math.ceil(o(l)),f=r%1?2:r;if(isFinite(c-u)){if(a){for(;u<c;u++)for(var d=1;d<f;d++)t.push(s(u)*d);t.push(s(u))}else for(t.push(s(u));u++<c;)for(var d=f-1;d>0;d--)t.push(s(u)*d);for(u=0;t[u]<n;u++);for(c=t.length;t[c-1]>l;c--);t=t.slice(u,c)}return t},l.tickFormat=function(t,n){if(!arguments.length)return wo;arguments.length<2?n=wo:"function"!=typeof n&&(n=e.format(n));var a=Math.max(1,r*t/l.ticks().length);return function(e){var t=e/s(Math.round(o(e)));return t*r<r-.5&&(t*=r),t<=a?n(e):""}},l.copy=function(){return t(n.copy(),r,a,i)},mo(l,n)}(e.scale.linear().domain([0,1]),10,!0,[1,10])};var wo=e.format(".0e"),To={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};function ko(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}e.scale.pow=function(){return function e(t,n,r){var a=ko(n),i=ko(1/n);function o(e){return t(a(e))}return o.invert=function(e){return i(t.invert(e))},o.domain=function(e){return arguments.length?(t.domain((r=e.map(Number)).map(a)),o):r},o.ticks=function(e){return yo(r,e)},o.tickFormat=function(e,t){return bo(r,e,t)},o.nice=function(e){return o.domain(vo(r,e))},o.exponent=function(e){return arguments.length?(a=ko(n=e),i=ko(1/n),t.domain(r.map(a)),o):n},o.copy=function(){return e(t.copy(),n,r)},mo(o,t)}(e.scale.linear(),1,[0,1])},e.scale.sqrt=function(){return e.scale.pow().exponent(.5)},e.scale.ordinal=function(){return function t(n,r){var a,i,o;function s(e){return i[((a.get(e)||("range"===r.t?a.set(e,n.push(e)):NaN))-1)%i.length]}function l(t,r){return e.range(n.length).map(function(e){return t+r*e})}return s.domain=function(e){if(!arguments.length)return n;n=[],a=new x;for(var t,i=-1,o=e.length;++i<o;)a.has(t=e[i])||a.set(t,n.push(t));return s[r.t].apply(s,r.a)},s.range=function(e){return arguments.length?(i=e,o=0,r={t:"range",a:arguments},s):i},s.rangePoints=function(e,t){arguments.length<2&&(t=0);var a=e[0],u=e[1],c=n.length<2?(a=(a+u)/2,0):(u-a)/(n.length-1+t);return i=l(a+c*t/2,c),o=0,r={t:"rangePoints",a:arguments},s},s.rangeRoundPoints=function(e,t){arguments.length<2&&(t=0);var a=e[0],u=e[1],c=n.length<2?(a=u=Math.round((a+u)/2),0):(u-a)/(n.length-1+t)|0;return i=l(a+Math.round(c*t/2+(u-a-(n.length-1+t)*c)/2),c),o=0,r={t:"rangeRoundPoints",a:arguments},s},s.rangeBands=function(e,t,a){arguments.length<2&&(t=0),arguments.length<3&&(a=t);var u=e[1]<e[0],c=e[u-0],f=e[1-u],d=(f-c)/(n.length-t+2*a);return i=l(c+d*a,d),u&&i.reverse(),o=d*(1-t),r={t:"rangeBands",a:arguments},s},s.rangeRoundBands=function(e,t,a){arguments.length<2&&(t=0),arguments.length<3&&(a=t);var u=e[1]<e[0],c=e[u-0],f=e[1-u],d=Math.floor((f-c)/(n.length-t+2*a));return i=l(c+Math.round((f-c-(n.length-t)*d)/2),d),u&&i.reverse(),o=Math.round(d*(1-t)),r={t:"rangeRoundBands",a:arguments},s},s.rangeBand=function(){return o},s.rangeExtent=function(){return so(r.a[0])},s.copy=function(){return t(n,r)},s.domain(n)}([],{t:"range",a:[[]]})},e.scale.category10=function(){return e.scale.ordinal().range(Co)},e.scale.category20=function(){return e.scale.ordinal().range(Eo)},e.scale.category20b=function(){return e.scale.ordinal().range(Mo)},e.scale.category20c=function(){return e.scale.ordinal().range(Ao)};var Co=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(st),Eo=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(st),Mo=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(st),Ao=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(st);function So(){return 0}e.scale.quantile=function(){return function t(n,r){var a;function i(){var t=0,i=r.length;for(a=[];++t<i;)a[t-1]=e.quantile(n,t/i);return o}function o(t){if(!isNaN(t=+t))return r[e.bisect(a,t)]}return o.domain=function(e){return arguments.length?(n=e.map(p).filter(h).sort(d),i()):n},o.range=function(e){return arguments.length?(r=e,i()):r},o.quantiles=function(){return a},o.invertExtent=function(e){return(e=r.indexOf(e))<0?[NaN,NaN]:[e>0?a[e-1]:n[0],e<a.length?a[e]:n[n.length-1]]},o.copy=function(){return t(n,r)},i()}([],[])},e.scale.quantize=function(){return function e(t,n,r){var a,i;function o(e){return r[Math.max(0,Math.min(i,Math.floor(a*(e-t))))]}function s(){return a=r.length/(n-t),i=r.length-1,o}return o.domain=function(e){return arguments.length?(t=+e[0],n=+e[e.length-1],s()):[t,n]},o.range=function(e){return arguments.length?(r=e,s()):r},o.invertExtent=function(e){return[e=(e=r.indexOf(e))<0?NaN:e/a+t,e+1/a]},o.copy=function(){return e(t,n,r)},s()}(0,1,[0,1])},e.scale.threshold=function(){return function t(n,r){function a(t){if(t<=t)return r[e.bisect(n,t)]}return a.domain=function(e){return arguments.length?(n=e,a):n},a.range=function(e){return arguments.length?(r=e,a):r},a.invertExtent=function(e){return e=r.indexOf(e),[n[e-1],n[e]]},a.copy=function(){return t(n,r)},a}([.5],[0,1])},e.scale.identity=function(){return function e(t){function n(e){return+e}return n.invert=n,n.domain=n.range=function(e){return arguments.length?(t=e.map(n),n):t},n.ticks=function(e){return yo(t,e)},n.tickFormat=function(e,n){return bo(t,e,n)},n.copy=function(){return e(t)},n}([0,1])},e.svg={},e.svg.arc=function(){var e=Po,t=Ro,n=So,r=Oo,a=Lo,i=Do,o=Io;function s(){var s=Math.max(0,+e.apply(this,arguments)),u=Math.max(0,+t.apply(this,arguments)),c=a.apply(this,arguments)-Ae,f=i.apply(this,arguments)-Ae,d=Math.abs(f-c),p=c>f?0:1;if(u<s&&(h=u,u=s,s=h),d>=Me)return l(u,p)+(s?l(s,1-p):"")+"Z";var h,m,v,g,y,b,x,_,w,T,k,C,E=0,M=0,A=[];if((g=(+o.apply(this,arguments)||0)/2)&&(v=r===Oo?Math.sqrt(s*s+u*u):+r.apply(this,arguments),p||(M*=-1),u&&(M=De(v/u*Math.sin(g))),s&&(E=De(v/s*Math.sin(g)))),u){y=u*Math.cos(c+M),b=u*Math.sin(c+M),x=u*Math.cos(f-M),_=u*Math.sin(f-M);var S=Math.abs(f-c-2*M)<=Ce?0:1;if(M&&zo(y,b,x,_)===p^S){var O=(c+f)/2;y=u*Math.cos(O),b=u*Math.sin(O),x=_=null}}else y=b=0;if(s){w=s*Math.cos(f-E),T=s*Math.sin(f-E),k=s*Math.cos(c+E),C=s*Math.sin(c+E);var P=Math.abs(c-f+2*E)<=Ce?0:1;if(E&&zo(w,T,k,C)===1-p^P){var R=(c+f)/2;w=s*Math.cos(R),T=s*Math.sin(R),k=C=null}}else w=T=0;if(d>Te&&(h=Math.min(Math.abs(u-s)/2,+n.apply(this,arguments)))>.001){m=s<u^p?0:1;var L=h,D=h;if(d<Ce){var I=null==k?[w,T]:null==x?[y,b]:ia([y,b],[k,C],[x,_],[w,T]),z=y-I[0],j=b-I[1],N=x-I[0],F=_-I[1],B=1/Math.sin(Math.acos((z*N+j*F)/(Math.sqrt(z*z+j*j)*Math.sqrt(N*N+F*F)))/2),V=Math.sqrt(I[0]*I[0]+I[1]*I[1]);D=Math.min(h,(s-V)/(B-1)),L=Math.min(h,(u-V)/(B+1))}if(null!=x){var U=jo(null==k?[w,T]:[k,C],[y,b],u,L,p),G=jo([x,_],[w,T],u,L,p);h===L?A.push("M",U[0],"A",L,",",L," 0 0,",m," ",U[1],"A",u,",",u," 0 ",1-p^zo(U[1][0],U[1][1],G[1][0],G[1][1]),",",p," ",G[1],"A",L,",",L," 0 0,",m," ",G[0]):A.push("M",U[0],"A",L,",",L," 0 1,",m," ",G[0])}else A.push("M",y,",",b);if(null!=k){var H=jo([y,b],[k,C],s,-D,p),W=jo([w,T],null==x?[y,b]:[x,_],s,-D,p);h===D?A.push("L",W[0],"A",D,",",D," 0 0,",m," ",W[1],"A",s,",",s," 0 ",p^zo(W[1][0],W[1][1],H[1][0],H[1][1]),",",1-p," ",H[1],"A",D,",",D," 0 0,",m," ",H[0]):A.push("L",W[0],"A",D,",",D," 0 0,",m," ",H[0])}else A.push("L",w,",",T)}else A.push("M",y,",",b),null!=x&&A.push("A",u,",",u," 0 ",S,",",p," ",x,",",_),A.push("L",w,",",T),null!=k&&A.push("A",s,",",s," 0 ",P,",",1-p," ",k,",",C);return A.push("Z"),A.join("")}function l(e,t){return"M0,"+e+"A"+e+","+e+" 0 1,"+t+" 0,"+-e+"A"+e+","+e+" 0 1,"+t+" 0,"+e}return s.innerRadius=function(t){return arguments.length?(e=vt(t),s):e},s.outerRadius=function(e){return arguments.length?(t=vt(e),s):t},s.cornerRadius=function(e){return arguments.length?(n=vt(e),s):n},s.padRadius=function(e){return arguments.length?(r=e==Oo?Oo:vt(e),s):r},s.startAngle=function(e){return arguments.length?(a=vt(e),s):a},s.endAngle=function(e){return arguments.length?(i=vt(e),s):i},s.padAngle=function(e){return arguments.length?(o=vt(e),s):o},s.centroid=function(){var n=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,r=(+a.apply(this,arguments)+ +i.apply(this,arguments))/2-Ae;return[Math.cos(r)*n,Math.sin(r)*n]},s};var Oo="auto";function Po(e){return e.innerRadius}function Ro(e){return e.outerRadius}function Lo(e){return e.startAngle}function Do(e){return e.endAngle}function Io(e){return e&&e.padAngle}function zo(e,t,n,r){return(e-n)*t-(t-r)*e>0?0:1}function jo(e,t,n,r,a){var i=e[0]-t[0],o=e[1]-t[1],s=(a?r:-r)/Math.sqrt(i*i+o*o),l=s*o,u=-s*i,c=e[0]+l,f=e[1]+u,d=t[0]+l,p=t[1]+u,h=(c+d)/2,m=(f+p)/2,v=d-c,g=p-f,y=v*v+g*g,b=n-r,x=c*p-d*f,_=(g<0?-1:1)*Math.sqrt(Math.max(0,b*b*y-x*x)),w=(x*g-v*_)/y,T=(-x*v-g*_)/y,k=(x*g+v*_)/y,C=(-x*v+g*_)/y,E=w-h,M=T-m,A=k-h,S=C-m;return E*E+M*M>A*A+S*S&&(w=k,T=C),[[w-l,T-u],[w*n/b,T*n/b]]}function No(e){var t=Qr,n=ea,r=Yn,a=Bo,i=a.key,o=.7;function s(i){var s,l=[],u=[],c=-1,f=i.length,d=vt(t),p=vt(n);function h(){l.push("M",a(e(u),o))}for(;++c<f;)r.call(this,s=i[c],c)?u.push([+d.call(this,s,c),+p.call(this,s,c)]):u.length&&(h(),u=[]);return u.length&&h(),l.length?l.join(""):null}return s.x=function(e){return arguments.length?(t=e,s):t},s.y=function(e){return arguments.length?(n=e,s):n},s.defined=function(e){return arguments.length?(r=e,s):r},s.interpolate=function(e){return arguments.length?(i="function"==typeof e?a=e:(a=Fo.get(e)||Bo).key,s):i},s.tension=function(e){return arguments.length?(o=e,s):o},s}e.svg.line=function(){return No(P)};var Fo=e.map({linear:Bo,"linear-closed":Vo,step:function(e){for(var t=0,n=e.length,r=e[0],a=[r[0],",",r[1]];++t<n;)a.push("H",(r[0]+(r=e[t])[0])/2,"V",r[1]);return n>1&&a.push("H",r[0]),a.join("")},"step-before":Uo,"step-after":Go,basis:qo,"basis-open":function(e){if(e.length<4)return Bo(e);for(var t,n=[],r=-1,a=e.length,i=[0],o=[0];++r<3;)t=e[r],i.push(t[0]),o.push(t[1]);for(n.push(Yo($o,i)+","+Yo($o,o)),--r;++r<a;)t=e[r],i.shift(),i.push(t[0]),o.shift(),o.push(t[1]),Ko(n,i,o);return n.join("")},"basis-closed":function(e){for(var t,n,r=-1,a=e.length,i=a+4,o=[],s=[];++r<4;)n=e[r%a],o.push(n[0]),s.push(n[1]);for(t=[Yo($o,o),",",Yo($o,s)],--r;++r<i;)n=e[r%a],o.shift(),o.push(n[0]),s.shift(),s.push(n[1]),Ko(t,o,s);return t.join("")},bundle:function(e,t){var n=e.length-1;if(n)for(var r,a,i=e[0][0],o=e[0][1],s=e[n][0]-i,l=e[n][1]-o,u=-1;++u<=n;)r=e[u],a=u/n,r[0]=t*r[0]+(1-t)*(i+a*s),r[1]=t*r[1]+(1-t)*(o+a*l);return qo(e)},cardinal:function(e,t){return e.length<3?Bo(e):e[0]+Ho(e,Wo(e,t))},"cardinal-open":function(e,t){return e.length<4?Bo(e):e[1]+Ho(e.slice(1,-1),Wo(e,t))},"cardinal-closed":function(e,t){return e.length<3?Vo(e):e[0]+Ho((e.push(e[0]),e),Wo([e[e.length-2]].concat(e,[e[1]]),t))},monotone:function(e){return e.length<3?Bo(e):e[0]+Ho(e,function(e){for(var t,n,r,a,i=[],o=function(e){for(var t=0,n=e.length-1,r=[],a=e[0],i=e[1],o=r[0]=Jo(a,i);++t<n;)r[t]=(o+(o=Jo(a=i,i=e[t+1])))/2;return r[t]=o,r}(e),s=-1,l=e.length-1;++s<l;)t=Jo(e[s],e[s+1]),y(t)<Te?o[s]=o[s+1]=0:(n=o[s]/t,r=o[s+1]/t,(a=n*n+r*r)>9&&(a=3*t/Math.sqrt(a),o[s]=a*n,o[s+1]=a*r));for(s=-1;++s<=l;)a=(e[Math.min(l,s+1)][0]-e[Math.max(0,s-1)][0])/(6*(1+o[s]*o[s])),i.push([a||0,o[s]*a||0]);return i}(e))}});function Bo(e){return e.length>1?e.join("L"):e+"Z"}function Vo(e){return e.join("L")+"Z"}function Uo(e){for(var t=0,n=e.length,r=e[0],a=[r[0],",",r[1]];++t<n;)a.push("V",(r=e[t])[1],"H",r[0]);return a.join("")}function Go(e){for(var t=0,n=e.length,r=e[0],a=[r[0],",",r[1]];++t<n;)a.push("H",(r=e[t])[0],"V",r[1]);return a.join("")}function Ho(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2)return Bo(e);var n=e.length!=t.length,r="",a=e[0],i=e[1],o=t[0],s=o,l=1;if(n&&(r+="Q"+(i[0]-2*o[0]/3)+","+(i[1]-2*o[1]/3)+","+i[0]+","+i[1],a=e[1],l=2),t.length>1){s=t[1],i=e[l],l++,r+="C"+(a[0]+o[0])+","+(a[1]+o[1])+","+(i[0]-s[0])+","+(i[1]-s[1])+","+i[0]+","+i[1];for(var u=2;u<t.length;u++,l++)i=e[l],s=t[u],r+="S"+(i[0]-s[0])+","+(i[1]-s[1])+","+i[0]+","+i[1]}if(n){var c=e[l];r+="Q"+(i[0]+2*s[0]/3)+","+(i[1]+2*s[1]/3)+","+c[0]+","+c[1]}return r}function Wo(e,t){for(var n,r=[],a=(1-t)/2,i=e[0],o=e[1],s=1,l=e.length;++s<l;)n=i,i=o,o=e[s],r.push([a*(o[0]-n[0]),a*(o[1]-n[1])]);return r}function qo(e){if(e.length<3)return Bo(e);var t=1,n=e.length,r=e[0],a=r[0],i=r[1],o=[a,a,a,(r=e[1])[0]],s=[i,i,i,r[1]],l=[a,",",i,"L",Yo($o,o),",",Yo($o,s)];for(e.push(e[n-1]);++t<=n;)r=e[t],o.shift(),o.push(r[0]),s.shift(),s.push(r[1]),Ko(l,o,s);return e.pop(),l.push("L",r),l.join("")}function Yo(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}Fo.forEach(function(e,t){t.key=e,t.closed=/-closed$/.test(e)});var Xo=[0,2/3,1/3,0],Zo=[0,1/3,2/3,0],$o=[0,1/6,2/3,1/6];function Ko(e,t,n){e.push("C",Yo(Xo,t),",",Yo(Xo,n),",",Yo(Zo,t),",",Yo(Zo,n),",",Yo($o,t),",",Yo($o,n))}function Jo(e,t){return(t[1]-e[1])/(t[0]-e[0])}function Qo(e){for(var t,n,r,a=-1,i=e.length;++a<i;)t=e[a],n=t[0],r=t[1]-Ae,t[0]=n*Math.cos(r),t[1]=n*Math.sin(r);return e}function es(e){var t=Qr,n=Qr,r=0,a=ea,i=Yn,o=Bo,s=o.key,l=o,u="L",c=.7;function f(s){var f,d,p,h=[],m=[],v=[],g=-1,y=s.length,b=vt(t),x=vt(r),_=t===n?function(){return d}:vt(n),w=r===a?function(){return p}:vt(a);function T(){h.push("M",o(e(v),c),u,l(e(m.reverse()),c),"Z")}for(;++g<y;)i.call(this,f=s[g],g)?(m.push([d=+b.call(this,f,g),p=+x.call(this,f,g)]),v.push([+_.call(this,f,g),+w.call(this,f,g)])):m.length&&(T(),m=[],v=[]);return m.length&&T(),h.length?h.join(""):null}return f.x=function(e){return arguments.length?(t=n=e,f):n},f.x0=function(e){return arguments.length?(t=e,f):t},f.x1=function(e){return arguments.length?(n=e,f):n},f.y=function(e){return arguments.length?(r=a=e,f):a},f.y0=function(e){return arguments.length?(r=e,f):r},f.y1=function(e){return arguments.length?(a=e,f):a},f.defined=function(e){return arguments.length?(i=e,f):i},f.interpolate=function(e){return arguments.length?(s="function"==typeof e?o=e:(o=Fo.get(e)||Bo).key,l=o.reverse||o,u=o.closed?"M":"L",f):s},f.tension=function(e){return arguments.length?(c=e,f):c},f}function ts(e){return e.radius}function ns(e){return[e.x,e.y]}function rs(){return 64}function as(){return"circle"}function is(e){var t=Math.sqrt(e/Ce);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}e.svg.line.radial=function(){var e=No(Qo);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},Uo.reverse=Go,Go.reverse=Uo,e.svg.area=function(){return es(P)},e.svg.area.radial=function(){var e=es(Qo);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},e.svg.chord=function(){var e=Fr,t=Br,n=ts,r=Lo,a=Do;function i(n,r){var a=o(this,e,n,r),i=o(this,t,n,r);return"M"+a.p0+s(a.r,a.p1,a.a1-a.a0)+(function(e,t){return e.a0==t.a0&&e.a1==t.a1}(a,i)?l(a.r,a.p1,a.r,a.p0):l(a.r,a.p1,i.r,i.p0)+s(i.r,i.p1,i.a1-i.a0)+l(i.r,i.p1,a.r,a.p0))+"Z"}function o(e,t,i,o){var s=t.call(e,i,o),l=n.call(e,s,o),u=r.call(e,s,o)-Ae,c=a.call(e,s,o)-Ae;return{r:l,a0:u,a1:c,p0:[l*Math.cos(u),l*Math.sin(u)],p1:[l*Math.cos(c),l*Math.sin(c)]}}function s(e,t,n){return"A"+e+","+e+" 0 "+ +(n>Ce)+",1 "+t}function l(e,t,n,r){return"Q 0,0 "+r}return i.radius=function(e){return arguments.length?(n=vt(e),i):n},i.source=function(t){return arguments.length?(e=vt(t),i):e},i.target=function(e){return arguments.length?(t=vt(e),i):t},i.startAngle=function(e){return arguments.length?(r=vt(e),i):r},i.endAngle=function(e){return arguments.length?(a=vt(e),i):a},i},e.svg.diagonal=function(){var e=Fr,t=Br,n=ns;function r(r,a){var i=e.call(this,r,a),o=t.call(this,r,a),s=(i.y+o.y)/2,l=[i,{x:i.x,y:s},{x:o.x,y:s},o];return"M"+(l=l.map(n))[0]+"C"+l[1]+" "+l[2]+" "+l[3]}return r.source=function(t){return arguments.length?(e=vt(t),r):e},r.target=function(e){return arguments.length?(t=vt(e),r):t},r.projection=function(e){return arguments.length?(n=e,r):n},r},e.svg.diagonal.radial=function(){var t=e.svg.diagonal(),n=ns,r=t.projection;return t.projection=function(e){return arguments.length?r(function(e){return function(){var t=e.apply(this,arguments),n=t[0],r=t[1]-Ae;return[n*Math.cos(r),n*Math.sin(r)]}}(n=e)):n},t},e.svg.symbol=function(){var e=as,t=rs;function n(n,r){return(os.get(e.call(this,n,r))||is)(t.call(this,n,r))}return n.type=function(t){return arguments.length?(e=vt(t),n):e},n.size=function(e){return arguments.length?(t=vt(e),n):t},n};var os=e.map({circle:is,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*ls)),n=t*ls;return"M0,"+-t+"L"+n+",0 0,"+t+" "+-n+",0Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/ss),n=t*ss/2;return"M0,"+n+"L"+t+","+-n+" "+-t+","+-n+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/ss),n=t*ss/2;return"M0,"+-n+"L"+t+","+n+" "+-t+","+n+"Z"}});e.svg.symbolTypes=os.keys();var ss=Math.sqrt(3),ls=Math.tan(30*Se);Y.transition=function(e){for(var t,n,r=ds||++ms,a=ys(e),i=[],o=ps||{time:Date.now(),ease:ni,delay:0,duration:250},s=-1,l=this.length;++s<l;){i.push(t=[]);for(var u=this[s],c=-1,f=u.length;++c<f;)(n=u[c])&&bs(n,c,a,r,o),t.push(n)}return fs(i,a,r)},Y.interrupt=function(e){return this.each(null==e?us:cs(ys(e)))};var us=cs(ys());function cs(e){return function(){var t,n,r;(t=this[e])&&(r=t[n=t.active])&&(r.timer.c=null,r.timer.t=NaN,--t.count?delete t[n]:delete this[e],t.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function fs(e,t,n){return U(e,hs),e.namespace=t,e.id=n,e}var ds,ps,hs=[],ms=0;function vs(e,t,n,r){var a=e.id,i=e.namespace;return ce(e,"function"==typeof n?function(e,o,s){e[i][a].tween.set(t,r(n.call(e,e.__data__,o,s)))}:(n=r(n),function(e){e[i][a].tween.set(t,n)}))}function gs(e){return null==e&&(e=""),function(){this.textContent=e}}function ys(e){return null==e?"__transition__":"__transition_"+e+"__"}function bs(e,t,n,r,a){var i,o,s,l,u,c=e[n]||(e[n]={active:0,count:0}),f=c[r];function d(n){var a=c.active,d=c[a];for(var h in d&&(d.timer.c=null,d.timer.t=NaN,--c.count,delete c[a],d.event&&d.event.interrupt.call(e,e.__data__,d.index)),c)if(+h<r){var m=c[h];m.timer.c=null,m.timer.t=NaN,--c.count,delete c[h]}o.c=p,kt(function(){return o.c&&p(n||1)&&(o.c=null,o.t=NaN),1},0,i),c.active=r,f.event&&f.event.start.call(e,e.__data__,t),u=[],f.tween.forEach(function(n,r){(r=r.call(e,e.__data__,t))&&u.push(r)}),l=f.ease,s=f.duration}function p(a){for(var i=a/s,o=l(i),d=u.length;d>0;)u[--d].call(e,o);if(i>=1)return f.event&&f.event.end.call(e,e.__data__,t),--c.count?delete c[r]:delete e[n],1}f||(i=a.time,o=kt(function(e){var t=f.delay;if(o.t=t+i,t<=e)return d(e-t);o.c=d},0,i),f=c[r]={tween:new x,time:i,timer:o,delay:a.delay,duration:a.duration,ease:a.ease,index:t},a=null,++c.count)}hs.call=Y.call,hs.empty=Y.empty,hs.node=Y.node,hs.size=Y.size,e.transition=function(t,n){return t&&t.transition?ds?t.transition(n):t:e.selection().transition(t)},e.transition.prototype=hs,hs.select=function(e){var t,n,r,a=this.id,i=this.namespace,o=[];e=X(e);for(var s=-1,l=this.length;++s<l;){o.push(t=[]);for(var u=this[s],c=-1,f=u.length;++c<f;)(r=u[c])&&(n=e.call(r,r.__data__,c,s))?("__data__"in r&&(n.__data__=r.__data__),bs(n,c,i,a,r[i][a]),t.push(n)):t.push(null)}return fs(o,i,a)},hs.selectAll=function(e){var t,n,r,a,i,o=this.id,s=this.namespace,l=[];e=Z(e);for(var u=-1,c=this.length;++u<c;)for(var f=this[u],d=-1,p=f.length;++d<p;)if(r=f[d]){i=r[s][o],n=e.call(r,r.__data__,d,u),l.push(t=[]);for(var h=-1,m=n.length;++h<m;)(a=n[h])&&bs(a,h,s,o,i),t.push(a)}return fs(l,s,o)},hs.filter=function(e){var t,n,r=[];"function"!=typeof e&&(e=ue(e));for(var a=0,i=this.length;a<i;a++){r.push(t=[]);for(var o=this[a],s=0,l=o.length;s<l;s++)(n=o[s])&&e.call(n,n.__data__,s,a)&&t.push(n)}return fs(r,this.namespace,this.id)},hs.tween=function(e,t){var n=this.id,r=this.namespace;return arguments.length<2?this.node()[r][n].tween.get(e):ce(this,null==t?function(t){t[r][n].tween.remove(e)}:function(a){a[r][n].tween.set(e,t)})},hs.attr=function(t,n){if(arguments.length<2){for(n in t)this.attr(n,t[n]);return this}var r="transform"==t?pi:Ya,a=e.ns.qualify(t);function i(){this.removeAttribute(a)}function o(){this.removeAttributeNS(a.space,a.local)}return vs(this,"attr."+t,n,a.local?function(e){return null==e?o:(e+="",function(){var t,n=this.getAttributeNS(a.space,a.local);return n!==e&&(t=r(n,e),function(e){this.setAttributeNS(a.space,a.local,t(e))})})}:function(e){return null==e?i:(e+="",function(){var t,n=this.getAttribute(a);return n!==e&&(t=r(n,e),function(e){this.setAttribute(a,t(e))})})})},hs.attrTween=function(t,n){var r=e.ns.qualify(t);return this.tween("attr."+t,r.local?function(e,t){var a=n.call(this,e,t,this.getAttributeNS(r.space,r.local));return a&&function(e){this.setAttributeNS(r.space,r.local,a(e))}}:function(e,t){var a=n.call(this,e,t,this.getAttribute(r));return a&&function(e){this.setAttribute(r,a(e))}})},hs.style=function(e,t,n){var r=arguments.length;if(r<3){if("string"!=typeof e){for(n in r<2&&(t=""),e)this.style(n,e[n],t);return this}n=""}function a(){this.style.removeProperty(e)}return vs(this,"style."+e,t,function(t){return null==t?a:(t+="",function(){var r,a=o(this).getComputedStyle(this,null).getPropertyValue(e);return a!==t&&(r=Ya(a,t),function(t){this.style.setProperty(e,r(t),n)})})})},hs.styleTween=function(e,t,n){return arguments.length<3&&(n=""),this.tween("style."+e,function(r,a){var i=t.call(this,r,a,o(this).getComputedStyle(this,null).getPropertyValue(e));return i&&function(t){this.style.setProperty(e,i(t),n)}})},hs.text=function(e){return vs(this,"text",e,gs)},hs.remove=function(){var e=this.namespace;return this.each("end.transition",function(){var t;this[e].count<2&&(t=this.parentNode)&&t.removeChild(this)})},hs.ease=function(t){var n=this.id,r=this.namespace;return arguments.length<1?this.node()[r][n].ease:("function"!=typeof t&&(t=e.ease.apply(e,arguments)),ce(this,function(e){e[r][n].ease=t}))},hs.delay=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].delay:ce(this,"function"==typeof e?function(r,a,i){r[n][t].delay=+e.call(r,r.__data__,a,i)}:(e=+e,function(r){r[n][t].delay=e}))},hs.duration=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].duration:ce(this,"function"==typeof e?function(r,a,i){r[n][t].duration=Math.max(1,e.call(r,r.__data__,a,i))}:(e=Math.max(1,e),function(r){r[n][t].duration=e}))},hs.each=function(t,n){var r=this.id,a=this.namespace;if(arguments.length<2){var i=ps,o=ds;try{ds=r,ce(this,function(e,n,i){ps=e[a][r],t.call(e,e.__data__,n,i)})}finally{ps=i,ds=o}}else ce(this,function(i){var o=i[a][r];(o.event||(o.event=e.dispatch("start","end","interrupt"))).on(t,n)});return this},hs.transition=function(){for(var e,t,n,r=this.id,a=++ms,i=this.namespace,o=[],s=0,l=this.length;s<l;s++){o.push(e=[]);for(var u=this[s],c=0,f=u.length;c<f;c++)(t=u[c])&&(n=t[i][r],bs(t,c,i,a,{time:n.time,ease:n.ease,delay:n.delay+n.duration,duration:n.duration})),e.push(t)}return fs(o,i,a)},e.svg.axis=function(){var t,n=e.scale.linear(),a=xs,i=6,o=6,s=3,l=[10],u=null;function c(r){r.each(function(){var r,c=e.select(this),f=this.__chart__||n,d=this.__chart__=n.copy(),p=null==u?d.ticks?d.ticks.apply(d,l):d.domain():u,h=null==t?d.tickFormat?d.tickFormat.apply(d,l):P:t,m=c.selectAll(".tick").data(p,d),v=m.enter().insert("g",".domain").attr("class","tick").style("opacity",Te),g=e.transition(m.exit()).style("opacity",Te).remove(),y=e.transition(m.order()).style("opacity",1),b=Math.max(i,0)+s,x=lo(d),_=c.selectAll(".domain").data([0]),w=(_.enter().append("path").attr("class","domain"),e.transition(_));v.append("line"),v.append("text");var T,k,C,E,M=v.select("line"),A=y.select("line"),S=m.select("text").text(h),O=v.select("text"),R=y.select("text"),L="top"===a||"left"===a?-1:1;if("bottom"===a||"top"===a?(r=ws,T="x",C="y",k="x2",E="y2",S.attr("dy",L<0?"0em":".71em").style("text-anchor","middle"),w.attr("d","M"+x[0]+","+L*o+"V0H"+x[1]+"V"+L*o)):(r=Ts,T="y",C="x",k="y2",E="x2",S.attr("dy",".32em").style("text-anchor",L<0?"end":"start"),w.attr("d","M"+L*o+","+x[0]+"H0V"+x[1]+"H"+L*o)),M.attr(E,L*i),O.attr(C,L*b),A.attr(k,0).attr(E,L*i),R.attr(T,0).attr(C,L*b),d.rangeBand){var D=d,I=D.rangeBand()/2;f=d=function(e){return D(e)+I}}else f.rangeBand?f=d:g.call(r,d,f);v.call(r,f,d),y.call(r,d,d)})}return c.scale=function(e){return arguments.length?(n=e,c):n},c.orient=function(e){return arguments.length?(a=e in _s?e+"":xs,c):a},c.ticks=function(){return arguments.length?(l=r(arguments),c):l},c.tickValues=function(e){return arguments.length?(u=e,c):u},c.tickFormat=function(e){return arguments.length?(t=e,c):t},c.tickSize=function(e){var t=arguments.length;return t?(i=+e,o=+arguments[t-1],c):i},c.innerTickSize=function(e){return arguments.length?(i=+e,c):i},c.outerTickSize=function(e){return arguments.length?(o=+e,c):o},c.tickPadding=function(e){return arguments.length?(s=+e,c):s},c.tickSubdivide=function(){return arguments.length&&c},c};var xs="bottom",_s={top:1,right:1,bottom:1,left:1};function ws(e,t,n){e.attr("transform",function(e){var r=t(e);return"translate("+(isFinite(r)?r:n(e))+",0)"})}function Ts(e,t,n){e.attr("transform",function(e){var r=t(e);return"translate(0,"+(isFinite(r)?r:n(e))+")"})}e.svg.brush=function(){var t,n,r=B(d,"brushstart","brush","brushend"),a=null,i=null,s=[0,0],l=[0,0],u=!0,c=!0,f=Cs[0];function d(t){t.each(function(){var t=e.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",v).on("touchstart.brush",v),n=t.selectAll(".background").data([0]);n.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),t.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var r=t.selectAll(".resize").data(f,P);r.exit().remove(),r.enter().append("g").attr("class",function(e){return"resize "+e}).style("cursor",function(e){return ks[e]}).append("rect").attr("x",function(e){return/[ew]$/.test(e)?-3:null}).attr("y",function(e){return/^[ns]/.test(e)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),r.style("display",d.empty()?"none":null);var o,s=e.transition(t),l=e.transition(n);a&&(o=lo(a),l.attr("x",o[0]).attr("width",o[1]-o[0]),h(s)),i&&(o=lo(i),l.attr("y",o[0]).attr("height",o[1]-o[0]),m(s)),p(s)})}function p(e){e.selectAll(".resize").attr("transform",function(e){return"translate("+s[+/e$/.test(e)]+","+l[+/^s/.test(e)]+")"})}function h(e){e.select(".extent").attr("x",s[0]),e.selectAll(".extent,.n>rect,.s>rect").attr("width",s[1]-s[0])}function m(e){e.select(".extent").attr("y",l[0]),e.selectAll(".extent,.e>rect,.w>rect").attr("height",l[1]-l[0])}function v(){var f,v,g=this,y=e.select(e.event.target),b=r.of(g,arguments),x=e.select(g),_=y.datum(),w=!/^(n|s)$/.test(_)&&a,T=!/^(e|w)$/.test(_)&&i,k=y.classed("extent"),C=be(g),E=e.mouse(g),M=e.select(o(g)).on("keydown.brush",function(){32==e.event.keyCode&&(k||(f=null,E[0]-=s[1],E[1]-=l[1],k=2),N())}).on("keyup.brush",function(){32==e.event.keyCode&&2==k&&(E[0]+=s[1],E[1]+=l[1],k=0,N())});if(e.event.changedTouches?M.on("touchmove.brush",O).on("touchend.brush",R):M.on("mousemove.brush",O).on("mouseup.brush",R),x.interrupt().selectAll("*").interrupt(),k)E[0]=s[0]-E[0],E[1]=l[0]-E[1];else if(_){var A=+/w$/.test(_),S=+/^n/.test(_);v=[s[1-A]-E[0],l[1-S]-E[1]],E[0]=s[A],E[1]=l[S]}else e.event.altKey&&(f=E.slice());function O(){var t=e.mouse(g),n=!1;v&&(t[0]+=v[0],t[1]+=v[1]),k||(e.event.altKey?(f||(f=[(s[0]+s[1])/2,(l[0]+l[1])/2]),E[0]=s[+(t[0]<f[0])],E[1]=l[+(t[1]<f[1])]):f=null),w&&P(t,a,0)&&(h(x),n=!0),T&&P(t,i,1)&&(m(x),n=!0),n&&(p(x),b({type:"brush",mode:k?"move":"resize"}))}function P(e,r,a){var i,o,d=lo(r),p=d[0],h=d[1],m=E[a],v=a?l:s,g=v[1]-v[0];if(k&&(p-=m,h-=g+m),i=(a?c:u)?Math.max(p,Math.min(h,e[a])):e[a],k?o=(i+=m)+g:(f&&(m=Math.max(p,Math.min(h,2*f[a]-i))),m<i?(o=i,i=m):o=m),v[0]!=i||v[1]!=o)return a?n=null:t=null,v[0]=i,v[1]=o,!0}function R(){O(),x.style("pointer-events","all").selectAll(".resize").style("display",d.empty()?"none":null),e.select("body").style("cursor",null),M.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),C(),b({type:"brushend"})}x.style("pointer-events","none").selectAll(".resize").style("display",null),e.select("body").style("cursor",y.style("cursor")),b({type:"brushstart"}),O()}return d.event=function(a){a.each(function(){var a=r.of(this,arguments),i={x:s,y:l,i:t,j:n},o=this.__chart__||i;this.__chart__=i,ds?e.select(this).transition().each("start.brush",function(){t=o.i,n=o.j,s=o.x,l=o.y,a({type:"brushstart"})}).tween("brush:brush",function(){var e=Xa(s,i.x),r=Xa(l,i.y);return t=n=null,function(t){s=i.x=e(t),l=i.y=r(t),a({type:"brush",mode:"resize"})}}).each("end.brush",function(){t=i.i,n=i.j,a({type:"brush",mode:"resize"}),a({type:"brushend"})}):(a({type:"brushstart"}),a({type:"brush",mode:"resize"}),a({type:"brushend"}))})},d.x=function(e){return arguments.length?(f=Cs[!(a=e)<<1|!i],d):a},d.y=function(e){return arguments.length?(f=Cs[!a<<1|!(i=e)],d):i},d.clamp=function(e){return arguments.length?(a&&i?(u=!!e[0],c=!!e[1]):a?u=!!e:i&&(c=!!e),d):a&&i?[u,c]:a?u:i?c:null},d.extent=function(e){var r,o,u,c,f;return arguments.length?(a&&(r=e[0],o=e[1],i&&(r=r[0],o=o[0]),t=[r,o],a.invert&&(r=a(r),o=a(o)),o<r&&(f=r,r=o,o=f),r==s[0]&&o==s[1]||(s=[r,o])),i&&(u=e[0],c=e[1],a&&(u=u[1],c=c[1]),n=[u,c],i.invert&&(u=i(u),c=i(c)),c<u&&(f=u,u=c,c=f),u==l[0]&&c==l[1]||(l=[u,c])),d):(a&&(t?(r=t[0],o=t[1]):(r=s[0],o=s[1],a.invert&&(r=a.invert(r),o=a.invert(o)),o<r&&(f=r,r=o,o=f))),i&&(n?(u=n[0],c=n[1]):(u=l[0],c=l[1],i.invert&&(u=i.invert(u),c=i.invert(c)),c<u&&(f=u,u=c,c=f))),a&&i?[[r,u],[o,c]]:a?[r,o]:i&&[u,c])},d.clear=function(){return d.empty()||(s=[0,0],l=[0,0],t=n=null),d},d.empty=function(){return!!a&&s[0]==s[1]||!!i&&l[0]==l[1]},e.rebind(d,r,"on")};var ks={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Cs=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Es=Lt.format=ln.timeFormat,Ms=Es.utc,As=Ms("%Y-%m-%dT%H:%M:%S.%LZ");function Ss(e){return e.toISOString()}function Os(t,n,r){function a(e){return t(e)}function i(t,r){var a=t[1]-t[0],i=a/r,o=e.bisect(Rs,i);return o==Rs.length?[n.year,go(t.map(function(e){return e/31536e6}),r)[2]]:o?n[i/Rs[o-1]<Rs[o]/i?o-1:o]:[Is,go(t,r)[2]]}return a.invert=function(e){return Ps(t.invert(e))},a.domain=function(e){return arguments.length?(t.domain(e),a):t.domain().map(Ps)},a.nice=function(e,t){var n=a.domain(),r=so(n),o=null==e?i(r,10):"number"==typeof e&&i(r,e);function s(n){return!isNaN(n)&&!e.range(n,Ps(+n+1),t).length}return o&&(e=o[0],t=o[1]),a.domain(co(n,t>1?{floor:function(t){for(;s(t=e.floor(t));)t=Ps(t-1);return t},ceil:function(t){for(;s(t=e.ceil(t));)t=Ps(+t+1);return t}}:e))},a.ticks=function(e,t){var n=so(a.domain()),r=null==e?i(n,10):"number"==typeof e?i(n,e):!e.range&&[{range:e},t];return r&&(e=r[0],t=r[1]),e.range(n[0],Ps(+n[1]+1),t<1?1:t)},a.tickFormat=function(){return r},a.copy=function(){return Os(t.copy(),n,r)},mo(a,t)}function Ps(e){return new Date(e)}Es.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Ss:As,Ss.parse=function(e){var t=new Date(e);return isNaN(t)?null:t},Ss.toString=As.toString,Lt.second=jt(function(e){return new Dt(1e3*Math.floor(e/1e3))},function(e,t){e.setTime(e.getTime()+1e3*Math.floor(t))},function(e){return e.getSeconds()}),Lt.seconds=Lt.second.range,Lt.seconds.utc=Lt.second.utc.range,Lt.minute=jt(function(e){return new Dt(6e4*Math.floor(e/6e4))},function(e,t){e.setTime(e.getTime()+6e4*Math.floor(t))},function(e){return e.getMinutes()}),Lt.minutes=Lt.minute.range,Lt.minutes.utc=Lt.minute.utc.range,Lt.hour=jt(function(e){var t=e.getTimezoneOffset()/60;return new Dt(36e5*(Math.floor(e/36e5-t)+t))},function(e,t){e.setTime(e.getTime()+36e5*Math.floor(t))},function(e){return e.getHours()}),Lt.hours=Lt.hour.range,Lt.hours.utc=Lt.hour.utc.range,Lt.month=jt(function(e){return(e=Lt.day(e)).setDate(1),e},function(e,t){e.setMonth(e.getMonth()+t)},function(e){return e.getMonth()}),Lt.months=Lt.month.range,Lt.months.utc=Lt.month.utc.range;var Rs=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Ls=[[Lt.second,1],[Lt.second,5],[Lt.second,15],[Lt.second,30],[Lt.minute,1],[Lt.minute,5],[Lt.minute,15],[Lt.minute,30],[Lt.hour,1],[Lt.hour,3],[Lt.hour,6],[Lt.hour,12],[Lt.day,1],[Lt.day,2],[Lt.week,1],[Lt.month,1],[Lt.month,3],[Lt.year,1]],Ds=Es.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%a %d",function(e){return e.getDay()&&1!=e.getDate()}],["%b %d",function(e){return 1!=e.getDate()}],["%B",function(e){return e.getMonth()}],["%Y",Yn]]),Is={range:function(t,n,r){return e.range(Math.ceil(t/r)*r,+n,r).map(Ps)},floor:P,ceil:P};Ls.year=Lt.year,Lt.scale=function(){return Os(e.scale.linear(),Ls,Ds)};var zs=Ls.map(function(e){return[e[0].utc,e[1]]}),js=Ms.multi([[".%L",function(e){return e.getUTCMilliseconds()}],[":%S",function(e){return e.getUTCSeconds()}],["%I:%M",function(e){return e.getUTCMinutes()}],["%I %p",function(e){return e.getUTCHours()}],["%a %d",function(e){return e.getUTCDay()&&1!=e.getUTCDate()}],["%b %d",function(e){return 1!=e.getUTCDate()}],["%B",function(e){return e.getUTCMonth()}],["%Y",Yn]]);function Ns(e){return JSON.parse(e.responseText)}function Fs(e){var t=a.createRange();return t.selectNode(a.body),t.createContextualFragment(e.responseText)}zs.year=Lt.year.utc,Lt.scale.utc=function(){return Os(e.scale.linear(),zs,js)},e.text=gt(function(e){return e.responseText}),e.json=function(e,t){return yt(e,"application/json",Ns,t)},e.html=function(e,t){return yt(e,"text/html",Fs,t)},e.xml=gt(function(e){return e.responseXML}),"object"==typeof t&&t.exports?t.exports=e:this.d3=e}()},{}],149:[function(e,t,n){t.exports=function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e]}},{}],150:[function(e,t,n){"use strict";var r=e("incremental-convex-hull"),a=e("uniq");function i(e,t){this.point=e,this.index=t}function o(e,t){for(var n=e.point,r=t.point,a=n.length,i=0;i<a;++i){var o=r[i]-n[i];if(o)return o}return 0}t.exports=function(e,t){var n=e.length;if(0===n)return[];var s=e[0].length;if(s<1)return[];if(1===s)return function(e,t,n){if(1===e)return n?[[-1,0]]:[];var r=t.map(function(e,t){return[e[0],t]});r.sort(function(e,t){return e[0]-t[0]});for(var a=new Array(e-1),i=1;i<e;++i){var o=r[i-1],s=r[i];a[i-1]=[o[1],s[1]]}return n&&a.push([-1,a[0][1]],[a[e-1][1],-1]),a}(n,e,t);for(var l=new Array(n),u=1,c=0;c<n;++c){for(var f=e[c],d=new Array(s+1),p=0,h=0;h<s;++h){var m=f[h];d[h]=m,p+=m*m}d[s]=p,l[c]=new i(d,c),u=Math.max(p,u)}a(l,o),n=l.length;for(var v=new Array(n+s+1),g=new Array(n+s+1),y=(s+1)*(s+1)*u,b=new Array(s+1),c=0;c<=s;++c)b[c]=0;b[s]=y,v[0]=b.slice(),g[0]=-1;for(var c=0;c<=s;++c){var d=b.slice();d[c]=1,v[c+1]=d,g[c+1]=-1}for(var c=0;c<n;++c){var x=l[c];v[c+s+1]=x.point,g[c+s+1]=x.index}var _=r(v,!1);if(_=t?_.filter(function(e){for(var t=0,n=0;n<=s;++n){var r=g[e[n]];if(r<0&&++t>=2)return!1;e[n]=r}return!0}):_.filter(function(e){for(var t=0;t<=s;++t){var n=g[e[t]];if(n<0)return!1;e[t]=n}return!0}),1&s)for(var c=0;c<_.length;++c){var x=_[c],d=x[0];x[0]=x[1],x[1]=d}return _}},{"incremental-convex-hull":396,uniq:524}],151:[function(e,t,n){"use strict";t.exports=o;var r=o.canvas=document.createElement("canvas"),a=r.getContext("2d"),i=s([32,126]);function o(e,t){Array.isArray(e)&&(e=e.join(", "));var n,r={},o=16,l=.05;t&&(2===t.length&&"number"==typeof t[0]?n=s(t):Array.isArray(t)?n=t:(t.o?n=s(t.o):t.pairs&&(n=t.pairs),t.fontSize&&(o=t.fontSize),null!=t.threshold&&(l=t.threshold))),n||(n=i),a.font=o+"px "+e;for(var u=0;u<n.length;u++){var c=n[u],f=a.measureText(c[0]).width+a.measureText(c[1]).width,d=a.measureText(c).width;if(Math.abs(f-d)>o*l){var p=(d-f)/o;r[c]=1e3*p}}return r}function s(e){for(var t=[],n=e[0];n<=e[1];n++)for(var r=String.fromCharCode(n),a=e[0];a<e[1];a++){var i=String.fromCharCode(a),o=r+i;t.push(o)}return t}o.createPairs=s,o.ascii=i},{}],152:[function(e,t,n){(function(e){var n=!1;if("undefined"!=typeof Float64Array){var r=new Float64Array(1),a=new Uint32Array(r.buffer);r[0]=1,n=!0,1072693248===a[1]?(t.exports=function(e){return r[0]=e,[a[0],a[1]]},t.exports.pack=function(e,t){return a[0]=e,a[1]=t,r[0]},t.exports.lo=function(e){return r[0]=e,a[0]},t.exports.hi=function(e){return r[0]=e,a[1]}):1072693248===a[0]?(t.exports=function(e){return r[0]=e,[a[1],a[0]]},t.exports.pack=function(e,t){return a[1]=e,a[0]=t,r[0]},t.exports.lo=function(e){return r[0]=e,a[1]},t.exports.hi=function(e){return r[0]=e,a[0]}):n=!1}if(!n){var i=new e(8);t.exports=function(e){return i.writeDoubleLE(e,0,!0),[i.readUInt32LE(0,!0),i.readUInt32LE(4,!0)]},t.exports.pack=function(e,t){return i.writeUInt32LE(e,0,!0),i.writeUInt32LE(t,4,!0),i.readDoubleLE(0,!0)},t.exports.lo=function(e){return i.writeDoubleLE(e,0,!0),i.readUInt32LE(0,!0)},t.exports.hi=function(e){return i.writeDoubleLE(e,0,!0),i.readUInt32LE(4,!0)}}t.exports.sign=function(e){return t.exports.hi(e)>>>31},t.exports.exponent=function(e){var n=t.exports.hi(e);return(n<<1>>>21)-1023},t.exports.fraction=function(e){var n=t.exports.lo(e),r=t.exports.hi(e),a=1048575&r;return 2146435072&r&&(a+=1<<20),[n,a]},t.exports.denormalized=function(e){var n=t.exports.hi(e);return!(2146435072&n)}}).call(this,e("buffer").Buffer)},{buffer:93}],153:[function(e,t,n){var r=e("abs-svg-path"),a=e("normalize-svg-path"),i={M:"moveTo",C:"bezierCurveTo"};t.exports=function(e,t){e.beginPath(),a(r(t)).forEach(function(t){var n=t[0],r=t.slice(1);e[i[n]].apply(e,r)}),e.closePath()}},{"abs-svg-path":48,"normalize-svg-path":435}],154:[function(e,t,n){t.exports=function(e){switch(e){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},{}],155:[function(e,t,n){"use strict";t.exports=function(e,t){switch(void 0===t&&(t=0),typeof e){case"number":if(e>0)return function(e,t){var n,r;for(n=new Array(e),r=0;r<e;++r)n[r]=t;return n}(0|e,t);break;case"object":if("number"==typeof e.length)return function e(t,n,r){var a=0|t[r];if(a<=0)return[];var i,o=new Array(a);if(r===t.length-1)for(i=0;i<a;++i)o[i]=n;else for(i=0;i<a;++i)o[i]=e(t,n,r+1);return o}(e,t,0)}return[]}},{}],156:[function(e,t,n){"use strict";function r(e,t,n){n=n||2;var r,s,l,u,c,p,m,v=t&&t.length,g=v?t[0]*n:e.length,y=a(e,0,g,n,!0),b=[];if(!y)return b;if(v&&(y=function(e,t,n,r){var o,s,l,u,c,p=[];for(o=0,s=t.length;o<s;o++)l=t[o]*r,u=o<s-1?t[o+1]*r:e.length,(c=a(e,l,u,r,!1))===c.next&&(c.steiner=!0),p.push(h(c));for(p.sort(f),o=0;o<p.length;o++)d(p[o],n),n=i(n,n.next);return n}(e,t,y,n)),e.length>80*n){r=l=e[0],s=u=e[1];for(var x=n;x<g;x+=n)c=e[x],p=e[x+1],c<r&&(r=c),p<s&&(s=p),c>l&&(l=c),p>u&&(u=p);m=0!==(m=Math.max(l-r,u-s))?1/m:0}return o(y,b,n,r,s,m),b}function a(e,t,n,r,a){var i,o;if(a===C(e,t,n,r)>0)for(i=t;i<n;i+=r)o=w(i,e[i],e[i+1],o);else for(i=n-r;i>=t;i-=r)o=w(i,e[i],e[i+1],o);return o&&y(o,o.next)&&(T(o),o=o.next),o}function i(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!y(r,r.next)&&0!==g(r.prev,r,r.next))r=r.next;else{if(T(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function o(e,t,n,r,a,f,d){if(e){!d&&f&&function(e,t,n,r){var a=e;do{null===a.z&&(a.z=p(a.x,a.y,t,n,r)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next}while(a!==e);a.prevZ.nextZ=null,a.prevZ=null,function(e){var t,n,r,a,i,o,s,l,u=1;do{for(n=e,e=null,i=null,o=0;n;){for(o++,r=n,s=0,t=0;t<u&&(s++,r=r.nextZ);t++);for(l=u;s>0||l>0&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(a=n,n=n.nextZ,s--):(a=r,r=r.nextZ,l--),i?i.nextZ=a:e=a,a.prevZ=i,i=a;n=r}i.nextZ=null,u*=2}while(o>1)}(a)}(e,r,a,f);for(var h,m,v=e;e.prev!==e.next;)if(h=e.prev,m=e.next,f?l(e,r,a,f):s(e))t.push(h.i/n),t.push(e.i/n),t.push(m.i/n),T(e),e=m.next,v=m.next;else if((e=m)===v){d?1===d?o(e=u(e,t,n),t,n,r,a,f,2):2===d&&c(e,t,n,r,a,f):o(i(e),t,n,r,a,f,1);break}}}function s(e){var t=e.prev,n=e,r=e.next;if(g(t,n,r)>=0)return!1;for(var a=e.next.next;a!==e.prev;){if(m(t.x,t.y,n.x,n.y,r.x,r.y,a.x,a.y)&&g(a.prev,a,a.next)>=0)return!1;a=a.next}return!0}function l(e,t,n,r){var a=e.prev,i=e,o=e.next;if(g(a,i,o)>=0)return!1;for(var s=a.x<i.x?a.x<o.x?a.x:o.x:i.x<o.x?i.x:o.x,l=a.y<i.y?a.y<o.y?a.y:o.y:i.y<o.y?i.y:o.y,u=a.x>i.x?a.x>o.x?a.x:o.x:i.x>o.x?i.x:o.x,c=a.y>i.y?a.y>o.y?a.y:o.y:i.y>o.y?i.y:o.y,f=p(s,l,t,n,r),d=p(u,c,t,n,r),h=e.prevZ,v=e.nextZ;h&&h.z>=f&&v&&v.z<=d;){if(h!==e.prev&&h!==e.next&&m(a.x,a.y,i.x,i.y,o.x,o.y,h.x,h.y)&&g(h.prev,h,h.next)>=0)return!1;if(h=h.prevZ,v!==e.prev&&v!==e.next&&m(a.x,a.y,i.x,i.y,o.x,o.y,v.x,v.y)&&g(v.prev,v,v.next)>=0)return!1;v=v.nextZ}for(;h&&h.z>=f;){if(h!==e.prev&&h!==e.next&&m(a.x,a.y,i.x,i.y,o.x,o.y,h.x,h.y)&&g(h.prev,h,h.next)>=0)return!1;h=h.prevZ}for(;v&&v.z<=d;){if(v!==e.prev&&v!==e.next&&m(a.x,a.y,i.x,i.y,o.x,o.y,v.x,v.y)&&g(v.prev,v,v.next)>=0)return!1;v=v.nextZ}return!0}function u(e,t,n){var r=e;do{var a=r.prev,i=r.next.next;!y(a,i)&&b(a,r,r.next,i)&&x(a,i)&&x(i,a)&&(t.push(a.i/n),t.push(r.i/n),t.push(i.i/n),T(r),T(r.next),r=e=i),r=r.next}while(r!==e);return r}function c(e,t,n,r,a,s){var l=e;do{for(var u=l.next.next;u!==l.prev;){if(l.i!==u.i&&v(l,u)){var c=_(l,u);return l=i(l,l.next),c=i(c,c.next),o(l,t,n,r,a,s),void o(c,t,n,r,a,s)}u=u.next}l=l.next}while(l!==e)}function f(e,t){return e.x-t.x}function d(e,t){if(t=function(e,t){var n,r=t,a=e.x,i=e.y,o=-1/0;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var s=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=a&&s>o){if(o=s,s===a){if(i===r.y)return r;if(i===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(a===o)return n.prev;var l,u=n,c=n.x,f=n.y,d=1/0;for(r=n.next;r!==u;)a>=r.x&&r.x>=c&&a!==r.x&&m(i<f?a:o,i,c,f,i<f?o:a,i,r.x,r.y)&&((l=Math.abs(i-r.y)/(a-r.x))<d||l===d&&r.x>n.x)&&x(r,e)&&(n=r,d=l),r=r.next;return n}(e,t)){var n=_(t,e);i(n,n.next)}}function p(e,t,n,r,a){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*a)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*a)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function h(e){var t=e,n=e;do{t.x<n.x&&(n=t),t=t.next}while(t!==e);return n}function m(e,t,n,r,a,i,o,s){return(a-o)*(t-s)-(e-o)*(i-s)>=0&&(e-o)*(r-s)-(n-o)*(t-s)>=0&&(n-o)*(i-s)-(a-o)*(r-s)>=0}function v(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&b(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&x(e,t)&&x(t,e)&&function(e,t){var n=e,r=!1,a=(e.x+t.x)/2,i=(e.y+t.y)/2;do{n.y>i!=n.next.y>i&&n.next.y!==n.y&&a<(n.next.x-n.x)*(i-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)}function g(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function y(e,t){return e.x===t.x&&e.y===t.y}function b(e,t,n,r){return!!(y(e,t)&&y(n,r)||y(e,r)&&y(n,t))||g(e,t,n)>0!=g(e,t,r)>0&&g(n,r,e)>0!=g(n,r,t)>0}function x(e,t){return g(e.prev,e,e.next)<0?g(e,t,e.next)>=0&&g(e,e.prev,t)>=0:g(e,t,e.prev)<0||g(e,e.next,t)<0}function _(e,t){var n=new k(e.i,e.x,e.y),r=new k(t.i,t.x,t.y),a=e.next,i=t.prev;return e.next=t,t.prev=e,n.next=a,a.prev=n,r.next=n,n.prev=r,i.next=r,r.prev=i,r}function w(e,t,n,r){var a=new k(e,t,n);return r?(a.next=r.next,a.prev=r,r.next.prev=a,r.next=a):(a.prev=a,a.next=a),a}function T(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function k(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function C(e,t,n,r){for(var a=0,i=t,o=n-r;i<n;i+=r)a+=(e[o]-e[i])*(e[i+1]+e[o+1]),o=i;return a}t.exports=r,t.exports.default=r,r.deviation=function(e,t,n,r){var a=t&&t.length,i=a?t[0]*n:e.length,o=Math.abs(C(e,0,i,n));if(a)for(var s=0,l=t.length;s<l;s++){var u=t[s]*n,c=s<l-1?t[s+1]*n:e.length;o-=Math.abs(C(e,u,c,n))}var f=0;for(s=0;s<r.length;s+=3){var d=r[s]*n,p=r[s+1]*n,h=r[s+2]*n;f+=Math.abs((e[d]-e[h])*(e[p+1]-e[d+1])-(e[d]-e[p])*(e[h+1]-e[d+1]))}return 0===o&&0===f?0:Math.abs((f-o)/o)},r.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,a=0;a<e.length;a++){for(var i=0;i<e[a].length;i++)for(var o=0;o<t;o++)n.vertices.push(e[a][i][o]);a>0&&(r+=e[a-1].length,n.holes.push(r))}return n}},{}],157:[function(e,t,n){"use strict";t.exports=function(e,t){var n=e.length;if("number"!=typeof t){t=0;for(var a=0;a<n;++a){var i=e[a];t=Math.max(t,i[0],i[1])}t=1+(0|t)}t|=0;for(var o=new Array(t),a=0;a<t;++a)o[a]=[];for(var a=0;a<n;++a){var i=e[a];o[i[0]].push(i[1]),o[i[1]].push(i[0])}for(var s=0;s<t;++s)r(o[s],function(e,t){return e-t});return o};var r=e("uniq")},{uniq:524}],158:[function(e,t,n){"use strict";var r=e("../../object/valid-value");t.exports=function(){return r(this).length=0,this}},{"../../object/valid-value":190}],159:[function(e,t,n){"use strict";t.exports=e("./is-implemented")()?Array.from:e("./shim")},{"./is-implemented":160,"./shim":161}],160:[function(e,t,n){"use strict";t.exports=function(){var e,t,n=Array.from;return"function"==typeof n&&(t=n(e=["raz","dwa"]),Boolean(t&&t!==e&&"dwa"===t[1]))}},{}],161:[function(e,t,n){"use strict";var r=e("es6-symbol").iterator,a=e("../../function/is-arguments"),i=e("../../function/is-function"),o=e("../../number/to-pos-integer"),s=e("../../object/valid-callable"),l=e("../../object/valid-value"),u=e("../../object/is-value"),c=e("../../string/is-string"),f=Array.isArray,d=Function.prototype.call,p={configurable:!0,enumerable:!0,writable:!0,value:null},h=Object.defineProperty;t.exports=function(e){var t,n,m,v,g,y,b,x,_,w,T=arguments[1],k=arguments[2];if(e=Object(l(e)),u(T)&&s(T),this&&this!==Array&&i(this))t=this;else{if(!T){if(a(e))return 1!==(g=e.length)?Array.apply(null,e):((v=new Array(1))[0]=e[0],v);if(f(e)){for(v=new Array(g=e.length),n=0;n<g;++n)v[n]=e[n];return v}}v=[]}if(!f(e))if(void 0!==(_=e[r])){for(b=s(_).call(e),t&&(v=new t),x=b.next(),n=0;!x.done;)w=T?d.call(T,k,x.value,n):x.value,t?(p.value=w,h(v,n,p)):v[n]=w,x=b.next(),++n;g=n}else if(c(e)){for(g=e.length,t&&(v=new t),n=0,m=0;n<g;++n)w=e[n],n+1<g&&(y=w.charCodeAt(0))>=55296&&y<=56319&&(w+=e[++n]),w=T?d.call(T,k,w,m):w,t?(p.value=w,h(v,m,p)):v[m]=w,++m;g=m}if(void 0===g)for(g=o(e.length),t&&(v=new t(g)),n=0;n<g;++n)w=T?d.call(T,k,e[n],n):e[n],t?(p.value=w,h(v,n,p)):v[n]=w;return t&&(p.value=null,v.length=g),v}},{"../../function/is-arguments":162,"../../function/is-function":163,"../../number/to-pos-integer":169,"../../object/is-value":179,"../../object/valid-callable":188,"../../object/valid-value":190,"../../string/is-string":194,"es6-symbol":204}],162:[function(e,t,n){"use strict";var r=Object.prototype.toString,a=r.call(function(){return arguments}());t.exports=function(e){return r.call(e)===a}},{}],163:[function(e,t,n){"use strict";var r=Object.prototype.toString,a=r.call(e("./noop"));t.exports=function(e){return"function"==typeof e&&r.call(e)===a}},{"./noop":164}],164:[function(e,t,n){"use strict";t.exports=function(){}},{}],165:[function(e,t,n){"use strict";t.exports=e("./is-implemented")()?Math.sign:e("./shim")},{"./is-implemented":166,"./shim":167}],166:[function(e,t,n){"use strict";t.exports=function(){var e=Math.sign;return"function"==typeof e&&1===e(10)&&-1===e(-20)}},{}],167:[function(e,t,n){"use strict";t.exports=function(e){return e=Number(e),isNaN(e)||0===e?e:e>0?1:-1}},{}],168:[function(e,t,n){"use strict";var r=e("../math/sign"),a=Math.abs,i=Math.floor;t.exports=function(e){return isNaN(e)?0:0!==(e=Number(e))&&isFinite(e)?r(e)*i(a(e)):e}},{"../math/sign":165}],169:[function(e,t,n){"use strict";var r=e("./to-integer"),a=Math.max;t.exports=function(e){return a(0,r(e))}},{"./to-integer":168}],170:[function(e,t,n){"use strict";var r=e("./valid-callable"),a=e("./valid-value"),i=Function.prototype.bind,o=Function.prototype.call,s=Object.keys,l=Object.prototype.propertyIsEnumerable;t.exports=function(e,t){return function(n,u){var c,f=arguments[2],d=arguments[3];return n=Object(a(n)),r(u),c=s(n),d&&c.sort("function"==typeof d?i.call(d,n):void 0),"function"!=typeof e&&(e=c[e]),o.call(e,c,function(e,r){return l.call(n,e)?o.call(u,f,n[e],e,n,r):t})}}},{"./valid-callable":188,"./valid-value":190}],171:[function(e,t,n){"use strict";t.exports=e("./is-implemented")()?Object.assign:e("./shim")},{"./is-implemented":172,"./shim":173}],172:[function(e,t,n){"use strict";t.exports=function(){var e,t=Object.assign;return"function"==typeof t&&(t(e={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}},{}],173:[function(e,t,n){"use strict";var r=e("../keys"),a=e("../valid-value"),i=Math.max;t.exports=function(e,t){var n,o,s,l=i(arguments.length,2);for(e=Object(a(e)),s=function(r){try{e[r]=t[r]}catch(e){n||(n=e)}},o=1;o<l;++o)t=arguments[o],r(t).forEach(s);if(void 0!==n)throw n;return e}},{"../keys":180,"../valid-value":190}],174:[function(e,t,n){"use strict";var r=e("../array/from"),a=e("./assign"),i=e("./valid-value");t.exports=function(e){var t=Object(i(e)),n=arguments[1],o=Object(arguments[2]);if(t!==e&&!n)return t;var s={};return n?r(n,function(t){(o.ensure||t in e)&&(s[t]=e[t])}):a(s,e),s}},{"../array/from":159,"./assign":171,"./valid-value":190}],175:[function(e,t,n){"use strict";var r,a=Object.create;e("./set-prototype-of/is-implemented")()||(r=e("./set-prototype-of/shim")),t.exports=function(){var e,t,n;return r?1!==r.level?a:(e={},t={},n={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(e){t[e]="__proto__"!==e?n:{configurable:!0,enumerable:!1,writable:!0,value:void 0}}),Object.defineProperties(e,t),Object.defineProperty(r,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:e}),function(t,n){return a(null===t?e:t,n)}):a}()},{"./set-prototype-of/is-implemented":186,"./set-prototype-of/shim":187}],176:[function(e,t,n){"use strict";t.exports=e("./_iterate")("forEach")},{"./_iterate":170}],177:[function(e,t,n){"use strict";t.exports=function(e){return"function"==typeof e}},{}],178:[function(e,t,n){"use strict";var r=e("./is-value"),a={function:!0,object:!0};t.exports=function(e){return r(e)&&a[typeof e]||!1}},{"./is-value":179}],179:[function(e,t,n){"use strict";var r=e("../function/noop")();t.exports=function(e){return e!==r&&null!==e}},{"../function/noop":164}],180:[function(e,t,n){"use strict";t.exports=e("./is-implemented")()?Object.keys:e("./shim")},{"./is-implemented":181,"./shim":182}],181:[function(e,t,n){"use strict";t.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},{}],182:[function(e,t,n){"use strict";var r=e("../is-value"),a=Object.keys;t.exports=function(e){return a(r(e)?Object(e):e)}},{"../is-value":179}],183:[function(e,t,n){"use strict";var r=e("./valid-callable"),a=e("./for-each"),i=Function.prototype.call;t.exports=function(e,t){var n={},o=arguments[2];return r(t),a(e,function(e,r,a,s){n[r]=i.call(t,o,e,r,a,s)}),n}},{"./for-each":176,"./valid-callable":188}],184:[function(e,t,n){"use strict";var r=e("./is-value"),a=Array.prototype.forEach,i=Object.create;t.exports=function(e){var t=i(null);return a.call(arguments,function(e){r(e)&&function(e,t){var n;for(n in e)t[n]=e[n]}(Object(e),t)}),t}},{"./is-value":179}],185:[function(e,t,n){"use strict";t.exports=e("./is-implemented")()?Object.setPrototypeOf:e("./shim")},{"./is-implemented":186,"./shim":187}],186:[function(e,t,n){"use strict";var r=Object.create,a=Object.getPrototypeOf,i={};t.exports=function(){var e=Object.setPrototypeOf,t=arguments[0]||r;return"function"==typeof e&&a(e(t(null),i))===i}},{}],187:[function(e,t,n){"use strict";var r,a=e("../is-object"),i=e("../valid-value"),o=Object.prototype.isPrototypeOf,s=Object.defineProperty,l={configurable:!0,enumerable:!1,writable:!0,value:void 0};r=function(e,t){if(i(e),null===t||a(t))return e;throw new TypeError("Prototype must be null or an object")},t.exports=function(e){var t,n;return e?(2===e.level?e.set?(n=e.set,t=function(e,t){return n.call(r(e,t),t),e}):t=function(e,t){return r(e,t).__proto__=t,e}:t=function e(t,n){var a;return r(t,n),(a=o.call(e.nullPolyfill,t))&&delete e.nullPolyfill.__proto__,null===n&&(n=e.nullPolyfill),t.__proto__=n,a&&s(e.nullPolyfill,"__proto__",l),t},Object.defineProperty(t,"level",{configurable:!1,enumerable:!1,writable:!1,value:e.level})):null}(function(){var e,t=Object.create(null),n={},r=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(r){try{(e=r.set).call(t,n)}catch(e){}if(Object.getPrototypeOf(t)===n)return{set:e,level:2}}return t.__proto__=n,Object.getPrototypeOf(t)===n?{level:2}:((t={}).__proto__=n,Object.getPrototypeOf(t)===n&&{level:1})}()),e("../create")},{"../create":175,"../is-object":178,"../valid-value":190}],188:[function(e,t,n){"use strict";t.exports=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e}},{}],189:[function(e,t,n){"use strict";var r=e("./is-object");t.exports=function(e){if(!r(e))throw new TypeError(e+" is not an Object");return e}},{"./is-object":178}],190:[function(e,t,n){"use strict";var r=e("./is-value");t.exports=function(e){if(!r(e))throw new TypeError("Cannot use null or undefined");return e}},{"./is-value":179}],191:[function(e,t,n){"use strict";t.exports=e("./is-implemented")()?String.prototype.contains:e("./shim")},{"./is-implemented":192,"./shim":193}],192:[function(e,t,n){"use strict";var r="razdwatrzy";t.exports=function(){return"function"==typeof r.contains&&!0===r.contains("dwa")&&!1===r.contains("foo")}},{}],193:[function(e,t,n){"use strict";var r=String.prototype.indexOf;t.exports=function(e){return r.call(this,e,arguments[1])>-1}},{}],194:[function(e,t,n){"use strict";var r=Object.prototype.toString,a=r.call("");t.exports=function(e){return"string"==typeof e||e&&"object"==typeof e&&(e instanceof String||r.call(e)===a)||!1}},{}],195:[function(e,t,n){"use strict";var r=Object.create(null),a=Math.random;t.exports=function(){var e;do{e=a().toString(36).slice(2)}while(r[e]);return e}},{}],196:[function(e,t,n){"use strict";var r,a=e("es5-ext/object/set-prototype-of"),i=e("es5-ext/string/#/contains"),o=e("d"),s=e("es6-symbol"),l=e("./"),u=Object.defineProperty;r=t.exports=function(e,t){if(!(this instanceof r))throw new TypeError("Constructor requires 'new'");l.call(this,e),t=t?i.call(t,"key+value")?"key+value":i.call(t,"key")?"key":"value":"value",u(this,"__kind__",o("",t))},a&&a(r,l),delete r.prototype.constructor,r.prototype=Object.create(l.prototype,{_resolve:o(function(e){return"value"===this.__kind__?this.__list__[e]:"key+value"===this.__kind__?[e,this.__list__[e]]:e})}),u(r.prototype,s.toStringTag,o("c","Array Iterator"))},{"./":199,d:139,"es5-ext/object/set-prototype-of":185,"es5-ext/string/#/contains":191,"es6-symbol":204}],197:[function(e,t,n){"use strict";var r=e("es5-ext/function/is-arguments"),a=e("es5-ext/object/valid-callable"),i=e("es5-ext/string/is-string"),o=e("./get"),s=Array.isArray,l=Function.prototype.call,u=Array.prototype.some;t.exports=function(e,t){var n,c,f,d,p,h,m,v,g=arguments[2];if(s(e)||r(e)?n="array":i(e)?n="string":e=o(e),a(t),f=function(){d=!0},"array"!==n)if("string"!==n)for(c=e.next();!c.done;){if(l.call(t,g,c.value,f),d)return;c=e.next()}else for(h=e.length,p=0;p<h&&(m=e[p],p+1<h&&(v=m.charCodeAt(0))>=55296&&v<=56319&&(m+=e[++p]),l.call(t,g,m,f),!d);++p);else u.call(e,function(e){return l.call(t,g,e,f),d})}},{"./get":198,"es5-ext/function/is-arguments":162,"es5-ext/object/valid-callable":188,"es5-ext/string/is-string":194}],198:[function(e,t,n){"use strict";var r=e("es5-ext/function/is-arguments"),a=e("es5-ext/string/is-string"),i=e("./array"),o=e("./string"),s=e("./valid-iterable"),l=e("es6-symbol").iterator;t.exports=function(e){return"function"==typeof s(e)[l]?e[l]():r(e)?new i(e):a(e)?new o(e):new i(e)}},{"./array":196,"./string":201,"./valid-iterable":202,"es5-ext/function/is-arguments":162,"es5-ext/string/is-string":194,"es6-symbol":204}],199:[function(e,t,n){"use strict";var r,a=e("es5-ext/array/#/clear"),i=e("es5-ext/object/assign"),o=e("es5-ext/object/valid-callable"),s=e("es5-ext/object/valid-value"),l=e("d"),u=e("d/auto-bind"),c=e("es6-symbol"),f=Object.defineProperty,d=Object.defineProperties;t.exports=r=function(e,t){if(!(this instanceof r))throw new TypeError("Constructor requires 'new'");d(this,{__list__:l("w",s(e)),__context__:l("w",t),__nextIndex__:l("w",0)}),t&&(o(t.on),t.on("_add",this._onAdd),t.on("_delete",this._onDelete),t.on("_clear",this._onClear))},delete r.prototype.constructor,d(r.prototype,i({_next:l(function(){var e;if(this.__list__)return this.__redo__&&void 0!==(e=this.__redo__.shift())?e:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:l(function(){return this._createResult(this._next())}),_createResult:l(function(e){return void 0===e?{done:!0,value:void 0}:{done:!1,value:this._resolve(e)}}),_resolve:l(function(e){return this.__list__[e]}),_unBind:l(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:l(function(){return"[object "+(this[c.toStringTag]||"Object")+"]"})},u({_onAdd:l(function(e){e>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach(function(t,n){t>=e&&(this.__redo__[n]=++t)},this),this.__redo__.push(e)):f(this,"__redo__",l("c",[e])))}),_onDelete:l(function(e){var t;e>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(-1!==(t=this.__redo__.indexOf(e))&&this.__redo__.splice(t,1),this.__redo__.forEach(function(t,n){t>e&&(this.__redo__[n]=--t)},this)))}),_onClear:l(function(){this.__redo__&&a.call(this.__redo__),this.__nextIndex__=0})}))),f(r.prototype,c.iterator,l(function(){return this}))},{d:139,"d/auto-bind":138,"es5-ext/array/#/clear":158,"es5-ext/object/assign":171,"es5-ext/object/valid-callable":188,"es5-ext/object/valid-value":190,"es6-symbol":204}],200:[function(e,t,n){"use strict";var r=e("es5-ext/function/is-arguments"),a=e("es5-ext/object/is-value"),i=e("es5-ext/string/is-string"),o=e("es6-symbol").iterator,s=Array.isArray;t.exports=function(e){return!(!a(e)||!s(e)&&!i(e)&&!r(e)&&"function"!=typeof e[o])}},{"es5-ext/function/is-arguments":162,"es5-ext/object/is-value":179,"es5-ext/string/is-string":194,"es6-symbol":204}],201:[function(e,t,n){"use strict";var r,a=e("es5-ext/object/set-prototype-of"),i=e("d"),o=e("es6-symbol"),s=e("./"),l=Object.defineProperty;r=t.exports=function(e){if(!(this instanceof r))throw new TypeError("Constructor requires 'new'");e=String(e),s.call(this,e),l(this,"__length__",i("",e.length))},a&&a(r,s),delete r.prototype.constructor,r.prototype=Object.create(s.prototype,{_next:i(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:i(function(e){var t,n=this.__list__[e];return this.__nextIndex__===this.__length__?n:(t=n.charCodeAt(0))>=55296&&t<=56319?n+this.__list__[this.__nextIndex__++]:n})}),l(r.prototype,o.toStringTag,i("c","String Iterator"))},{"./":199,d:139,"es5-ext/object/set-prototype-of":185,"es6-symbol":204}],202:[function(e,t,n){"use strict";var r=e("./is-iterable");t.exports=function(e){if(!r(e))throw new TypeError(e+" is not iterable");return e}},{"./is-iterable":200}],203:[function(e,n,r){(function(t,a){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   3.3.1
 */
!function(e,t){"object"==typeof r&&void 0!==n?n.exports=t():e.ES6Promise=t()}(this,function(){"use strict";function n(e){return"function"==typeof e}var r=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},i=0,o=void 0,s=void 0,l=function(e,t){m[i]=e,m[i+1]=t,2===(i+=2)&&(s?s(v):g())},u="undefined"!=typeof window?window:void 0,c=u||{},f=c.MutationObserver||c.WebKitMutationObserver,d="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),p="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function h(){var e=setTimeout;return function(){return e(v,1)}}var m=new Array(1e3);function v(){for(var e=0;e<i;e+=2){var t=m[e],n=m[e+1];t(n),m[e]=void 0,m[e+1]=void 0}i=0}var g=void 0;function y(e,t){var n=arguments,r=this,a=new this.constructor(_);void 0===a[x]&&N(a);var i=r._state;return i?function(){var e=n[i-1];l(function(){return z(i,a,e,r._result)})}():R(r,a,e,t),a}function b(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(_);return A(t,e),t}g=d?function(){return t.nextTick(v)}:f?function(){var e=0,t=new f(v),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}():p?function(){var e=new MessageChannel;return e.port1.onmessage=v,function(){return e.port2.postMessage(0)}}():void 0===u&&"function"==typeof e?function(){try{var t=e,n=t("vertx");return o=n.runOnLoop||n.runOnContext,function(){o(v)}}catch(e){return h()}}():h();var x=Math.random().toString(36).substring(16);function _(){}var w=void 0,T=1,k=2,C=new D;function E(e){try{return e.then}catch(e){return C.error=e,C}}function M(e,t,r){t.constructor===e.constructor&&r===y&&t.constructor.resolve===b?function(e,t){t._state===T?O(e,t._result):t._state===k?P(e,t._result):R(t,void 0,function(t){return A(e,t)},function(t){return P(e,t)})}(e,t):r===C?P(e,C.error):void 0===r?O(e,t):n(r)?function(e,t,n){l(function(e){var r=!1,a=function(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}(n,t,function(n){r||(r=!0,t!==n?A(e,n):O(e,n))},function(t){r||(r=!0,P(e,t))},e._label);!r&&a&&(r=!0,P(e,a))},e)}(e,t,r):O(e,t)}function A(e,t){e===t?P(e,new TypeError("You cannot resolve a promise with itself")):function(e){return"function"==typeof e||"object"==typeof e&&null!==e}(t)?M(e,t,E(t)):O(e,t)}function S(e){e._onerror&&e._onerror(e._result),L(e)}function O(e,t){e._state===w&&(e._result=t,e._state=T,0!==e._subscribers.length&&l(L,e))}function P(e,t){e._state===w&&(e._state=k,e._result=t,l(S,e))}function R(e,t,n,r){var a=e._subscribers,i=a.length;e._onerror=null,a[i]=t,a[i+T]=n,a[i+k]=r,0===i&&e._state&&l(L,e)}function L(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,a=void 0,i=e._result,o=0;o<t.length;o+=3)r=t[o],a=t[o+n],r?z(n,r,a,i):a(i);e._subscribers.length=0}}function D(){this.error=null}var I=new D;function z(e,t,r,a){var i=n(r),o=void 0,s=void 0,l=void 0,u=void 0;if(i){if((o=function(e,t){try{return e(t)}catch(e){return I.error=e,I}}(r,a))===I?(u=!0,s=o.error,o=null):l=!0,t===o)return void P(t,new TypeError("A promises callback cannot return that same promise."))}else o=a,l=!0;t._state!==w||(i&&l?A(t,o):u?P(t,s):e===T?O(t,o):e===k&&P(t,o))}var j=0;function N(e){e[x]=j++,e._state=void 0,e._result=void 0,e._subscribers=[]}function F(e,t){this._instanceConstructor=e,this.promise=new e(_),this.promise[x]||N(this.promise),r(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?O(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&O(this.promise,this._result))):P(this.promise,new Error("Array Methods must be provided an Array"))}function B(e){this[x]=j++,this._result=this._state=void 0,this._subscribers=[],_!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof B?function(e,t){try{t(function(t){A(e,t)},function(t){P(e,t)})}catch(t){P(e,t)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}function V(){var e=void 0;if(void 0!==a)e=a;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=B}return F.prototype._enumerate=function(){for(var e=this.length,t=this._input,n=0;this._state===w&&n<e;n++)this._eachEntry(t[n],n)},F.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===b){var a=E(e);if(a===y&&e._state!==w)this._settledAt(e._state,t,e._result);else if("function"!=typeof a)this._remaining--,this._result[t]=e;else if(n===B){var i=new n(_);M(i,e,a),this._willSettleAt(i,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(r(e),t)},F.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===w&&(this._remaining--,e===k?P(r,n):this._result[t]=n),0===this._remaining&&O(r,this._result)},F.prototype._willSettleAt=function(e,t){var n=this;R(e,void 0,function(e){return n._settledAt(T,t,e)},function(e){return n._settledAt(k,t,e)})},B.all=function(e){return new F(this,e).promise},B.race=function(e){var t=this;return r(e)?new t(function(n,r){for(var a=e.length,i=0;i<a;i++)t.resolve(e[i]).then(n,r)}):new t(function(e,t){return t(new TypeError("You must pass an array to race."))})},B.resolve=b,B.reject=function(e){var t=new this(_);return P(t,e),t},B._setScheduler=function(e){s=e},B._setAsap=function(e){l=e},B._asap=l,B.prototype={constructor:B,then:y,catch:function(e){return this.then(null,e)}},V(),B.polyfill=V,B.Promise=B,B})}).call(this,e("_process"),void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:465}],204:[function(e,t,n){"use strict";t.exports=e("./is-implemented")()?Symbol:e("./polyfill")},{"./is-implemented":205,"./polyfill":207}],205:[function(e,t,n){"use strict";var r={object:!0,symbol:!0};t.exports=function(){var e;if("function"!=typeof Symbol)return!1;e=Symbol("test symbol");try{String(e)}catch(e){return!1}return!!r[typeof Symbol.iterator]&&!!r[typeof Symbol.toPrimitive]&&!!r[typeof Symbol.toStringTag]}},{}],206:[function(e,t,n){"use strict";t.exports=function(e){return!!e&&("symbol"==typeof e||!!e.constructor&&"Symbol"===e.constructor.name&&"Symbol"===e[e.constructor.toStringTag])}},{}],207:[function(e,t,n){"use strict";var r,a,i,o,s=e("d"),l=e("./validate-symbol"),u=Object.create,c=Object.defineProperties,f=Object.defineProperty,d=Object.prototype,p=u(null);if("function"==typeof Symbol){r=Symbol;try{String(r()),o=!0}catch(e){}}var h=function(){var e=u(null);return function(t){for(var n,r,a=0;e[t+(a||"")];)++a;return e[t+=a||""]=!0,f(d,n="@@"+t,s.gs(null,function(e){r||(r=!0,f(this,n,s(e)),r=!1)})),n}}();i=function(e){if(this instanceof i)throw new TypeError("Symbol is not a constructor");return a(e)},t.exports=a=function e(t){var n;if(this instanceof e)throw new TypeError("Symbol is not a constructor");return o?r(t):(n=u(i.prototype),t=void 0===t?"":String(t),c(n,{__description__:s("",t),__name__:s("",h(t))}))},c(a,{for:s(function(e){return p[e]?p[e]:p[e]=a(String(e))}),keyFor:s(function(e){var t;for(t in l(e),p)if(p[t]===e)return t}),hasInstance:s("",r&&r.hasInstance||a("hasInstance")),isConcatSpreadable:s("",r&&r.isConcatSpreadable||a("isConcatSpreadable")),iterator:s("",r&&r.iterator||a("iterator")),match:s("",r&&r.match||a("match")),replace:s("",r&&r.replace||a("replace")),search:s("",r&&r.search||a("search")),species:s("",r&&r.species||a("species")),split:s("",r&&r.split||a("split")),toPrimitive:s("",r&&r.toPrimitive||a("toPrimitive")),toStringTag:s("",r&&r.toStringTag||a("toStringTag")),unscopables:s("",r&&r.unscopables||a("unscopables"))}),c(i.prototype,{constructor:s(a),toString:s("",function(){return this.__name__})}),c(a.prototype,{toString:s(function(){return"Symbol ("+l(this).__description__+")"}),valueOf:s(function(){return l(this)})}),f(a.prototype,a.toPrimitive,s("",function(){var e=l(this);return"symbol"==typeof e?e:e.toString()})),f(a.prototype,a.toStringTag,s("c","Symbol")),f(i.prototype,a.toStringTag,s("c",a.prototype[a.toStringTag])),f(i.prototype,a.toPrimitive,s("c",a.prototype[a.toPrimitive]))},{"./validate-symbol":208,d:139}],208:[function(e,t,n){"use strict";var r=e("./is-symbol");t.exports=function(e){if(!r(e))throw new TypeError(e+" is not a symbol");return e}},{"./is-symbol":206}],209:[function(e,t,n){"use strict";t.exports=e("./is-implemented")()?WeakMap:e("./polyfill")},{"./is-implemented":210,"./polyfill":212}],210:[function(e,t,n){"use strict";t.exports=function(){var e,t;if("function"!=typeof WeakMap)return!1;try{e=new WeakMap([[t={},"one"],[{},"two"],[{},"three"]])}catch(e){return!1}return"[object WeakMap]"===String(e)&&"function"==typeof e.set&&e.set({},1)===e&&"function"==typeof e.delete&&"function"==typeof e.has&&"one"===e.get(t)}},{}],211:[function(e,t,n){"use strict";t.exports="function"==typeof WeakMap&&"[object WeakMap]"===Object.prototype.toString.call(new WeakMap)},{}],212:[function(e,t,n){"use strict";var r,a=e("es5-ext/object/set-prototype-of"),i=e("es5-ext/object/valid-object"),o=e("es5-ext/object/valid-value"),s=e("es5-ext/string/random-uniq"),l=e("d"),u=e("es6-iterator/get"),c=e("es6-iterator/for-of"),f=e("es6-symbol").toStringTag,d=e("./is-native-implemented"),p=Array.isArray,h=Object.defineProperty,m=Object.prototype.hasOwnProperty,v=Object.getPrototypeOf;t.exports=r=function(){var e,t=arguments[0];if(!(this instanceof r))throw new TypeError("Constructor requires 'new'");return e=d&&a&&WeakMap!==r?a(new WeakMap,v(this)):this,null!=t&&(p(t)||(t=u(t))),h(e,"__weakMapData__",l("c","$weakMap$"+s())),t?(c(t,function(t){o(t),e.set(t[0],t[1])}),e):e},d&&(a&&a(r,WeakMap),r.prototype=Object.create(WeakMap.prototype,{constructor:l(r)})),Object.defineProperties(r.prototype,{delete:l(function(e){return!!m.call(i(e),this.__weakMapData__)&&(delete e[this.__weakMapData__],!0)}),get:l(function(e){if(m.call(i(e),this.__weakMapData__))return e[this.__weakMapData__]}),has:l(function(e){return m.call(i(e),this.__weakMapData__)}),set:l(function(e,t){return h(i(e),this.__weakMapData__,l("c",t)),this}),toString:l(function(){return"[object WeakMap]"})}),h(r.prototype,f,l("c","WeakMap"))},{"./is-native-implemented":211,d:139,"es5-ext/object/set-prototype-of":185,"es5-ext/object/valid-object":189,"es5-ext/object/valid-value":190,"es5-ext/string/random-uniq":195,"es6-iterator/for-of":197,"es6-iterator/get":198,"es6-symbol":204}],213:[function(e,t,n){"use strict";t.exports=function(e,t,n){var r=t||0,a=n||1;return[[e[12]+e[0],e[13]+e[1],e[14]+e[2],e[15]+e[3]],[e[12]-e[0],e[13]-e[1],e[14]-e[2],e[15]-e[3]],[e[12]+e[4],e[13]+e[5],e[14]+e[6],e[15]+e[7]],[e[12]-e[4],e[13]-e[5],e[14]-e[6],e[15]-e[7]],[r*e[12]+e[8],r*e[13]+e[9],r*e[14]+e[10],r*e[15]+e[11]],[a*e[12]-e[8],a*e[13]-e[9],a*e[14]-e[10],a*e[15]-e[11]]]}},{}],214:[function(e,t,n){"use strict";var r=e("is-string-blank");t.exports=function(e){var t=typeof e;if("string"===t){var n=e;if(0==(e=+e)&&r(n))return!1}else if("number"!==t)return!1;return e-e<1}},{"is-string-blank":406}],215:[function(e,t,n){"use strict";t.exports=function(e,t,n){switch(arguments.length){case 0:return new o([0],[0],0);case 1:if("number"==typeof e){var r=l(e);return new o(r,r,0)}return new o(e,l(e.length),0);case 2:if("number"==typeof t){var r=l(e.length);return new o(e,r,+t)}n=0;case 3:if(e.length!==t.length)throw new Error("state and velocity lengths must match");return new o(e,t,n)}};var r=e("cubic-hermite"),a=e("binary-search-bounds");function i(e,t,n){return Math.min(t,Math.max(e,n))}function o(e,t,n){this.dimension=e.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var r=0;r<this.dimension;++r)this.bounds[0][r]=-1/0,this.bounds[1][r]=1/0;this._state=e.slice().reverse(),this._velocity=t.slice().reverse(),this._time=[n],this._scratch=[e.slice(),e.slice(),e.slice(),e.slice(),e.slice()]}var s=o.prototype;function l(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=0;return t}s.flush=function(e){var t=a.gt(this._time,e)-1;t<=0||(this._time.splice(0,t),this._state.splice(0,t*this.dimension),this._velocity.splice(0,t*this.dimension))},s.curve=function(e){var t=this._time,n=t.length,o=a.le(t,e),s=this._scratch[0],l=this._state,u=this._velocity,c=this.dimension,f=this.bounds;if(o<0)for(var d=c-1,p=0;p<c;++p,--d)s[p]=l[d];else if(o>=n-1)for(var d=l.length-1,h=e-t[n-1],p=0;p<c;++p,--d)s[p]=l[d]+h*u[d];else{for(var d=c*(o+1)-1,m=t[o],v=t[o+1],g=v-m||1,y=this._scratch[1],b=this._scratch[2],x=this._scratch[3],_=this._scratch[4],w=!0,p=0;p<c;++p,--d)y[p]=l[d],x[p]=u[d]*g,b[p]=l[d+c],_[p]=u[d+c]*g,w=w&&y[p]===b[p]&&x[p]===_[p]&&0===x[p];if(w)for(var p=0;p<c;++p)s[p]=y[p];else r(y,x,b,_,(e-m)/g,s)}for(var T=f[0],k=f[1],p=0;p<c;++p)s[p]=i(T[p],k[p],s[p]);return s},s.dcurve=function(e){var t=this._time,n=t.length,i=a.le(t,e),o=this._scratch[0],s=this._state,l=this._velocity,u=this.dimension;if(i>=n-1)for(var c=s.length-1,f=(t[n-1],0);f<u;++f,--c)o[f]=l[c];else{for(var c=u*(i+1)-1,d=t[i],p=t[i+1],h=p-d||1,m=this._scratch[1],v=this._scratch[2],g=this._scratch[3],y=this._scratch[4],b=!0,f=0;f<u;++f,--c)m[f]=s[c],g[f]=l[c]*h,v[f]=s[c+u],y[f]=l[c+u]*h,b=b&&m[f]===v[f]&&g[f]===y[f]&&0===g[f];if(b)for(var f=0;f<u;++f)o[f]=0;else{r.derivative(m,g,v,y,(e-d)/h,o);for(var f=0;f<u;++f)o[f]/=h}}return o},s.lastT=function(){var e=this._time;return e[e.length-1]},s.stable=function(){for(var e=this._velocity,t=e.length,n=this.dimension-1;n>=0;--n)if(e[--t])return!1;return!0},s.jump=function(e){var t=this.lastT(),n=this.dimension;if(!(e<t||arguments.length!==n+1)){var r=this._state,a=this._velocity,o=r.length-this.dimension,s=this.bounds,l=s[0],u=s[1];this._time.push(t,e);for(var c=0;c<2;++c)for(var f=0;f<n;++f)r.push(r[o++]),a.push(0);this._time.push(e);for(var f=n;f>0;--f)r.push(i(l[f-1],u[f-1],arguments[f])),a.push(0)}},s.push=function(e){var t=this.lastT(),n=this.dimension;if(!(e<t||arguments.length!==n+1)){var r=this._state,a=this._velocity,o=r.length-this.dimension,s=e-t,l=this.bounds,u=l[0],c=l[1],f=s>1e-6?1/s:0;this._time.push(e);for(var d=n;d>0;--d){var p=i(u[d-1],c[d-1],arguments[d]);r.push(p),a.push((p-r[o++])*f)}}},s.set=function(e){var t=this.dimension;if(!(e<this.lastT()||arguments.length!==t+1)){var n=this._state,r=this._velocity,a=this.bounds,o=a[0],s=a[1];this._time.push(e);for(var l=t;l>0;--l)n.push(i(o[l-1],s[l-1],arguments[l])),r.push(0)}},s.move=function(e){var t=this.lastT(),n=this.dimension;if(!(e<=t||arguments.length!==n+1)){var r=this._state,a=this._velocity,o=r.length-this.dimension,s=this.bounds,l=s[0],u=s[1],c=e-t,f=c>1e-6?1/c:0;this._time.push(e);for(var d=n;d>0;--d){var p=arguments[d];r.push(i(l[d-1],u[d-1],r[o++]+p)),a.push(p*f)}}},s.idle=function(e){var t=this.lastT();if(!(e<t)){var n=this.dimension,r=this._state,a=this._velocity,o=r.length-n,s=this.bounds,l=s[0],u=s[1],c=e-t;this._time.push(e);for(var f=n-1;f>=0;--f)r.push(i(l[f],u[f],r[o]+c*a[o])),a.push(0),o+=1}}},{"binary-search-bounds":79,"cubic-hermite":133}],216:[function(e,t,n){var r=e("dtype");t.exports=function(e,t,n){if(!e)throw new TypeError("must specify data as first parameter");if(n=0|+(n||0),Array.isArray(e)&&e[0]&&"number"==typeof e[0][0]){var a,i,o,s,l=e[0].length,u=e.length*l;t&&"string"!=typeof t||(t=new(r(t||"float32"))(u+n));var c=t.length-n;if(u!==c)throw new Error("source length "+u+" ("+l+"x"+e.length+") does not match destination length "+c);for(a=0,o=n;a<e.length;a++)for(i=0;i<l;i++)t[o++]=null===e[a][i]?NaN:e[a][i]}else if(t&&"string"!=typeof t)t.set(e,n);else{var f=r(t||"float32");if(Array.isArray(e)||"array"===t)for(t=new f(e.length+n),a=0,o=n,s=t.length;o<s;o++,a++)t[o]=null===e[a]?NaN:e[a];else 0===n?t=new f(e):(t=new f(e.length+n)).set(e,n)}return t}},{dtype:154}],217:[function(e,t,n){"use strict";var r=e("css-font/stringify"),a=[32,126];t.exports=function(e){var t=(e=e||{}).shape?e.shape:e.canvas?[e.canvas.width,e.canvas.height]:[512,512],n=e.canvas||document.createElement("canvas"),i=e.font,o="number"==typeof e.step?[e.step,e.step]:e.step||[32,32],s=e.chars||a;if(i&&"string"!=typeof i&&(i=r(i)),Array.isArray(s)){if(2===s.length&&"number"==typeof s[0]&&"number"==typeof s[1]){for(var l=[],u=s[0],c=0;u<=s[1];u++)l[c++]=String.fromCharCode(u);s=l}}else s=String(s).split("");t=t.slice(),n.width=t[0],n.height=t[1];var f=n.getContext("2d");f.fillStyle="#000",f.fillRect(0,0,n.width,n.height),f.font=i,f.textAlign="center",f.textBaseline="middle",f.fillStyle="#fff";for(var d=o[0]/2,p=o[1]/2,u=0;u<s.length;u++)f.fillText(s[u],d,p),(d+=o[0])>t[0]-o[0]/2&&(d=o[0]/2,p+=o[1]);return n}},{"css-font/stringify":130}],218:[function(e,t,n){"use strict";function r(e,t){t||(t={}),("string"==typeof e||Array.isArray(e))&&(t.family=e);var n=Array.isArray(t.family)?t.family.join(", "):t.family;if(!n)throw Error("`family` must be defined");var s=t.size||t.fontSize||t.em||48,l=t.weight||t.fontWeight||"",u=t.style||t.fontStyle||"",e=[u,l,s].join(" ")+"px "+n,c=t.origin||"top";if(r.cache[n]&&s<=r.cache[n].em)return a(r.cache[n],c);var f=t.canvas||r.canvas,d=f.getContext("2d"),p={upper:void 0!==t.upper?t.upper:"H",lower:void 0!==t.lower?t.lower:"x",descent:void 0!==t.descent?t.descent:"p",ascent:void 0!==t.ascent?t.ascent:"h",tittle:void 0!==t.tittle?t.tittle:"i",overshoot:void 0!==t.overshoot?t.overshoot:"O"},h=Math.ceil(1.5*s);f.height=h,f.width=.5*h,d.font=e;var m={top:0};d.clearRect(0,0,h,h),d.textBaseline="top",d.fillStyle="black",d.fillText("H",0,0);var v=i(d.getImageData(0,0,h,h));d.clearRect(0,0,h,h),d.textBaseline="bottom",d.fillText("H",0,h);var g=i(d.getImageData(0,0,h,h));m.lineHeight=m.bottom=h-g+v,d.clearRect(0,0,h,h),d.textBaseline="alphabetic",d.fillText("H",0,h);var y=i(d.getImageData(0,0,h,h)),b=h-y-1+v;m.baseline=m.alphabetic=b,d.clearRect(0,0,h,h),d.textBaseline="middle",d.fillText("H",0,.5*h);var x=i(d.getImageData(0,0,h,h));m.median=m.middle=h-x-1+v-.5*h,d.clearRect(0,0,h,h),d.textBaseline="hanging",d.fillText("H",0,.5*h);var _=i(d.getImageData(0,0,h,h));m.hanging=h-_-1+v-.5*h,d.clearRect(0,0,h,h),d.textBaseline="ideographic",d.fillText("H",0,h);var w=i(d.getImageData(0,0,h,h));if(m.ideographic=h-w-1+v,p.upper&&(d.clearRect(0,0,h,h),d.textBaseline="top",d.fillText(p.upper,0,0),m.upper=i(d.getImageData(0,0,h,h)),m.capHeight=m.baseline-m.upper),p.lower&&(d.clearRect(0,0,h,h),d.textBaseline="top",d.fillText(p.lower,0,0),m.lower=i(d.getImageData(0,0,h,h)),m.xHeight=m.baseline-m.lower),p.tittle&&(d.clearRect(0,0,h,h),d.textBaseline="top",d.fillText(p.tittle,0,0),m.tittle=i(d.getImageData(0,0,h,h))),p.ascent&&(d.clearRect(0,0,h,h),d.textBaseline="top",d.fillText(p.ascent,0,0),m.ascent=i(d.getImageData(0,0,h,h))),p.descent&&(d.clearRect(0,0,h,h),d.textBaseline="top",d.fillText(p.descent,0,0),m.descent=o(d.getImageData(0,0,h,h))),p.overshoot){d.clearRect(0,0,h,h),d.textBaseline="top",d.fillText(p.overshoot,0,0);var T=o(d.getImageData(0,0,h,h));m.overshoot=T-b}for(var k in m)m[k]/=s;return m.em=s,r.cache[n]=m,a(m,c)}function a(e,t){var n={};for(var r in"string"==typeof t&&(t=e[t]),e)"em"!==r&&(n[r]=e[r]-t);return n}function i(e){for(var t=e.height,n=e.data,r=3;r<n.length;r+=4)if(0!==n[r])return Math.floor(.25*(r-3)/t)}function o(e){for(var t=e.height,n=e.data,r=n.length-1;r>0;r-=4)if(0!==n[r])return Math.floor(.25*(r-3)/t)}t.exports=r,r.canvas=document.createElement("canvas"),r.cache={}},{}],219:[function(e,t,n){"use strict";t.exports=function(e){return new u(e||h,null)};var r=0,a=1;function i(e,t,n,r,a,i){this._color=e,this.key=t,this.value=n,this.left=r,this.right=a,this._count=i}function o(e){return new i(e._color,e.key,e.value,e.left,e.right,e._count)}function s(e,t){return new i(e,t.key,t.value,t.left,t.right,t._count)}function l(e){e._count=1+(e.left?e.left._count:0)+(e.right?e.right._count:0)}function u(e,t){this._compare=e,this.root=t}var c=u.prototype;function f(e,t){this.tree=e,this._stack=t}Object.defineProperty(c,"keys",{get:function(){var e=[];return this.forEach(function(t,n){e.push(t)}),e}}),Object.defineProperty(c,"values",{get:function(){var e=[];return this.forEach(function(t,n){e.push(n)}),e}}),Object.defineProperty(c,"length",{get:function(){return this.root?this.root._count:0}}),c.insert=function(e,t){for(var n=this._compare,o=this.root,c=[],f=[];o;){var d=n(e,o.key);c.push(o),f.push(d),o=d<=0?o.left:o.right}c.push(new i(r,e,t,null,null,1));for(var p=c.length-2;p>=0;--p){var o=c[p];f[p]<=0?c[p]=new i(o._color,o.key,o.value,c[p+1],o.right,o._count+1):c[p]=new i(o._color,o.key,o.value,o.left,c[p+1],o._count+1)}for(var p=c.length-1;p>1;--p){var h=c[p-1],o=c[p];if(h._color===a||o._color===a)break;var m=c[p-2];if(m.left===h)if(h.left===o){var v=m.right;if(!v||v._color!==r){if(m._color=r,m.left=h.right,h._color=a,h.right=m,c[p-2]=h,c[p-1]=o,l(m),l(h),p>=3){var g=c[p-3];g.left===m?g.left=h:g.right=h}break}h._color=a,m.right=s(a,v),m._color=r,p-=1}else{var v=m.right;if(!v||v._color!==r){if(h.right=o.left,m._color=r,m.left=o.right,o._color=a,o.left=h,o.right=m,c[p-2]=o,c[p-1]=h,l(m),l(h),l(o),p>=3){var g=c[p-3];g.left===m?g.left=o:g.right=o}break}h._color=a,m.right=s(a,v),m._color=r,p-=1}else if(h.right===o){var v=m.left;if(!v||v._color!==r){if(m._color=r,m.right=h.left,h._color=a,h.left=m,c[p-2]=h,c[p-1]=o,l(m),l(h),p>=3){var g=c[p-3];g.right===m?g.right=h:g.left=h}break}h._color=a,m.left=s(a,v),m._color=r,p-=1}else{var v=m.left;if(!v||v._color!==r){if(h.left=o.right,m._color=r,m.right=o.left,o._color=a,o.right=h,o.left=m,c[p-2]=o,c[p-1]=h,l(m),l(h),l(o),p>=3){var g=c[p-3];g.right===m?g.right=o:g.left=o}break}h._color=a,m.left=s(a,v),m._color=r,p-=1}}return c[0]._color=a,new u(n,c[0])},c.forEach=function(e,t,n){if(this.root)switch(arguments.length){case 1:return function e(t,n){if(n.left){var r=e(t,n.left);if(r)return r}var r=t(n.key,n.value);return r||(n.right?e(t,n.right):void 0)}(e,this.root);case 2:return function e(t,n,r,a){var i=n(t,a.key);if(i<=0){if(a.left){var o=e(t,n,r,a.left);if(o)return o}var o=r(a.key,a.value);if(o)return o}if(a.right)return e(t,n,r,a.right)}(t,this._compare,e,this.root);case 3:if(this._compare(t,n)>=0)return;return function e(t,n,r,a,i){var o,s=r(t,i.key),l=r(n,i.key);if(s<=0){if(i.left&&(o=e(t,n,r,a,i.left)))return o;if(l>0&&(o=a(i.key,i.value)))return o}if(l>0&&i.right)return e(t,n,r,a,i.right)}(t,n,this._compare,e,this.root)}},Object.defineProperty(c,"begin",{get:function(){for(var e=[],t=this.root;t;)e.push(t),t=t.left;return new f(this,e)}}),Object.defineProperty(c,"end",{get:function(){for(var e=[],t=this.root;t;)e.push(t),t=t.right;return new f(this,e)}}),c.at=function(e){if(e<0)return new f(this,[]);for(var t=this.root,n=[];;){if(n.push(t),t.left){if(e<t.left._count){t=t.left;continue}e-=t.left._count}if(!e)return new f(this,n);if(e-=1,!t.right)break;if(e>=t.right._count)break;t=t.right}return new f(this,[])},c.ge=function(e){for(var t=this._compare,n=this.root,r=[],a=0;n;){var i=t(e,n.key);r.push(n),i<=0&&(a=r.length),n=i<=0?n.left:n.right}return r.length=a,new f(this,r)},c.gt=function(e){for(var t=this._compare,n=this.root,r=[],a=0;n;){var i=t(e,n.key);r.push(n),i<0&&(a=r.length),n=i<0?n.left:n.right}return r.length=a,new f(this,r)},c.lt=function(e){for(var t=this._compare,n=this.root,r=[],a=0;n;){var i=t(e,n.key);r.push(n),i>0&&(a=r.length),n=i<=0?n.left:n.right}return r.length=a,new f(this,r)},c.le=function(e){for(var t=this._compare,n=this.root,r=[],a=0;n;){var i=t(e,n.key);r.push(n),i>=0&&(a=r.length),n=i<0?n.left:n.right}return r.length=a,new f(this,r)},c.find=function(e){for(var t=this._compare,n=this.root,r=[];n;){var a=t(e,n.key);if(r.push(n),0===a)return new f(this,r);n=a<=0?n.left:n.right}return new f(this,[])},c.remove=function(e){var t=this.find(e);return t?t.remove():this},c.get=function(e){for(var t=this._compare,n=this.root;n;){var r=t(e,n.key);if(0===r)return n.value;n=r<=0?n.left:n.right}};var d=f.prototype;function p(e,t){e.key=t.key,e.value=t.value,e.left=t.left,e.right=t.right,e._color=t._color,e._count=t._count}function h(e,t){return e<t?-1:e>t?1:0}Object.defineProperty(d,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(d,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),d.clone=function(){return new f(this.tree,this._stack.slice())},d.remove=function(){var e=this._stack;if(0===e.length)return this.tree;var t=new Array(e.length),n=e[e.length-1];t[t.length-1]=new i(n._color,n.key,n.value,n.left,n.right,n._count);for(var c=e.length-2;c>=0;--c){var n=e[c];n.left===e[c+1]?t[c]=new i(n._color,n.key,n.value,t[c+1],n.right,n._count):t[c]=new i(n._color,n.key,n.value,n.left,t[c+1],n._count)}if((n=t[t.length-1]).left&&n.right){var f=t.length;for(n=n.left;n.right;)t.push(n),n=n.right;var d=t[f-1];t.push(new i(n._color,d.key,d.value,n.left,n.right,n._count)),t[f-1].key=n.key,t[f-1].value=n.value;for(var c=t.length-2;c>=f;--c)n=t[c],t[c]=new i(n._color,n.key,n.value,n.left,t[c+1],n._count);t[f-1].left=t[f]}if((n=t[t.length-1])._color===r){var h=t[t.length-2];h.left===n?h.left=null:h.right===n&&(h.right=null),t.pop();for(var c=0;c<t.length;++c)t[c]._count--;return new u(this.tree._compare,t[0])}if(n.left||n.right){n.left?p(n,n.left):n.right&&p(n,n.right),n._color=a;for(var c=0;c<t.length-1;++c)t[c]._count--;return new u(this.tree._compare,t[0])}if(1===t.length)return new u(this.tree._compare,null);for(var c=0;c<t.length;++c)t[c]._count--;var m=t[t.length-2];return function(e){for(var t,n,i,u,c=e.length-1;c>=0;--c){if(t=e[c],0===c)return void(t._color=a);if((n=e[c-1]).left===t){if((i=n.right).right&&i.right._color===r){if(i=n.right=o(i),u=i.right=o(i.right),n.right=i.left,i.left=n,i.right=u,i._color=n._color,t._color=a,n._color=a,u._color=a,l(n),l(i),c>1){var f=e[c-2];f.left===n?f.left=i:f.right=i}return void(e[c-1]=i)}if(i.left&&i.left._color===r){if(i=n.right=o(i),u=i.left=o(i.left),n.right=u.left,i.left=u.right,u.left=n,u.right=i,u._color=n._color,n._color=a,i._color=a,t._color=a,l(n),l(i),l(u),c>1){var f=e[c-2];f.left===n?f.left=u:f.right=u}return void(e[c-1]=u)}if(i._color===a){if(n._color===r)return n._color=a,void(n.right=s(r,i));n.right=s(r,i);continue}if(i=o(i),n.right=i.left,i.left=n,i._color=n._color,n._color=r,l(n),l(i),c>1){var f=e[c-2];f.left===n?f.left=i:f.right=i}e[c-1]=i,e[c]=n,c+1<e.length?e[c+1]=t:e.push(t),c+=2}else{if((i=n.left).left&&i.left._color===r){if(i=n.left=o(i),u=i.left=o(i.left),n.left=i.right,i.right=n,i.left=u,i._color=n._color,t._color=a,n._color=a,u._color=a,l(n),l(i),c>1){var f=e[c-2];f.right===n?f.right=i:f.left=i}return void(e[c-1]=i)}if(i.right&&i.right._color===r){if(i=n.left=o(i),u=i.right=o(i.right),n.left=u.right,i.right=u.left,u.right=n,u.left=i,u._color=n._color,n._color=a,i._color=a,t._color=a,l(n),l(i),l(u),c>1){var f=e[c-2];f.right===n?f.right=u:f.left=u}return void(e[c-1]=u)}if(i._color===a){if(n._color===r)return n._color=a,void(n.left=s(r,i));n.left=s(r,i);continue}if(i=o(i),n.left=i.right,i.right=n,i._color=n._color,n._color=r,l(n),l(i),c>1){var f=e[c-2];f.right===n?f.right=i:f.left=i}e[c-1]=i,e[c]=n,c+1<e.length?e[c+1]=t:e.push(t),c+=2}}}(t),m.left===n?m.left=null:m.right=null,new u(this.tree._compare,t[0])},Object.defineProperty(d,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(d,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(d,"index",{get:function(){var e=0,t=this._stack;if(0===t.length){var n=this.tree.root;return n?n._count:0}t[t.length-1].left&&(e=t[t.length-1].left._count);for(var r=t.length-2;r>=0;--r)t[r+1]===t[r].right&&(++e,t[r].left&&(e+=t[r].left._count));return e},enumerable:!0}),d.next=function(){var e=this._stack;if(0!==e.length){var t=e[e.length-1];if(t.right)for(t=t.right;t;)e.push(t),t=t.left;else for(e.pop();e.length>0&&e[e.length-1].right===t;)t=e[e.length-1],e.pop()}},Object.defineProperty(d,"hasNext",{get:function(){var e=this._stack;if(0===e.length)return!1;if(e[e.length-1].right)return!0;for(var t=e.length-1;t>0;--t)if(e[t-1].left===e[t])return!0;return!1}}),d.update=function(e){var t=this._stack;if(0===t.length)throw new Error("Can't update empty node!");var n=new Array(t.length),r=t[t.length-1];n[n.length-1]=new i(r._color,r.key,e,r.left,r.right,r._count);for(var a=t.length-2;a>=0;--a)(r=t[a]).left===t[a+1]?n[a]=new i(r._color,r.key,r.value,n[a+1],r.right,r._count):n[a]=new i(r._color,r.key,r.value,r.left,n[a+1],r._count);return new u(this.tree._compare,n[0])},d.prev=function(){var e=this._stack;if(0!==e.length){var t=e[e.length-1];if(t.left)for(t=t.left;t;)e.push(t),t=t.right;else for(e.pop();e.length>0&&e[e.length-1].left===t;)t=e[e.length-1],e.pop()}},Object.defineProperty(d,"hasPrev",{get:function(){var e=this._stack;if(0===e.length)return!1;if(e[e.length-1].left)return!0;for(var t=e.length-1;t>0;--t)if(e[t-1].right===e[t])return!0;return!1}})},{}],220:[function(e,t,n){var r=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,1.5056327351493116e-7],a=607/128,i=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];function o(e){if(e<0)return Number("0/0");for(var t=i[0],n=i.length-1;n>0;--n)t+=i[n]/(e+n);var r=e+a+.5;return.5*Math.log(2*Math.PI)+(e+.5)*Math.log(r)-r+Math.log(t)-Math.log(e)}t.exports=function e(t){if(t<.5)return Math.PI/(Math.sin(Math.PI*t)*e(1-t));if(t>100)return Math.exp(o(t));t-=1;for(var n=r[0],a=1;a<9;a++)n+=r[a]/(t+a);var i=t+7+.5;return Math.sqrt(2*Math.PI)*Math.pow(i,t+.5)*Math.exp(-i)*n},t.exports.log=o},{}],221:[function(e,t,n){t.exports=function(e,t){if("string"!=typeof e)throw new TypeError("must specify type string");if(t=t||{},"undefined"==typeof document&&!t.canvas)return null;var n=t.canvas||document.createElement("canvas");"number"==typeof t.width&&(n.width=t.width),"number"==typeof t.height&&(n.height=t.height);var r,a=t;try{var i=[e];0===e.indexOf("webgl")&&i.push("experimental-"+e);for(var o=0;o<i.length;o++)if(r=n.getContext(i[o],a))return r}catch(e){r=null}return r||null}},{}],222:[function(e,t,n){"use strict";t.exports=function(e,t){var n=new c(e);return n.update(t),n};var r=e("./lib/text.js"),a=e("./lib/lines.js"),i=e("./lib/background.js"),o=e("./lib/cube.js"),s=e("./lib/ticks.js"),l=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function u(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function c(e){this.gl=e,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this._tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this._labelAngle=[0,0,0],this._labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=i(e)}var f=c.prototype;function d(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}f.update=function(e){function t(t,n,r){if(r in e){var a,i=e[r],o=this[r];(t?Array.isArray(i)&&Array.isArray(i[0]):Array.isArray(i))?this[r]=a=[n(i[0]),n(i[1]),n(i[2])]:this[r]=a=[n(i),n(i),n(i)];for(var s=0;s<3;++s)if(a[s]!==o[s])return!0}return!1}e=e||{};var n,i=t.bind(this,!1,Number),o=t.bind(this,!1,Boolean),l=t.bind(this,!1,String),u=t.bind(this,!0,function(e){if(Array.isArray(e)){if(3===e.length)return[+e[0],+e[1],+e[2],1];if(4===e.length)return[+e[0],+e[1],+e[2],+e[3]]}return[0,0,0,1]}),c=!1,f=!1;if("bounds"in e)for(var d=e.bounds,p=0;p<2;++p)for(var h=0;h<3;++h)d[p][h]!==this.bounds[p][h]&&(f=!0),this.bounds[p][h]=d[p][h];if("ticks"in e){n=e.ticks,c=!0,this.autoTicks=!1;for(var p=0;p<3;++p)this.tickSpacing[p]=0}else i("tickSpacing")&&(this.autoTicks=!0,f=!0);if(this._firstInit&&("ticks"in e||"tickSpacing"in e||(this.autoTicks=!0),f=!0,c=!0,this._firstInit=!1),f&&this.autoTicks&&(n=s.create(this.bounds,this.tickSpacing),c=!0),c){for(var p=0;p<3;++p)n[p].sort(function(e,t){return e.x-t.x});s.equal(n,this.ticks)?c=!1:this.ticks=n}o("tickEnable"),l("tickFont")&&(c=!0),i("tickSize"),i("tickAngle"),i("tickPad"),u("tickColor");var m=l("labels");l("labelFont")&&(m=!0),o("labelEnable"),i("labelSize"),i("labelPad"),u("labelColor"),o("lineEnable"),o("lineMirror"),i("lineWidth"),u("lineColor"),o("lineTickEnable"),o("lineTickMirror"),i("lineTickLength"),i("lineTickWidth"),u("lineTickColor"),o("gridEnable"),i("gridWidth"),u("gridColor"),o("zeroEnable"),u("zeroLineColor"),i("zeroLineWidth"),o("backgroundEnable"),u("backgroundColor"),this._text?this._text&&(m||c)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=r(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&c&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=a(this.gl,this.bounds,this.ticks))};var p=[new d,new d,new d];function h(e,t,n,r,a){for(var i=e.primalOffset,o=e.primalMinor,s=e.mirrorOffset,l=e.mirrorMinor,u=r[t],c=0;c<3;++c)if(t!==c){var f=i,d=s,p=o,h=l;u&1<<c&&(f=s,d=i,p=l,h=o),f[c]=n[0][c],d[c]=n[1][c],a[c]>0?(p[c]=-1,h[c]=0):(p[c]=0,h[c]=1)}}var m=[0,0,0],v={model:l,view:l,projection:l};f.isOpaque=function(){return!0},f.isTransparent=function(){return!1},f.drawTransparent=function(e){};var g=[0,0,0],y=[0,0,0],b=[0,0,0];f.draw=function(e){e=e||v;for(var t=this.gl,n=e.model||l,r=e.view||l,a=e.projection||l,i=this.bounds,s=o(n,r,a,i),c=s.cubeEdges,f=s.axis,d=r[12],x=r[13],_=r[14],w=r[15],T=this.pixelRatio*(a[3]*d+a[7]*x+a[11]*_+a[15]*w)/t.drawingBufferHeight,k=0;k<3;++k)this.lastCubeProps.cubeEdges[k]=c[k],this.lastCubeProps.axis[k]=f[k];for(var C=p,k=0;k<3;++k)h(p[k],k,this.bounds,c,f);for(var E,t=this.gl,M=m,k=0;k<3;++k)this.backgroundEnable[k]?M[k]=f[k]:M[k]=0;this._background.draw(n,r,a,i,M,this.backgroundColor),this._lines.bind(n,r,a,this);for(var k=0;k<3;++k){var A=[0,0,0];f[k]>0?A[k]=i[1][k]:A[k]=i[0][k];for(var S=0;S<2;++S){var O=(k+1+S)%3,P=(k+1+(1^S))%3;this.gridEnable[O]&&this._lines.drawGrid(O,P,this.bounds,A,this.gridColor[O],this.gridWidth[O]*this.pixelRatio)}for(var S=0;S<2;++S){var O=(k+1+S)%3,P=(k+1+(1^S))%3;this.zeroEnable[P]&&Math.min(i[0][P],i[1][P])<=0&&Math.max(i[0][P],i[1][P])>=0&&this._lines.drawZero(O,P,this.bounds,A,this.zeroLineColor[P],this.zeroLineWidth[P]*this.pixelRatio)}}for(var k=0;k<3;++k){this.lineEnable[k]&&this._lines.drawAxisLine(k,this.bounds,C[k].primalOffset,this.lineColor[k],this.lineWidth[k]*this.pixelRatio),this.lineMirror[k]&&this._lines.drawAxisLine(k,this.bounds,C[k].mirrorOffset,this.lineColor[k],this.lineWidth[k]*this.pixelRatio);for(var R=u(g,C[k].primalMinor),L=u(y,C[k].mirrorMinor),D=this.lineTickLength,S=0;S<3;++S){var I=T/n[5*S];R[S]*=D[S]*I,L[S]*=D[S]*I}this.lineTickEnable[k]&&this._lines.drawAxisTicks(k,C[k].primalOffset,R,this.lineTickColor[k],this.lineTickWidth[k]*this.pixelRatio),this.lineTickMirror[k]&&this._lines.drawAxisTicks(k,C[k].mirrorOffset,L,this.lineTickColor[k],this.lineTickWidth[k]*this.pixelRatio)}var z,j;function N(e){(j=[0,0,0])[e]=1}function F(e,t,n){var r=(e+1)%3,a=(e+2)%3,i=t[r],o=t[a],s=n[r],l=n[a];i>0&&l>0?N(r):i>0&&l<0?N(r):i<0&&l>0?N(r):i<0&&l<0?N(r):o>0&&s>0?N(a):o>0&&s<0?N(a):o<0&&s>0?N(a):o<0&&s<0&&N(a)}this._lines.unbind(),this._text.bind(n,r,a,this.pixelRatio);for(var k=0;k<3;++k){for(var B=C[k].primalMinor,V=C[k].mirrorMinor,U=u(b,C[k].primalOffset),S=0;S<3;++S)this.lineTickEnable[k]&&(U[S]+=T*B[S]*Math.max(this.lineTickLength[S],0)/n[5*S]);var G=[0,0,0];if(G[k]=1,this.tickEnable[k]){-3600===this.tickAngle[k]?(this.tickAngle[k]=0,this._tickAlign[k]="auto"):this._tickAlign[k]=-1,z=1,"auto"===(E=[this._tickAlign[k],.5,z])[0]?E[0]=0:E[0]=parseInt(""+E[0]),j=[0,0,0],F(k,B,V);for(var S=0;S<3;++S)U[S]+=T*B[S]*this.tickPad[S]/n[5*S];this._text.drawTicks(k,this.tickSize[k],this.tickAngle[k],U,this.tickColor[k],G,j,E)}if(this.labelEnable[k]){z=0,j=[0,0,0],this.labels[k].length>4&&(N(k),z=1),"auto"===(E=[this._labelAlign[k],.5,z])[0]?E[0]=0:E[0]=parseInt(""+E[0]);for(var S=0;S<3;++S)U[S]+=T*B[S]*this.labelPad[S]/n[5*S];U[k]+=.5*(i[0][k]+i[1][k]),this._text.drawLabel(k,this.labelSize[k],this._labelAngle[k],U,this.labelColor[k],[0,0,0],j,E)}}this._text.unbind()},f.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null}},{"./lib/background.js":223,"./lib/cube.js":224,"./lib/lines.js":225,"./lib/text.js":227,"./lib/ticks.js":228}],223:[function(e,t,n){"use strict";t.exports=function(e){for(var t=[],n=[],s=0,l=0;l<3;++l)for(var u=(l+1)%3,c=(l+2)%3,f=[0,0,0],d=[0,0,0],p=-1;p<=1;p+=2){n.push(s,s+2,s+1,s+1,s+2,s+3),f[l]=p,d[l]=p;for(var h=-1;h<=1;h+=2){f[u]=h;for(var m=-1;m<=1;m+=2)f[c]=m,t.push(f[0],f[1],f[2],d[0],d[1],d[2]),s+=1}var v=u;u=c,c=v}var g=r(e,new Float32Array(t)),y=r(e,new Uint16Array(n),e.ELEMENT_ARRAY_BUFFER),b=a(e,[{buffer:g,type:e.FLOAT,size:3,offset:0,stride:24},{buffer:g,type:e.FLOAT,size:3,offset:12,stride:24}],y),x=i(e);return x.attributes.position.location=0,x.attributes.normal.location=1,new o(e,g,b,x)};var r=e("gl-buffer"),a=e("gl-vao"),i=e("./shaders").bg;function o(e,t,n,r){this.gl=e,this.buffer=t,this.vao=n,this.shader=r}var s=o.prototype;s.draw=function(e,t,n,r,a,i){for(var o=!1,s=0;s<3;++s)o=o||a[s];if(o){var l=this.gl;l.enable(l.POLYGON_OFFSET_FILL),l.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:e,view:t,projection:n,bounds:r,enable:a,colors:i},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),l.disable(l.POLYGON_OFFSET_FILL)}},s.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},{"./shaders":226,"gl-buffer":230,"gl-vao":310}],224:[function(e,t,n){"use strict";t.exports=function(e,t,n,i){a(s,t,e),a(s,n,s);for(var p=0,y=0;y<2;++y){c[2]=i[y][2];for(var b=0;b<2;++b){c[1]=i[b][1];for(var x=0;x<2;++x)c[0]=i[x][0],d(l[p],c,s),p+=1}}for(var _=-1,y=0;y<8;++y){for(var w=l[y][3],T=0;T<3;++T)u[y][T]=l[y][T]/w;w<0&&(_<0?_=y:u[y][2]<u[_][2]&&(_=y))}if(_<0){_=0;for(var k=0;k<3;++k){for(var C=(k+2)%3,E=(k+1)%3,M=-1,A=-1,S=0;S<2;++S){var O=S<<k,P=O+(S<<C)+(1-S<<E),R=O+(1-S<<C)+(S<<E);o(u[O],u[P],u[R],f)<0||(S?M=1:A=1)}if(M<0||A<0)A>M&&(_|=1<<k);else{for(var S=0;S<2;++S){var O=S<<k,P=O+(S<<C)+(1-S<<E),R=O+(1-S<<C)+(S<<E),L=h([l[O],l[P],l[R],l[O+(1<<C)+(1<<E)]]);S?M=L:A=L}A>M&&(_|=1<<k)}}}for(var D=7^_,I=-1,y=0;y<8;++y)y!==_&&y!==D&&(I<0?I=y:u[I][1]>u[y][1]&&(I=y));for(var z=-1,y=0;y<3;++y){var j=I^1<<y;if(j!==_&&j!==D){z<0&&(z=j);var E=u[j];E[0]<u[z][0]&&(z=j)}}for(var N=-1,y=0;y<3;++y){var j=I^1<<y;if(j!==_&&j!==D&&j!==z){N<0&&(N=j);var E=u[j];E[0]>u[N][0]&&(N=j)}}var F=m;F[0]=F[1]=F[2]=0,F[r.log2(z^I)]=I&z,F[r.log2(I^N)]=I&N;var B=7^N;B===_||B===D?(B=7^z,F[r.log2(N^B)]=B&N):F[r.log2(z^B)]=B&z;for(var V=v,U=_,k=0;k<3;++k)V[k]=U&1<<k?-1:1;return g};var r=e("bit-twiddle"),a=e("gl-mat4/multiply"),i=(e("gl-mat4/invert"),e("split-polygon")),o=e("robust-orientation"),s=new Array(16),l=(new Array(16),new Array(8)),u=new Array(8),c=new Array(3),f=[0,0,0];function d(e,t,n){for(var r=0;r<4;++r){e[r]=n[12+r];for(var a=0;a<3;++a)e[r]+=t[a]*n[4*a+r]}}!function(){for(var e=0;e<8;++e)l[e]=[1,1,1,1],u[e]=[1,1,1]}();var p=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function h(e){for(var t=0;t<p.length;++t)if((e=i.positive(e,p[t])).length<3)return 0;for(var n=e[0],r=n[0]/n[3],a=n[1]/n[3],o=0,t=1;t+1<e.length;++t){var s=e[t],l=e[t+1],u=s[0]/s[3],c=s[1]/s[3],f=l[0]/l[3],d=l[1]/l[3],h=u-r,m=c-a,v=f-r,g=d-a;o+=Math.abs(h*g-m*v)}return o}var m=[1,1,1],v=[0,0,0],g={cubeEdges:m,axis:v}},{"bit-twiddle":80,"gl-mat4/invert":254,"gl-mat4/multiply":256,"robust-orientation":486,"split-polygon":503}],225:[function(e,t,n){"use strict";t.exports=function(e,t,n){var o=[],s=[0,0,0],l=[0,0,0],u=[0,0,0],c=[0,0,0];o.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var f=0;f<3;++f){for(var d=o.length/3|0,h=0;h<n[f].length;++h){var m=+n[f][h].x;o.push(m,0,1,m,1,1,m,0,-1,m,0,-1,m,1,1,m,1,-1)}var v=o.length/3|0;s[f]=d,l[f]=v-d;for(var d=o.length/3|0,g=0;g<n[f].length;++g){var m=+n[f][g].x;o.push(m,0,1,m,1,1,m,0,-1,m,0,-1,m,1,1,m,1,-1)}var v=o.length/3|0;u[f]=d,c[f]=v-d}var y=r(e,new Float32Array(o)),b=a(e,[{buffer:y,type:e.FLOAT,size:3,stride:0,offset:0}]),x=i(e);return x.attributes.position.location=0,new p(e,y,b,x,l,s,c,u)};var r=e("gl-buffer"),a=e("gl-vao"),i=e("./shaders").line,o=[0,0,0],s=[0,0,0],l=[0,0,0],u=[0,0,0],c=[1,1];function f(e){return e[0]=e[1]=e[2]=0,e}function d(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function p(e,t,n,r,a,i,o,s){this.gl=e,this.vertBuffer=t,this.vao=n,this.shader=r,this.tickCount=a,this.tickOffset=i,this.gridCount=o,this.gridOffset=s}var h=p.prototype;h.bind=function(e,t,n){this.shader.bind(),this.shader.uniforms.model=e,this.shader.uniforms.view=t,this.shader.uniforms.projection=n,c[0]=this.gl.drawingBufferWidth,c[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=c,this.vao.bind()},h.unbind=function(){this.vao.unbind()},h.drawAxisLine=function(e,t,n,r,a){var i=f(s);this.shader.uniforms.majorAxis=s,i[e]=t[1][e]-t[0][e],this.shader.uniforms.minorAxis=i;var o=d(u,n);o[e]+=t[0][e],this.shader.uniforms.offset=o,this.shader.uniforms.lineWidth=a,this.shader.uniforms.color=r;var c=f(l);c[(e+2)%3]=1,this.shader.uniforms.screenAxis=c,this.vao.draw(this.gl.TRIANGLES,6);var c=f(l);c[(e+1)%3]=1,this.shader.uniforms.screenAxis=c,this.vao.draw(this.gl.TRIANGLES,6)},h.drawAxisTicks=function(e,t,n,r,a){if(this.tickCount[e]){var i=f(o);i[e]=1,this.shader.uniforms.majorAxis=i,this.shader.uniforms.offset=t,this.shader.uniforms.minorAxis=n,this.shader.uniforms.color=r,this.shader.uniforms.lineWidth=a;var s=f(l);s[e]=1,this.shader.uniforms.screenAxis=s,this.vao.draw(this.gl.TRIANGLES,this.tickCount[e],this.tickOffset[e])}},h.drawGrid=function(e,t,n,r,a,i){if(this.gridCount[e]){var c=f(s);c[t]=n[1][t]-n[0][t],this.shader.uniforms.minorAxis=c;var p=d(u,r);p[t]+=n[0][t],this.shader.uniforms.offset=p;var h=f(o);h[e]=1,this.shader.uniforms.majorAxis=h;var m=f(l);m[e]=1,this.shader.uniforms.screenAxis=m,this.shader.uniforms.lineWidth=i,this.shader.uniforms.color=a,this.vao.draw(this.gl.TRIANGLES,this.gridCount[e],this.gridOffset[e])}},h.drawZero=function(e,t,n,r,a,i){var o=f(s);this.shader.uniforms.majorAxis=o,o[e]=n[1][e]-n[0][e],this.shader.uniforms.minorAxis=o;var c=d(u,r);c[e]+=n[0][e],this.shader.uniforms.offset=c;var p=f(l);p[t]=1,this.shader.uniforms.screenAxis=p,this.shader.uniforms.lineWidth=i,this.shader.uniforms.color=a,this.vao.draw(this.gl.TRIANGLES,6)},h.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()}},{"./shaders":226,"gl-buffer":230,"gl-vao":310}],226:[function(e,t,n){"use strict";var r=e("glslify"),a=e("gl-shader"),i=r(["#define GLSLIFY 1\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, majorAxis, minorAxis, screenAxis;\nuniform float lineWidth;\nuniform vec2 screenShape;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nvoid main() {\n  vec3 major = position.x * majorAxis;\n  vec3 minor = position.y * minorAxis;\n\n  vec3 vPosition = major + minor + offset;\n  vec3 pPosition = project(vPosition);\n  vec3 offset = project(vPosition + screenAxis * position.z);\n\n  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;\n\n  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);\n}\n"]),o=r(["precision mediump float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);n.line=function(e){return a(e,i,o,null,[{name:"position",type:"vec3"}])};var s=r(["#define GLSLIFY 1\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, axis, alignDir, alignOpt;\nuniform float scale, angle, pixelScale;\nuniform vec2 resolution;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nfloat computeViewAngle(vec3 a, vec3 b) {\n  vec3 A = project(a);\n  vec3 B = project(b);\n\n  return atan(\n    (B.y - A.y) * resolution.y,\n    (B.x - A.x) * resolution.x\n  );\n}\n\nconst float PI = 3.141592;\nconst float TWO_PI = 2.0 * PI;\nconst float HALF_PI = 0.5 * PI;\nconst float ONE_AND_HALF_PI = 1.5 * PI;\n\nint option = int(floor(alignOpt.x + 0.001));\nfloat hv_ratio =       alignOpt.y;\nbool enableAlign =    (alignOpt.z != 0.0);\n\nfloat mod_angle(float a) {\n  return mod(a, PI);\n}\n\nfloat positive_angle(float a) {\n  return mod_angle((a < 0.0) ?\n    a + TWO_PI :\n    a\n  );\n}\n\nfloat look_upwards(float a) {\n  float b = positive_angle(a);\n  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?\n    b - PI :\n    b;\n}\n\nfloat look_horizontal_or_vertical(float a, float ratio) {\n  // ratio controls the ratio between being horizontal to (vertical + horizontal)\n  // if ratio is set to 0.5 then it is 50%, 50%.\n  // when using a higher ratio e.g. 0.75 the result would\n  // likely be more horizontal than vertical.\n\n  float b = positive_angle(a);\n\n  return\n    (b < (      ratio) * HALF_PI) ? 0.0 :\n    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :\n    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :\n    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :\n                                    0.0;\n}\n\nfloat roundTo(float a, float b) {\n  return float(b * floor((a + 0.5 * b) / b));\n}\n\nfloat look_round_n_directions(float a, int n) {\n  float b = positive_angle(a);\n  float div = TWO_PI / float(n);\n  float c = roundTo(b, div);\n  return look_upwards(c);\n}\n\nfloat applyAlignOption(float rawAngle, float delta) {\n  return\n    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions\n    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical\n    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis\n    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards\n    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal\n                    rawAngle;                // otherwise return back raw input angle\n}\n\nbool isAxisTitle = (axis.x == 0.0) &&\n                   (axis.y == 0.0) &&\n                   (axis.z == 0.0);\n\nvoid main() {\n  //Compute world offset\n  float axisDistance = position.z;\n  vec3 dataPosition = axisDistance * axis + offset;\n\n  float beta = angle; // i.e. user defined attributes for each tick\n\n  float axisAngle;\n  float clipAngle;\n  float flip;\n\n  if (enableAlign) {\n    axisAngle = (isAxisTitle) ? HALF_PI :\n                      computeViewAngle(dataPosition, dataPosition + axis);\n    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);\n\n    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;\n    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;\n\n    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),\n                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;\n\n    beta += applyAlignOption(clipAngle, flip * PI);\n  }\n\n  //Compute plane offset\n  vec2 planeCoord = position.xy * pixelScale;\n\n  mat2 planeXform = scale * mat2(\n     cos(beta), sin(beta),\n    -sin(beta), cos(beta)\n  );\n\n  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;\n\n  //Compute clip position\n  vec3 clipPosition = project(dataPosition);\n\n  //Apply text offset in clip coordinates\n  clipPosition += vec3(viewOffset, 0.0);\n\n  //Done\n  gl_Position = vec4(clipPosition, 1.0);\n}"]),l=r(["precision mediump float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);n.text=function(e){return a(e,s,l,null,[{name:"position",type:"vec3"}])};var u=r(["#define GLSLIFY 1\nattribute vec3 position;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection;\nuniform vec3 enable;\nuniform vec3 bounds[2];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n\n  vec3 signAxis = sign(bounds[1] - bounds[0]);\n\n  vec3 realNormal = signAxis * normal;\n\n  if(dot(realNormal, enable) > 0.0) {\n    vec3 minRange = min(bounds[0], bounds[1]);\n    vec3 maxRange = max(bounds[0], bounds[1]);\n    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));\n    gl_Position = projection * view * model * vec4(nPosition, 1.0);\n  } else {\n    gl_Position = vec4(0,0,0,0);\n  }\n\n  colorChannel = abs(realNormal);\n}"]),c=r(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 colors[3];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  gl_FragColor = colorChannel.x * colors[0] +\n                 colorChannel.y * colors[1] +\n                 colorChannel.z * colors[2];\n}"]);n.bg=function(e){return a(e,u,c,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},{"gl-shader":288,glslify:392}],227:[function(e,t,n){(function(n){"use strict";t.exports=function(e,t,n,i,s,l){var c=r(e),f=a(e,[{buffer:c,size:3}]),d=o(e);d.attributes.position.location=0;var p=new u(e,d,c,f);return p.update(t,n,i,s,l),p};var r=e("gl-buffer"),a=e("gl-vao"),i=e("vectorize-text"),o=e("./shaders").text,s=window||n.global||{},l=s.__TEXT_CACHE||{};function u(e,t,n,r){this.gl=e,this.shader=t,this.buffer=n,this.vao=r,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}s.__TEXT_CACHE={};var c=u.prototype,f=[0,0];c.bind=function(e,t,n,r){this.vao.bind(),this.shader.bind();var a=this.shader.uniforms;a.model=e,a.view=t,a.projection=n,a.pixelScale=r,f[0]=this.gl.drawingBufferWidth,f[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=f},c.unbind=function(){this.vao.unbind()},c.update=function(e,t,n,r,a){this.gl;var o=[];function s(e,t,n,r){var a=l[n];a||(a=l[n]={});var s=a[t];s||(s=a[t]=function(e,t){try{return i(e,t)}catch(e){return console.warn("error vectorizing text:",e),{cells:[],positions:[]}}}(t,{triangles:!0,font:n,textAlign:"center",textBaseline:"middle"}));for(var u=(r||12)/12,c=s.positions,f=s.cells,d=0,p=f.length;d<p;++d)for(var h=f[d],m=2;m>=0;--m){var v=c[h[m]];o.push(u*v[0],-u*v[1],e)}}for(var u=[0,0,0],c=[0,0,0],f=[0,0,0],d=[0,0,0],p=0;p<3;++p){f[p]=o.length/3|0,s(.5*(e[0][p]+e[1][p]),t[p],n),d[p]=(o.length/3|0)-f[p],u[p]=o.length/3|0;for(var h=0;h<r[p].length;++h)r[p][h].text&&s(r[p][h].x,r[p][h].text,r[p][h].font||a,r[p][h].fontSize||12);c[p]=(o.length/3|0)-u[p]}this.buffer.update(o),this.tickOffset=u,this.tickCount=c,this.labelOffset=f,this.labelCount=d},c.drawTicks=function(e,t,n,r,a,i,o,s){this.tickCount[e]&&(this.shader.uniforms.axis=i,this.shader.uniforms.color=a,this.shader.uniforms.angle=n,this.shader.uniforms.scale=t,this.shader.uniforms.offset=r,this.shader.uniforms.alignDir=o,this.shader.uniforms.alignOpt=s,this.vao.draw(this.gl.TRIANGLES,this.tickCount[e],this.tickOffset[e]))},c.drawLabel=function(e,t,n,r,a,i,o,s){this.labelCount[e]&&(this.shader.uniforms.axis=i,this.shader.uniforms.color=a,this.shader.uniforms.angle=n,this.shader.uniforms.scale=t,this.shader.uniforms.offset=r,this.shader.uniforms.alignDir=o,this.shader.uniforms.alignOpt=s,this.vao.draw(this.gl.TRIANGLES,this.labelCount[e],this.labelOffset[e]))},c.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}}).call(this,e("_process"))},{"./shaders":226,_process:465,"gl-buffer":230,"gl-vao":310,"vectorize-text":527}],228:[function(e,t,n){"use strict";function r(e,t){var n=e+"",r=n.indexOf("."),a=0;r>=0&&(a=n.length-r-1);var i=Math.pow(10,a),o=Math.round(e*t*i),s=o+"";if(s.indexOf("e")>=0)return s;var l=o/i,u=o%i;o<0?(l=0|-Math.ceil(l),u=0|-u):(l=0|Math.floor(l),u|=0);var c=""+l;if(o<0&&(c="-"+c),a){for(var f=""+u;f.length<a;)f="0"+f;return c+"."+f}return c}n.create=function(e,t){for(var n=[],a=0;a<3;++a){for(var i=[],o=(e[0][a],e[1][a],0);o*t[a]<=e[1][a];++o)i.push({x:o*t[a],text:r(t[a],o)});for(var o=-1;o*t[a]>=e[0][a];--o)i.push({x:o*t[a],text:r(t[a],o)});n.push(i)}return n},n.equal=function(e,t){for(var n=0;n<3;++n){if(e[n].length!==t[n].length)return!1;for(var r=0;r<e[n].length;++r){var a=e[n][r],i=t[n][r];if(a.x!==i.x||a.text!==i.text||a.font!==i.font||a.fontColor!==i.fontColor||a.fontSize!==i.fontSize||a.dx!==i.dx||a.dy!==i.dy)return!1}}return!0}},{}],229:[function(e,t,n){"use strict";t.exports=function(e,t,n,l,f){var d=t.model||u,p=t.view||u,g=t.projection||u,y=e.bounds,b=(f=f||i(d,p,g,y)).axis;f.edges,o(c,p,d),o(c,g,c);for(var x=m,_=0;_<3;++_)x[_].lo=1/0,x[_].hi=-1/0,x[_].pixelsPerDataUnit=1/0;var w=r(s(c,c));s(c,c);for(var T=0;T<3;++T){var k=(T+1)%3,C=(T+2)%3,E=v;e:for(var _=0;_<2;++_){var M=[];if(b[T]<0!=!!_){E[T]=y[_][T];for(var A=0;A<2;++A){E[k]=y[A^_][k];for(var S=0;S<2;++S)E[C]=y[S^A^_][C],M.push(E.slice())}for(var A=0;A<w.length;++A){if(0===M.length)continue e;M=a.positive(M,w[A])}for(var A=0;A<M.length;++A)for(var C=M[A],O=h(v,c,C,n,l),S=0;S<3;++S)x[S].lo=Math.min(x[S].lo,C[S]),x[S].hi=Math.max(x[S].hi,C[S]),S!==T&&(x[S].pixelsPerDataUnit=Math.min(x[S].pixelsPerDataUnit,Math.abs(O[S])))}}}return x};var r=e("extract-frustum-planes"),a=e("split-polygon"),i=e("./lib/cube.js"),o=e("gl-mat4/multiply"),s=e("gl-mat4/transpose"),l=e("gl-vec4/transformMat4"),u=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),c=new Float32Array(16);function f(e,t,n){this.lo=e,this.hi=t,this.pixelsPerDataUnit=n}var d=[0,0,0,1],p=[0,0,0,1];function h(e,t,n,r,a){for(var i=0;i<3;++i){for(var o=d,s=p,u=0;u<3;++u)s[u]=o[u]=n[u];s[3]=o[3]=1,s[i]+=1,l(s,s,t),s[3]<0&&(e[i]=1/0),o[i]-=1,l(o,o,t),o[3]<0&&(e[i]=1/0);var c=(o[0]/o[3]-s[0]/s[3])*r,f=(o[1]/o[3]-s[1]/s[3])*a;e[i]=.25*Math.sqrt(c*c+f*f)}return e}var m=[new f(1/0,-1/0,1/0),new f(1/0,-1/0,1/0),new f(1/0,-1/0,1/0)],v=[0,0,0]},{"./lib/cube.js":224,"extract-frustum-planes":213,"gl-mat4/multiply":256,"gl-mat4/transpose":264,"gl-vec4/transformMat4":381,"split-polygon":503}],230:[function(e,t,n){"use strict";var r=e("typedarray-pool"),a=e("ndarray-ops"),i=e("ndarray"),o=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function s(e,t,n,r,a){this.gl=e,this.type=t,this.handle=n,this.length=r,this.usage=a}var l=s.prototype;function u(e,t,n,r,a,i){var o=a.length*a.BYTES_PER_ELEMENT;if(i<0)return e.bufferData(t,a,r),o;if(o+i>n)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return e.bufferSubData(t,i,a),n}function c(e,t){for(var n=r.malloc(e.length,t),a=e.length,i=0;i<a;++i)n[i]=e[i];return n}l.bind=function(){this.gl.bindBuffer(this.type,this.handle)},l.unbind=function(){this.gl.bindBuffer(this.type,null)},l.dispose=function(){this.gl.deleteBuffer(this.handle)},l.update=function(e,t){if("number"!=typeof t&&(t=-1),this.bind(),"object"==typeof e&&void 0!==e.shape){var n=e.dtype;if(o.indexOf(n)<0&&(n="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER){var s=gl.getExtension("OES_element_index_uint");n=s&&"uint16"!==n?"uint32":"uint16"}if(n===e.dtype&&function(e,t){for(var n=1,r=t.length-1;r>=0;--r){if(t[r]!==n)return!1;n*=e[r]}return!0}(e.shape,e.stride))0===e.offset&&e.data.length===e.shape[0]?this.length=u(this.gl,this.type,this.length,this.usage,e.data,t):this.length=u(this.gl,this.type,this.length,this.usage,e.data.subarray(e.offset,e.shape[0]),t);else{var l=r.malloc(e.size,n),f=i(l,e.shape);a.assign(f,e),this.length=u(this.gl,this.type,this.length,this.usage,t<0?l:l.subarray(0,e.size),t),r.free(l)}}else if(Array.isArray(e)){var d;d=this.type===this.gl.ELEMENT_ARRAY_BUFFER?c(e,"uint16"):c(e,"float32"),this.length=u(this.gl,this.type,this.length,this.usage,t<0?d:d.subarray(0,e.length),t),r.free(d)}else if("object"==typeof e&&"number"==typeof e.length)this.length=u(this.gl,this.type,this.length,this.usage,e,t);else{if("number"!=typeof e&&void 0!==e)throw new Error("gl-buffer: Invalid data type");if(t>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");(e|=0)<=0&&(e=1),this.gl.bufferData(this.type,0|e,this.usage),this.length=e}},t.exports=function(e,t,n,r){if(n=n||e.ARRAY_BUFFER,r=r||e.DYNAMIC_DRAW,n!==e.ARRAY_BUFFER&&n!==e.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(r!==e.DYNAMIC_DRAW&&r!==e.STATIC_DRAW&&r!==e.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var a=e.createBuffer(),i=new s(e,n,a,0,r);return i.update(t),i}},{ndarray:433,"ndarray-ops":427,"typedarray-pool":522}],231:[function(e,t,n){"use strict";var r=e("gl-vec3"),a=(e("gl-vec4"),function(e,t){for(var n=0;n<e.length;n++)if(e[n]>=t)return n-1;return n}),i=r.create(),o=r.create(),s=function(e,t,n){return e<t?t:e>n?n:e},l=function(e,t,n,l){var u=e[0],c=e[1],f=e[2],d=n[0].length,p=n[1].length,h=n[2].length,m=a(n[0],u),v=a(n[1],c),g=a(n[2],f),y=m+1,b=v+1,x=g+1;if(l&&(m=s(m,0,d-1),y=s(y,0,d-1),v=s(v,0,p-1),b=s(b,0,p-1),g=s(g,0,h-1),x=s(x,0,h-1)),m<0||v<0||g<0||y>=d||b>=p||x>=h)return r.create();var _=(u-n[0][m])/(n[0][y]-n[0][m]),w=(c-n[1][v])/(n[1][b]-n[1][v]),T=(f-n[2][g])/(n[2][x]-n[2][g]);(_<0||_>1||isNaN(_))&&(_=0),(w<0||w>1||isNaN(w))&&(w=0),(T<0||T>1||isNaN(T))&&(T=0);var k=g*d*p,C=x*d*p,E=v*d,M=b*d,A=m,S=y,O=t[E+k+A],P=t[E+k+S],R=t[M+k+A],L=t[M+k+S],D=t[E+C+A],I=t[E+C+S],z=t[M+C+A],j=t[M+C+S],N=r.create();return r.lerp(N,O,P,_),r.lerp(i,R,L,_),r.lerp(N,N,i,w),r.lerp(i,D,I,_),r.lerp(o,z,j,_),r.lerp(i,i,o,w),r.lerp(N,N,i,T),N};t.exports=function(e,t){var n;n=e.positions?e.positions:function(e){for(var t=e[0],n=e[1],r=e[2],a=[],i=0;i<r.length;i++)for(var o=0;o<n.length;o++)for(var s=0;s<t.length;s++)a.push([r[i],n[o],t[s]]);return a}(e.meshgrid);var a=e.meshgrid,i=e.vectors,o={positions:[],vertexIntensity:[],vertexIntensityBounds:e.vertexIntensityBounds,vertexNormals:[],vectors:[],cells:[],coneOffset:e.coneOffset,colormap:e.colormap};if(0===e.positions.length)return t&&(t[0]=[0,0,0],t[1]=[0,0,0]),o;for(var s=0,u=1/0,c=-1/0,f=1/0,d=-1/0,p=1/0,h=-1/0,m=null,v=null,g=[],y=1/0,b=0;b<n.length;b++){var x,_=n[b];u=Math.min(_[0],u),c=Math.max(_[0],c),f=Math.min(_[1],f),d=Math.max(_[1],d),p=Math.min(_[2],p),h=Math.max(_[2],h),x=a?l(_,i,a,!0):i[b],r.length(x)>s&&(s=r.length(x)),b&&(y=Math.min(y,2*r.distance(m,_)/(r.length(v)+r.length(x)))),m=_,v=x,g.push(x)}var w=[u,f,p],T=[c,d,h];t&&(t[0]=w,t[1]=T),0===s&&(s=1);var k=1/s;isFinite(y)&&!isNaN(y)||(y=1),o.vectorScale=y;var C=function(e,t,n){var a=r.create();return void 0!==e&&r.set(a,e,t,n),a}(0,1,0),E=e.coneSize||.5;e.absoluteConeSize&&(E=e.absoluteConeSize*k),o.coneScale=E;for(var b=0,M=0;b<n.length;b++)for(var _=n[b],A=_[0],S=_[1],O=_[2],P=g[b],R=r.length(P)*k,L=0;L<8;L++){o.positions.push([A,S,O,M++]),o.positions.push([A,S,O,M++]),o.positions.push([A,S,O,M++]),o.positions.push([A,S,O,M++]),o.positions.push([A,S,O,M++]),o.positions.push([A,S,O,M++]),o.vectors.push(P),o.vectors.push(P),o.vectors.push(P),o.vectors.push(P),o.vectors.push(P),o.vectors.push(P),o.vertexIntensity.push(R,R,R),o.vertexIntensity.push(R,R,R),o.vertexNormals.push(C,C,C),o.vertexNormals.push(C,C,C);var D=o.positions.length;o.cells.push([D-6,D-5,D-4],[D-3,D-2,D-1])}return o},t.exports.createConeMesh=e("./lib/conemesh")},{"./lib/conemesh":233,"gl-vec3":329,"gl-vec4":365}],232:[function(e,t,n){"use strict";var r=e("barycentric"),a=e("polytope-closest-point/lib/closest_point_2d.js");function i(e,t){for(var n=[0,0,0,0],r=0;r<4;++r)for(var a=0;a<4;++a)n[a]+=e[4*r+a]*t[r];return n}function o(e,t,n,r,a){for(var o=i(r,i(n,i(t,[e[0],e[1],e[2],1]))),s=0;s<3;++s)o[s]/=o[3];return[.5*a[0]*(1+o[0]),.5*a[1]*(1-o[1])]}t.exports=function(e,t,n,i,s,l){if(1===e.length)return[0,e[0].slice()];for(var u=new Array(e.length),c=0;c<e.length;++c)u[c]=o(e[c],n,i,s,l);for(var f=0,d=1/0,c=0;c<u.length;++c){for(var p=0,h=0;h<2;++h)p+=Math.pow(u[c][h]-t[h],2);p<d&&(d=p,f=c)}for(var m=function(e,t){if(2===e.length){for(var n=0,i=0,o=0;o<2;++o)n+=Math.pow(t[o]-e[0][o],2),i+=Math.pow(t[o]-e[1][o],2);return n=Math.sqrt(n),i=Math.sqrt(i),n+i<1e-6?[1,0]:[i/(n+i),n/(i+n)]}if(3===e.length){var s=[0,0];return a(e[0],e[1],e[2],t,s),r(e,s)}return[]}(u,t),v=0,c=0;c<3;++c){if(m[c]<-.001||m[c]>1.0001)return null;v+=m[c]}return Math.abs(v-1)>.001?null:[f,function(e,t){for(var n=[0,0,0],r=0;r<e.length;++r)for(var a=e[r],i=t[r],o=0;o<3;++o)n[o]+=i*a[o];return n}(e,m),m]}},{barycentric:61,"polytope-closest-point/lib/closest_point_2d.js":464}],233:[function(e,t,n){"use strict";var r=e("gl-shader"),a=e("gl-buffer"),i=e("gl-vao"),o=e("gl-texture2d"),s=e("normals"),l=e("gl-mat4/multiply"),u=e("gl-mat4/invert"),c=e("ndarray"),f=e("colormap"),d=e("simplicial-complex-contour"),p=e("typedarray-pool"),h=e("./shaders"),m=(e("./closest-point"),h.meshShader),v=h.pickShader,g=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function y(e,t,n,r,a,i,o,s,l,u,c,f,d,p,h,m,v,y,b,x,_,w,T,k,C,E,M,A){this.gl=e,this.cells=[],this.positions=[],this.intensity=[],this.texture=t,this.dirty=!0,this.triShader=n,this.lineShader=r,this.pointShader=a,this.pickShader=i,this.pointPickShader=o,this.contourShader=s,this.trianglePositions=l,this.triangleVectors=u,this.triangleColors=f,this.triangleNormals=p,this.triangleUVs=d,this.triangleIds=c,this.triangleVAO=h,this.triangleCount=0,this.lineWidth=1,this.edgePositions=m,this.edgeColors=y,this.edgeUVs=b,this.edgeIds=v,this.edgeVAO=x,this.edgeCount=0,this.pointPositions=_,this.pointColors=T,this.pointUVs=k,this.pointSizes=C,this.pointIds=w,this.pointVAO=E,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=M,this.contourVAO=A,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=g,this._view=g,this._projection=g,this._resolution=[1,1]}var b=y.prototype;function x(e){var t=r(e,v.vertex,v.fragment,null,v.attributes);return t.attributes.position.location=0,t.attributes.id.location=1,t.attributes.vector.location=5,t}b.isOpaque=function(){return this.opacity>=1},b.isTransparent=function(){return this.opacity<1},b.pickSlots=1,b.setPickBase=function(e){this.pickId=e},b.highlight=function(e){if(e&&this.contourEnable){for(var t=d(this.cells,this.intensity,e.intensity),n=t.cells,r=t.vertexIds,a=t.vertexWeights,i=n.length,o=p.mallocFloat32(6*i),s=0,l=0;l<i;++l)for(var u=n[l],c=0;c<2;++c){var f=u[0];2===u.length&&(f=u[c]);for(var h=r[f][0],m=r[f][1],v=a[f],g=1-v,y=this.positions[h],b=this.positions[m],x=0;x<3;++x)o[s++]=v*y[x]+g*b[x]}this.contourCount=s/3|0,this.contourPositions.update(o.subarray(0,s)),p.free(o)}else this.contourCount=0},b.update=function(e){e=e||{};var t=this.gl;this.dirty=!0,"contourEnable"in e&&(this.contourEnable=e.contourEnable),"contourColor"in e&&(this.contourColor=e.contourColor),"lineWidth"in e&&(this.lineWidth=e.lineWidth),"lightPosition"in e&&(this.lightPosition=e.lightPosition),"opacity"in e&&(this.opacity=e.opacity),"ambient"in e&&(this.ambientLight=e.ambient),"diffuse"in e&&(this.diffuseLight=e.diffuse),"specular"in e&&(this.specularLight=e.specular),"roughness"in e&&(this.roughness=e.roughness),"fresnel"in e&&(this.fresnel=e.fresnel),void 0!==e.vectorScale&&(this.vectorScale=e.vectorScale),void 0!==e.coneScale&&(this.coneScale=e.coneScale),void 0!==e.coneOffset&&(this.coneOffset=e.coneOffset),e.texture?(this.texture.dispose(),this.texture=o(t,e.texture)):e.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=t.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=t.LINEAR,this.texture.setPixels(function(e){for(var t=f({colormap:e,nshades:256,format:"rgba"}),n=new Uint8Array(1024),r=0;r<256;++r){for(var a=t[r],i=0;i<3;++i)n[4*r+i]=a[i];n[4*r+3]=255*a[3]}return c(n,[256,256,4],[4,0,1])}(e.colormap)),this.texture.generateMipmap());var n=e.cells,r=e.positions,a=e.vectors;if(r&&n&&a){var i=[],l=[],u=[],d=[],p=[],h=[],m=[],v=[],g=[],y=[],b=[],x=[],_=[],w=[],T=[];this.cells=n,this.positions=r;var k=e.vertexNormals,C=e.cellNormals,E=void 0===e.vertexNormalsEpsilon?1e-6:e.vertexNormalsEpsilon,M=void 0===e.faceNormalsEpsilon?1e-6:e.faceNormalsEpsilon;e.useFacetNormals&&!C&&(C=s.faceNormals(n,r,M)),C||k||(k=s.vertexNormals(n,r,E));var A=e.vertexColors,S=e.cellColors,O=e.meshColor||[1,1,1,1],P=e.vertexUVs,R=e.vertexIntensity,L=e.cellUVs,D=e.cellIntensity,I=1/0,z=-1/0;if(!P&&!L)if(R)if(e.vertexIntensityBounds)I=+e.vertexIntensityBounds[0],z=+e.vertexIntensityBounds[1];else for(var j=0;j<R.length;++j){var N=R[j];I=Math.min(I,N),z=Math.max(z,N)}else if(D)for(var j=0;j<D.length;++j){var N=D[j];I=Math.min(I,N),z=Math.max(z,N)}else for(var j=0;j<r.length;++j){var N=r[j][2];I=Math.min(I,N),z=Math.max(z,N)}this.intensity=R||(D?function(e,t,n){for(var r=new Array(t),a=0;a<t;++a)r[a]=0;for(var i=e.length,a=0;a<i;++a)for(var o=e[a],s=0;s<o.length;++s)r[o[s]]=n[a];return r}(n,r.length,D):function(e){for(var t=e.length,n=new Array(t),r=0;r<t;++r)n[r]=e[r][2];return n}(r));var F=e.pointSizes,B=e.pointSize||1;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var j=0;j<r.length;++j)for(var V=r[j],U=0;U<3;++U)!isNaN(V[U])&&isFinite(V[U])&&(this.bounds[0][U]=Math.min(this.bounds[0][U],V[U]),this.bounds[1][U]=Math.max(this.bounds[1][U],V[U]));var G=0,H=0,W=0;e:for(var j=0;j<n.length;++j){var q=n[j];switch(q.length){case 1:for(var Y=q[0],V=r[Y],U=0;U<3;++U)if(isNaN(V[U])||!isFinite(V[U]))continue e;b.push(V[0],V[1],V[2],V[3]),3===(Z=A?A[Y]:S?S[j]:O).length?x.push(Z[0],Z[1],Z[2],1):x.push(Z[0],Z[1],Z[2],Z[3]),$=P?P[Y]:R?[(R[Y]-I)/(z-I),0]:L?L[j]:D?[(D[j]-I)/(z-I),0]:[(V[2]-I)/(z-I),0],_.push($[0],$[1]),F?w.push(F[Y]):w.push(B),T.push(j),W+=1;break;case 2:for(var U=0;U<2;++U)for(var Y=q[U],V=r[Y],X=0;X<3;++X)if(isNaN(V[X])||!isFinite(V[X]))continue e;for(var U=0;U<2;++U){var Y=q[U],V=r[Y];m.push(V[0],V[1],V[2]),3===(Z=A?A[Y]:S?S[j]:O).length?v.push(Z[0],Z[1],Z[2],1):v.push(Z[0],Z[1],Z[2],Z[3]),$=P?P[Y]:R?[(R[Y]-I)/(z-I),0]:L?L[j]:D?[(D[j]-I)/(z-I),0]:[(V[2]-I)/(z-I),0],g.push($[0],$[1]),y.push(j)}H+=1;break;case 3:for(var U=0;U<3;++U)for(var Y=q[U],V=r[Y],X=0;X<3;++X)if(isNaN(V[X])||!isFinite(V[X]))continue e;for(var U=0;U<3;++U){var Y=q[U],V=r[Y];i.push(V[0],V[1],V[2],V[3]);var Z,$,K,J=a[Y];l.push(J[0],J[1],J[2]),3===(Z=A?A[Y]:S?S[j]:O).length?u.push(Z[0],Z[1],Z[2],1):u.push(Z[0],Z[1],Z[2],Z[3]),$=P?P[Y]:R?[(R[Y]-I)/(z-I),0]:L?L[j]:D?[(D[j]-I)/(z-I),0]:[(V[2]-I)/(z-I),0],p.push($[0],$[1]),K=k?k[Y]:C[j],d.push(K[0],K[1],K[2]),h.push(j)}G+=1}}this.pointCount=W,this.edgeCount=H,this.triangleCount=G,this.pointPositions.update(b),this.pointColors.update(x),this.pointUVs.update(_),this.pointSizes.update(w),this.pointIds.update(new Uint32Array(T)),this.edgePositions.update(m),this.edgeColors.update(v),this.edgeUVs.update(g),this.edgeIds.update(new Uint32Array(y)),this.trianglePositions.update(i),this.triangleVectors.update(l),this.triangleColors.update(u),this.triangleUVs.update(p),this.triangleNormals.update(d),this.triangleIds.update(new Uint32Array(h))}},b.drawTransparent=b.draw=function(e){e=e||{};for(var t=this.gl,n=e.model||g,r=e.view||g,a=e.projection||g,i=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],o=0;o<3;++o)i[0][o]=Math.max(i[0][o],this.clipBounds[0][o]),i[1][o]=Math.min(i[1][o],this.clipBounds[1][o]);var s={model:n,view:r,projection:a,clipBounds:i,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,contourColor:this.contourColor,texture:0};this.texture.bind(0);var c=new Array(16);l(c,s.view,s.model),l(c,s.projection,c),u(c,c);for(var o=0;o<3;++o)s.eyePosition[o]=c[12+o]/c[15];for(var f=c[15],o=0;o<3;++o)f+=this.lightPosition[o]*c[4*o+3];for(var o=0;o<3;++o){for(var d=c[12+o],p=0;p<3;++p)d+=c[4*p+o]*this.lightPosition[p];s.lightPosition[o]=d/f}if(this.triangleCount>0){var h=this.triShader;h.bind(),h.uniforms=s,this.triangleVAO.bind(),t.drawArrays(t.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}if(this.edgeCount>0&&this.lineWidth>0){var h=this.lineShader;h.bind(),h.uniforms=s,this.edgeVAO.bind(),t.lineWidth(this.lineWidth),t.drawArrays(t.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()}if(this.pointCount>0){var h=this.pointShader;h.bind(),h.uniforms=s,this.pointVAO.bind(),t.drawArrays(t.POINTS,0,this.pointCount),this.pointVAO.unbind()}if(this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0){var h=this.contourShader;h.bind(),h.uniforms=s,this.contourVAO.bind(),t.drawArrays(t.LINES,0,this.contourCount),this.contourVAO.unbind()}},b.drawPick=function(e){e=e||{};for(var t=this.gl,n=e.model||g,r=e.view||g,a=e.projection||g,i=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],o=0;o<3;++o)i[0][o]=Math.max(i[0][o],this.clipBounds[0][o]),i[1][o]=Math.min(i[1][o],this.clipBounds[1][o]);this._model=[].slice.call(n),this._view=[].slice.call(r),this._projection=[].slice.call(a),this._resolution=[t.drawingBufferWidth,t.drawingBufferHeight];var s={model:n,view:r,projection:a,clipBounds:i,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},l=this.pickShader;if(l.bind(),l.uniforms=s,this.triangleCount>0&&(this.triangleVAO.bind(),t.drawArrays(t.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),t.lineWidth(this.lineWidth),t.drawArrays(t.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0){var l=this.pointPickShader;l.bind(),l.uniforms=s,this.pointVAO.bind(),t.drawArrays(t.POINTS,0,this.pointCount),this.pointVAO.unbind()}},b.pick=function(e){if(!e)return null;if(e.id!==this.pickId)return null;var t=e.value[0]+256*e.value[1]+65536*e.value[2],n=this.cells[t],r=this.positions[n[1]].slice(0,3);return{index:Math.floor(n[1]/48),position:r,dataCoordinate:r}},b.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose()},t.exports=function(e,t){1===arguments.length&&(e=(t=e).gl);var n=t.triShader||function(e){var t=r(e,m.vertex,m.fragment,null,m.attributes);return t.attributes.position.location=0,t.attributes.color.location=2,t.attributes.uv.location=3,t.attributes.vector.location=5,t}(e),s=x(e),l=o(e,c(new Uint8Array([255,255,255,255]),[1,1,4]));l.generateMipmap(),l.minFilter=e.LINEAR_MIPMAP_LINEAR,l.magFilter=e.LINEAR;var u=a(e),f=a(e),d=a(e),p=a(e),h=a(e),v=a(e),g=i(e,[{buffer:u,type:e.FLOAT,size:4},{buffer:v,type:e.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:d,type:e.FLOAT,size:4},{buffer:p,type:e.FLOAT,size:2},{buffer:h,type:e.FLOAT,size:3},{buffer:f,type:e.FLOAT,size:3}]),b=a(e),_=a(e),w=a(e),T=a(e),k=i(e,[{buffer:b,type:e.FLOAT,size:3},{buffer:T,type:e.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:_,type:e.FLOAT,size:4},{buffer:w,type:e.FLOAT,size:2}]),C=a(e),E=a(e),M=a(e),A=a(e),S=a(e),O=i(e,[{buffer:C,type:e.FLOAT,size:3},{buffer:S,type:e.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:E,type:e.FLOAT,size:4},{buffer:M,type:e.FLOAT,size:2},{buffer:A,type:e.FLOAT,size:1}]),P=a(e),R=i(e,[{buffer:P,type:e.FLOAT,size:3}]),L=new y(e,l,n,null,null,s,null,null,u,f,v,d,p,h,g,b,T,_,w,k,C,S,E,M,A,O,P,R);return L.update(t),L}},{"./closest-point":232,"./shaders":234,colormap:114,"gl-buffer":230,"gl-mat4/invert":254,"gl-mat4/multiply":256,"gl-shader":288,"gl-texture2d":305,"gl-vao":310,ndarray:433,normals:436,"simplicial-complex-contour":494,"typedarray-pool":522}],234:[function(e,t,n){var r=e("glslify"),a=r(["precision mediump float;\n#define GLSLIFY 1\n\nfloat inverse(float m) {\n  return 1.0 / m;\n}\n\nmat2 inverse(mat2 m) {\n  return mat2(m[1][1],-m[0][1],\n             -m[1][0], m[0][0]) / (m[0][0]*m[1][1] - m[0][1]*m[1][0]);\n}\n\nmat3 inverse(mat3 m) {\n  float a00 = m[0][0], a01 = m[0][1], a02 = m[0][2];\n  float a10 = m[1][0], a11 = m[1][1], a12 = m[1][2];\n  float a20 = m[2][0], a21 = m[2][1], a22 = m[2][2];\n\n  float b01 = a22 * a11 - a12 * a21;\n  float b11 = -a22 * a10 + a12 * a20;\n  float b21 = a21 * a10 - a11 * a20;\n\n  float det = a00 * b01 + a01 * b11 + a02 * b21;\n\n  return mat3(b01, (-a22 * a01 + a02 * a21), (a12 * a01 - a02 * a11),\n              b11, (a22 * a00 - a02 * a20), (-a12 * a00 + a02 * a10),\n              b21, (-a21 * a00 + a01 * a20), (a11 * a00 - a01 * a10)) / det;\n}\n\nmat4 inverse(mat4 m) {\n  float\n      a00 = m[0][0], a01 = m[0][1], a02 = m[0][2], a03 = m[0][3],\n      a10 = m[1][0], a11 = m[1][1], a12 = m[1][2], a13 = m[1][3],\n      a20 = m[2][0], a21 = m[2][1], a22 = m[2][2], a23 = m[2][3],\n      a30 = m[3][0], a31 = m[3][1], a32 = m[3][2], a33 = m[3][3],\n\n      b00 = a00 * a11 - a01 * a10,\n      b01 = a00 * a12 - a02 * a10,\n      b02 = a00 * a13 - a03 * a10,\n      b03 = a01 * a12 - a02 * a11,\n      b04 = a01 * a13 - a03 * a11,\n      b05 = a02 * a13 - a03 * a12,\n      b06 = a20 * a31 - a21 * a30,\n      b07 = a20 * a32 - a22 * a30,\n      b08 = a20 * a33 - a23 * a30,\n      b09 = a21 * a32 - a22 * a31,\n      b10 = a21 * a33 - a23 * a31,\n      b11 = a22 * a33 - a23 * a32,\n\n      det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  return mat4(\n      a11 * b11 - a12 * b10 + a13 * b09,\n      a02 * b10 - a01 * b11 - a03 * b09,\n      a31 * b05 - a32 * b04 + a33 * b03,\n      a22 * b04 - a21 * b05 - a23 * b03,\n      a12 * b08 - a10 * b11 - a13 * b07,\n      a00 * b11 - a02 * b08 + a03 * b07,\n      a32 * b02 - a30 * b05 - a33 * b01,\n      a20 * b05 - a22 * b02 + a23 * b01,\n      a10 * b10 - a11 * b08 + a13 * b06,\n      a01 * b08 - a00 * b10 - a03 * b06,\n      a30 * b04 - a31 * b02 + a33 * b00,\n      a21 * b02 - a20 * b04 - a23 * b00,\n      a11 * b07 - a10 * b09 - a12 * b06,\n      a00 * b09 - a01 * b07 + a02 * b06,\n      a31 * b01 - a30 * b03 - a32 * b00,\n      a20 * b03 - a21 * b01 + a22 * b00) / det;\n}\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float index, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  index = mod(index, segmentCount * 6.0);\n\n  float segment = floor(index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex == 3.0) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  // angle = 2pi * ((segment + ((segmentIndex == 1.0 || segmentIndex == 5.0) ? 1.0 : 0.0)) / segmentCount)\n  float nextAngle = float(segmentIndex == 1.0 || segmentIndex == 5.0);\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex <= 2.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec3 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\nuniform float vectorScale;\nuniform float coneScale;\n\nuniform float coneOffset;\n\nuniform mat4 model\n           , view\n           , projection;\nuniform vec3 eyePosition\n           , lightPosition;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data\n           , f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n  normal = normalize(normal * inverse(mat3(model)));\n\n  // vec4 m_position  = model * vec4(conePosition, 1.0);\n  vec4 t_position  = view * conePosition;\n  gl_Position      = projection * t_position;\n  f_color          = color; //vec4(position.w, color.r, 0, 0);\n  f_normal         = normal;\n  f_data           = conePosition.xyz;\n  f_position       = position.xyz;\n  f_eyeDirection   = eyePosition   - conePosition.xyz;\n  f_lightDirection = lightPosition - conePosition.xyz;\n  f_uv             = uv;\n}\n"]),i=r(["precision mediump float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness\n            , fresnel\n            , kambient\n            , kdiffuse\n            , kspecular\n            , opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data\n           , f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(!gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = cookTorranceSpecular(L, V, N, roughness, fresnel);\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor =  texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}"]),o=r(["precision mediump float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float index, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  index = mod(index, segmentCount * 6.0);\n\n  float segment = floor(index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex == 3.0) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  // angle = 2pi * ((segment + ((segmentIndex == 1.0 || segmentIndex == 5.0) ? 1.0 : 0.0)) / segmentCount)\n  float nextAngle = float(segmentIndex == 1.0 || segmentIndex == 5.0);\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex <= 2.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec3 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\n\nuniform float vectorScale;\nuniform float coneScale;\nuniform float coneOffset;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n  gl_Position = projection * view * conePosition;\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),s=r(["precision mediump float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);n.meshShader={vertex:a,fragment:i,attributes:[{name:"position",type:"vec4"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},n.pickShader={vertex:o,fragment:s,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},{glslify:392}],235:[function(e,t,n){t.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34000:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],236:[function(e,t,n){var r=e("./1.0/numbers");t.exports=function(e){return r[e]}},{"./1.0/numbers":235}],237:[function(e,t,n){"use strict";t.exports=function(e){var t=e.gl,n=r(t),o=a(t,[{buffer:n,type:t.FLOAT,size:3,offset:0,stride:40},{buffer:n,type:t.FLOAT,size:4,offset:12,stride:40},{buffer:n,type:t.FLOAT,size:3,offset:28,stride:40}]),l=i(t);l.attributes.position.location=0,l.attributes.color.location=1,l.attributes.offset.location=2;var u=new s(t,n,o,l);return u.update(e),u};var r=e("gl-buffer"),a=e("gl-vao"),i=e("./shaders/index"),o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function s(e,t,n,r){this.gl=e,this.shader=r,this.buffer=t,this.vao=n,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1}var l=s.prototype;function u(e,t){for(var n=0;n<3;++n)e[0][n]=Math.min(e[0][n],t[n]),e[1][n]=Math.max(e[1][n],t[n])}l.isOpaque=function(){return this.opacity>=1},l.isTransparent=function(){return this.opacity<1},l.drawTransparent=l.draw=function(e){var t=this.gl,n=this.shader.uniforms;this.shader.bind();var r=n.view=e.view||o,a=n.projection=e.projection||o;n.model=e.model||o,n.clipBounds=this.clipBounds,n.opacity=this.opacity;var i=r[12],s=r[13],l=r[14],u=r[15],c=this.pixelRatio*(a[3]*i+a[7]*s+a[11]*l+a[15]*u)/t.drawingBufferHeight;this.vao.bind();for(var f=0;f<3;++f)t.lineWidth(this.lineWidth[f]),n.capSize=this.capSize[f]*c,this.lineCount[f]&&t.drawArrays(t.LINES,this.lineOffset[f],this.lineCount[f]);this.vao.unbind()};var c=function(){for(var e=new Array(3),t=0;t<3;++t){for(var n=[],r=1;r<=2;++r)for(var a=-1;a<=1;a+=2){var i=(r+t)%3,o=[0,0,0];o[i]=a,n.push(o)}e[t]=n}return e}();function f(e,t,n,r){for(var a=c[r],i=0;i<a.length;++i){var o=a[i];e.push(t[0],t[1],t[2],n[0],n[1],n[2],n[3],o[0],o[1],o[2])}return a.length}l.update=function(e){"lineWidth"in(e=e||{})&&(this.lineWidth=e.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in e&&(this.capSize=e.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),"opacity"in e&&(this.opacity=e.opacity);var t=e.color||[[0,0,0],[0,0,0],[0,0,0]],n=e.position,r=e.error;if(Array.isArray(t[0])||(t=[t,t,t]),n&&r){var a=[],i=n.length,o=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var s=0;s<3;++s){this.lineOffset[s]=o;e:for(var l=0;l<i;++l){for(var c=n[l],d=0;d<3;++d)if(isNaN(c[d])||!isFinite(c[d]))continue e;var p=r[l],h=t[s];if(Array.isArray(h[0])&&(h=t[l]),3===h.length&&(h=[h[0],h[1],h[2],1]),!isNaN(p[0][s])&&!isNaN(p[1][s])){if(p[0][s]<0){var m=c.slice();m[s]+=p[0][s],a.push(c[0],c[1],c[2],h[0],h[1],h[2],h[3],0,0,0,m[0],m[1],m[2],h[0],h[1],h[2],h[3],0,0,0),u(this.bounds,m),o+=2+f(a,m,h,s)}if(p[1][s]>0){var m=c.slice();m[s]+=p[1][s],a.push(c[0],c[1],c[2],h[0],h[1],h[2],h[3],0,0,0,m[0],m[1],m[2],h[0],h[1],h[2],h[3],0,0,0),u(this.bounds,m),o+=2+f(a,m,h,s)}}}this.lineCount[s]=o-this.lineOffset[s]}this.buffer.update(a)}},l.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()}},{"./shaders/index":238,"gl-buffer":230,"gl-vao":310}],238:[function(e,t,n){"use strict";var r=e("glslify"),a=e("gl-shader"),i=r(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, offset;\nattribute vec4 color;\nuniform mat4 model, view, projection;\nuniform float capSize;\nvarying vec4 fragColor;\nvarying vec3 fragPosition;\n\nvoid main() {\n  vec4 worldPosition  = model * vec4(position, 1.0);\n  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);\n  gl_Position         = projection * view * worldPosition;\n  fragColor           = color;\n  fragPosition        = position;\n}"]),o=r(["precision mediump float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float opacity;\nvarying vec3 fragPosition;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], fragPosition)) discard;\n\n  gl_FragColor = opacity * fragColor;\n}"]);t.exports=function(e){return a(e,i,o,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},{"gl-shader":288,glslify:392}],239:[function(e,t,n){"use strict";var r=e("gl-texture2d");t.exports=function(e,t,n,r){a||(a=e.FRAMEBUFFER_UNSUPPORTED,i=e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,o=e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,s=e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var u=e.getExtension("WEBGL_draw_buffers");if(!l&&u&&function(e,t){var n=e.getParameter(t.MAX_COLOR_ATTACHMENTS_WEBGL);l=new Array(n+1);for(var r=0;r<=n;++r){for(var a=new Array(n),i=0;i<r;++i)a[i]=e.COLOR_ATTACHMENT0+i;for(var i=r;i<n;++i)a[i]=e.NONE;l[r]=a}}(e,u),Array.isArray(t)&&(r=n,n=0|t[1],t=0|t[0]),"number"!=typeof t)throw new Error("gl-fbo: Missing shape parameter");var c=e.getParameter(e.MAX_RENDERBUFFER_SIZE);if(t<0||t>c||n<0||n>c)throw new Error("gl-fbo: Parameters are too large for FBO");var f=1;if("color"in(r=r||{})){if((f=Math.max(0|r.color,0))<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(f>1){if(!u)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(f>e.getParameter(u.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+f+" draw buffers")}}var d=e.UNSIGNED_BYTE,p=e.getExtension("OES_texture_float");if(r.float&&f>0){if(!p)throw new Error("gl-fbo: Context does not support floating point textures");d=e.FLOAT}else r.preferFloat&&f>0&&p&&(d=e.FLOAT);var m=!0;"depth"in r&&(m=!!r.depth);var v=!1;return"stencil"in r&&(v=!!r.stencil),new h(e,t,n,d,f,m,v,u)};var a,i,o,s,l=null;function u(e){var t=e.getParameter(e.FRAMEBUFFER_BINDING),n=e.getParameter(e.RENDERBUFFER_BINDING),r=e.getParameter(e.TEXTURE_BINDING_2D);return[t,n,r]}function c(e,t){e.bindFramebuffer(e.FRAMEBUFFER,t[0]),e.bindRenderbuffer(e.RENDERBUFFER,t[1]),e.bindTexture(e.TEXTURE_2D,t[2])}function f(e){switch(e){case a:throw new Error("gl-fbo: Framebuffer unsupported");case i:throw new Error("gl-fbo: Framebuffer incomplete attachment");case o:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case s:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function d(e,t,n,a,i,o){if(!a)return null;var s=r(e,t,n,i,a);return s.magFilter=e.NEAREST,s.minFilter=e.NEAREST,s.mipSamples=1,s.bind(),e.framebufferTexture2D(e.FRAMEBUFFER,o,e.TEXTURE_2D,s.handle,0),s}function p(e,t,n,r,a){var i=e.createRenderbuffer();return e.bindRenderbuffer(e.RENDERBUFFER,i),e.renderbufferStorage(e.RENDERBUFFER,r,t,n),e.framebufferRenderbuffer(e.FRAMEBUFFER,a,e.RENDERBUFFER,i),i}function h(e,t,n,r,a,i,o,s){this.gl=e,this._shape=[0|t,0|n],this._destroyed=!1,this._ext=s,this.color=new Array(a);for(var h=0;h<a;++h)this.color[h]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=r,this._useDepth=i,this._useStencil=o;var m=this,v=[0|t,0|n];Object.defineProperties(v,{0:{get:function(){return m._shape[0]},set:function(e){return m.width=e}},1:{get:function(){return m._shape[1]},set:function(e){return m.height=e}}}),this._shapeVector=v,function(e){var t=u(e.gl),n=e.gl,r=e.handle=n.createFramebuffer(),a=e._shape[0],i=e._shape[1],o=e.color.length,s=e._ext,h=e._useStencil,m=e._useDepth,v=e._colorType;n.bindFramebuffer(n.FRAMEBUFFER,r);for(var g=0;g<o;++g)e.color[g]=d(n,a,i,v,n.RGBA,n.COLOR_ATTACHMENT0+g);0===o?(e._color_rb=p(n,a,i,n.RGBA4,n.COLOR_ATTACHMENT0),s&&s.drawBuffersWEBGL(l[0])):o>1&&s.drawBuffersWEBGL(l[o]);var y=n.getExtension("WEBGL_depth_texture");y?h?e.depth=d(n,a,i,y.UNSIGNED_INT_24_8_WEBGL,n.DEPTH_STENCIL,n.DEPTH_STENCIL_ATTACHMENT):m&&(e.depth=d(n,a,i,n.UNSIGNED_SHORT,n.DEPTH_COMPONENT,n.DEPTH_ATTACHMENT)):m&&h?e._depth_rb=p(n,a,i,n.DEPTH_STENCIL,n.DEPTH_STENCIL_ATTACHMENT):m?e._depth_rb=p(n,a,i,n.DEPTH_COMPONENT16,n.DEPTH_ATTACHMENT):h&&(e._depth_rb=p(n,a,i,n.STENCIL_INDEX,n.STENCIL_ATTACHMENT));var b=n.checkFramebufferStatus(n.FRAMEBUFFER);if(b!==n.FRAMEBUFFER_COMPLETE){e._destroyed=!0,n.bindFramebuffer(n.FRAMEBUFFER,null),n.deleteFramebuffer(e.handle),e.handle=null,e.depth&&(e.depth.dispose(),e.depth=null),e._depth_rb&&(n.deleteRenderbuffer(e._depth_rb),e._depth_rb=null);for(var g=0;g<e.color.length;++g)e.color[g].dispose(),e.color[g]=null;e._color_rb&&(n.deleteRenderbuffer(e._color_rb),e._color_rb=null),c(n,t),f(b)}c(n,t)}(this)}var m=h.prototype;function v(e,t,n){if(e._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(e._shape[0]!==t||e._shape[1]!==n){var r=e.gl,a=r.getParameter(r.MAX_RENDERBUFFER_SIZE);if(t<0||t>a||n<0||n>a)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");e._shape[0]=t,e._shape[1]=n;for(var i=u(r),o=0;o<e.color.length;++o)e.color[o].shape=e._shape;e._color_rb&&(r.bindRenderbuffer(r.RENDERBUFFER,e._color_rb),r.renderbufferStorage(r.RENDERBUFFER,r.RGBA4,e._shape[0],e._shape[1])),e.depth&&(e.depth.shape=e._shape),e._depth_rb&&(r.bindRenderbuffer(r.RENDERBUFFER,e._depth_rb),e._useDepth&&e._useStencil?r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,e._shape[0],e._shape[1]):e._useDepth?r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_COMPONENT16,e._shape[0],e._shape[1]):e._useStencil&&r.renderbufferStorage(r.RENDERBUFFER,r.STENCIL_INDEX,e._shape[0],e._shape[1])),r.bindFramebuffer(r.FRAMEBUFFER,e.handle);var s=r.checkFramebufferStatus(r.FRAMEBUFFER);s!==r.FRAMEBUFFER_COMPLETE&&(e.dispose(),c(r,i),f(s)),c(r,i)}}Object.defineProperties(m,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(e){if(Array.isArray(e)||(e=[0|e,0|e]),2!==e.length)throw new Error("gl-fbo: Shape vector must be length 2");var t=0|e[0],n=0|e[1];return v(this,t,n),[t,n]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(e){return v(this,e|=0,this._shape[1]),e},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(e){return e|=0,v(this,this._shape[0],e),e},enumerable:!1}}),m.bind=function(){if(!this._destroyed){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,this.handle),e.viewport(0,0,this._shape[0],this._shape[1])}},m.dispose=function(){if(!this._destroyed){this._destroyed=!0;var e=this.gl;e.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(e.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var t=0;t<this.color.length;++t)this.color[t].dispose(),this.color[t]=null;this._color_rb&&(e.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},{"gl-texture2d":305}],240:[function(e,t,n){var r=e("sprintf-js").sprintf,a=e("gl-constants/lookup"),i=e("glsl-shader-name"),o=e("add-line-numbers");t.exports=function(e,t,n){"use strict";var s=i(t)||"of unknown name (see npm glsl-shader-name)",l="unknown type";void 0!==n&&(l=n===a.FRAGMENT_SHADER?"fragment":"vertex");for(var u=r("Error compiling %s shader %s:\n",l,s),c=r("%s%s",u,e),f=e.split("\n"),d={},p=0;p<f.length;p++){var h=f[p];if(""!==h&&"\0"!==h){var m=parseInt(h.split(":")[2]);if(isNaN(m))throw new Error(r("Could not parse error: %s",h));d[m]=h}}for(var v=o(t).split("\n"),p=0;p<v.length;p++)if(d[p+3]||d[p+2]||d[p+1]){var g=v[p];if(u+=g+"\n",d[p+1]){var y=d[p+1];y=y.substr(y.split(":",3).join(":").length+1).trim(),u+=r("^^^ %s\n\n",y)}}return{long:u.trim(),short:c.trim()}}},{"add-line-numbers":49,"gl-constants/lookup":236,"glsl-shader-name":384,"sprintf-js":504}],241:[function(e,t,n){"use strict";t.exports=function(e,t){var n=e.gl,r=o(n,l.vertex,l.fragment),a=o(n,l.pickVertex,l.pickFragment),i=s(n),c=s(n),f=s(n),d=s(n),p=new u(e,r,a,i,c,f,d);return p.update(t),e.addObject(p),p};var r=e("binary-search-bounds"),a=e("iota-array"),i=e("typedarray-pool"),o=e("gl-shader"),s=e("gl-buffer"),l=e("./lib/shaders");function u(e,t,n,r,a,i,o){this.plot=e,this.shader=t,this.pickShader=n,this.positionBuffer=r,this.weightBuffer=a,this.colorBuffer=i,this.idBuffer=o,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var c=u.prototype,f=[0,0,1,0,0,1,1,0,1,1,0,1];c.draw=function(){var e=[1,0,0,0,1,0,0,0,1];return function(){var t=this.plot,n=this.shader,r=this.bounds,a=this.numVertices;if(!(a<=0)){var i=t.gl,o=t.dataBox,s=r[2]-r[0],l=r[3]-r[1],u=o[2]-o[0],c=o[3]-o[1];e[0]=2*s/u,e[4]=2*l/c,e[6]=2*(r[0]-o[0])/u-1,e[7]=2*(r[1]-o[1])/c-1,n.bind();var f=n.uniforms;f.viewTransform=e,f.shape=this.shape;var d=n.attributes;this.positionBuffer.bind(),d.position.pointer(),this.weightBuffer.bind(),d.weight.pointer(i.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),d.color.pointer(i.UNSIGNED_BYTE,!0),i.drawArrays(i.TRIANGLES,0,a)}}}(),c.drawPick=function(){var e=[1,0,0,0,1,0,0,0,1],t=[0,0,0,0];return function(n){var r=this.plot,a=this.pickShader,i=this.bounds,o=this.numVertices;if(!(o<=0)){var s=r.gl,l=r.dataBox,u=i[2]-i[0],c=i[3]-i[1],f=l[2]-l[0],d=l[3]-l[1];e[0]=2*u/f,e[4]=2*c/d,e[6]=2*(i[0]-l[0])/f-1,e[7]=2*(i[1]-l[1])/d-1;for(var p=0;p<4;++p)t[p]=n>>8*p&255;this.pickOffset=n,a.bind();var h=a.uniforms;h.viewTransform=e,h.pickOffset=t,h.shape=this.shape;var m=a.attributes;return this.positionBuffer.bind(),m.position.pointer(),this.weightBuffer.bind(),m.weight.pointer(s.UNSIGNED_BYTE,!1),this.idBuffer.bind(),m.pickId.pointer(s.UNSIGNED_BYTE,!1),s.drawArrays(s.TRIANGLES,0,o),n+this.shape[0]*this.shape[1]}}}(),c.pick=function(e,t,n){var r=this.pickOffset,a=this.shape[0]*this.shape[1];if(n<r||n>=r+a)return null;var i=n-r,o=this.xData,s=this.yData;return{object:this,pointId:i,dataCoord:[o[i%this.shape[0]],s[i/this.shape[0]|0]]}},c.update=function(e){var t=(e=e||{}).shape||[0,0],n=e.x||a(t[0]),o=e.y||a(t[1]),s=e.z||new Float32Array(t[0]*t[1]);this.xData=n,this.yData=o;var l=e.colorLevels||[0],u=e.colorValues||[0,0,0,1],c=l.length,d=this.bounds,p=d[0]=n[0],h=d[1]=o[0],m=d[2]=n[n.length-1],v=d[3]=o[o.length-1],g=1/(m-p),y=1/(v-h),b=t[0],x=t[1];this.shape=[b,x];var _=(b-1)*(x-1)*(f.length>>>1);this.numVertices=_;for(var w=i.mallocUint8(4*_),T=i.mallocFloat32(2*_),k=i.mallocUint8(2*_),C=i.mallocUint32(_),E=0,M=0;M<x-1;++M)for(var A=y*(o[M]-h),S=y*(o[M+1]-h),O=0;O<b-1;++O)for(var P=g*(n[O]-p),R=g*(n[O+1]-p),L=0;L<f.length;L+=2){var D,I,z,j,N=f[L],F=f[L+1],B=(M+F)*b+(O+N),V=s[B],U=r.le(l,V);if(U<0)D=u[0],I=u[1],z=u[2],j=u[3];else if(U===c-1)D=u[4*c-4],I=u[4*c-3],z=u[4*c-2],j=u[4*c-1];else{var G=(V-l[U])/(l[U+1]-l[U]),H=1-G,W=4*U,q=4*(U+1);D=H*u[W]+G*u[q],I=H*u[W+1]+G*u[q+1],z=H*u[W+2]+G*u[q+2],j=H*u[W+3]+G*u[q+3]}w[4*E]=255*D,w[4*E+1]=255*I,w[4*E+2]=255*z,w[4*E+3]=255*j,T[2*E]=.5*P+.5*R,T[2*E+1]=.5*A+.5*S,k[2*E]=N,k[2*E+1]=F,C[E]=M*b+O,E+=1}this.positionBuffer.update(T),this.weightBuffer.update(k),this.colorBuffer.update(w),this.idBuffer.update(C),i.free(T),i.free(w),i.free(k),i.free(C)},c.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)}},{"./lib/shaders":242,"binary-search-bounds":243,"gl-buffer":230,"gl-shader":288,"iota-array":399,"typedarray-pool":522}],242:[function(e,t,n){"use strict";var r=e("glslify");t.exports={fragment:r(["precision lowp float;\n#define GLSLIFY 1\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);\n}\n"]),vertex:r(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 color;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  fragColor = color;\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"]),pickFragment:r(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nuniform vec2 shape;\nuniform vec4 pickOffset;\n\nvoid main() {\n  vec2 d = step(.5, vWeight);\n  vec4 id = fragId + pickOffset;\n  id.x += d.x + d.y*shape.x;\n\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  gl_FragColor = id/255.;\n}\n"]),pickVertex:r(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nvoid main() {\n  vWeight = weight;\n\n  fragId = pickId;\n\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"])}},{glslify:392}],243:[function(e,t,n){arguments[4][99][0].apply(n,arguments)},{dup:99}],244:[function(e,t,n){var r=e("glslify"),a=e("gl-shader"),i=r(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, nextPosition;\nattribute float arcLength, lineWidth;\nattribute vec4 color;\n\nuniform vec2 screenShape;\nuniform float pixelRatio;\nuniform mat4 model, view, projection;\n\nvarying vec4 fragColor;\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  vec4 startPoint = project(position);\n  vec4 endPoint   = project(nextPosition);\n\n  vec2 A = startPoint.xy / startPoint.w;\n  vec2 B =   endPoint.xy /   endPoint.w;\n\n  float clipAngle = atan(\n    (B.y - A.y) * screenShape.y,\n    (B.x - A.x) * screenShape.x\n  );\n\n  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(\n    sin(clipAngle),\n    -cos(clipAngle)\n  ) / screenShape;\n\n  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);\n\n  worldPosition = position;\n  pixelArcLength = arcLength;\n  fragColor = color;\n}\n"]),o=r(["precision mediump float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3      clipBounds[2];\nuniform sampler2D dashTexture;\nuniform float     dashScale;\nuniform float     opacity;\n\nvarying vec3    worldPosition;\nvarying float   pixelArcLength;\nvarying vec4    fragColor;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;\n\n  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;\n  if(dashWeight < 0.5) {\n    discard;\n  }\n  gl_FragColor = fragColor * opacity;\n}\n"]),s=r(["precision mediump float;\n#define GLSLIFY 1\n\n#define FLOAT_MAX  1.70141184e38\n#define FLOAT_MIN  1.17549435e-38\n\nlowp vec4 encode_float_1540259130(highp float v) {\n  highp float av = abs(v);\n\n  //Handle special cases\n  if(av < FLOAT_MIN) {\n    return vec4(0.0, 0.0, 0.0, 0.0);\n  } else if(v > FLOAT_MAX) {\n    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;\n  } else if(v < -FLOAT_MAX) {\n    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;\n  }\n\n  highp vec4 c = vec4(0,0,0,0);\n\n  //Compute exponent and mantissa\n  highp float e = floor(log2(av));\n  highp float m = av * pow(2.0, -e) - 1.0;\n  \n  //Unpack mantissa\n  c[1] = floor(128.0 * m);\n  m -= c[1] / 128.0;\n  c[2] = floor(32768.0 * m);\n  m -= c[2] / 32768.0;\n  c[3] = floor(8388608.0 * m);\n  \n  //Unpack exponent\n  highp float ebias = e + 127.0;\n  c[0] = floor(ebias / 2.0);\n  ebias -= c[0] * 2.0;\n  c[1] += floor(ebias) * 128.0; \n\n  //Unpack sign bit\n  c[0] += 128.0 * step(0.0, -v);\n\n  //Scale back to range\n  return c / 255.0;\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform float pickId;\nuniform vec3 clipBounds[2];\n\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;\n\n  gl_FragColor = vec4(pickId/255.0, encode_float_1540259130(pixelArcLength).xyz);\n}"]),l=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];n.createShader=function(e){return a(e,i,o,null,l)},n.createPickShader=function(e){return a(e,i,s,null,l)}},{"gl-shader":288,glslify:392}],245:[function(e,t,n){"use strict";t.exports=function(e){var t=e.gl||e.scene&&e.scene.gl,n=c(t);n.attributes.position.location=0,n.attributes.nextPosition.location=1,n.attributes.arcLength.location=2,n.attributes.lineWidth.location=3,n.attributes.color.location=4;var o=f(t);o.attributes.position.location=0,o.attributes.nextPosition.location=1,o.attributes.arcLength.location=2,o.attributes.lineWidth.location=3,o.attributes.color.location=4;for(var s=r(t),u=a(t,[{buffer:s,size:3,offset:0,stride:48},{buffer:s,size:3,offset:12,stride:48},{buffer:s,size:1,offset:24,stride:48},{buffer:s,size:1,offset:28,stride:48},{buffer:s,size:4,offset:32,stride:48}]),d=l(new Array(1024),[256,1,4]),p=0;p<1024;++p)d.data[p]=255;var h=i(t,d);h.wrap=t.REPEAT;var m=new v(t,n,o,s,u,h);return m.update(e),m};var r=e("gl-buffer"),a=e("gl-vao"),i=e("gl-texture2d"),o=e("glsl-read-float"),s=e("binary-search-bounds"),l=e("ndarray"),u=e("./lib/shaders"),c=u.createShader,f=u.createPickShader,d=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function p(e,t){for(var n=0,r=0;r<3;++r){var a=e[r]-t[r];n+=a*a}return Math.sqrt(n)}function h(e){for(var t=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],n=0;n<3;++n)t[0][n]=Math.max(e[0][n],t[0][n]),t[1][n]=Math.min(e[1][n],t[1][n]);return t}function m(e,t,n,r){this.arcLength=e,this.position=t,this.index=n,this.dataCoordinate=r}function v(e,t,n,r,a,i){this.gl=e,this.shader=t,this.pickShader=n,this.buffer=r,this.vao=a,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=i,this.dashScale=1,this.opacity=1,this.dirty=!0,this.pixelRatio=1}var g=v.prototype;g.isTransparent=function(){return this.opacity<1},g.isOpaque=function(){return this.opacity>=1},g.pickSlots=1,g.setPickBase=function(e){this.pickId=e},g.drawTransparent=g.draw=function(e){if(this.vertexCount){var t=this.gl,n=this.shader,r=this.vao;n.bind(),n.uniforms={model:e.model||d,view:e.view||d,projection:e.projection||d,clipBounds:h(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[t.drawingBufferWidth,t.drawingBufferHeight],pixelRatio:this.pixelRatio},r.bind(),r.draw(t.TRIANGLE_STRIP,this.vertexCount),r.unbind()}},g.drawPick=function(e){if(this.vertexCount){var t=this.gl,n=this.pickShader,r=this.vao;n.bind(),n.uniforms={model:e.model||d,view:e.view||d,projection:e.projection||d,pickId:this.pickId,clipBounds:h(this.clipBounds),screenShape:[t.drawingBufferWidth,t.drawingBufferHeight],pixelRatio:this.pixelRatio},r.bind(),r.draw(t.TRIANGLE_STRIP,this.vertexCount),r.unbind()}},g.update=function(e){var t,n;this.dirty=!0;var r=!!e.connectGaps;"dashScale"in e&&(this.dashScale=e.dashScale),"opacity"in e&&(this.opacity=+e.opacity);var a=[],i=[],o=[],u=0,c=0,f=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],d=e.position||e.positions;if(d){var h=e.color||e.colors||[0,0,0,1],m=e.lineWidth||1,v=!1;e:for(t=1;t<d.length;++t){var g,y,b,x=d[t-1],_=d[t];for(i.push(u),o.push(x.slice()),n=0;n<3;++n){if(isNaN(x[n])||isNaN(_[n])||!isFinite(x[n])||!isFinite(_[n])){if(!r&&a.length>0){for(var w=0;w<24;++w)a.push(a[a.length-12]);c+=2,v=!0}continue e}f[0][n]=Math.min(f[0][n],x[n],_[n]),f[1][n]=Math.max(f[1][n],x[n],_[n])}Array.isArray(h[0])?(g=h.length>t-1?h[t-1]:h.length>0?h[h.length-1]:[0,0,0,1],y=h.length>t?h[t]:h.length>0?h[h.length-1]:[0,0,0,1]):g=y=h,3===g.length&&(g=[g[0],g[1],g[2],1]),3===y.length&&(y=[y[0],y[1],y[2],1]),b=Array.isArray(m)?m.length>t-1?m[t-1]:m.length>0?m[m.length-1]:[0,0,0,1]:m;var T=u;if(u+=p(x,_),v){for(n=0;n<2;++n)a.push(x[0],x[1],x[2],_[0],_[1],_[2],T,b,g[0],g[1],g[2],g[3]);c+=2,v=!1}a.push(x[0],x[1],x[2],_[0],_[1],_[2],T,b,g[0],g[1],g[2],g[3],x[0],x[1],x[2],_[0],_[1],_[2],T,-b,g[0],g[1],g[2],g[3],_[0],_[1],_[2],x[0],x[1],x[2],u,-b,y[0],y[1],y[2],y[3],_[0],_[1],_[2],x[0],x[1],x[2],u,b,y[0],y[1],y[2],y[3]),c+=4}}if(this.buffer.update(a),i.push(u),o.push(d[d.length-1].slice()),this.bounds=f,this.vertexCount=c,this.points=o,this.arcLength=i,"dashes"in e){var k=e.dashes,C=k.slice();for(C.unshift(0),t=1;t<C.length;++t)C[t]=C[t-1]+C[t];var E=l(new Array(1024),[256,1,4]);for(t=0;t<256;++t){for(n=0;n<4;++n)E.set(t,0,n,0);1&s.le(C,C[C.length-1]*t/255)?E.set(t,0,0,0):E.set(t,0,0,255)}this.texture.setPixels(E)}},g.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},g.pick=function(e){if(!e)return null;if(e.id!==this.pickId)return null;var t=o(e.value[0],e.value[1],e.value[2],0),n=s.le(this.arcLength,t);if(n<0)return null;if(n===this.arcLength.length-1)return new m(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),n);for(var r=this.points[n],a=this.points[Math.min(n+1,this.points.length-1)],i=(t-this.arcLength[n])/(this.arcLength[n+1]-this.arcLength[n]),l=1-i,u=[0,0,0],c=0;c<3;++c)u[c]=l*r[c]+i*a[c];var f=Math.min(i<.5?n:n+1,this.points.length-1);return new m(t,u,f,this.points[f])}},{"./lib/shaders":244,"binary-search-bounds":79,"gl-buffer":230,"gl-texture2d":305,"gl-vao":310,"glsl-read-float":383,ndarray:433}],246:[function(e,t,n){t.exports=function(e,t){var n=t[0],r=t[1],a=t[2],i=t[3],o=n*i-a*r;return o?(o=1/o,e[0]=i*o,e[1]=-r*o,e[2]=-a*o,e[3]=n*o,e):null}},{}],247:[function(e,t,n){t.exports=function(e,t){var n=t[0],r=t[1],a=t[2],i=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],f=c*o-s*u,d=-c*i+s*l,p=u*i-o*l,h=n*f+r*d+a*p;return h?(h=1/h,e[0]=f*h,e[1]=(-c*r+a*u)*h,e[2]=(s*r-a*o)*h,e[3]=d*h,e[4]=(c*n-a*l)*h,e[5]=(-s*n+a*i)*h,e[6]=p*h,e[7]=(-u*n+r*l)*h,e[8]=(o*n-r*i)*h,e):null}},{}],248:[function(e,t,n){t.exports=function(e){var t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}},{}],249:[function(e,t,n){t.exports=function(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],250:[function(e,t,n){t.exports=function(e){var t=e[0],n=e[1],r=e[2],a=e[3],i=e[4],o=e[5],s=e[6],l=e[7],u=e[8],c=e[9],f=e[10],d=e[11],p=e[12],h=e[13],m=e[14],v=e[15];return(t*o-n*i)*(f*v-d*m)-(t*s-r*i)*(c*v-d*h)+(t*l-a*i)*(c*m-f*h)+(n*s-r*o)*(u*v-d*p)-(n*l-a*o)*(u*m-f*p)+(r*l-a*s)*(u*h-c*p)}},{}],251:[function(e,t,n){t.exports=function(e,t){var n=t[0],r=t[1],a=t[2],i=t[3],o=n+n,s=r+r,l=a+a,u=n*o,c=r*o,f=r*s,d=a*o,p=a*s,h=a*l,m=i*o,v=i*s,g=i*l;return e[0]=1-f-h,e[1]=c+g,e[2]=d-v,e[3]=0,e[4]=c-g,e[5]=1-u-h,e[6]=p+m,e[7]=0,e[8]=d+v,e[9]=p-m,e[10]=1-u-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],252:[function(e,t,n){t.exports=function(e,t,n){var r=t[0],a=t[1],i=t[2],o=t[3],s=r+r,l=a+a,u=i+i,c=r*s,f=r*l,d=r*u,p=a*l,h=a*u,m=i*u,v=o*s,g=o*l,y=o*u;return e[0]=1-(p+m),e[1]=f+y,e[2]=d-g,e[3]=0,e[4]=f-y,e[5]=1-(c+m),e[6]=h+v,e[7]=0,e[8]=d+g,e[9]=h-v,e[10]=1-(c+p),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}},{}],253:[function(e,t,n){t.exports=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],254:[function(e,t,n){t.exports=function(e,t){var n=t[0],r=t[1],a=t[2],i=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],f=t[9],d=t[10],p=t[11],h=t[12],m=t[13],v=t[14],g=t[15],y=n*s-r*o,b=n*l-a*o,x=n*u-i*o,_=r*l-a*s,w=r*u-i*s,T=a*u-i*l,k=c*m-f*h,C=c*v-d*h,E=c*g-p*h,M=f*v-d*m,A=f*g-p*m,S=d*g-p*v,O=y*S-b*A+x*M+_*E-w*C+T*k;return O?(O=1/O,e[0]=(s*S-l*A+u*M)*O,e[1]=(a*A-r*S-i*M)*O,e[2]=(m*T-v*w+g*_)*O,e[3]=(d*w-f*T-p*_)*O,e[4]=(l*E-o*S-u*C)*O,e[5]=(n*S-a*E+i*C)*O,e[6]=(v*x-h*T-g*b)*O,e[7]=(c*T-d*x+p*b)*O,e[8]=(o*A-s*E+u*k)*O,e[9]=(r*E-n*A-i*k)*O,e[10]=(h*w-m*x+g*y)*O,e[11]=(f*x-c*w-p*y)*O,e[12]=(s*C-o*M-l*k)*O,e[13]=(n*M-r*C+a*k)*O,e[14]=(m*b-h*_-v*y)*O,e[15]=(c*_-f*b+d*y)*O,e):null}},{}],255:[function(e,t,n){var r=e("./identity");t.exports=function(e,t,n,a){var i,o,s,l,u,c,f,d,p,h,m=t[0],v=t[1],g=t[2],y=a[0],b=a[1],x=a[2],_=n[0],w=n[1],T=n[2];return Math.abs(m-_)<1e-6&&Math.abs(v-w)<1e-6&&Math.abs(g-T)<1e-6?r(e):(f=m-_,d=v-w,p=g-T,h=1/Math.sqrt(f*f+d*d+p*p),i=b*(p*=h)-x*(d*=h),o=x*(f*=h)-y*p,s=y*d-b*f,(h=Math.sqrt(i*i+o*o+s*s))?(i*=h=1/h,o*=h,s*=h):(i=0,o=0,s=0),l=d*s-p*o,u=p*i-f*s,c=f*o-d*i,(h=Math.sqrt(l*l+u*u+c*c))?(l*=h=1/h,u*=h,c*=h):(l=0,u=0,c=0),e[0]=i,e[1]=l,e[2]=f,e[3]=0,e[4]=o,e[5]=u,e[6]=d,e[7]=0,e[8]=s,e[9]=c,e[10]=p,e[11]=0,e[12]=-(i*m+o*v+s*g),e[13]=-(l*m+u*v+c*g),e[14]=-(f*m+d*v+p*g),e[15]=1,e)}},{"./identity":253}],256:[function(e,t,n){t.exports=function(e,t,n){var r=t[0],a=t[1],i=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],d=t[9],p=t[10],h=t[11],m=t[12],v=t[13],g=t[14],y=t[15],b=n[0],x=n[1],_=n[2],w=n[3];return e[0]=b*r+x*s+_*f+w*m,e[1]=b*a+x*l+_*d+w*v,e[2]=b*i+x*u+_*p+w*g,e[3]=b*o+x*c+_*h+w*y,b=n[4],x=n[5],_=n[6],w=n[7],e[4]=b*r+x*s+_*f+w*m,e[5]=b*a+x*l+_*d+w*v,e[6]=b*i+x*u+_*p+w*g,e[7]=b*o+x*c+_*h+w*y,b=n[8],x=n[9],_=n[10],w=n[11],e[8]=b*r+x*s+_*f+w*m,e[9]=b*a+x*l+_*d+w*v,e[10]=b*i+x*u+_*p+w*g,e[11]=b*o+x*c+_*h+w*y,b=n[12],x=n[13],_=n[14],w=n[15],e[12]=b*r+x*s+_*f+w*m,e[13]=b*a+x*l+_*d+w*v,e[14]=b*i+x*u+_*p+w*g,e[15]=b*o+x*c+_*h+w*y,e}},{}],257:[function(e,t,n){t.exports=function(e,t,n,r,a){var i=1/Math.tan(t/2),o=1/(r-a);return e[0]=i/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(a+r)*o,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*a*r*o,e[15]=0,e}},{}],258:[function(e,t,n){t.exports=function(e,t,n,r){var a,i,o,s,l,u,c,f,d,p,h,m,v,g,y,b,x,_,w,T,k,C,E,M,A=r[0],S=r[1],O=r[2],P=Math.sqrt(A*A+S*S+O*O);return Math.abs(P)<1e-6?null:(A*=P=1/P,S*=P,O*=P,a=Math.sin(n),i=Math.cos(n),o=1-i,s=t[0],l=t[1],u=t[2],c=t[3],f=t[4],d=t[5],p=t[6],h=t[7],m=t[8],v=t[9],g=t[10],y=t[11],b=A*A*o+i,x=S*A*o+O*a,_=O*A*o-S*a,w=A*S*o-O*a,T=S*S*o+i,k=O*S*o+A*a,C=A*O*o+S*a,E=S*O*o-A*a,M=O*O*o+i,e[0]=s*b+f*x+m*_,e[1]=l*b+d*x+v*_,e[2]=u*b+p*x+g*_,e[3]=c*b+h*x+y*_,e[4]=s*w+f*T+m*k,e[5]=l*w+d*T+v*k,e[6]=u*w+p*T+g*k,e[7]=c*w+h*T+y*k,e[8]=s*C+f*E+m*M,e[9]=l*C+d*E+v*M,e[10]=u*C+p*E+g*M,e[11]=c*C+h*E+y*M,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}},{}],259:[function(e,t,n){t.exports=function(e,t,n){var r=Math.sin(n),a=Math.cos(n),i=t[4],o=t[5],s=t[6],l=t[7],u=t[8],c=t[9],f=t[10],d=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=i*a+u*r,e[5]=o*a+c*r,e[6]=s*a+f*r,e[7]=l*a+d*r,e[8]=u*a-i*r,e[9]=c*a-o*r,e[10]=f*a-s*r,e[11]=d*a-l*r,e}},{}],260:[function(e,t,n){t.exports=function(e,t,n){var r=Math.sin(n),a=Math.cos(n),i=t[0],o=t[1],s=t[2],l=t[3],u=t[8],c=t[9],f=t[10],d=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=i*a-u*r,e[1]=o*a-c*r,e[2]=s*a-f*r,e[3]=l*a-d*r,e[8]=i*r+u*a,e[9]=o*r+c*a,e[10]=s*r+f*a,e[11]=l*r+d*a,e}},{}],261:[function(e,t,n){t.exports=function(e,t,n){var r=Math.sin(n),a=Math.cos(n),i=t[0],o=t[1],s=t[2],l=t[3],u=t[4],c=t[5],f=t[6],d=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=i*a+u*r,e[1]=o*a+c*r,e[2]=s*a+f*r,e[3]=l*a+d*r,e[4]=u*a-i*r,e[5]=c*a-o*r,e[6]=f*a-s*r,e[7]=d*a-l*r,e}},{}],262:[function(e,t,n){t.exports=function(e,t,n){var r=n[0],a=n[1],i=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*a,e[5]=t[5]*a,e[6]=t[6]*a,e[7]=t[7]*a,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}},{}],263:[function(e,t,n){t.exports=function(e,t,n){var r,a,i,o,s,l,u,c,f,d,p,h,m=n[0],v=n[1],g=n[2];return t===e?(e[12]=t[0]*m+t[4]*v+t[8]*g+t[12],e[13]=t[1]*m+t[5]*v+t[9]*g+t[13],e[14]=t[2]*m+t[6]*v+t[10]*g+t[14],e[15]=t[3]*m+t[7]*v+t[11]*g+t[15]):(r=t[0],a=t[1],i=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],d=t[9],p=t[10],h=t[11],e[0]=r,e[1]=a,e[2]=i,e[3]=o,e[4]=s,e[5]=l,e[6]=u,e[7]=c,e[8]=f,e[9]=d,e[10]=p,e[11]=h,e[12]=r*m+s*v+f*g+t[12],e[13]=a*m+l*v+d*g+t[13],e[14]=i*m+u*v+p*g+t[14],e[15]=o*m+c*v+h*g+t[15]),e}},{}],264:[function(e,t,n){t.exports=function(e,t){if(e===t){var n=t[1],r=t[2],a=t[3],i=t[6],o=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=i,e[11]=t[14],e[12]=a,e[13]=o,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}},{}],265:[function(e,t,n){"use strict";t.exports=function(e,t){switch(t.length){case 0:break;case 1:e[0]=1/t[0];break;case 4:r(e,t);break;case 9:a(e,t);break;case 16:i(e,t);break;default:throw new Error("currently supports matrices up to 4x4")}return e};var r=e("gl-mat2/invert"),a=e("gl-mat3/invert"),i=e("gl-mat4/invert")},{"gl-mat2/invert":246,"gl-mat3/invert":247,"gl-mat4/invert":254}],266:[function(e,t,n){arguments[4][232][0].apply(n,arguments)},{barycentric:61,dup:232,"polytope-closest-point/lib/closest_point_2d.js":464}],267:[function(e,t,n){var r=e("glslify"),a=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, normal;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model\n           , view\n           , projection;\nuniform vec3 eyePosition\n           , lightPosition;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec4 m_position  = model * vec4(position, 1.0);\n  vec4 t_position  = view * m_position;\n  gl_Position      = projection * t_position;\n  f_color          = color;\n  f_normal         = normal;\n  f_data           = position;\n  f_eyeDirection   = eyePosition   - position;\n  f_lightDirection = lightPosition - position;\n  f_uv             = uv;\n}\n"]),i=r(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nvec3 normals(vec3 pos) {\n  vec3 fdx = dFdx(pos);\n  vec3 fdy = dFdy(pos);\n  return normalize(cross(fdx, fdy));\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness\n            , fresnel\n            , kambient\n            , kdiffuse\n            , kspecular\n            , opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;\n\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  vec3 normal = normals(f_data);\n\n  if (dot(N, normal) < 0.0) {\n    N = -N;\n  }\n\n  float specular = cookTorranceSpecular(L, V, N, roughness, fresnel);\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),o=r(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model, view, projection;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_color = color;\n  f_data  = position;\n  f_uv    = uv;\n}"]),s=r(["precision mediump float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;\n\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),l=r(["precision mediump float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\nattribute float pointSize;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    gl_Position = projection * view * model * vec4(position, 1.0);\n  }\n  gl_PointSize = pointSize;\n  f_color = color;\n  f_uv = uv;\n}"]),u=r(["precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec2 pointR = gl_PointCoord.xy - vec2(0.5,0.5);\n  if(dot(pointR, pointR) > 0.25) {\n    discard;\n  }\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),c=r(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_id        = id;\n  f_position  = position;\n}"]),f=r(["precision mediump float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]),d=r(["precision mediump float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3  position;\nattribute float pointSize;\nattribute vec4  id;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    gl_Position  = projection * view * model * vec4(position, 1.0);\n    gl_PointSize = pointSize;\n  }\n  f_id         = id;\n  f_position   = position;\n}"]),p=r(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n}"]),h=r(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec3 contourColor;\n\nvoid main() {\n  gl_FragColor = vec4(contourColor,1);\n}\n"]);n.meshShader={vertex:a,fragment:i,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},n.wireShader={vertex:o,fragment:s,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},n.pointShader={vertex:l,fragment:u,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},n.pickShader={vertex:c,fragment:f,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},n.pointPickShader={vertex:d,fragment:f,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},n.contourShader={vertex:p,fragment:h,attributes:[{name:"position",type:"vec3"}]}},{glslify:392}],268:[function(e,t,n){"use strict";var r=e("gl-shader"),a=e("gl-buffer"),i=e("gl-vao"),o=e("gl-texture2d"),s=e("normals"),l=e("gl-mat4/multiply"),u=e("gl-mat4/invert"),c=e("ndarray"),f=e("colormap"),d=e("simplicial-complex-contour"),p=e("typedarray-pool"),h=e("./lib/shaders"),m=e("./lib/closest-point"),v=h.meshShader,g=h.wireShader,y=h.pointShader,b=h.pickShader,x=h.pointPickShader,_=h.contourShader,w=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function T(e,t,n,r,a,i,o,s,l,u,c,f,d,p,h,m,v,g,y,b,x,_,T,k,C,E,M){this.gl=e,this.cells=[],this.positions=[],this.intensity=[],this.texture=t,this.dirty=!0,this.triShader=n,this.lineShader=r,this.pointShader=a,this.pickShader=i,this.pointPickShader=o,this.contourShader=s,this.trianglePositions=l,this.triangleColors=c,this.triangleNormals=d,this.triangleUVs=f,this.triangleIds=u,this.triangleVAO=p,this.triangleCount=0,this.lineWidth=1,this.edgePositions=h,this.edgeColors=v,this.edgeUVs=g,this.edgeIds=m,this.edgeVAO=y,this.edgeCount=0,this.pointPositions=b,this.pointColors=_,this.pointUVs=T,this.pointSizes=k,this.pointIds=x,this.pointVAO=C,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=E,this.contourVAO=M,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this._model=w,this._view=w,this._projection=w,this._resolution=[1,1]}var k=T.prototype;function C(e){var t=r(e,y.vertex,y.fragment);return t.attributes.position.location=0,t.attributes.color.location=2,t.attributes.uv.location=3,t.attributes.pointSize.location=4,t}function E(e){var t=r(e,b.vertex,b.fragment);return t.attributes.position.location=0,t.attributes.id.location=1,t}function M(e){var t=r(e,x.vertex,x.fragment);return t.attributes.position.location=0,t.attributes.id.location=1,t.attributes.pointSize.location=4,t}function A(e){var t=r(e,_.vertex,_.fragment);return t.attributes.position.location=0,t}k.isOpaque=function(){return this.opacity>=1},k.isTransparent=function(){return this.opacity<1},k.pickSlots=1,k.setPickBase=function(e){this.pickId=e},k.highlight=function(e){if(e&&this.contourEnable){for(var t=d(this.cells,this.intensity,e.intensity),n=t.cells,r=t.vertexIds,a=t.vertexWeights,i=n.length,o=p.mallocFloat32(6*i),s=0,l=0;l<i;++l)for(var u=n[l],c=0;c<2;++c){var f=u[0];2===u.length&&(f=u[c]);for(var h=r[f][0],m=r[f][1],v=a[f],g=1-v,y=this.positions[h],b=this.positions[m],x=0;x<3;++x)o[s++]=v*y[x]+g*b[x]}this.contourCount=s/3|0,this.contourPositions.update(o.subarray(0,s)),p.free(o)}else this.contourCount=0},k.update=function(e){e=e||{};var t=this.gl;this.dirty=!0,"contourEnable"in e&&(this.contourEnable=e.contourEnable),"contourColor"in e&&(this.contourColor=e.contourColor),"lineWidth"in e&&(this.lineWidth=e.lineWidth),"lightPosition"in e&&(this.lightPosition=e.lightPosition),"opacity"in e&&(this.opacity=e.opacity),"ambient"in e&&(this.ambientLight=e.ambient),"diffuse"in e&&(this.diffuseLight=e.diffuse),"specular"in e&&(this.specularLight=e.specular),"roughness"in e&&(this.roughness=e.roughness),"fresnel"in e&&(this.fresnel=e.fresnel),e.texture?(this.texture.dispose(),this.texture=o(t,e.texture)):e.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=t.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=t.LINEAR,this.texture.setPixels(function(e){for(var t=f({colormap:e,nshades:256,format:"rgba"}),n=new Uint8Array(1024),r=0;r<256;++r){for(var a=t[r],i=0;i<3;++i)n[4*r+i]=a[i];n[4*r+3]=255*a[3]}return c(n,[256,256,4],[4,0,1])}(e.colormap)),this.texture.generateMipmap());var n=e.cells,r=e.positions;if(r&&n){var a=[],i=[],l=[],u=[],d=[],p=[],h=[],m=[],v=[],g=[],y=[],b=[],x=[],_=[];this.cells=n,this.positions=r;var w=e.vertexNormals,T=e.cellNormals,k=void 0===e.vertexNormalsEpsilon?1e-6:e.vertexNormalsEpsilon,C=void 0===e.faceNormalsEpsilon?1e-6:e.faceNormalsEpsilon;e.useFacetNormals&&!T&&(T=s.faceNormals(n,r,C)),T||w||(w=s.vertexNormals(n,r,k));var E=e.vertexColors,M=e.cellColors,A=e.meshColor||[1,1,1,1],S=e.vertexUVs,O=e.vertexIntensity,P=e.cellUVs,R=e.cellIntensity,L=1/0,D=-1/0;if(!S&&!P)if(O)if(e.vertexIntensityBounds)L=+e.vertexIntensityBounds[0],D=+e.vertexIntensityBounds[1];else for(var I=0;I<O.length;++I){var z=O[I];L=Math.min(L,z),D=Math.max(D,z)}else if(R)for(var I=0;I<R.length;++I){var z=R[I];L=Math.min(L,z),D=Math.max(D,z)}else for(var I=0;I<r.length;++I){var z=r[I][2];L=Math.min(L,z),D=Math.max(D,z)}this.intensity=O||(R?function(e,t,n){for(var r=new Array(t),a=0;a<t;++a)r[a]=0;for(var i=e.length,a=0;a<i;++a)for(var o=e[a],s=0;s<o.length;++s)r[o[s]]=n[a];return r}(n,r.length,R):function(e){for(var t=e.length,n=new Array(t),r=0;r<t;++r)n[r]=e[r][2];return n}(r));var j=e.pointSizes,N=e.pointSize||1;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var I=0;I<r.length;++I)for(var F=r[I],B=0;B<3;++B)!isNaN(F[B])&&isFinite(F[B])&&(this.bounds[0][B]=Math.min(this.bounds[0][B],F[B]),this.bounds[1][B]=Math.max(this.bounds[1][B],F[B]));var V=0,U=0,G=0;e:for(var I=0;I<n.length;++I){var H=n[I];switch(H.length){case 1:for(var W=H[0],F=r[W],B=0;B<3;++B)if(isNaN(F[B])||!isFinite(F[B]))continue e;g.push(F[0],F[1],F[2]),3===(Y=E?E[W]:M?M[I]:A).length?y.push(Y[0],Y[1],Y[2],1):y.push(Y[0],Y[1],Y[2],Y[3]),X=S?S[W]:O?[(O[W]-L)/(D-L),0]:P?P[I]:R?[(R[I]-L)/(D-L),0]:[(F[2]-L)/(D-L),0],b.push(X[0],X[1]),j?x.push(j[W]):x.push(N),_.push(I),G+=1;break;case 2:for(var B=0;B<2;++B)for(var W=H[B],F=r[W],q=0;q<3;++q)if(isNaN(F[q])||!isFinite(F[q]))continue e;for(var B=0;B<2;++B){var W=H[B],F=r[W];p.push(F[0],F[1],F[2]),3===(Y=E?E[W]:M?M[I]:A).length?h.push(Y[0],Y[1],Y[2],1):h.push(Y[0],Y[1],Y[2],Y[3]),X=S?S[W]:O?[(O[W]-L)/(D-L),0]:P?P[I]:R?[(R[I]-L)/(D-L),0]:[(F[2]-L)/(D-L),0],m.push(X[0],X[1]),v.push(I)}U+=1;break;case 3:for(var B=0;B<3;++B)for(var W=H[B],F=r[W],q=0;q<3;++q)if(isNaN(F[q])||!isFinite(F[q]))continue e;for(var B=0;B<3;++B){var Y,X,Z,W=H[B],F=r[W];a.push(F[0],F[1],F[2]),3===(Y=E?E[W]:M?M[I]:A).length?i.push(Y[0],Y[1],Y[2],1):i.push(Y[0],Y[1],Y[2],Y[3]),X=S?S[W]:O?[(O[W]-L)/(D-L),0]:P?P[I]:R?[(R[I]-L)/(D-L),0]:[(F[2]-L)/(D-L),0],u.push(X[0],X[1]),Z=w?w[W]:T[I],l.push(Z[0],Z[1],Z[2]),d.push(I)}V+=1}}this.pointCount=G,this.edgeCount=U,this.triangleCount=V,this.pointPositions.update(g),this.pointColors.update(y),this.pointUVs.update(b),this.pointSizes.update(x),this.pointIds.update(new Uint32Array(_)),this.edgePositions.update(p),this.edgeColors.update(h),this.edgeUVs.update(m),this.edgeIds.update(new Uint32Array(v)),this.trianglePositions.update(a),this.triangleColors.update(i),this.triangleUVs.update(u),this.triangleNormals.update(l),this.triangleIds.update(new Uint32Array(d))}},k.drawTransparent=k.draw=function(e){e=e||{};for(var t=this.gl,n=e.model||w,r=e.view||w,a=e.projection||w,i=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],o=0;o<3;++o)i[0][o]=Math.max(i[0][o],this.clipBounds[0][o]),i[1][o]=Math.min(i[1][o],this.clipBounds[1][o]);var s={model:n,view:r,projection:a,clipBounds:i,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,contourColor:this.contourColor,texture:0};this.texture.bind(0);var c=new Array(16);l(c,s.view,s.model),l(c,s.projection,c),u(c,c);for(var o=0;o<3;++o)s.eyePosition[o]=c[12+o]/c[15];for(var f=c[15],o=0;o<3;++o)f+=this.lightPosition[o]*c[4*o+3];for(var o=0;o<3;++o){for(var d=c[12+o],p=0;p<3;++p)d+=c[4*p+o]*this.lightPosition[p];s.lightPosition[o]=d/f}if(this.triangleCount>0){var h=this.triShader;h.bind(),h.uniforms=s,this.triangleVAO.bind(),t.drawArrays(t.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}if(this.edgeCount>0&&this.lineWidth>0){var h=this.lineShader;h.bind(),h.uniforms=s,this.edgeVAO.bind(),t.lineWidth(this.lineWidth),t.drawArrays(t.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()}if(this.pointCount>0){var h=this.pointShader;h.bind(),h.uniforms=s,this.pointVAO.bind(),t.drawArrays(t.POINTS,0,this.pointCount),this.pointVAO.unbind()}if(this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0){var h=this.contourShader;h.bind(),h.uniforms=s,this.contourVAO.bind(),t.drawArrays(t.LINES,0,this.contourCount),this.contourVAO.unbind()}},k.drawPick=function(e){e=e||{};for(var t=this.gl,n=e.model||w,r=e.view||w,a=e.projection||w,i=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],o=0;o<3;++o)i[0][o]=Math.max(i[0][o],this.clipBounds[0][o]),i[1][o]=Math.min(i[1][o],this.clipBounds[1][o]);this._model=[].slice.call(n),this._view=[].slice.call(r),this._projection=[].slice.call(a),this._resolution=[t.drawingBufferWidth,t.drawingBufferHeight];var s={model:n,view:r,projection:a,clipBounds:i,pickId:this.pickId/255},l=this.pickShader;if(l.bind(),l.uniforms=s,this.triangleCount>0&&(this.triangleVAO.bind(),t.drawArrays(t.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),t.lineWidth(this.lineWidth),t.drawArrays(t.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0){var l=this.pointPickShader;l.bind(),l.uniforms=s,this.pointVAO.bind(),t.drawArrays(t.POINTS,0,this.pointCount),this.pointVAO.unbind()}},k.pick=function(e){if(!e)return null;if(e.id!==this.pickId)return null;for(var t=e.value[0]+256*e.value[1]+65536*e.value[2],n=this.cells[t],r=this.positions,a=new Array(n.length),i=0;i<n.length;++i)a[i]=r[n[i]];var o=m(a,[e.coord[0],this._resolution[1]-e.coord[1]],this._model,this._view,this._projection,this._resolution);if(!o)return null;for(var s=o[2],l=0,i=0;i<n.length;++i)l+=s[i]*this.intensity[n[i]];return{position:o[1],index:n[o[0]],cell:n,cellId:t,intensity:l,dataCoordinate:this.positions[n[o[0]]]}},k.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},t.exports=function(e,t){if(1===arguments.length&&(e=(t=e).gl),!(e.getExtension("OES_standard_derivatives")||e.getExtension("MOZ_OES_standard_derivatives")||e.getExtension("WEBKIT_OES_standard_derivatives")))throw new Error("derivatives not supported");var n=function(e){var t=r(e,v.vertex,v.fragment);return t.attributes.position.location=0,t.attributes.color.location=2,t.attributes.uv.location=3,t.attributes.normal.location=4,t}(e),s=function(e){var t=r(e,g.vertex,g.fragment);return t.attributes.position.location=0,t.attributes.color.location=2,t.attributes.uv.location=3,t}(e),l=C(e),u=E(e),f=M(e),d=A(e),p=o(e,c(new Uint8Array([255,255,255,255]),[1,1,4]));p.generateMipmap(),p.minFilter=e.LINEAR_MIPMAP_LINEAR,p.magFilter=e.LINEAR;var h=a(e),m=a(e),y=a(e),b=a(e),x=a(e),_=i(e,[{buffer:h,type:e.FLOAT,size:3},{buffer:x,type:e.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:m,type:e.FLOAT,size:4},{buffer:y,type:e.FLOAT,size:2},{buffer:b,type:e.FLOAT,size:3}]),w=a(e),k=a(e),S=a(e),O=a(e),P=i(e,[{buffer:w,type:e.FLOAT,size:3},{buffer:O,type:e.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:k,type:e.FLOAT,size:4},{buffer:S,type:e.FLOAT,size:2}]),R=a(e),L=a(e),D=a(e),I=a(e),z=a(e),j=i(e,[{buffer:R,type:e.FLOAT,size:3},{buffer:z,type:e.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:L,type:e.FLOAT,size:4},{buffer:D,type:e.FLOAT,size:2},{buffer:I,type:e.FLOAT,size:1}]),N=a(e),F=i(e,[{buffer:N,type:e.FLOAT,size:3}]),B=new T(e,p,n,s,l,u,f,d,h,x,m,y,b,_,w,O,k,S,P,R,z,L,D,I,j,N,F);return B.update(t),B}},{"./lib/closest-point":266,"./lib/shaders":267,colormap:114,"gl-buffer":230,"gl-mat4/invert":254,"gl-mat4/multiply":256,"gl-shader":288,"gl-texture2d":305,"gl-vao":310,ndarray:433,normals:436,"simplicial-complex-contour":494,"typedarray-pool":522}],269:[function(e,t,n){"use strict";t.exports=function(e){var t=e.gl,n=r(t,[0,0,0,1,1,0,1,1]),s=a(t,i.boxVert,i.lineFrag);return new o(e,n,s)};var r=e("gl-buffer"),a=e("gl-shader"),i=e("./shaders");function o(e,t,n){this.plot=e,this.vbo=t,this.shader=n}var s=o.prototype;s.bind=function(){var e=this.shader;this.vbo.bind(),this.shader.bind(),e.attributes.coord.pointer(),e.uniforms.screenBox=this.plot.screenBox},s.drawBox=function(){var e=[0,0],t=[0,0];return function(n,r,a,i,o){var s=this.plot,l=this.shader,u=s.gl;e[0]=n,e[1]=r,t[0]=a,t[1]=i,l.uniforms.lo=e,l.uniforms.hi=t,l.uniforms.color=o,u.drawArrays(u.TRIANGLE_STRIP,0,4)}}(),s.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":272,"gl-buffer":230,"gl-shader":288}],270:[function(e,t,n){"use strict";t.exports=function(e){var t=e.gl,n=r(t),i=a(t,o.gridVert,o.gridFrag),l=a(t,o.tickVert,o.gridFrag);return new s(e,n,i,l)};var r=e("gl-buffer"),a=e("gl-shader"),i=e("binary-search-bounds"),o=e("./shaders");function s(e,t,n,r){this.plot=e,this.vbo=t,this.shader=n,this.tickShader=r,this.ticks=[[],[]]}function l(e,t){return e-t}var u=s.prototype;u.draw=function(){var e=[0,0],t=[0,0],n=[0,0];return function(){for(var r=this.plot,a=this.vbo,i=this.shader,o=this.ticks,s=r.gl,l=r._tickBounds,u=r.dataBox,c=r.viewBox,f=r.gridLineWidth,d=r.gridLineColor,p=r.gridLineEnable,h=r.pixelRatio,m=0;m<2;++m){var v=l[m],g=l[m+2],y=g-v,b=.5*(u[m+2]+u[m]),x=u[m+2]-u[m];t[m]=2*y/x,e[m]=2*(v-b)/x}i.bind(),a.bind(),i.attributes.dataCoord.pointer(),i.uniforms.dataShift=e,i.uniforms.dataScale=t;for(var _=0,m=0;m<2;++m){n[0]=n[1]=0,n[m]=1,i.uniforms.dataAxis=n,i.uniforms.lineWidth=f[m]/(c[m+2]-c[m])*h,i.uniforms.color=d[m];var w=6*o[m].length;p[m]&&w&&s.drawArrays(s.TRIANGLES,_,w),_+=w}}}(),u.drawTickMarks=function(){var e=[0,0],t=[0,0],n=[1,0],r=[0,1],a=[0,0],o=[0,0];return function(){for(var s=this.plot,u=this.vbo,c=this.tickShader,f=this.ticks,d=s.gl,p=s._tickBounds,h=s.dataBox,m=s.viewBox,v=s.pixelRatio,g=s.screenBox,y=g[2]-g[0],b=g[3]-g[1],x=m[2]-m[0],_=m[3]-m[1],w=0;w<2;++w){var T=p[w],k=p[w+2],C=k-T,E=.5*(h[w+2]+h[w]),M=h[w+2]-h[w];t[w]=2*C/M,e[w]=2*(T-E)/M}t[0]*=x/y,e[0]*=x/y,t[1]*=_/b,e[1]*=_/b,c.bind(),u.bind(),c.attributes.dataCoord.pointer();var A=c.uniforms;A.dataShift=e,A.dataScale=t;var S=s.tickMarkLength,O=s.tickMarkWidth,P=s.tickMarkColor,R=6*f[0].length,L=Math.min(i.ge(f[0],(h[0]-p[0])/(p[2]-p[0]),l),f[0].length),D=Math.min(i.gt(f[0],(h[2]-p[0])/(p[2]-p[0]),l),f[0].length),I=0+6*L,z=6*Math.max(0,D-L),j=Math.min(i.ge(f[1],(h[1]-p[1])/(p[3]-p[1]),l),f[1].length),N=Math.min(i.gt(f[1],(h[3]-p[1])/(p[3]-p[1]),l),f[1].length),F=R+6*j,B=6*Math.max(0,N-j);a[0]=2*(m[0]-S[1])/y-1,a[1]=(m[3]+m[1])/b-1,o[0]=S[1]*v/y,o[1]=O[1]*v/b,B&&(A.color=P[1],A.tickScale=o,A.dataAxis=r,A.screenOffset=a,d.drawArrays(d.TRIANGLES,F,B)),a[0]=(m[2]+m[0])/y-1,a[1]=2*(m[1]-S[0])/b-1,o[0]=O[0]*v/y,o[1]=S[0]*v/b,z&&(A.color=P[0],A.tickScale=o,A.dataAxis=n,A.screenOffset=a,d.drawArrays(d.TRIANGLES,I,z)),a[0]=2*(m[2]+S[3])/y-1,a[1]=(m[3]+m[1])/b-1,o[0]=S[3]*v/y,o[1]=O[3]*v/b,B&&(A.color=P[3],A.tickScale=o,A.dataAxis=r,A.screenOffset=a,d.drawArrays(d.TRIANGLES,F,B)),a[0]=(m[2]+m[0])/y-1,a[1]=2*(m[3]+S[2])/b-1,o[0]=O[2]*v/y,o[1]=S[2]*v/b,z&&(A.color=P[2],A.tickScale=o,A.dataAxis=n,A.screenOffset=a,d.drawArrays(d.TRIANGLES,I,z))}}(),u.update=function(){var e=[1,1,-1,-1,1,-1],t=[1,-1,1,1,-1,-1];return function(n){for(var r=n.ticks,a=n.bounds,i=new Float32Array(18*(r[0].length+r[1].length)),o=(this.plot.zeroLineEnable,0),s=[[],[]],l=0;l<2;++l)for(var u=s[l],c=r[l],f=a[l],d=a[l+2],p=0;p<c.length;++p){var h=(c[p].x-f)/(d-f);u.push(h);for(var m=0;m<6;++m)i[o++]=h,i[o++]=e[m],i[o++]=t[m]}this.ticks=s,this.vbo.update(i)}}(),u.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()}},{"./shaders":272,"binary-search-bounds":274,"gl-buffer":230,"gl-shader":288}],271:[function(e,t,n){"use strict";t.exports=function(e){var t=e.gl,n=r(t,[-1,-1,-1,1,1,-1,1,1]),s=a(t,i.lineVert,i.lineFrag);return new o(e,n,s)};var r=e("gl-buffer"),a=e("gl-shader"),i=e("./shaders");function o(e,t,n){this.plot=e,this.vbo=t,this.shader=n}var s=o.prototype;s.bind=function(){var e=this.shader;this.vbo.bind(),this.shader.bind(),e.attributes.coord.pointer(),e.uniforms.screenBox=this.plot.screenBox},s.drawLine=function(){var e=[0,0],t=[0,0];return function(n,r,a,i,o,s){var l=this.plot,u=this.shader,c=l.gl;e[0]=n,e[1]=r,t[0]=a,t[1]=i,u.uniforms.start=e,u.uniforms.end=t,u.uniforms.width=o*l.pixelRatio,u.uniforms.color=s,c.drawArrays(c.TRIANGLE_STRIP,0,4)}}(),s.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":272,"gl-buffer":230,"gl-shader":288}],272:[function(e,t,n){"use strict";var r=e("glslify"),a=r(["precision lowp float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = vec4(color.xyz * color.w, color.w);\n}\n"]);t.exports={lineVert:r(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 start, end;\nuniform float width;\n\nvec2 perp(vec2 v) {\n  return vec2(v.y, -v.x);\n}\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  vec2 delta = normalize(perp(start - end));\n  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));\n  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);\n}\n"]),lineFrag:a,textVert:r(["#define GLSLIFY 1\nattribute vec3 textCoordinate;\n\nuniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;\nuniform float angle;\n\nvoid main() {\n  float dataOffset  = textCoordinate.z;\n  vec2 glyphOffset  = textCoordinate.xy;\n  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +\n    glyphMatrix * glyphOffset * textScale + screenOffset;\n  gl_Position = vec4(screenCoordinate, 0, 1);\n}\n"]),textFrag:a,gridVert:r(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale;\nuniform float lineWidth;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;\n  gl_Position = vec4(pos, 0, 1);\n}\n"]),gridFrag:a,boxVert:r(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 lo, hi;\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);\n}\n"]),tickVert:r(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);\n}\n"])}},{glslify:392}],273:[function(e,t,n){"use strict";t.exports=function(e){var t=e.gl,n=r(t),i=a(t,s.textVert,s.textFrag);return new l(e,n,i)};var r=e("gl-buffer"),a=e("gl-shader"),i=e("text-cache"),o=e("binary-search-bounds"),s=e("./shaders");function l(e,t,n){this.plot=e,this.vbo=t,this.shader=n,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var u=l.prototype;u.drawTicks=function(){var e=[0,0],t=[0,0],n=[0,0];return function(r){var a=this.plot,i=this.shader,s=this.tickX[r],l=this.tickOffset[r],u=a.gl,c=a.viewBox,f=a.dataBox,d=a.screenBox,p=a.pixelRatio,h=a.tickEnable,m=a.tickPad,v=a.tickColor,g=a.tickAngle,y=a.labelEnable,b=a.labelPad,x=a.labelColor,_=a.labelAngle,w=this.labelOffset[r],T=this.labelCount[r],k=o.lt(s,f[r]),C=o.le(s,f[r+2]);e[0]=e[1]=0,e[r]=1,t[r]=(c[2+r]+c[r])/(d[2+r]-d[r])-1;var E=2/d[2+(1^r)]-d[1^r];t[1^r]=E*c[1^r]-1,h[r]&&(t[1^r]-=E*p*m[r],k<C&&l[C]>l[k]&&(i.uniforms.dataAxis=e,i.uniforms.screenOffset=t,i.uniforms.color=v[r],i.uniforms.angle=g[r],u.drawArrays(u.TRIANGLES,l[k],l[C]-l[k]))),y[r]&&T&&(t[1^r]-=E*p*b[r],i.uniforms.dataAxis=n,i.uniforms.screenOffset=t,i.uniforms.color=x[r],i.uniforms.angle=_[r],u.drawArrays(u.TRIANGLES,w,T)),t[1^r]=E*c[2+(1^r)]-1,h[r+2]&&(t[1^r]+=E*p*m[r+2],k<C&&l[C]>l[k]&&(i.uniforms.dataAxis=e,i.uniforms.screenOffset=t,i.uniforms.color=v[r+2],i.uniforms.angle=g[r+2],u.drawArrays(u.TRIANGLES,l[k],l[C]-l[k]))),y[r+2]&&T&&(t[1^r]+=E*p*b[r+2],i.uniforms.dataAxis=n,i.uniforms.screenOffset=t,i.uniforms.color=x[r+2],i.uniforms.angle=_[r+2],u.drawArrays(u.TRIANGLES,w,T))}}(),u.drawTitle=function(){var e=[0,0],t=[0,0];return function(){var n=this.plot,r=this.shader,a=n.gl,i=n.screenBox,o=n.titleCenter,s=n.titleAngle,l=n.titleColor,u=n.pixelRatio;if(this.titleCount){for(var c=0;c<2;++c)t[c]=2*(o[c]*u-i[c])/(i[2+c]-i[c])-1;r.bind(),r.uniforms.dataAxis=e,r.uniforms.screenOffset=t,r.uniforms.angle=s,r.uniforms.color=l,a.drawArrays(a.TRIANGLES,this.titleOffset,this.titleCount)}}}(),u.bind=function(){var e=[0,0],t=[0,0],n=[0,0];return function(){var r=this.plot,a=this.shader,i=r._tickBounds,o=r.dataBox,s=r.screenBox,l=r.viewBox;a.bind();for(var u=0;u<2;++u){var c=i[u],f=i[u+2],d=f-c,p=.5*(o[u+2]+o[u]),h=o[u+2]-o[u],m=l[u],v=l[u+2],g=v-m,y=s[u],b=s[u+2],x=b-y;t[u]=2*d/h*g/x,e[u]=2*(c-p)/h*g/x}n[1]=2*r.pixelRatio/(s[3]-s[1]),n[0]=n[1]*(s[3]-s[1])/(s[2]-s[0]),a.uniforms.dataScale=t,a.uniforms.dataShift=e,a.uniforms.textScale=n,this.vbo.bind(),a.attributes.textCoordinate.pointer()}}(),u.update=function(e){var t,n,r,a,o,s=[],l=e.ticks,u=e.bounds;for(o=0;o<2;++o){var c=[Math.floor(s.length/3)],f=[-1/0],d=l[o];for(t=0;t<d.length;++t){var p=d[t],h=p.x,m=p.text,v=p.font||"sans-serif";a=p.fontSize||12;for(var g=1/(u[o+2]-u[o]),y=u[o],b=m.split("\n"),x=0;x<b.length;x++)for(r=i(v,b[x]).data,n=0;n<r.length;n+=2)s.push(r[n]*a,-r[n+1]*a-x*a*1.2,(h-y)*g);c.push(Math.floor(s.length/3)),f.push(h)}this.tickOffset[o]=c,this.tickX[o]=f}for(o=0;o<2;++o){for(this.labelOffset[o]=Math.floor(s.length/3),r=i(e.labelFont[o],e.labels[o],{textAlign:"center"}).data,a=e.labelSize[o],t=0;t<r.length;t+=2)s.push(r[t]*a,-r[t+1]*a,0);this.labelCount[o]=Math.floor(s.length/3)-this.labelOffset[o]}for(this.titleOffset=Math.floor(s.length/3),r=i(e.titleFont,e.title).data,a=e.titleSize,t=0;t<r.length;t+=2)s.push(r[t]*a,-r[t+1]*a,0);this.titleCount=Math.floor(s.length/3)-this.titleOffset,this.vbo.update(s)},u.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":272,"binary-search-bounds":274,"gl-buffer":230,"gl-shader":288,"text-cache":513}],274:[function(e,t,n){arguments[4][99][0].apply(n,arguments)},{dup:99}],275:[function(e,t,n){"use strict";t.exports=function(e){var t=e.gl,n=r(t,[t.drawingBufferWidth,t.drawingBufferHeight]),u=new l(t,n);return u.grid=a(u),u.text=i(u),u.line=o(u),u.box=s(u),u.update(e),u};var r=e("gl-select-static"),a=e("./lib/grid"),i=e("./lib/text"),o=e("./lib/line"),s=e("./lib/box");function l(e,t){this.gl=e,this.pickBuffer=t,this.screenBox=[0,0,e.drawingBufferWidth,e.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var u=l.prototype;function c(e){for(var t=e.slice(),n=0;n<t.length;++n)t[n]=t[n].slice();return t}function f(e,t){return e.x-t.x}u.setDirty=function(){this.dirty=this.pickDirty=!0},u.setOverlayDirty=function(){this.dirty=!0},u.nextDepthValue=function(){return this._depthCounter++/65536},u.draw=function(){var e=this.gl,t=this.screenBox,n=this.viewBox,r=this.dataBox,a=this.pixelRatio,i=this.grid,o=this.line,s=this.text,l=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),this.dirty){if(this.dirty=!1,e.bindFramebuffer(e.FRAMEBUFFER,null),e.enable(e.SCISSOR_TEST),e.disable(e.DEPTH_TEST),e.depthFunc(e.LESS),e.depthMask(!1),e.enable(e.BLEND),e.blendEquation(e.FUNC_ADD,e.FUNC_ADD),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA),this.borderColor){e.scissor(t[0],t[1],t[2]-t[0],t[3]-t[1]);var u=this.borderColor;e.clearColor(u[0]*u[3],u[1]*u[3],u[2]*u[3],u[3]),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)}e.scissor(n[0],n[1],n[2]-n[0],n[3]-n[1]),e.viewport(n[0],n[1],n[2]-n[0],n[3]-n[1]);var c=this.backgroundColor;e.clearColor(c[0]*c[3],c[1]*c[3],c[2]*c[3],c[3]),e.clear(e.COLOR_BUFFER_BIT),i.draw();var f=this.zeroLineEnable,d=this.zeroLineColor,p=this.zeroLineWidth;if(f[0]||f[1]){o.bind();for(var h=0;h<2;++h)if(f[h]&&r[h]<=0&&r[h+2]>=0){var m=t[h]-r[h]*(t[h+2]-t[h])/(r[h+2]-r[h]);0===h?o.drawLine(m,t[1],m,t[3],p[h],d[h]):o.drawLine(t[0],m,t[2],m,p[h],d[h])}}for(var h=0;h<l.length;++h)l[h].draw();e.viewport(t[0],t[1],t[2]-t[0],t[3]-t[1]),e.scissor(t[0],t[1],t[2]-t[0],t[3]-t[1]),this.grid.drawTickMarks(),o.bind();var v=this.borderLineEnable,g=this.borderLineWidth,y=this.borderLineColor;v[1]&&o.drawLine(n[0],n[1]-.5*g[1]*a,n[0],n[3]+.5*g[3]*a,g[1],y[1]),v[0]&&o.drawLine(n[0]-.5*g[0]*a,n[1],n[2]+.5*g[2]*a,n[1],g[0],y[0]),v[3]&&o.drawLine(n[2],n[1]-.5*g[1]*a,n[2],n[3]+.5*g[3]*a,g[3],y[3]),v[2]&&o.drawLine(n[0]-.5*g[0]*a,n[3],n[2]+.5*g[2]*a,n[3],g[2],y[2]),s.bind();for(var h=0;h<2;++h)s.drawTicks(h);this.titleEnable&&s.drawTitle();for(var b=this.overlays,h=0;h<b.length;++h)b[h].draw();e.disable(e.SCISSOR_TEST),e.disable(e.BLEND),e.depthMask(!0)}},u.drawPick=function(){if(!this.static){var e=this.pickBuffer;this.gl,this._pickTimeout=null,e.begin();for(var t=1,n=this.objects,r=0;r<n.length;++r)t=n[r].drawPick(t);e.end()}},u.pick=function(e,t){if(!this.static){var n=this.pixelRatio,r=this.pickPixelRatio,a=this.viewBox,i=0|Math.round((e-a[0]/n)*r),o=0|Math.round((t-a[1]/n)*r),s=this.pickBuffer.query(i,o,this.pickRadius);if(!s)return null;for(var l=s.id+(s.value[0]<<8)+(s.value[1]<<16)+(s.value[2]<<24),u=this.objects,c=0;c<u.length;++c){var f=u[c].pick(i,o,l);if(f)return f}return null}},u.setScreenBox=function(e){var t=this.screenBox,n=this.pixelRatio;t[0]=0|Math.round(e[0]*n),t[1]=0|Math.round(e[1]*n),t[2]=0|Math.round(e[2]*n),t[3]=0|Math.round(e[3]*n),this.setDirty()},u.setDataBox=function(e){var t=this.dataBox,n=t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3];n&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],this.setDirty())},u.setViewBox=function(e){var t=this.pixelRatio,n=this.viewBox;n[0]=0|Math.round(e[0]*t),n[1]=0|Math.round(e[1]*t),n[2]=0|Math.round(e[2]*t),n[3]=0|Math.round(e[3]*t);var r=this.pickPixelRatio;this.pickBuffer.shape=[0|Math.round((e[2]-e[0])*r),0|Math.round((e[3]-e[1])*r)],this.setDirty()},u.update=function(e){e=e||{};var t=this.gl;this.pixelRatio=e.pixelRatio||1;var n=this.pixelRatio;this.pickPixelRatio=Math.max(n,1),this.setScreenBox(e.screenBox||[0,0,t.drawingBufferWidth/n,t.drawingBufferHeight/n]),this.screenBox,this.setViewBox(e.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/n,.125*(this.screenBox[3]-this.screenBox[1])/n,.875*(this.screenBox[2]-this.screenBox[0])/n,.875*(this.screenBox[3]-this.screenBox[1])/n]);var r=this.viewBox,a=(r[2]-r[0])/(r[3]-r[1]);this.setDataBox(e.dataBox||[-10,-10/a,10,10/a]),this.borderColor=!1!==e.borderColor&&(e.borderColor||[0,0,0,0]).slice(),this.backgroundColor=(e.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(e.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(e.gridLineWidth||[1,1]).slice(),this.gridLineColor=c(e.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(e.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(e.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=c(e.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(e.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(e.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=c(e.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(e.titleCenter||[.5*(r[0]+r[2])/n,(r[3]+120)/n]).slice(),this.titleEnable=!("titleEnable"in e&&!e.titleEnable),this.titleAngle=e.titleAngle||0,this.titleColor=(e.titleColor||[0,0,0,1]).slice(),this.labelPad=(e.labelPad||[15,15,15,15]).slice(),this.labelAngle=(e.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(e.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=c(e.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(e.tickPad||[15,15,15,15]).slice(),this.tickAngle=(e.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(e.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=c(e.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(e.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(e.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=c(e.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var i=e.ticks||[[],[]],o=this._tickBounds;o[0]=o[1]=1/0,o[2]=o[3]=-1/0;for(var s=0;s<2;++s){var l=i[s].slice(0);0!==l.length&&(l.sort(f),o[s]=Math.min(o[s],l[0].x),o[s+2]=Math.max(o[s+2],l[l.length-1].x))}this.grid.update({bounds:o,ticks:i}),this.text.update({bounds:o,ticks:i,labels:e.labels||["x","y"],labelSize:e.labelSize||[12,12],labelFont:e.labelFont||["sans-serif","sans-serif"],title:e.title||"",titleSize:e.titleSize||18,titleFont:e.titleFont||"sans-serif"}),this.static=!!e.static,this.setDirty()},u.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var e=this.objects.length-1;e>=0;--e)this.objects[e].dispose();this.objects.length=0;for(var e=this.overlays.length-1;e>=0;--e)this.overlays[e].dispose();this.overlays.length=0,this.gl=null},u.addObject=function(e){this.objects.indexOf(e)<0&&(this.objects.push(e),this.setDirty())},u.removeObject=function(e){for(var t=this.objects,n=0;n<t.length;++n)if(t[n]===e){t.splice(n,1),this.setDirty();break}},u.addOverlay=function(e){this.overlays.indexOf(e)<0&&(this.overlays.push(e),this.setOverlayDirty())},u.removeOverlay=function(e){for(var t=this.overlays,n=0;n<t.length;++n)if(t[n]===e){t.splice(n,1),this.setOverlayDirty();break}}},{"./lib/box":269,"./lib/grid":270,"./lib/line":271,"./lib/text":273,"gl-select-static":287}],276:[function(e,t,n){var r=e("glslify"),a=e("gl-shader"),i=r(["precision mediump float;\n#define GLSLIFY 1\nattribute vec2 position;\nvarying vec2 uv;\nvoid main() {\n  uv = position;\n  gl_Position = vec4(position, 0, 1);\n}"]),o=r(["precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D accumBuffer;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));\n  gl_FragColor = min(vec4(1,1,1,1), accum);\n}"]);t.exports=function(e){return a(e,i,o,null,[{name:"position",type:"vec2"}])}},{"gl-shader":288,glslify:392}],277:[function(e,t,n){"use strict";t.exports=function(e){var t=!1,n=((e=e||{}).pixelRatio||parseFloat(window.devicePixelRatio),e.canvas);if(!n)if(n=document.createElement("canvas"),e.container){var v=e.container;v.appendChild(n)}else document.body.appendChild(n);var g=e.gl;if(g||(g=function(e,t){var n=null;try{(n=e.getContext("webgl",t))||(n=e.getContext("experimental-webgl",t))}catch(e){return null}return n}(n,e.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:p})),!g)throw new Error("webgl not supported");var y=e.bounds||[[-10,-10,-10],[10,10,10]],b=new function(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null},x=l(g,[g.drawingBufferWidth,g.drawingBufferHeight],{preferFloat:!p}),_=d(g),w=e.camera||{eye:[2,0,0],center:[0,0,0],up:[0,1,0],zoomMin:.1,zoomMax:100,mode:"turntable"},T=e.axes||{},k=a(g,T);k.enable=!T.disable;var C=e.spikes||{},E=o(g,C),M=[],A=[],S=[],O=[],P=!0,R=!0,L=new Array(16),D=new Array(16),I={view:null,projection:L,model:D},R=!0,z=[g.drawingBufferWidth,g.drawingBufferHeight],j={gl:g,contextLost:!1,pixelRatio:e.pixelRatio||parseFloat(window.devicePixelRatio),canvas:n,selection:b,camera:r(n,w),axes:k,axesPixels:null,spikes:E,bounds:y,objects:M,shape:z,aspect:e.aspectRatio||[1,1,1],pickRadius:e.pickRadius||10,zNear:e.zNear||.01,zFar:e.zFar||1e3,fovy:e.fovy||Math.PI/4,clearColor:e.clearColor||[0,0,0,0],autoResize:m(e.autoResize),autoBounds:m(e.autoBounds),autoScale:!!e.autoScale,autoCenter:m(e.autoCenter),clipToBounds:m(e.clipToBounds),snapToData:!!e.snapToData,onselect:e.onselect||null,onrender:e.onrender||null,onclick:e.onclick||null,cameraParams:I,oncontextloss:null,mouseListener:null},N=[g.drawingBufferWidth/j.pixelRatio|0,g.drawingBufferHeight/j.pixelRatio|0];function F(){if(!t&&j.autoResize){var e=n.parentNode,r=1,a=1;e&&e!==document.body?(r=e.clientWidth,a=e.clientHeight):(r=window.innerWidth,a=window.innerHeight);var i=0|Math.ceil(r*j.pixelRatio),o=0|Math.ceil(a*j.pixelRatio);if(i!==n.width||o!==n.height){n.width=i,n.height=o;var s=n.style;s.position=s.position||"absolute",s.left="0px",s.top="0px",s.width=r+"px",s.height=a+"px",P=!0}}}function B(){for(var e=M.length,t=O.length,n=0;n<t;++n)S[n]=0;e:for(var n=0;n<e;++n){var r=M[n],a=r.pickSlots;if(a){for(var i=0;i<t;++i)if(S[i]+a<255){A[n]=i,r.setPickBase(S[i]+1),S[i]+=a;continue e}var o=s(g,z);A[n]=t,O.push(o),S.push(a),r.setPickBase(1),t+=1}else A[n]=-1}for(;t>0&&0===S[t-1];)S.pop(),O.pop().dispose()}j.autoResize&&F(),window.addEventListener("resize",F),j.update=function(e){t||(e=e||{},P=!0,R=!0)},j.add=function(e){t||(e.axes=k,M.push(e),A.push(-1),P=!0,R=!0,B())},j.remove=function(e){if(!t){var n=M.indexOf(e);n<0||(M.splice(n,1),A.pop(),P=!0,R=!0,B())}},j.dispose=function(){if(!t&&(t=!0,window.removeEventListener("resize",F),n.removeEventListener("webglcontextlost",G),j.mouseListener.enabled=!1,!j.contextLost)){k.dispose(),E.dispose();for(var e=0;e<M.length;++e)M[e].dispose();x.dispose();for(var e=0;e<O.length;++e)O[e].dispose();_.dispose(),g=null,k=null,E=null,M=[]}};var V=!1,U=0;function G(){if(j.contextLost)return!0;g.isContextLost()&&(j.contextLost=!0,j.mouseListener.enabled=!1,j.selection.object=null,j.oncontextloss&&j.oncontextloss())}j.mouseListener=c(n,function(e,n,r){if(!t){var a=O.length,i=M.length,o=b.object;b.distance=1/0,b.mouse[0]=n,b.mouse[1]=r,b.object=null,b.screen=null,b.dataCoordinate=b.dataPosition=null;var s=!1;if(e&&U)V=!0;else{V&&(R=!0),V=!1;for(var l=0;l<a;++l){var u=O[l].query(n,N[1]-r-1,j.pickRadius);if(u){if(u.distance>b.distance)continue;for(var c=0;c<i;++c){var f=M[c];if(A[c]===l){var d=f.pick(u);d&&(b.buttons=e,b.screen=u.coord,b.distance=u.distance,b.object=f,b.index=d.distance,b.dataPosition=d.position,b.dataCoordinate=d.dataCoordinate,b.data=d,s=!0)}}}}}o&&o!==b.object&&(o.highlight&&o.highlight(null),P=!0),b.object&&(b.object.highlight&&b.object.highlight(b.data),P=!0),(s=s||b.object!==o)&&j.onselect&&j.onselect(b),1&e&&!(1&U)&&j.onclick&&j.onclick(b),U=e}}),n.addEventListener("webglcontextlost",G);var H=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],W=[H[0].slice(),H[1].slice()];function q(){if(!G()){F();var e=j.camera.tick();I.view=j.camera.matrix,P=P||e,R=R||e,k.pixelRatio=j.pixelRatio,E.pixelRatio=j.pixelRatio;var t=M.length,n=H[0],r=H[1];n[0]=n[1]=n[2]=1/0,r[0]=r[1]=r[2]=-1/0;for(var a=0;a<t;++a){var o=M[a];o.pixelRatio=j.pixelRatio,o.axes=j.axes,P=P||!!o.dirty,R=R||!!o.dirty;var s=o.bounds;if(s)for(var l=s[0],c=s[1],d=0;d<3;++d)n[d]=Math.min(n[d],l[d]),r[d]=Math.max(r[d],c[d])}var p=j.bounds;if(j.autoBounds)for(var d=0;d<3;++d){if(r[d]<n[d])n[d]=-1,r[d]=1;else{n[d]===r[d]&&(n[d]-=1,r[d]+=1);var m=.05*(r[d]-n[d]);n[d]=n[d]-m,r[d]=r[d]+m}p[0][d]=n[d],p[1][d]=r[d]}for(var v=!1,d=0;d<3;++d)v=v||W[0][d]!==p[0][d]||W[1][d]!==p[1][d],W[0][d]=p[0][d],W[1][d]=p[1][d];if(R=R||v,P=P||v){if(v){for(var y=[0,0,0],a=0;a<3;++a)y[a]=h((p[1][a]-p[0][a])/10);k.autoTicks?k.update({bounds:p,tickSpacing:y}):k.update({bounds:p})}var w=g.drawingBufferWidth,T=g.drawingBufferHeight;z[0]=w,z[1]=T,N[0]=0|Math.max(w/j.pixelRatio,1),N[1]=0|Math.max(T/j.pixelRatio,1),f(L,j.fovy,w/T,j.zNear,j.zFar);for(var a=0;a<16;++a)D[a]=0;D[15]=1;for(var C=0,a=0;a<3;++a)C=Math.max(C,p[1][a]-p[0][a]);for(var a=0;a<3;++a)j.autoScale?D[5*a]=j.aspect[a]/(p[1][a]-p[0][a]):D[5*a]=1/C,j.autoCenter&&(D[12+a]=.5*-D[5*a]*(p[0][a]+p[1][a]));for(var a=0;a<t;++a){var o=M[a];o.axesBounds=p,j.clipToBounds&&(o.clipBounds=p)}b.object&&(j.snapToData?E.position=b.dataCoordinate:E.position=b.dataPosition,E.bounds=p),R&&(R=!1,function(){if(!G()){g.colorMask(!0,!0,!0,!0),g.depthMask(!0),g.disable(g.BLEND),g.enable(g.DEPTH_TEST);for(var e=M.length,t=O.length,n=0;n<t;++n){var r=O[n];r.shape=N,r.begin();for(var a=0;a<e;++a)if(A[a]===n){var i=M[a];i.drawPick&&(i.pixelRatio=1,i.drawPick(I))}r.end()}}}()),j.axesPixels=i(j.axes,I,w,T),j.onrender&&j.onrender(),g.bindFramebuffer(g.FRAMEBUFFER,null),g.viewport(0,0,w,T);var S=j.clearColor;g.clearColor(S[0],S[1],S[2],S[3]),g.clear(g.COLOR_BUFFER_BIT|g.DEPTH_BUFFER_BIT),g.depthMask(!0),g.colorMask(!0,!0,!0,!0),g.enable(g.DEPTH_TEST),g.depthFunc(g.LEQUAL),g.disable(g.BLEND),g.disable(g.CULL_FACE);var B=!1;k.enable&&(B=B||k.isTransparent(),k.draw(I)),E.axes=k,b.object&&E.draw(I),g.disable(g.CULL_FACE);for(var a=0;a<t;++a){var o=M[a];o.axes=k,o.pixelRatio=j.pixelRatio,o.isOpaque&&o.isOpaque()&&o.draw(I),o.isTransparent&&o.isTransparent()&&(B=!0)}if(B){x.shape=z,x.bind(),g.clear(g.DEPTH_BUFFER_BIT),g.colorMask(!1,!1,!1,!1),g.depthMask(!0),g.depthFunc(g.LESS),k.enable&&k.isTransparent()&&k.drawTransparent(I);for(var a=0;a<t;++a){var o=M[a];o.isOpaque&&o.isOpaque()&&o.draw(I)}g.enable(g.BLEND),g.blendEquation(g.FUNC_ADD),g.blendFunc(g.ONE,g.ONE_MINUS_SRC_ALPHA),g.colorMask(!0,!0,!0,!0),g.depthMask(!1),g.clearColor(0,0,0,0),g.clear(g.COLOR_BUFFER_BIT),k.isTransparent()&&k.drawTransparent(I);for(var a=0;a<t;++a){var o=M[a];o.isTransparent&&o.isTransparent()&&o.drawTransparent(I)}g.bindFramebuffer(g.FRAMEBUFFER,null),g.blendFunc(g.ONE,g.ONE_MINUS_SRC_ALPHA),g.disable(g.DEPTH_TEST),_.bind(),x.color[0].bind(0),_.uniforms.accumBuffer=0,u(g),g.disable(g.BLEND)}P=!1;for(var a=0;a<t;++a)M[a].dirty=!1}}}return function e(){t||j.contextLost||(q(),requestAnimationFrame(e))}(),j.redraw=function(){t||(P=!0,q())},j};var r=e("3d-view-controls"),a=e("gl-axes3d"),i=e("gl-axes3d/properties"),o=e("gl-spikes3d"),s=e("gl-select-static"),l=e("gl-fbo"),u=e("a-big-triangle"),c=e("mouse-change"),f=e("gl-mat4/perspective"),d=e("./lib/shader"),p=e("is-mobile")({tablet:!0});function h(e){var t=Math.round(Math.log(Math.abs(e))/Math.log(10));if(t<0){var n=Math.round(Math.pow(10,-t));return Math.ceil(e*n)/n}if(t>0){var n=Math.round(Math.pow(10,t));return Math.ceil(e/n)*n}return Math.ceil(e)}function m(e){return"boolean"!=typeof e||e}},{"./lib/shader":276,"3d-view-controls":44,"a-big-triangle":47,"gl-axes3d":222,"gl-axes3d/properties":229,"gl-fbo":239,"gl-mat4/perspective":257,"gl-select-static":287,"gl-spikes3d":297,"is-mobile":403,"mouse-change":418}],278:[function(e,t,n){var r=e("glslify");n.pointVertex=r(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform float pointCloud;\n\nhighp float rand(vec2 co) {\n  highp float a = 12.9898;\n  highp float b = 78.233;\n  highp float c = 43758.5453;\n  highp float d = dot(co.xy, vec2(a, b));\n  highp float e = mod(d, 3.14);\n  return fract(sin(e) * c);\n}\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n    // if we don't jitter the point size a bit, overall point cloud\n    // saturation 'jumps' on zooming, which is disturbing and confusing\n  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    // get the same square surface as circle would be\n    gl_PointSize *= 0.886;\n  }\n}"]),n.pointFragment=r(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color, borderColor;\nuniform float centerFraction;\nuniform float pointCloud;\n\nvoid main() {\n  float radius;\n  vec4 baseColor;\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    if(centerFraction == 1.0) {\n      gl_FragColor = color;\n    } else {\n      gl_FragColor = mix(borderColor, color, centerFraction);\n    }\n  } else {\n    radius = length(2.0 * gl_PointCoord.xy - 1.0);\n    if(radius > 1.0) {\n      discard;\n    }\n    baseColor = mix(borderColor, color, step(radius, centerFraction));\n    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);\n  }\n}\n"]),n.pickVertex=r(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform vec4 pickOffset;\n\nvarying vec4 fragId;\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n  gl_PointSize = pointSize;\n\n  vec4 id = pickId + pickOffset;\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  fragId = id;\n}\n"]),n.pickFragment=r(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\n\nvoid main() {\n  float radius = length(2.0 * gl_PointCoord.xy - 1.0);\n  if(radius > 1.0) {\n    discard;\n  }\n  gl_FragColor = fragId / 255.0;\n}\n"])},{glslify:392}],279:[function(e,t,n){"use strict";var r=e("gl-shader"),a=e("gl-buffer"),i=e("typedarray-pool"),o=e("./lib/shader");function s(e,t,n,r,a){this.plot=e,this.offsetBuffer=t,this.pickBuffer=n,this.shader=r,this.pickShader=a,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}t.exports=function(e,t){var n=e.gl,i=a(n),l=a(n),u=r(n,o.pointVertex,o.pointFragment),c=r(n,o.pickVertex,o.pickFragment),f=new s(e,i,l,u,c);return f.update(t),e.addObject(f),f};var l=s.prototype;l.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},l.update=function(e){var t;function n(t,n){return t in e?e[t]:n}e=e||{},this.sizeMin=n("sizeMin",.5),this.sizeMax=n("sizeMax",20),this.color=n("color",[1,0,0,1]).slice(),this.areaRatio=n("areaRatio",1),this.borderColor=n("borderColor",[0,0,0,1]).slice(),this.blend=n("blend",!1);var r=e.positions.length>>>1,a=e.positions instanceof Float32Array,o=e.idToIndex instanceof Int32Array&&e.idToIndex.length>=r,s=e.positions,l=a?s:i.mallocFloat32(s.length),u=o?e.idToIndex:i.mallocInt32(r);if(a||l.set(s),!o)for(l.set(s),t=0;t<r;t++)u[t]=t;this.points=s,this.offsetBuffer.update(l),this.pickBuffer.update(u),a||i.free(l),o||i.free(u),this.pointCount=r,this.pickOffset=0},l.unifiedDraw=function(){var e=[1,0,0,0,1,0,0,0,1],t=[0,0,0,0];return function(n){var r=void 0!==n,a=r?this.pickShader:this.shader,i=this.plot.gl,o=this.plot.dataBox;if(0===this.pointCount)return n;var s=o[2]-o[0],l=o[3]-o[1],u=function(e,t){var n,r=0,a=e.length>>>1;for(n=0;n<a;n++){var i=e[2*n],o=e[2*n+1];i>=t[0]&&i<=t[2]&&o>=t[1]&&o<=t[3]&&r++}return r}(this.points,o),c=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(u,.33333)));e[0]=2/s,e[4]=2/l,e[6]=-2*o[0]/s-1,e[7]=-2*o[1]/l-1,this.offsetBuffer.bind(),a.bind(),a.attributes.position.pointer(),a.uniforms.matrix=e,a.uniforms.color=this.color,a.uniforms.borderColor=this.borderColor,a.uniforms.pointCloud=c<5,a.uniforms.pointSize=c,a.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),r&&(t[0]=255&n,t[1]=n>>8&255,t[2]=n>>16&255,t[3]=n>>24&255,this.pickBuffer.bind(),a.attributes.pickId.pointer(i.UNSIGNED_BYTE),a.uniforms.pickOffset=t,this.pickOffset=n);var f=i.getParameter(i.BLEND),d=i.getParameter(i.DITHER);return f&&!this.blend&&i.disable(i.BLEND),d&&i.disable(i.DITHER),i.drawArrays(i.POINTS,0,this.pointCount),f&&!this.blend&&i.enable(i.BLEND),d&&i.enable(i.DITHER),n+this.pointCount}}(),l.draw=l.unifiedDraw,l.drawPick=l.unifiedDraw,l.pick=function(e,t,n){var r=this.pickOffset,a=this.pointCount;if(n<r||n>=r+a)return null;var i=n-r,o=this.points;return{object:this,pointId:i,dataCoord:[o[2*i],o[2*i+1]]}}},{"./lib/shader":278,"gl-buffer":230,"gl-shader":288,"typedarray-pool":522}],280:[function(e,t,n){t.exports=function(e,t,n,r){var a,i,o,s,l,u=t[0],c=t[1],f=t[2],d=t[3],p=n[0],h=n[1],m=n[2],v=n[3];return(i=u*p+c*h+f*m+d*v)<0&&(i=-i,p=-p,h=-h,m=-m,v=-v),1-i>1e-6?(a=Math.acos(i),o=Math.sin(a),s=Math.sin((1-r)*a)/o,l=Math.sin(r*a)/o):(s=1-r,l=r),e[0]=s*u+l*p,e[1]=s*c+l*h,e[2]=s*f+l*m,e[3]=s*d+l*v,e}},{}],281:[function(e,t,n){"use strict";t.exports=function(e){return e||0===e?e.toString():""}},{}],282:[function(e,t,n){"use strict";var r=e("vectorize-text");t.exports=function(e,t){var n=a[t];if(n||(n=a[t]={}),e in n)return n[e];for(var i=r(e,{textAlign:"center",textBaseline:"middle",lineHeight:1,font:t}),o=r(e,{triangles:!0,textAlign:"center",textBaseline:"middle",lineHeight:1,font:t}),s=[[1/0,1/0],[-1/0,-1/0]],l=0;l<i.positions.length;++l)for(var u=i.positions[l],c=0;c<2;++c)s[0][c]=Math.min(s[0][c],u[c]),s[1][c]=Math.max(s[1][c],u[c]);return n[e]=[o,i,s]};var a={}},{"vectorize-text":527}],283:[function(e,t,n){var r=e("gl-shader"),a=e("glslify"),i=a(["precision mediump float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform vec4 highlightId;\nuniform float highlightScale;\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = 1.0;\n    if(distance(highlightId, id) < 0.0001) {\n      scale = highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1);\n    vec4 viewPosition = view * worldPosition;\n    viewPosition = viewPosition / viewPosition.w;\n    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),o=a(["precision mediump float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float highlightScale, pixelRatio;\nuniform vec4 highlightId;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = pixelRatio;\n    if(distance(highlightId.bgr, id.bgr) < 0.001) {\n      scale *= highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1.0);\n    vec4 viewPosition = view * worldPosition;\n    vec4 clipPosition = projection * viewPosition;\n    clipPosition /= clipPosition.w;\n\n    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),s=a(["precision mediump float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform float highlightScale;\nuniform vec4 highlightId;\nuniform vec3 axes[2];\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float scale, pixelRatio;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float lscale = pixelRatio * scale;\n    if(distance(highlightId, id) < 0.0001) {\n      lscale *= highlightScale;\n    }\n\n    vec4 clipCenter   = projection * view * model * vec4(position, 1);\n    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;\n    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = dataPosition;\n  }\n}\n"]),l=a(["precision mediump float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float opacity;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;\n\n  gl_FragColor = interpColor * opacity;\n}\n"]),u=a(["precision mediump float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float pickGroup;\n\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;\n\n  gl_FragColor = vec4(pickGroup, pickId.bgr);\n}"]),c=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],f={vertex:i,fragment:l,attributes:c},d={vertex:o,fragment:l,attributes:c},p={vertex:s,fragment:l,attributes:c},h={vertex:i,fragment:u,attributes:c},m={vertex:o,fragment:u,attributes:c},v={vertex:s,fragment:u,attributes:c};function g(e,t){var n=r(e,t),a=n.attributes;return a.position.location=0,a.color.location=1,a.glyph.location=2,a.id.location=3,n}n.createPerspective=function(e){return g(e,f)},n.createOrtho=function(e){return g(e,d)},n.createProject=function(e){return g(e,p)},n.createPickPerspective=function(e){return g(e,h)},n.createPickOrtho=function(e){return g(e,m)},n.createPickProject=function(e){return g(e,v)}},{"gl-shader":288,glslify:392}],284:[function(e,t,n){"use strict";var r=e("is-string-blank"),a=e("gl-buffer"),i=e("gl-vao"),o=e("typedarray-pool"),s=e("gl-mat4/multiply"),l=e("./lib/shaders"),u=e("./lib/glyphs"),c=e("./lib/get-simple-string"),f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function d(e,t){var n=e[0],r=e[1],a=e[2],i=e[3];return e[0]=t[0]*n+t[4]*r+t[8]*a+t[12]*i,e[1]=t[1]*n+t[5]*r+t[9]*a+t[13]*i,e[2]=t[2]*n+t[6]*r+t[10]*a+t[14]*i,e[3]=t[3]*n+t[7]*r+t[11]*a+t[15]*i,e}function p(e,t,n,r){return d(r,r),d(r,r),d(r,r)}function h(e,t,n,r,a,i,o,s,l,u,c,f){this.gl=e,this.pixelRatio=1,this.shader=t,this.orthoShader=n,this.projectShader=r,this.pointBuffer=a,this.colorBuffer=i,this.glyphBuffer=o,this.idBuffer=s,this.vao=l,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.lineWidth=0,this.projectScale=[2/3,2/3,2/3],this.projectOpacity=[1,1,1],this.pickId=0,this.pickPerspectiveShader=u,this.pickOrthoShader=c,this.pickProjectShader=f,this.points=[],this._selectResult=new function(e,t){this.index=e,this.dataCoordinate=this.position=t}(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}t.exports=function(e){var t=e.gl,n=l.createPerspective(t),r=l.createOrtho(t),o=l.createProject(t),s=l.createPickPerspective(t),u=l.createPickOrtho(t),c=l.createPickProject(t),f=a(t),d=a(t),p=a(t),m=a(t),v=i(t,[{buffer:f,size:3,type:t.FLOAT},{buffer:d,size:4,type:t.FLOAT},{buffer:p,size:2,type:t.FLOAT},{buffer:m,size:4,type:t.UNSIGNED_BYTE,normalized:!0}]),g=new h(t,n,r,o,f,d,p,m,v,s,u,c);return g.update(e),g};var m=h.prototype;m.pickSlots=1,m.setPickBase=function(e){this.pickId=e},m.isTransparent=function(){if(this.opacity<1)return!0;for(var e=0;e<3;++e)if(this.axesProject[e]&&this.projectOpacity[e]<1)return!0;return!1},m.isOpaque=function(){if(this.opacity>=1)return!0;for(var e=0;e<3;++e)if(this.axesProject[e]&&this.projectOpacity[e]>=1)return!0;return!1};var v=[0,0],g=[0,0,0],y=[0,0,0],b=[0,0,0,1],x=[0,0,0,1],_=f.slice(),w=[0,0,0],T=[[0,0,0],[0,0,0]];function k(e){return e[0]=e[1]=e[2]=0,e}function C(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=1,e}function E(e,t,n,r){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[n]=r,e}function M(e,t,n,r,a){var i,o=t.axesProject,l=t.gl,u=e.uniforms,c=n.model||f,d=n.view||f,h=n.projection||f,m=t.axesBounds,M=function(e){for(var t=T,n=0;n<2;++n)for(var r=0;r<3;++r)t[n][r]=Math.max(Math.min(e[n][r],1e8),-1e8);return t}(t.clipBounds);i=t.axes&&t.axes.lastCubeProps?t.axes.lastCubeProps.axis:[1,1,1],v[0]=2/l.drawingBufferWidth,v[1]=2/l.drawingBufferHeight,e.bind(),u.view=d,u.projection=h,u.screenSize=v,u.highlightId=t.highlightId,u.highlightScale=t.highlightScale,u.clipBounds=M,u.pickGroup=t.pickId/255,u.pixelRatio=t.pixelRatio;for(var A=0;A<3;++A)if(o[A]&&t.projectOpacity[A]<1===r){u.scale=t.projectScale[A],u.opacity=t.projectOpacity[A];for(var S=_,O=0;O<16;++O)S[O]=0;for(var O=0;O<4;++O)S[5*O]=1;S[5*A]=0,i[A]<0?S[12+A]=m[0][A]:S[12+A]=m[1][A],s(S,c,S),u.model=S;var P=(A+1)%3,R=(A+2)%3,L=k(g),D=k(y);L[P]=1,D[R]=1;var I=p(0,0,0,C(b,L)),z=p(0,0,0,C(x,D));if(Math.abs(I[1])>Math.abs(z[1])){var j=I;I=z,z=j,j=L,L=D,D=j;var N=P;P=R,R=N}I[0]<0&&(L[P]=-1),z[1]>0&&(D[R]=-1);for(var F=0,B=0,O=0;O<4;++O)F+=Math.pow(c[4*P+O],2),B+=Math.pow(c[4*R+O],2);L[P]/=Math.sqrt(F),D[R]/=Math.sqrt(B),u.axes[0]=L,u.axes[1]=D,u.fragClipBounds[0]=E(w,M[0],A,-1e8),u.fragClipBounds[1]=E(w,M[1],A,1e8),t.vao.draw(l.TRIANGLES,t.vertexCount),t.lineWidth>0&&(l.lineWidth(t.lineWidth),t.vao.draw(l.LINES,t.lineVertexCount,t.vertexCount))}}var A=[[-1e8,-1e8,-1e8],[1e8,1e8,1e8]];function S(e,t,n,r,a,i){var o=n.gl;if(n.vao.bind(),a===n.opacity<1||i){e.bind();var s=e.uniforms;s.model=r.model||f,s.view=r.view||f,s.projection=r.projection||f,v[0]=2/o.drawingBufferWidth,v[1]=2/o.drawingBufferHeight,s.screenSize=v,s.highlightId=n.highlightId,s.highlightScale=n.highlightScale,s.fragClipBounds=A,s.clipBounds=n.axes.bounds,s.opacity=n.opacity,s.pickGroup=n.pickId/255,s.pixelRatio=n.pixelRatio,n.vao.draw(o.TRIANGLES,n.vertexCount),n.lineWidth>0&&(o.lineWidth(n.lineWidth),n.vao.draw(o.LINES,n.lineVertexCount,n.vertexCount))}M(t,n,r,a),n.vao.unbind()}function O(e,t,n){var a;a=Array.isArray(e)?t<e.length?e[t]:void 0:e,a=c(a);var i=!0;r(a)&&(a="",i=!1);var o=u(a,n);return{mesh:o[0],lines:o[1],bounds:o[2],visible:i}}m.draw=function(e){var t=this.useOrtho?this.orthoShader:this.shader;S(t,this.projectShader,this,e,!1,!1)},m.drawTransparent=function(e){var t=this.useOrtho?this.orthoShader:this.shader;S(t,this.projectShader,this,e,!0,!1)},m.drawPick=function(e){var t=this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader;S(t,this.pickProjectShader,this,e,!1,!0)},m.pick=function(e){if(!e)return null;if(e.id!==this.pickId)return null;var t=e.value[2]+(e.value[1]<<8)+(e.value[0]<<16);if(t>=this.pointCount||t<0)return null;var n=this.points[t],r=this._selectResult;r.index=t;for(var a=0;a<3;++a)r.position[a]=r.dataCoordinate[a]=n[a];return r},m.highlight=function(e){if(e){var t=e.index,n=255&t,r=t>>8&255,a=t>>16&255;this.highlightId=[n/255,r/255,a/255,0]}else this.highlightId=[1,1,1,1]},m.update=function(e){if("perspective"in(e=e||{})&&(this.useOrtho=!e.perspective),"orthographic"in e&&(this.useOrtho=!!e.orthographic),"lineWidth"in e&&(this.lineWidth=e.lineWidth),"project"in e)if(Array.isArray(e.project))this.axesProject=e.project;else{var t=!!e.project;this.axesProject=[t,t,t]}if("projectScale"in e)if(Array.isArray(e.projectScale))this.projectScale=e.projectScale.slice();else{var n=+e.projectScale;this.projectScale=[n,n,n]}if("projectOpacity"in e)if(Array.isArray(e.projectOpacity))this.projectOpacity=e.projectOpacity.slice();else{var n=+e.projectOpacity;this.projectOpacity=[n,n,n]}"opacity"in e&&(this.opacity=e.opacity),this.dirty=!0;var r=e.position,a=e.font||"normal",i=e.alignment||[0,0],s=[1/0,1/0,1/0],l=[-1/0,-1/0,-1/0],u=e.glyph,c=e.color,f=e.size,d=e.angle,p=e.lineColor,h=-1,m=0,v=0,g=0;if(r.length){g=r.length;e:for(var y=0;y<g;++y){for(var b=r[y],x=0;x<3;++x)if(isNaN(b[x])||!isFinite(b[x]))continue e;var _=O(u,y,a),w=_.mesh,T=_.lines,k=_.bounds;m+=3*w.cells.length,v+=2*T.edges.length}}var C=m+v,E=o.mallocFloat(3*C),M=o.mallocFloat(4*C),A=o.mallocFloat(2*C),S=o.mallocUint32(C);if(C>0){var P=0,R=m,L=[0,0,0,1],D=[0,0,0,1],I=Array.isArray(c)&&Array.isArray(c[0]),z=Array.isArray(p)&&Array.isArray(p[0]);e:for(var y=0;y<g;++y){h+=1;for(var b=r[y],x=0;x<3;++x){if(isNaN(b[x])||!isFinite(b[x]))continue e;l[x]=Math.max(l[x],b[x]),s[x]=Math.min(s[x],b[x])}var _=O(u,y,a),w=_.mesh,T=_.lines,k=_.bounds,j=_.visible;if(j)if(Array.isArray(c)){if(3===(N=I?y<c.length?c[y]:[0,0,0,0]:c).length){for(var x=0;x<3;++x)L[x]=N[x];L[3]=1}else if(4===N.length)for(var x=0;x<4;++x)L[x]=N[x]}else L[0]=L[1]=L[2]=0,L[3]=1;else L=[1,1,1,0];if(j)if(Array.isArray(p)){var N;if(3===(N=z?y<p.length?p[y]:[0,0,0,0]:p).length){for(var x=0;x<3;++x)D[x]=N[x];D[x]=1}else if(4===N.length)for(var x=0;x<4;++x)D[x]=N[x]}else D[0]=D[1]=D[2]=0,D[3]=1;else D=[1,1,1,0];var F=.5;j?Array.isArray(f)?F=y<f.length?+f[y]:12:f?F=+f:this.useOrtho&&(F=12):F=0;var B=0;Array.isArray(d)?B=y<d.length?+d[y]:0:d&&(B=+d);for(var V=Math.cos(B),U=Math.sin(B),b=r[y],x=0;x<3;++x)l[x]=Math.max(l[x],b[x]),s[x]=Math.min(s[x],b[x]);for(var G=[i[0],i[1]],x=0;x<2;++x)i[x]>0?G[x]*=1-k[0][x]:i[x]<0&&(G[x]*=1+k[1][x]);for(var H=w.cells||[],W=w.positions||[],x=0;x<H.length;++x)for(var q=H[x],Y=0;Y<3;++Y){for(var X=0;X<3;++X)E[3*P+X]=b[X];for(var X=0;X<4;++X)M[4*P+X]=L[X];S[P]=h;var Z=W[q[Y]];A[2*P]=F*(V*Z[0]-U*Z[1]+G[0]),A[2*P+1]=F*(U*Z[0]+V*Z[1]+G[1]),P+=1}for(var H=T.edges,W=T.positions,x=0;x<H.length;++x)for(var q=H[x],Y=0;Y<2;++Y){for(var X=0;X<3;++X)E[3*R+X]=b[X];for(var X=0;X<4;++X)M[4*R+X]=D[X];S[R]=h;var Z=W[q[Y]];A[2*R]=F*(V*Z[0]-U*Z[1]+G[0]),A[2*R+1]=F*(U*Z[0]+V*Z[1]+G[1]),R+=1}}}this.bounds=[s,l],this.points=r,this.pointCount=r.length,this.vertexCount=m,this.lineVertexCount=v,this.pointBuffer.update(E),this.colorBuffer.update(M),this.glyphBuffer.update(A),this.idBuffer.update(S),o.free(E),o.free(M),o.free(A),o.free(S)},m.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},{"./lib/get-simple-string":281,"./lib/glyphs":282,"./lib/shaders":283,"gl-buffer":230,"gl-mat4/multiply":256,"gl-vao":310,"is-string-blank":406,"typedarray-pool":522}],285:[function(e,t,n){"use strict";var r=e("glslify");n.boxVertex=r(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 vertex;\n\nuniform vec2 cornerA, cornerB;\n\nvoid main() {\n  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);\n}\n"]),n.boxFragment=r(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor = color;\n}\n"])},{glslify:392}],286:[function(e,t,n){"use strict";var r=e("gl-shader"),a=e("gl-buffer"),i=e("./lib/shaders");function o(e,t,n){this.plot=e,this.boxBuffer=t,this.boxShader=n,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}t.exports=function(e,t){var n=e.gl,s=a(n,[0,0,0,1,1,0,1,1]),l=r(n,i.boxVertex,i.boxFragment),u=new o(e,s,l);return u.update(t),e.addOverlay(u),u};var s=o.prototype;s.draw=function(){if(this.enabled){var e=this.plot,t=this.selectBox,n=this.borderWidth,r=(this.innerFill,this.innerColor),a=(this.outerFill,this.outerColor),i=this.borderColor,o=e.box,s=e.screenBox,l=e.dataBox,u=e.viewBox,c=e.pixelRatio,f=(t[0]-l[0])*(u[2]-u[0])/(l[2]-l[0])+u[0],d=(t[1]-l[1])*(u[3]-u[1])/(l[3]-l[1])+u[1],p=(t[2]-l[0])*(u[2]-u[0])/(l[2]-l[0])+u[0],h=(t[3]-l[1])*(u[3]-u[1])/(l[3]-l[1])+u[1];if(f=Math.max(f,u[0]),d=Math.max(d,u[1]),p=Math.min(p,u[2]),h=Math.min(h,u[3]),!(p<f||h<d)){o.bind();var m=s[2]-s[0],v=s[3]-s[1];if(this.outerFill&&(o.drawBox(0,0,m,d,a),o.drawBox(0,d,f,h,a),o.drawBox(0,h,m,v,a),o.drawBox(p,d,m,h,a)),this.innerFill&&o.drawBox(f,d,p,h,r),n>0){var g=n*c;o.drawBox(f-g,d-g,p+g,d+g,i),o.drawBox(f-g,h-g,p+g,h+g,i),o.drawBox(f-g,d-g,f+g,h+g,i),o.drawBox(p-g,d-g,p+g,h+g,i)}}}},s.update=function(e){e=e||{},this.innerFill=!!e.innerFill,this.outerFill=!!e.outerFill,this.innerColor=(e.innerColor||[0,0,0,.5]).slice(),this.outerColor=(e.outerColor||[0,0,0,.5]).slice(),this.borderColor=(e.borderColor||[0,0,0,1]).slice(),this.borderWidth=e.borderWidth||0,this.selectBox=(e.selectBox||this.selectBox).slice()},s.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)}},{"./lib/shaders":285,"gl-buffer":230,"gl-shader":288}],287:[function(e,t,n){"use strict";t.exports=function(e,t){var n=r(e,t),i=a.mallocUint8(t[0]*t[1]*4);return new l(e,n,i)};var r=e("gl-fbo"),a=e("typedarray-pool"),i=e("ndarray"),o=e("bit-twiddle").nextPow2,s=e("cwise/lib/wrapper")({args:["array",{offset:[0,0,1],array:0},{offset:[0,0,2],array:0},{offset:[0,0,3],array:0},"scalar","scalar","index"],pre:{body:"{this_closestD2=1e8,this_closestX=-1,this_closestY=-1}",args:[],thisVars:["this_closestD2","this_closestX","this_closestY"],localVars:[]},body:{body:"{if(_inline_16_arg0_<255||_inline_16_arg1_<255||_inline_16_arg2_<255||_inline_16_arg3_<255){var _inline_16_l=_inline_16_arg4_-_inline_16_arg6_[0],_inline_16_a=_inline_16_arg5_-_inline_16_arg6_[1],_inline_16_f=_inline_16_l*_inline_16_l+_inline_16_a*_inline_16_a;_inline_16_f<this_closestD2&&(this_closestD2=_inline_16_f,this_closestX=_inline_16_arg6_[0],this_closestY=_inline_16_arg6_[1])}}",args:[{name:"_inline_16_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_16_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_16_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_16_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_16_arg4_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_16_arg5_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_16_arg6_",lvalue:!1,rvalue:!0,count:4}],thisVars:["this_closestD2","this_closestX","this_closestY"],localVars:["_inline_16_a","_inline_16_f","_inline_16_l"]},post:{body:"{return[this_closestX,this_closestY,this_closestD2]}",args:[],thisVars:["this_closestD2","this_closestX","this_closestY"],localVars:[]},debug:!1,funcName:"cwise",blockSize:64});function l(e,t,n){this.gl=e,this.fbo=t,this.buffer=n,this._readTimeout=null;var r=this;this._readCallback=function(){r.gl&&(t.bind(),e.readPixels(0,0,t.shape[0],t.shape[1],e.RGBA,e.UNSIGNED_BYTE,r.buffer),r._readTimeout=null)}}var u=l.prototype;Object.defineProperty(u,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(e){if(this.gl){this.fbo.shape=e;var t=this.fbo.shape[0],n=this.fbo.shape[1];if(n*t*4>this.buffer.length){a.free(this.buffer);for(var r=this.buffer=a.mallocUint8(o(n*t*4)),i=0;i<n*t*4;++i)r[i]=255}return e}}}),u.begin=function(){var e=this.gl;this.shape,e&&(this.fbo.bind(),e.clearColor(1,1,1,1),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT))},u.end=function(){var e=this.gl;e&&(e.bindFramebuffer(e.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},u.query=function(e,t,n){if(!this.gl)return null;var r=this.fbo.shape.slice();e|=0,t|=0,"number"!=typeof n&&(n=1);var a=0|Math.min(Math.max(e-n,0),r[0]),o=0|Math.min(Math.max(e+n,0),r[0]),l=0|Math.min(Math.max(t-n,0),r[1]),u=0|Math.min(Math.max(t+n,0),r[1]);if(o<=a||u<=l)return null;var c=[o-a,u-l],f=i(this.buffer,[c[0],c[1],4],[4,4*r[0],1],4*(a+r[0]*l)),d=s(f.hi(c[0],c[1],1),n,n),p=d[0],h=d[1];if(p<0||Math.pow(this.radius,2)<d[2])return null;var m=f.get(p,h,0),v=f.get(p,h,1),g=f.get(p,h,2),y=f.get(p,h,3);return new function(e,t,n,r,a){this.coord=[e,t],this.id=n,this.value=r,this.distance=a}(p+a|0,h+l|0,m,[v,g,y],Math.sqrt(d[2]))},u.dispose=function(){this.gl&&(this.fbo.dispose(),a.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},{"bit-twiddle":80,"cwise/lib/wrapper":137,"gl-fbo":239,ndarray:433,"typedarray-pool":522}],288:[function(e,t,n){"use strict";var r=e("./lib/create-uniforms"),a=e("./lib/create-attributes"),i=e("./lib/reflect"),o=e("./lib/shader-cache"),s=e("./lib/runtime-reflect"),l=e("./lib/GLError");function u(e){this.gl=e,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var c=u.prototype;function f(e,t){return e.name<t.name?-1:1}c.bind=function(){var e;this.program||this._relink();var t=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),n=this.gl.lastAttribCount;if(t>n)for(e=n;e<t;e++)this.gl.enableVertexAttribArray(e);else if(n>t)for(e=t;e<n;e++)this.gl.disableVertexAttribArray(e);this.gl.lastAttribCount=t,this.gl.useProgram(this.program)},c.dispose=function(){for(var e=this.gl.lastAttribCount,t=0;t<e;t++)this.gl.disableVertexAttribArray(t);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},c.update=function(e,t,n,u){if(!t||1===arguments.length){var c=e;e=c.vertex,t=c.fragment,n=c.uniforms,u=c.attributes}var d=this,p=d.gl,h=d._vref;d._vref=o.shader(p,p.VERTEX_SHADER,e),h&&h.dispose(),d.vertShader=d._vref.shader;var m=this._fref;if(d._fref=o.shader(p,p.FRAGMENT_SHADER,t),m&&m.dispose(),d.fragShader=d._fref.shader,!n||!u){var v=p.createProgram();if(p.attachShader(v,d.fragShader),p.attachShader(v,d.vertShader),p.linkProgram(v),!p.getProgramParameter(v,p.LINK_STATUS)){var g=p.getProgramInfoLog(v);throw new l(g,"Error linking program:"+g)}n=n||s.uniforms(p,v),u=u||s.attributes(p,v),p.deleteProgram(v)}(u=u.slice()).sort(f);var y,b=[],x=[],_=[];for(y=0;y<u.length;++y){var w=u[y];if(w.type.indexOf("mat")>=0){for(var T=0|w.type.charAt(w.type.length-1),k=new Array(T),C=0;C<T;++C)k[C]=_.length,x.push(w.name+"["+C+"]"),"number"==typeof w.location?_.push(w.location+C):Array.isArray(w.location)&&w.location.length===T&&"number"==typeof w.location[C]?_.push(0|w.location[C]):_.push(-1);b.push({name:w.name,type:w.type,locations:k})}else b.push({name:w.name,type:w.type,locations:[_.length]}),x.push(w.name),"number"==typeof w.location?_.push(0|w.location):_.push(-1)}var E=0;for(y=0;y<_.length;++y)if(_[y]<0){for(;_.indexOf(E)>=0;)E+=1;_[y]=E}var M=new Array(n.length);function A(){d.program=o.program(p,d._vref,d._fref,x,_);for(var e=0;e<n.length;++e)M[e]=p.getUniformLocation(d.program,n[e].name)}A(),d._relink=A,d.types={uniforms:i(n),attributes:i(u)},d.attributes=a(p,d,b,_),Object.defineProperty(d,"uniforms",r(p,d,n,M))},t.exports=function(e,t,n,r,a){var i=new u(e);return i.update(t,n,r,a),i}},{"./lib/GLError":289,"./lib/create-attributes":290,"./lib/create-uniforms":291,"./lib/reflect":292,"./lib/runtime-reflect":293,"./lib/shader-cache":294}],289:[function(e,t,n){function r(e,t,n){this.shortMessage=t||"",this.longMessage=n||"",this.rawError=e||"",this.message="gl-shader: "+(t||e||"")+(n?"\n"+n:""),this.stack=(new Error).stack}r.prototype=new Error,r.prototype.name="GLError",r.prototype.constructor=r,t.exports=r},{}],290:[function(e,t,n){"use strict";t.exports=function(e,t,n,a){for(var i={},l=0,u=n.length;l<u;++l){var c=n[l],f=c.name,d=c.type,p=c.locations;switch(d){case"bool":case"int":case"float":o(e,t,p[0],a,1,i,f);break;default:if(d.indexOf("vec")>=0){var h=d.charCodeAt(d.length-1)-48;if(h<2||h>4)throw new r("","Invalid data type for attribute "+f+": "+d);o(e,t,p[0],a,h,i,f)}else{if(!(d.indexOf("mat")>=0))throw new r("","Unknown data type for attribute "+f+": "+d);var h=d.charCodeAt(d.length-1)-48;if(h<2||h>4)throw new r("","Invalid data type for attribute "+f+": "+d);s(e,t,p,a,h,i,f)}}}return i};var r=e("./GLError");function a(e,t,n,r,a,i){this._gl=e,this._wrapper=t,this._index=n,this._locations=r,this._dimension=a,this._constFunc=i}var i=a.prototype;function o(e,t,n,r,i,o,s){for(var l=["gl","v"],u=[],c=0;c<i;++c)l.push("x"+c),u.push("x"+c);l.push("if(x0.length===void 0){return gl.vertexAttrib"+i+"f(v,"+u.join()+")}else{return gl.vertexAttrib"+i+"fv(v,x0)}");var f=Function.apply(null,l),d=new a(e,t,n,r,i,f);Object.defineProperty(o,s,{set:function(t){return e.disableVertexAttribArray(r[n]),f(e,r[n],t),t},get:function(){return d},enumerable:!0})}function s(e,t,n,r,a,i,s){for(var l=new Array(a),u=new Array(a),c=0;c<a;++c)o(e,t,n[c],r,a,l,c),u[c]=l[c];Object.defineProperty(l,"location",{set:function(e){if(Array.isArray(e))for(var t=0;t<a;++t)u[t].location=e[t];else for(var t=0;t<a;++t)u[t].location=e+t;return e},get:function(){for(var e=new Array(a),t=0;t<a;++t)e[t]=r[n[t]];return e},enumerable:!0}),l.pointer=function(t,i,o,s){t=t||e.FLOAT,i=!!i,o=o||a*a,s=s||0;for(var l=0;l<a;++l){var u=r[n[l]];e.vertexAttribPointer(u,a,t,i,o,s+l*a),e.enableVertexAttribArray(u)}};var f=new Array(a),d=e["vertexAttrib"+a+"fv"];Object.defineProperty(i,s,{set:function(t){for(var i=0;i<a;++i){var o=r[n[i]];if(e.disableVertexAttribArray(o),Array.isArray(t[0]))d.call(e,o,t[i]);else{for(var s=0;s<a;++s)f[s]=t[a*i+s];d.call(e,o,f)}}return t},get:function(){return l},enumerable:!0})}i.pointer=function(e,t,n,r){var a=this._gl,i=this._locations[this._index];a.vertexAttribPointer(i,this._dimension,e||a.FLOAT,!!t,n||0,r||0),a.enableVertexAttribArray(i)},i.set=function(e,t,n,r){return this._constFunc(this._locations[this._index],e,t,n,r)},Object.defineProperty(i,"location",{get:function(){return this._locations[this._index]},set:function(e){return e!==this._locations[this._index]&&(this._locations[this._index]=0|e,this._wrapper.program=null),0|e}})},{"./GLError":289}],291:[function(e,t,n){"use strict";var r=e("./reflect"),a=e("./GLError");function i(e){var t=new Function("y","return function(){return y}");return t(e)}function o(e,t){for(var n=new Array(e),r=0;r<e;++r)n[r]=t;return n}t.exports=function(e,t,n,s){function l(e,t,n){switch(n){case"bool":case"int":case"sampler2D":case"samplerCube":return"gl.uniform1i(locations["+t+"],obj"+e+")";case"float":return"gl.uniform1f(locations["+t+"],obj"+e+")";default:var r=n.indexOf("vec");if(!(0<=r&&r<=1&&n.length===4+r)){if(0===n.indexOf("mat")&&4===n.length){var i=n.charCodeAt(n.length-1)-48;if(i<2||i>4)throw new a("","Invalid uniform dimension type for matrix "+name+": "+n);return"gl.uniformMatrix"+i+"fv(locations["+t+"],false,obj"+e+")"}throw new a("","Unknown uniform data type for "+name+": "+n)}var i=n.charCodeAt(n.length-1)-48;if(i<2||i>4)throw new a("","Invalid data type");switch(n.charAt(0)){case"b":case"i":return"gl.uniform"+i+"iv(locations["+t+"],obj"+e+")";case"v":return"gl.uniform"+i+"fv(locations["+t+"],obj"+e+")";default:throw new a("","Unrecognized data type for vector "+name+": "+n)}}}function u(t){for(var r=["return function updateProperty(obj){"],a=function e(t,n){if("object"!=typeof n)return[[t,n]];var r=[];for(var a in n){var i=n[a],o=t;parseInt(a)+""===a?o+="["+a+"]":o+="."+a,"object"==typeof i?r.push.apply(r,e(o,i)):r.push([o,i])}return r}("",t),i=0;i<a.length;++i){var o=a[i],u=o[0],c=o[1];s[c]&&r.push(l(u,c,n[c].type))}r.push("return obj}");var f=new Function("gl","locations",r.join("\n"));return f(e,s)}function c(r,l,c){if("object"==typeof c){var d=f(c);Object.defineProperty(r,l,{get:i(d),set:u(c),enumerable:!0,configurable:!1})}else s[c]?Object.defineProperty(r,l,{get:function(n){return new Function("gl","wrapper","locations","return function(){return gl.getUniform(wrapper.program,locations["+n+"])}")(e,t,s)}(c),set:u(c),enumerable:!0,configurable:!1}):r[l]=function(e){switch(e){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var t=e.indexOf("vec");if(0<=t&&t<=1&&e.length===4+t){var n=e.charCodeAt(e.length-1)-48;if(n<2||n>4)throw new a("","Invalid data type");return"b"===e.charAt(0)?o(n,!1):o(n,0)}if(0===e.indexOf("mat")&&4===e.length){var n=e.charCodeAt(e.length-1)-48;if(n<2||n>4)throw new a("","Invalid uniform dimension type for matrix "+name+": "+e);return o(n*n,0)}throw new a("","Unknown uniform data type for "+name+": "+e)}}(n[c].type)}function f(e){var t;if(Array.isArray(e)){t=new Array(e.length);for(var n=0;n<e.length;++n)c(t,n,e[n])}else for(var r in t={},e)c(t,r,e[r]);return t}var d=r(n,!0);return{get:i(f(d)),set:u(d),enumerable:!0,configurable:!0}}},{"./GLError":289,"./reflect":292}],292:[function(e,t,n){"use strict";t.exports=function(e,t){for(var n={},r=0;r<e.length;++r)for(var a=e[r].name,i=a.split("."),o=n,s=0;s<i.length;++s){var l=i[s].split("[");if(l.length>1){l[0]in o||(o[l[0]]=[]),o=o[l[0]];for(var u=1;u<l.length;++u){var c=parseInt(l[u]);u<l.length-1||s<i.length-1?(c in o||(u<l.length-1?o[c]=[]:o[c]={}),o=o[c]):o[c]=t?r:e[r].type}}else s<i.length-1?(l[0]in o||(o[l[0]]={}),o=o[l[0]]):o[l[0]]=t?r:e[r].type}return n}},{}],293:[function(e,t,n){"use strict";n.uniforms=function(e,t){for(var n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),r=[],a=0;a<n;++a){var o=e.getActiveUniform(t,a);if(o){var s=i(e,o.type);if(o.size>1)for(var l=0;l<o.size;++l)r.push({name:o.name.replace("[0]","["+l+"]"),type:s});else r.push({name:o.name,type:s})}}return r},n.attributes=function(e,t){for(var n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),r=[],a=0;a<n;++a){var o=e.getActiveAttrib(t,a);o&&r.push({name:o.name,type:i(e,o.type)})}return r};var r={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},a=null;function i(e,t){if(!a){var n=Object.keys(r);a={};for(var i=0;i<n.length;++i){var o=n[i];a[e[o]]=r[o]}}return a[t]}},{}],294:[function(e,t,n){"use strict";n.shader=function(e,t,n){return f(e).getShaderReference(t,n)},n.program=function(e,t,n,r,a){return f(e).getProgram(t,n,r,a)};var r=e("./GLError"),a=e("gl-format-compiler-error"),i="undefined"==typeof WeakMap?e("weakmap-shim"):WeakMap,o=new i,s=0;function l(e,t,n,r,a,i,o){this.id=e,this.src=t,this.type=n,this.shader=r,this.count=i,this.programs=[],this.cache=o}function u(e){this.gl=e,this.shaders=[{},{}],this.programs={}}l.prototype.dispose=function(){if(0==--this.count){for(var e=this.cache,t=e.gl,n=this.programs,r=0,a=n.length;r<a;++r){var i=e.programs[n[r]];i&&(delete e.programs[r],t.deleteProgram(i))}t.deleteShader(this.shader),delete e.shaders[this.type===t.FRAGMENT_SHADER|0][this.src]}};var c=u.prototype;function f(e){var t=o.get(e);return t||(t=new u(e),o.set(e,t)),t}c.getShaderReference=function(e,t){var n=this.gl,i=this.shaders[e===n.FRAGMENT_SHADER|0],o=i[t];if(o&&n.isShader(o.shader))o.count+=1;else{var u=function(e,t,n){var i=e.createShader(t);if(e.shaderSource(i,n),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS)){var o=e.getShaderInfoLog(i);try{var s=a(o,n,t)}catch(e){throw console.warn("Failed to format compiler error: "+e),new r(o,"Error compiling shader:\n"+o)}throw new r(o,s.short,s.long)}return i}(n,e,t);o=i[t]=new l(s++,t,e,u,[],1,this)}return o},c.getProgram=function(e,t,n,a){var i=[e.id,t.id,n.join(":"),a.join(":")].join("@"),o=this.programs[i];return o&&this.gl.isProgram(o)||(this.programs[i]=o=function(e,t,n,a,i){var o=e.createProgram();e.attachShader(o,t),e.attachShader(o,n);for(var s=0;s<a.length;++s)e.bindAttribLocation(o,i[s],a[s]);if(e.linkProgram(o),!e.getProgramParameter(o,e.LINK_STATUS)){var l=e.getProgramInfoLog(o);throw new r(l,"Error linking program: "+l)}return o}(this.gl,e.shader,t.shader,n,a),e.programs.push(i),t.programs.push(i)),o}},{"./GLError":289,"gl-format-compiler-error":240,"weakmap-shim":532}],295:[function(e,t,n){"use strict";function r(e){this.plot=e,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}t.exports=function(e,t){var n=new r(e);return n.update(t),e.addOverlay(n),n};var a=r.prototype;a.update=function(e){e=e||{},this.enable=(e.enable||[!0,!0,!1,!1]).slice(),this.width=(e.width||[1,1,1,1]).slice(),this.color=(e.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(e){return e.slice()}),this.center=(e.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},a.draw=function(){var e=this.enable,t=this.width,n=this.color,r=this.center,a=this.plot,i=a.line,o=a.dataBox,s=a.viewBox;if(i.bind(),o[0]<=r[0]&&r[0]<=o[2]&&o[1]<=r[1]&&r[1]<=o[3]){var l=s[0]+(r[0]-o[0])/(o[2]-o[0])*(s[2]-s[0]),u=s[1]+(r[1]-o[1])/(o[3]-o[1])*(s[3]-s[1]);e[0]&&i.drawLine(l,u,s[0],u,t[0],n[0]),e[1]&&i.drawLine(l,u,l,s[1],t[1],n[1]),e[2]&&i.drawLine(l,u,s[2],u,t[2],n[2]),e[3]&&i.drawLine(l,u,l,s[3],t[3],n[3])}},a.dispose=function(){this.plot.removeOverlay(this)}},{}],296:[function(e,t,n){"use strict";var r=e("glslify"),a=e("gl-shader"),i=r(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, color;\nattribute float weight;\n\nuniform mat4 model, view, projection;\nuniform vec3 coordinates[3];\nuniform vec4 colors[3];\nuniform vec2 screenShape;\nuniform float lineWidth;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vertexPosition = mix(coordinates[0],\n    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));\n\n  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);\n  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;\n  vec2 delta = weight * clipOffset * screenShape;\n  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;\n\n  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);\n  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];\n}\n"]),o=r(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n  gl_FragColor = fragColor;\n}"]);t.exports=function(e){return a(e,i,o,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},{"gl-shader":288,glslify:392}],297:[function(e,t,n){"use strict";var r=e("gl-buffer"),a=e("gl-vao"),i=e("./shaders/index");t.exports=function(e,t){var n=[];function o(e,t,r,a,i,o){var s=[e,t,r,0,0,0,1];s[a+3]=1,s[a]=i,n.push.apply(n,s),s[6]=-1,n.push.apply(n,s),s[a]=o,n.push.apply(n,s),n.push.apply(n,s),s[6]=1,n.push.apply(n,s),s[a]=i,n.push.apply(n,s)}o(0,0,0,0,0,1),o(0,0,0,1,0,1),o(0,0,0,2,0,1),o(1,0,0,1,-1,1),o(1,0,0,2,-1,1),o(0,1,0,0,-1,1),o(0,1,0,2,-1,1),o(0,0,1,0,-1,1),o(0,0,1,1,-1,1);var l=r(e,n),u=a(e,[{type:e.FLOAT,buffer:l,size:3,offset:0,stride:28},{type:e.FLOAT,buffer:l,size:3,offset:12,stride:28},{type:e.FLOAT,buffer:l,size:1,offset:24,stride:28}]),c=i(e);c.attributes.position.location=0,c.attributes.color.location=1,c.attributes.weight.location=2;var f=new s(e,l,u,c);return f.update(t),f};var o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function s(e,t,n,r){this.gl=e,this.buffer=t,this.vao=n,this.shader=r,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var l=s.prototype,u=[0,0,0],c=[0,0,0],f=[0,0];l.isTransparent=function(){return!1},l.drawTransparent=function(e){},l.draw=function(e){var t=this.gl,n=this.vao,r=this.shader;n.bind(),r.bind();var a,i=e.model||o,s=e.view||o,l=e.projection||o;this.axes&&(a=this.axes.lastCubeProps.axis);for(var d=u,p=c,h=0;h<3;++h)a&&a[h]<0?(d[h]=this.bounds[0][h],p[h]=this.bounds[1][h]):(d[h]=this.bounds[1][h],p[h]=this.bounds[0][h]);f[0]=t.drawingBufferWidth,f[1]=t.drawingBufferHeight,r.uniforms.model=i,r.uniforms.view=s,r.uniforms.projection=l,r.uniforms.coordinates=[this.position,d,p],r.uniforms.colors=this.colors,r.uniforms.screenShape=f;for(var h=0;h<3;++h)r.uniforms.lineWidth=this.lineWidth[h]*this.pixelRatio,this.enabled[h]&&(n.draw(t.TRIANGLES,6,6*h),this.drawSides[h]&&n.draw(t.TRIANGLES,12,18+12*h));n.unbind()},l.update=function(e){e&&("bounds"in e&&(this.bounds=e.bounds),"position"in e&&(this.position=e.position),"lineWidth"in e&&(this.lineWidth=e.lineWidth),"colors"in e&&(this.colors=e.colors),"enabled"in e&&(this.enabled=e.enabled),"drawSides"in e&&(this.drawSides=e.drawSides))},l.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},{"./shaders/index":296,"gl-buffer":230,"gl-vao":310}],298:[function(e,t,n){arguments[4][232][0].apply(n,arguments)},{barycentric:61,dup:232,"polytope-closest-point/lib/closest_point_2d.js":464}],299:[function(e,t,n){var r=e("glslify"),a=r(["precision mediump float;\n#define GLSLIFY 1\n\nfloat inverse(float m) {\n  return 1.0 / m;\n}\n\nmat2 inverse(mat2 m) {\n  return mat2(m[1][1],-m[0][1],\n             -m[1][0], m[0][0]) / (m[0][0]*m[1][1] - m[0][1]*m[1][0]);\n}\n\nmat3 inverse(mat3 m) {\n  float a00 = m[0][0], a01 = m[0][1], a02 = m[0][2];\n  float a10 = m[1][0], a11 = m[1][1], a12 = m[1][2];\n  float a20 = m[2][0], a21 = m[2][1], a22 = m[2][2];\n\n  float b01 = a22 * a11 - a12 * a21;\n  float b11 = -a22 * a10 + a12 * a20;\n  float b21 = a21 * a10 - a11 * a20;\n\n  float det = a00 * b01 + a01 * b11 + a02 * b21;\n\n  return mat3(b01, (-a22 * a01 + a02 * a21), (a12 * a01 - a02 * a11),\n              b11, (a22 * a00 - a02 * a20), (-a12 * a00 + a02 * a10),\n              b21, (-a21 * a00 + a01 * a20), (a11 * a00 - a01 * a10)) / det;\n}\n\nmat4 inverse(mat4 m) {\n  float\n      a00 = m[0][0], a01 = m[0][1], a02 = m[0][2], a03 = m[0][3],\n      a10 = m[1][0], a11 = m[1][1], a12 = m[1][2], a13 = m[1][3],\n      a20 = m[2][0], a21 = m[2][1], a22 = m[2][2], a23 = m[2][3],\n      a30 = m[3][0], a31 = m[3][1], a32 = m[3][2], a33 = m[3][3],\n\n      b00 = a00 * a11 - a01 * a10,\n      b01 = a00 * a12 - a02 * a10,\n      b02 = a00 * a13 - a03 * a10,\n      b03 = a01 * a12 - a02 * a11,\n      b04 = a01 * a13 - a03 * a11,\n      b05 = a02 * a13 - a03 * a12,\n      b06 = a20 * a31 - a21 * a30,\n      b07 = a20 * a32 - a22 * a30,\n      b08 = a20 * a33 - a23 * a30,\n      b09 = a21 * a32 - a22 * a31,\n      b10 = a21 * a33 - a23 * a31,\n      b11 = a22 * a33 - a23 * a32,\n\n      det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  return mat4(\n      a11 * b11 - a12 * b10 + a13 * b09,\n      a02 * b10 - a01 * b11 - a03 * b09,\n      a31 * b05 - a32 * b04 + a33 * b03,\n      a22 * b04 - a21 * b05 - a23 * b03,\n      a12 * b08 - a10 * b11 - a13 * b07,\n      a00 * b11 - a02 * b08 + a03 * b07,\n      a32 * b02 - a30 * b05 - a33 * b01,\n      a20 * b05 - a22 * b02 + a23 * b01,\n      a10 * b10 - a11 * b08 + a13 * b06,\n      a01 * b08 - a00 * b10 - a03 * b06,\n      a30 * b04 - a31 * b02 + a33 * b00,\n      a21 * b02 - a20 * b04 - a23 * b00,\n      a11 * b07 - a10 * b09 - a12 * b06,\n      a00 * b09 - a01 * b07 + a02 * b06,\n      a31 * b01 - a30 * b03 - a32 * b00,\n      a20 * b03 - a21 * b01 + a22 * b00) / det;\n}\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\nuniform float tubeScale;\n\nuniform mat4 model\n           , view\n           , projection;\nuniform vec3 eyePosition\n           , lightPosition;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data\n           , f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n  normal = normalize(normal * inverse(mat3(model)));\n\n  gl_Position      = projection * view * tubePosition;\n  f_color          = color;\n  f_normal         = normal;\n  f_data           = tubePosition.xyz;\n  f_position       = position.xyz;\n  f_eyeDirection   = eyePosition   - tubePosition.xyz;\n  f_lightDirection = lightPosition - tubePosition.xyz;\n  f_uv             = uv;\n}\n"]),i=r(["precision mediump float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness\n            , fresnel\n            , kambient\n            , kdiffuse\n            , kspecular\n            , opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data\n           , f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(!gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = cookTorranceSpecular(L, V, N, roughness, fresnel);\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor =  texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}"]),o=r(["precision mediump float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float tubeScale;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  gl_Position = projection * view * tubePosition;\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),s=r(["precision mediump float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);n.meshShader={vertex:a,fragment:i,attributes:[{name:"position",type:"vec4"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},n.pickShader={vertex:o,fragment:s,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},{glslify:392}],300:[function(e,t,n){"use strict";var r=e("gl-shader"),a=e("gl-buffer"),i=e("gl-vao"),o=e("gl-texture2d"),s=e("normals"),l=e("gl-mat4/multiply"),u=e("gl-mat4/invert"),c=e("ndarray"),f=e("colormap"),d=e("simplicial-complex-contour"),p=e("typedarray-pool"),h=e("./shaders"),m=(e("./closest-point"),h.meshShader),v=h.pickShader,g=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function y(e,t,n,r,a,i,o,s,l,u,c,f,d,p,h,m,v,y,b,x,_,w,T,k,C,E,M,A){this.gl=e,this.cells=[],this.positions=[],this.intensity=[],this.texture=t,this.dirty=!0,this.triShader=n,this.lineShader=r,this.pointShader=a,this.pickShader=i,this.pointPickShader=o,this.contourShader=s,this.trianglePositions=l,this.triangleVectors=u,this.triangleColors=f,this.triangleNormals=p,this.triangleUVs=d,this.triangleIds=c,this.triangleVAO=h,this.triangleCount=0,this.lineWidth=1,this.edgePositions=m,this.edgeColors=y,this.edgeUVs=b,this.edgeIds=v,this.edgeVAO=x,this.edgeCount=0,this.pointPositions=_,this.pointColors=T,this.pointUVs=k,this.pointSizes=C,this.pointIds=w,this.pointVAO=E,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=M,this.contourVAO=A,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!1,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.tubeScale=1,this._model=g,this._view=g,this._projection=g,this._resolution=[1,1]}var b=y.prototype;function x(e){var t=r(e,v.vertex,v.fragment,null,v.attributes);return t.attributes.position.location=0,t.attributes.id.location=1,t.attributes.vector.location=5,t}b.isOpaque=function(){return this.opacity>=1},b.isTransparent=function(){return this.opacity<1},b.pickSlots=1,b.setPickBase=function(e){this.pickId=e},b.highlight=function(e){if(e&&this.contourEnable){for(var t=d(this.cells,this.intensity,e.intensity),n=t.cells,r=t.vertexIds,a=t.vertexWeights,i=n.length,o=p.mallocFloat32(6*i),s=0,l=0;l<i;++l)for(var u=n[l],c=0;c<2;++c){var f=u[0];2===u.length&&(f=u[c]);for(var h=r[f][0],m=r[f][1],v=a[f],g=1-v,y=this.positions[h],b=this.positions[m],x=0;x<3;++x)o[s++]=v*y[x]+g*b[x]}this.contourCount=s/3|0,this.contourPositions.update(o.subarray(0,s)),p.free(o)}else this.contourCount=0},b.update=function(e){e=e||{};var t=this.gl;this.dirty=!0,"contourEnable"in e&&(this.contourEnable=e.contourEnable),"contourColor"in e&&(this.contourColor=e.contourColor),"lineWidth"in e&&(this.lineWidth=e.lineWidth),"lightPosition"in e&&(this.lightPosition=e.lightPosition),"opacity"in e&&(this.opacity=e.opacity),"ambient"in e&&(this.ambientLight=e.ambient),"diffuse"in e&&(this.diffuseLight=e.diffuse),"specular"in e&&(this.specularLight=e.specular),"roughness"in e&&(this.roughness=e.roughness),"fresnel"in e&&(this.fresnel=e.fresnel),e.texture?(this.texture.dispose(),this.texture=o(t,e.texture)):e.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=t.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=t.LINEAR,this.texture.setPixels(function(e){for(var t=f({colormap:e,nshades:256,format:"rgba"}),n=new Uint8Array(1024),r=0;r<256;++r){for(var a=t[r],i=0;i<3;++i)n[4*r+i]=a[i];n[4*r+3]=255*a[3]}return c(n,[256,256,4],[4,0,1])}(e.colormap)),this.texture.generateMipmap());var n=e.cells,r=e.positions,a=e.vectors;if(r&&n&&a){void 0!==e.tubeScale&&(this.tubeScale=e.tubeScale);var i=[],l=[],u=[],d=[],p=[],h=[],m=[],v=[],g=[],y=[],b=[],x=[],_=[],w=[],T=[];this.cells=n,this.positions=r,this.vectors=a;var k=e.vertexNormals,C=e.cellNormals,E=void 0===e.vertexNormalsEpsilon?1e-6:e.vertexNormalsEpsilon,M=void 0===e.faceNormalsEpsilon?1e-6:e.faceNormalsEpsilon;e.useFacetNormals&&!C&&(C=s.faceNormals(n,r,M)),C||k||(k=s.vertexNormals(n,r,E));var A=e.vertexColors,S=e.cellColors,O=e.meshColor||[1,1,1,1],P=e.vertexUVs,R=e.vertexIntensity,L=e.cellUVs,D=e.cellIntensity,I=1/0,z=-1/0;if(!P&&!L)if(R)if(e.vertexIntensityBounds)I=+e.vertexIntensityBounds[0],z=+e.vertexIntensityBounds[1];else for(var j=0;j<R.length;++j){var N=R[j];I=Math.min(I,N),z=Math.max(z,N)}else if(D)for(var j=0;j<D.length;++j){var N=D[j];I=Math.min(I,N),z=Math.max(z,N)}else for(var j=0;j<r.length;++j){var N=r[j][2];I=Math.min(I,N),z=Math.max(z,N)}this.intensity=R||(D?function(e,t,n){for(var r=new Array(t),a=0;a<t;++a)r[a]=0;for(var i=e.length,a=0;a<i;++a)for(var o=e[a],s=0;s<o.length;++s)r[o[s]]=n[a];return r}(n,r.length,D):function(e){for(var t=e.length,n=new Array(t),r=0;r<t;++r)n[r]=e[r][2];return n}(r));var F=e.pointSizes,B=e.pointSize||1;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var j=0;j<r.length;++j)for(var V=r[j],U=0;U<3;++U)!isNaN(V[U])&&isFinite(V[U])&&(this.bounds[0][U]=Math.min(this.bounds[0][U],V[U]),this.bounds[1][U]=Math.max(this.bounds[1][U],V[U]));var G=0,H=0,W=0;e:for(var j=0;j<n.length;++j){var q=n[j];switch(q.length){case 1:for(var Y=q[0],V=r[Y],U=0;U<3;++U)if(isNaN(V[U])||!isFinite(V[U]))continue e;b.push(V[0],V[1],V[2],V[3]),3===(Z=A?A[Y]:S?S[j]:O).length?x.push(Z[0],Z[1],Z[2],1):x.push(Z[0],Z[1],Z[2],Z[3]),$=P?P[Y]:R?[(R[Y]-I)/(z-I),0]:L?L[j]:D?[(D[j]-I)/(z-I),0]:[(V[2]-I)/(z-I),0],_.push($[0],$[1]),F?w.push(F[Y]):w.push(B),T.push(j),W+=1;break;case 2:for(var U=0;U<2;++U)for(var Y=q[U],V=r[Y],X=0;X<3;++X)if(isNaN(V[X])||!isFinite(V[X]))continue e;for(var U=0;U<2;++U){var Y=q[U],V=r[Y];m.push(V[0],V[1],V[2]),3===(Z=A?A[Y]:S?S[j]:O).length?v.push(Z[0],Z[1],Z[2],1):v.push(Z[0],Z[1],Z[2],Z[3]),$=P?P[Y]:R?[(R[Y]-I)/(z-I),0]:L?L[j]:D?[(D[j]-I)/(z-I),0]:[(V[2]-I)/(z-I),0],g.push($[0],$[1]),y.push(j)}H+=1;break;case 3:for(var U=0;U<3;++U)for(var Y=q[U],V=r[Y],X=0;X<3;++X)if(isNaN(V[X])||!isFinite(V[X]))continue e;for(var U=0;U<3;++U){var Y=q[U],V=r[Y];i.push(V[0],V[1],V[2],V[3]);var Z,$,K,J=a[Y];l.push(J[0],J[1],J[2],J[3]),3===(Z=A?A[Y]:S?S[j]:O).length?u.push(Z[0],Z[1],Z[2],1):u.push(Z[0],Z[1],Z[2],Z[3]),$=P?P[Y]:R?[(R[Y]-I)/(z-I),0]:L?L[j]:D?[(D[j]-I)/(z-I),0]:[(V[2]-I)/(z-I),0],p.push($[0],$[1]),K=k?k[Y]:C[j],d.push(K[0],K[1],K[2]),h.push(j)}G+=1}}this.pointCount=W,this.edgeCount=H,this.triangleCount=G,this.pointPositions.update(b),this.pointColors.update(x),this.pointUVs.update(_),this.pointSizes.update(w),this.pointIds.update(new Uint32Array(T)),this.edgePositions.update(m),this.edgeColors.update(v),this.edgeUVs.update(g),this.edgeIds.update(new Uint32Array(y)),this.trianglePositions.update(i),this.triangleVectors.update(l),this.triangleColors.update(u),this.triangleUVs.update(p),this.triangleNormals.update(d),this.triangleIds.update(new Uint32Array(h))}},b.drawTransparent=b.draw=function(e){e=e||{};for(var t=this.gl,n=e.model||g,r=e.view||g,a=e.projection||g,i=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],o=0;o<3;++o)i[0][o]=Math.max(i[0][o],this.clipBounds[0][o]),i[1][o]=Math.min(i[1][o],this.clipBounds[1][o]);var s={model:n,view:r,projection:a,clipBounds:i,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,contourColor:this.contourColor,texture:0};this.texture.bind(0);var c=new Array(16);l(c,s.view,s.model),l(c,s.projection,c),u(c,c);for(var o=0;o<3;++o)s.eyePosition[o]=c[12+o]/c[15];for(var f=c[15],o=0;o<3;++o)f+=this.lightPosition[o]*c[4*o+3];for(var o=0;o<3;++o){for(var d=c[12+o],p=0;p<3;++p)d+=c[4*p+o]*this.lightPosition[p];s.lightPosition[o]=d/f}if(this.triangleCount>0){var h=this.triShader;h.bind(),h.uniforms=s,this.triangleVAO.bind(),t.drawArrays(t.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}if(this.edgeCount>0&&this.lineWidth>0){var h=this.lineShader;h.bind(),h.uniforms=s,this.edgeVAO.bind(),t.lineWidth(this.lineWidth),t.drawArrays(t.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()}if(this.pointCount>0){var h=this.pointShader;h.bind(),h.uniforms=s,this.pointVAO.bind(),t.drawArrays(t.POINTS,0,this.pointCount),this.pointVAO.unbind()}if(this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0){var h=this.contourShader;h.bind(),h.uniforms=s,this.contourVAO.bind(),t.drawArrays(t.LINES,0,this.contourCount),this.contourVAO.unbind()}},b.drawPick=function(e){e=e||{};for(var t=this.gl,n=e.model||g,r=e.view||g,a=e.projection||g,i=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],o=0;o<3;++o)i[0][o]=Math.max(i[0][o],this.clipBounds[0][o]),i[1][o]=Math.min(i[1][o],this.clipBounds[1][o]);this._model=[].slice.call(n),this._view=[].slice.call(r),this._projection=[].slice.call(a),this._resolution=[t.drawingBufferWidth,t.drawingBufferHeight];var s={model:n,view:r,projection:a,clipBounds:i,tubeScale:this.tubeScale,pickId:this.pickId/255},l=this.pickShader;if(l.bind(),l.uniforms=s,this.triangleCount>0&&(this.triangleVAO.bind(),t.drawArrays(t.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),t.lineWidth(this.lineWidth),t.drawArrays(t.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0){var l=this.pointPickShader;l.bind(),l.uniforms=s,this.pointVAO.bind(),t.drawArrays(t.POINTS,0,this.pointCount),this.pointVAO.unbind()}},b.pick=function(e){if(!e)return null;if(e.id!==this.pickId)return null;var t=e.value[0]+256*e.value[1]+65536*e.value[2],n=this.cells[t],r=this.positions[n[1]].slice(0,3),a=this.intensity[n[1]],i=this.vectors[n[1]].slice(0,3),o=this.vectors[n[1]][3];return{index:t,position:r,intensity:a,velocity:i,divergence:o,dataCoordinate:r}},b.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose()},t.exports=function(e,t){1===arguments.length&&(e=(t=e).gl);var n=t.triShader||function(e){var t=r(e,m.vertex,m.fragment,null,m.attributes);return t.attributes.position.location=0,t.attributes.color.location=2,t.attributes.uv.location=3,t.attributes.vector.location=5,t}(e),s=x(e),l=o(e,c(new Uint8Array([255,255,255,255]),[1,1,4]));l.generateMipmap(),l.minFilter=e.LINEAR_MIPMAP_LINEAR,l.magFilter=e.LINEAR;var u=a(e),f=a(e),d=a(e),p=a(e),h=a(e),v=a(e),g=i(e,[{buffer:u,type:e.FLOAT,size:4},{buffer:v,type:e.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:d,type:e.FLOAT,size:4},{buffer:p,type:e.FLOAT,size:2},{buffer:h,type:e.FLOAT,size:3},{buffer:f,type:e.FLOAT,size:4}]),b=a(e),_=a(e),w=a(e),T=a(e),k=i(e,[{buffer:b,type:e.FLOAT,size:3},{buffer:T,type:e.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:_,type:e.FLOAT,size:4},{buffer:w,type:e.FLOAT,size:2}]),C=a(e),E=a(e),M=a(e),A=a(e),S=a(e),O=i(e,[{buffer:C,type:e.FLOAT,size:3},{buffer:S,type:e.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:E,type:e.FLOAT,size:4},{buffer:M,type:e.FLOAT,size:2},{buffer:A,type:e.FLOAT,size:1}]),P=a(e),R=i(e,[{buffer:P,type:e.FLOAT,size:3}]),L=new y(e,l,n,null,null,s,null,null,u,f,v,d,p,h,g,b,T,_,w,k,C,S,E,M,A,O,P,R);return L.update(t),L}},{"./closest-point":298,"./shaders":299,colormap:114,"gl-buffer":230,"gl-mat4/invert":254,"gl-mat4/multiply":256,"gl-shader":288,"gl-texture2d":305,"gl-vao":310,ndarray:433,normals:436,"simplicial-complex-contour":494,"typedarray-pool":522}],301:[function(e,t,n){"use strict";var r=e("gl-vec3"),a=e("gl-vec4"),i=function(e,t,n,i){for(var o=0,s=0;s<e.length;s++)for(var l=e[s].velocities,u=0;u<l.length;u++){var c=r.length(l[u]);c>o&&(o=c)}for(var f=e.map(function(e){return function(e,t,n,i){var o,s,l,u=e.points,c=e.velocities,f=e.divergences;r.set(r.create(),0,1,0),r.create(),r.create(),r.create();for(var d=[],p=[],h=[],m=[],v=[],g=[],y=0,b=0,x=a.create(),_=a.create(),w=0;w<u.length;w++){o=u[w],s=c[w],l=f[w],0===t&&(l=.05*n),b=r.length(s)/i,x=a.create(),r.copy(x,s),x[3]=l;for(var T=0;T<8;T++)v[T]=[o[0],o[1],o[2],T];if(m.length>0)for(var T=0;T<8;T++){var k=(T+1)%8;d.push(m[T],v[T],v[k],v[k],m[k],m[T]),h.push(_,x,x,x,_,_),g.push(y,b,b,b,y,y),p.push([d.length-6,d.length-5,d.length-4],[d.length-3,d.length-2,d.length-1])}var C=m;m=v,v=C,C=_,_=x,x=C,C=y,y=b,b=C}return{positions:d,cells:p,vectors:h,vertexIntensity:g}}(e,n,i,o)}),d=[],p=[],h=[],m=[],s=0;s<f.length;s++){var v=f[s],g=d.length;d=d.concat(v.positions),h=h.concat(v.vectors),m=m.concat(v.vertexIntensity);for(var u=0;u<v.cells.length;u++){var y=v.cells[u],b=[];p.push(b);for(var x=0;x<y.length;x++)b.push(y[x]+g)}}return{positions:d,cells:p,vectors:h,vertexIntensity:m,colormap:t}},o=function(e,t){var n=r.create(),a=1e-4;r.add(n,e,[a,0,0]);var i=this.getVelocity(n);r.subtract(i,i,t),r.scale(i,i,1e4),r.add(n,e,[0,a,0]);var o=this.getVelocity(n);r.subtract(o,o,t),r.scale(o,o,1e4),r.add(n,e,[0,0,a]);var s=this.getVelocity(n);return r.subtract(s,s,t),r.scale(s,s,1e4),r.add(n,i,o),r.add(n,n,s),n},s=function(e){var t=d(e,this.vectors,this.meshgrid,this.clampBorders);return t},l=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r===t)return n;if(r>t)return n-1}return n},u=r.create(),c=r.create(),f=function(e,t,n){return e<t?t:e>n?n:e},d=function(e,t,n,a){var i=e[0],o=e[1],s=e[2],d=n[0].length,p=n[1].length,h=n[2].length,m=l(n[0],i),v=l(n[1],o),g=l(n[2],s),y=m+1,b=v+1,x=g+1;if(n[0][m]===i&&(y=m),n[1][v]===o&&(b=v),n[2][g]===s&&(x=g),a&&(m=f(m,0,d-1),y=f(y,0,d-1),v=f(v,0,p-1),b=f(b,0,p-1),g=f(g,0,h-1),x=f(x,0,h-1)),m<0||v<0||g<0||y>=d||b>=p||x>=h)return r.create();var _=(i-n[0][m])/(n[0][y]-n[0][m]),w=(o-n[1][v])/(n[1][b]-n[1][v]),T=(s-n[2][g])/(n[2][x]-n[2][g]);(_<0||_>1||isNaN(_))&&(_=0),(w<0||w>1||isNaN(w))&&(w=0),(T<0||T>1||isNaN(T))&&(T=0);var k=g*d*p,C=x*d*p,E=v*d,M=b*d,A=m,S=y,O=t[E+k+A],P=t[E+k+S],R=t[M+k+A],L=t[M+k+S],D=t[E+C+A],I=t[E+C+S],z=t[M+C+A],j=t[M+C+S],N=r.create();return r.lerp(N,O,P,_),r.lerp(u,R,L,_),r.lerp(N,N,u,w),r.lerp(u,D,I,_),r.lerp(c,z,j,_),r.lerp(u,u,c,w),r.lerp(N,N,u,T),N},p=function(e){var t=1/0;e.sort(function(e,t){return e-t});for(var n=1;n<e.length;n++){var r=Math.abs(e[n]-e[n-1]);r<t&&(t=r)}return t};t.exports=function(e,t){var n=e.startingPositions,a=e.maxLength||1e3,l=e.tubeSize||1,u=e.absoluteTubeSize;e.getDivergence||(e.getDivergence=o),e.getVelocity||(e.getVelocity=s),void 0===e.clampBorders&&(e.clampBorders=!0);var c=[],f=t[0][0],d=t[0][1],h=t[0][2],m=t[1][0],v=t[1][1],g=t[1][2],y=function(e,t){var n=t[0],r=t[1],a=t[2];return n>=f&&n<=m&&r>=d&&r<=v&&a>=h&&a<=g},b=r.distance(t[0],t[1]),x=10*b/a,_=x*x,w=1,T=0;r.create(),n.length>=2&&(w=function(e){for(var t=[],n=[],r=[],a={},i={},o={},s=0;s<e.length;s++){var l=e[s],u=l[0],c=l[1],f=l[2];a[u]||(t.push(u),a[u]=!0),i[c]||(n.push(c),i[c]=!0),o[f]||(r.push(f),o[f]=!0)}var d=p(t),h=p(n),m=p(r),v=Math.min(d,h,m);return isFinite(v)?v:1}(n));for(var k=0;k<n.length;k++){var C=r.create();r.copy(C,n[k]);var E=[C],M=[],A=e.getVelocity(C),S=C;M.push(A);var O=[],P=e.getDivergence(C,A),R=r.length(P);R>T&&!isNaN(R)&&isFinite(R)&&(T=R),O.push(R),c.push({points:E,velocities:M,divergences:O});for(var L=0;L<100*a&&E.length<a&&y(0,C);){L++;var D=r.clone(A),I=r.squaredLength(D);if(0===I)break;if(I>_&&r.scale(D,D,x/Math.sqrt(I)),r.add(D,D,C),A=e.getVelocity(D),r.squaredDistance(S,D)-_>-1e-4*_){E.push(D),S=D,M.push(A);var P=e.getDivergence(D,A),R=r.length(P);R>T&&!isNaN(R)&&isFinite(R)&&(T=R),O.push(R)}C=D}}for(var k=0;k<O.length;k++){var R=O[k];!isNaN(R)&&isFinite(R)||(O[k]=T)}var z=i(c,e.colormap,T,w);return u?z.tubeScale=u:(0===T&&(T=1),z.tubeScale=.5*l*w/T),z},t.exports.createTubeMesh=e("./lib/tubemesh")},{"./lib/tubemesh":300,"gl-vec3":329,"gl-vec4":365}],302:[function(e,t,n){var r=e("gl-shader"),a=e("glslify"),i=a(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute vec3 f;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 lightPosition, eyePosition;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  worldCoordinate = vec3(uv.zw, f.x);\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n  vec4 clipPosition = projection * view * worldPosition;\n  gl_Position = clipPosition;\n  kill = f.y;\n  value = f.z;\n  planeCoordinate = uv.xy;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * worldPosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  lightDirection = lightPosition - cameraCoordinate.xyz;\n  eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);\n}\n"]),o=a(["precision mediump float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat beckmannSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness) {\n  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 lowerBound, upperBound;\nuniform float contourTint;\nuniform vec4 contourColor;\nuniform sampler2D colormap;\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform float vertexColor;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  if ((kill > 0.0) ||\n      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;\n\n  vec3 N = normalize(surfaceNormal);\n  vec3 V = normalize(eyeDirection);\n  vec3 L = normalize(lightDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  //decide how to interpolate color  in vertex or in fragment\n  vec4 surfaceColor = step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) + step(.5, vertexColor) * vColor;\n\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;\n}\n"]),s=a(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute float f;\n\nuniform mat3 permutation;\nuniform mat4 model, view, projection;\nuniform float height, zOffset;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 dataCoordinate = permutation * vec3(uv.xy, height);\n  vec4 worldPosition = model * vec4(dataCoordinate, 1.0);\n\n  vec4 clipPosition = projection * view * worldPosition;\n  clipPosition.z = clipPosition.z + zOffset;\n\n  gl_Position = clipPosition;\n  value = f;\n  kill = -1.0;\n  worldCoordinate = dataCoordinate;\n  planeCoordinate = uv.zw;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Don't do lighting for contours\n  surfaceNormal   = vec3(1,0,0);\n  eyeDirection    = vec3(0,1,0);\n  lightDirection  = vec3(0,0,1);\n}\n"]),l=a(["precision mediump float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec2 shape;\nuniform vec3 clipBounds[2];\nuniform float pickId;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 surfaceNormal;\n\nvec2 splitFloat(float v) {\n  float vh = 255.0 * v;\n  float upper = floor(vh);\n  float lower = fract(vh);\n  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);\n}\n\nvoid main() {\n  if ((kill > 0.0) ||\n      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;\n\n  vec2 ux = splitFloat(planeCoordinate.x / shape.x);\n  vec2 uy = splitFloat(planeCoordinate.y / shape.y);\n  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));\n}\n"]);n.createShader=function(e){var t=r(e,i,o,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return t.attributes.uv.location=0,t.attributes.f.location=1,t.attributes.normal.location=2,t},n.createPickShader=function(e){var t=r(e,i,l,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return t.attributes.uv.location=0,t.attributes.f.location=1,t.attributes.normal.location=2,t},n.createContourShader=function(e){var t=r(e,s,o,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return t.attributes.uv.location=0,t.attributes.f.location=1,t},n.createPickContourShader=function(e){var t=r(e,s,l,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return t.attributes.uv.location=0,t.attributes.f.location=1,t}},{"gl-shader":288,glslify:392}],303:[function(e,t,n){"use strict";t.exports=function(e){var t=e.gl,n=y(t),r=x(t),s=b(t),l=_(t),u=a(t),c=i(t,[{buffer:u,size:4,stride:w,offset:0},{buffer:u,size:3,stride:w,offset:16},{buffer:u,size:3,stride:w,offset:28}]),f=a(t),d=i(t,[{buffer:f,size:4,stride:20,offset:0},{buffer:f,size:1,stride:20,offset:16}]),p=a(t),h=i(t,[{buffer:p,size:2,type:t.FLOAT}]),m=o(t,1,E,t.RGBA,t.UNSIGNED_BYTE);m.minFilter=t.LINEAR,m.magFilter=t.LINEAR;var v=new M(t,[0,0],[[0,0,0],[0,0,0]],n,r,u,c,m,s,l,f,d,p,h),g={levels:[[],[],[]]};for(var T in e)g[T]=e[T];return g.colormap=g.colormap||"jet",v.update(g),v};var r=e("bit-twiddle"),a=e("gl-buffer"),i=e("gl-vao"),o=e("gl-texture2d"),s=e("typedarray-pool"),l=e("colormap"),u=e("ndarray-ops"),c=e("ndarray-pack"),f=e("ndarray"),d=e("surface-nets"),p=e("gl-mat4/multiply"),h=e("gl-mat4/invert"),m=e("binary-search-bounds"),v=e("ndarray-gradient"),g=e("./lib/shaders"),y=g.createShader,b=g.createContourShader,x=g.createPickShader,_=g.createPickContourShader,w=40,T=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],k=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],C=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];!function(){for(var e=0;e<3;++e){var t=C[e],n=(e+1)%3,r=(e+2)%3;t[n+0]=1,t[r+3]=1,t[e+6]=1}}();var E=256;function M(e,t,n,r,a,i,o,l,u,c,d,p,h,m){this.gl=e,this.shape=t,this.bounds=n,this.intensityBounds=[],this._shader=r,this._pickShader=a,this._coordinateBuffer=i,this._vao=o,this._colorMap=l,this._contourShader=u,this._contourPickShader=c,this._contourBuffer=d,this._contourVAO=p,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new function(e,t,n,r,a){this.position=e,this.index=t,this.uv=n,this.level=r,this.dataCoordinate=a}([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=h,this._dynamicVAO=m,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[f(s.mallocFloat(1024),[0,0]),f(s.mallocFloat(1024),[0,0]),f(s.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}var A=M.prototype;A.isTransparent=function(){return this.opacity<1},A.isOpaque=function(){if(this.opacity>=1)return!0;for(var e=0;e<3;++e)if(this._contourCounts[e].length>0||this._dynamicCounts[e]>0)return!0;return!1},A.pickSlots=1,A.setPickBase=function(e){this.pickId=e};var S=[0,0,0],O={showSurface:!1,showContour:!1,projections:[T.slice(),T.slice(),T.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function P(e,t){var n,r,a,i=t.axes&&t.axes.lastCubeProps.axis||S,o=t.showSurface,s=t.showContour;for(n=0;n<3;++n)for(o=o||t.surfaceProject[n],r=0;r<3;++r)s=s||t.contourProject[n][r];for(n=0;n<3;++n){var l=O.projections[n];for(r=0;r<16;++r)l[r]=0;for(r=0;r<4;++r)l[5*r]=1;l[5*n]=0,l[12+n]=t.axesBounds[+(i[n]>0)][n],p(l,e.model,l);var u=O.clipBounds[n];for(a=0;a<2;++a)for(r=0;r<3;++r)u[a][r]=e.clipBounds[a][r];u[0][n]=-1e8,u[1][n]=1e8}return O.showSurface=o,O.showContour=s,O}var R={model:T,view:T,projection:T,inverseModel:T.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},L=T.slice(),D=[1,0,0,0,1,0,0,0,1];function I(e,t){e=e||{};var n=this.gl;n.disable(n.CULL_FACE),this._colorMap.bind(0);var r=R;r.model=e.model||T,r.view=e.view||T,r.projection=e.projection||T,r.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],r.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],r.contourColor=this.contourColor[0],r.inverseModel=h(r.inverseModel,r.model);for(var a=0;a<2;++a)for(var i=r.clipBounds[a],o=0;o<3;++o)i[o]=Math.min(Math.max(this.clipBounds[a][o],-1e8),1e8);r.kambient=this.ambientLight,r.kdiffuse=this.diffuseLight,r.kspecular=this.specularLight,r.roughness=this.roughness,r.fresnel=this.fresnel,r.opacity=this.opacity,r.height=0,r.permutation=D,r.vertexColor=this.vertexColor;var s=L;for(p(s,r.view,r.model),p(s,r.projection,s),h(s,s),a=0;a<3;++a)r.eyePosition[a]=s[12+a]/s[15];var l=s[15];for(a=0;a<3;++a)l+=this.lightPosition[a]*s[4*a+3];for(a=0;a<3;++a){var u=s[12+a];for(o=0;o<3;++o)u+=s[4*o+a]*this.lightPosition[o];r.lightPosition[a]=u/l}var c=P(r,this);if(c.showSurface&&t===this.opacity<1){for(this._shader.bind(),this._shader.uniforms=r,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(n.TRIANGLES,this._vertexCount),a=0;a<3;++a)this.surfaceProject[a]&&this.vertexCount&&(this._shader.uniforms.model=c.projections[a],this._shader.uniforms.clipBounds=c.clipBounds[a],this._vao.draw(n.TRIANGLES,this._vertexCount));this._vao.unbind()}if(c.showContour&&!t){var f=this._contourShader;r.kambient=1,r.kdiffuse=0,r.kspecular=0,r.opacity=1,f.bind(),f.uniforms=r;var d=this._contourVAO;for(d.bind(),a=0;a<3;++a)for(f.uniforms.permutation=C[a],n.lineWidth(this.contourWidth[a]),o=0;o<this.contourLevels[a].length;++o)o===this.highlightLevel[a]?(f.uniforms.contourColor=this.highlightColor[a],f.uniforms.contourTint=this.highlightTint[a]):0!==o&&o-1!==this.highlightLevel[a]||(f.uniforms.contourColor=this.contourColor[a],f.uniforms.contourTint=this.contourTint[a]),this._contourCounts[a][o]&&(f.uniforms.height=this.contourLevels[a][o],d.draw(n.LINES,this._contourCounts[a][o],this._contourOffsets[a][o]));for(a=0;a<3;++a)for(f.uniforms.model=c.projections[a],f.uniforms.clipBounds=c.clipBounds[a],o=0;o<3;++o)if(this.contourProject[a][o]){f.uniforms.permutation=C[o],n.lineWidth(this.contourWidth[o]);for(var m=0;m<this.contourLevels[o].length;++m)m===this.highlightLevel[o]?(f.uniforms.contourColor=this.highlightColor[o],f.uniforms.contourTint=this.highlightTint[o]):0!==m&&m-1!==this.highlightLevel[o]||(f.uniforms.contourColor=this.contourColor[o],f.uniforms.contourTint=this.contourTint[o]),f.uniforms.height=this.contourLevels[o][m],d.draw(n.LINES,this._contourCounts[o][m],this._contourOffsets[o][m])}for(d.unbind(),(d=this._dynamicVAO).bind(),a=0;a<3;++a)if(0!==this._dynamicCounts[a])for(f.uniforms.model=r.model,f.uniforms.clipBounds=r.clipBounds,f.uniforms.permutation=C[a],n.lineWidth(this.dynamicWidth[a]),f.uniforms.contourColor=this.dynamicColor[a],f.uniforms.contourTint=this.dynamicTint[a],f.uniforms.height=this.dynamicLevel[a],d.draw(n.LINES,this._dynamicCounts[a],this._dynamicOffsets[a]),o=0;o<3;++o)this.contourProject[o][a]&&(f.uniforms.model=c.projections[o],f.uniforms.clipBounds=c.clipBounds[o],d.draw(n.LINES,this._dynamicCounts[a],this._dynamicOffsets[a]));d.unbind()}}A.draw=function(e){return I.call(this,e,!1)},A.drawTransparent=function(e){return I.call(this,e,!0)};var z={model:T,view:T,projection:T,inverseModel:T,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};function j(e,t){var n=t.shape.slice(),r=e.shape.slice();u.assign(e.lo(1,1).hi(n[0],n[1]),t),u.assign(e.lo(1).hi(n[0],1),t.hi(n[0],1)),u.assign(e.lo(1,r[1]-1).hi(n[0],1),t.lo(0,n[1]-1).hi(n[0],1)),u.assign(e.lo(0,1).hi(1,n[1]),t.hi(1)),u.assign(e.lo(r[0]-1,1).hi(1,n[1]),t.lo(n[0]-1)),e.set(0,0,t.get(0,0)),e.set(0,r[1]-1,t.get(0,n[1]-1)),e.set(r[0]-1,0,t.get(n[0]-1,0)),e.set(r[0]-1,r[1]-1,t.get(n[0]-1,n[1]-1))}function N(e,t){return Array.isArray(e)?[t(e[0]),t(e[1]),t(e[2])]:[t(e),t(e),t(e)]}function F(e){return Array.isArray(e)?3===e.length?[e[0],e[1],e[2],1]:[e[0],e[1],e[2],e[3]]:[0,0,0,1]}function B(e){if(Array.isArray(e)){if(Array.isArray(e))return[F(e[0]),F(e[1]),F(e[2])];var t=F(e);return[t.slice(),t.slice(),t.slice()]}}A.drawPick=function(e){e=e||{};var t=this.gl;t.disable(t.CULL_FACE);var n=z;n.model=e.model||T,n.view=e.view||T,n.projection=e.projection||T,n.shape=this._field[2].shape,n.pickId=this.pickId/255,n.lowerBound=this.bounds[0],n.upperBound=this.bounds[1],n.permutation=D;for(var r=0;r<2;++r)for(var a=n.clipBounds[r],i=0;i<3;++i)a[i]=Math.min(Math.max(this.clipBounds[r][i],-1e8),1e8);var o=P(n,this);if(o.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=n,this._vao.bind(),this._vao.draw(t.TRIANGLES,this._vertexCount),r=0;r<3;++r)this.surfaceProject[r]&&(this._pickShader.uniforms.model=o.projections[r],this._pickShader.uniforms.clipBounds=o.clipBounds[r],this._vao.draw(t.TRIANGLES,this._vertexCount));this._vao.unbind()}if(o.showContour){var s=this._contourPickShader;s.bind(),s.uniforms=n;var l=this._contourVAO;for(l.bind(),i=0;i<3;++i)for(t.lineWidth(this.contourWidth[i]),s.uniforms.permutation=C[i],r=0;r<this.contourLevels[i].length;++r)this._contourCounts[i][r]&&(s.uniforms.height=this.contourLevels[i][r],l.draw(t.LINES,this._contourCounts[i][r],this._contourOffsets[i][r]));for(r=0;r<3;++r)for(s.uniforms.model=o.projections[r],s.uniforms.clipBounds=o.clipBounds[r],i=0;i<3;++i)if(this.contourProject[r][i]){s.uniforms.permutation=C[i],t.lineWidth(this.contourWidth[i]);for(var u=0;u<this.contourLevels[i].length;++u)this._contourCounts[i][u]&&(s.uniforms.height=this.contourLevels[i][u],l.draw(t.LINES,this._contourCounts[i][u],this._contourOffsets[i][u]))}l.unbind()}},A.pick=function(e){if(!e)return null;if(e.id!==this.pickId)return null;var t=this._field[2].shape,n=this._pickResult,r=t[0]*(e.value[0]+(e.value[2]>>4)/16)/255,a=Math.floor(r),i=r-a,o=t[1]*(e.value[1]+(15&e.value[2])/16)/255,s=Math.floor(o),l=o-s;a+=1,s+=1;var u=n.position;u[0]=u[1]=u[2]=0;for(var c=0;c<2;++c)for(var f=c?i:1-i,d=0;d<2;++d)for(var p=d?l:1-l,h=a+c,v=s+d,g=f*p,y=0;y<3;++y)u[y]+=this._field[y].get(h,v)*g;for(var b=this._pickResult.level,x=0;x<3;++x)if(b[x]=m.le(this.contourLevels[x],u[x]),b[x]<0)this.contourLevels[x].length>0&&(b[x]=0);else if(b[x]<this.contourLevels[x].length-1){var _=this.contourLevels[x][b[x]],w=this.contourLevels[x][b[x]+1];Math.abs(_-u[x])>Math.abs(w-u[x])&&(b[x]+=1)}for(n.index[0]=i<.5?a:a+1,n.index[1]=l<.5?s:s+1,n.uv[0]=r/t[0],n.uv[1]=o/t[1],y=0;y<3;++y)n.dataCoordinate[y]=this._field[y].get(n.index[0],n.index[1]);return n},A.update=function(e){e=e||{},this.dirty=!0,"contourWidth"in e&&(this.contourWidth=N(e.contourWidth,Number)),"showContour"in e&&(this.showContour=N(e.showContour,Boolean)),"showSurface"in e&&(this.showSurface=!!e.showSurface),"contourTint"in e&&(this.contourTint=N(e.contourTint,Boolean)),"contourColor"in e&&(this.contourColor=B(e.contourColor)),"contourProject"in e&&(this.contourProject=N(e.contourProject,function(e){return N(e,Boolean)})),"surfaceProject"in e&&(this.surfaceProject=e.surfaceProject),"dynamicColor"in e&&(this.dynamicColor=B(e.dynamicColor)),"dynamicTint"in e&&(this.dynamicTint=N(e.dynamicTint,Number)),"dynamicWidth"in e&&(this.dynamicWidth=N(e.dynamicWidth,Number)),"opacity"in e&&(this.opacity=e.opacity),"colorBounds"in e&&(this.colorBounds=e.colorBounds),"vertexColor"in e&&(this.vertexColor=e.vertexColor?1:0);var t=e.field||e.coords&&e.coords[2]||null,n=!1;if(t||(t=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in e||"coords"in e){var a=(t.shape[0]+2)*(t.shape[1]+2);a>this._field[2].data.length&&(s.freeFloat(this._field[2].data),this._field[2].data=s.mallocFloat(r.nextPow2(a))),this._field[2]=f(this._field[2].data,[t.shape[0]+2,t.shape[1]+2]),j(this._field[2],t),this.shape=t.shape.slice();for(var i=this.shape,o=0;o<2;++o)this._field[2].size>this._field[o].data.length&&(s.freeFloat(this._field[o].data),this._field[o].data=s.mallocFloat(this._field[2].size)),this._field[o]=f(this._field[o].data,[i[0]+2,i[1]+2]);if(e.coords){var p=e.coords;if(!Array.isArray(p)||3!==p.length)throw new Error("gl-surface: invalid coordinates for x/y");for(o=0;o<2;++o){var h=p[o];for(x=0;x<2;++x)if(h.shape[x]!==i[x])throw new Error("gl-surface: coords have incorrect shape");j(this._field[o],h)}}else if(e.ticks){var m=e.ticks;if(!Array.isArray(m)||2!==m.length)throw new Error("gl-surface: invalid ticks");for(o=0;o<2;++o){var g=m[o];if((Array.isArray(g)||g.length)&&(g=f(g)),g.shape[0]!==i[o])throw new Error("gl-surface: invalid tick length");var y=f(g.data,i);y.stride[o]=g.stride[0],y.stride[1^o]=0,j(this._field[o],y)}}else{for(o=0;o<2;++o){var b=[0,0];b[o]=1,this._field[o]=f(this._field[o].data,[i[0]+2,i[1]+2],b,0)}this._field[0].set(0,0,0);for(var x=0;x<i[0];++x)this._field[0].set(x+1,0,x);for(this._field[0].set(i[0]+1,0,i[0]-1),this._field[1].set(0,0,0),x=0;x<i[1];++x)this._field[1].set(0,x+1,x);this._field[1].set(0,i[1]+1,i[1]-1)}var _=this._field,w=f(s.mallocFloat(3*_[2].size*2),[3,i[0]+2,i[1]+2,2]);for(o=0;o<3;++o)v(w.pick(o),_[o],"mirror");var T=f(s.mallocFloat(3*_[2].size),[i[0]+2,i[1]+2,3]);for(o=0;o<i[0]+2;++o)for(x=0;x<i[1]+2;++x){var C=w.get(0,o,x,0),M=w.get(0,o,x,1),A=w.get(1,o,x,0),S=w.get(1,o,x,1),O=w.get(2,o,x,0),P=w.get(2,o,x,1),R=A*P-S*O,L=O*M-P*C,D=C*S-M*A,I=Math.sqrt(R*R+L*L+D*D);I<1e-8?(I=Math.max(Math.abs(R),Math.abs(L),Math.abs(D)))<1e-8?(D=1,L=R=0,I=1):I=1/I:I=1/Math.sqrt(I),T.set(o,x,0,R*I),T.set(o,x,1,L*I),T.set(o,x,2,D*I)}s.free(w.data);var z=[1/0,1/0,1/0],F=[-1/0,-1/0,-1/0],V=1/0,U=-1/0,G=(i[0]-1)*(i[1]-1)*6,H=s.mallocFloat(r.nextPow2(10*G)),W=0,q=0;for(o=0;o<i[0]-1;++o)e:for(x=0;x<i[1]-1;++x){for(var Y=0;Y<2;++Y)for(var X=0;X<2;++X)for(var Z=0;Z<3;++Z){var $=this._field[Z].get(1+o+Y,1+x+X);if(isNaN($)||!isFinite($))continue e}for(Z=0;Z<6;++Z){var K=o+k[Z][0],J=x+k[Z][1],Q=this._field[0].get(K+1,J+1),ee=this._field[1].get(K+1,J+1),te=$=this._field[2].get(K+1,J+1);R=T.get(K+1,J+1,0),L=T.get(K+1,J+1,1),D=T.get(K+1,J+1,2),e.intensity&&(te=e.intensity.get(K,J)),H[W++]=K,H[W++]=J,H[W++]=Q,H[W++]=ee,H[W++]=$,H[W++]=0,H[W++]=te,H[W++]=R,H[W++]=L,H[W++]=D,z[0]=Math.min(z[0],Q),z[1]=Math.min(z[1],ee),z[2]=Math.min(z[2],$),V=Math.min(V,te),F[0]=Math.max(F[0],Q),F[1]=Math.max(F[1],ee),F[2]=Math.max(F[2],$),U=Math.max(U,te),q+=1}}for(e.intensityBounds&&(V=+e.intensityBounds[0],U=+e.intensityBounds[1]),o=6;o<W;o+=10)H[o]=(H[o]-V)/(U-V);this._vertexCount=q,this._coordinateBuffer.update(H.subarray(0,W)),s.freeFloat(H),s.free(T.data),this.bounds=[z,F],this.intensity=e.intensity||this._field[2],this.intensityBounds[0]===V&&this.intensityBounds[1]===U||(n=!0),this.intensityBounds=[V,U]}if("levels"in e){var ne=e.levels;for(ne=Array.isArray(ne[0])?ne.slice():[[],[],ne],o=0;o<3;++o)ne[o]=ne[o].slice(),ne.sort(function(e,t){return e-t});e:for(o=0;o<3;++o){if(ne[o].length!==this.contourLevels[o].length){n=!0;break}for(x=0;x<ne[o].length;++x)if(ne[o][x]!==this.contourLevels[o][x]){n=!0;break e}}this.contourLevels=ne}if(n){_=this._field,i=this.shape;for(var re=[],ae=0;ae<3;++ae){ne=this.contourLevels[ae];var ie=[],oe=[],se=[0,0,0];for(o=0;o<ne.length;++o){var le=d(this._field[ae],ne[o]);ie.push(re.length/5|0),q=0;e:for(x=0;x<le.cells.length;++x){var ue=le.cells[x];for(Z=0;Z<2;++Z){var ce=le.positions[ue[Z]],fe=ce[0],de=0|Math.floor(fe),pe=fe-de,he=ce[1],me=0|Math.floor(he),ve=he-me,ge=!1;t:for(var ye=0;ye<3;++ye){se[ye]=0;var be=(ae+ye+1)%3;for(Y=0;Y<2;++Y){var xe=Y?pe:1-pe;for(K=0|Math.min(Math.max(de+Y,0),i[0]),X=0;X<2;++X){var _e=X?ve:1-ve;if(J=0|Math.min(Math.max(me+X,0),i[1]),$=ye<2?this._field[be].get(K,J):(this.intensity.get(K,J)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite($)||isNaN($)){ge=!0;break t}var we=xe*_e;se[ye]+=we*$}}}if(ge){if(Z>0){for(var Te=0;Te<5;++Te)re.pop();q-=1}continue e}re.push(se[0],se[1],ce[0],ce[1],se[2]),q+=1}}oe.push(q)}this._contourOffsets[ae]=ie,this._contourCounts[ae]=oe}var ke=s.mallocFloat(re.length);for(o=0;o<re.length;++o)ke[o]=re[o];this._contourBuffer.update(ke),s.freeFloat(ke)}e.colormap&&this._colorMap.setPixels(function(e){var t=c([l({colormap:e,nshades:E,format:"rgba"}).map(function(e){return[e[0],e[1],e[2],255*e[3]]})]);return u.divseq(t,255),t}(e.colormap))},A.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var e=0;e<3;++e)s.freeFloat(this._field[e].data)},A.highlight=function(e){if(!e)return this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],void(this.highlightLevel=[-1,-1,-1]);for(var t=0;t<3;++t)this.enableHighlight[t]?this.highlightLevel[t]=e.level[t]:this.highlightLevel[t]=-1;var n;if(n=this.snapToData?e.dataCoordinate:e.position,this.enableDynamic[0]&&n[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&n[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&n[2]!==this.dynamicLevel[2]){for(var r=0,a=this.shape,i=s.mallocFloat(12*a[0]*a[1]),o=0;o<3;++o)if(this.enableDynamic[o]){this.dynamicLevel[o]=n[o];var l=(o+1)%3,u=(o+2)%3,c=this._field[o],f=this._field[l],p=this._field[u],h=(this.intensity,d(c,n[o])),m=h.cells,v=h.positions;for(this._dynamicOffsets[o]=r,t=0;t<m.length;++t)for(var g=m[t],y=0;y<2;++y){var b=v[g[y]],x=+b[0],_=0|x,w=0|Math.min(_+1,a[0]),T=x-_,k=1-T,C=+b[1],E=0|C,M=0|Math.min(E+1,a[1]),A=C-E,S=1-A,O=k*S,P=k*A,R=T*S,L=T*A,D=O*f.get(_,E)+P*f.get(_,M)+R*f.get(w,E)+L*f.get(w,M),I=O*p.get(_,E)+P*p.get(_,M)+R*p.get(w,E)+L*p.get(w,M);if(isNaN(D)||isNaN(I)){y&&(r-=1);break}i[2*r+0]=D,i[2*r+1]=I,r+=1}this._dynamicCounts[o]=r-this._dynamicOffsets[o]}else this.dynamicLevel[o]=NaN,this._dynamicCounts[o]=0;this._dynamicBuffer.update(i.subarray(0,2*r)),s.freeFloat(i)}}},{"./lib/shaders":302,"binary-search-bounds":79,"bit-twiddle":80,colormap:114,"gl-buffer":230,"gl-mat4/invert":254,"gl-mat4/multiply":256,"gl-texture2d":305,"gl-vao":310,ndarray:433,"ndarray-gradient":424,"ndarray-ops":427,"ndarray-pack":428,"surface-nets":508,"typedarray-pool":522}],304:[function(e,t,n){"use strict";var r=e("css-font"),a=e("pick-by-alias"),i=e("regl"),o=e("gl-util/context"),s=e("es6-weak-map"),l=e("color-normalize"),u=e("font-atlas"),c=e("typedarray-pool"),f=e("parse-rect"),d=e("is-plain-obj"),p=e("parse-unit"),h=e("to-px"),m=e("detect-kerning"),v=e("object-assign"),g=e("font-measure"),y=e("flatten-vertex-data"),b=e("bit-twiddle"),x=b.nextPow2,_=new s,w=!1;if(document.body){var T=document.body.appendChild(document.createElement("div"));T.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(T).fontStretch&&(w=!0),document.body.removeChild(T)}var k=function(e){!function(e){return"function"==typeof e&&e._gl&&e.prop&&e.texture&&e.buffer}(e)?this.gl=o(e):(e={regl:e},this.gl=e.regl._gl),this.shader=_.get(this.gl),this.shader?this.regl=this.shader.regl:this.regl=e.regl||i({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),_.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(d(e)?e:{})};k.prototype.createShader=function(){var e=this.regl,t=e({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:e.prop("count"),offset:e.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:e.this("sizeBuffer")},width:{offset:0,stride:8,buffer:e.this("sizeBuffer")},char:e.this("charBuffer"),position:e.this("position")},uniforms:{atlasSize:function(e,t){return[t.atlas.width,t.atlas.height]},atlasDim:function(e,t){return[t.atlas.cols,t.atlas.rows]},atlas:function(e,t){return t.atlas.texture},charStep:function(e,t){return t.atlas.step},em:function(e,t){return t.atlas.em},color:e.prop("color"),opacity:e.prop("opacity"),viewport:e.this("viewportArray"),scale:e.this("scale"),align:e.prop("align"),baseline:e.prop("baseline"),translate:e.this("translate"),positionOffset:e.prop("positionOffset")},primitive:"points",viewport:e.this("viewport"),vert:"\n\t\t\tprecision highp float;\n\t\t\tattribute float width, charOffset, char;\n\t\t\tattribute vec2 position;\n\t\t\tuniform float fontSize, charStep, em, align, baseline;\n\t\t\tuniform vec4 viewport;\n\t\t\tuniform vec4 color;\n\t\t\tuniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvoid main () {\n\t\t\t\t"+(k.normalViewport?"":"vec2 positionOffset = vec2(positionOffset.x,- positionOffset.y);")+"\n\n\t\t\t\tvec2 offset = floor(em * (vec2(align + charOffset, baseline)\n\t\t\t\t\t+ positionOffset))\n\t\t\t\t\t/ (viewport.zw * scale.xy);\n\n\t\t\t\tvec2 position = (position + translate) * scale;\n\t\t\t\tposition += offset * scale;\n\n\t\t\t\t"+(k.normalViewport?"position.y = 1. - position.y;":"")+"\n\n\t\t\t\tcharCoord = position * viewport.zw + viewport.xy;\n\n\t\t\t\tgl_Position = vec4(position * 2. - 1., 0, 1);\n\n\t\t\t\tgl_PointSize = charStep;\n\n\t\t\t\tcharId.x = mod(char, atlasDim.x);\n\t\t\t\tcharId.y = floor(char / atlasDim.x);\n\n\t\t\t\tcharWidth = width * em;\n\n\t\t\t\tfontColor = color / 255.;\n\t\t\t}",frag:"\n\t\t\tprecision highp float;\n\t\t\tuniform sampler2D atlas;\n\t\t\tuniform float fontSize, charStep, opacity;\n\t\t\tuniform vec2 atlasSize;\n\t\t\tuniform vec4 viewport;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\n\t\t\tfloat lightness(vec4 color) {\n\t\t\t\treturn color.r * 0.299 + color.g * 0.587 + color.b * 0.114;\n\t\t\t}\n\n\t\t\tvoid main () {\n\t\t\t\tvec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;\n\t\t\t\tfloat halfCharStep = floor(charStep * .5 + .5);\n\n\t\t\t\t// invert y and shift by 1px (FF expecially needs that)\n\t\t\t\tuv.y = charStep - uv.y;\n\n\t\t\t\t// ignore points outside of character bounding box\n\t\t\t\tfloat halfCharWidth = ceil(charWidth * .5);\n\t\t\t\tif (floor(uv.x) > halfCharStep + halfCharWidth ||\n\t\t\t\t\tfloor(uv.x) < halfCharStep - halfCharWidth) return;\n\n\t\t\t\tuv += charId * charStep;\n\t\t\t\tuv = uv / atlasSize;\n\n\t\t\t\tvec4 color = fontColor;\n\t\t\t\tvec4 mask = texture2D(atlas, uv);\n\n\t\t\t\tfloat maskY = lightness(mask);\n\t\t\t\t// float colorY = lightness(color);\n\t\t\t\tcolor.a *= maskY;\n\t\t\t\tcolor.a *= opacity;\n\n\t\t\t\t// color.a += .1;\n\n\t\t\t\t// antialiasing, see yiq color space y-channel formula\n\t\t\t\t// color.rgb += (1. - color.rgb) * (1. - mask.rgb);\n\n\t\t\t\tgl_FragColor = color;\n\t\t\t}"});return{regl:e,draw:t,atlas:{}}},k.prototype.update=function(e){var t=this;if("string"==typeof e)e={text:e};else if(!e)return;null!=(e=a(e,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0)).opacity&&(Array.isArray(e.opacity)?this.opacity=e.opacity.map(function(e){return parseFloat(e)}):this.opacity=parseFloat(e.opacity)),null!=e.viewport&&(this.viewport=f(e.viewport),k.normalViewport&&(this.viewport.y=this.canvas.height-this.viewport.y-this.viewport.height),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),null==this.viewport&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),null!=e.kerning&&(this.kerning=e.kerning),null!=e.offset&&("number"==typeof e.offset&&(e.offset=[e.offset,0]),this.positionOffset=y(e.offset)),e.direction&&(this.direction=e.direction),e.range&&(this.range=e.range,this.scale=[1/(e.range[2]-e.range[0]),1/(e.range[3]-e.range[1])],this.translate=[-e.range[0],-e.range[1]]),e.scale&&(this.scale=e.scale),e.translate&&(this.translate=e.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),this.font.length||e.font||(e.font=k.baseFontSize+"px sans-serif");var n,i=!1,o=!1;if(e.font&&(Array.isArray(e.font)?e.font:[e.font]).forEach(function(e,n){if("string"==typeof e)try{e=r.parse(e)}catch(t){e=r.parse(k.baseFontSize+"px "+e)}else e=r.parse(r.stringify(e));var a=r.stringify({size:k.baseFontSize,family:e.family,stretch:w?e.stretch:void 0,variant:e.variant,weight:e.weight,style:e.style}),s=p(e.size),l=Math.round(s[0]*h(s[1]));if(l!==t.fontSize[n]&&(o=!0,t.fontSize[n]=l),!(t.font[n]&&a==t.font[n].baseString||(i=!0,t.font[n]=k.fonts[a],t.font[n]))){var u=e.family.join(", "),c=[e.style];e.style!=e.variant&&c.push(e.variant),e.variant!=e.weight&&c.push(e.weight),w&&e.weight!=e.stretch&&c.push(e.stretch),t.font[n]={baseString:a,family:u,weight:e.weight,stretch:e.stretch,style:e.style,variant:e.variant,width:{},kerning:{},metrics:g(u,{origin:"top",fontSize:k.baseFontSize,fontStyle:c.join(" ")})},k.fonts[a]=t.font[n]}}),(i||o)&&this.font.forEach(function(n,a){var i=r.stringify({size:t.fontSize[a],family:n.family,stretch:w?n.stretch:void 0,variant:n.variant,weight:n.weight,style:n.style});if(t.fontAtlas[a]=t.shader.atlas[i],!t.fontAtlas[a]){var o=n.metrics;t.shader.atlas[i]=t.fontAtlas[a]={fontString:i,step:2*Math.ceil(t.fontSize[a]*o.bottom*.5),em:t.fontSize[a],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:t.regl.texture()}}null==e.text&&(e.text=t.text)}),"string"==typeof e.text&&e.position&&e.position.length>2){for(var s=Array(.5*e.position.length),d=0;d<s.length;d++)s[d]=e.text;e.text=s}if(null!=e.text||i){if(this.textOffsets=[0],Array.isArray(e.text)){this.count=e.text[0].length,this.counts=[this.count];for(var b=1;b<e.text.length;b++)t.textOffsets[b]=t.textOffsets[b-1]+e.text[b-1].length,t.count+=e.text[b].length,t.counts.push(e.text[b].length);this.text=e.text.join("")}else this.text=e.text,this.count=this.text.length,this.counts=[this.count];n=[],this.font.forEach(function(e,r){k.atlasContext.font=e.baseString;for(var a=t.fontAtlas[r],i=0;i<t.text.length;i++){var o=t.text.charAt(i);if(null==a.ids[o]&&(a.ids[o]=a.chars.length,a.chars.push(o),n.push(o)),null==e.width[o]&&(e.width[o]=k.atlasContext.measureText(o).width/k.baseFontSize,t.kerning)){var s=[];for(var l in e.width)s.push(l+o,o+l);v(e.kerning,m(e.family,{pairs:s}))}}})}if(e.position)if(e.position.length>2){for(var _=!e.position[0].length,T=c.mallocFloat(2*this.count),C=0,E=0;C<this.counts.length;C++){var M=t.counts[C];if(_)for(var A=0;A<M;A++)T[E++]=e.position[2*C],T[E++]=e.position[2*C+1];else for(var S=0;S<M;S++)T[E++]=e.position[C][0],T[E++]=e.position[C][1]}this.position.call?this.position({type:"float",data:T}):this.position=this.regl.buffer({type:"float",data:T}),c.freeFloat(T)}else this.position.destroy&&this.position.destroy(),this.position={constant:e.position};if(e.text||i){var O=c.mallocUint8(this.count),P=c.mallocFloat(2*this.count);this.textWidth=[];for(var R=0,L=0;R<this.counts.length;R++){for(var D=t.counts[R],I=t.font[R]||t.font[0],z=t.fontAtlas[R]||t.fontAtlas[0],j=0;j<D;j++){var N=t.text.charAt(L),F=t.text.charAt(L-1);if(O[L]=z.ids[N],P[2*L]=I.width[N],j){var B=P[2*L-2],V=P[2*L],U=P[2*L-1],G=U+.5*B+.5*V;if(t.kerning){var H=I.kerning[F+N];H&&(G+=.001*H)}P[2*L+1]=G}else P[2*L+1]=.5*P[2*L];L++}t.textWidth.push(P.length?.5*P[2*L-2]+P[2*L-1]:0)}e.align||(e.align=this.align),this.charBuffer({data:O,type:"uint8",usage:"stream"}),this.sizeBuffer({data:P,type:"float",usage:"stream"}),c.freeUint8(O),c.freeFloat(P),n.length&&this.font.forEach(function(e,n){var r=t.fontAtlas[n],a=r.step,i=Math.floor(k.maxAtlasSize/a),o=Math.min(i,r.chars.length),s=Math.ceil(r.chars.length/o),l=x(o*a),c=x(s*a);r.width=l,r.height=c,r.rows=s,r.cols=o,r.em&&r.texture({data:u({canvas:k.atlasCanvas,font:r.fontString,chars:r.chars,shape:[l,c],step:[a,a]})})})}if(e.align&&(this.align=e.align,this.alignOffset=this.textWidth.map(function(e,n){var r=Array.isArray(t.align)?t.align.length>1?t.align[n]:t.align[0]:t.align;if("number"==typeof r)return r;switch(r){case"right":case"end":return-e;case"center":case"centre":case"middle":return.5*-e}return 0})),null==this.baseline&&null==e.baseline&&(e.baseline=0),null!=e.baseline&&(this.baseline=e.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(e,n){var r=(t.font[n]||t.font[0]).metrics,a=0;return a+=.5*r.bottom,a+="number"==typeof e?e-r.baseline:-r[e],k.normalViewport||(a*=-1),a})),null!=e.color)if(e.color||(e.color="transparent"),"string"!=typeof e.color&&isNaN(e.color)){var W;if("number"==typeof e.color[0]&&e.color.length>this.counts.length){var q=e.color.length;W=c.mallocUint8(q);for(var Y=(e.color.subarray||e.color.slice).bind(e.color),X=0;X<q;X+=4)W.set(l(Y(X,X+4),"uint8"),X)}else{var Z=e.color.length;W=c.mallocUint8(4*Z);for(var $=0;$<Z;$++)W.set(l(e.color[$]||0,"uint8"),4*$)}this.color=W}else this.color=l(e.color,"uint8");if(e.position||e.text||e.color||e.baseline||e.align||e.font||e.offset||e.opacity){var K=this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2;if(K){var J=Math.max(.5*this.position.length||0,.25*this.color.length||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,.5*this.positionOffset.length||0);this.batch=Array(J);for(var Q=0;Q<this.batch.length;Q++)t.batch[Q]={count:t.counts.length>1?t.counts[Q]:t.counts[0],offset:t.textOffsets.length>1?t.textOffsets[Q]:t.textOffsets[0],color:t.color?t.color.length<=4?t.color:t.color.subarray(4*Q,4*Q+4):[0,0,0,255],opacity:Array.isArray(t.opacity)?t.opacity[Q]:t.opacity,baseline:null!=t.baselineOffset[Q]?t.baselineOffset[Q]:t.baselineOffset[0],align:t.align?null!=t.alignOffset[Q]?t.alignOffset[Q]:t.alignOffset[0]:0,atlas:t.fontAtlas[Q]||t.fontAtlas[0],positionOffset:t.positionOffset.length>2?t.positionOffset.subarray(2*Q,2*Q+2):t.positionOffset}}else this.count?this.batch=[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:this.batch=[]}},k.prototype.destroy=function(){},k.prototype.kerning=!0,k.prototype.position={constant:new Float32Array(2)},k.prototype.translate=null,k.prototype.scale=null,k.prototype.font=null,k.prototype.text="",k.prototype.positionOffset=[0,0],k.prototype.opacity=1,k.prototype.color=new Uint8Array([0,0,0,255]),k.prototype.alignOffset=[0,0],k.normalViewport=!1,k.maxAtlasSize=1024,k.atlasCanvas=document.createElement("canvas"),k.atlasContext=k.atlasCanvas.getContext("2d",{alpha:!1}),k.baseFontSize=64,k.fonts={},t.exports=k},{"bit-twiddle":80,"color-normalize":108,"css-font":127,"detect-kerning":151,"es6-weak-map":209,"flatten-vertex-data":216,"font-atlas":217,"font-measure":218,"gl-util/context":306,"is-plain-obj":405,"object-assign":437,"parse-rect":442,"parse-unit":444,"pick-by-alias":448,regl:478,"to-px":516,"typedarray-pool":522}],305:[function(e,t,n){"use strict";var r=e("ndarray"),a=e("ndarray-ops"),i=e("typedarray-pool");t.exports=function(e){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(o||function(e){o=[e.LINEAR,e.NEAREST_MIPMAP_LINEAR,e.LINEAR_MIPMAP_NEAREST,e.LINEAR_MIPMAP_NEAREST],s=[e.NEAREST,e.LINEAR,e.NEAREST_MIPMAP_NEAREST,e.NEAREST_MIPMAP_LINEAR,e.LINEAR_MIPMAP_NEAREST,e.LINEAR_MIPMAP_LINEAR],l=[e.REPEAT,e.CLAMP_TO_EDGE,e.MIRRORED_REPEAT]}(e),"number"==typeof arguments[1])return v(e,arguments[1],arguments[2],arguments[3]||e.RGBA,arguments[4]||e.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return v(e,0|arguments[1][0],0|arguments[1][1],arguments[2]||e.RGBA,arguments[3]||e.UNSIGNED_BYTE);if("object"==typeof arguments[1]){var t=arguments[1],n=u(t)?t:t.raw;if(n)return function(e,t,n,r,a,i){var o=m(e);return e.texImage2D(e.TEXTURE_2D,0,a,a,i,t),new d(e,o,n,r,a,i)}(e,n,0|t.width,0|t.height,arguments[2]||e.RGBA,arguments[3]||e.UNSIGNED_BYTE);if(t.shape&&t.data&&t.stride)return function(e,t){var n=t.dtype,o=t.shape.slice(),s=e.getParameter(e.MAX_TEXTURE_SIZE);if(o[0]<0||o[0]>s||o[1]<0||o[1]>s)throw new Error("gl-texture2d: Invalid texture size");var l=h(o,t.stride.slice()),u=0;"float32"===n?u=e.FLOAT:"float64"===n?(u=e.FLOAT,l=!1,n="float32"):"uint8"===n?u=e.UNSIGNED_BYTE:(u=e.UNSIGNED_BYTE,l=!1,n="uint8");var f,p,v=0;if(2===o.length)v=e.LUMINANCE,o=[o[0],o[1],1],t=r(t.data,o,[t.stride[0],t.stride[1],1],t.offset);else{if(3!==o.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===o[2])v=e.ALPHA;else if(2===o[2])v=e.LUMINANCE_ALPHA;else if(3===o[2])v=e.RGB;else{if(4!==o[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");v=e.RGBA}}u!==e.FLOAT||e.getExtension("OES_texture_float")||(u=e.UNSIGNED_BYTE,l=!1);var g=t.size;if(l)f=0===t.offset&&t.data.length===g?t.data:t.data.subarray(t.offset,t.offset+g);else{var y=[o[2],o[2]*o[0],1];p=i.malloc(g,n);var b=r(p,o,y,0);"float32"!==n&&"float64"!==n||u!==e.UNSIGNED_BYTE?a.assign(b,t):c(b,t),f=p.subarray(0,g)}var x=m(e);return e.texImage2D(e.TEXTURE_2D,0,v,o[0],o[1],0,v,u,f),l||i.free(p),new d(e,x,o[0],o[1],v,u)}(e,t)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")};var o=null,s=null,l=null;function u(e){return"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement||"undefined"!=typeof ImageData&&e instanceof ImageData}var c=function(e,t){a.muls(e,t,255)};function f(e,t,n){var r=e.gl,a=r.getParameter(r.MAX_TEXTURE_SIZE);if(t<0||t>a||n<0||n>a)throw new Error("gl-texture2d: Invalid texture size");return e._shape=[t,n],e.bind(),r.texImage2D(r.TEXTURE_2D,0,e.format,t,n,0,e.format,e.type,null),e._mipLevels=[0],e}function d(e,t,n,r,a,i){this.gl=e,this.handle=t,this.format=a,this.type=i,this._shape=[n,r],this._mipLevels=[0],this._magFilter=e.NEAREST,this._minFilter=e.NEAREST,this._wrapS=e.CLAMP_TO_EDGE,this._wrapT=e.CLAMP_TO_EDGE,this._anisoSamples=1;var o=this,s=[this._wrapS,this._wrapT];Object.defineProperties(s,[{get:function(){return o._wrapS},set:function(e){return o.wrapS=e}},{get:function(){return o._wrapT},set:function(e){return o.wrapT=e}}]),this._wrapVector=s;var l=[this._shape[0],this._shape[1]];Object.defineProperties(l,[{get:function(){return o._shape[0]},set:function(e){return o.width=e}},{get:function(){return o._shape[1]},set:function(e){return o.height=e}}]),this._shapeVector=l}var p=d.prototype;function h(e,t){return 3===e.length?1===t[2]&&t[1]===e[0]*e[2]&&t[0]===e[2]:1===t[0]&&t[1]===e[0]}function m(e){var t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),t}function v(e,t,n,r,a){var i=e.getParameter(e.MAX_TEXTURE_SIZE);if(t<0||t>i||n<0||n>i)throw new Error("gl-texture2d: Invalid texture shape");if(a===e.FLOAT&&!e.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var o=m(e);return e.texImage2D(e.TEXTURE_2D,0,r,t,n,0,r,a,null),new d(e,o,t,n,r,a)}Object.defineProperties(p,{minFilter:{get:function(){return this._minFilter},set:function(e){this.bind();var t=this.gl;if(this.type===t.FLOAT&&o.indexOf(e)>=0&&(t.getExtension("OES_texture_float_linear")||(e=t.NEAREST)),s.indexOf(e)<0)throw new Error("gl-texture2d: Unknown filter mode "+e);return t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e),this._minFilter=e}},magFilter:{get:function(){return this._magFilter},set:function(e){this.bind();var t=this.gl;if(this.type===t.FLOAT&&o.indexOf(e)>=0&&(t.getExtension("OES_texture_float_linear")||(e=t.NEAREST)),s.indexOf(e)<0)throw new Error("gl-texture2d: Unknown filter mode "+e);return t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,e),this._magFilter=e}},mipSamples:{get:function(){return this._anisoSamples},set:function(e){var t=this._anisoSamples;if(this._anisoSamples=0|Math.max(e,1),t!==this._anisoSamples){var n=this.gl.getExtension("EXT_texture_filter_anisotropic");n&&this.gl.texParameterf(this.gl.TEXTURE_2D,n.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(e){if(this.bind(),l.indexOf(e)<0)throw new Error("gl-texture2d: Unknown wrap mode "+e);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,e),this._wrapS=e}},wrapT:{get:function(){return this._wrapT},set:function(e){if(this.bind(),l.indexOf(e)<0)throw new Error("gl-texture2d: Unknown wrap mode "+e);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,e),this._wrapT=e}},wrap:{get:function(){return this._wrapVector},set:function(e){if(Array.isArray(e)||(e=[e,e]),2!==e.length)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var t=0;t<2;++t)if(l.indexOf(e[t])<0)throw new Error("gl-texture2d: Unknown wrap mode "+e);this._wrapS=e[0],this._wrapT=e[1];var n=this.gl;return this.bind(),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,this._wrapS),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,this._wrapT),e}},shape:{get:function(){return this._shapeVector},set:function(e){if(Array.isArray(e)){if(2!==e.length)throw new Error("gl-texture2d: Invalid texture shape")}else e=[0|e,0|e];return f(this,0|e[0],0|e[1]),[0|e[0],0|e[1]]}},width:{get:function(){return this._shape[0]},set:function(e){return f(this,e|=0,this._shape[1]),e}},height:{get:function(){return this._shape[1]},set:function(e){return e|=0,f(this,this._shape[0],e),e}}}),p.bind=function(e){var t=this.gl;return void 0!==e&&t.activeTexture(t.TEXTURE0+(0|e)),t.bindTexture(t.TEXTURE_2D,this.handle),void 0!==e?0|e:t.getParameter(t.ACTIVE_TEXTURE)-t.TEXTURE0},p.dispose=function(){this.gl.deleteTexture(this.handle)},p.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var e=Math.min(this._shape[0],this._shape[1]),t=0;e>0;++t,e>>>=1)this._mipLevels.indexOf(t)<0&&this._mipLevels.push(t)},p.setPixels=function(e,t,n,o){var s=this.gl;this.bind(),Array.isArray(t)?(o=n,n=0|t[1],t=0|t[0]):(t=t||0,n=n||0),o=o||0;var l=u(e)?e:e.raw;if(l){var f=this._mipLevels.indexOf(o)<0;f?(s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,this.type,l),this._mipLevels.push(o)):s.texSubImage2D(s.TEXTURE_2D,o,t,n,this.format,this.type,l)}else{if(!(e.shape&&e.stride&&e.data))throw new Error("gl-texture2d: Unsupported data type");if(e.shape.length<2||t+e.shape[1]>this._shape[1]>>>o||n+e.shape[0]>this._shape[0]>>>o||t<0||n<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");!function(e,t,n,o,s,l,u,f){var d=f.dtype,p=f.shape.slice();if(p.length<2||p.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var m=0,v=0,g=h(p,f.stride.slice());if("float32"===d?m=e.FLOAT:"float64"===d?(m=e.FLOAT,g=!1,d="float32"):"uint8"===d?m=e.UNSIGNED_BYTE:(m=e.UNSIGNED_BYTE,g=!1,d="uint8"),2===p.length)v=e.LUMINANCE,p=[p[0],p[1],1],f=r(f.data,p,[f.stride[0],f.stride[1],1],f.offset);else{if(3!==p.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===p[2])v=e.ALPHA;else if(2===p[2])v=e.LUMINANCE_ALPHA;else if(3===p[2])v=e.RGB;else{if(4!==p[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");v=e.RGBA}p[2]}if(v!==e.LUMINANCE&&v!==e.ALPHA||s!==e.LUMINANCE&&s!==e.ALPHA||(v=s),v!==s)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var y=f.size,b=u.indexOf(o)<0;if(b&&u.push(o),m===l&&g)0===f.offset&&f.data.length===y?b?e.texImage2D(e.TEXTURE_2D,o,s,p[0],p[1],0,s,l,f.data):e.texSubImage2D(e.TEXTURE_2D,o,t,n,p[0],p[1],s,l,f.data):b?e.texImage2D(e.TEXTURE_2D,o,s,p[0],p[1],0,s,l,f.data.subarray(f.offset,f.offset+y)):e.texSubImage2D(e.TEXTURE_2D,o,t,n,p[0],p[1],s,l,f.data.subarray(f.offset,f.offset+y));else{var x;x=l===e.FLOAT?i.mallocFloat32(y):i.mallocUint8(y);var _=r(x,p,[p[2],p[2]*p[0],1]);m===e.FLOAT&&l===e.UNSIGNED_BYTE?c(_,f):a.assign(_,f),b?e.texImage2D(e.TEXTURE_2D,o,s,p[0],p[1],0,s,l,x.subarray(0,y)):e.texSubImage2D(e.TEXTURE_2D,o,t,n,p[0],p[1],s,l,x.subarray(0,y)),l===e.FLOAT?i.freeFloat32(x):i.freeUint8(x)}}(s,t,n,o,this.format,this.type,this._mipLevels,e)}}},{ndarray:433,"ndarray-ops":427,"typedarray-pool":522}],306:[function(e,t,n){"use strict";var r=e("pick-by-alias");function a(e){if(e.container)if(e.container==document.body)document.body.style.width||(e.canvas.width=e.width||e.pixelRatio*window.innerWidth),document.body.style.height||(e.canvas.height=e.height||e.pixelRatio*window.innerHeight);else{var t=e.container.getBoundingClientRect();e.canvas.width=e.width||t.right-t.left,e.canvas.height=e.height||t.bottom-t.top}}function i(e){return"function"==typeof e.getContext&&"width"in e&&"height"in e}t.exports=function(e){if(e?"string"==typeof e&&(e={container:e}):e={},(e=i(e)?{container:e}:function(e){return"string"==typeof e.nodeName&&"function"==typeof e.appendChild&&"function"==typeof e.getBoundingClientRect}(e)?{container:e}:function(e){return"function"==typeof e.drawArrays||"function"==typeof e.drawElements}(e)?{gl:e}:r(e,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio"},!0)).pixelRatio||(e.pixelRatio=window.pixelRatio||1),e.gl)return e.gl;if(e.canvas&&(e.container=e.canvas.parentNode),e.container){if("string"==typeof e.container){var t=document.querySelector(e.container);if(!t)throw Error("Element "+e.container+" is not found");e.container=t}i(e.container)?(e.canvas=e.container,e.container=e.canvas.parentNode):e.canvas||(e.canvas=document.createElement("canvas"),e.container.appendChild(e.canvas),a(e))}else e.canvas||(e.container=document.body||document.documentElement,e.canvas=document.createElement("canvas"),e.canvas.style.position="absolute",e.canvas.style.top=0,e.canvas.style.left=0,e.container.appendChild(e.canvas),a(e));if(!e.gl)try{e.gl=e.canvas.getContext("webgl",e.attrs)}catch(t){try{e.gl=e.canvas.getContext("experimental-webgl",e.attrs)}catch(t){e.gl=e.canvas.getContext("webgl-experimental",e.attrs)}}return e.gl}},{"pick-by-alias":448}],307:[function(e,t,n){"use strict";t.exports=function(e,t,n){t?t.bind():e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null);var r=0|e.getParameter(e.MAX_VERTEX_ATTRIBS);if(n){if(n.length>r)throw new Error("gl-vao: Too many vertex attributes");for(var a=0;a<n.length;++a){var i=n[a];if(i.buffer){var o=i.buffer,s=i.size||4,l=i.type||e.FLOAT,u=!!i.normalized,c=i.stride||0,f=i.offset||0;o.bind(),e.enableVertexAttribArray(a),e.vertexAttribPointer(a,s,l,u,c,f)}else{if("number"==typeof i)e.vertexAttrib1f(a,i);else if(1===i.length)e.vertexAttrib1f(a,i[0]);else if(2===i.length)e.vertexAttrib2f(a,i[0],i[1]);else if(3===i.length)e.vertexAttrib3f(a,i[0],i[1],i[2]);else{if(4!==i.length)throw new Error("gl-vao: Invalid vertex attribute");e.vertexAttrib4f(a,i[0],i[1],i[2],i[3])}e.disableVertexAttribArray(a)}}for(;a<r;++a)e.disableVertexAttribArray(a)}else{e.bindBuffer(e.ARRAY_BUFFER,null);for(var a=0;a<r;++a)e.disableVertexAttribArray(a)}}},{}],308:[function(e,t,n){"use strict";var r=e("./do-bind.js");function a(e){this.gl=e,this._elements=null,this._attributes=null,this._elementsType=e.UNSIGNED_SHORT}a.prototype.bind=function(){r(this.gl,this._elements,this._attributes)},a.prototype.update=function(e,t,n){this._elements=t,this._attributes=e,this._elementsType=n||this.gl.UNSIGNED_SHORT},a.prototype.dispose=function(){},a.prototype.unbind=function(){},a.prototype.draw=function(e,t,n){n=n||0;var r=this.gl;this._elements?r.drawElements(e,t,this._elementsType,n):r.drawArrays(e,n,t)},t.exports=function(e){return new a(e)}},{"./do-bind.js":307}],309:[function(e,t,n){"use strict";var r=e("./do-bind.js");function a(e,t,n,r,a,i){this.location=e,this.dimension=t,this.a=n,this.b=r,this.c=a,this.d=i}function i(e,t,n){this.gl=e,this._ext=t,this.handle=n,this._attribs=[],this._useElements=!1,this._elementsType=e.UNSIGNED_SHORT}a.prototype.bind=function(e){switch(this.dimension){case 1:e.vertexAttrib1f(this.location,this.a);break;case 2:e.vertexAttrib2f(this.location,this.a,this.b);break;case 3:e.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:e.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},i.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var e=0;e<this._attribs.length;++e)this._attribs[e].bind(this.gl)},i.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},i.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},i.prototype.update=function(e,t,n){if(this.bind(),r(this.gl,t,e),this.unbind(),this._attribs.length=0,e)for(var i=0;i<e.length;++i){var o=e[i];"number"==typeof o?this._attribs.push(new a(i,1,o)):Array.isArray(o)&&this._attribs.push(new a(i,o.length,o[0],o[1],o[2],o[3]))}this._useElements=!!t,this._elementsType=n||this.gl.UNSIGNED_SHORT},i.prototype.draw=function(e,t,n){n=n||0;var r=this.gl;this._useElements?r.drawElements(e,t,this._elementsType,n):r.drawArrays(e,n,t)},t.exports=function(e,t){return new i(e,t,t.createVertexArrayOES())}},{"./do-bind.js":307}],310:[function(e,t,n){"use strict";var r=e("./lib/vao-native.js"),a=e("./lib/vao-emulated.js");t.exports=function(e,t,n,i){var o,s=e.createVertexArray?new function(e){this.bindVertexArrayOES=e.bindVertexArray.bind(e),this.createVertexArrayOES=e.createVertexArray.bind(e),this.deleteVertexArrayOES=e.deleteVertexArray.bind(e)}(e):e.getExtension("OES_vertex_array_object");return(o=s?r(e,s):a(e)).update(t,n,i),o}},{"./lib/vao-emulated.js":308,"./lib/vao-native.js":309}],311:[function(e,t,n){t.exports=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}},{}],312:[function(e,t,n){t.exports=function(e,t){var n=r(e[0],e[1],e[2]),o=r(t[0],t[1],t[2]);a(n,n),a(o,o);var s=i(n,o);return s>1?0:Math.acos(s)};var r=e("./fromValues"),a=e("./normalize"),i=e("./dot")},{"./dot":322,"./fromValues":328,"./normalize":339}],313:[function(e,t,n){t.exports=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}},{}],314:[function(e,t,n){t.exports=function(e){var t=new Float32Array(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}},{}],315:[function(e,t,n){t.exports=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}},{}],316:[function(e,t,n){t.exports=function(){var e=new Float32Array(3);return e[0]=0,e[1]=0,e[2]=0,e}},{}],317:[function(e,t,n){t.exports=function(e,t,n){var r=t[0],a=t[1],i=t[2],o=n[0],s=n[1],l=n[2];return e[0]=a*l-i*s,e[1]=i*o-r*l,e[2]=r*s-a*o,e}},{}],318:[function(e,t,n){t.exports=e("./distance")},{"./distance":319}],319:[function(e,t,n){t.exports=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],a=t[2]-e[2];return Math.sqrt(n*n+r*r+a*a)}},{}],320:[function(e,t,n){t.exports=e("./divide")},{"./divide":321}],321:[function(e,t,n){t.exports=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}},{}],322:[function(e,t,n){t.exports=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}},{}],323:[function(e,t,n){t.exports=1e-6},{}],324:[function(e,t,n){t.exports=function(e,t){var n=e[0],a=e[1],i=e[2],o=t[0],s=t[1],l=t[2];return Math.abs(n-o)<=r*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(a-s)<=r*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(i-l)<=r*Math.max(1,Math.abs(i),Math.abs(l))};var r=e("./epsilon")},{"./epsilon":323}],325:[function(e,t,n){t.exports=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}},{}],326:[function(e,t,n){t.exports=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}},{}],327:[function(e,t,n){t.exports=function(e,t,n,a,i,o){var s,l;for(t||(t=3),n||(n=0),l=a?Math.min(a*t+n,e.length):e.length,s=n;s<l;s+=t)r[0]=e[s],r[1]=e[s+1],r[2]=e[s+2],i(r,r,o),e[s]=r[0],e[s+1]=r[1],e[s+2]=r[2];return e};var r=e("./create")()},{"./create":316}],328:[function(e,t,n){t.exports=function(e,t,n){var r=new Float32Array(3);return r[0]=e,r[1]=t,r[2]=n,r}},{}],329:[function(e,t,n){t.exports={EPSILON:e("./epsilon"),create:e("./create"),clone:e("./clone"),angle:e("./angle"),fromValues:e("./fromValues"),copy:e("./copy"),set:e("./set"),equals:e("./equals"),exactEquals:e("./exactEquals"),add:e("./add"),subtract:e("./subtract"),sub:e("./sub"),multiply:e("./multiply"),mul:e("./mul"),divide:e("./divide"),div:e("./div"),min:e("./min"),max:e("./max"),floor:e("./floor"),ceil:e("./ceil"),round:e("./round"),scale:e("./scale"),scaleAndAdd:e("./scaleAndAdd"),distance:e("./distance"),dist:e("./dist"),squaredDistance:e("./squaredDistance"),sqrDist:e("./sqrDist"),length:e("./length"),len:e("./len"),squaredLength:e("./squaredLength"),sqrLen:e("./sqrLen"),negate:e("./negate"),inverse:e("./inverse"),normalize:e("./normalize"),dot:e("./dot"),cross:e("./cross"),lerp:e("./lerp"),random:e("./random"),transformMat4:e("./transformMat4"),transformMat3:e("./transformMat3"),transformQuat:e("./transformQuat"),rotateX:e("./rotateX"),rotateY:e("./rotateY"),rotateZ:e("./rotateZ"),forEach:e("./forEach")}},{"./add":311,"./angle":312,"./ceil":313,"./clone":314,"./copy":315,"./create":316,"./cross":317,"./dist":318,"./distance":319,"./div":320,"./divide":321,"./dot":322,"./epsilon":323,"./equals":324,"./exactEquals":325,"./floor":326,"./forEach":327,"./fromValues":328,"./inverse":330,"./len":331,"./length":332,"./lerp":333,"./max":334,"./min":335,"./mul":336,"./multiply":337,"./negate":338,"./normalize":339,"./random":340,"./rotateX":341,"./rotateY":342,"./rotateZ":343,"./round":344,"./scale":345,"./scaleAndAdd":346,"./set":347,"./sqrDist":348,"./sqrLen":349,"./squaredDistance":350,"./squaredLength":351,"./sub":352,"./subtract":353,"./transformMat3":354,"./transformMat4":355,"./transformQuat":356}],330:[function(e,t,n){t.exports=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}},{}],331:[function(e,t,n){t.exports=e("./length")},{"./length":332}],332:[function(e,t,n){t.exports=function(e){var t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)}},{}],333:[function(e,t,n){t.exports=function(e,t,n,r){var a=t[0],i=t[1],o=t[2];return e[0]=a+r*(n[0]-a),e[1]=i+r*(n[1]-i),e[2]=o+r*(n[2]-o),e}},{}],334:[function(e,t,n){t.exports=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}},{}],335:[function(e,t,n){t.exports=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}},{}],336:[function(e,t,n){t.exports=e("./multiply")},{"./multiply":337}],337:[function(e,t,n){t.exports=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}},{}],338:[function(e,t,n){t.exports=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}},{}],339:[function(e,t,n){t.exports=function(e,t){var n=t[0],r=t[1],a=t[2],i=n*n+r*r+a*a;return i>0&&(i=1/Math.sqrt(i),e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i),e}},{}],340:[function(e,t,n){t.exports=function(e,t){t=t||1;var n=2*Math.random()*Math.PI,r=2*Math.random()-1,a=Math.sqrt(1-r*r)*t;return e[0]=Math.cos(n)*a,e[1]=Math.sin(n)*a,e[2]=r*t,e}},{}],341:[function(e,t,n){t.exports=function(e,t,n,r){var a=n[1],i=n[2],o=t[1]-a,s=t[2]-i,l=Math.sin(r),u=Math.cos(r);return e[0]=t[0],e[1]=a+o*u-s*l,e[2]=i+o*l+s*u,e}},{}],342:[function(e,t,n){t.exports=function(e,t,n,r){var a=n[0],i=n[2],o=t[0]-a,s=t[2]-i,l=Math.sin(r),u=Math.cos(r);return e[0]=a+s*l+o*u,e[1]=t[1],e[2]=i+s*u-o*l,e}},{}],343:[function(e,t,n){t.exports=function(e,t,n,r){var a=n[0],i=n[1],o=t[0]-a,s=t[1]-i,l=Math.sin(r),u=Math.cos(r);return e[0]=a+o*u-s*l,e[1]=i+o*l+s*u,e[2]=t[2],e}},{}],344:[function(e,t,n){t.exports=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}},{}],345:[function(e,t,n){t.exports=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}},{}],346:[function(e,t,n){t.exports=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e}},{}],347:[function(e,t,n){t.exports=function(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e}},{}],348:[function(e,t,n){t.exports=e("./squaredDistance")},{"./squaredDistance":350}],349:[function(e,t,n){t.exports=e("./squaredLength")},{"./squaredLength":351}],350:[function(e,t,n){t.exports=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],a=t[2]-e[2];return n*n+r*r+a*a}},{}],351:[function(e,t,n){t.exports=function(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r}},{}],352:[function(e,t,n){t.exports=e("./subtract")},{"./subtract":353}],353:[function(e,t,n){t.exports=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}},{}],354:[function(e,t,n){t.exports=function(e,t,n){var r=t[0],a=t[1],i=t[2];return e[0]=r*n[0]+a*n[3]+i*n[6],e[1]=r*n[1]+a*n[4]+i*n[7],e[2]=r*n[2]+a*n[5]+i*n[8],e}},{}],355:[function(e,t,n){t.exports=function(e,t,n){var r=t[0],a=t[1],i=t[2],o=n[3]*r+n[7]*a+n[11]*i+n[15];return o=o||1,e[0]=(n[0]*r+n[4]*a+n[8]*i+n[12])/o,e[1]=(n[1]*r+n[5]*a+n[9]*i+n[13])/o,e[2]=(n[2]*r+n[6]*a+n[10]*i+n[14])/o,e}},{}],356:[function(e,t,n){t.exports=function(e,t,n){var r=t[0],a=t[1],i=t[2],o=n[0],s=n[1],l=n[2],u=n[3],c=u*r+s*i-l*a,f=u*a+l*r-o*i,d=u*i+o*a-s*r,p=-o*r-s*a-l*i;return e[0]=c*u+p*-o+f*-l-d*-s,e[1]=f*u+p*-s+d*-o-c*-l,e[2]=d*u+p*-l+c*-s-f*-o,e}},{}],357:[function(e,t,n){t.exports=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e}},{}],358:[function(e,t,n){t.exports=function(e){var t=new Float32Array(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}},{}],359:[function(e,t,n){t.exports=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}},{}],360:[function(e,t,n){t.exports=function(){var e=new Float32Array(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}},{}],361:[function(e,t,n){t.exports=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],a=t[2]-e[2],i=t[3]-e[3];return Math.sqrt(n*n+r*r+a*a+i*i)}},{}],362:[function(e,t,n){t.exports=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e[3]=t[3]/n[3],e}},{}],363:[function(e,t,n){t.exports=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}},{}],364:[function(e,t,n){t.exports=function(e,t,n,r){var a=new Float32Array(4);return a[0]=e,a[1]=t,a[2]=n,a[3]=r,a}},{}],365:[function(e,t,n){t.exports={create:e("./create"),clone:e("./clone"),fromValues:e("./fromValues"),copy:e("./copy"),set:e("./set"),add:e("./add"),subtract:e("./subtract"),multiply:e("./multiply"),divide:e("./divide"),min:e("./min"),max:e("./max"),scale:e("./scale"),scaleAndAdd:e("./scaleAndAdd"),distance:e("./distance"),squaredDistance:e("./squaredDistance"),length:e("./length"),squaredLength:e("./squaredLength"),negate:e("./negate"),inverse:e("./inverse"),normalize:e("./normalize"),dot:e("./dot"),lerp:e("./lerp"),random:e("./random"),transformMat4:e("./transformMat4"),transformQuat:e("./transformQuat")}},{"./add":357,"./clone":358,"./copy":359,"./create":360,"./distance":361,"./divide":362,"./dot":363,"./fromValues":364,"./inverse":366,"./length":367,"./lerp":368,"./max":369,"./min":370,"./multiply":371,"./negate":372,"./normalize":373,"./random":374,"./scale":375,"./scaleAndAdd":376,"./set":377,"./squaredDistance":378,"./squaredLength":379,"./subtract":380,"./transformMat4":381,"./transformQuat":382}],366:[function(e,t,n){t.exports=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}},{}],367:[function(e,t,n){t.exports=function(e){var t=e[0],n=e[1],r=e[2],a=e[3];return Math.sqrt(t*t+n*n+r*r+a*a)}},{}],368:[function(e,t,n){t.exports=function(e,t,n,r){var a=t[0],i=t[1],o=t[2],s=t[3];return e[0]=a+r*(n[0]-a),e[1]=i+r*(n[1]-i),e[2]=o+r*(n[2]-o),e[3]=s+r*(n[3]-s),e}},{}],369:[function(e,t,n){t.exports=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e[3]=Math.max(t[3],n[3]),e}},{}],370:[function(e,t,n){t.exports=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e[3]=Math.min(t[3],n[3]),e}},{}],371:[function(e,t,n){t.exports=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e}},{}],372:[function(e,t,n){t.exports=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}},{}],373:[function(e,t,n){t.exports=function(e,t){var n=t[0],r=t[1],a=t[2],i=t[3],o=n*n+r*r+a*a+i*i;return o>0&&(o=1/Math.sqrt(o),e[0]=n*o,e[1]=r*o,e[2]=a*o,e[3]=i*o),e}},{}],374:[function(e,t,n){var r=e("./normalize"),a=e("./scale");t.exports=function(e,t){return t=t||1,e[0]=Math.random(),e[1]=Math.random(),e[2]=Math.random(),e[3]=Math.random(),r(e,e),a(e,e,t),e}},{"./normalize":373,"./scale":375}],375:[function(e,t,n){t.exports=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}},{}],376:[function(e,t,n){t.exports=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e}},{}],377:[function(e,t,n){t.exports=function(e,t,n,r,a){return e[0]=t,e[1]=n,e[2]=r,e[3]=a,e}},{}],378:[function(e,t,n){t.exports=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],a=t[2]-e[2],i=t[3]-e[3];return n*n+r*r+a*a+i*i}},{}],379:[function(e,t,n){t.exports=function(e){var t=e[0],n=e[1],r=e[2],a=e[3];return t*t+n*n+r*r+a*a}},{}],380:[function(e,t,n){t.exports=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}},{}],381:[function(e,t,n){t.exports=function(e,t,n){var r=t[0],a=t[1],i=t[2],o=t[3];return e[0]=n[0]*r+n[4]*a+n[8]*i+n[12]*o,e[1]=n[1]*r+n[5]*a+n[9]*i+n[13]*o,e[2]=n[2]*r+n[6]*a+n[10]*i+n[14]*o,e[3]=n[3]*r+n[7]*a+n[11]*i+n[15]*o,e}},{}],382:[function(e,t,n){t.exports=function(e,t,n){var r=t[0],a=t[1],i=t[2],o=n[0],s=n[1],l=n[2],u=n[3],c=u*r+s*i-l*a,f=u*a+l*r-o*i,d=u*i+o*a-s*r,p=-o*r-s*a-l*i;return e[0]=c*u+p*-o+f*-l-d*-s,e[1]=f*u+p*-s+d*-o-c*-l,e[2]=d*u+p*-l+c*-s-f*-o,e[3]=t[3],e}},{}],383:[function(e,t,n){t.exports=function(e,t,n,i){return r[0]=i,r[1]=n,r[2]=t,r[3]=e,a[0]};var r=new Uint8Array(4),a=new Float32Array(r.buffer)},{}],384:[function(e,t,n){var r=e("glsl-tokenizer"),a=e("atob-lite");t.exports=function(e){for(var t=Array.isArray(e)?e:r(e),n=0;n<t.length;n++){var i=t[n];if("preprocessor"===i.type){var o=i.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(o&&o[2]){var s=o[1],l=o[2];return(s?a(l):l).trim()}}}}},{"atob-lite":60,"glsl-tokenizer":391}],385:[function(e,t,n){t.exports=function(e){var t,n,T,k=0,C=0,E=l,M=[],A=[],S=1,O=0,P=0,R=!1,L=!1,D="",I=i,z=r;return"300 es"===(e=e||{}).version&&(I=s,z=o),function(e){return A=[],null!==e?function(e){var n;for(k=0,T=(D+=e).length;t=D[k],k<T;){switch(n=k,E){case c:k=V();break;case f:case d:k=B();break;case p:k=U();break;case h:k=W();break;case _:k=H();break;case m:k=q();break;case u:k=Y();break;case b:k=F();break;case l:k=N()}if(n!==k)switch(D[n]){case"\n":O=0,++S;break;default:++O}}return C+=k,D=D.slice(k),A}(e.replace?e.replace(/\r\n/g,"\n"):e):(M.length&&j(M.join("")),E=x,j("(eof)"),A)};function j(e){e.length&&A.push({type:w[E],data:e,position:P,line:S,column:O})}function N(){return M=M.length?[]:M,"/"===n&&"*"===t?(P=C+k-1,E=c,n=t,k+1):"/"===n&&"/"===t?(P=C+k-1,E=f,n=t,k+1):"#"===t?(E=d,P=C+k,k):/\s/.test(t)?(E=b,P=C+k,k):(R=/\d/.test(t),L=/[^\w_]/.test(t),P=C+k,E=R?h:L?p:u,k)}function F(){return/[^\s]/g.test(t)?(j(M.join("")),E=l,k):(M.push(t),n=t,k+1)}function B(){return"\r"!==t&&"\n"!==t||"\\"===n?(M.push(t),n=t,k+1):(j(M.join("")),E=l,k)}function V(){return"/"===t&&"*"===n?(M.push(t),j(M.join("")),E=l,k+1):(M.push(t),n=t,k+1)}function U(){if("."===n&&/\d/.test(t))return E=m,k;if("/"===n&&"*"===t)return E=c,k;if("/"===n&&"/"===t)return E=f,k;if("."===t&&M.length){for(;G(M););return E=m,k}if(";"===t||")"===t||"("===t){if(M.length)for(;G(M););return j(t),E=l,k+1}var e=2===M.length&&"="!==t;if(/[\w_\d\s]/.test(t)||e){for(;G(M););return E=l,k}return M.push(t),n=t,k+1}function G(e){for(var t,n,r=0;;){if(t=a.indexOf(e.slice(0,e.length+r).join("")),n=a[t],-1===t){if(r--+e.length>0)continue;n=e.slice(0,1).join("")}return j(n),P+=n.length,(M=M.slice(n.length)).length}}function H(){return/[^a-fA-F0-9]/.test(t)?(j(M.join("")),E=l,k):(M.push(t),n=t,k+1)}function W(){return"."===t?(M.push(t),E=m,n=t,k+1):/[eE]/.test(t)?(M.push(t),E=m,n=t,k+1):"x"===t&&1===M.length&&"0"===M[0]?(E=_,M.push(t),n=t,k+1):/[^\d]/.test(t)?(j(M.join("")),E=l,k):(M.push(t),n=t,k+1)}function q(){return"f"===t&&(M.push(t),n=t,k+=1),/[eE]/.test(t)?(M.push(t),n=t,k+1):"-"===t&&/[eE]/.test(n)?(M.push(t),n=t,k+1):/[^\d]/.test(t)?(j(M.join("")),E=l,k):(M.push(t),n=t,k+1)}function Y(){if(/[^\d\w_]/.test(t)){var e=M.join("");return E=z.indexOf(e)>-1?y:I.indexOf(e)>-1?g:v,j(M.join("")),E=l,k}return M.push(t),n=t,k+1}};var r=e("./lib/literals"),a=e("./lib/operators"),i=e("./lib/builtins"),o=e("./lib/literals-300es"),s=e("./lib/builtins-300es"),l=999,u=9999,c=0,f=1,d=2,p=3,h=4,m=5,v=6,g=7,y=8,b=9,x=10,_=11,w=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},{"./lib/builtins":387,"./lib/builtins-300es":386,"./lib/literals":389,"./lib/literals-300es":388,"./lib/operators":390}],386:[function(e,t,n){var r=e("./builtins");r=r.slice().filter(function(e){return!/^(gl\_|texture)/.test(e)}),t.exports=r.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},{"./builtins":387}],387:[function(e,t,n){t.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},{}],388:[function(e,t,n){var r=e("./literals");t.exports=r.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uint","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},{"./literals":389}],389:[function(e,t,n){t.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},{}],390:[function(e,t,n){t.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},{}],391:[function(e,t,n){var r=e("./index");t.exports=function(e,t){var n=r(t),a=[];return a=(a=a.concat(n(e))).concat(n(null))}},{"./index":385}],392:[function(e,t,n){t.exports=function(e){"string"==typeof e&&(e=[e]);for(var t=[].slice.call(arguments,1),n=[],r=0;r<e.length-1;r++)n.push(e[r],t[r]||"");return n.push(e[r]),n.join("")}},{}],393:[function(e,n,r){(function(t){"use strict";var r,a=e("is-browser");r="function"==typeof t.matchMedia?!t.matchMedia("(hover: none)").matches:a,n.exports=r}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"is-browser":400}],394:[function(e,t,n){"use strict";var r=e("is-browser");t.exports=r&&function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(t){e=!1}return e}()},{"is-browser":400}],395:[function(e,t,n){n.read=function(e,t,n,r,a){var i,o,s=8*a-r-1,l=(1<<s)-1,u=l>>1,c=-7,f=n?a-1:0,d=n?-1:1,p=e[t+f];for(f+=d,i=p&(1<<-c)-1,p>>=-c,c+=s;c>0;i=256*i+e[t+f],f+=d,c-=8);for(o=i&(1<<-c)-1,i>>=-c,c+=r;c>0;o=256*o+e[t+f],f+=d,c-=8);if(0===i)i=1-u;else{if(i===l)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,r),i-=u}return(p?-1:1)*o*Math.pow(2,i-r)},n.write=function(e,t,n,r,a,i){var o,s,l,u=8*i-a-1,c=(1<<u)-1,f=c>>1,d=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:i-1,h=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),(t+=o+f>=1?d/l:d*Math.pow(2,1-f))*l>=2&&(o++,l/=2),o+f>=c?(s=0,o=c):o+f>=1?(s=(t*l-1)*Math.pow(2,a),o+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,a),o=0));a>=8;e[n+p]=255&s,p+=h,s/=256,a-=8);for(o=o<<a|s,u+=a;u>0;e[n+p]=255&o,p+=h,o/=256,u-=8);e[n+p-h]|=128*m}},{}],396:[function(e,t,n){"use strict";t.exports=function(e,t){var n=e.length;if(0===n)throw new Error("Must have at least d+1 points");var a=e[0].length;if(n<=a)throw new Error("Must input at least d+1 points");var o=e.slice(0,a+1),s=r.apply(void 0,o);if(0===s)throw new Error("Input not in general position");for(var l=new Array(a+1),c=0;c<=a;++c)l[c]=c;s<0&&(l[0]=1,l[1]=0);for(var f=new i(l,new Array(a+1),!1),d=f.adjacent,p=new Array(a+2),c=0;c<=a;++c){for(var h=l.slice(),m=0;m<=a;++m)m===c&&(h[m]=-1);var v=h[0];h[0]=h[1],h[1]=v;var g=new i(h,new Array(a+1),!0);d[c]=g,p[c]=g}p[a+1]=f;for(var c=0;c<=a;++c)for(var h=d[c].vertices,y=d[c].adjacent,m=0;m<=a;++m){var b=h[m];if(b<0)y[m]=f;else for(var x=0;x<=a;++x)d[x].vertices.indexOf(b)<0&&(y[m]=d[x])}for(var _=new u(a,o,p),w=!!t,c=a+1;c<n;++c)_.insert(e[c],w);return _.boundary()};var r=e("robust-orientation"),a=e("simplicial-complex").compareCells;function i(e,t,n){this.vertices=e,this.adjacent=t,this.boundary=n,this.lastVisited=-1}function o(e,t,n){this.vertices=e,this.cell=t,this.index=n}function s(e,t){return a(e.vertices,t.vertices)}i.prototype.flip=function(){var e=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=e;var t=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=t};var l=[];function u(e,t,n){this.dimension=e,this.vertices=t,this.simplices=n,this.interior=n.filter(function(e){return!e.boundary}),this.tuple=new Array(e+1);for(var a=0;a<=e;++a)this.tuple[a]=this.vertices[a];var i=l[e];i||(i=l[e]=function(e){for(var t=["function orient(){var tuple=this.tuple;return test("],n=0;n<=e;++n)n>0&&t.push(","),t.push("tuple[",n,"]");t.push(")}return orient");var a=new Function("test",t.join("")),i=r[e+1];return i||(i=r),a(i)}(e)),this.orient=i}var c=u.prototype;c.handleBoundaryDegeneracy=function(e,t){var n=this.dimension,r=this.vertices.length-1,a=this.tuple,i=this.vertices,o=[e];for(e.lastVisited=-r;o.length>0;){(e=o.pop()).vertices;for(var s=e.adjacent,l=0;l<=n;++l){var u=s[l];if(u.boundary&&!(u.lastVisited<=-r)){for(var c=u.vertices,f=0;f<=n;++f){var d=c[f];a[f]=d<0?t:i[d]}var p=this.orient();if(p>0)return u;u.lastVisited=-r,0===p&&o.push(u)}}}return null},c.walk=function(e,t){var n=this.vertices.length-1,r=this.dimension,a=this.vertices,i=this.tuple,o=t?this.interior.length*Math.random()|0:this.interior.length-1,s=this.interior[o];e:for(;!s.boundary;){for(var l=s.vertices,u=s.adjacent,c=0;c<=r;++c)i[c]=a[l[c]];s.lastVisited=n;for(var c=0;c<=r;++c){var f=u[c];if(!(f.lastVisited>=n)){var d=i[c];i[c]=e;var p=this.orient();if(i[c]=d,p<0){s=f;continue e}f.boundary?f.lastVisited=-n:f.lastVisited=n}}return}return s},c.addPeaks=function(e,t){var n=this.vertices.length-1,r=this.dimension,a=this.vertices,l=this.tuple,u=this.interior,c=this.simplices,f=[t];t.lastVisited=n,t.vertices[t.vertices.indexOf(-1)]=n,t.boundary=!1,u.push(t);for(var d=[];f.length>0;){var t=f.pop(),p=t.vertices,h=t.adjacent,m=p.indexOf(n);if(!(m<0))for(var v=0;v<=r;++v)if(v!==m){var g=h[v];if(g.boundary&&!(g.lastVisited>=n)){var y=g.vertices;if(g.lastVisited!==-n){for(var b=0,x=0;x<=r;++x)y[x]<0?(b=x,l[x]=e):l[x]=a[y[x]];var _=this.orient();if(_>0){y[b]=n,g.boundary=!1,u.push(g),f.push(g),g.lastVisited=n;continue}g.lastVisited=-n}var w=g.adjacent,T=p.slice(),k=h.slice(),C=new i(T,k,!0);c.push(C);var E=w.indexOf(t);if(!(E<0)){w[E]=C,k[m]=g,T[v]=-1,k[v]=t,h[v]=C,C.flip();for(var x=0;x<=r;++x){var M=T[x];if(!(M<0||M===n)){for(var A=new Array(r-1),S=0,O=0;O<=r;++O){var P=T[O];P<0||O===x||(A[S++]=P)}d.push(new o(A,C,x))}}}}}}d.sort(s);for(var v=0;v+1<d.length;v+=2){var R=d[v],L=d[v+1],D=R.index,I=L.index;D<0||I<0||(R.cell.adjacent[R.index]=L.cell,L.cell.adjacent[L.index]=R.cell)}},c.insert=function(e,t){var n=this.vertices;n.push(e);var r=this.walk(e,t);if(r){for(var a=this.dimension,i=this.tuple,o=0;o<=a;++o){var s=r.vertices[o];i[o]=s<0?e:n[s]}var l=this.orient(i);l<0||(0!==l||(r=this.handleBoundaryDegeneracy(r,e)))&&this.addPeaks(e,r)}},c.boundary=function(){for(var e=this.dimension,t=[],n=this.simplices,r=n.length,a=0;a<r;++a){var i=n[a];if(i.boundary){for(var o=new Array(e),s=i.vertices,l=0,u=0,c=0;c<=e;++c)s[c]>=0?o[l++]=s[c]:u=1&c;if(u===(1&e)){var f=o[0];o[0]=o[1],o[1]=f}t.push(o)}}return t}},{"robust-orientation":486,"simplicial-complex":496}],397:[function(e,t,n){"use strict";var r=e("binary-search-bounds"),a=0,i=1;function o(e,t,n,r,a){this.mid=e,this.left=t,this.right=n,this.leftPoints=r,this.rightPoints=a,this.count=(t?t.count:0)+(n?n.count:0)+r.length}t.exports=function(e){return e&&0!==e.length?new b(y(e)):new b(null)};var s=o.prototype;function l(e,t){e.mid=t.mid,e.left=t.left,e.right=t.right,e.leftPoints=t.leftPoints,e.rightPoints=t.rightPoints,e.count=t.count}function u(e,t){var n=y(t);e.mid=n.mid,e.left=n.left,e.right=n.right,e.leftPoints=n.leftPoints,e.rightPoints=n.rightPoints,e.count=n.count}function c(e,t){var n=e.intervals([]);n.push(t),u(e,n)}function f(e,t){var n=e.intervals([]),r=n.indexOf(t);return r<0?a:(n.splice(r,1),u(e,n),i)}function d(e,t,n){for(var r=0;r<e.length&&e[r][0]<=t;++r){var a=n(e[r]);if(a)return a}}function p(e,t,n){for(var r=e.length-1;r>=0&&e[r][1]>=t;--r){var a=n(e[r]);if(a)return a}}function h(e,t){for(var n=0;n<e.length;++n){var r=t(e[n]);if(r)return r}}function m(e,t){return e-t}function v(e,t){var n=e[0]-t[0];return n||e[1]-t[1]}function g(e,t){var n=e[1]-t[1];return n||e[0]-t[0]}function y(e){if(0===e.length)return null;for(var t=[],n=0;n<e.length;++n)t.push(e[n][0],e[n][1]);t.sort(m);for(var r=t[t.length>>1],a=[],i=[],s=[],n=0;n<e.length;++n){var l=e[n];l[1]<r?a.push(l):r<l[0]?i.push(l):s.push(l)}var u=s,c=s.slice();return u.sort(v),c.sort(g),new o(r,y(a),y(i),u,c)}function b(e){this.root=e}s.intervals=function(e){return e.push.apply(e,this.leftPoints),this.left&&this.left.intervals(e),this.right&&this.right.intervals(e),e},s.insert=function(e){var t=this.count-this.leftPoints.length;if(this.count+=1,e[1]<this.mid)this.left?4*(this.left.count+1)>3*(t+1)?c(this,e):this.left.insert(e):this.left=y([e]);else if(e[0]>this.mid)this.right?4*(this.right.count+1)>3*(t+1)?c(this,e):this.right.insert(e):this.right=y([e]);else{var n=r.ge(this.leftPoints,e,v),a=r.ge(this.rightPoints,e,g);this.leftPoints.splice(n,0,e),this.rightPoints.splice(a,0,e)}},s.remove=function(e){var t=this.count-this.leftPoints;if(e[1]<this.mid){if(!this.left)return a;var n=this.right?this.right.count:0;if(4*n>3*(t-1))return f(this,e);var o=this.left.remove(e);return 2===o?(this.left=null,this.count-=1,i):(o===i&&(this.count-=1),o)}if(e[0]>this.mid){if(!this.right)return a;var s=this.left?this.left.count:0;if(4*s>3*(t-1))return f(this,e);var o=this.right.remove(e);return 2===o?(this.right=null,this.count-=1,i):(o===i&&(this.count-=1),o)}if(1===this.count)return this.leftPoints[0]===e?2:a;if(1===this.leftPoints.length&&this.leftPoints[0]===e){if(this.left&&this.right){for(var u=this,c=this.left;c.right;)u=c,c=c.right;if(u===this)c.right=this.right;else{var d=this.left,o=this.right;u.count-=c.count,u.right=c.left,c.left=d,c.right=o}l(this,c),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?l(this,this.left):l(this,this.right);return i}for(var d=r.ge(this.leftPoints,e,v);d<this.leftPoints.length&&this.leftPoints[d][0]===e[0];++d)if(this.leftPoints[d]===e){this.count-=1,this.leftPoints.splice(d,1);for(var o=r.ge(this.rightPoints,e,g);o<this.rightPoints.length&&this.rightPoints[o][1]===e[1];++o)if(this.rightPoints[o]===e)return this.rightPoints.splice(o,1),i}return a},s.queryPoint=function(e,t){if(e<this.mid){if(this.left){var n=this.left.queryPoint(e,t);if(n)return n}return d(this.leftPoints,e,t)}if(e>this.mid){if(this.right){var n=this.right.queryPoint(e,t);if(n)return n}return p(this.rightPoints,e,t)}return h(this.leftPoints,t)},s.queryInterval=function(e,t,n){if(e<this.mid&&this.left){var r=this.left.queryInterval(e,t,n);if(r)return r}if(t>this.mid&&this.right){var r=this.right.queryInterval(e,t,n);if(r)return r}return t<this.mid?d(this.leftPoints,t,n):e>this.mid?p(this.rightPoints,e,n):h(this.leftPoints,n)};var x=b.prototype;x.insert=function(e){this.root?this.root.insert(e):this.root=new o(e[0],null,null,[e],[e])},x.remove=function(e){if(this.root){var t=this.root.remove(e);return 2===t&&(this.root=null),t!==a}return!1},x.queryPoint=function(e,t){if(this.root)return this.root.queryPoint(e,t)},x.queryInterval=function(e,t,n){if(e<=t&&this.root)return this.root.queryInterval(e,t,n)},Object.defineProperty(x,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(x,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},{"binary-search-bounds":79}],398:[function(e,t,n){"use strict";t.exports=function(e,t){t=t||new Array(e.length);for(var n=0;n<e.length;++n)t[e[n]]=n;return t}},{}],399:[function(e,t,n){"use strict";t.exports=function(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=n;return t}},{}],400:[function(e,t,n){t.exports=!0},{}],401:[function(e,t,n){function r(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
t.exports=function(e){return null!=e&&(r(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&r(e.slice(0,0))}(e)||!!e._isBuffer)}},{}],402:[function(e,t,n){"use strict";t.exports="undefined"!=typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},{}],403:[function(e,t,n){"use strict";t.exports=i,t.exports.isMobile=i;var r=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,a=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function i(e){e||(e={});var t=e.ua;return t||"undefined"==typeof navigator||(t=navigator.userAgent),t&&t.headers&&"string"==typeof t.headers["user-agent"]&&(t=t.headers["user-agent"]),"string"==typeof t&&(e.tablet?a.test(t):r.test(t))}},{}],404:[function(e,t,n){"use strict";t.exports=function(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}},{}],405:[function(e,t,n){"use strict";var r=Object.prototype.toString;t.exports=function(e){var t;return"[object Object]"===r.call(e)&&(null===(t=Object.getPrototypeOf(e))||t===Object.getPrototypeOf({}))}},{}],406:[function(e,t,n){"use strict";t.exports=function(e){for(var t,n=e.length,r=0;r<n;r++)if(((t=e.charCodeAt(r))<9||t>13)&&32!==t&&133!==t&&160!==t&&5760!==t&&6158!==t&&(t<8192||t>8205)&&8232!==t&&8233!==t&&8239!==t&&8287!==t&&8288!==t&&12288!==t&&65279!==t)return!1;return!0}},{}],407:[function(e,t,n){"use strict";t.exports=function(e){return"string"==typeof e&&(e=e.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(e)&&/[\dz]$/i.test(e)&&e.length>4))}},{}],408:[function(e,t,n){t.exports=function(e,t,n){return e*(1-n)+t*n}},{}],409:[function(e,n,r){(function(e){!function(e,t){"object"==typeof r&&void 0!==n?n.exports=t():e.mapboxgl=t()}(this,function(){"use strict";var t,n,r;function a(e,a){if(t)if(n){var i="var sharedChunk = {}; ("+t+")(sharedChunk); ("+n+")(sharedChunk);",o={};t(o),(r=a(o)).workerUrl=window.URL.createObjectURL(new Blob([i],{type:"text/javascript"}))}else n=a;else t=a}return a(0,function(t){var n="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{};function r(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function a(e,t){return e(t={exports:{}},t.exports),t.exports}var i=o;function o(e,t,n,r){this.cx=3*e,this.bx=3*(n-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(r-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=r,this.p2x=n,this.p2y=r}o.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},o.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},o.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},o.prototype.solveCurveX=function(e,t){var n,r,a,i,o;for(void 0===t&&(t=1e-6),a=e,o=0;o<8;o++){if(i=this.sampleCurveX(a)-e,Math.abs(i)<t)return a;var s=this.sampleCurveDerivativeX(a);if(Math.abs(s)<1e-6)break;a-=i/s}if((a=e)<(n=0))return n;if(a>(r=1))return r;for(;n<r;){if(i=this.sampleCurveX(a),Math.abs(i-e)<t)return a;e>i?n=a:r=a,a=.5*(r-n)+n}return a},o.prototype.solve=function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))};var s=function(e,t,n){this.column=e,this.row=t,this.zoom=n};s.prototype.clone=function(){return new s(this.column,this.row,this.zoom)},s.prototype.zoomTo=function(e){return this.clone()._zoomTo(e)},s.prototype.sub=function(e){return this.clone()._sub(e)},s.prototype._zoomTo=function(e){var t=Math.pow(2,e-this.zoom);return this.column*=t,this.row*=t,this.zoom=e,this},s.prototype._sub=function(e){return e=e.zoomTo(this.zoom),this.column-=e.column,this.row-=e.row,this};var l=u;function u(e,t){this.x=e,this.y=t}function c(e,t,n,r){var a=new i(e,t,n,r);return function(e){return a.solve(e)}}u.prototype={clone:function(){return new u(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,n=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=n,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=t*this.x-n*this.y,a=n*this.x+t*this.y;return this.x=r,this.y=a,this},_rotateAround:function(e,t){var n=Math.cos(e),r=Math.sin(e),a=t.x+n*(this.x-t.x)-r*(this.y-t.y),i=t.y+r*(this.x-t.x)+n*(this.y-t.y);return this.x=a,this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},u.convert=function(e){return e instanceof u?e:Array.isArray(e)?new u(e[0],e[1]):e};var f=c(.25,.1,.25,1);function d(e,t,n){return Math.min(n,Math.max(t,e))}function p(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];for(var r=0,a=t;r<a.length;r+=1){var i=a[r];for(var o in i)e[o]=i[o]}return e}var h=1;function m(e,t){e.forEach(function(e){t[e]&&(t[e]=t[e].bind(t))})}function v(e,t){return-1!==e.indexOf(t,e.length-t.length)}function g(e,t,n){var r={};for(var a in e)r[a]=t.call(n||this,e[a],a,e);return r}function y(e,t,n){var r={};for(var a in e)t.call(n||this,e[a],a,e)&&(r[a]=e[a]);return r}function b(e){return Array.isArray(e)?e.map(b):"object"==typeof e&&e?g(e,b):e}var x={};function _(e){x[e]||("undefined"!=typeof console&&console.warn(e),x[e]=!0)}function w(e,t,n){return(n.y-e.y)*(t.x-e.x)>(t.y-e.y)*(n.x-e.x)}function T(e){for(var t=0,n=0,r=e.length,a=r-1,i=void 0,o=void 0;n<r;a=n++)i=e[n],t+=((o=e[a]).x-i.x)*(i.y+o.y);return t}var k={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(k);var C=function(e){function t(t,n,r){e.call(this,t),this.status=n,this.url=r,this.name=this.constructor.name,this.message=t}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},t}(Error);function E(e){var t=new self.XMLHttpRequest;for(var n in t.open("GET",e.url,!0),e.headers)t.setRequestHeader(n,e.headers[n]);return t.withCredentials="include"===e.credentials,t}var M=function(e,t){var n=E(e);return n.responseType="arraybuffer",n.onerror=function(){t(new Error(n.statusText))},n.onload=function(){var r=n.response;if(0===r.byteLength&&200===n.status)return t(new Error("http status 200 returned without content."));n.status>=200&&n.status<300&&n.response?t(null,{data:r,cacheControl:n.getResponseHeader("Cache-Control"),expires:n.getResponseHeader("Expires")}):t(new C(n.statusText,n.status,e.url))},n.send(),n};function A(e,t,n){n[e]=n[e]||[],n[e].push(t)}function S(e,t,n){if(n&&n[e]){var r=n[e].indexOf(t);-1!==r&&n[e].splice(r,1)}}var O=function(e,t){void 0===t&&(t={}),p(this,t),this.type=e},P=function(e){function t(t,n){void 0===n&&(n={}),e.call(this,"error",p({error:t},n))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(O),R=function(){};R.prototype.on=function(e,t){return this._listeners=this._listeners||{},A(e,t,this._listeners),this},R.prototype.off=function(e,t){return S(e,t,this._listeners),S(e,t,this._oneTimeListeners),this},R.prototype.once=function(e,t){return this._oneTimeListeners=this._oneTimeListeners||{},A(e,t,this._oneTimeListeners),this},R.prototype.fire=function(e){"string"==typeof e&&(e=new O(e,arguments[1]||{}));var t=e.type;if(this.listens(t)){e.target=this;for(var n=0,r=this._listeners&&this._listeners[t]?this._listeners[t].slice():[];n<r.length;n+=1)r[n].call(this,e);for(var a=0,i=this._oneTimeListeners&&this._oneTimeListeners[t]?this._oneTimeListeners[t].slice():[];a<i.length;a+=1){var o=i[a];S(t,o,this._oneTimeListeners),o.call(this,e)}var s=this._eventedParent;s&&(p(e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),s.fire(e))}else v(t,"error")?console.error(e&&e.error||e||"Empty error event"):v(t,"warning")&&console.warn(e&&e.warning||e||"Empty warning event");return this},R.prototype.listens=function(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)},R.prototype.setEventedParent=function(e,t){return this._eventedParent=e,this._eventedParentData=t,this};var L={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.0511,180,85.0511]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.0511,180,85.0511]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.0511,180,85.0511]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},lineMetrics:{type:"boolean",default:!1}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_fill:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_circle:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_line:{"line-cap":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{butt:{},round:{},square:{}},default:"butt"},"line-join":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{bevel:{},round:{},miter:{}},default:"miter"},"line-miter-limit":{type:"number",default:2,function:"interpolated","zoom-function":!0,requires:[{"line-join":"miter"}]},"line-round-limit":{type:"number",default:1.05,function:"interpolated","zoom-function":!0,requires:[{"line-join":"round"}]},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_symbol:{"symbol-placement":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{point:{},line:{}},default:"point"},"symbol-spacing":{type:"number",default:250,minimum:1,function:"interpolated","zoom-function":!0,units:"pixels",requires:[{"symbol-placement":"line"}]},"symbol-avoid-edges":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1},"icon-allow-overlap":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image"]},"icon-ignore-placement":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image"]},"icon-optional":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image","text-field"]},"icon-rotation-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"]},"icon-size":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,units:"factor of the original icon size",requires:["icon-image"]},"icon-text-fit":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"]},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",function:"interpolated","zoom-function":!0,requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}]},"icon-image":{type:"string",function:"piecewise-constant","zoom-function":!0,"property-function":!0,tokens:!0},"icon-rotate":{type:"number",default:0,period:360,function:"interpolated","zoom-function":!0,"property-function":!0,units:"degrees",requires:["icon-image"]},"icon-padding":{type:"number",default:2,minimum:0,function:"interpolated","zoom-function":!0,units:"pixels",requires:["icon-image"]},"icon-keep-upright":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":"line"}]},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,"property-function":!0,requires:["icon-image"]},"icon-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"]},"icon-pitch-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"]},"text-pitch-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"]},"text-rotation-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"]},"text-field":{type:"string",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:"",tokens:!0},"text-font":{type:"array",value:"string",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"]},"text-size":{type:"number",default:16,minimum:0,units:"pixels",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-line-height":{type:"number",default:1.2,units:"ems",function:"interpolated","zoom-function":!0,requires:["text-field"]},"text-letter-spacing":{type:"number",default:0,units:"ems",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-justify":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{left:{},center:{},right:{}},default:"center",requires:["text-field"]},"text-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field"]},"text-max-angle":{type:"number",default:45,units:"degrees",function:"interpolated","zoom-function":!0,requires:["text-field",{"symbol-placement":"line"}]},"text-rotate":{type:"number",default:0,period:360,units:"degrees",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",function:"interpolated","zoom-function":!0,requires:["text-field"]},"text-keep-upright":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":"line"}]},"text-transform":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"]},"text-offset":{type:"array",value:"number",units:"ems",function:"interpolated","zoom-function":!0,"property-function":!0,length:2,default:[0,0],requires:["text-field"]},"text-allow-overlap":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["text-field"]},"text-ignore-placement":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["text-field"]},"text-optional":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["text-field","icon-image"]},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function_stop:{type:"array",minimum:0,maximum:22,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Heatmap"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},transition:!1,"zoom-function":!0,"property-function":!1,function:"piecewise-constant"},position:{type:"array",default:[1.15,210,30],length:3,value:"number",transition:!0,function:"interpolated","zoom-function":!0,"property-function":!1},color:{type:"color",default:"#ffffff",function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0},intensity:{type:"number",default:.5,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!0},"fill-opacity":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:1,minimum:0,maximum:1,transition:!0},"fill-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-pattern"}]},"fill-outline-color":{type:"color",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}]},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"fill-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["fill-translate"]},"fill-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0}},paint_line:{"line-opacity":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:1,minimum:0,maximum:1,transition:!0},"line-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"line-pattern"}]},"line-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"line-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["line-translate"]},"line-width":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-gap-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-offset":{type:"number",default:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-blur":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-dasharray":{type:"array",value:"number",function:"piecewise-constant","zoom-function":!0,minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}]},"line-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0},"line-gradient":{type:"color",function:"interpolated","zoom-function":!1,"property-function":!1,transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}]}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"circle-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-blur":{type:"number",default:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"circle-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["circle-translate"]},"circle-pitch-scale":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map"},"circle-pitch-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"viewport"},"circle-stroke-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"circle-stroke-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"heatmap-weight":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!1},"heatmap-intensity":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],function:"interpolated","zoom-function":!1,"property-function":!1,transition:!1},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-halo-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-halo-blur":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"]},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-halo-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-halo-blur":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"]}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-hue-rotate":{type:"number",default:0,period:360,function:"interpolated","zoom-function":!0,transition:!0,units:"degrees"},"raster-brightness-min":{type:"number",function:"interpolated","zoom-function":!0,default:0,minimum:0,maximum:1,transition:!0},"raster-brightness-max":{type:"number",function:"interpolated","zoom-function":!0,default:1,minimum:0,maximum:1,transition:!0},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-fade-duration":{type:"number",default:300,minimum:0,function:"interpolated","zoom-function":!0,transition:!1,units:"milliseconds"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,function:"interpolated","zoom-function":!0,transition:!1},"hillshade-illumination-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"viewport"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"hillshade-shadow-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,transition:!0},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",function:"interpolated","zoom-function":!0,transition:!0},"hillshade-accent-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,transition:!0}},paint_background:{"background-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,transition:!0,requires:[{"!":"background-pattern"}]},"background-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,transition:!0}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!1,default:1,minimum:0,maximum:1,transition:!0},"fill-extrusion-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-extrusion-pattern"}]},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"fill-extrusion-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"]},"fill-extrusion-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0},"fill-extrusion-height":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:0,minimum:0,units:"meters",transition:!0},"fill-extrusion-base":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"]}}},D=function(e,t,n,r){this.message=(e?e+": ":"")+n,r&&(this.identifier=r),null!=t&&t.__line__&&(this.line=t.__line__)};function I(e){var t=e.key,n=e.value;return n?[new D(t,n,"constants have been deprecated as of v8")]:[]}function z(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];for(var r=0,a=t;r<a.length;r+=1){var i=a[r];for(var o in i)e[o]=i[o]}return e}function j(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function N(e){return Array.isArray(e)?e.map(N):j(e)}var F=function(e){function t(t,n){e.call(this,n),this.message=n,this.key=t}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Error),B=function(e,t){void 0===t&&(t=[]),this.parent=e,this.bindings={};for(var n=0,r=t;n<r.length;n+=1){var a=r[n],i=a[0],o=a[1];this.bindings[i]=o}};B.prototype.concat=function(e){return new B(this,e)},B.prototype.get=function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(e+" not found in scope.")},B.prototype.has=function(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)};var V={kind:"null"},U={kind:"number"},G={kind:"string"},H={kind:"boolean"},W={kind:"color"},q={kind:"object"},Y={kind:"value"},X={kind:"collator"};function Z(e,t){return{kind:"array",itemType:e,N:t}}function $(e){if("array"===e.kind){var t=$(e.itemType);return"number"==typeof e.N?"array<"+t+", "+e.N+">":"value"===e.itemType.kind?"array":"array<"+t+">"}return e.kind}var K=[V,U,G,H,W,q,Z(Y)];function J(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&!J(e.itemType,t.itemType)&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind)for(var n=0,r=K;n<r.length;n+=1)if(!J(r[n],t))return null}return"Expected "+$(e)+" but found "+$(t)+" instead."}var Q=a(function(e,t){var n={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function r(e){return(e=Math.round(e))<0?0:e>255?255:e}function a(e){return e<0?0:e>1?1:e}function i(e){return"%"===e[e.length-1]?r(parseFloat(e)/100*255):r(parseInt(e))}function o(e){return"%"===e[e.length-1]?a(parseFloat(e)/100):a(parseFloat(e))}function s(e,t,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?e+(t-e)*n*6:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}try{t.parseCSSColor=function(e){var t,a=e.replace(/ /g,"").toLowerCase();if(a in n)return n[a].slice();if("#"===a[0])return 4===a.length?(t=parseInt(a.substr(1),16))>=0&&t<=4095?[(3840&t)>>4|(3840&t)>>8,240&t|(240&t)>>4,15&t|(15&t)<<4,1]:null:7===a.length&&(t=parseInt(a.substr(1),16))>=0&&t<=16777215?[(16711680&t)>>16,(65280&t)>>8,255&t,1]:null;var l=a.indexOf("("),u=a.indexOf(")");if(-1!==l&&u+1===a.length){var c=a.substr(0,l),f=a.substr(l+1,u-(l+1)).split(","),d=1;switch(c){case"rgba":if(4!==f.length)return null;d=o(f.pop());case"rgb":return 3!==f.length?null:[i(f[0]),i(f[1]),i(f[2]),d];case"hsla":if(4!==f.length)return null;d=o(f.pop());case"hsl":if(3!==f.length)return null;var p=(parseFloat(f[0])%360+360)%360/360,h=o(f[1]),m=o(f[2]),v=m<=.5?m*(h+1):m+h-m*h,g=2*m-v;return[r(255*s(g,v,p+1/3)),r(255*s(g,v,p)),r(255*s(g,v,p-1/3)),d];default:return null}}return null}}catch(e){}}).parseCSSColor,ee=function(e,t,n,r){void 0===r&&(r=1),this.r=e,this.g=t,this.b=n,this.a=r};ee.parse=function(e){if(e){if(e instanceof ee)return e;if("string"==typeof e){var t=Q(e);if(t)return new ee(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3])}}},ee.prototype.toString=function(){var e=this.toArray(),t=e[0],n=e[1],r=e[2],a=e[3];return"rgba("+Math.round(t)+","+Math.round(n)+","+Math.round(r)+","+a+")"},ee.prototype.toArray=function(){var e=this.r,t=this.g,n=this.b,r=this.a;return 0===r?[0,0,0,0]:[255*e/r,255*t/r,255*n/r,r]},ee.black=new ee(0,0,0,1),ee.white=new ee(1,1,1,1),ee.transparent=new ee(0,0,0,0);var te=function(e,t,n){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};te.prototype.compare=function(e,t){return this.collator.compare(e,t)},te.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var ne=function(e,t,n){this.type=X,this.locale=n,this.caseSensitive=e,this.diacriticSensitive=t};function re(e,t,n,r){return"number"==typeof e&&e>=0&&e<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:"Invalid rgba value ["+[e,t,n,r].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof r?[e,t,n,r]:[e,t,n]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function ae(e){if(null===e)return V;if("string"==typeof e)return G;if("boolean"==typeof e)return H;if("number"==typeof e)return U;if(e instanceof ee)return W;if(e instanceof te)return X;if(Array.isArray(e)){for(var t,n=e.length,r=0,a=e;r<a.length;r+=1){var i=ae(a[r]);if(t){if(t===i)continue;t=Y;break}t=i}return Z(t||Y,n)}return q}ne.parse=function(e,t){if(2!==e.length)return t.error("Expected one argument.");var n=e[1];if("object"!=typeof n||Array.isArray(n))return t.error("Collator options argument must be an object.");var r=t.parse(void 0!==n["case-sensitive"]&&n["case-sensitive"],1,H);if(!r)return null;var a=t.parse(void 0!==n["diacritic-sensitive"]&&n["diacritic-sensitive"],1,H);if(!a)return null;var i=null;return n.locale&&!(i=t.parse(n.locale,1,G))?null:new ne(r,a,i)},ne.prototype.evaluate=function(e){return new te(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)},ne.prototype.eachChild=function(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)},ne.prototype.possibleOutputs=function(){return[void 0]},ne.prototype.serialize=function(){var e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]};var ie=function(e,t){this.type=e,this.value=t};ie.parse=function(e,t){if(2!==e.length)return t.error("'literal' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(!function e(t){if(null===t)return!0;if("string"==typeof t)return!0;if("boolean"==typeof t)return!0;if("number"==typeof t)return!0;if(t instanceof ee)return!0;if(t instanceof te)return!0;if(Array.isArray(t)){for(var n=0,r=t;n<r.length;n+=1)if(!e(r[n]))return!1;return!0}if("object"==typeof t){for(var a in t)if(!e(t[a]))return!1;return!0}return!1}(e[1]))return t.error("invalid value");var n=e[1],r=ae(n),a=t.expectedType;return"array"!==r.kind||0!==r.N||!a||"array"!==a.kind||"number"==typeof a.N&&0!==a.N||(r=a),new ie(r,n)},ie.prototype.evaluate=function(){return this.value},ie.prototype.eachChild=function(){},ie.prototype.possibleOutputs=function(){return[this.value]},ie.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof ee?["rgba"].concat(this.value.toArray()):this.value};var oe=function(e){this.name="ExpressionEvaluationError",this.message=e};oe.prototype.toJSON=function(){return this.message};var se={string:G,number:U,boolean:H,object:q},le=function(e,t){this.type=e,this.args=t};le.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");for(var n=e[0],r=se[n],a=[],i=1;i<e.length;i++){var o=t.parse(e[i],i,Y);if(!o)return null;a.push(o)}return new le(r,a)},le.prototype.evaluate=function(e){for(var t=0;t<this.args.length;t++){var n=this.args[t].evaluate(e);if(!J(this.type,ae(n)))return n;if(t===this.args.length-1)throw new oe("Expected value to be of type "+$(this.type)+", but found "+$(ae(n))+" instead.")}return null},le.prototype.eachChild=function(e){this.args.forEach(e)},le.prototype.possibleOutputs=function(){return(e=[]).concat.apply(e,this.args.map(function(e){return e.possibleOutputs()}));var e},le.prototype.serialize=function(){return[this.type.kind].concat(this.args.map(function(e){return e.serialize()}))};var ue={string:G,number:U,boolean:H},ce=function(e,t){this.type=e,this.input=t};ce.parse=function(e,t){if(e.length<2||e.length>4)return t.error("Expected 1, 2, or 3 arguments, but found "+(e.length-1)+" instead.");var n,r;if(e.length>2){var a=e[1];if("string"!=typeof a||!(a in ue))return t.error('The item type argument of "array" must be one of string, number, boolean',1);n=ue[a]}else n=Y;if(e.length>3){if("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2]))return t.error('The length argument to "array" must be a positive integer literal',2);r=e[2]}var i=Z(n,r),o=t.parse(e[e.length-1],e.length-1,Y);return o?new ce(i,o):null},ce.prototype.evaluate=function(e){var t=this.input.evaluate(e);if(J(this.type,ae(t)))throw new oe("Expected value to be of type "+$(this.type)+", but found "+$(ae(t))+" instead.");return t},ce.prototype.eachChild=function(e){e(this.input)},ce.prototype.possibleOutputs=function(){return this.input.possibleOutputs()},ce.prototype.serialize=function(){var e=["array"],t=this.type.itemType;if("string"===t.kind||"number"===t.kind||"boolean"===t.kind){e.push(t.kind);var n=this.type.N;"number"==typeof n&&e.push(n)}return e.push(this.input.serialize()),e};var fe={"to-number":U,"to-color":W},de=function(e,t){this.type=e,this.args=t};de.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");for(var n=e[0],r=fe[n],a=[],i=1;i<e.length;i++){var o=t.parse(e[i],i,Y);if(!o)return null;a.push(o)}return new de(r,a)},de.prototype.evaluate=function(e){if("color"===this.type.kind){for(var t,n,r=0,a=this.args;r<a.length;r+=1)if(n=null,"string"==typeof(t=a[r].evaluate(e))){var i=e.parseColor(t);if(i)return i}else if(Array.isArray(t)&&!(n=t.length<3||t.length>4?"Invalid rbga value "+JSON.stringify(t)+": expected an array containing either three or four numeric values.":re(t[0],t[1],t[2],t[3])))return new ee(t[0]/255,t[1]/255,t[2]/255,t[3]);throw new oe(n||"Could not parse color from value '"+("string"==typeof t?t:JSON.stringify(t))+"'")}for(var o=null,s=0,l=this.args;s<l.length;s+=1)if(null!==(o=l[s].evaluate(e))){var u=Number(o);if(!isNaN(u))return u}throw new oe("Could not convert "+JSON.stringify(o)+" to number.")},de.prototype.eachChild=function(e){this.args.forEach(e)},de.prototype.possibleOutputs=function(){return(e=[]).concat.apply(e,this.args.map(function(e){return e.possibleOutputs()}));var e},de.prototype.serialize=function(){var e=["to-"+this.type.kind];return this.eachChild(function(t){e.push(t.serialize())}),e};var pe=["Unknown","Point","LineString","Polygon"],he=function(){this._parseColorCache={}};he.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},he.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?pe[this.feature.type]:this.feature.type:null},he.prototype.properties=function(){return this.feature&&this.feature.properties||{}},he.prototype.parseColor=function(e){var t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=ee.parse(e)),t};var me=function(e,t,n,r){this.name=e,this.type=t,this._evaluate=n,this.args=r};function ve(e){if(e instanceof me){if("get"===e.name&&1===e.args.length)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}var t=!0;return e.eachChild(function(e){t&&!ve(e)&&(t=!1)}),t}function ge(e,t){if(e instanceof me&&t.indexOf(e.name)>=0)return!1;var n=!0;return e.eachChild(function(e){n&&!ge(e,t)&&(n=!1)}),n}me.prototype.evaluate=function(e){return this._evaluate(e,this.args)},me.prototype.eachChild=function(e){this.args.forEach(e)},me.prototype.possibleOutputs=function(){return[void 0]},me.prototype.serialize=function(){return[this.name].concat(this.args.map(function(e){return e.serialize()}))},me.parse=function(e,t){var n=e[0],r=me.definitions[n];if(!r)return t.error('Unknown expression "'+n+'". If you wanted a literal array, use ["literal", [...]].',0);for(var a=Array.isArray(r)?r[0]:r.type,i=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,o=i.filter(function(t){var n=t[0];return!Array.isArray(n)||n.length===e.length-1}),s=[],l=1;l<e.length;l++){var u=e[l],c=void 0;if(1===o.length){var f=o[0][0];c=Array.isArray(f)?f[l-1]:f.type}var d=t.parse(u,1+s.length,c);if(!d)return null;s.push(d)}for(var p=null,h=0,m=o;h<m.length;h+=1){var v=m[h],g=v[0],y=v[1];if(p=new be(t.registry,t.path,null,t.scope),Array.isArray(g)&&g.length!==s.length)p.error("Expected "+g.length+" arguments, but found "+s.length+" instead.");else{for(var b=0;b<s.length;b++){var x=Array.isArray(g)?g[b]:g.type,_=s[b];p.concat(b+1).checkSubtype(x,_.type)}if(0===p.errors.length)return new me(n,a,y,s)}}if(1===o.length)t.errors.push.apply(t.errors,p.errors);else{var w=(o.length?o:i).map(function(e){var t,n=e[0];return t=n,Array.isArray(t)?"("+t.map($).join(", ")+")":"("+$(t.type)+"...)"}).join(" | "),T=s.map(function(e){return $(e.type)}).join(", ");t.error("Expected arguments of type "+w+", but found ("+T+") instead.")}return null},me.register=function(e,t){for(var n in me.definitions=t,t)e[n]=me};var ye=function(e,t){this.type=t.type,this.name=e,this.boundExpression=t};ye.parse=function(e,t){if(2!==e.length||"string"!=typeof e[1])return t.error("'var' expression requires exactly one string literal argument.");var n=e[1];return t.scope.has(n)?new ye(n,t.scope.get(n)):t.error('Unknown variable "'+n+'". Make sure "'+n+'" has been bound in an enclosing "let" expression before using it.',1)},ye.prototype.evaluate=function(e){return this.boundExpression.evaluate(e)},ye.prototype.eachChild=function(){},ye.prototype.possibleOutputs=function(){return[void 0]},ye.prototype.serialize=function(){return["var",this.name]};var be=function(e,t,n,r,a){void 0===t&&(t=[]),void 0===r&&(r=new B),void 0===a&&(a=[]),this.registry=e,this.path=t,this.key=t.map(function(e){return"["+e+"]"}).join(""),this.scope=r,this.errors=a,this.expectedType=n};function xe(e,t){for(var n,r,a=0,i=e.length-1,o=0;a<=i;){if(n=e[o=Math.floor((a+i)/2)],r=e[o+1],t===n||t>n&&t<r)return o;if(n<t)a=o+1;else{if(!(n>t))throw new oe("Input is not a number.");i=o-1}}return Math.max(o-1,0)}be.prototype.parse=function(e,t,n,r,a){return void 0===a&&(a={}),t?this.concat(t,n,r)._parse(e,a):this._parse(e,a)},be.prototype._parse=function(e,t){if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var n=e[0];if("string"!=typeof n)return this.error("Expression name must be a string, but found "+typeof n+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var r=this.registry[n];if(r){var a=r.parse(e,this);if(!a)return null;if(this.expectedType){var i=this.expectedType,o=a.type;if("string"!==i.kind&&"number"!==i.kind&&"boolean"!==i.kind&&"object"!==i.kind||"value"!==o.kind)if("array"===i.kind&&"value"===o.kind)t.omitTypeAnnotations||(a=new ce(i,a));else if("color"!==i.kind||"value"!==o.kind&&"string"!==o.kind){if(this.checkSubtype(this.expectedType,a.type))return null}else t.omitTypeAnnotations||(a=new de(i,[a]));else t.omitTypeAnnotations||(a=new le(i,[a]))}if(!(a instanceof ie)&&function e(t){if(t instanceof ye)return e(t.boundExpression);if(t instanceof me&&"error"===t.name)return!1;if(t instanceof ne)return!1;var n=t instanceof de||t instanceof le||t instanceof ce,r=!0;return t.eachChild(function(t){r=n?r&&e(t):r&&t instanceof ie}),!!r&&ve(t)&&ge(t,["zoom","heatmap-density","line-progress","is-supported-script"])}(a)){var s=new he;try{a=new ie(a.type,a.evaluate(s))}catch(e){return this.error(e.message),null}}return a}return this.error('Unknown expression "'+n+'". If you wanted a literal array, use ["literal", [...]].',0)}return void 0===e?this.error("'undefined' value invalid. Use null instead."):"object"==typeof e?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof e+" instead.")},be.prototype.concat=function(e,t,n){var r="number"==typeof e?this.path.concat(e):this.path,a=n?this.scope.concat(n):this.scope;return new be(this.registry,r,t||null,a,this.errors)},be.prototype.error=function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];var r=""+this.key+t.map(function(e){return"["+e+"]"}).join("");this.errors.push(new F(r,e))},be.prototype.checkSubtype=function(e,t){var n=J(e,t);return n&&this.error(n),n};var _e=function(e,t,n){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(var r=0,a=n;r<a.length;r+=1){var i=a[r],o=i[0],s=i[1];this.labels.push(o),this.outputs.push(s)}};function we(e,t,n){return e*(1-n)+t*n}_e.parse=function(e,t){var n=e[1],r=e.slice(2);if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(!(n=t.parse(n,1,U)))return null;var a=[],i=null;t.expectedType&&"value"!==t.expectedType.kind&&(i=t.expectedType),r.unshift(-1/0);for(var o=0;o<r.length;o+=2){var s=r[o],l=r[o+1],u=o+1,c=o+2;if("number"!=typeof s)return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',u);if(a.length&&a[a.length-1][0]>=s)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',u);var f=t.parse(l,c,i);if(!f)return null;i=i||f.type,a.push([s,f])}return new _e(i,n,a)},_e.prototype.evaluate=function(e){var t=this.labels,n=this.outputs;if(1===t.length)return n[0].evaluate(e);var r=this.input.evaluate(e);if(r<=t[0])return n[0].evaluate(e);var a=t.length;return r>=t[a-1]?n[a-1].evaluate(e):n[xe(t,r)].evaluate(e)},_e.prototype.eachChild=function(e){e(this.input);for(var t=0,n=this.outputs;t<n.length;t+=1)e(n[t])},_e.prototype.possibleOutputs=function(){return(e=[]).concat.apply(e,this.outputs.map(function(e){return e.possibleOutputs()}));var e},_e.prototype.serialize=function(){for(var e=["step",this.input.serialize()],t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e};var Te=Object.freeze({number:we,color:function(e,t,n){return new ee(we(e.r,t.r,n),we(e.g,t.g,n),we(e.b,t.b,n),we(e.a,t.a,n))},array:function(e,t,n){return e.map(function(e,r){return we(e,t[r],n)})}}),ke=function(e,t,n,r){this.type=e,this.interpolation=t,this.input=n,this.labels=[],this.outputs=[];for(var a=0,i=r;a<i.length;a+=1){var o=i[a],s=o[0],l=o[1];this.labels.push(s),this.outputs.push(l)}};function Ce(e,t,n,r){var a=r-n,i=e-n;return 0===a?0:1===t?i/a:(Math.pow(t,i)-1)/(Math.pow(t,a)-1)}ke.interpolationFactor=function(e,t,n,r){var a=0;if("exponential"===e.name)a=Ce(t,e.base,n,r);else if("linear"===e.name)a=Ce(t,1,n,r);else if("cubic-bezier"===e.name){var o=e.controlPoints;a=new i(o[0],o[1],o[2],o[3]).solve(Ce(t,1,n,r))}return a},ke.parse=function(e,t){var n=e[1],r=e[2],a=e.slice(3);if(!Array.isArray(n)||0===n.length)return t.error("Expected an interpolation type expression.",1);if("linear"===n[0])n={name:"linear"};else if("exponential"===n[0]){var i=n[1];if("number"!=typeof i)return t.error("Exponential interpolation requires a numeric base.",1,1);n={name:"exponential",base:i}}else{if("cubic-bezier"!==n[0])return t.error("Unknown interpolation type "+String(n[0]),1,0);var o=n.slice(1);if(4!==o.length||o.some(function(e){return"number"!=typeof e||e<0||e>1}))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);n={name:"cubic-bezier",controlPoints:o}}if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(!(r=t.parse(r,2,U)))return null;var s=[],l=null;t.expectedType&&"value"!==t.expectedType.kind&&(l=t.expectedType);for(var u=0;u<a.length;u+=2){var c=a[u],f=a[u+1],d=u+3,p=u+4;if("number"!=typeof c)return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',d);if(s.length&&s[s.length-1][0]>=c)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',d);var h=t.parse(f,p,l);if(!h)return null;l=l||h.type,s.push([c,h])}return"number"===l.kind||"color"===l.kind||"array"===l.kind&&"number"===l.itemType.kind&&"number"==typeof l.N?new ke(l,n,r,s):t.error("Type "+$(l)+" is not interpolatable.")},ke.prototype.evaluate=function(e){var t=this.labels,n=this.outputs;if(1===t.length)return n[0].evaluate(e);var r=this.input.evaluate(e);if(r<=t[0])return n[0].evaluate(e);var a=t.length;if(r>=t[a-1])return n[a-1].evaluate(e);var i=xe(t,r),o=t[i],s=t[i+1],l=ke.interpolationFactor(this.interpolation,r,o,s),u=n[i].evaluate(e),c=n[i+1].evaluate(e);return Te[this.type.kind.toLowerCase()](u,c,l)},ke.prototype.eachChild=function(e){e(this.input);for(var t=0,n=this.outputs;t<n.length;t+=1)e(n[t])},ke.prototype.possibleOutputs=function(){return(e=[]).concat.apply(e,this.outputs.map(function(e){return e.possibleOutputs()}));var e},ke.prototype.serialize=function(){for(var e=["interpolate","linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints),this.input.serialize()],t=0;t<this.labels.length;t++)e.push(this.labels[t],this.outputs[t].serialize());return e};var Ee=function(e,t){this.type=e,this.args=t};Ee.parse=function(e,t){if(e.length<2)return t.error("Expectected at least one argument.");var n=null,r=t.expectedType;r&&"value"!==r.kind&&(n=r);for(var a=[],i=0,o=e.slice(1);i<o.length;i+=1){var s=o[i],l=t.parse(s,1+a.length,n,void 0,{omitTypeAnnotations:!0});if(!l)return null;n=n||l.type,a.push(l)}var u=r&&a.some(function(e){return J(r,e.type)});return new Ee(u?Y:n,a)},Ee.prototype.evaluate=function(e){for(var t=null,n=0,r=this.args;n<r.length&&null===(t=r[n].evaluate(e));n+=1);return t},Ee.prototype.eachChild=function(e){this.args.forEach(e)},Ee.prototype.possibleOutputs=function(){return(e=[]).concat.apply(e,this.args.map(function(e){return e.possibleOutputs()}));var e},Ee.prototype.serialize=function(){var e=["coalesce"];return this.eachChild(function(t){e.push(t.serialize())}),e};var Me=function(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t};Me.prototype.evaluate=function(e){return this.result.evaluate(e)},Me.prototype.eachChild=function(e){for(var t=0,n=this.bindings;t<n.length;t+=1)e(n[t][1]);e(this.result)},Me.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found "+(e.length-1)+" instead.");for(var n=[],r=1;r<e.length-1;r+=2){var a=e[r];if("string"!=typeof a)return t.error("Expected string, but found "+typeof a+" instead.",r);if(/[^a-zA-Z0-9_]/.test(a))return t.error("Variable names must contain only alphanumeric characters or '_'.",r);var i=t.parse(e[r+1],r+1);if(!i)return null;n.push([a,i])}var o=t.parse(e[e.length-1],e.length-1,void 0,n);return o?new Me(n,o):null},Me.prototype.possibleOutputs=function(){return this.result.possibleOutputs()},Me.prototype.serialize=function(){for(var e=["let"],t=0,n=this.bindings;t<n.length;t+=1){var r=n[t],a=r[0],i=r[1];e.push(a,i.serialize())}return e.push(this.result.serialize()),e};var Ae=function(e,t,n){this.type=e,this.index=t,this.input=n};Ae.parse=function(e,t){if(3!==e.length)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var n=t.parse(e[1],1,U),r=t.parse(e[2],2,Z(t.expectedType||Y));if(!n||!r)return null;var a=r.type;return new Ae(a.itemType,n,r)},Ae.prototype.evaluate=function(e){var t=this.index.evaluate(e),n=this.input.evaluate(e);if(t<0)throw new oe("Array index out of bounds: "+t+" < 0.");if(t>=n.length)throw new oe("Array index out of bounds: "+t+" > "+(n.length-1)+".");if(t!==Math.floor(t))throw new oe("Array index must be an integer, but found "+t+" instead.");return n[t]},Ae.prototype.eachChild=function(e){e(this.index),e(this.input)},Ae.prototype.possibleOutputs=function(){return[void 0]},Ae.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Se=function(e,t,n,r,a,i){this.inputType=e,this.type=t,this.input=n,this.cases=r,this.outputs=a,this.otherwise=i};Se.parse=function(e,t){if(e.length<5)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if(e.length%2!=1)return t.error("Expected an even number of arguments.");var n,r;t.expectedType&&"value"!==t.expectedType.kind&&(r=t.expectedType);for(var a={},i=[],o=2;o<e.length-1;o+=2){var s=e[o],l=e[o+1];Array.isArray(s)||(s=[s]);var u=t.concat(o);if(0===s.length)return u.error("Expected at least one branch label.");for(var c=0,f=s;c<f.length;c+=1){var d=f[c];if("number"!=typeof d&&"string"!=typeof d)return u.error("Branch labels must be numbers or strings.");if("number"==typeof d&&Math.abs(d)>Number.MAX_SAFE_INTEGER)return u.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof d&&Math.floor(d)!==d)return u.error("Numeric branch labels must be integer values.");if(n){if(u.checkSubtype(n,ae(d)))return null}else n=ae(d);if(void 0!==a[String(d)])return u.error("Branch labels must be unique.");a[String(d)]=i.length}var p=t.parse(l,o,r);if(!p)return null;r=r||p.type,i.push(p)}var h=t.parse(e[1],1,n);if(!h)return null;var m=t.parse(e[e.length-1],e.length-1,r);return m?new Se(n,r,h,a,i,m):null},Se.prototype.evaluate=function(e){var t=this.input.evaluate(e);return(this.outputs[this.cases[t]]||this.otherwise).evaluate(e)},Se.prototype.eachChild=function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)},Se.prototype.possibleOutputs=function(){return(e=[]).concat.apply(e,this.outputs.map(function(e){return e.possibleOutputs()})).concat(this.otherwise.possibleOutputs());var e},Se.prototype.serialize=function(){for(var e=this,t=["match",this.input.serialize()],n=[],r={},a=0,i=Object.keys(this.cases).sort();a<i.length;a+=1){var o=i[a],s=r[e.cases[o]];void 0===s?(r[e.cases[o]]=n.length,n.push([e.cases[o],[o]])):n[s][1].push(o)}for(var l=function(t){return"number"===e.input.type.kind?Number(t):t},u=0,c=n;u<c.length;u+=1){var f=c[u],d=f[0],p=f[1];1===p.length?t.push(l(p[0])):t.push(p.map(l)),t.push(e.outputs[d].serialize())}return t.push(this.otherwise.serialize()),t};var Oe=function(e,t,n){this.type=e,this.branches=t,this.otherwise=n};function Pe(e){return"string"===e.kind||"number"===e.kind||"boolean"===e.kind||"null"===e.kind}function Re(e,t){return function(){function n(e,t,n){this.type=H,this.lhs=e,this.rhs=t,this.collator=n}return n.parse=function(e,t){if(3!==e.length&&4!==e.length)return t.error("Expected two or three arguments.");var r=t.parse(e[1],1,Y);if(!r)return null;var a=t.parse(e[2],2,Y);if(!a)return null;if(!Pe(r.type)&&!Pe(a.type))return t.error("Expected at least one argument to be a string, number, boolean, or null, but found ("+$(r.type)+", "+$(a.type)+") instead.");if(r.type.kind!==a.type.kind&&"value"!==r.type.kind&&"value"!==a.type.kind)return t.error("Cannot compare "+$(r.type)+" and "+$(a.type)+".");var i=null;if(4===e.length){if("string"!==r.type.kind&&"string"!==a.type.kind)return t.error("Cannot use collator to compare non-string types.");if(!(i=t.parse(e[3],3,X)))return null}return new n(r,a,i)},n.prototype.evaluate=function(e){var n=this.collator?0===this.collator.evaluate(e).compare(this.lhs.evaluate(e),this.rhs.evaluate(e)):this.lhs.evaluate(e)===this.rhs.evaluate(e);return t?!n:n},n.prototype.eachChild=function(e){e(this.lhs),e(this.rhs),this.collator&&e(this.collator)},n.prototype.possibleOutputs=function(){return[!0,!1]},n.prototype.serialize=function(){var t=[e];return this.eachChild(function(e){t.push(e.serialize())}),t},n}()}Oe.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found only "+(e.length-1)+".");if(e.length%2!=0)return t.error("Expected an odd number of arguments.");var n;t.expectedType&&"value"!==t.expectedType.kind&&(n=t.expectedType);for(var r=[],a=1;a<e.length-1;a+=2){var i=t.parse(e[a],a,H);if(!i)return null;var o=t.parse(e[a+1],a+1,n);if(!o)return null;r.push([i,o]),n=n||o.type}var s=t.parse(e[e.length-1],e.length-1,n);return s?new Oe(n,r,s):null},Oe.prototype.evaluate=function(e){for(var t=0,n=this.branches;t<n.length;t+=1){var r=n[t],a=r[0],i=r[1];if(a.evaluate(e))return i.evaluate(e)}return this.otherwise.evaluate(e)},Oe.prototype.eachChild=function(e){for(var t=0,n=this.branches;t<n.length;t+=1){var r=n[t],a=r[0],i=r[1];e(a),e(i)}e(this.otherwise)},Oe.prototype.possibleOutputs=function(){return(e=[]).concat.apply(e,this.branches.map(function(e){return e[0],e[1].possibleOutputs()})).concat(this.otherwise.possibleOutputs());var e},Oe.prototype.serialize=function(){var e=["case"];return this.eachChild(function(t){e.push(t.serialize())}),e};var Le=Re("==",!1),De=Re("!=",!0),Ie=function(e){this.type=U,this.input=e};Ie.parse=function(e,t){if(2!==e.length)return t.error("Expected 1 argument, but found "+(e.length-1)+" instead.");var n=t.parse(e[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?t.error("Expected argument of type string or array, but found "+$(n.type)+" instead."):new Ie(n):null},Ie.prototype.evaluate=function(e){var t=this.input.evaluate(e);if("string"==typeof t)return t.length;if(Array.isArray(t))return t.length;throw new oe("Expected value to be of type string or array, but found "+$(ae(t))+" instead.")},Ie.prototype.eachChild=function(e){e(this.input)},Ie.prototype.possibleOutputs=function(){return[void 0]},Ie.prototype.serialize=function(){var e=["length"];return this.eachChild(function(t){e.push(t.serialize())}),e};var ze={"==":Le,"!=":De,array:ce,at:Ae,boolean:le,case:Oe,coalesce:Ee,collator:ne,interpolate:ke,length:Ie,let:Me,literal:ie,match:Se,number:le,object:le,step:_e,string:le,"to-color":de,"to-number":de,var:ye};function je(e,t){var n=t[0],r=t[1],a=t[2],i=t[3];n=n.evaluate(e),r=r.evaluate(e),a=a.evaluate(e);var o=i?i.evaluate(e):1,s=re(n,r,a,o);if(s)throw new oe(s);return new ee(n/255*o,r/255*o,a/255*o,o)}function Ne(e,t){return e in t}function Fe(e,t){var n=t[e];return void 0===n?null:n}function Be(e,t){var n=t[0],r=t[1];return n.evaluate(e)<r.evaluate(e)}function Ve(e,t){var n=t[0],r=t[1];return n.evaluate(e)>r.evaluate(e)}function Ue(e,t){var n=t[0],r=t[1];return n.evaluate(e)<=r.evaluate(e)}function Ge(e,t){var n=t[0],r=t[1];return n.evaluate(e)>=r.evaluate(e)}function He(e){return{type:e}}function We(e){return{result:"success",value:e}}function qe(e){return{result:"error",value:e}}me.register(ze,{error:[{kind:"error"},[G],function(e,t){var n=t[0];throw new oe(n.evaluate(e))}],typeof:[G,[Y],function(e,t){return $(ae(t[0].evaluate(e)))}],"to-string":[G,[Y],function(e,t){var n=t[0],r=typeof(n=n.evaluate(e));return null===n?"":"string"===r||"number"===r||"boolean"===r?String(n):n instanceof ee?n.toString():JSON.stringify(n)}],"to-boolean":[H,[Y],function(e,t){var n=t[0];return Boolean(n.evaluate(e))}],"to-rgba":[Z(U,4),[W],function(e,t){return t[0].evaluate(e).toArray()}],rgb:[W,[U,U,U],je],rgba:[W,[U,U,U,U],je],has:{type:H,overloads:[[[G],function(e,t){return Ne(t[0].evaluate(e),e.properties())}],[[G,q],function(e,t){var n=t[0],r=t[1];return Ne(n.evaluate(e),r.evaluate(e))}]]},get:{type:Y,overloads:[[[G],function(e,t){return Fe(t[0].evaluate(e),e.properties())}],[[G,q],function(e,t){var n=t[0],r=t[1];return Fe(n.evaluate(e),r.evaluate(e))}]]},properties:[q,[],function(e){return e.properties()}],"geometry-type":[G,[],function(e){return e.geometryType()}],id:[Y,[],function(e){return e.id()}],zoom:[U,[],function(e){return e.globals.zoom}],"heatmap-density":[U,[],function(e){return e.globals.heatmapDensity||0}],"line-progress":[U,[],function(e){return e.globals.lineProgress||0}],"+":[U,He(U),function(e,t){for(var n=0,r=0,a=t;r<a.length;r+=1)n+=a[r].evaluate(e);return n}],"*":[U,He(U),function(e,t){for(var n=1,r=0,a=t;r<a.length;r+=1)n*=a[r].evaluate(e);return n}],"-":{type:U,overloads:[[[U,U],function(e,t){var n=t[0],r=t[1];return n.evaluate(e)-r.evaluate(e)}],[[U],function(e,t){return-t[0].evaluate(e)}]]},"/":[U,[U,U],function(e,t){var n=t[0],r=t[1];return n.evaluate(e)/r.evaluate(e)}],"%":[U,[U,U],function(e,t){var n=t[0],r=t[1];return n.evaluate(e)%r.evaluate(e)}],ln2:[U,[],function(){return Math.LN2}],pi:[U,[],function(){return Math.PI}],e:[U,[],function(){return Math.E}],"^":[U,[U,U],function(e,t){var n=t[0],r=t[1];return Math.pow(n.evaluate(e),r.evaluate(e))}],sqrt:[U,[U],function(e,t){var n=t[0];return Math.sqrt(n.evaluate(e))}],log10:[U,[U],function(e,t){var n=t[0];return Math.log10(n.evaluate(e))}],ln:[U,[U],function(e,t){var n=t[0];return Math.log(n.evaluate(e))}],log2:[U,[U],function(e,t){var n=t[0];return Math.log2(n.evaluate(e))}],sin:[U,[U],function(e,t){var n=t[0];return Math.sin(n.evaluate(e))}],cos:[U,[U],function(e,t){var n=t[0];return Math.cos(n.evaluate(e))}],tan:[U,[U],function(e,t){var n=t[0];return Math.tan(n.evaluate(e))}],asin:[U,[U],function(e,t){var n=t[0];return Math.asin(n.evaluate(e))}],acos:[U,[U],function(e,t){var n=t[0];return Math.acos(n.evaluate(e))}],atan:[U,[U],function(e,t){var n=t[0];return Math.atan(n.evaluate(e))}],min:[U,He(U),function(e,t){return Math.min.apply(Math,t.map(function(t){return t.evaluate(e)}))}],max:[U,He(U),function(e,t){return Math.max.apply(Math,t.map(function(t){return t.evaluate(e)}))}],abs:[U,[U],function(e,t){var n=t[0];return Math.abs(n.evaluate(e))}],round:[U,[U],function(e,t){var n=t[0].evaluate(e);return n<0?-Math.round(-n):Math.round(n)}],floor:[U,[U],function(e,t){var n=t[0];return Math.floor(n.evaluate(e))}],ceil:[U,[U],function(e,t){var n=t[0];return Math.ceil(n.evaluate(e))}],"filter-==":[H,[G,Y],function(e,t){var n=t[0],r=t[1];return e.properties()[n.value]===r.value}],"filter-id-==":[H,[Y],function(e,t){var n=t[0];return e.id()===n.value}],"filter-type-==":[H,[G],function(e,t){var n=t[0];return e.geometryType()===n.value}],"filter-<":[H,[G,Y],function(e,t){var n=t[0],r=t[1],a=e.properties()[n.value],i=r.value;return typeof a==typeof i&&a<i}],"filter-id-<":[H,[Y],function(e,t){var n=t[0],r=e.id(),a=n.value;return typeof r==typeof a&&r<a}],"filter->":[H,[G,Y],function(e,t){var n=t[0],r=t[1],a=e.properties()[n.value],i=r.value;return typeof a==typeof i&&a>i}],"filter-id->":[H,[Y],function(e,t){var n=t[0],r=e.id(),a=n.value;return typeof r==typeof a&&r>a}],"filter-<=":[H,[G,Y],function(e,t){var n=t[0],r=t[1],a=e.properties()[n.value],i=r.value;return typeof a==typeof i&&a<=i}],"filter-id-<=":[H,[Y],function(e,t){var n=t[0],r=e.id(),a=n.value;return typeof r==typeof a&&r<=a}],"filter->=":[H,[G,Y],function(e,t){var n=t[0],r=t[1],a=e.properties()[n.value],i=r.value;return typeof a==typeof i&&a>=i}],"filter-id->=":[H,[Y],function(e,t){var n=t[0],r=e.id(),a=n.value;return typeof r==typeof a&&r>=a}],"filter-has":[H,[Y],function(e,t){return t[0].value in e.properties()}],"filter-has-id":[H,[],function(e){return null!==e.id()}],"filter-type-in":[H,[Z(G)],function(e,t){return t[0].value.indexOf(e.geometryType())>=0}],"filter-id-in":[H,[Z(Y)],function(e,t){return t[0].value.indexOf(e.id())>=0}],"filter-in-small":[H,[G,Z(Y)],function(e,t){var n=t[0];return t[1].value.indexOf(e.properties()[n.value])>=0}],"filter-in-large":[H,[G,Z(Y)],function(e,t){var n=t[0],r=t[1];return function(e,t,n,r){for(;n<=r;){var a=n+r>>1;if(t[a]===e)return!0;t[a]>e?r=a-1:n=a+1}return!1}(e.properties()[n.value],r.value,0,r.value.length-1)}],">":{type:H,overloads:[[[U,U],Ve],[[G,G],Ve],[[G,G,X],function(e,t){var n=t[0],r=t[1];return t[2].evaluate(e).compare(n.evaluate(e),r.evaluate(e))>0}]]},"<":{type:H,overloads:[[[U,U],Be],[[G,G],Be],[[G,G,X],function(e,t){var n=t[0],r=t[1];return t[2].evaluate(e).compare(n.evaluate(e),r.evaluate(e))<0}]]},">=":{type:H,overloads:[[[U,U],Ge],[[G,G],Ge],[[G,G,X],function(e,t){var n=t[0],r=t[1];return t[2].evaluate(e).compare(n.evaluate(e),r.evaluate(e))>=0}]]},"<=":{type:H,overloads:[[[U,U],Ue],[[G,G],Ue],[[G,G,X],function(e,t){var n=t[0],r=t[1];return t[2].evaluate(e).compare(n.evaluate(e),r.evaluate(e))<=0}]]},all:{type:H,overloads:[[[H,H],function(e,t){var n=t[0],r=t[1];return n.evaluate(e)&&r.evaluate(e)}],[He(H),function(e,t){for(var n=0,r=t;n<r.length;n+=1)if(!r[n].evaluate(e))return!1;return!0}]]},any:{type:H,overloads:[[[H,H],function(e,t){var n=t[0],r=t[1];return n.evaluate(e)||r.evaluate(e)}],[He(H),function(e,t){for(var n=0,r=t;n<r.length;n+=1)if(r[n].evaluate(e))return!0;return!1}]]},"!":[H,[H],function(e,t){return!t[0].evaluate(e)}],"is-supported-script":[H,[G],function(e,t){var n=t[0],r=e.globals&&e.globals.isSupportedScript;return!r||r(n.evaluate(e))}],upcase:[G,[G],function(e,t){return t[0].evaluate(e).toUpperCase()}],downcase:[G,[G],function(e,t){return t[0].evaluate(e).toLowerCase()}],concat:[G,He(G),function(e,t){return t.map(function(t){return t.evaluate(e)}).join("")}],"resolved-locale":[G,[X],function(e,t){return t[0].evaluate(e).resolvedLocale()}]});var Ye=.95047,Xe=1,Ze=1.08883,$e=4/29,Ke=6/29,Je=3*Ke*Ke,Qe=Ke*Ke*Ke,et=Math.PI/180,tt=180/Math.PI;function nt(e){return e>Qe?Math.pow(e,1/3):e/Je+$e}function rt(e){return e>Ke?e*e*e:Je*(e-$e)}function at(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function it(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function ot(e){var t=it(e.r),n=it(e.g),r=it(e.b),a=nt((.4124564*t+.3575761*n+.1804375*r)/Ye),i=nt((.2126729*t+.7151522*n+.072175*r)/Xe);return{l:116*i-16,a:500*(a-i),b:200*(i-nt((.0193339*t+.119192*n+.9503041*r)/Ze)),alpha:e.a}}function st(e){var t=(e.l+16)/116,n=isNaN(e.a)?t:t+e.a/500,r=isNaN(e.b)?t:t-e.b/200;return t=Xe*rt(t),n=Ye*rt(n),r=Ze*rt(r),new ee(at(3.2404542*n-1.5371385*t-.4985314*r),at(-.969266*n+1.8760108*t+.041556*r),at(.0556434*n-.2040259*t+1.0572252*r),e.alpha)}var lt={forward:ot,reverse:st,interpolate:function(e,t,n){return{l:we(e.l,t.l,n),a:we(e.a,t.a,n),b:we(e.b,t.b,n),alpha:we(e.alpha,t.alpha,n)}}},ut={forward:function(e){var t=ot(e),n=t.l,r=t.a,a=t.b,i=Math.atan2(a,r)*tt;return{h:i<0?i+360:i,c:Math.sqrt(r*r+a*a),l:n,alpha:e.a}},reverse:function(e){var t=e.h*et,n=e.c;return st({l:e.l,a:Math.cos(t)*n,b:Math.sin(t)*n,alpha:e.alpha})},interpolate:function(e,t,n){return{h:function(e,t,n){var r=t-e;return e+n*(r>180||r<-180?r-360*Math.round(r/360):r)}(e.h,t.h,n),c:we(e.c,t.c,n),l:we(e.l,t.l,n),alpha:we(e.alpha,t.alpha,n)}}},ct=Object.freeze({lab:lt,hcl:ut});function ft(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}function dt(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function pt(e){return e}function ht(e,t,n){return void 0!==e?e:void 0!==t?t:void 0!==n?n:void 0}function mt(e,t,n,r,a){return ht(typeof n===a?r[n]:void 0,e.default,t.default)}function vt(e,t,n){if("number"!==ft(n))return ht(e.default,t.default);var r=e.stops.length;if(1===r)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[r-1][0])return e.stops[r-1][1];var a=bt(e.stops,n);return e.stops[a][1]}function gt(e,t,n){var r=void 0!==e.base?e.base:1;if("number"!==ft(n))return ht(e.default,t.default);var a=e.stops.length;if(1===a)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[a-1][0])return e.stops[a-1][1];var i=bt(e.stops,n),o=function(e,t,n,r){var a=r-n,i=e-n;return 0===a?0:1===t?i/a:(Math.pow(t,i)-1)/(Math.pow(t,a)-1)}(n,r,e.stops[i][0],e.stops[i+1][0]),s=e.stops[i][1],l=e.stops[i+1][1],u=Te[t.type]||pt;if(e.colorSpace&&"rgb"!==e.colorSpace){var c=ct[e.colorSpace];u=function(e,t){return c.reverse(c.interpolate(c.forward(e),c.forward(t),o))}}return"function"==typeof s.evaluate?{evaluate:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=s.evaluate.apply(void 0,e),r=l.evaluate.apply(void 0,e);if(void 0!==n&&void 0!==r)return u(n,r,o)}}:u(s,l,o)}function yt(e,t,n){return"color"===t.type?n=ee.parse(n):ft(n)===t.type||"enum"===t.type&&t.values[n]||(n=void 0),ht(n,e.default,t.default)}function bt(e,t){for(var n,r,a=0,i=e.length-1,o=0;a<=i;){if(n=e[o=Math.floor((a+i)/2)][0],r=e[o+1][0],t===n||t>n&&t<r)return o;n<t?a=o+1:n>t&&(i=o-1)}return Math.max(o-1,0)}var xt=function(e,t){var n;this.expression=e,this._warningHistory={},this._defaultValue="color"===(n=t).type&&dt(n.default)?new ee(0,0,0,0):"color"===n.type?ee.parse(n.default)||null:void 0===n.default?null:n.default,"enum"===t.type&&(this._enumValues=t.values)};function _t(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in ze}function wt(e,t){var n=new be(ze,[],function(e){var t={color:W,string:G,number:U,enum:G,boolean:H};return"array"===e.type?Z(t[e.value]||Y,e.length):t[e.type]||null}(t)),r=n.parse(e);return r?We(new xt(r,t)):qe(n.errors)}xt.prototype.evaluateWithoutErrorHandling=function(e,t){return this._evaluator||(this._evaluator=new he),this._evaluator.globals=e,this._evaluator.feature=t,this.expression.evaluate(this._evaluator)},xt.prototype.evaluate=function(e,t){this._evaluator||(this._evaluator=new he),this._evaluator.globals=e,this._evaluator.feature=t;try{var n=this.expression.evaluate(this._evaluator);if(null==n)return this._defaultValue;if(this._enumValues&&!(n in this._enumValues))throw new oe("Expected value to be one of "+Object.keys(this._enumValues).map(function(e){return JSON.stringify(e)}).join(", ")+", but found "+JSON.stringify(n)+" instead.");return n}catch(e){return this._warningHistory[e.message]||(this._warningHistory[e.message]=!0,"undefined"!=typeof console&&console.warn(e.message)),this._defaultValue}};var Tt=function(e,t){this.kind=e,this._styleExpression=t};Tt.prototype.evaluateWithoutErrorHandling=function(e,t){return this._styleExpression.evaluateWithoutErrorHandling(e,t)},Tt.prototype.evaluate=function(e,t){return this._styleExpression.evaluate(e,t)};var kt=function(e,t,n){this.kind=e,this.zoomStops=n.labels,this._styleExpression=t,n instanceof ke&&(this._interpolationType=n.interpolation)};function Ct(e,t){if("error"===(e=wt(e,t)).result)return e;var n=e.value.expression,r=ve(n);if(!r&&!t["property-function"])return qe([new F("","property expressions not supported")]);var a=ge(n,["zoom"]);if(!a&&!1===t["zoom-function"])return qe([new F("","zoom expressions not supported")]);var i=function e(t){var n=null;if(t instanceof Me)n=e(t.result);else if(t instanceof Ee)for(var r=0,a=t.args;r<a.length;r+=1){var i=a[r];if(n=e(i))break}else(t instanceof _e||t instanceof ke)&&t.input instanceof me&&"zoom"===t.input.name&&(n=t);return n instanceof F?n:(t.eachChild(function(t){var r=e(t);r instanceof F?n=r:!n&&r?n=new F("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&r&&n!==r&&(n=new F("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n)}(n);return i||a?i instanceof F?qe([i]):i instanceof ke&&"piecewise-constant"===t.function?qe([new F("",'"interpolate" expressions cannot be used with this property')]):We(i?new kt(r?"camera":"composite",e.value,i):new Tt(r?"constant":"source",e.value)):qe([new F("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}kt.prototype.evaluateWithoutErrorHandling=function(e,t){return this._styleExpression.evaluateWithoutErrorHandling(e,t)},kt.prototype.evaluate=function(e,t){return this._styleExpression.evaluate(e,t)},kt.prototype.interpolationFactor=function(e,t,n){return this._interpolationType?ke.interpolationFactor(this._interpolationType,e,t,n):0};var Et=function(e,t){this._parameters=e,this._specification=t,z(this,function e(t,n){var r,a,i,o="color"===n.type,s=t.stops&&"object"==typeof t.stops[0][0],l=s||void 0!==t.property,u=s||!l,c=t.type||("interpolated"===n.function?"exponential":"interval");if(o&&((t=z({},t)).stops&&(t.stops=t.stops.map(function(e){return[e[0],ee.parse(e[1])]})),t.default?t.default=ee.parse(t.default):t.default=ee.parse(n.default)),t.colorSpace&&"rgb"!==t.colorSpace&&!ct[t.colorSpace])throw new Error("Unknown color space: "+t.colorSpace);if("exponential"===c)r=gt;else if("interval"===c)r=vt;else if("categorical"===c){r=mt,a=Object.create(null);for(var f=0,d=t.stops;f<d.length;f+=1){var p=d[f];a[p[0]]=p[1]}i=typeof t.stops[0][0]}else{if("identity"!==c)throw new Error('Unknown function type "'+c+'"');r=yt}if(s){for(var h={},m=[],v=0;v<t.stops.length;v++){var g=t.stops[v],y=g[0].zoom;void 0===h[y]&&(h[y]={zoom:y,type:t.type,property:t.property,default:t.default,stops:[]},m.push(y)),h[y].stops.push([g[0].value,g[1]])}for(var b=[],x=0,_=m;x<_.length;x+=1){var w=_[x];b.push([h[w].zoom,e(h[w],n)])}return{kind:"composite",interpolationFactor:ke.interpolationFactor.bind(void 0,{name:"linear"}),zoomStops:b.map(function(e){return e[0]}),evaluate:function(e,r){var a=e.zoom;return gt({stops:b,base:t.base},n,a).evaluate(a,r)}}}return u?{kind:"camera",interpolationFactor:"exponential"===c?ke.interpolationFactor.bind(void 0,{name:"exponential",base:void 0!==t.base?t.base:1}):function(){return 0},zoomStops:t.stops.map(function(e){return e[0]}),evaluate:function(e){var o=e.zoom;return r(t,n,o,a,i)}}:{kind:"source",evaluate:function(e,o){var s=o&&o.properties?o.properties[t.property]:void 0;return void 0===s?ht(t.default,n.default):r(t,n,s,a,i)}}}(this._parameters,this._specification))};function Mt(e,t){if(dt(e))return new Et(e,t);if(_t(e)){var n=Ct(e,t);if("error"===n.result)throw new Error(n.value.map(function(e){return e.key+": "+e.message}).join(", "));return n.value}var r=e;return"string"==typeof e&&"color"===t.type&&(r=ee.parse(e)),{kind:"constant",evaluate:function(){return r}}}function At(e){var t=e.key,n=e.value,r=e.valueSpec||{},a=e.objectElementValidators||{},i=e.style,o=e.styleSpec,s=[],l=ft(n);if("object"!==l)return[new D(t,n,"object expected, "+l+" found")];for(var u in n){var c=u.split(".")[0],f=r[c]||r["*"],d=void 0;if(a[c])d=a[c];else if(r[c])d=Jt;else if(a["*"])d=a["*"];else{if(!r["*"]){s.push(new D(t,n[u],'unknown property "'+u+'"'));continue}d=Jt}s=s.concat(d({key:(t?t+".":t)+u,value:n[u],valueSpec:f,style:i,styleSpec:o,object:n,objectKey:u},n))}for(var p in r)a[p]||r[p].required&&void 0===r[p].default&&void 0===n[p]&&s.push(new D(t,n,'missing required property "'+p+'"'));return s}function St(e){var t=e.value,n=e.valueSpec,r=e.style,a=e.styleSpec,i=e.key,o=e.arrayElementValidator||Jt;if("array"!==ft(t))return[new D(i,t,"array expected, "+ft(t)+" found")];if(n.length&&t.length!==n.length)return[new D(i,t,"array length "+n.length+" expected, length "+t.length+" found")];if(n["min-length"]&&t.length<n["min-length"])return[new D(i,t,"array length at least "+n["min-length"]+" expected, length "+t.length+" found")];var s={type:n.value};a.$version<7&&(s.function=n.function),"object"===ft(n.value)&&(s=n.value);for(var l=[],u=0;u<t.length;u++)l=l.concat(o({array:t,arrayIndex:u,value:t[u],valueSpec:s,style:r,styleSpec:a,key:i+"["+u+"]"}));return l}function Ot(e){var t=e.key,n=e.value,r=e.valueSpec,a=ft(n);return"number"!==a?[new D(t,n,"number expected, "+a+" found")]:"minimum"in r&&n<r.minimum?[new D(t,n,n+" is less than the minimum value "+r.minimum)]:"maximum"in r&&n>r.maximum?[new D(t,n,n+" is greater than the maximum value "+r.maximum)]:[]}function Pt(e){var t,n,r,a=e.valueSpec,i=j(e.value.type),o={},s="categorical"!==i&&void 0===e.value.property,l=!s,u="array"===ft(e.value.stops)&&"array"===ft(e.value.stops[0])&&"object"===ft(e.value.stops[0][0]),c=At({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(e){if("identity"===i)return[new D(e.key,e.value,'identity function may not have a "stops" property')];var t=[],n=e.value;return t=t.concat(St({key:e.key,value:n,valueSpec:e.valueSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:f})),"array"===ft(n)&&0===n.length&&t.push(new D(e.key,n,"array must have at least one stop")),t},default:function(e){return Jt({key:e.key,value:e.value,valueSpec:a,style:e.style,styleSpec:e.styleSpec})}}});return"identity"===i&&s&&c.push(new D(e.key,e.value,'missing required property "property"')),"identity"===i||e.value.stops||c.push(new D(e.key,e.value,'missing required property "stops"')),"exponential"===i&&"piecewise-constant"===e.valueSpec.function&&c.push(new D(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(l&&!e.valueSpec["property-function"]?c.push(new D(e.key,e.value,"property functions not supported")):s&&!e.valueSpec["zoom-function"]&&"heatmap-color"!==e.objectKey&&"line-gradient"!==e.objectKey&&c.push(new D(e.key,e.value,"zoom functions not supported"))),"categorical"!==i&&!u||void 0!==e.value.property||c.push(new D(e.key,e.value,'"property" property is required')),c;function f(e){var t=[],i=e.value,s=e.key;if("array"!==ft(i))return[new D(s,i,"array expected, "+ft(i)+" found")];if(2!==i.length)return[new D(s,i,"array length 2 expected, length "+i.length+" found")];if(u){if("object"!==ft(i[0]))return[new D(s,i,"object expected, "+ft(i[0])+" found")];if(void 0===i[0].zoom)return[new D(s,i,"object stop key must have zoom")];if(void 0===i[0].value)return[new D(s,i,"object stop key must have value")];if(r&&r>j(i[0].zoom))return[new D(s,i[0].zoom,"stop zoom values must appear in ascending order")];j(i[0].zoom)!==r&&(r=j(i[0].zoom),n=void 0,o={}),t=t.concat(At({key:s+"[0]",value:i[0],valueSpec:{zoom:{}},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:Ot,value:d}}))}else t=t.concat(d({key:s+"[0]",value:i[0],valueSpec:{},style:e.style,styleSpec:e.styleSpec},i));return t.concat(Jt({key:s+"[1]",value:i[1],valueSpec:a,style:e.style,styleSpec:e.styleSpec}))}function d(e,r){var s=ft(e.value),l=j(e.value),u=null!==e.value?e.value:r;if(t){if(s!==t)return[new D(e.key,u,s+" stop domain type must match previous stop domain type "+t)]}else t=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new D(e.key,u,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==i){var c="number expected, "+s+" found";return a["property-function"]&&void 0===i&&(c+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new D(e.key,u,c)]}return"categorical"!==i||"number"!==s||isFinite(l)&&Math.floor(l)===l?"categorical"!==i&&"number"===s&&void 0!==n&&l<n?[new D(e.key,u,"stop domain values must appear in ascending order")]:(n=l,"categorical"===i&&l in o?[new D(e.key,u,"stop domain values must be unique")]:(o[l]=!0,[])):[new D(e.key,u,"integer expected, found "+l)]}}function Rt(e){var t=("property"===e.expressionContext?Ct:wt)(N(e.value),e.valueSpec);return"error"===t.result?t.value.map(function(t){return new D(""+e.key+t.key,e.value,t.message)}):"property"===e.expressionContext&&"text-font"===e.propertyKey&&-1!==t.value._styleExpression.expression.possibleOutputs().indexOf(void 0)?[new D(e.key,e.value,'Invalid data expression for "text-font". Output values must be contained as literals within the expression.')]:[]}function Lt(e){var t=e.key,n=e.value,r=e.valueSpec,a=[];return Array.isArray(r.values)?-1===r.values.indexOf(j(n))&&a.push(new D(t,n,"expected one of ["+r.values.join(", ")+"], "+JSON.stringify(n)+" found")):-1===Object.keys(r.values).indexOf(j(n))&&a.push(new D(t,n,"expected one of ["+Object.keys(r.values).join(", ")+"], "+JSON.stringify(n)+" found")),a}function Dt(e){if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3===e.length&&(Array.isArray(e[1])||Array.isArray(e[2]));case"any":case"all":for(var t=0,n=e.slice(1);t<n.length;t+=1){var r=n[t];if(!Dt(r)&&"boolean"!=typeof r)return!1}return!0;default:return!0}}Et.deserialize=function(e){return new Et(e._parameters,e._specification)},Et.serialize=function(e){return{_parameters:e._parameters,_specification:e._specification}};var It={type:"boolean",default:!1,function:!0,"property-function":!0,"zoom-function":!0};function zt(e){if(!e)return function(){return!0};Dt(e)||(e=Nt(e));var t=wt(e,It);if("error"===t.result)throw new Error(t.value.map(function(e){return e.key+": "+e.message}).join(", "));return function(e,n){return t.value.evaluate(e,n)}}function jt(e,t){return e<t?-1:e>t?1:0}function Nt(e){if(!e)return!0;var t,n=e[0];return e.length<=1?"any"!==n:"=="===n?Ft(e[1],e[2],"=="):"!="===n?Ut(Ft(e[1],e[2],"==")):"<"===n||">"===n||"<="===n||">="===n?Ft(e[1],e[2],n):"any"===n?(t=e.slice(1),["any"].concat(t.map(Nt))):"all"===n?["all"].concat(e.slice(1).map(Nt)):"none"===n?["all"].concat(e.slice(1).map(Nt).map(Ut)):"in"===n?Bt(e[1],e.slice(2)):"!in"===n?Ut(Bt(e[1],e.slice(2))):"has"===n?Vt(e[1]):"!has"!==n||Ut(Vt(e[1]))}function Ft(e,t,n){switch(e){case"$type":return["filter-type-"+n,t];case"$id":return["filter-id-"+n,t];default:return["filter-"+n,e,t]}}function Bt(e,t){if(0===t.length)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(function(e){return typeof e!=typeof t[0]})?["filter-in-large",e,["literal",t.sort(jt)]]:["filter-in-small",e,["literal",t]]}}function Vt(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function Ut(e){return["!",e]}function Gt(e){return Dt(N(e.value))?Rt(z({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function e(t){var n=t.value,r=t.key;if("array"!==ft(n))return[new D(r,n,"array expected, "+ft(n)+" found")];var a,i=t.styleSpec,o=[];if(n.length<1)return[new D(r,n,"filter array must have at least 1 element")];switch(o=o.concat(Lt({key:r+"[0]",value:n[0],valueSpec:i.filter_operator,style:t.style,styleSpec:t.styleSpec})),j(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&"$type"===j(n[1])&&o.push(new D(r,n,'"$type" cannot be use with operator "'+n[0]+'"'));case"==":case"!=":3!==n.length&&o.push(new D(r,n,'filter array for operator "'+n[0]+'" must have 3 elements'));case"in":case"!in":n.length>=2&&"string"!==(a=ft(n[1]))&&o.push(new D(r+"[1]",n[1],"string expected, "+a+" found"));for(var s=2;s<n.length;s++)a=ft(n[s]),"$type"===j(n[1])?o=o.concat(Lt({key:r+"["+s+"]",value:n[s],valueSpec:i.geometry_type,style:t.style,styleSpec:t.styleSpec})):"string"!==a&&"number"!==a&&"boolean"!==a&&o.push(new D(r+"["+s+"]",n[s],"string, number, or boolean expected, "+a+" found"));break;case"any":case"all":case"none":for(var l=1;l<n.length;l++)o=o.concat(e({key:r+"["+l+"]",value:n[l],style:t.style,styleSpec:t.styleSpec}));break;case"has":case"!has":a=ft(n[1]),2!==n.length?o.push(new D(r,n,'filter array for "'+n[0]+'" operator must have 2 elements')):"string"!==a&&o.push(new D(r+"[1]",n[1],"string expected, "+a+" found"))}return o}(e)}function Ht(e,t){var n=e.key,r=e.style,a=e.styleSpec,i=e.value,o=e.objectKey,s=a[t+"_"+e.layerType];if(!s)return[];var l=o.match(/^(.*)-transition$/);if("paint"===t&&l&&s[l[1]]&&s[l[1]].transition)return Jt({key:n,value:i,valueSpec:a.transition,style:r,styleSpec:a});var u,c=e.valueSpec||s[o];if(!c)return[new D(n,i,'unknown property "'+o+'"')];if("string"===ft(i)&&c["property-function"]&&!c.tokens&&(u=/^{([^}]+)}$/.exec(i)))return[new D(n,i,'"'+o+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(u[1])+" }`.")];var f=[];return"symbol"===e.layerType&&("text-field"===o&&r&&!r.glyphs&&f.push(new D(n,i,'use of "text-field" requires a style "glyphs" property')),"text-font"===o&&dt(N(i))&&"identity"===j(i.type)&&f.push(new D(n,i,'"text-font" does not support identity functions'))),f.concat(Jt({key:e.key,value:i,valueSpec:c,style:r,styleSpec:a,expressionContext:"property",propertyKey:o}))}function Wt(e){return Ht(e,"paint")}function qt(e){return Ht(e,"layout")}function Yt(e){var t=[],n=e.value,r=e.key,a=e.style,i=e.styleSpec;n.type||n.ref||t.push(new D(r,n,'either "type" or "ref" is required'));var o,s=j(n.type),l=j(n.ref);if(n.id)for(var u=j(n.id),c=0;c<e.arrayIndex;c++){var f=a.layers[c];j(f.id)===u&&t.push(new D(r,n.id,'duplicate layer id "'+n.id+'", previously used at line '+f.id.__line__))}if("ref"in n)["type","source","source-layer","filter","layout"].forEach(function(e){e in n&&t.push(new D(r,n[e],'"'+e+'" is prohibited for ref layers'))}),a.layers.forEach(function(e){j(e.id)===l&&(o=e)}),o?o.ref?t.push(new D(r,n.ref,"ref cannot reference another ref layer")):s=j(o.type):t.push(new D(r,n.ref,'ref layer "'+l+'" not found'));else if("background"!==s)if(n.source){var d=a.sources&&a.sources[n.source],p=d&&j(d.type);d?"vector"===p&&"raster"===s?t.push(new D(r,n.source,'layer "'+n.id+'" requires a raster source')):"raster"===p&&"raster"!==s?t.push(new D(r,n.source,'layer "'+n.id+'" requires a vector source')):"vector"!==p||n["source-layer"]?"raster-dem"===p&&"hillshade"!==s?t.push(new D(r,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!n.paint||!n.paint["line-gradient"]||"geojson"===p&&d.lineMetrics||t.push(new D(r,n,'layer "'+n.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):t.push(new D(r,n,'layer "'+n.id+'" must specify a "source-layer"')):t.push(new D(r,n.source,'source "'+n.source+'" not found'))}else t.push(new D(r,n,'missing required property "source"'));return t=t.concat(At({key:r,value:n,valueSpec:i.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Jt({key:r+".type",value:n.type,valueSpec:i.layer.type,style:e.style,styleSpec:e.styleSpec,object:n,objectKey:"type"})},filter:Gt,layout:function(e){return At({layer:n,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(e){return qt(z({layerType:s},e))}}})},paint:function(e){return At({layer:n,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(e){return Wt(z({layerType:s},e))}}})}}}))}function Xt(e){var t=e.value,n=e.key,r=e.styleSpec,a=e.style;if(!t.type)return[new D(n,t,'"type" is required')];var i=j(t.type),o=[];switch(i){case"vector":case"raster":case"raster-dem":if(o=o.concat(At({key:n,value:t,valueSpec:r["source_"+i.replace("-","_")],style:e.style,styleSpec:r})),"url"in t)for(var s in t)["type","url","tileSize"].indexOf(s)<0&&o.push(new D(n+"."+s,t[s],'a source with a "url" property may not include a "'+s+'" property'));return o;case"geojson":return At({key:n,value:t,valueSpec:r.source_geojson,style:a,styleSpec:r});case"video":return At({key:n,value:t,valueSpec:r.source_video,style:a,styleSpec:r});case"image":return At({key:n,value:t,valueSpec:r.source_image,style:a,styleSpec:r});case"canvas":return o.push(new D(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")),o;default:return Lt({key:n+".type",value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:a,styleSpec:r})}}function Zt(e){var t=e.value,n=e.styleSpec,r=n.light,a=e.style,i=[],o=ft(t);if(void 0===t)return i;if("object"!==o)return i=i.concat([new D("light",t,"object expected, "+o+" found")]);for(var s in t){var l=s.match(/^(.*)-transition$/);i=l&&r[l[1]]&&r[l[1]].transition?i.concat(Jt({key:s,value:t[s],valueSpec:n.transition,style:a,styleSpec:n})):r[s]?i.concat(Jt({key:s,value:t[s],valueSpec:r[s],style:a,styleSpec:n})):i.concat([new D(s,t[s],'unknown property "'+s+'"')])}return i}function $t(e){var t=e.value,n=e.key,r=ft(t);return"string"!==r?[new D(n,t,"string expected, "+r+" found")]:[]}var Kt={"*":function(){return[]},array:St,boolean:function(e){var t=e.value,n=e.key,r=ft(t);return"boolean"!==r?[new D(n,t,"boolean expected, "+r+" found")]:[]},number:Ot,color:function(e){var t=e.key,n=e.value,r=ft(n);return"string"!==r?[new D(t,n,"color expected, "+r+" found")]:null===Q(n)?[new D(t,n,'color expected, "'+n+'" found')]:[]},constants:I,enum:Lt,filter:Gt,function:Pt,layer:Yt,object:At,source:Xt,light:Zt,string:$t};function Jt(e){var t=e.value,n=e.valueSpec,r=e.styleSpec;return n.function&&dt(j(t))?Pt(e):n.function&&_t(N(t))?Rt(e):n.type&&Kt[n.type]?Kt[n.type](e):At(z({},e,{valueSpec:n.type?r[n.type]:n}))}function Qt(e){var t=e.value,n=e.key,r=$t(e);return r.length?r:(-1===t.indexOf("{fontstack}")&&r.push(new D(n,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&r.push(new D(n,t,'"glyphs" url must include a "{range}" token')),r)}function en(e,t){t=t||L;var n=[];return n=n.concat(Jt({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:Qt,"*":function(){return[]}}})),e.constants&&(n=n.concat(I({key:"constants",value:e.constants,style:e,styleSpec:t}))),tn(n)}function tn(e){return[].concat(e).sort(function(e,t){return e.line-t.line})}function nn(e){return function(){return tn(e.apply(this,arguments))}}en.source=nn(Xt),en.light=nn(Zt),en.layer=nn(Yt),en.filter=nn(Gt),en.paintProperty=nn(Wt),en.layoutProperty=nn(qt);var rn=en,an=en.light,on=en.paintProperty,sn=en.layoutProperty;function ln(e,t){var n=!1;if(t&&t.length)for(var r=0,a=t;r<a.length;r+=1){var i=a[r];e.fire(new P(new Error(i.message))),n=!0}return n}var un=fn,cn=3;function fn(e,t,n){var r=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var a=new Int32Array(this.arrayBuffer);e=a[0],t=a[1],n=a[2],this.d=t+2*n;for(var i=0;i<this.d*this.d;i++){var o=a[cn+i],s=a[cn+i+1];r.push(o===s?null:a.subarray(o,s))}var l=a[cn+r.length],u=a[cn+r.length+1];this.keys=a.subarray(l,u),this.bboxes=a.subarray(u),this.insert=this._insertReadonly}else{this.d=t+2*n;for(var c=0;c<this.d*this.d;c++)r.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=n,this.scale=t/e,this.uid=0;var f=n/t*e;this.min=-f,this.max=e+f}fn.prototype.insert=function(e,t,n,r,a){this._forEachCell(t,n,r,a,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(a)},fn.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},fn.prototype._insertCell=function(e,t,n,r,a,i){this.cells[a].push(i)},fn.prototype.query=function(e,t,n,r){var a=this.min,i=this.max;if(e<=a&&t<=a&&i<=n&&i<=r)return Array.prototype.slice.call(this.keys);var o=[];return this._forEachCell(e,t,n,r,this._queryCell,o,{}),o},fn.prototype._queryCell=function(e,t,n,r,a,i,o){var s=this.cells[a];if(null!==s)for(var l=this.keys,u=this.bboxes,c=0;c<s.length;c++){var f=s[c];if(void 0===o[f]){var d=4*f;e<=u[d+2]&&t<=u[d+3]&&n>=u[d+0]&&r>=u[d+1]?(o[f]=!0,i.push(l[f])):o[f]=!1}}},fn.prototype._forEachCell=function(e,t,n,r,a,i,o){for(var s=this._convertToCellCoord(e),l=this._convertToCellCoord(t),u=this._convertToCellCoord(n),c=this._convertToCellCoord(r),f=s;f<=u;f++)for(var d=l;d<=c;d++){var p=this.d*d+f;if(a.call(this,e,t,n,r,p,i,o))return}},fn.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},fn.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,t=cn+this.cells.length+1+1,n=0,r=0;r<this.cells.length;r++)n+=this.cells[r].length;var a=new Int32Array(t+n+this.keys.length+this.bboxes.length);a[0]=this.extent,a[1]=this.n,a[2]=this.padding;for(var i=t,o=0;o<e.length;o++){var s=e[o];a[cn+o]=i,a.set(s,i),i+=s.length}return a[cn+e.length]=i,a.set(this.keys,i),i+=this.keys.length,a[cn+e.length+1]=i,a.set(this.bboxes,i),i+=this.bboxes.length,a.buffer};var dn=self.ImageData,pn={};function hn(e,t,n){void 0===n&&(n={}),Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),pn[e]={klass:t,omit:n.omit||[],shallow:n.shallow||[]}}for(var mn in hn("Object",Object),un.serialize=function(e,t){var n=e.toArrayBuffer();return t&&t.push(n),n},un.deserialize=function(e){return new un(e)},hn("Grid",un),hn("Color",ee),hn("Error",Error),hn("StylePropertyFunction",Et),hn("StyleExpression",xt,{omit:["_evaluator"]}),hn("ZoomDependentExpression",kt),hn("ZoomConstantExpression",Tt),hn("CompoundExpression",me,{omit:["_evaluate"]}),ze)ze[mn]._classRegistryKey||hn("Expression_"+mn,ze[mn]);function vn(e,t){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(e instanceof ArrayBuffer)return t&&t.push(e),e;if(ArrayBuffer.isView(e)){var n=e;return t&&t.push(n.buffer),n}if(e instanceof dn)return t&&t.push(e.data.buffer),e;if(Array.isArray(e)){for(var r=[],a=0,i=e;a<i.length;a+=1){var o=i[a];r.push(vn(o,t))}return r}if("object"==typeof e){var s=e.constructor,l=s._classRegistryKey;if(!l)throw new Error("can't serialize object of unregistered class");var u={};if(s.serialize)u._serialized=s.serialize(e,t);else{for(var c in e)if(e.hasOwnProperty(c)&&!(pn[l].omit.indexOf(c)>=0)){var f=e[c];u[c]=pn[l].shallow.indexOf(c)>=0?f:vn(f,t)}e instanceof Error&&(u.message=e.message)}return{name:l,properties:u}}throw new Error("can't serialize object of type "+typeof e)}function gn(e){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||e instanceof ArrayBuffer||ArrayBuffer.isView(e)||e instanceof dn)return e;if(Array.isArray(e))return e.map(function(e){return gn(e)});if("object"==typeof e){var t=e,n=t.name,r=t.properties;if(!n)throw new Error("can't deserialize object of anonymous class");var a=pn[n].klass;if(!a)throw new Error("can't deserialize unregistered class "+n);if(a.deserialize)return a.deserialize(r._serialized);for(var i=Object.create(a.prototype),o=0,s=Object.keys(r);o<s.length;o+=1){var l=s[o];i[l]=pn[n].shallow.indexOf(l)>=0?r[l]:gn(r[l])}return i}throw new Error("can't deserialize object of type "+typeof e)}var yn=function(){this.first=!0};yn.prototype.update=function(e,t){var n=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=t):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,this.lastIntegerZoomTime=t),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=n,!0))};var bn={"Latin-1 Supplement":function(e){return e>=128&&e<=255},Arabic:function(e){return e>=1536&&e<=1791},"Arabic Supplement":function(e){return e>=1872&&e<=1919},"Arabic Extended-A":function(e){return e>=2208&&e<=2303},"Hangul Jamo":function(e){return e>=4352&&e<=4607},"Unified Canadian Aboriginal Syllabics":function(e){return e>=5120&&e<=5759},Khmer:function(e){return e>=6016&&e<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(e){return e>=6320&&e<=6399},"General Punctuation":function(e){return e>=8192&&e<=8303},"Letterlike Symbols":function(e){return e>=8448&&e<=8527},"Number Forms":function(e){return e>=8528&&e<=8591},"Miscellaneous Technical":function(e){return e>=8960&&e<=9215},"Control Pictures":function(e){return e>=9216&&e<=9279},"Optical Character Recognition":function(e){return e>=9280&&e<=9311},"Enclosed Alphanumerics":function(e){return e>=9312&&e<=9471},"Geometric Shapes":function(e){return e>=9632&&e<=9727},"Miscellaneous Symbols":function(e){return e>=9728&&e<=9983},"Miscellaneous Symbols and Arrows":function(e){return e>=11008&&e<=11263},"CJK Radicals Supplement":function(e){return e>=11904&&e<=12031},"Kangxi Radicals":function(e){return e>=12032&&e<=12255},"Ideographic Description Characters":function(e){return e>=12272&&e<=12287},"CJK Symbols and Punctuation":function(e){return e>=12288&&e<=12351},Hiragana:function(e){return e>=12352&&e<=12447},Katakana:function(e){return e>=12448&&e<=12543},Bopomofo:function(e){return e>=12544&&e<=12591},"Hangul Compatibility Jamo":function(e){return e>=12592&&e<=12687},Kanbun:function(e){return e>=12688&&e<=12703},"Bopomofo Extended":function(e){return e>=12704&&e<=12735},"CJK Strokes":function(e){return e>=12736&&e<=12783},"Katakana Phonetic Extensions":function(e){return e>=12784&&e<=12799},"Enclosed CJK Letters and Months":function(e){return e>=12800&&e<=13055},"CJK Compatibility":function(e){return e>=13056&&e<=13311},"CJK Unified Ideographs Extension A":function(e){return e>=13312&&e<=19903},"Yijing Hexagram Symbols":function(e){return e>=19904&&e<=19967},"CJK Unified Ideographs":function(e){return e>=19968&&e<=40959},"Yi Syllables":function(e){return e>=40960&&e<=42127},"Yi Radicals":function(e){return e>=42128&&e<=42191},"Hangul Jamo Extended-A":function(e){return e>=43360&&e<=43391},"Hangul Syllables":function(e){return e>=44032&&e<=55215},"Hangul Jamo Extended-B":function(e){return e>=55216&&e<=55295},"Private Use Area":function(e){return e>=57344&&e<=63743},"CJK Compatibility Ideographs":function(e){return e>=63744&&e<=64255},"Arabic Presentation Forms-A":function(e){return e>=64336&&e<=65023},"Vertical Forms":function(e){return e>=65040&&e<=65055},"CJK Compatibility Forms":function(e){return e>=65072&&e<=65103},"Small Form Variants":function(e){return e>=65104&&e<=65135},"Arabic Presentation Forms-B":function(e){return e>=65136&&e<=65279},"Halfwidth and Fullwidth Forms":function(e){return e>=65280&&e<=65519}};function xn(e){for(var t=0,n=e;t<n.length;t+=1)if(wn(n[t].charCodeAt(0)))return!0;return!1}function _n(e){return!(bn.Arabic(e)||bn["Arabic Supplement"](e)||bn["Arabic Extended-A"](e)||bn["Arabic Presentation Forms-A"](e)||bn["Arabic Presentation Forms-B"](e))}function wn(e){return!(746!==e&&747!==e&&(e<4352||!(bn["Bopomofo Extended"](e)||bn.Bopomofo(e)||bn["CJK Compatibility Forms"](e)&&!(e>=65097&&e<=65103)||bn["CJK Compatibility Ideographs"](e)||bn["CJK Compatibility"](e)||bn["CJK Radicals Supplement"](e)||bn["CJK Strokes"](e)||!(!bn["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||12336===e)||bn["CJK Unified Ideographs Extension A"](e)||bn["CJK Unified Ideographs"](e)||bn["Enclosed CJK Letters and Months"](e)||bn["Hangul Compatibility Jamo"](e)||bn["Hangul Jamo Extended-A"](e)||bn["Hangul Jamo Extended-B"](e)||bn["Hangul Jamo"](e)||bn["Hangul Syllables"](e)||bn.Hiragana(e)||bn["Ideographic Description Characters"](e)||bn.Kanbun(e)||bn["Kangxi Radicals"](e)||bn["Katakana Phonetic Extensions"](e)||bn.Katakana(e)&&12540!==e||!(!bn["Halfwidth and Fullwidth Forms"](e)||65288===e||65289===e||65293===e||e>=65306&&e<=65310||65339===e||65341===e||65343===e||e>=65371&&e<=65503||65507===e||e>=65512&&e<=65519)||!(!bn["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||bn["Unified Canadian Aboriginal Syllabics"](e)||bn["Unified Canadian Aboriginal Syllabics Extended"](e)||bn["Vertical Forms"](e)||bn["Yijing Hexagram Symbols"](e)||bn["Yi Syllables"](e)||bn["Yi Radicals"](e))))}function Tn(e){return!(wn(e)||function(e){return!!(bn["Latin-1 Supplement"](e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||bn["General Punctuation"](e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||bn["Letterlike Symbols"](e)||bn["Number Forms"](e)||bn["Miscellaneous Technical"](e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||bn["Control Pictures"](e)&&9251!==e||bn["Optical Character Recognition"](e)||bn["Enclosed Alphanumerics"](e)||bn["Geometric Shapes"](e)||bn["Miscellaneous Symbols"](e)&&!(e>=9754&&e<=9759)||bn["Miscellaneous Symbols and Arrows"](e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||bn["CJK Symbols and Punctuation"](e)||bn.Katakana(e)||bn["Private Use Area"](e)||bn["CJK Compatibility Forms"](e)||bn["Small Form Variants"](e)||bn["Halfwidth and Fullwidth Forms"](e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e)}(e))}function kn(e,t){return!(!t&&(e>=1424&&e<=2303||bn["Arabic Presentation Forms-A"](e)||bn["Arabic Presentation Forms-B"](e))||e>=2304&&e<=3583||e>=3840&&e<=4255||bn.Khmer(e))}var Cn,En=!1,Mn=null,An=!1,Sn=new R,On={applyArabicShaping:null,processBidirectionalText:null,isLoaded:function(){return An||null!=On.applyArabicShaping}},Pn=function(e,t){this.zoom=e,t?(this.now=t.now,this.fadeDuration=t.fadeDuration,this.zoomHistory=t.zoomHistory,this.transition=t.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new yn,this.transition={})};Pn.prototype.isSupportedScript=function(e){return function(e,t){for(var n=0,r=e;n<r.length;n+=1)if(!kn(r[n].charCodeAt(0),t))return!1;return!0}(e,On.isLoaded())},Pn.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)};var Rn=function(e,t){this.property=e,this.value=t,this.expression=Mt(void 0===t?e.specification.default:t,e.specification)};Rn.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},Rn.prototype.possiblyEvaluate=function(e){return this.property.possiblyEvaluate(this,e)};var Ln=function(e){this.property=e,this.value=new Rn(e,void 0)};Ln.prototype.transitioned=function(e,t){return new In(this.property,this.value,t,p({},e.transition,this.transition),e.now)},Ln.prototype.untransitioned=function(){return new In(this.property,this.value,null,{},0)};var Dn=function(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)};Dn.prototype.getValue=function(e){return b(this._values[e].value.value)},Dn.prototype.setValue=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new Ln(this._values[e].property)),this._values[e].value=new Rn(this._values[e].property,null===t?void 0:b(t))},Dn.prototype.getTransition=function(e){return b(this._values[e].transition)},Dn.prototype.setTransition=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new Ln(this._values[e].property)),this._values[e].transition=b(t)||void 0},Dn.prototype.serialize=function(){for(var e={},t=0,n=Object.keys(this._values);t<n.length;t+=1){var r=n[t],a=this.getValue(r);void 0!==a&&(e[r]=a);var i=this.getTransition(r);void 0!==i&&(e[r+"-transition"]=i)}return e},Dn.prototype.transitioned=function(e,t){for(var n=new zn(this._properties),r=0,a=Object.keys(this._values);r<a.length;r+=1){var i=a[r];n._values[i]=this._values[i].transitioned(e,t._values[i])}return n},Dn.prototype.untransitioned=function(){for(var e=new zn(this._properties),t=0,n=Object.keys(this._values);t<n.length;t+=1){var r=n[t];e._values[r]=this._values[r].untransitioned()}return e};var In=function(e,t,n,r,a){this.property=e,this.value=t,this.begin=a+r.delay||0,this.end=this.begin+r.duration||0,e.specification.transition&&(r.delay||r.duration)&&(this.prior=n)};In.prototype.possiblyEvaluate=function(e){var t=e.now||0,n=this.value.possiblyEvaluate(e),r=this.prior;if(r){if(t>this.end)return this.prior=null,n;if(this.value.isDataDriven())return this.prior=null,n;if(t<this.begin)return r.possiblyEvaluate(e);var a=(t-this.begin)/(this.end-this.begin);return this.property.interpolate(r.possiblyEvaluate(e),n,function(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)}(a))}return n};var zn=function(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)};zn.prototype.possiblyEvaluate=function(e){for(var t=new Fn(this._properties),n=0,r=Object.keys(this._values);n<r.length;n+=1){var a=r[n];t._values[a]=this._values[a].possiblyEvaluate(e)}return t},zn.prototype.hasTransition=function(){for(var e=0,t=Object.keys(this._values);e<t.length;e+=1){var n=t[e];if(this._values[n].prior)return!0}return!1};var jn=function(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)};jn.prototype.getValue=function(e){return b(this._values[e].value)},jn.prototype.setValue=function(e,t){this._values[e]=new Rn(this._values[e].property,null===t?void 0:b(t))},jn.prototype.serialize=function(){for(var e={},t=0,n=Object.keys(this._values);t<n.length;t+=1){var r=n[t],a=this.getValue(r);void 0!==a&&(e[r]=a)}return e},jn.prototype.possiblyEvaluate=function(e){for(var t=new Fn(this._properties),n=0,r=Object.keys(this._values);n<r.length;n+=1){var a=r[n];t._values[a]=this._values[a].possiblyEvaluate(e)}return t};var Nn=function(e,t,n){this.property=e,this.value=t,this.globals=n};Nn.prototype.isConstant=function(){return"constant"===this.value.kind},Nn.prototype.constantOr=function(e){return"constant"===this.value.kind?this.value.value:e},Nn.prototype.evaluate=function(e){return this.property.evaluate(this.value,this.globals,e)};var Fn=function(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)};Fn.prototype.get=function(e){return this._values[e]};var Bn=function(e){this.specification=e};Bn.prototype.possiblyEvaluate=function(e,t){return e.expression.evaluate(t)},Bn.prototype.interpolate=function(e,t,n){var r=Te[this.specification.type];return r?r(e,t,n):e};var Vn=function(e){this.specification=e};Vn.prototype.possiblyEvaluate=function(e,t){return"constant"===e.expression.kind||"camera"===e.expression.kind?new Nn(this,{kind:"constant",value:e.expression.evaluate(t)},t):new Nn(this,e.expression,t)},Vn.prototype.interpolate=function(e,t,n){if("constant"!==e.value.kind||"constant"!==t.value.kind)return e;if(void 0===e.value.value||void 0===t.value.value)return new Nn(this,{kind:"constant",value:void 0},e.globals);var r=Te[this.specification.type];return r?new Nn(this,{kind:"constant",value:r(e.value.value,t.value.value,n)},e.globals):e},Vn.prototype.evaluate=function(e,t,n){return"constant"===e.kind?e.value:e.evaluate(t,n)};var Un=function(e){this.specification=e};Un.prototype.possiblyEvaluate=function(e,t){if(void 0!==e.value){if("constant"===e.expression.kind){var n=e.expression.evaluate(t);return this._calculate(n,n,n,t)}return this._calculate(e.expression.evaluate(new Pn(Math.floor(t.zoom-1),t)),e.expression.evaluate(new Pn(Math.floor(t.zoom),t)),e.expression.evaluate(new Pn(Math.floor(t.zoom+1),t)),t)}},Un.prototype._calculate=function(e,t,n,r){var a=r.zoom,i=a-Math.floor(a),o=r.crossFadingFactor();return a>r.zoomHistory.lastIntegerZoom?{from:e,to:t,fromScale:2,toScale:1,t:i+(1-i)*o}:{from:n,to:t,fromScale:.5,toScale:1,t:1-(1-o)*i}},Un.prototype.interpolate=function(e){return e};var Gn=function(e){this.specification=e};Gn.prototype.possiblyEvaluate=function(e,t){return!!e.expression.evaluate(t)},Gn.prototype.interpolate=function(){return!1};var Hn=function(e){for(var t in this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},e){var n=e[t],r=this.defaultPropertyValues[t]=new Rn(n,void 0),a=this.defaultTransitionablePropertyValues[t]=new Ln(n);this.defaultTransitioningPropertyValues[t]=a.untransitioned(),this.defaultPossiblyEvaluatedValues[t]=r.possiblyEvaluate({})}};hn("DataDrivenProperty",Vn),hn("DataConstantProperty",Bn),hn("CrossFadedProperty",Un),hn("ColorRampProperty",Gn);var Wn=function(e){function t(t,n){for(var r in e.call(this),this.id=t.id,this.metadata=t.metadata,this.type=t.type,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,this.visibility="visible","background"!==t.type&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),this._featureFilter=function(){return!0},n.layout&&(this._unevaluatedLayout=new jn(n.layout)),this._transitionablePaint=new Dn(n.paint),t.paint)this.setPaintProperty(r,t.paint[r],{validate:!1});for(var a in t.layout)this.setLayoutProperty(a,t.layout[a],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getLayoutProperty=function(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)},t.prototype.setLayoutProperty=function(e,t,n){if(null!=t){var r="layers."+this.id+".layout."+e;if(this._validate(sn,r,e,t,n))return}"visibility"!==e?this._unevaluatedLayout.setValue(e,t):this.visibility="none"===t?t:"visible"},t.prototype.getPaintProperty=function(e){return v(e,"-transition")?this._transitionablePaint.getTransition(e.slice(0,-"-transition".length)):this._transitionablePaint.getValue(e)},t.prototype.setPaintProperty=function(e,t,n){if(null!=t){var r="layers."+this.id+".paint."+e;if(this._validate(on,r,e,t,n))return}v(e,"-transition")?this._transitionablePaint.setTransition(e.slice(0,-"-transition".length),t||void 0):this._transitionablePaint.setValue(e,t)},t.prototype.isHidden=function(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility},t.prototype.updateTransitions=function(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)},t.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},t.prototype.recalculate=function(e){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e)),this.paint=this._transitioningPaint.possiblyEvaluate(e)},t.prototype.serialize=function(){var e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return"none"===this.visibility&&(e.layout=e.layout||{},e.layout.visibility="none"),y(e,function(e,t){return!(void 0===e||"layout"===t&&!Object.keys(e).length||"paint"===t&&!Object.keys(e).length)})},t.prototype._validate=function(e,t,n,r,a){return(!a||!1!==a.validate)&&ln(this,e.call(rn,{key:t,layerType:this.type,objectKey:n,value:r,styleSpec:L,style:{glyphs:!0,sprite:!0}}))},t.prototype.hasOffscreenPass=function(){return!1},t.prototype.resize=function(){},t}(R),qn={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Yn=function(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Xn=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Zn(e,t){void 0===t&&(t=1);var n=0,r=0;return{members:e.map(function(e){var a,i=(a=e.type,qn[a].BYTES_PER_ELEMENT),o=n=$n(n,Math.max(t,i)),s=e.components||1;return r=Math.max(r,i),n+=i*s,{name:e.name,type:e.type,components:s,offset:o}}),size:$n(n,Math.max(r,t)),alignment:t}}function $n(e,t){return Math.ceil(e/t)*t}Xn.serialize=function(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}},Xn.deserialize=function(e){var t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t},Xn.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Xn.prototype.clear=function(){this.length=0},Xn.prototype.resize=function(e){this.reserve(e),this.length=e},Xn.prototype.reserve=function(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}},Xn.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Kn=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t){var n=this.length;this.resize(n+1);var r=2*n;return this.int16[r+0]=e,this.int16[r+1]=t,n},t}(Xn);Kn.prototype.bytesPerElement=4,hn("StructArrayLayout2i4",Kn);var Jn=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r){var a=this.length;this.resize(a+1);var i=4*a;return this.int16[i+0]=e,this.int16[i+1]=t,this.int16[i+2]=n,this.int16[i+3]=r,a},t}(Xn);Jn.prototype.bytesPerElement=8,hn("StructArrayLayout4i8",Jn);var Qn=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r,a,i){var o=this.length;this.resize(o+1);var s=6*o;return this.int16[s+0]=e,this.int16[s+1]=t,this.int16[s+2]=n,this.int16[s+3]=r,this.int16[s+4]=a,this.int16[s+5]=i,o},t}(Xn);Qn.prototype.bytesPerElement=12,hn("StructArrayLayout2i4i12",Qn);var er=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r,a,i,o,s){var l=this.length;this.resize(l+1);var u=6*l,c=12*l;return this.int16[u+0]=e,this.int16[u+1]=t,this.int16[u+2]=n,this.int16[u+3]=r,this.uint8[c+8]=a,this.uint8[c+9]=i,this.uint8[c+10]=o,this.uint8[c+11]=s,l},t}(Xn);er.prototype.bytesPerElement=12,hn("StructArrayLayout4i4ub12",er);var tr=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r,a,i,o,s){var l=this.length;this.resize(l+1);var u=8*l;return this.int16[u+0]=e,this.int16[u+1]=t,this.int16[u+2]=n,this.int16[u+3]=r,this.uint16[u+4]=a,this.uint16[u+5]=i,this.uint16[u+6]=o,this.uint16[u+7]=s,l},t}(Xn);tr.prototype.bytesPerElement=16,hn("StructArrayLayout4i4ui16",tr);var nr=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n){var r=this.length;this.resize(r+1);var a=3*r;return this.float32[a+0]=e,this.float32[a+1]=t,this.float32[a+2]=n,r},t}(Xn);nr.prototype.bytesPerElement=12,hn("StructArrayLayout3f12",nr);var rr=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e){var t=this.length;this.resize(t+1);var n=1*t;return this.uint32[n+0]=e,t},t}(Xn);rr.prototype.bytesPerElement=4,hn("StructArrayLayout1ul4",rr);var ar=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r,a,i,o,s,l,u,c){var f=this.length;this.resize(f+1);var d=12*f,p=6*f;return this.int16[d+0]=e,this.int16[d+1]=t,this.int16[d+2]=n,this.int16[d+3]=r,this.int16[d+4]=a,this.int16[d+5]=i,this.uint32[p+3]=o,this.uint16[d+8]=s,this.uint16[d+9]=l,this.int16[d+10]=u,this.int16[d+11]=c,f},t}(Xn);ar.prototype.bytesPerElement=24,hn("StructArrayLayout6i1ul2ui2i24",ar);var ir=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r,a,i){var o=this.length;this.resize(o+1);var s=6*o;return this.int16[s+0]=e,this.int16[s+1]=t,this.int16[s+2]=n,this.int16[s+3]=r,this.int16[s+4]=a,this.int16[s+5]=i,o},t}(Xn);ir.prototype.bytesPerElement=12,hn("StructArrayLayout2i2i2i12",ir);var or=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t){var n=this.length;this.resize(n+1);var r=4*n;return this.uint8[r+0]=e,this.uint8[r+1]=t,n},t}(Xn);or.prototype.bytesPerElement=4,hn("StructArrayLayout2ub4",or);var sr=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r,a,i,o,s,l,u,c,f,d,p){var h=this.length;this.resize(h+1);var m=20*h,v=10*h,g=40*h;return this.int16[m+0]=e,this.int16[m+1]=t,this.uint16[m+2]=n,this.uint16[m+3]=r,this.uint32[v+2]=a,this.uint32[v+3]=i,this.uint32[v+4]=o,this.uint16[m+10]=s,this.uint16[m+11]=l,this.uint16[m+12]=u,this.float32[v+7]=c,this.float32[v+8]=f,this.uint8[g+36]=d,this.uint8[g+37]=p,h},t}(Xn);sr.prototype.bytesPerElement=40,hn("StructArrayLayout2i2ui3ul3ui2f2ub40",sr);var lr=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e){var t=this.length;this.resize(t+1);var n=1*t;return this.float32[n+0]=e,t},t}(Xn);lr.prototype.bytesPerElement=4,hn("StructArrayLayout1f4",lr);var ur=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n){var r=this.length;this.resize(r+1);var a=3*r;return this.int16[a+0]=e,this.int16[a+1]=t,this.int16[a+2]=n,r},t}(Xn);ur.prototype.bytesPerElement=6,hn("StructArrayLayout3i6",ur);var cr=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n){var r=this.length;this.resize(r+1);var a=2*r,i=4*r;return this.uint32[a+0]=e,this.uint16[i+2]=t,this.uint16[i+3]=n,r},t}(Xn);cr.prototype.bytesPerElement=8,hn("StructArrayLayout1ul2ui8",cr);var fr=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n){var r=this.length;this.resize(r+1);var a=3*r;return this.uint16[a+0]=e,this.uint16[a+1]=t,this.uint16[a+2]=n,r},t}(Xn);fr.prototype.bytesPerElement=6,hn("StructArrayLayout3ui6",fr);var dr=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t){var n=this.length;this.resize(n+1);var r=2*n;return this.uint16[r+0]=e,this.uint16[r+1]=t,n},t}(Xn);dr.prototype.bytesPerElement=4,hn("StructArrayLayout2ui4",dr);var pr=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t){var n=this.length;this.resize(n+1);var r=2*n;return this.float32[r+0]=e,this.float32[r+1]=t,n},t}(Xn);pr.prototype.bytesPerElement=8,hn("StructArrayLayout2f8",pr);var hr=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r){var a=this.length;this.resize(a+1);var i=4*a;return this.float32[i+0]=e,this.float32[i+1]=t,this.float32[i+2]=n,this.float32[i+3]=r,a},t}(Xn);hr.prototype.bytesPerElement=16,hn("StructArrayLayout4f16",hr);var mr=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},radius:{configurable:!0},signedDistanceFromAnchor:{configurable:!0},anchorPoint:{configurable:!0}};return n.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorPointX.set=function(e){this._structArray.int16[this._pos2+0]=e},n.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},n.anchorPointY.set=function(e){this._structArray.int16[this._pos2+1]=e},n.x1.get=function(){return this._structArray.int16[this._pos2+2]},n.x1.set=function(e){this._structArray.int16[this._pos2+2]=e},n.y1.get=function(){return this._structArray.int16[this._pos2+3]},n.y1.set=function(e){this._structArray.int16[this._pos2+3]=e},n.x2.get=function(){return this._structArray.int16[this._pos2+4]},n.x2.set=function(e){this._structArray.int16[this._pos2+4]=e},n.y2.get=function(){return this._structArray.int16[this._pos2+5]},n.y2.set=function(e){this._structArray.int16[this._pos2+5]=e},n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.featureIndex.set=function(e){this._structArray.uint32[this._pos4+3]=e},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},n.sourceLayerIndex.set=function(e){this._structArray.uint16[this._pos2+8]=e},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},n.bucketIndex.set=function(e){this._structArray.uint16[this._pos2+9]=e},n.radius.get=function(){return this._structArray.int16[this._pos2+10]},n.radius.set=function(e){this._structArray.int16[this._pos2+10]=e},n.signedDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+11]},n.signedDistanceFromAnchor.set=function(e){this._structArray.int16[this._pos2+11]=e},n.anchorPoint.get=function(){return new l(this.anchorPointX,this.anchorPointY)},Object.defineProperties(t.prototype,n),t}(Yn);mr.prototype.size=24;var vr=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(e){return new mr(this,e)},t}(ar);hn("CollisionBoxArray",vr);var gr=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},hidden:{configurable:!0}};return n.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorX.set=function(e){this._structArray.int16[this._pos2+0]=e},n.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},n.anchorY.set=function(e){this._structArray.int16[this._pos2+1]=e},n.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.glyphStartIndex.set=function(e){this._structArray.uint16[this._pos2+2]=e},n.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},n.numGlyphs.set=function(e){this._structArray.uint16[this._pos2+3]=e},n.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},n.vertexStartIndex.set=function(e){this._structArray.uint32[this._pos4+2]=e},n.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.lineStartIndex.set=function(e){this._structArray.uint32[this._pos4+3]=e},n.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},n.lineLength.set=function(e){this._structArray.uint32[this._pos4+4]=e},n.segment.get=function(){return this._structArray.uint16[this._pos2+10]},n.segment.set=function(e){this._structArray.uint16[this._pos2+10]=e},n.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},n.lowerSize.set=function(e){this._structArray.uint16[this._pos2+11]=e},n.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},n.upperSize.set=function(e){this._structArray.uint16[this._pos2+12]=e},n.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},n.lineOffsetX.set=function(e){this._structArray.float32[this._pos4+7]=e},n.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},n.lineOffsetY.set=function(e){this._structArray.float32[this._pos4+8]=e},n.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},n.writingMode.set=function(e){this._structArray.uint8[this._pos1+36]=e},n.hidden.get=function(){return this._structArray.uint8[this._pos1+37]},n.hidden.set=function(e){this._structArray.uint8[this._pos1+37]=e},Object.defineProperties(t.prototype,n),t}(Yn);gr.prototype.size=40;var yr=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(e){return new gr(this,e)},t}(sr);hn("PlacedSymbolArray",yr);var br=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={offsetX:{configurable:!0}};return n.offsetX.get=function(){return this._structArray.float32[this._pos4+0]},n.offsetX.set=function(e){this._structArray.float32[this._pos4+0]=e},Object.defineProperties(t.prototype,n),t}(Yn);br.prototype.size=4;var xr=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getoffsetX=function(e){return this.float32[1*e+0]},t.prototype.get=function(e){return new br(this,e)},t}(lr);hn("GlyphOffsetArray",xr);var _r=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={x:{configurable:!0},y:{configurable:!0},tileUnitDistanceFromAnchor:{configurable:!0}};return n.x.get=function(){return this._structArray.int16[this._pos2+0]},n.x.set=function(e){this._structArray.int16[this._pos2+0]=e},n.y.get=function(){return this._structArray.int16[this._pos2+1]},n.y.set=function(e){this._structArray.int16[this._pos2+1]=e},n.tileUnitDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+2]},n.tileUnitDistanceFromAnchor.set=function(e){this._structArray.int16[this._pos2+2]=e},Object.defineProperties(t.prototype,n),t}(Yn);_r.prototype.size=6;var wr=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getx=function(e){return this.int16[3*e+0]},t.prototype.gety=function(e){return this.int16[3*e+1]},t.prototype.gettileUnitDistanceFromAnchor=function(e){return this.int16[3*e+2]},t.prototype.get=function(e){return new _r(this,e)},t}(ur);hn("SymbolLineVertexArray",wr);var Tr=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},n.featureIndex.set=function(e){this._structArray.uint32[this._pos4+0]=e},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.sourceLayerIndex.set=function(e){this._structArray.uint16[this._pos2+2]=e},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},n.bucketIndex.set=function(e){this._structArray.uint16[this._pos2+3]=e},Object.defineProperties(t.prototype,n),t}(Yn);Tr.prototype.size=8;var kr=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(e){return new Tr(this,e)},t}(cr);hn("FeatureIndexArray",kr);var Cr=Zn([{name:"a_pos",components:2,type:"Int16"}],4).members,Er=function(e){void 0===e&&(e=[]),this.segments=e};Er.prototype.prepareSegment=function(e,t,n){var r=this.segments[this.segments.length-1];return e>Er.MAX_VERTEX_ARRAY_LENGTH&&_("Max vertices per segment is "+Er.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+e),(!r||r.vertexLength+e>Er.MAX_VERTEX_ARRAY_LENGTH)&&(r={vertexOffset:t.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},this.segments.push(r)),r},Er.prototype.get=function(){return this.segments},Er.prototype.destroy=function(){for(var e=0,t=this.segments;e<t.length;e+=1){var n=t[e];for(var r in n.vaos)n.vaos[r].destroy()}},Er.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,hn("SegmentVector",Er);var Mr=function(e,t){return 256*(e=d(Math.floor(e),0,255))+(t=d(Math.floor(t),0,255))};function Ar(e){return[Mr(255*e.r,255*e.g),Mr(255*e.b,255*e.a)]}var Sr=function(e,t,n){this.value=e,this.name=t,this.type=n,this.statistics={max:-1/0}};Sr.prototype.defines=function(){return["#define HAS_UNIFORM_u_"+this.name]},Sr.prototype.populatePaintArray=function(){},Sr.prototype.upload=function(){},Sr.prototype.destroy=function(){},Sr.prototype.setUniforms=function(e,t,n,r){var a=r.constantOr(this.value),i=e.gl;"color"===this.type?i.uniform4f(t.uniforms["u_"+this.name],a.r,a.g,a.b,a.a):i.uniform1f(t.uniforms["u_"+this.name],a)};var Or=function(e,t,n){this.expression=e,this.name=t,this.type=n,this.statistics={max:-1/0};var r="color"===n?pr:lr;this.paintVertexAttributes=[{name:"a_"+t,type:"Float32",components:"color"===n?2:1,offset:0}],this.paintVertexArray=new r};Or.prototype.defines=function(){return[]},Or.prototype.populatePaintArray=function(e,t){var n=this.paintVertexArray,r=n.length;n.reserve(e);var a=this.expression.evaluate(new Pn(0),t);if("color"===this.type)for(var i=Ar(a),o=r;o<e;o++)n.emplaceBack(i[0],i[1]);else{for(var s=r;s<e;s++)n.emplaceBack(a);this.statistics.max=Math.max(this.statistics.max,a)}},Or.prototype.upload=function(e){this.paintVertexArray&&(this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes))},Or.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Or.prototype.setUniforms=function(e,t){e.gl.uniform1f(t.uniforms["a_"+this.name+"_t"],0)};var Pr=function(e,t,n,r,a){this.expression=e,this.name=t,this.type=n,this.useIntegerZoom=r,this.zoom=a,this.statistics={max:-1/0};var i="color"===n?hr:pr;this.paintVertexAttributes=[{name:"a_"+t,type:"Float32",components:"color"===n?4:2,offset:0}],this.paintVertexArray=new i};Pr.prototype.defines=function(){return[]},Pr.prototype.populatePaintArray=function(e,t){var n=this.paintVertexArray,r=n.length;n.reserve(e);var a=this.expression.evaluate(new Pn(this.zoom),t),i=this.expression.evaluate(new Pn(this.zoom+1),t);if("color"===this.type)for(var o=Ar(a),s=Ar(i),l=r;l<e;l++)n.emplaceBack(o[0],o[1],s[0],s[1]);else{for(var u=r;u<e;u++)n.emplaceBack(a,i);this.statistics.max=Math.max(this.statistics.max,a,i)}},Pr.prototype.upload=function(e){this.paintVertexArray&&(this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes))},Pr.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Pr.prototype.interpolationFactor=function(e){return this.useIntegerZoom?this.expression.interpolationFactor(Math.floor(e),this.zoom,this.zoom+1):this.expression.interpolationFactor(e,this.zoom,this.zoom+1)},Pr.prototype.setUniforms=function(e,t,n){e.gl.uniform1f(t.uniforms["a_"+this.name+"_t"],this.interpolationFactor(n.zoom))};var Rr=function(){this.binders={},this.cacheKey="",this._buffers=[]};Rr.createDynamic=function(e,t,n){var r=new Rr,a=[];for(var i in e.paint._values)if(n(i)){var o=e.paint.get(i);if(o instanceof Nn&&o.property.specification["property-function"]){var s=Dr(i,e.type),l=o.property.specification.type,u=o.property.useIntegerZoom;"constant"===o.value.kind?(r.binders[i]=new Sr(o.value,s,l),a.push("/u_"+s)):"source"===o.value.kind?(r.binders[i]=new Or(o.value,s,l),a.push("/a_"+s)):(r.binders[i]=new Pr(o.value,s,l,u,t),a.push("/z_"+s))}}return r.cacheKey=a.sort().join(""),r},Rr.prototype.populatePaintArrays=function(e,t){for(var n in this.binders)this.binders[n].populatePaintArray(e,t)},Rr.prototype.defines=function(){var e=[];for(var t in this.binders)e.push.apply(e,this.binders[t].defines());return e},Rr.prototype.setUniforms=function(e,t,n,r){for(var a in this.binders)this.binders[a].setUniforms(e,t,r,n.get(a))},Rr.prototype.getPaintVertexBuffers=function(){return this._buffers},Rr.prototype.upload=function(e){for(var t in this.binders)this.binders[t].upload(e);var n=[];for(var r in this.binders){var a=this.binders[r];(a instanceof Or||a instanceof Pr)&&a.paintVertexBuffer&&n.push(a.paintVertexBuffer)}this._buffers=n},Rr.prototype.destroy=function(){for(var e in this.binders)this.binders[e].destroy()};var Lr=function(e,t,n,r){void 0===r&&(r=function(){return!0}),this.programConfigurations={};for(var a=0,i=t;a<i.length;a+=1){var o=i[a];this.programConfigurations[o.id]=Rr.createDynamic(o,n,r),this.programConfigurations[o.id].layoutAttributes=e}};function Dr(e,t){return{"text-opacity":"opacity","icon-opacity":"opacity","text-color":"fill_color","icon-color":"fill_color","text-halo-color":"halo_color","icon-halo-color":"halo_color","text-halo-blur":"halo_blur","icon-halo-blur":"halo_blur","text-halo-width":"halo_width","icon-halo-width":"halo_width","line-gap-width":"gapwidth"}[e]||e.replace(t+"-","").replace(/-/g,"_")}Lr.prototype.populatePaintArrays=function(e,t){for(var n in this.programConfigurations)this.programConfigurations[n].populatePaintArrays(e,t)},Lr.prototype.get=function(e){return this.programConfigurations[e]},Lr.prototype.upload=function(e){for(var t in this.programConfigurations)this.programConfigurations[t].upload(e)},Lr.prototype.destroy=function(){for(var e in this.programConfigurations)this.programConfigurations[e].destroy()},hn("ConstantBinder",Sr),hn("SourceExpressionBinder",Or),hn("CompositeExpressionBinder",Pr),hn("ProgramConfiguration",Rr,{omit:["_buffers"]}),hn("ProgramConfigurationSet",Lr);var Ir=8192,zr={min:-1*Math.pow(2,15),max:Math.pow(2,15)-1};function jr(e){for(var t=Ir/e.extent,n=e.loadGeometry(),r=0;r<n.length;r++)for(var a=n[r],i=0;i<a.length;i++){var o=a[i];o.x=Math.round(o.x*t),o.y=Math.round(o.y*t),(o.x<zr.min||o.x>zr.max||o.y<zr.min||o.y>zr.max)&&_("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return n}function Nr(e,t,n,r,a){e.emplaceBack(2*t+(r+1)/2,2*n+(a+1)/2)}var Fr=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(e){return e.id}),this.index=e.index,this.layoutVertexArray=new Kn,this.indexArray=new fr,this.segments=new Er,this.programConfigurations=new Lr(Cr,e.layers,e.zoom)};function Br(e,t,n){for(var r=0;r<e.length;r++){var a=e[r];if(Zr(a,t))return!0;if(qr(t,a,n))return!0}return!1}function Vr(e,t){if(1===e.length&&1===e[0].length)return Xr(t,e[0][0]);for(var n=0;n<t.length;n++)for(var r=t[n],a=0;a<r.length;a++)if(Xr(e,r[a]))return!0;for(var i=0;i<e.length;i++){for(var o=e[i],s=0;s<o.length;s++)if(Xr(t,o[s]))return!0;for(var l=0;l<t.length;l++)if(Hr(o,t[l]))return!0}return!1}function Ur(e,t,n){for(var r=0;r<t.length;r++)for(var a=t[r],i=0;i<e.length;i++){var o=e[i];if(o.length>=3)for(var s=0;s<a.length;s++)if(Zr(o,a[s]))return!0;if(Gr(o,a,n))return!0}return!1}function Gr(e,t,n){if(e.length>1){if(Hr(e,t))return!0;for(var r=0;r<t.length;r++)if(qr(t[r],e,n))return!0}for(var a=0;a<e.length;a++)if(qr(e[a],t,n))return!0;return!1}function Hr(e,t){if(0===e.length||0===t.length)return!1;for(var n=0;n<e.length-1;n++)for(var r=e[n],a=e[n+1],i=0;i<t.length-1;i++)if(Wr(r,a,t[i],t[i+1]))return!0;return!1}function Wr(e,t,n,r){return w(e,n,r)!==w(t,n,r)&&w(e,t,n)!==w(e,t,r)}function qr(e,t,n){var r=n*n;if(1===t.length)return e.distSqr(t[0])<r;for(var a=1;a<t.length;a++)if(Yr(e,t[a-1],t[a])<r)return!0;return!1}function Yr(e,t,n){var r=t.distSqr(n);if(0===r)return e.distSqr(t);var a=((e.x-t.x)*(n.x-t.x)+(e.y-t.y)*(n.y-t.y))/r;return a<0?e.distSqr(t):a>1?e.distSqr(n):e.distSqr(n.sub(t)._mult(a)._add(t))}function Xr(e,t){for(var n,r,a,i=!1,o=0;o<e.length;o++)for(var s=0,l=(n=e[o]).length-1;s<n.length;l=s++)r=n[s],a=n[l],r.y>t.y!=a.y>t.y&&t.x<(a.x-r.x)*(t.y-r.y)/(a.y-r.y)+r.x&&(i=!i);return i}function Zr(e,t){for(var n=!1,r=0,a=e.length-1;r<e.length;a=r++){var i=e[r],o=e[a];i.y>t.y!=o.y>t.y&&t.x<(o.x-i.x)*(t.y-i.y)/(o.y-i.y)+i.x&&(n=!n)}return n}function $r(e,t,n){var r=t.paint.get(e).value;return"constant"===r.kind?r.value:n.programConfigurations.get(t.id).binders[e].statistics.max}function Kr(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function Jr(e,t,n,r,a){if(!t[0]&&!t[1])return e;var i=l.convert(t);"viewport"===n&&i._rotate(-r);for(var o=[],s=0;s<e.length;s++){for(var u=e[s],c=[],f=0;f<u.length;f++)c.push(u[f].sub(i._mult(a)));o.push(c)}return o}Fr.prototype.populate=function(e,t){for(var n=0,r=e;n<r.length;n+=1){var a=r[n],i=a.feature,o=a.index,s=a.sourceLayerIndex;if(this.layers[0]._featureFilter(new Pn(this.zoom),i)){var l=jr(i);this.addFeature(i,l),t.featureIndex.insert(i,l,o,s,this.index)}}},Fr.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Fr.prototype.upload=function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Cr),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.programConfigurations.upload(e)},Fr.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Fr.prototype.addFeature=function(e,t){for(var n=0,r=t;n<r.length;n+=1)for(var a=0,i=r[n];a<i.length;a+=1){var o=i[a],s=o.x,l=o.y;if(!(s<0||s>=Ir||l<0||l>=Ir)){var u=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),c=u.vertexLength;Nr(this.layoutVertexArray,s,l,-1,-1),Nr(this.layoutVertexArray,s,l,1,-1),Nr(this.layoutVertexArray,s,l,1,1),Nr(this.layoutVertexArray,s,l,-1,1),this.indexArray.emplaceBack(c,c+1,c+2),this.indexArray.emplaceBack(c,c+3,c+2),u.vertexLength+=4,u.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e)},hn("CircleBucket",Fr,{omit:["layers"]});var Qr={paint:new Hn({"circle-radius":new Vn(L.paint_circle["circle-radius"]),"circle-color":new Vn(L.paint_circle["circle-color"]),"circle-blur":new Vn(L.paint_circle["circle-blur"]),"circle-opacity":new Vn(L.paint_circle["circle-opacity"]),"circle-translate":new Bn(L.paint_circle["circle-translate"]),"circle-translate-anchor":new Bn(L.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Bn(L.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Bn(L.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Vn(L.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Vn(L.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Vn(L.paint_circle["circle-stroke-opacity"])})},ea=a(function(e,t){var n;e.exports=((n=new Float32Array(3))[0]=0,n[1]=0,n[2]=0,function(){var e=new Float32Array(4);e[0]=0,e[1]=0,e[2]=0,e[3]=0}(),{vec3:{transformMat3:function(e,t,n){var r=t[0],a=t[1],i=t[2];return e[0]=r*n[0]+a*n[3]+i*n[6],e[1]=r*n[1]+a*n[4]+i*n[7],e[2]=r*n[2]+a*n[5]+i*n[8],e}},vec4:{transformMat4:function(e,t,n){var r=t[0],a=t[1],i=t[2],o=t[3];return e[0]=n[0]*r+n[4]*a+n[8]*i+n[12]*o,e[1]=n[1]*r+n[5]*a+n[9]*i+n[13]*o,e[2]=n[2]*r+n[6]*a+n[10]*i+n[14]*o,e[3]=n[3]*r+n[7]*a+n[11]*i+n[15]*o,e}},mat2:{create:function(){var e=new Float32Array(4);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},rotate:function(e,t,n){var r=t[0],a=t[1],i=t[2],o=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l+i*s,e[1]=a*l+o*s,e[2]=r*-s+i*l,e[3]=a*-s+o*l,e},scale:function(e,t,n){var r=t[0],a=t[1],i=t[2],o=t[3],s=n[0],l=n[1];return e[0]=r*s,e[1]=a*s,e[2]=i*l,e[3]=o*l,e}},mat3:{create:function(){var e=new Float32Array(9);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},fromRotation:function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}},mat4:{create:function(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},identity:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},translate:function(e,t,n){var r,a,i,o,s,l,u,c,f,d,p,h,m=n[0],v=n[1],g=n[2];return t===e?(e[12]=t[0]*m+t[4]*v+t[8]*g+t[12],e[13]=t[1]*m+t[5]*v+t[9]*g+t[13],e[14]=t[2]*m+t[6]*v+t[10]*g+t[14],e[15]=t[3]*m+t[7]*v+t[11]*g+t[15]):(r=t[0],a=t[1],i=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],d=t[9],p=t[10],h=t[11],e[0]=r,e[1]=a,e[2]=i,e[3]=o,e[4]=s,e[5]=l,e[6]=u,e[7]=c,e[8]=f,e[9]=d,e[10]=p,e[11]=h,e[12]=r*m+s*v+f*g+t[12],e[13]=a*m+l*v+d*g+t[13],e[14]=i*m+u*v+p*g+t[14],e[15]=o*m+c*v+h*g+t[15]),e},scale:function(e,t,n){var r=n[0],a=n[1],i=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*a,e[5]=t[5]*a,e[6]=t[6]*a,e[7]=t[7]*a,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},multiply:function(e,t,n){var r=t[0],a=t[1],i=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],d=t[9],p=t[10],h=t[11],m=t[12],v=t[13],g=t[14],y=t[15],b=n[0],x=n[1],_=n[2],w=n[3];return e[0]=b*r+x*s+_*f+w*m,e[1]=b*a+x*l+_*d+w*v,e[2]=b*i+x*u+_*p+w*g,e[3]=b*o+x*c+_*h+w*y,b=n[4],x=n[5],_=n[6],w=n[7],e[4]=b*r+x*s+_*f+w*m,e[5]=b*a+x*l+_*d+w*v,e[6]=b*i+x*u+_*p+w*g,e[7]=b*o+x*c+_*h+w*y,b=n[8],x=n[9],_=n[10],w=n[11],e[8]=b*r+x*s+_*f+w*m,e[9]=b*a+x*l+_*d+w*v,e[10]=b*i+x*u+_*p+w*g,e[11]=b*o+x*c+_*h+w*y,b=n[12],x=n[13],_=n[14],w=n[15],e[12]=b*r+x*s+_*f+w*m,e[13]=b*a+x*l+_*d+w*v,e[14]=b*i+x*u+_*p+w*g,e[15]=b*o+x*c+_*h+w*y,e},perspective:function(e,t,n,r,a){var i=1/Math.tan(t/2),o=1/(r-a);return e[0]=i/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(a+r)*o,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*a*r*o,e[15]=0,e},rotateX:function(e,t,n){var r=Math.sin(n),a=Math.cos(n),i=t[4],o=t[5],s=t[6],l=t[7],u=t[8],c=t[9],f=t[10],d=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=i*a+u*r,e[5]=o*a+c*r,e[6]=s*a+f*r,e[7]=l*a+d*r,e[8]=u*a-i*r,e[9]=c*a-o*r,e[10]=f*a-s*r,e[11]=d*a-l*r,e},rotateZ:function(e,t,n){var r=Math.sin(n),a=Math.cos(n),i=t[0],o=t[1],s=t[2],l=t[3],u=t[4],c=t[5],f=t[6],d=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=i*a+u*r,e[1]=o*a+c*r,e[2]=s*a+f*r,e[3]=l*a+d*r,e[4]=u*a-i*r,e[5]=c*a-o*r,e[6]=f*a-s*r,e[7]=d*a-l*r,e},invert:function(e,t){var n=t[0],r=t[1],a=t[2],i=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],f=t[9],d=t[10],p=t[11],h=t[12],m=t[13],v=t[14],g=t[15],y=n*s-r*o,b=n*l-a*o,x=n*u-i*o,_=r*l-a*s,w=r*u-i*s,T=a*u-i*l,k=c*m-f*h,C=c*v-d*h,E=c*g-p*h,M=f*v-d*m,A=f*g-p*m,S=d*g-p*v,O=y*S-b*A+x*M+_*E-w*C+T*k;return O?(O=1/O,e[0]=(s*S-l*A+u*M)*O,e[1]=(a*A-r*S-i*M)*O,e[2]=(m*T-v*w+g*_)*O,e[3]=(d*w-f*T-p*_)*O,e[4]=(l*E-o*S-u*C)*O,e[5]=(n*S-a*E+i*C)*O,e[6]=(v*x-h*T-g*b)*O,e[7]=(c*T-d*x+p*b)*O,e[8]=(o*A-s*E+u*k)*O,e[9]=(r*E-n*A-i*k)*O,e[10]=(h*w-m*x+g*y)*O,e[11]=(f*x-c*w-p*y)*O,e[12]=(s*C-o*M-l*k)*O,e[13]=(n*M-r*C+a*k)*O,e[14]=(m*b-h*_-v*y)*O,e[15]=(c*_-f*b+d*y)*O,e):null},ortho:function(e,t,n,r,a,i,o){var s=1/(t-n),l=1/(r-a),u=1/(i-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+n)*s,e[13]=(a+r)*l,e[14]=(o+i)*u,e[15]=1,e}}})}),ta=(ea.vec3,ea.vec4),na=(ea.mat2,ea.mat3,ea.mat4),ra=function(e){function t(t){e.call(this,t,Qr)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.createBucket=function(e){return new Fr(e)},t.prototype.queryRadius=function(e){var t=e;return $r("circle-radius",this,t)+$r("circle-stroke-width",this,t)+Kr(this.paint.get("circle-translate"))},t.prototype.queryIntersectsFeature=function(e,t,n,r,a,i,o){for(var s=Jr(e,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),a.angle,i),l=this.paint.get("circle-radius").evaluate(t)+this.paint.get("circle-stroke-width").evaluate(t),u="map"===this.paint.get("circle-pitch-alignment"),c=u?s:function(e,t,n){return e.map(function(e){return e.map(function(e){return aa(e,t,n)})})}(s,o,a),f=u?l*i:l,d=0,p=n;d<p.length;d+=1)for(var h=0,m=p[d];h<m.length;h+=1){var v=m[h],g=u?v:aa(v,o,a),y=f,b=ta.transformMat4([],[v.x,v.y,0,1],o);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?y*=b[3]/a.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(y*=a.cameraToCenterDistance/b[3]),Br(c,g,y))return!0}return!1},t}(Wn);function aa(e,t,n){var r=ta.transformMat4([],[e.x,e.y,0,1],t);return new l((r[0]/r[3]+1)*n.width*.5,(r[1]/r[3]+1)*n.height*.5)}var ia=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Fr);function oa(e,t,n,r){var a=t.width,i=t.height;if(r){if(r.length!==a*i*n)throw new RangeError("mismatched image size")}else r=new Uint8Array(a*i*n);return e.width=a,e.height=i,e.data=r,e}function sa(e,t,n){var r=t.width,a=t.height;if(r!==e.width||a!==e.height){var i=oa({},{width:r,height:a},n);la(e,i,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,r),height:Math.min(e.height,a)},n),e.width=r,e.height=a,e.data=i.data}}function la(e,t,n,r,a,i){if(0===a.width||0===a.height)return t;if(a.width>e.width||a.height>e.height||n.x>e.width-a.width||n.y>e.height-a.height)throw new RangeError("out of range source coordinates for image copy");if(a.width>t.width||a.height>t.height||r.x>t.width-a.width||r.y>t.height-a.height)throw new RangeError("out of range destination coordinates for image copy");for(var o=e.data,s=t.data,l=0;l<a.height;l++)for(var u=((n.y+l)*e.width+n.x)*i,c=((r.y+l)*t.width+r.x)*i,f=0;f<a.width*i;f++)s[c+f]=o[u+f];return t}hn("HeatmapBucket",ia,{omit:["layers"]});var ua=function(e,t){oa(this,e,1,t)};ua.prototype.resize=function(e){sa(this,e,1)},ua.prototype.clone=function(){return new ua({width:this.width,height:this.height},new Uint8Array(this.data))},ua.copy=function(e,t,n,r,a){la(e,t,n,r,a,1)};var ca=function(e,t){oa(this,e,4,t)};ca.prototype.resize=function(e){sa(this,e,4)},ca.prototype.clone=function(){return new ca({width:this.width,height:this.height},new Uint8Array(this.data))},ca.copy=function(e,t,n,r,a){la(e,t,n,r,a,4)},hn("AlphaImage",ua),hn("RGBAImage",ca);var fa={paint:new Hn({"heatmap-radius":new Vn(L.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Vn(L.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Bn(L.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Gn(L.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Bn(L.paint_heatmap["heatmap-opacity"])})};function da(e,t){for(var n=new Uint8Array(1024),r={},a=0,i=0;a<256;a++,i+=4){r[t]=a/255;var o=e.evaluate(r);n[i+0]=Math.floor(255*o.r/o.a),n[i+1]=Math.floor(255*o.g/o.a),n[i+2]=Math.floor(255*o.b/o.a),n[i+3]=Math.floor(255*o.a)}return new ca({width:256,height:1},n)}var pa=function(e){function t(t){e.call(this,t,fa),this._updateColorRamp()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.createBucket=function(e){return new ia(e)},t.prototype.setPaintProperty=function(t,n,r){e.prototype.setPaintProperty.call(this,t,n,r),"heatmap-color"===t&&this._updateColorRamp()},t.prototype._updateColorRamp=function(){var e=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=da(e,"heatmapDensity"),this.colorRampTexture=null},t.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},t}(Wn),ha={paint:new Hn({"hillshade-illumination-direction":new Bn(L.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Bn(L.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Bn(L.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Bn(L.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Bn(L.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Bn(L.paint_hillshade["hillshade-accent-color"])})},ma=function(e){function t(t){e.call(this,t,ha)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},t}(Wn),va=Zn([{name:"a_pos",components:2,type:"Int16"}],4).members,ga=ba,ya=ba;function ba(e,t,n){n=n||2;var r,a,i,o,s,l,u,c=t&&t.length,f=c?t[0]*n:e.length,d=xa(e,0,f,n,!0),p=[];if(!d)return p;if(c&&(d=function(e,t,n,r){var a,i,o,s,l,u=[];for(a=0,i=t.length;a<i;a++)o=t[a]*r,s=a<i-1?t[a+1]*r:e.length,(l=xa(e,o,s,r,!1))===l.next&&(l.steiner=!0),u.push(Oa(l));for(u.sort(Ma),a=0;a<u.length;a++)Aa(u[a],n),n=_a(n,n.next);return n}(e,t,d,n)),e.length>80*n){r=i=e[0],a=o=e[1];for(var h=n;h<f;h+=n)(s=e[h])<r&&(r=s),(l=e[h+1])<a&&(a=l),s>i&&(i=s),l>o&&(o=l);u=0!==(u=Math.max(i-r,o-a))?1/u:0}return wa(d,p,n,r,a,u),p}function xa(e,t,n,r,a){var i,o;if(a===Va(e,t,n,r)>0)for(i=t;i<n;i+=r)o=Na(i,e[i],e[i+1],o);else for(i=n-r;i>=t;i-=r)o=Na(i,e[i],e[i+1],o);return o&&Da(o,o.next)&&(Fa(o),o=o.next),o}function _a(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!Da(r,r.next)&&0!==La(r.prev,r,r.next))r=r.next;else{if(Fa(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function wa(e,t,n,r,a,i,o){if(e){!o&&i&&function(e,t,n,r){var a=e;do{null===a.z&&(a.z=Sa(a.x,a.y,t,n,r)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next}while(a!==e);a.prevZ.nextZ=null,a.prevZ=null,function(e){var t,n,r,a,i,o,s,l,u=1;do{for(n=e,e=null,i=null,o=0;n;){for(o++,r=n,s=0,t=0;t<u&&(s++,r=r.nextZ);t++);for(l=u;s>0||l>0&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(a=n,n=n.nextZ,s--):(a=r,r=r.nextZ,l--),i?i.nextZ=a:e=a,a.prevZ=i,i=a;n=r}i.nextZ=null,u*=2}while(o>1)}(a)}(e,r,a,i);for(var s,l,u=e;e.prev!==e.next;)if(s=e.prev,l=e.next,i?ka(e,r,a,i):Ta(e))t.push(s.i/n),t.push(e.i/n),t.push(l.i/n),Fa(e),e=l.next,u=l.next;else if((e=l)===u){o?1===o?wa(e=Ca(e,t,n),t,n,r,a,i,2):2===o&&Ea(e,t,n,r,a,i):wa(_a(e),t,n,r,a,i,1);break}}}function Ta(e){var t=e.prev,n=e,r=e.next;if(La(t,n,r)>=0)return!1;for(var a=e.next.next;a!==e.prev;){if(Pa(t.x,t.y,n.x,n.y,r.x,r.y,a.x,a.y)&&La(a.prev,a,a.next)>=0)return!1;a=a.next}return!0}function ka(e,t,n,r){var a=e.prev,i=e,o=e.next;if(La(a,i,o)>=0)return!1;for(var s=a.x<i.x?a.x<o.x?a.x:o.x:i.x<o.x?i.x:o.x,l=a.y<i.y?a.y<o.y?a.y:o.y:i.y<o.y?i.y:o.y,u=a.x>i.x?a.x>o.x?a.x:o.x:i.x>o.x?i.x:o.x,c=a.y>i.y?a.y>o.y?a.y:o.y:i.y>o.y?i.y:o.y,f=Sa(s,l,t,n,r),d=Sa(u,c,t,n,r),p=e.prevZ,h=e.nextZ;p&&p.z>=f&&h&&h.z<=d;){if(p!==e.prev&&p!==e.next&&Pa(a.x,a.y,i.x,i.y,o.x,o.y,p.x,p.y)&&La(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,h!==e.prev&&h!==e.next&&Pa(a.x,a.y,i.x,i.y,o.x,o.y,h.x,h.y)&&La(h.prev,h,h.next)>=0)return!1;h=h.nextZ}for(;p&&p.z>=f;){if(p!==e.prev&&p!==e.next&&Pa(a.x,a.y,i.x,i.y,o.x,o.y,p.x,p.y)&&La(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;h&&h.z<=d;){if(h!==e.prev&&h!==e.next&&Pa(a.x,a.y,i.x,i.y,o.x,o.y,h.x,h.y)&&La(h.prev,h,h.next)>=0)return!1;h=h.nextZ}return!0}function Ca(e,t,n){var r=e;do{var a=r.prev,i=r.next.next;!Da(a,i)&&Ia(a,r,r.next,i)&&za(a,i)&&za(i,a)&&(t.push(a.i/n),t.push(r.i/n),t.push(i.i/n),Fa(r),Fa(r.next),r=e=i),r=r.next}while(r!==e);return r}function Ea(e,t,n,r,a,i){var o=e;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&Ra(o,s)){var l=ja(o,s);return o=_a(o,o.next),l=_a(l,l.next),wa(o,t,n,r,a,i),void wa(l,t,n,r,a,i)}s=s.next}o=o.next}while(o!==e)}function Ma(e,t){return e.x-t.x}function Aa(e,t){if(t=function(e,t){var n,r=t,a=e.x,i=e.y,o=-1/0;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var s=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=a&&s>o){if(o=s,s===a){if(i===r.y)return r;if(i===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(a===o)return n.prev;var l,u=n,c=n.x,f=n.y,d=1/0;for(r=n.next;r!==u;)a>=r.x&&r.x>=c&&a!==r.x&&Pa(i<f?a:o,i,c,f,i<f?o:a,i,r.x,r.y)&&((l=Math.abs(i-r.y)/(a-r.x))<d||l===d&&r.x>n.x)&&za(r,e)&&(n=r,d=l),r=r.next;return n}(e,t)){var n=ja(t,e);_a(n,n.next)}}function Sa(e,t,n,r,a){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*a)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*a)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Oa(e){var t=e,n=e;do{t.x<n.x&&(n=t),t=t.next}while(t!==e);return n}function Pa(e,t,n,r,a,i,o,s){return(a-o)*(t-s)-(e-o)*(i-s)>=0&&(e-o)*(r-s)-(n-o)*(t-s)>=0&&(n-o)*(i-s)-(a-o)*(r-s)>=0}function Ra(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Ia(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&za(e,t)&&za(t,e)&&function(e,t){var n=e,r=!1,a=(e.x+t.x)/2,i=(e.y+t.y)/2;do{n.y>i!=n.next.y>i&&n.next.y!==n.y&&a<(n.next.x-n.x)*(i-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)}function La(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Da(e,t){return e.x===t.x&&e.y===t.y}function Ia(e,t,n,r){return!!(Da(e,t)&&Da(n,r)||Da(e,r)&&Da(n,t))||La(e,t,n)>0!=La(e,t,r)>0&&La(n,r,e)>0!=La(n,r,t)>0}function za(e,t){return La(e.prev,e,e.next)<0?La(e,t,e.next)>=0&&La(e,e.prev,t)>=0:La(e,t,e.prev)<0||La(e,e.next,t)<0}function ja(e,t){var n=new Ba(e.i,e.x,e.y),r=new Ba(t.i,t.x,t.y),a=e.next,i=t.prev;return e.next=t,t.prev=e,n.next=a,a.prev=n,r.next=n,n.prev=r,i.next=r,r.prev=i,r}function Na(e,t,n,r){var a=new Ba(e,t,n);return r?(a.next=r.next,a.prev=r,r.next.prev=a,r.next=a):(a.prev=a,a.next=a),a}function Fa(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Ba(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Va(e,t,n,r){for(var a=0,i=t,o=n-r;i<n;i+=r)a+=(e[o]-e[i])*(e[i+1]+e[o+1]),o=i;return a}ba.deviation=function(e,t,n,r){var a=t&&t.length,i=a?t[0]*n:e.length,o=Math.abs(Va(e,0,i,n));if(a)for(var s=0,l=t.length;s<l;s++){var u=t[s]*n,c=s<l-1?t[s+1]*n:e.length;o-=Math.abs(Va(e,u,c,n))}var f=0;for(s=0;s<r.length;s+=3){var d=r[s]*n,p=r[s+1]*n,h=r[s+2]*n;f+=Math.abs((e[d]-e[h])*(e[p+1]-e[d+1])-(e[d]-e[p])*(e[h+1]-e[d+1]))}return 0===o&&0===f?0:Math.abs((f-o)/o)},ba.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,a=0;a<e.length;a++){for(var i=0;i<e[a].length;i++)for(var o=0;o<t;o++)n.vertices.push(e[a][i][o]);a>0&&(r+=e[a-1].length,n.holes.push(r))}return n},ga.default=ya;var Ua=Ha,Ga=Ha;function Ha(e,t,n,r,a){!function e(t,n,r,a,i){for(;a>r;){if(a-r>600){var o=a-r+1,s=n-r+1,l=Math.log(o),u=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*u*(o-u)/o)*(s-o/2<0?-1:1),f=Math.max(r,Math.floor(n-s*u/o+c)),d=Math.min(a,Math.floor(n+(o-s)*u/o+c));e(t,n,f,d,i)}var p=t[n],h=r,m=a;for(Wa(t,r,n),i(t[a],p)>0&&Wa(t,r,a);h<m;){for(Wa(t,h,m),h++,m--;i(t[h],p)<0;)h++;for(;i(t[m],p)>0;)m--}0===i(t[r],p)?Wa(t,r,m):Wa(t,++m,a),m<=n&&(r=m+1),n<=m&&(a=m-1)}}(e,t,n||0,r||e.length-1,a||qa)}function Wa(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function qa(e,t){return e<t?-1:e>t?1:0}function Ya(e,t){var n=e.length;if(n<=1)return[e];for(var r,a,i=[],o=0;o<n;o++){var s=T(e[o]);0!==s&&(e[o].area=Math.abs(s),void 0===a&&(a=s<0),a===s<0?(r&&i.push(r),r=[e[o]]):r.push(e[o]))}if(r&&i.push(r),t>1)for(var l=0;l<i.length;l++)i[l].length<=t||(Ua(i[l],t,1,i[l].length-1,Xa),i[l]=i[l].slice(0,t));return i}function Xa(e,t){return t.area-e.area}Ua.default=Ga;var Za=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(e){return e.id}),this.index=e.index,this.layoutVertexArray=new Kn,this.indexArray=new fr,this.indexArray2=new dr,this.programConfigurations=new Lr(va,e.layers,e.zoom),this.segments=new Er,this.segments2=new Er};Za.prototype.populate=function(e,t){for(var n=0,r=e;n<r.length;n+=1){var a=r[n],i=a.feature,o=a.index,s=a.sourceLayerIndex;if(this.layers[0]._featureFilter(new Pn(this.zoom),i)){var l=jr(i);this.addFeature(i,l),t.featureIndex.insert(i,l,o,s,this.index)}}},Za.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Za.prototype.upload=function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,va),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2),this.programConfigurations.upload(e)},Za.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Za.prototype.addFeature=function(e,t){for(var n=0,r=Ya(t,500);n<r.length;n+=1){for(var a=r[n],i=0,o=0,s=a;o<s.length;o+=1)i+=s[o].length;for(var l=this.segments.prepareSegment(i,this.layoutVertexArray,this.indexArray),u=l.vertexLength,c=[],f=[],d=0,p=a;d<p.length;d+=1){var h=p[d];if(0!==h.length){h!==a[0]&&f.push(c.length/2);var m=this.segments2.prepareSegment(h.length,this.layoutVertexArray,this.indexArray2),v=m.vertexLength;this.layoutVertexArray.emplaceBack(h[0].x,h[0].y),this.indexArray2.emplaceBack(v+h.length-1,v),c.push(h[0].x),c.push(h[0].y);for(var g=1;g<h.length;g++)this.layoutVertexArray.emplaceBack(h[g].x,h[g].y),this.indexArray2.emplaceBack(v+g-1,v+g),c.push(h[g].x),c.push(h[g].y);m.vertexLength+=h.length,m.primitiveLength+=h.length}}for(var y=ga(c,f),b=0;b<y.length;b+=3)this.indexArray.emplaceBack(u+y[b],u+y[b+1],u+y[b+2]);l.vertexLength+=i,l.primitiveLength+=y.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e)},hn("FillBucket",Za,{omit:["layers"]});var $a={paint:new Hn({"fill-antialias":new Bn(L.paint_fill["fill-antialias"]),"fill-opacity":new Vn(L.paint_fill["fill-opacity"]),"fill-color":new Vn(L.paint_fill["fill-color"]),"fill-outline-color":new Vn(L.paint_fill["fill-outline-color"]),"fill-translate":new Bn(L.paint_fill["fill-translate"]),"fill-translate-anchor":new Bn(L.paint_fill["fill-translate-anchor"]),"fill-pattern":new Un(L.paint_fill["fill-pattern"])})},Ka=function(e){function t(t){e.call(this,t,$a)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.recalculate=function(e){this.paint=this._transitioningPaint.possiblyEvaluate(e);var t=this.paint._values["fill-outline-color"];"constant"===t.value.kind&&void 0===t.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},t.prototype.createBucket=function(e){return new Za(e)},t.prototype.queryRadius=function(){return Kr(this.paint.get("fill-translate"))},t.prototype.queryIntersectsFeature=function(e,t,n,r,a,i){return Vr(Jr(e,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),a.angle,i),n)},t}(Wn),Ja=Zn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,Qa=Math.pow(2,13);function ei(e,t,n,r,a,i,o,s){e.emplaceBack(t,n,2*Math.floor(r*Qa)+o,a*Qa*2,i*Qa*2,Math.round(s))}var ti=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(e){return e.id}),this.index=e.index,this.layoutVertexArray=new Qn,this.indexArray=new fr,this.programConfigurations=new Lr(Ja,e.layers,e.zoom),this.segments=new Er};function ni(e,t){return e.x===t.x&&(e.x<0||e.x>Ir)||e.y===t.y&&(e.y<0||e.y>Ir)}function ri(e){return e.every(function(e){return e.x<0})||e.every(function(e){return e.x>Ir})||e.every(function(e){return e.y<0})||e.every(function(e){return e.y>Ir})}ti.prototype.populate=function(e,t){for(var n=0,r=e;n<r.length;n+=1){var a=r[n],i=a.feature,o=a.index,s=a.sourceLayerIndex;if(this.layers[0]._featureFilter(new Pn(this.zoom),i)){var l=jr(i);this.addFeature(i,l),t.featureIndex.insert(i,l,o,s,this.index)}}},ti.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},ti.prototype.upload=function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Ja),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.programConfigurations.upload(e)},ti.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ti.prototype.addFeature=function(e,t){for(var n=0,r=Ya(t,500);n<r.length;n+=1){for(var a=r[n],i=0,o=0,s=a;o<s.length;o+=1)i+=s[o].length;for(var l=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),u=0,c=a;u<c.length;u+=1){var f=c[u];if(0!==f.length&&!ri(f))for(var d=0,p=0;p<f.length;p++){var h=f[p];if(p>=1){var m=f[p-1];if(!ni(h,m)){l.vertexLength+4>Er.MAX_VERTEX_ARRAY_LENGTH&&(l=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var v=h.sub(m)._perp()._unit(),g=m.dist(h);d+g>32768&&(d=0),ei(this.layoutVertexArray,h.x,h.y,v.x,v.y,0,0,d),ei(this.layoutVertexArray,h.x,h.y,v.x,v.y,0,1,d),d+=g,ei(this.layoutVertexArray,m.x,m.y,v.x,v.y,0,0,d),ei(this.layoutVertexArray,m.x,m.y,v.x,v.y,0,1,d);var y=l.vertexLength;this.indexArray.emplaceBack(y,y+1,y+2),this.indexArray.emplaceBack(y+1,y+2,y+3),l.vertexLength+=4,l.primitiveLength+=2}}}}l.vertexLength+i>Er.MAX_VERTEX_ARRAY_LENGTH&&(l=this.segments.prepareSegment(i,this.layoutVertexArray,this.indexArray));for(var b=[],x=[],_=l.vertexLength,w=0,T=a;w<T.length;w+=1){var k=T[w];if(0!==k.length){k!==a[0]&&x.push(b.length/2);for(var C=0;C<k.length;C++){var E=k[C];ei(this.layoutVertexArray,E.x,E.y,0,0,1,1,0),b.push(E.x),b.push(E.y)}}}for(var M=ga(b,x),A=0;A<M.length;A+=3)this.indexArray.emplaceBack(_+M[A],_+M[A+1],_+M[A+2]);l.primitiveLength+=M.length/3,l.vertexLength+=i}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e)},hn("FillExtrusionBucket",ti,{omit:["layers"]});var ai={paint:new Hn({"fill-extrusion-opacity":new Bn(L["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Vn(L["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Bn(L["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Bn(L["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Un(L["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Vn(L["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Vn(L["paint_fill-extrusion"]["fill-extrusion-base"])})},ii=function(e){function t(t){e.call(this,t,ai)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.createBucket=function(e){return new ti(e)},t.prototype.queryRadius=function(){return Kr(this.paint.get("fill-extrusion-translate"))},t.prototype.queryIntersectsFeature=function(e,t,n,r,a,i){return Vr(Jr(e,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),a.angle,i),n)},t.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("fill-extrusion-opacity")&&"none"!==this.visibility},t.prototype.resize=function(){this.viewportFrame&&(this.viewportFrame.destroy(),this.viewportFrame=null)},t}(Wn),oi=Zn([{name:"a_pos_normal",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,si=li;function li(e,t,n,r,a){this.properties={},this.extent=n,this.type=0,this._pbf=e,this._geometry=-1,this._keys=r,this._values=a,e.readFields(ui,this,t)}function ui(e,t,n){1==e?t.id=n.readVarint():2==e?function(e,t){for(var n=e.readVarint()+e.pos;e.pos<n;){var r=t._keys[e.readVarint()],a=t._values[e.readVarint()];t.properties[r]=a}}(n,t):3==e?t.type=n.readVarint():4==e&&(t._geometry=n.pos)}function ci(e){for(var t,n,r=0,a=0,i=e.length,o=i-1;a<i;o=a++)t=e[a],r+=((n=e[o]).x-t.x)*(t.y+n.y);return r}li.types=["Unknown","Point","LineString","Polygon"],li.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,n=e.readVarint()+e.pos,r=1,a=0,i=0,o=0,s=[];e.pos<n;){if(a<=0){var u=e.readVarint();r=7&u,a=u>>3}if(a--,1===r||2===r)i+=e.readSVarint(),o+=e.readSVarint(),1===r&&(t&&s.push(t),t=[]),t.push(new l(i,o));else{if(7!==r)throw new Error("unknown command "+r);t&&t.push(t[0].clone())}}return t&&s.push(t),s},li.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,n=1,r=0,a=0,i=0,o=1/0,s=-1/0,l=1/0,u=-1/0;e.pos<t;){if(r<=0){var c=e.readVarint();n=7&c,r=c>>3}if(r--,1===n||2===n)(a+=e.readSVarint())<o&&(o=a),a>s&&(s=a),(i+=e.readSVarint())<l&&(l=i),i>u&&(u=i);else if(7!==n)throw new Error("unknown command "+n)}return[o,l,s,u]},li.prototype.toGeoJSON=function(e,t,n){var r,a,i=this.extent*Math.pow(2,n),o=this.extent*e,s=this.extent*t,l=this.loadGeometry(),u=li.types[this.type];function c(e){for(var t=0;t<e.length;t++){var n=e[t],r=180-360*(n.y+s)/i;e[t]=[360*(n.x+o)/i-180,360/Math.PI*Math.atan(Math.exp(r*Math.PI/180))-90]}}switch(this.type){case 1:var f=[];for(r=0;r<l.length;r++)f[r]=l[r][0];c(l=f);break;case 2:for(r=0;r<l.length;r++)c(l[r]);break;case 3:for(l=function(e){var t=e.length;if(t<=1)return[e];for(var n,r,a=[],i=0;i<t;i++){var o=ci(e[i]);0!==o&&(void 0===r&&(r=o<0),r===o<0?(n&&a.push(n),n=[e[i]]):n.push(e[i]))}return n&&a.push(n),a}(l),r=0;r<l.length;r++)for(a=0;a<l[r].length;a++)c(l[r][a])}1===l.length?l=l[0]:u="Multi"+u;var d={type:"Feature",geometry:{type:u,coordinates:l},properties:this.properties};return"id"in this&&(d.id=this.id),d};var fi=di;function di(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(pi,this,t),this.length=this._features.length}function pi(e,t,n){15===e?t.version=n.readVarint():1===e?t.name=n.readString():5===e?t.extent=n.readVarint():2===e?t._features.push(n.pos):3===e?t._keys.push(n.readString()):4===e&&t._values.push(function(e){for(var t=null,n=e.readVarint()+e.pos;e.pos<n;){var r=e.readVarint()>>3;t=1===r?e.readString():2===r?e.readFloat():3===r?e.readDouble():4===r?e.readVarint64():5===r?e.readVarint():6===r?e.readSVarint():7===r?e.readBoolean():null}return t}(n))}function hi(e,t,n){if(3===e){var r=new fi(n,n.readVarint()+n.pos);r.length&&(t[r.name]=r)}}di.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new si(this._pbf,t,this.extent,this._keys,this._values)};var mi={VectorTile:function(e,t){this.layers=e.readFields(hi,{},t)},VectorTileFeature:si,VectorTileLayer:fi},vi=mi.VectorTileFeature.types,gi=63,yi=Math.cos(Math.PI/180*37.5),bi=.5,xi=Math.pow(2,14)/bi;function _i(e,t,n,r,a,i,o){e.emplaceBack(t.x,t.y,r?1:0,a?1:-1,Math.round(gi*n.x)+128,Math.round(gi*n.y)+128,1+(0===i?0:i<0?-1:1)|(o*bi&63)<<2,o*bi>>6)}var wi=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(e){return e.id}),this.index=e.index,this.layoutVertexArray=new er,this.indexArray=new fr,this.programConfigurations=new Lr(oi,e.layers,e.zoom),this.segments=new Er};function Ti(e,t){return(e/t.tileTotal*(t.end-t.start)+t.start)*(xi-1)}wi.prototype.populate=function(e,t){for(var n=0,r=e;n<r.length;n+=1){var a=r[n],i=a.feature,o=a.index,s=a.sourceLayerIndex;if(this.layers[0]._featureFilter(new Pn(this.zoom),i)){var l=jr(i);this.addFeature(i,l),t.featureIndex.insert(i,l,o,s,this.index)}}},wi.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},wi.prototype.upload=function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,oi),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.programConfigurations.upload(e)},wi.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},wi.prototype.addFeature=function(e,t){for(var n=this.layers[0].layout,r=n.get("line-join").evaluate(e),a=n.get("line-cap"),i=n.get("line-miter-limit"),o=n.get("line-round-limit"),s=0,l=t;s<l.length;s+=1){var u=l[s];this.addLine(u,e,r,a,i,o)}},wi.prototype.addLine=function(e,t,n,r,a,i){var o=null;t.properties&&t.properties.hasOwnProperty("mapbox_clip_start")&&t.properties.hasOwnProperty("mapbox_clip_end")&&(o={start:t.properties.mapbox_clip_start,end:t.properties.mapbox_clip_end,tileTotal:void 0});for(var s="Polygon"===vi[t.type],l=e.length;l>=2&&e[l-1].equals(e[l-2]);)l--;for(var u=0;u<l-1&&e[u].equals(e[u+1]);)u++;if(!(l<(s?3:2))){o&&(o.tileTotal=function(e,t,n){for(var r,a,i=0,o=t;o<n-1;o++)r=e[o],a=e[o+1],i+=r.dist(a);return i}(e,u,l)),"bevel"===n&&(a=1.05);var c=Ir/(512*this.overscaling)*15,f=e[u],d=this.segments.prepareSegment(10*l,this.layoutVertexArray,this.indexArray);this.distance=0;var p,h,m,v=r,g=s?"butt":r,y=!0,b=void 0,x=void 0,_=void 0,w=void 0;this.e1=this.e2=this.e3=-1,s&&(p=e[l-2],w=f.sub(p)._unit()._perp());for(var T=u;T<l;T++)if(!(x=s&&T===l-1?e[u+1]:e[T+1])||!e[T].equals(x)){w&&(_=w),p&&(b=p),p=e[T],w=x?x.sub(p)._unit()._perp():_;var k=(_=_||w).add(w);0===k.x&&0===k.y||k._unit();var C=k.x*w.x+k.y*w.y,E=0!==C?1/C:1/0,M=C<yi&&b&&x;if(M&&T>u){var A=p.dist(b);if(A>2*c){var S=p.sub(p.sub(b)._mult(c/A)._round());this.distance+=S.dist(b),this.addCurrentVertex(S,this.distance,_.mult(1),0,0,!1,d,o),b=S}}var O=b&&x,P=O?n:x?v:g;if(O&&"round"===P&&(E<i?P="miter":E<=2&&(P="fakeround")),"miter"===P&&E>a&&(P="bevel"),"bevel"===P&&(E>2&&(P="flipbevel"),E<a&&(P="miter")),b&&(this.distance+=p.dist(b)),"miter"===P)k._mult(E),this.addCurrentVertex(p,this.distance,k,0,0,!1,d,o);else if("flipbevel"===P){if(E>100)k=w.clone().mult(-1);else{var R=_.x*w.y-_.y*w.x>0?-1:1,L=E*_.add(w).mag()/_.sub(w).mag();k._perp()._mult(L*R)}this.addCurrentVertex(p,this.distance,k,0,0,!1,d,o),this.addCurrentVertex(p,this.distance,k.mult(-1),0,0,!1,d,o)}else if("bevel"===P||"fakeround"===P){var D=_.x*w.y-_.y*w.x>0,I=-Math.sqrt(E*E-1);if(D?(m=0,h=I):(h=0,m=I),y||this.addCurrentVertex(p,this.distance,_,h,m,!1,d,o),"fakeround"===P){for(var z=Math.floor(8*(.5-(C-.5))),j=void 0,N=0;N<z;N++)j=w.mult((N+1)/(z+1))._add(_)._unit(),this.addPieSliceVertex(p,this.distance,j,D,d,o);this.addPieSliceVertex(p,this.distance,k,D,d,o);for(var F=z-1;F>=0;F--)j=_.mult((F+1)/(z+1))._add(w)._unit(),this.addPieSliceVertex(p,this.distance,j,D,d,o)}x&&this.addCurrentVertex(p,this.distance,w,-h,-m,!1,d,o)}else"butt"===P?(y||this.addCurrentVertex(p,this.distance,_,0,0,!1,d,o),x&&this.addCurrentVertex(p,this.distance,w,0,0,!1,d,o)):"square"===P?(y||(this.addCurrentVertex(p,this.distance,_,1,1,!1,d,o),this.e1=this.e2=-1),x&&this.addCurrentVertex(p,this.distance,w,-1,-1,!1,d,o)):"round"===P&&(y||(this.addCurrentVertex(p,this.distance,_,0,0,!1,d,o),this.addCurrentVertex(p,this.distance,_,1,1,!0,d,o),this.e1=this.e2=-1),x&&(this.addCurrentVertex(p,this.distance,w,-1,-1,!0,d,o),this.addCurrentVertex(p,this.distance,w,0,0,!1,d,o)));if(M&&T<l-1){var B=p.dist(x);if(B>2*c){var V=p.add(x.sub(p)._mult(c/B)._round());this.distance+=V.dist(p),this.addCurrentVertex(V,this.distance,w.mult(1),0,0,!1,d,o),p=V}}y=!1}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t)}},wi.prototype.addCurrentVertex=function(e,t,n,r,a,i,o,s){var l,u=this.layoutVertexArray,c=this.indexArray;s&&(t=Ti(t,s)),l=n.clone(),r&&l._sub(n.perp()._mult(r)),_i(u,e,l,i,!1,r,t),this.e3=o.vertexLength++,this.e1>=0&&this.e2>=0&&(c.emplaceBack(this.e1,this.e2,this.e3),o.primitiveLength++),this.e1=this.e2,this.e2=this.e3,l=n.mult(-1),a&&l._sub(n.perp()._mult(a)),_i(u,e,l,i,!0,-a,t),this.e3=o.vertexLength++,this.e1>=0&&this.e2>=0&&(c.emplaceBack(this.e1,this.e2,this.e3),o.primitiveLength++),this.e1=this.e2,this.e2=this.e3,t>xi/2&&!s&&(this.distance=0,this.addCurrentVertex(e,this.distance,n,r,a,i,o))},wi.prototype.addPieSliceVertex=function(e,t,n,r,a,i){n=n.mult(r?-1:1);var o=this.layoutVertexArray,s=this.indexArray;i&&(t=Ti(t,i)),_i(o,e,n,!1,r,0,t),this.e3=a.vertexLength++,this.e1>=0&&this.e2>=0&&(s.emplaceBack(this.e1,this.e2,this.e3),a.primitiveLength++),r?this.e2=this.e3:this.e1=this.e3},hn("LineBucket",wi,{omit:["layers"]});var ki=new Hn({"line-cap":new Bn(L.layout_line["line-cap"]),"line-join":new Vn(L.layout_line["line-join"]),"line-miter-limit":new Bn(L.layout_line["line-miter-limit"]),"line-round-limit":new Bn(L.layout_line["line-round-limit"])}),Ci={paint:new Hn({"line-opacity":new Vn(L.paint_line["line-opacity"]),"line-color":new Vn(L.paint_line["line-color"]),"line-translate":new Bn(L.paint_line["line-translate"]),"line-translate-anchor":new Bn(L.paint_line["line-translate-anchor"]),"line-width":new Vn(L.paint_line["line-width"]),"line-gap-width":new Vn(L.paint_line["line-gap-width"]),"line-offset":new Vn(L.paint_line["line-offset"]),"line-blur":new Vn(L.paint_line["line-blur"]),"line-dasharray":new Un(L.paint_line["line-dasharray"]),"line-pattern":new Un(L.paint_line["line-pattern"]),"line-gradient":new Gn(L.paint_line["line-gradient"])}),layout:ki},Ei=new(function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.possiblyEvaluate=function(t,n){return n=new Pn(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,zoomHistory:n.zoomHistory,transition:n.transition}),e.prototype.possiblyEvaluate.call(this,t,n)},t.prototype.evaluate=function(t,n,r){return n=p({},n,{zoom:Math.floor(n.zoom)}),e.prototype.evaluate.call(this,t,n,r)},t}(Vn))(Ci.paint.properties["line-width"].specification);Ei.useIntegerZoom=!0;var Mi=function(e){function t(t){e.call(this,t,Ci)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.setPaintProperty=function(t,n,r){e.prototype.setPaintProperty.call(this,t,n,r),"line-gradient"===t&&this._updateGradient()},t.prototype._updateGradient=function(){var e=this._transitionablePaint._values["line-gradient"].value.expression;this.gradient=da(e,"lineProgress"),this.gradientTexture=null},t.prototype.recalculate=function(t){e.prototype.recalculate.call(this,t),this.paint._values["line-floorwidth"]=Ei.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)},t.prototype.createBucket=function(e){return new wi(e)},t.prototype.queryRadius=function(e){var t=e,n=Ai($r("line-width",this,t),$r("line-gap-width",this,t)),r=$r("line-offset",this,t);return n/2+Math.abs(r)+Kr(this.paint.get("line-translate"))},t.prototype.queryIntersectsFeature=function(e,t,n,r,a,i){var o=Jr(e,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),a.angle,i),s=i/2*Ai(this.paint.get("line-width").evaluate(t),this.paint.get("line-gap-width").evaluate(t)),u=this.paint.get("line-offset").evaluate(t);return u&&(n=function(e,t){for(var n=[],r=new l(0,0),a=0;a<e.length;a++){for(var i=e[a],o=[],s=0;s<i.length;s++){var u=i[s-1],c=i[s],f=i[s+1],d=0===s?r:c.sub(u)._unit()._perp(),p=s===i.length-1?r:f.sub(c)._unit()._perp(),h=d._add(p)._unit(),m=h.x*p.x+h.y*p.y;h._mult(1/m),o.push(h._mult(t)._add(c))}n.push(o)}return n}(n,u*i)),Ur(o,n,s)},t}(Wn);function Ai(e,t){return t>0?t+2*e:e}var Si=Zn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"}]),Oi=Zn([{name:"a_projected_pos",components:3,type:"Float32"}],4),Pi=(Zn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Zn([{name:"a_placed",components:2,type:"Uint8"}],4)),Ri=(Zn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"},{type:"Int16",name:"radius"},{type:"Int16",name:"signedDistanceFromAnchor"}]),Zn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Li=Zn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4);function Di(e,t,n){var r=t.layout.get("text-transform").evaluate(n);return"uppercase"===r?e=e.toLocaleUpperCase():"lowercase"===r&&(e=e.toLocaleLowerCase()),On.applyArabicShaping&&(e=On.applyArabicShaping(e)),e}Zn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"hidden"}]),Zn([{type:"Float32",name:"offsetX"}]),Zn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Ii={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},zi=function(e){function t(t,n,r,a){e.call(this,t,n),this.angle=r,void 0!==a&&(this.segment=a)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.clone=function(){return new t(this.x,this.y,this.angle,this.segment)},t}(l);function ji(e,t){var n=t.expression;if("constant"===n.kind)return{functionType:"constant",layoutSize:n.evaluate(new Pn(e+1))};if("source"===n.kind)return{functionType:"source"};for(var r=n.zoomStops,a=0;a<r.length&&r[a]<=e;)a++;for(var i=a=Math.max(0,a-1);i<r.length&&r[i]<e+1;)i++;i=Math.min(r.length-1,i);var o={min:r[a],max:r[i]};return"composite"===n.kind?{functionType:"composite",zoomRange:o,propertyValue:t.value}:{functionType:"camera",layoutSize:n.evaluate(new Pn(e+1)),zoomRange:o,sizeRange:{min:n.evaluate(new Pn(o.min)),max:n.evaluate(new Pn(o.max))},propertyValue:t.value}}hn("Anchor",zi);var Ni=mi.VectorTileFeature.types,Fi=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Bi(e,t,n,r,a,i,o,s){e.emplaceBack(t,n,Math.round(32*r),Math.round(32*a),i,o,s?s[0]:0,s?s[1]:0)}function Vi(e,t,n){e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n)}var Ui=function(e){this.layoutVertexArray=new tr,this.indexArray=new fr,this.programConfigurations=e,this.segments=new Er,this.dynamicLayoutVertexArray=new nr,this.opacityVertexArray=new rr,this.placedSymbolArray=new yr};Ui.prototype.upload=function(e,t){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Si.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.programConfigurations.upload(e),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,Oi.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,Fi,!0),this.opacityVertexBuffer.itemSize=1},Ui.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},hn("SymbolBuffers",Ui);var Gi=function(e,t,n){this.layoutVertexArray=new e,this.layoutAttributes=t,this.indexArray=new n,this.segments=new Er,this.collisionVertexArray=new or};Gi.prototype.upload=function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,Pi.members,!0)},Gi.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},hn("CollisionBuffers",Gi);var Hi=function(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(e){return e.id}),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex;var t=this.layers[0]._unevaluatedLayout._values;this.textSizeData=ji(this.zoom,t["text-size"]),this.iconSizeData=ji(this.zoom,t["icon-size"]);var n=this.layers[0].layout;this.sortFeaturesByY=n.get("text-allow-overlap")||n.get("icon-allow-overlap")||n.get("text-ignore-placement")||n.get("icon-ignore-placement")};Hi.prototype.createArrays=function(){this.text=new Ui(new Lr(Si.members,this.layers,this.zoom,function(e){return/^text/.test(e)})),this.icon=new Ui(new Lr(Si.members,this.layers,this.zoom,function(e){return/^icon/.test(e)})),this.collisionBox=new Gi(ir,Ri.members,dr),this.collisionCircle=new Gi(ir,Li.members,fr),this.glyphOffsetArray=new xr,this.lineVertexArray=new wr},Hi.prototype.populate=function(e,t){var n=this.layers[0],r=n.layout,a=r.get("text-font"),i=r.get("text-field"),o=r.get("icon-image"),s=("constant"!==i.value.kind||i.value.value.length>0)&&("constant"!==a.value.kind||a.value.value.length>0),l="constant"!==o.value.kind||o.value.value&&o.value.value.length>0;if(this.features=[],s||l){for(var u=t.iconDependencies,c=t.glyphDependencies,f=new Pn(this.zoom),d=0,p=e;d<p.length;d+=1){var h=p[d],m=h.feature,v=h.index,g=h.sourceLayerIndex;if(n._featureFilter(f,m)){var y=void 0;s&&(y=Di(y=n.getValueAndResolveTokens("text-field",m),n,m));var b=void 0;if(l&&(b=n.getValueAndResolveTokens("icon-image",m)),y||b){var x={text:y,icon:b,index:v,sourceLayerIndex:g,geometry:jr(m),properties:m.properties,type:Ni[m.type]};if(void 0!==m.id&&(x.id=m.id),this.features.push(x),b&&(u[b]=!0),y)for(var _=a.evaluate(m).join(","),w=c[_]=c[_]||{},T="map"===r.get("text-rotation-alignment")&&"line"===r.get("symbol-placement"),k=xn(y),C=0;C<y.length;C++)if(w[y.charCodeAt(C)]=!0,T&&k){var E=Ii[y.charAt(C)];E&&(w[E.charCodeAt(0)]=!0)}}}}"line"===r.get("symbol-placement")&&(this.features=function(e){var t={},n={},r=[],a=0;function i(t){r.push(e[t]),a++}function o(e,t,a){var i=n[e];return delete n[e],n[t]=i,r[i].geometry[0].pop(),r[i].geometry[0]=r[i].geometry[0].concat(a[0]),i}function s(e,n,a){var i=t[n];return delete t[n],t[e]=i,r[i].geometry[0].shift(),r[i].geometry[0]=a[0].concat(r[i].geometry[0]),i}function l(e,t,n){var r=n?t[0][t[0].length-1]:t[0][0];return e+":"+r.x+":"+r.y}for(var u=0;u<e.length;u++){var c=e[u],f=c.geometry,d=c.text;if(d){var p=l(d,f),h=l(d,f,!0);if(p in n&&h in t&&n[p]!==t[h]){var m=s(p,h,f),v=o(p,h,r[m].geometry);delete t[p],delete n[h],n[l(d,r[v].geometry,!0)]=v,r[m].geometry=null}else p in n?o(p,h,f):h in t?s(p,h,f):(i(u),t[p]=a-1,n[h]=a-1)}else i(u)}return r.filter(function(e){return e.geometry})}(this.features))}},Hi.prototype.isEmpty=function(){return 0===this.symbolInstances.length},Hi.prototype.upload=function(e){this.text.upload(e,this.sortFeaturesByY),this.icon.upload(e,this.sortFeaturesByY),this.collisionBox.upload(e),this.collisionCircle.upload(e)},Hi.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.collisionBox.destroy(),this.collisionCircle.destroy()},Hi.prototype.addToLineVertexArray=function(e,t){var n=this.lineVertexArray.length;if(void 0!==e.segment){for(var r=e.dist(t[e.segment+1]),a=e.dist(t[e.segment]),i={},o=e.segment+1;o<t.length;o++)i[o]={x:t[o].x,y:t[o].y,tileUnitDistanceFromAnchor:r},o<t.length-1&&(r+=t[o+1].dist(t[o]));for(var s=e.segment||0;s>=0;s--)i[s]={x:t[s].x,y:t[s].y,tileUnitDistanceFromAnchor:a},s>0&&(a+=t[s-1].dist(t[s]));for(var l=0;l<t.length;l++){var u=i[l];this.lineVertexArray.emplaceBack(u.x,u.y,u.tileUnitDistanceFromAnchor)}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}},Hi.prototype.addSymbols=function(e,t,n,r,a,i,o,s,l,u){for(var c=e.indexArray,f=e.layoutVertexArray,d=e.dynamicLayoutVertexArray,p=e.segments.prepareSegment(4*t.length,e.layoutVertexArray,e.indexArray),h=this.glyphOffsetArray.length,m=p.vertexLength,v=0,g=t;v<g.length;v+=1){var y=g[v],b=y.tl,x=y.tr,_=y.bl,w=y.br,T=y.tex,k=p.vertexLength,C=y.glyphOffset[1];Bi(f,s.x,s.y,b.x,C+b.y,T.x,T.y,n),Bi(f,s.x,s.y,x.x,C+x.y,T.x+T.w,T.y,n),Bi(f,s.x,s.y,_.x,C+_.y,T.x,T.y+T.h,n),Bi(f,s.x,s.y,w.x,C+w.y,T.x+T.w,T.y+T.h,n),Vi(d,s,0),c.emplaceBack(k,k+1,k+2),c.emplaceBack(k+1,k+2,k+3),p.vertexLength+=4,p.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(y.glyphOffset[0])}e.placedSymbolArray.emplaceBack(s.x,s.y,h,this.glyphOffsetArray.length-h,m,l,u,s.segment,n?n[0]:0,n?n[1]:0,r[0],r[1],o,!1),e.programConfigurations.populatePaintArrays(e.layoutVertexArray.length,i)},Hi.prototype._addCollisionDebugVertex=function(e,t,n,r,a){return t.emplaceBack(0,0),e.emplaceBack(n.x,n.y,r.x,r.y,Math.round(a.x),Math.round(a.y))},Hi.prototype.addCollisionDebugVertices=function(e,t,n,r,a,i,o,s){var u=a.segments.prepareSegment(4,a.layoutVertexArray,a.indexArray),c=u.vertexLength,f=a.layoutVertexArray,d=a.collisionVertexArray;if(this._addCollisionDebugVertex(f,d,i,o.anchor,new l(e,t)),this._addCollisionDebugVertex(f,d,i,o.anchor,new l(n,t)),this._addCollisionDebugVertex(f,d,i,o.anchor,new l(n,r)),this._addCollisionDebugVertex(f,d,i,o.anchor,new l(e,r)),u.vertexLength+=4,s){var p=a.indexArray;p.emplaceBack(c,c+1,c+2),p.emplaceBack(c,c+2,c+3),u.primitiveLength+=2}else{var h=a.indexArray;h.emplaceBack(c,c+1),h.emplaceBack(c+1,c+2),h.emplaceBack(c+2,c+3),h.emplaceBack(c+3,c),u.primitiveLength+=4}},Hi.prototype.generateCollisionDebugBuffers=function(){for(var e=0,t=this.symbolInstances;e<t.length;e+=1){var n=t[e];n.textCollisionFeature={boxStartIndex:n.textBoxStartIndex,boxEndIndex:n.textBoxEndIndex},n.iconCollisionFeature={boxStartIndex:n.iconBoxStartIndex,boxEndIndex:n.iconBoxEndIndex};for(var r=0;r<2;r++){var a=n[0===r?"textCollisionFeature":"iconCollisionFeature"];if(a)for(var i=a.boxStartIndex;i<a.boxEndIndex;i++){var o=this.collisionBoxArray.get(i),s=o.x1,l=o.y1,u=o.x2,c=o.y2,f=o.radius>0;this.addCollisionDebugVertices(s,l,u,c,f?this.collisionCircle:this.collisionBox,o.anchorPoint,n,f)}}}},Hi.prototype.deserializeCollisionBoxes=function(e,t,n,r,a){for(var i={},o=t;o<n;o++){var s=e.get(o);if(0===s.radius){i.textBox={x1:s.x1,y1:s.y1,x2:s.x2,y2:s.y2,anchorPointX:s.anchorPointX,anchorPointY:s.anchorPointY},i.textFeatureIndex=s.featureIndex;break}i.textCircles||(i.textCircles=[],i.textFeatureIndex=s.featureIndex),i.textCircles.push(s.anchorPointX,s.anchorPointY,s.radius,s.signedDistanceFromAnchor,1)}for(var l=r;l<a;l++){var u=e.get(l);if(0===u.radius){i.iconBox={x1:u.x1,y1:u.y1,x2:u.x2,y2:u.y2,anchorPointX:u.anchorPointX,anchorPointY:u.anchorPointY},i.iconFeatureIndex=u.featureIndex;break}}return i},Hi.prototype.hasTextData=function(){return this.text.segments.get().length>0},Hi.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Hi.prototype.hasCollisionBoxData=function(){return this.collisionBox.segments.get().length>0},Hi.prototype.hasCollisionCircleData=function(){return this.collisionCircle.segments.get().length>0},Hi.prototype.sortFeatures=function(e){var t=this;if(this.sortFeaturesByY&&this.sortedAngle!==e&&(this.sortedAngle=e,!(this.text.segments.get().length>1||this.icon.segments.get().length>1))){for(var n=[],r=0;r<this.symbolInstances.length;r++)n.push(r);var a=Math.sin(e),i=Math.cos(e);n.sort(function(e,n){var r=t.symbolInstances[e],o=t.symbolInstances[n];return(a*r.anchor.x+i*r.anchor.y|0)-(a*o.anchor.x+i*o.anchor.y|0)||o.featureIndex-r.featureIndex}),this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var o=0,s=n;o<s.length;o+=1){var l=s[o],u=t.symbolInstances[l];t.featureSortOrder.push(u.featureIndex);for(var c=0,f=u.placedTextSymbolIndices;c<f.length;c+=1)for(var d=f[c],p=t.text.placedSymbolArray.get(d),h=p.vertexStartIndex+4*p.numGlyphs,m=p.vertexStartIndex;m<h;m+=4)t.text.indexArray.emplaceBack(m,m+1,m+2),t.text.indexArray.emplaceBack(m+1,m+2,m+3);var v=t.icon.placedSymbolArray.get(l);if(v.numGlyphs){var g=v.vertexStartIndex;t.icon.indexArray.emplaceBack(g,g+1,g+2),t.icon.indexArray.emplaceBack(g+1,g+2,g+3)}}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},hn("SymbolBucket",Hi,{omit:["layers","collisionBoxArray","features","compareText"],shallow:["symbolInstances"]}),Hi.MAX_GLYPHS=65535,Hi.addDynamicAttributes=Vi;var Wi=new Hn({"symbol-placement":new Bn(L.layout_symbol["symbol-placement"]),"symbol-spacing":new Bn(L.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Bn(L.layout_symbol["symbol-avoid-edges"]),"icon-allow-overlap":new Bn(L.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Bn(L.layout_symbol["icon-ignore-placement"]),"icon-optional":new Bn(L.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Bn(L.layout_symbol["icon-rotation-alignment"]),"icon-size":new Vn(L.layout_symbol["icon-size"]),"icon-text-fit":new Bn(L.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Bn(L.layout_symbol["icon-text-fit-padding"]),"icon-image":new Vn(L.layout_symbol["icon-image"]),"icon-rotate":new Vn(L.layout_symbol["icon-rotate"]),"icon-padding":new Bn(L.layout_symbol["icon-padding"]),"icon-keep-upright":new Bn(L.layout_symbol["icon-keep-upright"]),"icon-offset":new Vn(L.layout_symbol["icon-offset"]),"icon-anchor":new Vn(L.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Bn(L.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Bn(L.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Bn(L.layout_symbol["text-rotation-alignment"]),"text-field":new Vn(L.layout_symbol["text-field"]),"text-font":new Vn(L.layout_symbol["text-font"]),"text-size":new Vn(L.layout_symbol["text-size"]),"text-max-width":new Vn(L.layout_symbol["text-max-width"]),"text-line-height":new Bn(L.layout_symbol["text-line-height"]),"text-letter-spacing":new Vn(L.layout_symbol["text-letter-spacing"]),"text-justify":new Vn(L.layout_symbol["text-justify"]),"text-anchor":new Vn(L.layout_symbol["text-anchor"]),"text-max-angle":new Bn(L.layout_symbol["text-max-angle"]),"text-rotate":new Vn(L.layout_symbol["text-rotate"]),"text-padding":new Bn(L.layout_symbol["text-padding"]),"text-keep-upright":new Bn(L.layout_symbol["text-keep-upright"]),"text-transform":new Vn(L.layout_symbol["text-transform"]),"text-offset":new Vn(L.layout_symbol["text-offset"]),"text-allow-overlap":new Bn(L.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Bn(L.layout_symbol["text-ignore-placement"]),"text-optional":new Bn(L.layout_symbol["text-optional"])}),qi={paint:new Hn({"icon-opacity":new Vn(L.paint_symbol["icon-opacity"]),"icon-color":new Vn(L.paint_symbol["icon-color"]),"icon-halo-color":new Vn(L.paint_symbol["icon-halo-color"]),"icon-halo-width":new Vn(L.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Vn(L.paint_symbol["icon-halo-blur"]),"icon-translate":new Bn(L.paint_symbol["icon-translate"]),"icon-translate-anchor":new Bn(L.paint_symbol["icon-translate-anchor"]),"text-opacity":new Vn(L.paint_symbol["text-opacity"]),"text-color":new Vn(L.paint_symbol["text-color"]),"text-halo-color":new Vn(L.paint_symbol["text-halo-color"]),"text-halo-width":new Vn(L.paint_symbol["text-halo-width"]),"text-halo-blur":new Vn(L.paint_symbol["text-halo-blur"]),"text-translate":new Bn(L.paint_symbol["text-translate"]),"text-translate-anchor":new Bn(L.paint_symbol["text-translate-anchor"])}),layout:Wi},Yi=function(e){function t(t){e.call(this,t,qi)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.recalculate=function(t){e.prototype.recalculate.call(this,t),"auto"===this.layout.get("icon-rotation-alignment")&&("line"===this.layout.get("symbol-placement")?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-rotation-alignment")&&("line"===this.layout.get("symbol-placement")?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"))},t.prototype.getValueAndResolveTokens=function(e,t){var n,r=this.layout.get(e).evaluate(t),a=this._unevaluatedLayout._values[e];return a.isDataDriven()||_t(a.value)?r:(n=t.properties,r.replace(/{([^{}]+)}/g,function(e,t){return t in n?String(n[t]):""}))},t.prototype.createBucket=function(e){return new Hi(e)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t}(Wn),Xi={paint:new Hn({"background-color":new Bn(L.paint_background["background-color"]),"background-pattern":new Un(L.paint_background["background-pattern"]),"background-opacity":new Bn(L.paint_background["background-opacity"])})},Zi=function(e){function t(t){e.call(this,t,Xi)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Wn),$i={paint:new Hn({"raster-opacity":new Bn(L.paint_raster["raster-opacity"]),"raster-hue-rotate":new Bn(L.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Bn(L.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Bn(L.paint_raster["raster-brightness-max"]),"raster-saturation":new Bn(L.paint_raster["raster-saturation"]),"raster-contrast":new Bn(L.paint_raster["raster-contrast"]),"raster-fade-duration":new Bn(L.paint_raster["raster-fade-duration"])})},Ki={circle:ra,heatmap:pa,hillshade:ma,fill:Ka,"fill-extrusion":ii,line:Mi,symbol:Yi,background:Zi,raster:function(e){function t(t){e.call(this,t,$i)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Wn)},Ji=a(function(e,t){e.exports=function(){function e(e,t,n){n=n||{},this.w=e||64,this.h=t||64,this.autoResize=!!n.autoResize,this.shelves=[],this.freebins=[],this.stats={},this.bins={},this.maxId=0}function t(e,t,n){this.x=0,this.y=e,this.w=this.free=t,this.h=n}return e.prototype.pack=function(e,t){e=[].concat(e),t=t||{};for(var n,r,a,i,o=[],s=0;s<e.length;s++)if(n=e[s].w||e[s].width,r=e[s].h||e[s].height,a=e[s].id,n&&r){if(!(i=this.packOne(n,r,a)))continue;t.inPlace&&(e[s].x=i.x,e[s].y=i.y,e[s].id=i.id),o.push(i)}return this.shrink(),o},e.prototype.packOne=function(e,n,r){var a,i,o,s,l,u,c,f,d={freebin:-1,shelf:-1,waste:1/0},p=0;if("string"==typeof r||"number"==typeof r){if(a=this.getBin(r))return this.ref(a),a;"number"==typeof r&&(this.maxId=Math.max(r,this.maxId))}else r=++this.maxId;for(s=0;s<this.freebins.length;s++){if(n===(a=this.freebins[s]).maxh&&e===a.maxw)return this.allocFreebin(s,e,n,r);n>a.maxh||e>a.maxw||n<=a.maxh&&e<=a.maxw&&(o=a.maxw*a.maxh-e*n)<d.waste&&(d.waste=o,d.freebin=s)}for(s=0;s<this.shelves.length;s++)if(p+=(i=this.shelves[s]).h,!(e>i.free)){if(n===i.h)return this.allocShelf(s,e,n,r);n>i.h||n<i.h&&(o=(i.h-n)*e)<d.waste&&(d.freebin=-1,d.waste=o,d.shelf=s)}return-1!==d.freebin?this.allocFreebin(d.freebin,e,n,r):-1!==d.shelf?this.allocShelf(d.shelf,e,n,r):n<=this.h-p&&e<=this.w?(i=new t(p,this.w,n),this.allocShelf(this.shelves.push(i)-1,e,n,r)):this.autoResize?(l=u=this.h,((c=f=this.w)<=l||e>c)&&(f=2*Math.max(e,c)),(l<c||n>l)&&(u=2*Math.max(n,l)),this.resize(f,u),this.packOne(e,n,r)):null},e.prototype.allocFreebin=function(e,t,n,r){var a=this.freebins.splice(e,1)[0];return a.id=r,a.w=t,a.h=n,a.refcount=0,this.bins[r]=a,this.ref(a),a},e.prototype.allocShelf=function(e,t,n,r){var a=this.shelves[e].alloc(t,n,r);return this.bins[r]=a,this.ref(a),a},e.prototype.shrink=function(){if(this.shelves.length>0){for(var e=0,t=0,n=0;n<this.shelves.length;n++){var r=this.shelves[n];t+=r.h,e=Math.max(r.w-r.free,e)}this.resize(e,t)}},e.prototype.getBin=function(e){return this.bins[e]},e.prototype.ref=function(e){if(1==++e.refcount){var t=e.h;this.stats[t]=1+(0|this.stats[t])}return e.refcount},e.prototype.unref=function(e){return 0===e.refcount?0:(0==--e.refcount&&(this.stats[e.h]--,delete this.bins[e.id],this.freebins.push(e)),e.refcount)},e.prototype.clear=function(){this.shelves=[],this.freebins=[],this.stats={},this.bins={},this.maxId=0},e.prototype.resize=function(e,t){this.w=e,this.h=t;for(var n=0;n<this.shelves.length;n++)this.shelves[n].resize(e);return!0},t.prototype.alloc=function(e,t,n){if(e>this.free||t>this.h)return null;var r=this.x;return this.x+=e,this.free-=e,new function(e,t,n,r,a,i,o){this.id=e,this.x=t,this.y=n,this.w=r,this.h=a,this.maxw=i||r,this.maxh=o||a,this.refcount=0}(n,r,this.y,e,t,e,this.h)},t.prototype.resize=function(e){return this.free+=e-this.w,this.w=e,!0},e}()}),Qi=function(e,t){var n=t.pixelRatio;this.paddedRect=e,this.pixelRatio=n},eo={tl:{configurable:!0},br:{configurable:!0},displaySize:{configurable:!0}};eo.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},eo.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},eo.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Qi.prototype,eo);var to=function(e){var t=new ca({width:0,height:0}),n={},r=new Ji(0,0,{autoResize:!0});for(var a in e){var i=e[a],o=r.packOne(i.data.width+2,i.data.height+2);t.resize({width:r.w,height:r.h}),ca.copy(i.data,t,{x:0,y:0},{x:o.x+1,y:o.y+1},i.data),n[a]=new Qi(o,i)}r.shrink(),t.resize({width:r.w,height:r.h}),this.image=t,this.positions=n};hn("ImagePosition",Qi),hn("ImageAtlas",to);var no=function(e,t,n,r,a){var i,o,s=8*a-r-1,l=(1<<s)-1,u=l>>1,c=-7,f=n?a-1:0,d=n?-1:1,p=e[t+f];for(f+=d,i=p&(1<<-c)-1,p>>=-c,c+=s;c>0;i=256*i+e[t+f],f+=d,c-=8);for(o=i&(1<<-c)-1,i>>=-c,c+=r;c>0;o=256*o+e[t+f],f+=d,c-=8);if(0===i)i=1-u;else{if(i===l)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,r),i-=u}return(p?-1:1)*o*Math.pow(2,i-r)},ro=function(e,t,n,r,a,i){var o,s,l,u=8*i-a-1,c=(1<<u)-1,f=c>>1,d=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:i-1,h=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),(t+=o+f>=1?d/l:d*Math.pow(2,1-f))*l>=2&&(o++,l/=2),o+f>=c?(s=0,o=c):o+f>=1?(s=(t*l-1)*Math.pow(2,a),o+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,a),o=0));a>=8;e[n+p]=255&s,p+=h,s/=256,a-=8);for(o=o<<a|s,u+=a;u>0;e[n+p]=255&o,p+=h,o/=256,u-=8);e[n+p-h]|=128*m},ao=io;function io(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}function oo(e){return e.type===io.Bytes?e.readVarint()+e.pos:e.pos+1}function so(e,t,n){return n?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function lo(e,t,n){var r=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.ceil(Math.log(t)/(7*Math.LN2));n.realloc(r);for(var a=n.pos-1;a>=e;a--)n.buf[a+r]=n.buf[a]}function uo(e,t){for(var n=0;n<e.length;n++)t.writeVarint(e[n])}function co(e,t){for(var n=0;n<e.length;n++)t.writeSVarint(e[n])}function fo(e,t){for(var n=0;n<e.length;n++)t.writeFloat(e[n])}function po(e,t){for(var n=0;n<e.length;n++)t.writeDouble(e[n])}function ho(e,t){for(var n=0;n<e.length;n++)t.writeBoolean(e[n])}function mo(e,t){for(var n=0;n<e.length;n++)t.writeFixed32(e[n])}function vo(e,t){for(var n=0;n<e.length;n++)t.writeSFixed32(e[n])}function go(e,t){for(var n=0;n<e.length;n++)t.writeFixed64(e[n])}function yo(e,t){for(var n=0;n<e.length;n++)t.writeSFixed64(e[n])}function bo(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function xo(e,t,n){e[n]=t,e[n+1]=t>>>8,e[n+2]=t>>>16,e[n+3]=t>>>24}function _o(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}io.Varint=0,io.Fixed64=1,io.Bytes=2,io.Fixed32=5,io.prototype={destroy:function(){this.buf=null},readFields:function(e,t,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),a=r>>3,i=this.pos;this.type=7&r,e(a,t,this),this.pos===i&&this.skip(r)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=bo(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=_o(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=bo(this.buf,this.pos)+4294967296*bo(this.buf,this.pos+4);return this.pos+=8,e},readSFixed64:function(){var e=bo(this.buf,this.pos)+4294967296*_o(this.buf,this.pos+4);return this.pos+=8,e},readFloat:function(){var e=no(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=no(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,n,r=this.buf;return t=127&(n=r[this.pos++]),n<128?t:(t|=(127&(n=r[this.pos++]))<<7,n<128?t:(t|=(127&(n=r[this.pos++]))<<14,n<128?t:(t|=(127&(n=r[this.pos++]))<<21,n<128?t:function(e,t,n){var r,a,i=n.buf;if(a=i[n.pos++],r=(112&a)>>4,a<128)return so(e,r,t);if(a=i[n.pos++],r|=(127&a)<<3,a<128)return so(e,r,t);if(a=i[n.pos++],r|=(127&a)<<10,a<128)return so(e,r,t);if(a=i[n.pos++],r|=(127&a)<<17,a<128)return so(e,r,t);if(a=i[n.pos++],r|=(127&a)<<24,a<128)return so(e,r,t);if(a=i[n.pos++],r|=(1&a)<<31,a<128)return so(e,r,t);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(n=r[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=function(e,t,n){for(var r="",a=t;a<n;){var i,o,s,l=e[a],u=null,c=l>239?4:l>223?3:l>191?2:1;if(a+c>n)break;1===c?l<128&&(u=l):2===c?128==(192&(i=e[a+1]))&&(u=(31&l)<<6|63&i)<=127&&(u=null):3===c?(i=e[a+1],o=e[a+2],128==(192&i)&&128==(192&o)&&((u=(15&l)<<12|(63&i)<<6|63&o)<=2047||u>=55296&&u<=57343)&&(u=null)):4===c&&(i=e[a+1],o=e[a+2],s=e[a+3],128==(192&i)&&128==(192&o)&&128==(192&s)&&((u=(15&l)<<18|(63&i)<<12|(63&o)<<6|63&s)<=65535||u>=1114112)&&(u=null)),null===u?(u=65533,c=1):u>65535&&(u-=65536,r+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),r+=String.fromCharCode(u),a+=c}return r}(this.buf,this.pos,e);return this.pos=e,t},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){var n=oo(this);for(e=e||[];this.pos<n;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){var t=oo(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){var t=oo(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){var t=oo(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){var t=oo(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){var t=oo(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){var t=oo(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){var t=oo(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){var t=oo(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===io.Varint)for(;this.buf[this.pos++]>127;);else if(t===io.Bytes)this.pos=this.readVarint()+this.pos;else if(t===io.Fixed32)this.pos+=4;else{if(t!==io.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var n=new Uint8Array(t);n.set(this.buf),this.buf=n,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),xo(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),xo(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),xo(this.buf,-1&e,this.pos),xo(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),xo(this.buf,-1&e,this.pos),xo(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(e,t){var n,r;if(e>=0?(n=e%4294967296|0,r=e/4294967296|0):(r=~(-e/4294967296),4294967295^(n=~(-e%4294967296))?n=n+1|0:(n=0,r=r+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),function(e,t,n){n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos]=127&e}(n,0,t),function(e,t){var n=(7&e)<<4;t.buf[t.pos++]|=n|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e)))))}(r,t)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(e,t,n){for(var r,a,i=0;i<t.length;i++){if((r=t.charCodeAt(i))>55295&&r<57344){if(!a){r>56319||i+1===t.length?(e[n++]=239,e[n++]=191,e[n++]=189):a=r;continue}if(r<56320){e[n++]=239,e[n++]=191,e[n++]=189,a=r;continue}r=a-55296<<10|r-56320|65536,a=null}else a&&(e[n++]=239,e[n++]=191,e[n++]=189,a=null);r<128?e[n++]=r:(r<2048?e[n++]=r>>6|192:(r<65536?e[n++]=r>>12|224:(e[n++]=r>>18|240,e[n++]=r>>12&63|128),e[n++]=r>>6&63|128),e[n++]=63&r|128)}return n}(this.buf,e,this.pos);var n=this.pos-t;n>=128&&lo(t,n,this),this.pos=t-1,this.writeVarint(n),this.pos+=n},writeFloat:function(e){this.realloc(4),ro(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),ro(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var n=0;n<t;n++)this.buf[this.pos++]=e[n]},writeRawMessage:function(e,t){this.pos++;var n=this.pos;e(t,this);var r=this.pos-n;r>=128&&lo(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(e,t,n){this.writeTag(e,io.Bytes),this.writeRawMessage(t,n)},writePackedVarint:function(e,t){this.writeMessage(e,uo,t)},writePackedSVarint:function(e,t){this.writeMessage(e,co,t)},writePackedBoolean:function(e,t){this.writeMessage(e,ho,t)},writePackedFloat:function(e,t){this.writeMessage(e,fo,t)},writePackedDouble:function(e,t){this.writeMessage(e,po,t)},writePackedFixed32:function(e,t){this.writeMessage(e,mo,t)},writePackedSFixed32:function(e,t){this.writeMessage(e,vo,t)},writePackedFixed64:function(e,t){this.writeMessage(e,go,t)},writePackedSFixed64:function(e,t){this.writeMessage(e,yo,t)},writeBytesField:function(e,t){this.writeTag(e,io.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,io.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,io.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,io.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,io.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,io.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,io.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,io.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,io.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,io.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};var wo=3;function To(e,t,n){1===e&&n.readMessage(ko,t)}function ko(e,t,n){if(3===e){var r=n.readMessage(Co,{}),a=r.id,i=r.bitmap,o=r.width,s=r.height,l=r.left,u=r.top,c=r.advance;t.push({id:a,bitmap:new ua({width:o+2*wo,height:s+2*wo},i),metrics:{width:o,height:s,left:l,top:u,advance:c}})}}function Co(e,t,n){1===e?t.id=n.readVarint():2===e?t.bitmap=n.readBytes():3===e?t.width=n.readVarint():4===e?t.height=n.readVarint():5===e?t.left=n.readSVarint():6===e?t.top=n.readSVarint():7===e&&(t.advance=n.readVarint())}var Eo=wo,Mo=function(e,t,n){this.target=e,this.parent=t,this.mapId=n,this.callbacks={},this.callbackID=0,m(["receive"],this),this.target.addEventListener("message",this.receive,!1)};Mo.prototype.send=function(e,t,n,r){var a=n?this.mapId+":"+this.callbackID++:null;n&&(this.callbacks[a]=n);var i=[];this.target.postMessage({targetMapId:r,sourceMapId:this.mapId,type:e,id:String(a),data:vn(t,i)},i)},Mo.prototype.receive=function(e){var t,n=this,r=e.data,a=r.id;if(!r.targetMapId||this.mapId===r.targetMapId){var i=function(e,t){var r=[];n.target.postMessage({sourceMapId:n.mapId,type:"<response>",id:String(a),error:e?vn(e):null,data:vn(t,r)},r)};if("<response>"===r.type)t=this.callbacks[r.id],delete this.callbacks[r.id],t&&r.error?t(gn(r.error)):t&&t(null,gn(r.data));else if(void 0!==r.id&&this.parent[r.type])this.parent[r.type](r.sourceMapId,gn(r.data),i);else if(void 0!==r.id&&this.parent.getWorkerSource){var o=r.type.split(".");this.parent.getWorkerSource(r.sourceMapId,o[0],o[1])[o[2]](gn(r.data),i)}else this.parent[r.type](gn(r.data))}},Mo.prototype.remove=function(){this.target.removeEventListener("message",this.receive,!1)};var Ao=r(a(function(e,t){!function(e){function t(e,t,r){t=Math.pow(2,r)-t-1;var a=n(256*e,256*t,r),i=n(256*(e+1),256*(t+1),r);return a[0]+","+a[1]+","+i[0]+","+i[1]}function n(e,t,n){var r=2*Math.PI*6378137/256/Math.pow(2,n),a=e*r-2*Math.PI*6378137/2,i=t*r-2*Math.PI*6378137/2;return[a,i]}e.getURL=function(e,n,r,a,i,o){return o=o||{},e+"?"+["bbox="+t(r,a,i),"format="+(o.format||"image/png"),"service="+(o.service||"WMS"),"version="+(o.version||"1.1.1"),"request="+(o.request||"GetMap"),"srs="+(o.srs||"EPSG:3857"),"width="+(o.width||256),"height="+(o.height||256),"layers="+n].join("&")},e.getTileBBox=t,e.getMercCoords=n,Object.defineProperty(e,"__esModule",{value:!0})}(t)})),So=function(e,t,n){this.z=e,this.x=t,this.y=n,this.key=Ro(0,e,t,n)};So.prototype.equals=function(e){return this.z===e.z&&this.x===e.x&&this.y===e.y},So.prototype.url=function(e,t){var n=Ao.getTileBBox(this.x,this.y,this.z),r=function(e,t,n){for(var r,a="",i=e;i>0;i--)a+=(t&(r=1<<i-1)?1:0)+(n&r?2:0);return a}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===t?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",r).replace("{bbox-epsg-3857}",n)};var Oo=function(e,t){this.wrap=e,this.canonical=t,this.key=Ro(e,t.z,t.x,t.y)},Po=function(e,t,n,r,a){this.overscaledZ=e,this.wrap=t,this.canonical=new So(n,+r,+a),this.key=Ro(t,e,r,a)};function Ro(e,t,n,r){(e*=2)<0&&(e=-1*e-1);var a=1<<t;return 32*(a*a*e+a*r+n)+t}Po.prototype.equals=function(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)},Po.prototype.scaledTo=function(e){var t=this.canonical.z-e;return e>this.canonical.z?new Po(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Po(e,this.wrap,e,this.canonical.x>>t,this.canonical.y>>t)},Po.prototype.isChildOf=function(e){var t=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t},Po.prototype.children=function(e){if(this.overscaledZ>=e)return[new Po(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var t=this.canonical.z+1,n=2*this.canonical.x,r=2*this.canonical.y;return[new Po(t,this.wrap,t,n,r),new Po(t,this.wrap,t,n+1,r),new Po(t,this.wrap,t,n,r+1),new Po(t,this.wrap,t,n+1,r+1)]},Po.prototype.isLessThan=function(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))},Po.prototype.wrapped=function(){return new Po(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Po.prototype.unwrapTo=function(e){return new Po(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)},Po.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Po.prototype.toUnwrapped=function(){return new Oo(this.wrap,this.canonical)},Po.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Po.prototype.toCoordinate=function(){return new s(this.canonical.x+Math.pow(2,this.wrap),this.canonical.y,this.canonical.z)},hn("CanonicalTileID",So),hn("OverscaledTileID",Po,{omit:["posMatrix"]});var Lo=function(e,t,n){if(e<=0)throw new RangeError("Level must have positive dimension");this.dim=e,this.border=t,this.stride=this.dim+2*this.border,this.data=n||new Int32Array((this.dim+2*this.border)*(this.dim+2*this.border))};Lo.prototype.set=function(e,t,n){this.data[this._idx(e,t)]=n+65536},Lo.prototype.get=function(e,t){return this.data[this._idx(e,t)]-65536},Lo.prototype._idx=function(e,t){if(e<-this.border||e>=this.dim+this.border||t<-this.border||t>=this.dim+this.border)throw new RangeError("out of range source coordinates for DEM data");return(t+this.border)*this.stride+(e+this.border)},hn("Level",Lo);var Do=function(e,t,n){this.uid=e,this.scale=t||1,this.level=n||new Lo(256,512),this.loaded=!!n};Do.prototype.loadFromImage=function(e,t){if(e.height!==e.width)throw new RangeError("DEM tiles must be square");if(t&&"mapbox"!==t&&"terrarium"!==t)return _('"'+t+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');var n=this.level=new Lo(e.width,e.width/2),r=e.data;this._unpackData(n,r,t||"mapbox");for(var a=0;a<n.dim;a++)n.set(-1,a,n.get(0,a)),n.set(n.dim,a,n.get(n.dim-1,a)),n.set(a,-1,n.get(a,0)),n.set(a,n.dim,n.get(a,n.dim-1));n.set(-1,-1,n.get(0,0)),n.set(n.dim,-1,n.get(n.dim-1,0)),n.set(-1,n.dim,n.get(0,n.dim-1)),n.set(n.dim,n.dim,n.get(n.dim-1,n.dim-1)),this.loaded=!0},Do.prototype._unpackMapbox=function(e,t,n){return(256*e*256+256*t+n)/10-1e4},Do.prototype._unpackTerrarium=function(e,t,n){return 256*e+t+n/256-32768},Do.prototype._unpackData=function(e,t,n){for(var r={mapbox:this._unpackMapbox,terrarium:this._unpackTerrarium}[n],a=0;a<e.dim;a++)for(var i=0;i<e.dim;i++){var o=4*(a*e.dim+i);e.set(i,a,this.scale*r(t[o],t[o+1],t[o+2]))}},Do.prototype.getPixels=function(){return new ca({width:this.level.dim+2*this.level.border,height:this.level.dim+2*this.level.border},new Uint8Array(this.level.data.buffer))},Do.prototype.backfillBorder=function(e,t,n){var r=this.level,a=e.level;if(r.dim!==a.dim)throw new Error("level mismatch (dem dimension)");var i=t*r.dim,o=t*r.dim+r.dim,s=n*r.dim,l=n*r.dim+r.dim;switch(t){case-1:i=o-1;break;case 1:o=i+1}switch(n){case-1:s=l-1;break;case 1:l=s+1}for(var u=d(i,-r.border,r.dim+r.border),c=d(o,-r.border,r.dim+r.border),f=d(s,-r.border,r.dim+r.border),p=d(l,-r.border,r.dim+r.border),h=-t*r.dim,m=-n*r.dim,v=f;v<p;v++)for(var g=u;g<c;g++)r.set(g,v,a.get(g+h,v+m))},hn("DEMData",Do);var Io=function(e){this._stringToNumber={},this._numberToString=[];for(var t=0;t<e.length;t++){var n=e[t];this._stringToNumber[n]=t,this._numberToString[t]=n}};Io.prototype.encode=function(e){return this._stringToNumber[e]},Io.prototype.decode=function(e){return this._numberToString[e]};var zo=function(e,t,n,r){this.type="Feature",this._vectorTileFeature=e,e._z=t,e._x=n,e._y=r,this.properties=e.properties,null!=e.id&&(this.id=e.id)},jo={geometry:{configurable:!0}};jo.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},jo.geometry.set=function(e){this._geometry=e},zo.prototype.toJSON=function(){var e={geometry:this.geometry};for(var t in this)"_geometry"!==t&&"_vectorTileFeature"!==t&&(e[t]=this[t]);return e},Object.defineProperties(zo.prototype,jo);var No=function(e,t,n){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=t||new un(Ir,16,0),this.featureIndexArray=n||new kr};function Fo(e,t){return t-e}No.prototype.insert=function(e,t,n,r,a){var i=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,r,a);for(var o=0;o<t.length;o++){for(var s=t[o],l=[1/0,1/0,-1/0,-1/0],u=0;u<s.length;u++){var c=s[u];l[0]=Math.min(l[0],c.x),l[1]=Math.min(l[1],c.y),l[2]=Math.max(l[2],c.x),l[3]=Math.max(l[3],c.y)}l[0]<Ir&&l[1]<Ir&&l[2]>=0&&l[3]>=0&&this.grid.insert(i,l[0],l[1],l[2],l[3])}},No.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new mi.VectorTile(new ao(this.rawTileData)).layers,this.sourceLayerCoder=new Io(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},No.prototype.query=function(e,t){var n=this;this.loadVTLayers();for(var r=e.params||{},a=Ir/e.tileSize/e.scale,i=zt(r.filter),o=e.queryGeometry,s=e.queryPadding*a,l=1/0,u=1/0,c=-1/0,f=-1/0,d=0;d<o.length;d++)for(var p=o[d],h=0;h<p.length;h++){var m=p[h];l=Math.min(l,m.x),u=Math.min(u,m.y),c=Math.max(c,m.x),f=Math.max(f,m.y)}var v=this.grid.query(l-s,u-s,c+s,f+s);v.sort(Fo);for(var g,y={},b=function(s){var l=v[s];if(l!==g){g=l;var u=n.featureIndexArray.get(l),c=null;n.loadMatchingFeature(y,u.bucketIndex,u.sourceLayerIndex,u.featureIndex,i,r.layers,t,function(t,r){return c||(c=jr(t)),r.queryIntersectsFeature(o,t,c,n.z,e.transform,a,e.posMatrix)})}},x=0;x<v.length;x++)b(x);return y},No.prototype.loadMatchingFeature=function(e,t,n,r,a,i,o,s){var l=this.bucketLayerIDs[t];if(!i||function(e,t){for(var n=0;n<e.length;n++)if(t.indexOf(e[n])>=0)return!0;return!1}(i,l)){var u=this.sourceLayerCoder.decode(n),c=this.vtLayers[u].feature(r);if(a(new Pn(this.tileID.overscaledZ),c))for(var f=0;f<l.length;f++){var d=l[f];if(!(i&&i.indexOf(d)<0)){var p=o[d];if(p&&(!s||s(c,p))){var h=new zo(c,this.z,this.x,this.y);h.layer=p.serialize();var m=e[d];void 0===m&&(m=e[d]=[]),m.push({featureIndex:r,feature:h})}}}}},No.prototype.lookupSymbolFeatures=function(e,t,n,r,a,i){var o={};this.loadVTLayers();for(var s=zt(r),l=0,u=e;l<u.length;l+=1){var c=u[l];this.loadMatchingFeature(o,t,n,c,s,a,i)}return o},No.prototype.hasLayer=function(e){for(var t=0,n=this.bucketLayerIDs;t<n.length;t+=1)for(var r=0,a=n[t];r<a.length;r+=1)if(e===a[r])return!0;return!1},hn("FeatureIndex",No,{omit:["rawTileData","sourceLayerCoder"]});var Bo={horizontal:1,vertical:2,horizontalOnly:3},Vo={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Uo={};function Go(e,t,n,r){var a=Math.pow(e-t,2);return r?e<t?a/2:2*a:a+Math.abs(n)*n}function Ho(e,t){var n=0;return 10===e&&(n-=1e4),40!==e&&65288!==e||(n+=50),41!==t&&65289!==t||(n+=50),n}function Wo(e,t,n,r,a,i){for(var o=null,s=Go(t,n,a,i),l=0,u=r;l<u.length;l+=1){var c=u[l],f=Go(t-c.x,n,a,i)+c.badness;f<=s&&(o=c,s=f)}return{index:e,x:t,priorBreak:o,badness:s}}function qo(e,t,n,r){if(!n)return[];if(!e)return[];for(var a,i=[],o=function(e,t,n,r){for(var a=0,i=0;i<e.length;i++){var o=r[e.charCodeAt(i)];o&&(a+=o.metrics.advance+t)}return a/Math.max(1,Math.ceil(a/n))}(e,t,n,r),s=0,l=0;l<e.length;l++){var u=e.charCodeAt(l),c=r[u];c&&!Vo[u]&&(s+=c.metrics.advance+t),l<e.length-1&&(Uo[u]||!((a=u)<11904)&&(bn["Bopomofo Extended"](a)||bn.Bopomofo(a)||bn["CJK Compatibility Forms"](a)||bn["CJK Compatibility Ideographs"](a)||bn["CJK Compatibility"](a)||bn["CJK Radicals Supplement"](a)||bn["CJK Strokes"](a)||bn["CJK Symbols and Punctuation"](a)||bn["CJK Unified Ideographs Extension A"](a)||bn["CJK Unified Ideographs"](a)||bn["Enclosed CJK Letters and Months"](a)||bn["Halfwidth and Fullwidth Forms"](a)||bn.Hiragana(a)||bn["Ideographic Description Characters"](a)||bn["Kangxi Radicals"](a)||bn["Katakana Phonetic Extensions"](a)||bn.Katakana(a)||bn["Vertical Forms"](a)||bn["Yi Radicals"](a)||bn["Yi Syllables"](a)))&&i.push(Wo(l+1,s,o,i,Ho(u,e.charCodeAt(l+1)),!1))}return function e(t){return t?e(t.priorBreak).concat(t.index):[]}(Wo(e.length,s,o,i,0,!0))}function Yo(e){var t=.5,n=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:t,verticalAlign:n}}function Xo(e,t,n,r,a){if(a){var i=t[e[r].glyph];if(i)for(var o=i.metrics.advance,s=(e[r].x+o)*a,l=n;l<=r;l++)e[l].x-=s}}Uo[10]=!0,Uo[32]=!0,Uo[38]=!0,Uo[40]=!0,Uo[41]=!0,Uo[43]=!0,Uo[45]=!0,Uo[47]=!0,Uo[173]=!0,Uo[183]=!0,Uo[8203]=!0,Uo[8208]=!0,Uo[8211]=!0,Uo[8231]=!0,t.commonjsGlobal=n,t.unwrapExports=r,t.createCommonjsModule=a,t.default=self,t.default$1=l,t.getJSON=function(e,t){var n=E(e);return n.setRequestHeader("Accept","application/json"),n.onerror=function(){t(new Error(n.statusText))},n.onload=function(){if(n.status>=200&&n.status<300&&n.response){var r;try{r=JSON.parse(n.response)}catch(e){return t(e)}t(null,r)}else 401===n.status&&e.url.match(/mapbox.com/)?t(new C(n.statusText+": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens",n.status,e.url)):t(new C(n.statusText,n.status,e.url))},n.send(),n},t.getImage=function(e,t){return M(e,function(e,n){if(e)t(e);else if(n){var r=new self.Image,a=self.URL||self.webkitURL;r.onload=function(){t(null,r),a.revokeObjectURL(r.src)};var i=new self.Blob([new Uint8Array(n.data)],{type:"image/png"});r.cacheControl=n.cacheControl,r.expires=n.expires,r.src=n.data.byteLength?a.createObjectURL(i):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}})},t.ResourceType=k,t.RGBAImage=ca,t.default$2=Ji,t.ImagePosition=Qi,t.getArrayBuffer=M,t.default$3=function(e){return new ao(e).readFields(To,[])},t.default$4=bn,t.asyncAll=function(e,t,n){if(!e.length)return n(null,[]);var r=e.length,a=new Array(e.length),i=null;e.forEach(function(e,o){t(e,function(e,t){e&&(i=e),a[o]=t,0==--r&&n(i,a)})})},t.AlphaImage=ua,t.default$5=L,t.endsWith=v,t.extend=p,t.sphericalToCartesian=function(e){var t=e[0],n=e[1],r=e[2];return n+=90,n*=Math.PI/180,r*=Math.PI/180,{x:t*Math.cos(n)*Math.sin(r),y:t*Math.sin(n)*Math.sin(r),z:t*Math.cos(r)}},t.Evented=R,t.validateStyle=rn,t.validateLight=an,t.emitValidationErrors=ln,t.default$6=ee,t.number=we,t.Properties=Hn,t.Transitionable=Dn,t.Transitioning=zn,t.PossiblyEvaluated=Fn,t.DataConstantProperty=Bn,t.warnOnce=_,t.uniqueId=function(){return h++},t.default$7=Mo,t.pick=function(e,t){for(var n={},r=0;r<t.length;r++){var a=t[r];a in e&&(n[a]=e[a])}return n},t.wrap=function(e,t,n){var r=n-t,a=((e-t)%r+r)%r+t;return a===t?n:a},t.clamp=d,t.Event=O,t.ErrorEvent=P,t.OverscaledTileID=Po,t.default$8=Ir,t.createLayout=Zn,t.getCoordinatesCenter=function(e){for(var t=1/0,n=1/0,r=-1/0,a=-1/0,i=0;i<e.length;i++)t=Math.min(t,e[i].column),n=Math.min(n,e[i].row),r=Math.max(r,e[i].column),a=Math.max(a,e[i].row);var o=r-t,l=a-n,u=Math.max(o,l),c=Math.max(0,Math.floor(-Math.log(u)/Math.LN2));return new s((t+r)/2,(n+a)/2,0).zoomTo(c)},t.CanonicalTileID=So,t.RasterBoundsArray=Jn,t.getVideo=function(e,t){var n,r,a=self.document.createElement("video");a.onloadstart=function(){t(null,a)};for(var i=0;i<e.length;i++){var o=self.document.createElement("source");n=e[i],r=void 0,(r=self.document.createElement("a")).href=n,(r.protocol!==self.document.location.protocol||r.host!==self.document.location.host)&&(a.crossOrigin="Anonymous"),o.src=e[i],a.appendChild(o)}return a},t.default$9=D,t.bindAll=m,t.default$10=function e(t,n){if(Array.isArray(t)){if(!Array.isArray(n)||t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(!e(t[r],n[r]))return!1;return!0}if("object"==typeof t&&null!==t&&null!==n){if("object"!=typeof n)return!1;if(Object.keys(t).length!==Object.keys(n).length)return!1;for(var a in t)if(!e(t[a],n[a]))return!1;return!0}return t===n},t.parseCacheControl=function(e){var t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(e,n,r,a){var i=r||a;return t[n]=!i||i.toLowerCase(),""}),t["max-age"]){var n=parseInt(t["max-age"],10);isNaN(n)?delete t["max-age"]:t["max-age"]=n}return t},t.default$11=No,t.default$12=zo,t.default$13=zt,t.default$14=Hi,t.CollisionBoxArray=vr,t.default$15=Er,t.TriangleIndexArray=fr,t.default$16=Pn,t.default$17=s,t.keysDifference=function(e,t){var n=[];for(var r in e)r in t||n.push(r);return n},t.default$18=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.mat4=na,t.vec4=ta,t.getSizeData=ji,t.evaluateSizeForFeature=function(e,t,n){var r=t;return"source"===e.functionType?n.lowerSize/10:"composite"===e.functionType?we(n.lowerSize/10,n.upperSize/10,r.uSizeT):r.uSize},t.evaluateSizeForZoom=function(e,t,n){if("constant"===e.functionType)return{uSizeT:0,uSize:e.layoutSize};if("source"===e.functionType)return{uSizeT:0,uSize:0};if("camera"===e.functionType){var r=e.propertyValue,a=e.zoomRange,i=e.sizeRange,o=d(Mt(r,n.specification).interpolationFactor(t,a.min,a.max),0,1);return{uSizeT:0,uSize:i.min+o*(i.max-i.min)}}var s=e.propertyValue,l=e.zoomRange;return{uSizeT:d(Mt(s,n.specification).interpolationFactor(t,l.min,l.max),0,1),uSize:0}},t.addDynamicAttributes=Vi,t.default$19=qi,t.WritingMode=Bo,t.multiPolygonIntersectsBufferedPoint=Br,t.multiPolygonIntersectsMultiPolygon=Vr,t.multiPolygonIntersectsBufferedMultiLine=Ur,t.polygonIntersectsPolygon=function(e,t){for(var n=0;n<e.length;n++)if(Zr(t,e[n]))return!0;for(var r=0;r<t.length;r++)if(Zr(e,t[r]))return!0;return!!Hr(e,t)},t.distToSegmentSquared=Yr,t.default$20=ea,t.default$21=Wn,t.default$22=function(e){return new Ki[e.type](e)},t.clone=b,t.filterObject=y,t.mapObject=g,t.registerForPluginAvailability=function(e){return Mn?e({pluginURL:Mn,completionCallback:Cn}):Sn.once("pluginAvailable",e),e},t.evented=Sn,t.default$23=yn,t.default$24=Rr,t.PosArray=Kn,t.UnwrappedTileID=Oo,t.ease=f,t.bezier=c,t.setRTLTextPlugin=function(e,t){if(En)throw new Error("setRTLTextPlugin cannot be called multiple times.");En=!0,Mn=e,Cn=function(e){e?(En=!1,Mn=null,t&&t(e)):An=!0},Sn.fire(new O("pluginAvailable",{pluginURL:Mn,completionCallback:Cn}))},t.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},t.default$25=zi,t.register=hn,t.GLYPH_PBF_BORDER=Eo,t.shapeText=function(e,t,n,r,a,i,o,s,l,u){var c=e.trim();u===Bo.vertical&&(c=function(e){for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n+1)||null,a=e.charCodeAt(n-1)||null;r&&Tn(r)&&!Ii[e[n+1]]||a&&Tn(a)&&!Ii[e[n-1]]||!Ii[e[n]]?t+=e[n]:t+=Ii[e[n]]}return t}(c));var f=[],d={positionedGlyphs:f,text:c,top:s[1],bottom:s[1],left:s[0],right:s[0],writingMode:u},p=On.processBidirectionalText;return function(e,t,n,r,a,i,o,s,l){for(var u=0,c=-17,f=0,d=e.positionedGlyphs,p="right"===i?1:"left"===i?0:.5,h=0,m=n;h<m.length;h+=1){var v=m[h];if((v=v.trim()).length){for(var g=d.length,y=0;y<v.length;y++){var b=v.charCodeAt(y),x=t[b];x&&(wn(b)&&o!==Bo.horizontal?(d.push({glyph:b,x:u,y:0,vertical:!0}),u+=l+s):(d.push({glyph:b,x:u,y:c,vertical:!1}),u+=x.metrics.advance+s))}if(d.length!==g){var _=u-s;f=Math.max(_,f),Xo(d,t,g,d.length-1,p)}u=0,c+=r}else c+=r}var w=Yo(a),T=w.horizontalAlign,k=w.verticalAlign;!function(e,t,n,r,a,i,o){for(var s=(t-n)*a,l=(-r*o+.5)*i,u=0;u<e.length;u++)e[u].x+=s,e[u].y+=l}(d,p,T,k,f,r,n.length);var C=n.length*r;e.top+=-k*C,e.bottom=e.top+C,e.left+=-T*f,e.right=e.left+f}(d,t,p?p(c,qo(c,o,n,t)):function(e,t){for(var n=[],r=0,a=0,i=t;a<i.length;a+=1){var o=i[a];n.push(e.substring(r,o)),r=o}return r<e.length&&n.push(e.substring(r,e.length)),n}(c,qo(c,o,n,t)),r,a,i,u,o,l),!!f.length&&d},t.shapeIcon=function(e,t,n){var r=Yo(n),a=r.horizontalAlign,i=r.verticalAlign,o=t[0],s=t[1],l=o-e.displaySize[0]*a,u=l+e.displaySize[0],c=s-e.displaySize[1]*i;return{image:e,top:c,bottom:c+e.displaySize[1],left:l,right:u}},t.allowsVerticalWritingMode=xn,t.allowsLetterSpacing=function(e){for(var t=0,n=e;t<n.length;t+=1)if(!_n(n[t].charCodeAt(0)))return!1;return!0},t.default$26=Ya,t.default$27=Io,t.default$28=to,t.default$29=mi,t.default$30=ao,t.default$31=Do,t.__moduleExports=mi,t.default$32=l,t.__moduleExports$1=ao,t.plugin=On}),a(0,function(e){function t(e){var n=typeof e;if("number"===n||"boolean"===n||"string"===n||null==e)return JSON.stringify(e);if(Array.isArray(e)){for(var r="[",a=0,i=e;a<i.length;a+=1)r+=t(i[a])+",";return r+"]"}for(var o=Object.keys(e).sort(),s="{",l=0;l<o.length;l++)s+=JSON.stringify(o[l])+":"+t(e[o[l]])+",";return s+"}"}function n(n){for(var r="",a=0,i=e.default$18;a<i.length;a+=1)r+="/"+t(n[i[a]]);return r}var r=function(e){e&&this.replace(e)};function a(e,t,n,r,a){if(void 0===t.segment)return!0;for(var i=t,o=t.segment+1,s=0;s>-n/2;){if(--o<0)return!1;s-=e[o].dist(i),i=e[o]}s+=e[o].dist(e[o+1]),o++;for(var l=[],u=0;s<n/2;){var c=e[o-1],f=e[o],d=e[o+1];if(!d)return!1;var p=c.angleTo(f)-f.angleTo(d);for(p=Math.abs((p+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:p}),u+=p;s-l[0].distance>r;)u-=l.shift().angleDelta;if(u>a)return!1;o++,s+=f.dist(d)}return!0}function i(t,n,r,i,o,s,l,u,c){var f=i?.6*s*l:0,d=Math.max(i?i.right-i.left:0,o?o.right-o.left:0),p=0===t[0].x||t[0].x===c||0===t[0].y||t[0].y===c;return n-d*l<n/4&&(n=d*l+n/4),function t(n,r,i,o,s,l,u,c,f){for(var d=l/2,p=0,h=0;h<n.length-1;h++)p+=n[h].dist(n[h+1]);for(var m=0,v=r-i,g=[],y=0;y<n.length-1;y++){for(var b=n[y],x=n[y+1],_=b.dist(x),w=x.angleTo(b);v+i<m+_;){var T=((v+=i)-m)/_,k=e.number(b.x,x.x,T),C=e.number(b.y,x.y,T);if(k>=0&&k<f&&C>=0&&C<f&&v-d>=0&&v+d<=p){var E=new e.default$25(k,C,w,y);E._round(),o&&!a(n,E,l,o,s)||g.push(E)}}m+=_}return c||g.length||u||(g=t(n,m/2,i,o,s,l,u,!0,f)),g}(t,p?n/2*u%n:(d/2+2*s)*l*u%n,n,f,r,d*l,p,!1,c)}r.prototype.replace=function(e){this._layerConfigs={},this._layers={},this.update(e,[])},r.prototype.update=function(t,r){for(var a=this,i=0,o=t;i<o.length;i+=1){var s=o[i];a._layerConfigs[s.id]=s;var l=a._layers[s.id]=e.default$22(s);l._featureFilter=e.default$13(l.filter)}for(var u=0,c=r;u<c.length;u+=1){var f=c[u];delete a._layerConfigs[f],delete a._layers[f]}this.familiesBySource={};for(var d=0,p=function(e){for(var t={},r=0;r<e.length;r++){var a=n(e[r]),i=t[a];i||(i=t[a]=[]),i.push(e[r])}var o=[];for(var s in t)o.push(t[s]);return o}(e.values(this._layerConfigs));d<p.length;d+=1){var h=p[d].map(function(e){return a._layers[e.id]}),m=h[0];if("none"!==m.visibility){var v=m.source||"",g=a.familiesBySource[v];g||(g=a.familiesBySource[v]={});var y=m.sourceLayer||"_geojsonTileLayer",b=g[y];b||(b=g[y]=[]),b.push(h)}}};var o=function(){this.opacity=0,this.targetOpacity=0,this.time=0};o.prototype.clone=function(){var e=new o;return e.opacity=this.opacity,e.targetOpacity=this.targetOpacity,e.time=this.time,e},e.register("OpacityState",o);var s=function(e,t,n,r,a,i,o,s,l,u,c){var f=o.top*s-l,d=o.bottom*s+l,p=o.left*s-l,h=o.right*s+l;if(this.boxStartIndex=e.length,u){var m=d-f,v=h-p;m>0&&(m=Math.max(10*s,m),this._addLineCollisionCircles(e,t,n,n.segment,v,m,r,a,i,c))}else e.emplaceBack(n.x,n.y,p,f,h,d,r,a,i,0,0);this.boxEndIndex=e.length};s.prototype._addLineCollisionCircles=function(e,t,n,r,a,i,o,s,l,u){var c=i/2,f=Math.floor(a/c),d=1+.4*Math.log(u)/Math.LN2,p=Math.floor(f*d/2),h=-i/2,m=n,v=r+1,g=h,y=-a/2,b=y-a/4;do{if(--v<0){if(g>y)return;v=0;break}g-=t[v].dist(m),m=t[v]}while(g>b);for(var x=t[v].dist(t[v+1]),_=-p;_<f+p;_++){var w=_*c,T=y+w;if(w<0&&(T+=w),w>a&&(T+=w-a),!(T<g)){for(;g+x<T;){if(g+=x,++v+1>=t.length)return;x=t[v].dist(t[v+1])}var k=T-g,C=t[v],E=t[v+1].sub(C)._unit()._mult(k)._add(C)._round(),M=Math.abs(T-h)<c?0:.8*(T-h);e.emplaceBack(E.x,E.y,-i/2,-i/2,i/2,i/2,o,s,l,i/2,M)}}};var l=c,u=c;function c(e,t){if(!(this instanceof c))return new c(e,t);if(this.data=e||[],this.length=this.data.length,this.compare=t||f,this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)}function f(e,t){return e<t?-1:e>t?1:0}function d(t,n,r){void 0===n&&(n=1),void 0===r&&(r=!1);for(var a=1/0,i=1/0,o=-1/0,s=-1/0,u=t[0],c=0;c<u.length;c++){var f=u[c];(!c||f.x<a)&&(a=f.x),(!c||f.y<i)&&(i=f.y),(!c||f.x>o)&&(o=f.x),(!c||f.y>s)&&(s=f.y)}var d=o-a,m=s-i,v=Math.min(d,m),g=v/2,y=new l(null,p);if(0===v)return new e.default$1(a,i);for(var b=a;b<o;b+=v)for(var x=i;x<s;x+=v)y.push(new h(b+g,x+g,g,t));for(var _=function(e){for(var t=0,n=0,r=0,a=e[0],i=0,o=a.length,s=o-1;i<o;s=i++){var l=a[i],u=a[s],c=l.x*u.y-u.x*l.y;n+=(l.x+u.x)*c,r+=(l.y+u.y)*c,t+=3*c}return new h(n/t,r/t,0,e)}(t),w=y.length;y.length;){var T=y.pop();(T.d>_.d||!_.d)&&(_=T,r&&console.log("found best %d after %d probes",Math.round(1e4*T.d)/1e4,w)),T.max-_.d<=n||(g=T.h/2,y.push(new h(T.p.x-g,T.p.y-g,g,t)),y.push(new h(T.p.x+g,T.p.y-g,g,t)),y.push(new h(T.p.x-g,T.p.y+g,g,t)),y.push(new h(T.p.x+g,T.p.y+g,g,t)),w+=4)}return r&&(console.log("num probes: "+w),console.log("best distance: "+_.d)),_.p}function p(e,t){return t.max-e.max}function h(t,n,r,a){this.p=new e.default$1(t,n),this.h=r,this.d=function(t,n){for(var r=!1,a=1/0,i=0;i<n.length;i++)for(var o=n[i],s=0,l=o.length,u=l-1;s<l;u=s++){var c=o[s],f=o[u];c.y>t.y!=f.y>t.y&&t.x<(f.x-c.x)*(t.y-c.y)/(f.y-c.y)+c.x&&(r=!r),a=Math.min(a,e.distToSegmentSquared(t,c,f))}return(r?1:-1)*Math.sqrt(a)}(this.p,a),this.max=this.d+this.h*Math.SQRT2}function m(t,n,r,a,i,o){t.createArrays(),t.symbolInstances=[];var s=512*t.overscaling;t.tilePixelRatio=e.default$8/s,t.compareText={},t.iconsNeedLinear=!1;var l=t.layers[0].layout,u=t.layers[0]._unevaluatedLayout._values,c={};if("composite"===t.textSizeData.functionType){var f=t.textSizeData.zoomRange,d=f.min,p=f.max;c.compositeTextSizes=[u["text-size"].possiblyEvaluate(new e.default$16(d)),u["text-size"].possiblyEvaluate(new e.default$16(p))]}if("composite"===t.iconSizeData.functionType){var h=t.iconSizeData.zoomRange,m=h.min,g=h.max;c.compositeIconSizes=[u["icon-size"].possiblyEvaluate(new e.default$16(m)),u["icon-size"].possiblyEvaluate(new e.default$16(g))]}c.layoutTextSize=u["text-size"].possiblyEvaluate(new e.default$16(t.zoom+1)),c.layoutIconSize=u["icon-size"].possiblyEvaluate(new e.default$16(t.zoom+1)),c.textMaxSize=u["text-size"].possiblyEvaluate(new e.default$16(18));for(var y=24*l.get("text-line-height"),b="map"===l.get("text-rotation-alignment")&&"line"===l.get("symbol-placement"),x=l.get("text-keep-upright"),_=0,w=t.features;_<w.length;_+=1){var T=w[_],k=l.get("text-font").evaluate(T).join(","),C=n[k]||{},E=r[k]||{},M={},A=T.text;if(A){var S=l.get("text-offset").evaluate(T).map(function(e){return 24*e}),O=24*l.get("text-letter-spacing").evaluate(T),P=e.allowsLetterSpacing(A)?O:0,R=l.get("text-anchor").evaluate(T),L=l.get("text-justify").evaluate(T),D="line"!==l.get("symbol-placement")?24*l.get("text-max-width").evaluate(T):0;M.horizontal=e.shapeText(A,C,D,y,R,L,P,S,24,e.WritingMode.horizontal),e.allowsVerticalWritingMode(A)&&b&&x&&(M.vertical=e.shapeText(A,C,D,y,R,L,P,S,24,e.WritingMode.vertical))}var I=void 0;if(T.icon){var z=a[T.icon];z&&(I=e.shapeIcon(i[T.icon],l.get("icon-offset").evaluate(T),l.get("icon-anchor").evaluate(T)),void 0===t.sdfIcons?t.sdfIcons=z.sdf:t.sdfIcons!==z.sdf&&e.warnOnce("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),z.pixelRatio!==t.pixelRatio?t.iconsNeedLinear=!0:0!==l.get("icon-rotate").constantOr(1)&&(t.iconsNeedLinear=!0))}(M.horizontal||I)&&v(t,T,M,I,E,c)}o&&t.generateCollisionDebugBuffers()}function v(t,n,r,a,l,u){var c=u.layoutTextSize.evaluate(n),f=u.layoutIconSize.evaluate(n),p=u.textMaxSize.evaluate(n);void 0===p&&(p=c);var h=t.layers[0].layout,m=h.get("text-offset").evaluate(n),v=h.get("icon-offset").evaluate(n),b=c/24,x=t.tilePixelRatio*b,_=t.tilePixelRatio*p/24,w=t.tilePixelRatio*f,T=t.tilePixelRatio*h.get("symbol-spacing"),k=h.get("text-padding")*t.tilePixelRatio,C=h.get("icon-padding")*t.tilePixelRatio,E=h.get("text-max-angle")/180*Math.PI,M="map"===h.get("text-rotation-alignment")&&"line"===h.get("symbol-placement"),A="map"===h.get("icon-rotation-alignment")&&"line"===h.get("symbol-placement"),S=T/2,O=function(i,c){c.x<0||c.x>=e.default$8||c.y<0||c.y>=e.default$8||t.symbolInstances.push(function(t,n,r,a,i,l,u,c,f,d,p,h,m,v,y,b,x,_,w,T,k){var C,E,M=t.addToLineVertexArray(n,r),A=0,S=0,O=0,P=a.horizontal?a.horizontal.text:"",R=[];a.horizontal&&(C=new s(u,r,n,c,f,d,a.horizontal,p,h,m,t.overscaling),S+=g(t,n,a.horizontal,l,m,w,v,M,a.vertical?e.WritingMode.horizontal:e.WritingMode.horizontalOnly,R,T,k),a.vertical&&(O+=g(t,n,a.vertical,l,m,w,v,M,e.WritingMode.vertical,R,T,k)));var L=C?C.boxStartIndex:t.collisionBoxArray.length,D=C?C.boxEndIndex:t.collisionBoxArray.length;if(i){var I=function(t,n,r,a,i,o){var s,l,u,c,f=n.image,d=r.layout,p=n.top-1/f.pixelRatio,h=n.left-1/f.pixelRatio,m=n.bottom+1/f.pixelRatio,v=n.right+1/f.pixelRatio;if("none"!==d.get("icon-text-fit")&&i){var g=v-h,y=m-p,b=d.get("text-size").evaluate(o)/24,x=i.left*b,_=i.right*b,w=i.top*b,T=_-x,k=i.bottom*b-w,C=d.get("icon-text-fit-padding")[0],E=d.get("icon-text-fit-padding")[1],M=d.get("icon-text-fit-padding")[2],A=d.get("icon-text-fit-padding")[3],S="width"===d.get("icon-text-fit")?.5*(k-y):0,O="height"===d.get("icon-text-fit")?.5*(T-g):0,P="width"===d.get("icon-text-fit")||"both"===d.get("icon-text-fit")?T:g,R="height"===d.get("icon-text-fit")||"both"===d.get("icon-text-fit")?k:y;s=new e.default$1(x+O-A,w+S-C),l=new e.default$1(x+O+E+P,w+S-C),u=new e.default$1(x+O+E+P,w+S+M+R),c=new e.default$1(x+O-A,w+S+M+R)}else s=new e.default$1(h,p),l=new e.default$1(v,p),u=new e.default$1(v,m),c=new e.default$1(h,m);var L=r.layout.get("icon-rotate").evaluate(o)*Math.PI/180;if(L){var D=Math.sin(L),I=Math.cos(L),z=[I,-D,D,I];s._matMult(z),l._matMult(z),c._matMult(z),u._matMult(z)}return[{tl:s,tr:l,bl:c,br:u,tex:f.paddedRect,writingMode:void 0,glyphOffset:[0,0]}]}(0,i,l,0,a.horizontal,w);E=new s(u,r,n,c,f,d,i,y,b,!1,t.overscaling),A=4*I.length;var z=t.iconSizeData,j=null;"source"===z.functionType?j=[10*l.layout.get("icon-size").evaluate(w)]:"composite"===z.functionType&&(j=[10*k.compositeIconSizes[0].evaluate(w),10*k.compositeIconSizes[1].evaluate(w)]),t.addSymbols(t.icon,I,j,_,x,w,!1,n,M.lineStartIndex,M.lineLength)}var N=E?E.boxStartIndex:t.collisionBoxArray.length,F=E?E.boxEndIndex:t.collisionBoxArray.length;t.glyphOffsetArray.length>=e.default$14.MAX_GLYPHS&&e.warnOnce("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907");var B=new o,V=new o;return{key:P,textBoxStartIndex:L,textBoxEndIndex:D,iconBoxStartIndex:N,iconBoxEndIndex:F,textOffset:v,iconOffset:_,anchor:n,line:r,featureIndex:c,feature:w,numGlyphVertices:S,numVerticalGlyphVertices:O,numIconVertices:A,textOpacityState:B,iconOpacityState:V,isDuplicate:!1,placedTextSymbolIndices:R,crossTileID:0}}(t,c,i,r,a,t.layers[0],t.collisionBoxArray,n.index,n.sourceLayerIndex,t.index,x,k,M,m,w,C,A,v,n,l,u))};if("line"===h.get("symbol-placement"))for(var P=0,R=function(t,n,r,a,i){for(var o=[],s=0;s<t.length;s++)for(var l=t[s],u=void 0,c=0;c<l.length-1;c++){var f=l[c],d=l[c+1];f.x<0&&d.x<0||(f.x<0?f=new e.default$1(0,f.y+(d.y-f.y)*((0-f.x)/(d.x-f.x)))._round():d.x<0&&(d=new e.default$1(0,f.y+(d.y-f.y)*((0-f.x)/(d.x-f.x)))._round()),f.y<0&&d.y<0||(f.y<0?f=new e.default$1(f.x+(d.x-f.x)*((0-f.y)/(d.y-f.y)),0)._round():d.y<0&&(d=new e.default$1(f.x+(d.x-f.x)*((0-f.y)/(d.y-f.y)),0)._round()),f.x>=a&&d.x>=a||(f.x>=a?f=new e.default$1(a,f.y+(d.y-f.y)*((a-f.x)/(d.x-f.x)))._round():d.x>=a&&(d=new e.default$1(a,f.y+(d.y-f.y)*((a-f.x)/(d.x-f.x)))._round()),f.y>=i&&d.y>=i||(f.y>=i?f=new e.default$1(f.x+(d.x-f.x)*((i-f.y)/(d.y-f.y)),i)._round():d.y>=i&&(d=new e.default$1(f.x+(d.x-f.x)*((i-f.y)/(d.y-f.y)),i)._round()),u&&f.equals(u[u.length-1])||(u=[f],o.push(u)),u.push(d)))))}return o}(n.geometry,0,0,e.default$8,e.default$8);P<R.length;P+=1)for(var L=R[P],D=0,I=i(L,T,E,r.vertical||r.horizontal,a,24,_,t.overscaling,e.default$8);D<I.length;D+=1){var z=I[D],j=r.horizontal;j&&y(t,j.text,S,z)||O(L,z)}else if("Polygon"===n.type)for(var N=0,F=e.default$26(n.geometry,0);N<F.length;N+=1){var B=F[N],V=d(B,16);O(B[0],new e.default$25(V.x,V.y,0))}else if("LineString"===n.type)for(var U=0,G=n.geometry;U<G.length;U+=1){var H=G[U];O(H,new e.default$25(H[0].x,H[0].y,0))}else if("Point"===n.type)for(var W=0,q=n.geometry;W<q.length;W+=1)for(var Y=0,X=q[W];Y<X.length;Y+=1){var Z=X[Y];O([Z],new e.default$25(Z.x,Z.y,0))}}function g(t,n,r,a,i,o,s,l,u,c,f,d){var p=function(t,n,r,a,i,o){for(var s=r.layout.get("text-rotate").evaluate(i)*Math.PI/180,l=r.layout.get("text-offset").evaluate(i).map(function(e){return 24*e}),u=n.positionedGlyphs,c=[],f=0;f<u.length;f++){var d=u[f],p=o[d.glyph];if(p){var h=p.rect;if(h){var m=e.GLYPH_PBF_BORDER+1,v=p.metrics.advance/2,g=a?[d.x+v,d.y]:[0,0],y=a?[0,0]:[d.x+v+l[0],d.y+l[1]],b=p.metrics.left-m-v+y[0],x=-p.metrics.top-m+y[1],_=b+h.w,w=x+h.h,T=new e.default$1(b,x),k=new e.default$1(_,x),C=new e.default$1(b,w),E=new e.default$1(_,w);if(a&&d.vertical){var M=new e.default$1(-v,v),A=-Math.PI/2,S=new e.default$1(5,0);T._rotateAround(A,M)._add(S),k._rotateAround(A,M)._add(S),C._rotateAround(A,M)._add(S),E._rotateAround(A,M)._add(S)}if(s){var O=Math.sin(s),P=Math.cos(s),R=[P,-O,O,P];T._matMult(R),k._matMult(R),C._matMult(R),E._matMult(R)}c.push({tl:T,tr:k,bl:C,br:E,tex:h,writingMode:n.writingMode,glyphOffset:g})}}}return c}(0,r,a,i,o,f),h=t.textSizeData,m=null;return"source"===h.functionType?m=[10*a.layout.get("text-size").evaluate(o)]:"composite"===h.functionType&&(m=[10*d.compositeTextSizes[0].evaluate(o),10*d.compositeTextSizes[1].evaluate(o)]),t.addSymbols(t.text,p,m,s,i,o,u,n,l.lineStartIndex,l.lineLength),c.push(t.text.placedSymbolArray.length-1),4*p.length}function y(e,t,n,r){var a=e.compareText;if(t in a){for(var i=a[t],o=i.length-1;o>=0;o--)if(r.dist(i[o])<n)return!0}else a[t]=[];return a[t].push(r),!1}c.prototype={push:function(e){this.data.push(e),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var e=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),e}},peek:function(){return this.data[0]},_up:function(e){for(var t=this.data,n=this.compare,r=t[e];e>0;){var a=e-1>>1,i=t[a];if(n(r,i)>=0)break;t[e]=i,e=a}t[e]=r},_down:function(e){for(var t=this.data,n=this.compare,r=this.length>>1,a=t[e];e<r;){var i=1+(e<<1),o=i+1,s=t[i];if(o<this.length&&n(t[o],s)<0&&(i=o,s=t[o]),n(s,a)>=0)break;t[e]=s,e=i}t[e]=a}},l.default=u;var b=function(t){var n=new e.AlphaImage({width:0,height:0}),r={},a=new e.default$2(0,0,{autoResize:!0});for(var i in t){var o=t[i],s=r[i]={};for(var l in o){var u=o[+l];if(u&&0!==u.bitmap.width&&0!==u.bitmap.height){var c=a.packOne(u.bitmap.width+2,u.bitmap.height+2);n.resize({width:a.w,height:a.h}),e.AlphaImage.copy(u.bitmap,n,{x:0,y:0},{x:c.x+1,y:c.y+1},u.bitmap),s[l]={rect:c,metrics:u.metrics}}}}a.shrink(),n.resize({width:a.w,height:a.h}),this.image=n,this.positions=r};e.register("GlyphAtlas",b);var x=function(t){this.tileID=new e.OverscaledTileID(t.tileID.overscaledZ,t.tileID.wrap,t.tileID.canonical.z,t.tileID.canonical.x,t.tileID.canonical.y),this.uid=t.uid,this.zoom=t.zoom,this.pixelRatio=t.pixelRatio,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=t.showCollisionBoxes,this.collectResourceTiming=!!t.collectResourceTiming};function _(t,n){for(var r=new e.default$16(n),a=0,i=t;a<i.length;a+=1)i[a].recalculate(r)}x.prototype.parse=function(t,n,r,a){var i=this;this.status="parsing",this.data=t,this.collisionBoxArray=new e.CollisionBoxArray;var o=new e.default$27(Object.keys(t.layers).sort()),s=new e.default$11(this.tileID);s.bucketLayerIDs=[];var l,u,c,f={},d={featureIndex:s,iconDependencies:{},glyphDependencies:{}},p=n.familiesBySource[this.source];for(var h in p){var v=t.layers[h];if(v){1===v.version&&e.warnOnce('Vector tile source "'+i.source+'" layer "'+h+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var g=o.encode(h),y=[],x=0;x<v.length;x++){var w=v.feature(x);y.push({feature:w,index:x,sourceLayerIndex:g})}for(var T=0,k=p[h];T<k.length;T+=1){var C=k[T],E=C[0];E.minzoom&&i.zoom<Math.floor(E.minzoom)||E.maxzoom&&i.zoom>=E.maxzoom||"none"!==E.visibility&&(_(C,i.zoom),(f[E.id]=E.createBucket({index:s.bucketLayerIDs.length,layers:C,zoom:i.zoom,pixelRatio:i.pixelRatio,overscaling:i.overscaling,collisionBoxArray:i.collisionBoxArray,sourceLayerIndex:g})).populate(y,d),s.bucketLayerIDs.push(C.map(function(e){return e.id})))}}}var M=e.mapObject(d.glyphDependencies,function(e){return Object.keys(e).map(Number)});Object.keys(M).length?r.send("getGlyphs",{uid:this.uid,stacks:M},function(e,t){l||(l=e,u=t,S.call(i))}):u={};var A=Object.keys(d.iconDependencies);function S(){if(l)return a(l);if(u&&c){var t=new b(u),n=new e.default$28(c);for(var r in f){var i=f[r];i instanceof e.default$14&&(_(i.layers,this.zoom),m(i,u,t.positions,c,n.positions,this.showCollisionBoxes))}this.status="done",a(null,{buckets:e.values(f).filter(function(e){return!e.isEmpty()}),featureIndex:s,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:t.image,iconAtlasImage:n.image})}}A.length?r.send("getImages",{icons:A},function(e,t){l||(l=e,c=t,S.call(i))}):c={},S.call(this)};var w=function(e){return!(!performance||!performance.getEntriesByName)&&performance.getEntriesByName(e)};function T(t,n){var r=e.getArrayBuffer(t.request,function(t,r){t?n(t):r&&n(null,{vectorTile:new e.default$29.VectorTile(new e.default$30(r.data)),rawData:r.data,cacheControl:r.cacheControl,expires:r.expires})});return function(){r.abort(),n()}}var k=function(e,t,n){this.actor=e,this.layerIndex=t,this.loadVectorData=n||T,this.loading={},this.loaded={}};k.prototype.loadTile=function(t,n){var r=this,a=t.uid;this.loading||(this.loading={});var i=this.loading[a]=new x(t);i.abort=this.loadVectorData(t,function(o,s){if(delete r.loading[a],o||!s)return n(o);var l=s.rawData,u={};s.expires&&(u.expires=s.expires),s.cacheControl&&(u.cacheControl=s.cacheControl);var c={};if(t.request&&t.request.collectResourceTiming){var f=w(t.request.url);f&&(c.resourceTiming=JSON.parse(JSON.stringify(f)))}i.vectorTile=s.vectorTile,i.parse(s.vectorTile,r.layerIndex,r.actor,function(t,r){if(t||!r)return n(t);n(null,e.extend({rawTileData:l.slice(0)},r,u,c))}),r.loaded=r.loaded||{},r.loaded[a]=i})},k.prototype.reloadTile=function(e,t){var n=this.loaded,r=e.uid,a=this;if(n&&n[r]){var i=n[r];i.showCollisionBoxes=e.showCollisionBoxes;var o=function(e,n){var r=i.reloadCallback;r&&(delete i.reloadCallback,i.parse(i.vectorTile,a.layerIndex,a.actor,r)),t(e,n)};"parsing"===i.status?i.reloadCallback=o:"done"===i.status&&i.parse(i.vectorTile,this.layerIndex,this.actor,o)}},k.prototype.abortTile=function(e,t){var n=this.loading,r=e.uid;n&&n[r]&&n[r].abort&&(n[r].abort(),delete n[r]),t()},k.prototype.removeTile=function(e,t){var n=this.loaded,r=e.uid;n&&n[r]&&delete n[r],t()};var C=function(){this.loading={},this.loaded={}};C.prototype.loadTile=function(t,n){var r=t.uid,a=t.encoding,i=new e.default$31(r);this.loading[r]=i,i.loadFromImage(t.rawImageData,a),delete this.loading[r],this.loaded=this.loaded||{},this.loaded[r]=i,n(null,i)},C.prototype.removeTile=function(e){var t=this.loaded,n=e.uid;t&&t[n]&&delete t[n]};var E={RADIUS:6378137,FLATTENING:1/298.257223563,POLAR_RADIUS:6356752.3142};function M(e){var t=0;if(e&&e.length>0){t+=Math.abs(A(e[0]));for(var n=1;n<e.length;n++)t-=Math.abs(A(e[n]))}return t}function A(e){var t,n,r,a,i,o,s=0,l=e.length;if(l>2){for(o=0;o<l;o++)o===l-2?(r=l-2,a=l-1,i=0):o===l-1?(r=l-1,a=0,i=1):(r=o,a=o+1,i=o+2),t=e[r],n=e[a],s+=(S(e[i][0])-S(t[0]))*Math.sin(S(n[1]));s=s*E.RADIUS*E.RADIUS/2}return s}function S(e){return e*Math.PI/180}var O={geometry:function e(t){var n,r=0;switch(t.type){case"Polygon":return M(t.coordinates);case"MultiPolygon":for(n=0;n<t.coordinates.length;n++)r+=M(t.coordinates[n]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(n=0;n<t.geometries.length;n++)r+=e(t.geometries[n]);return r}},ring:A};function P(e,t){return function(n){return e(n,t)}}function R(e,t){t=!!t,e[0]=L(e[0],t);for(var n=1;n<e.length;n++)e[n]=L(e[n],!t);return e}function L(e,t){return function(e){return O.ring(e)>=0}(e)===t?e:e.reverse()}var D=e.default$29.VectorTileFeature.prototype.toGeoJSON,I=function(t){this._feature=t,this.extent=e.default$8,this.type=t.type,this.properties=t.tags,"id"in t&&!isNaN(t.id)&&(this.id=parseInt(t.id,10))};I.prototype.loadGeometry=function(){if(1===this._feature.type){for(var t=[],n=0,r=this._feature.geometry;n<r.length;n+=1){var a=r[n];t.push([new e.default$1(a[0],a[1])])}return t}for(var i=[],o=0,s=this._feature.geometry;o<s.length;o+=1){for(var l=[],u=0,c=s[o];u<c.length;u+=1){var f=c[u];l.push(new e.default$1(f[0],f[1]))}i.push(l)}return i},I.prototype.toGeoJSON=function(e,t,n){return D.call(this,e,t,n)};var z=function(t){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.default$8,this.length=t.length,this._features=t};z.prototype.feature=function(e){return new I(this._features[e])};var j=e.__moduleExports.VectorTileFeature,N=F;function F(e,t){this.options=t||{},this.features=e,this.length=e.length}function B(e,t){this.id="number"==typeof e.id?e.id:void 0,this.type=e.type,this.rawGeometry=1===e.type?[e.geometry]:e.geometry,this.properties=e.tags,this.extent=t||4096}F.prototype.feature=function(e){return new B(this.features[e],this.options.extent)},B.prototype.loadGeometry=function(){var t=this.rawGeometry;this.geometry=[];for(var n=0;n<t.length;n++){for(var r=t[n],a=[],i=0;i<r.length;i++)a.push(new e.default$32(r[i][0],r[i][1]));this.geometry.push(a)}return this.geometry},B.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e=this.geometry,t=1/0,n=-1/0,r=1/0,a=-1/0,i=0;i<e.length;i++)for(var o=e[i],s=0;s<o.length;s++){var l=o[s];t=Math.min(t,l.x),n=Math.max(n,l.x),r=Math.min(r,l.y),a=Math.max(a,l.y)}return[t,r,n,a]},B.prototype.toGeoJSON=j.prototype.toGeoJSON;var V=H,U=H,G=N;function H(t){var n=new e.__moduleExports$1;return function(e,t){for(var n in e.layers)t.writeMessage(3,W,e.layers[n])}(t,n),n.finish()}function W(e,t){var n;t.writeVarintField(15,e.version||1),t.writeStringField(1,e.name||""),t.writeVarintField(5,e.extent||4096);var r={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<e.length;n++)r.feature=e.feature(n),t.writeMessage(2,q,r);var a=r.keys;for(n=0;n<a.length;n++)t.writeStringField(3,a[n]);var i=r.values;for(n=0;n<i.length;n++)t.writeMessage(4,K,i[n])}function q(e,t){var n=e.feature;void 0!==n.id&&t.writeVarintField(1,n.id),t.writeMessage(2,Y,e),t.writeVarintField(3,n.type),t.writeMessage(4,$,n)}function Y(e,t){var n=e.feature,r=e.keys,a=e.values,i=e.keycache,o=e.valuecache;for(var s in n.properties){var l=i[s];void 0===l&&(r.push(s),l=r.length-1,i[s]=l),t.writeVarint(l);var u=n.properties[s],c=typeof u;"string"!==c&&"boolean"!==c&&"number"!==c&&(u=JSON.stringify(u));var f=c+":"+u,d=o[f];void 0===d&&(a.push(u),d=a.length-1,o[f]=d),t.writeVarint(d)}}function X(e,t){return(t<<3)+(7&e)}function Z(e){return e<<1^e>>31}function $(e,t){for(var n=e.loadGeometry(),r=e.type,a=0,i=0,o=n.length,s=0;s<o;s++){var l=n[s],u=1;1===r&&(u=l.length),t.writeVarint(X(1,u));for(var c=3===r?l.length-1:l.length,f=0;f<c;f++){1===f&&1!==r&&t.writeVarint(X(2,c-1));var d=l[f].x-a,p=l[f].y-i;t.writeVarint(Z(d)),t.writeVarint(Z(p)),a+=d,i+=p}3===r&&t.writeVarint(X(7,0))}}function K(e,t){var n=typeof e;"string"===n?t.writeStringField(1,e):"boolean"===n?t.writeBooleanField(7,e):"number"===n&&(e%1!=0?t.writeDoubleField(3,e):e<0?t.writeSVarintField(6,e):t.writeVarintField(5,e))}V.fromVectorTileJs=U,V.fromGeojsonVt=function(e,t){t=t||{};var n={};for(var r in e)n[r]=new N(e[r].features,t),n[r].name=r,n[r].version=t.version,n[r].extent=t.extent;return H({layers:n})},V.GeoJSONWrapper=G;var J=function e(t,n,r,a,i,o){if(!(i-a<=r)){var s=Math.floor((a+i)/2);!function e(t,n,r,a,i,o){for(;i>a;){if(i-a>600){var s=i-a+1,l=r-a+1,u=Math.log(s),c=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*c*(s-c)/s)*(l-s/2<0?-1:1),d=Math.max(a,Math.floor(r-l*c/s+f)),p=Math.min(i,Math.floor(r+(s-l)*c/s+f));e(t,n,r,d,p,o)}var h=n[2*r+o],m=a,v=i;for(Q(t,n,a,r),n[2*i+o]>h&&Q(t,n,a,i);m<v;){for(Q(t,n,m,v),m++,v--;n[2*m+o]<h;)m++;for(;n[2*v+o]>h;)v--}n[2*a+o]===h?Q(t,n,a,v):Q(t,n,++v,i),v<=r&&(a=v+1),r<=v&&(i=v-1)}}(t,n,s,a,i,o%2),e(t,n,r,a,s-1,o+1),e(t,n,r,s+1,i,o+1)}};function Q(e,t,n,r){ee(e,n,r),ee(t,2*n,2*r),ee(t,2*n+1,2*r+1)}function ee(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function te(e,t,n,r){var a=e-n,i=t-r;return a*a+i*i}var ne=function(e,t,n,r,a){return new re(e,t,n,r,a)};function re(e,t,n,r,a){t=t||ae,n=n||ie,a=a||Array,this.nodeSize=r||64,this.points=e,this.ids=new a(e.length),this.coords=new a(2*e.length);for(var i=0;i<e.length;i++)this.ids[i]=i,this.coords[2*i]=t(e[i]),this.coords[2*i+1]=n(e[i]);J(this.ids,this.coords,this.nodeSize,0,this.ids.length-1,0)}function ae(e){return e[0]}function ie(e){return e[1]}function oe(e){this.options=pe(Object.create(this.options),e),this.trees=new Array(this.options.maxZoom+1)}function se(e,t,n,r,a){return{x:e,y:t,zoom:1/0,id:r,properties:a,parentId:-1,numPoints:n}}function le(e,t){var n=e.geometry.coordinates;return{x:fe(n[0]),y:de(n[1]),zoom:1/0,id:t,parentId:-1}}function ue(e){return{type:"Feature",properties:ce(e),geometry:{type:"Point",coordinates:[(r=e.x,360*(r-.5)),(t=e.y,n=(180-360*t)*Math.PI/180,360*Math.atan(Math.exp(n))/Math.PI-90)]}};var t,n,r}function ce(e){var t=e.numPoints,n=t>=1e4?Math.round(t/1e3)+"k":t>=1e3?Math.round(t/100)/10+"k":t;return pe(pe({},e.properties),{cluster:!0,cluster_id:e.id,point_count:t,point_count_abbreviated:n})}function fe(e){return e/360+.5}function de(e){var t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function pe(e,t){for(var n in t)e[n]=t[n];return e}function he(e){return e.x}function me(e){return e.y}function ve(e,t,n,r,a,i){var o=a-n,s=i-r;if(0!==o||0!==s){var l=((e-n)*o+(t-r)*s)/(o*o+s*s);l>1?(n=a,r=i):l>0&&(n+=o*l,r+=s*l)}return(o=e-n)*o+(s=t-r)*s}function ge(e,t,n,r){var a={id:e||null,type:t,geometry:n,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(e){var t=e.geometry,n=e.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)ye(e,t);else if("Polygon"===n||"MultiLineString"===n)for(var r=0;r<t.length;r++)ye(e,t[r]);else if("MultiPolygon"===n)for(r=0;r<t.length;r++)for(var a=0;a<t[r].length;a++)ye(e,t[r][a])}(a),a}function ye(e,t){for(var n=0;n<t.length;n+=3)e.minX=Math.min(e.minX,t[n]),e.minY=Math.min(e.minY,t[n+1]),e.maxX=Math.max(e.maxX,t[n]),e.maxY=Math.max(e.maxY,t[n+1])}function be(e,t,n){if(t.geometry){var r=t.geometry.coordinates,a=t.geometry.type,i=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),o=[];if("Point"===a)xe(r,o);else if("MultiPoint"===a)for(var s=0;s<r.length;s++)xe(r[s],o);else if("LineString"===a)_e(r,o,i,!1);else if("MultiLineString"===a)if(n.lineMetrics)for(s=0;s<r.length;s++)return o=[],_e(r[s],o,i,!1),void e.push(ge(t.id,"LineString",o,t.properties));else we(r,o,i,!1);else if("Polygon"===a)we(r,o,i,!0);else{if("MultiPolygon"!==a){if("GeometryCollection"===a){for(s=0;s<t.geometry.geometries.length;s++)be(e,{id:t.id,geometry:t.geometry.geometries[s],properties:t.properties},n);return}throw new Error("Input data is not a valid GeoJSON object.")}for(s=0;s<r.length;s++){var l=[];we(r[s],l,i,!0),o.push(l)}}e.push(ge(t.id,a,o,t.properties))}}function xe(e,t){t.push(Te(e[0])),t.push(ke(e[1])),t.push(0)}function _e(e,t,n,r){for(var a,i,o=0,s=0;s<e.length;s++){var l=Te(e[s][0]),u=ke(e[s][1]);t.push(l),t.push(u),t.push(0),s>0&&(o+=r?(a*u-l*i)/2:Math.sqrt(Math.pow(l-a,2)+Math.pow(u-i,2))),a=l,i=u}var c=t.length-3;t[2]=1,function e(t,n,r,a){for(var i,o=a,s=t[n],l=t[n+1],u=t[r],c=t[r+1],f=n+3;f<r;f+=3){var d=ve(t[f],t[f+1],s,l,u,c);d>o&&(i=f,o=d)}o>a&&(i-n>3&&e(t,n,i,a),t[i+2]=o,r-i>3&&e(t,i,r,a))}(t,0,c,n),t[c+2]=1,t.size=Math.abs(o),t.start=0,t.end=t.size}function we(e,t,n,r){for(var a=0;a<e.length;a++){var i=[];_e(e[a],i,n,r),t.push(i)}}function Te(e){return e/360+.5}function ke(e){var t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function Ce(e,t,n,r,a,i,o,s){if(r/=t,i>=(n/=t)&&o<=r)return e;if(i>r||o<n)return null;for(var l=[],u=0;u<e.length;u++){var c=e[u],f=c.geometry,d=c.type,p=0===a?c.minX:c.minY,h=0===a?c.maxX:c.maxY;if(p>=n&&h<=r)l.push(c);else if(!(p>r||h<n)){var m=[];if("Point"===d||"MultiPoint"===d)Ee(f,m,n,r,a);else if("LineString"===d)Me(f,m,n,r,a,!1,s.lineMetrics);else if("MultiLineString"===d)Se(f,m,n,r,a,!1);else if("Polygon"===d)Se(f,m,n,r,a,!0);else if("MultiPolygon"===d)for(var v=0;v<f.length;v++){var g=[];Se(f[v],g,n,r,a,!0),g.length&&m.push(g)}if(m.length){if(s.lineMetrics&&"LineString"===d){for(v=0;v<m.length;v++)l.push(ge(c.id,d,m[v],c.tags));continue}"LineString"!==d&&"MultiLineString"!==d||(1===m.length?(d="LineString",m=m[0]):d="MultiLineString"),"Point"!==d&&"MultiPoint"!==d||(d=3===m.length?"Point":"MultiPoint"),l.push(ge(c.id,d,m,c.tags))}}}return l.length?l:null}function Ee(e,t,n,r,a){for(var i=0;i<e.length;i+=3){var o=e[i+a];o>=n&&o<=r&&(t.push(e[i]),t.push(e[i+1]),t.push(e[i+2]))}}function Me(e,t,n,r,a,i,o){for(var s,l,u=Ae(e),c=0===a?Pe:Re,f=e.start,d=0;d<e.length-3;d+=3){var p=e[d],h=e[d+1],m=e[d+2],v=e[d+3],g=e[d+4],y=0===a?p:h,b=0===a?v:g,x=!1;o&&(s=Math.sqrt(Math.pow(p-v,2)+Math.pow(h-g,2))),y<n?b>=n&&(l=c(u,p,h,v,g,n),o&&(u.start=f+s*l)):y>r?b<=r&&(l=c(u,p,h,v,g,r),o&&(u.start=f+s*l)):Oe(u,p,h,m),b<n&&y>=n&&(l=c(u,p,h,v,g,n),x=!0),b>r&&y<=r&&(l=c(u,p,h,v,g,r),x=!0),!i&&x&&(o&&(u.end=f+s*l),t.push(u),u=Ae(e)),o&&(f+=s)}var _=e.length-3;p=e[_],h=e[_+1],m=e[_+2],(y=0===a?p:h)>=n&&y<=r&&Oe(u,p,h,m),_=u.length-3,i&&_>=3&&(u[_]!==u[0]||u[_+1]!==u[1])&&Oe(u,u[0],u[1],u[2]),u.length&&t.push(u)}function Ae(e){var t=[];return t.size=e.size,t.start=e.start,t.end=e.end,t}function Se(e,t,n,r,a,i){for(var o=0;o<e.length;o++)Me(e[o],t,n,r,a,i,!1)}function Oe(e,t,n,r){e.push(t),e.push(n),e.push(r)}function Pe(e,t,n,r,a,i){var o=(i-t)/(r-t);return e.push(i),e.push(n+(a-n)*o),e.push(1),o}function Re(e,t,n,r,a,i){var o=(i-n)/(a-n);return e.push(t+(r-t)*o),e.push(i),e.push(1),o}function Le(e,t){for(var n=[],r=0;r<e.length;r++){var a,i=e[r],o=i.type;if("Point"===o||"MultiPoint"===o||"LineString"===o)a=De(i.geometry,t);else if("MultiLineString"===o||"Polygon"===o){a=[];for(var s=0;s<i.geometry.length;s++)a.push(De(i.geometry[s],t))}else if("MultiPolygon"===o)for(a=[],s=0;s<i.geometry.length;s++){for(var l=[],u=0;u<i.geometry[s].length;u++)l.push(De(i.geometry[s][u],t));a.push(l)}n.push(ge(i.id,o,a,i.tags))}return n}function De(e,t){var n=[];n.size=e.size,void 0!==e.start&&(n.start=e.start,n.end=e.end);for(var r=0;r<e.length;r+=3)n.push(e[r]+t,e[r+1],e[r+2]);return n}function Ie(e,t){if(e.transformed)return e;var n,r,a,i=1<<e.z,o=e.x,s=e.y;for(n=0;n<e.features.length;n++){var l=e.features[n],u=l.geometry,c=l.type;if(l.geometry=[],1===c)for(r=0;r<u.length;r+=2)l.geometry.push(ze(u[r],u[r+1],t,i,o,s));else for(r=0;r<u.length;r++){var f=[];for(a=0;a<u[r].length;a+=2)f.push(ze(u[r][a],u[r][a+1],t,i,o,s));l.geometry.push(f)}}return e.transformed=!0,e}function ze(e,t,n,r,a,i){return[Math.round(n*(e*r-a)),Math.round(n*(t*r-i))]}function je(e,t,n,r,a){for(var i=t===a.maxZoom?0:a.tolerance/((1<<t)*a.extent),o={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z:t,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<e.length;s++){o.numFeatures++,Ne(o,e[s],i,a);var l=e[s].minX,u=e[s].minY,c=e[s].maxX,f=e[s].maxY;l<o.minX&&(o.minX=l),u<o.minY&&(o.minY=u),c>o.maxX&&(o.maxX=c),f>o.maxY&&(o.maxY=f)}return o}function Ne(e,t,n,r){var a=t.geometry,i=t.type,o=[];if("Point"===i||"MultiPoint"===i)for(var s=0;s<a.length;s+=3)o.push(a[s]),o.push(a[s+1]),e.numPoints++,e.numSimplified++;else if("LineString"===i)Fe(o,a,e,n,!1,!1);else if("MultiLineString"===i||"Polygon"===i)for(s=0;s<a.length;s++)Fe(o,a[s],e,n,"Polygon"===i,0===s);else if("MultiPolygon"===i)for(var l=0;l<a.length;l++){var u=a[l];for(s=0;s<u.length;s++)Fe(o,u[s],e,n,!0,0===s)}if(o.length){var c=t.tags||null;if("LineString"===i&&r.lineMetrics){for(var f in c={},t.tags)c[f]=t.tags[f];c.mapbox_clip_start=a.start/a.size,c.mapbox_clip_end=a.end/a.size}var d={geometry:o,type:"Polygon"===i||"MultiPolygon"===i?3:"LineString"===i||"MultiLineString"===i?2:1,tags:c};null!==t.id&&(d.id=t.id),e.features.push(d)}}function Fe(e,t,n,r,a,i){var o=r*r;if(r>0&&t.size<(a?o:r))n.numPoints+=t.length/3;else{for(var s=[],l=0;l<t.length;l+=3)(0===r||t[l+2]>o)&&(n.numSimplified++,s.push(t[l]),s.push(t[l+1])),n.numPoints++;a&&function(e,t){for(var n=0,r=0,a=e.length,i=a-2;r<a;i=r,r+=2)n+=(e[r]-e[i])*(e[r+1]+e[i+1]);if(n>0===t)for(r=0,a=e.length;r<a/2;r+=2){var o=e[r],s=e[r+1];e[r]=e[a-2-r],e[r+1]=e[a-1-r],e[a-2-r]=o,e[a-1-r]=s}}(s,i),e.push(s)}}function Be(e,t){var n=(t=this.options=function(e,t){for(var n in t)e[n]=t[n];return e}(Object.create(this.options),t)).debug;if(n&&console.time("preprocess data"),t.maxZoom<0||t.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");var r=function(e,t){var n=[];if("FeatureCollection"===e.type)for(var r=0;r<e.features.length;r++)be(n,e.features[r],t);else"Feature"===e.type?be(n,e,t):be(n,{geometry:e},t);return n}(e,t);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(r=function(e,t){var n=t.buffer/t.extent,r=e,a=Ce(e,1,-1-n,n,0,-1,2,t),i=Ce(e,1,1-n,2+n,0,-1,2,t);return(a||i)&&(r=Ce(e,1,-n,1+n,0,-1,2,t)||[],a&&(r=Le(a,1).concat(r)),i&&(r=r.concat(Le(i,-1)))),r}(r,t)).length&&this.splitTile(r,0,0,0),n&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Ve(e,t,n){return 32*((1<<e)*n+t)+e}function Ue(e,t){var n=e.tileID.canonical;if(!this._geoJSONIndex)return t(null,null);var r=this._geoJSONIndex.getTile(n.z,n.x,n.y);if(!r)return t(null,null);var a=new z(r.features),i=V(a);0===i.byteOffset&&i.byteLength===i.buffer.byteLength||(i=new Uint8Array(i)),t(null,{vectorTile:a,rawData:i.buffer})}re.prototype={range:function(e,t,n,r){return function(e,t,n,r,a,i,o){for(var s,l,u=[0,e.length-1,0],c=[];u.length;){var f=u.pop(),d=u.pop(),p=u.pop();if(d-p<=o)for(var h=p;h<=d;h++)s=t[2*h],l=t[2*h+1],s>=n&&s<=a&&l>=r&&l<=i&&c.push(e[h]);else{var m=Math.floor((p+d)/2);s=t[2*m],l=t[2*m+1],s>=n&&s<=a&&l>=r&&l<=i&&c.push(e[m]);var v=(f+1)%2;(0===f?n<=s:r<=l)&&(u.push(p),u.push(m-1),u.push(v)),(0===f?a>=s:i>=l)&&(u.push(m+1),u.push(d),u.push(v))}}return c}(this.ids,this.coords,e,t,n,r,this.nodeSize)},within:function(e,t,n){return function(e,t,n,r,a,i){for(var o=[0,e.length-1,0],s=[],l=a*a;o.length;){var u=o.pop(),c=o.pop(),f=o.pop();if(c-f<=i)for(var d=f;d<=c;d++)te(t[2*d],t[2*d+1],n,r)<=l&&s.push(e[d]);else{var p=Math.floor((f+c)/2),h=t[2*p],m=t[2*p+1];te(h,m,n,r)<=l&&s.push(e[p]);var v=(u+1)%2;(0===u?n-a<=h:r-a<=m)&&(o.push(f),o.push(p-1),o.push(v)),(0===u?n+a>=h:r+a>=m)&&(o.push(p+1),o.push(c),o.push(v))}}return s}(this.ids,this.coords,e,t,n,this.nodeSize)}},oe.prototype={options:{minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,reduce:null,initial:function(){return{}},map:function(e){return e}},load:function(e){var t=this.options.log;t&&console.time("total time");var n="prepare "+e.length+" points";t&&console.time(n),this.points=e;var r=e.map(le);t&&console.timeEnd(n);for(var a=this.options.maxZoom;a>=this.options.minZoom;a--){var i=+Date.now();this.trees[a+1]=ne(r,he,me,this.options.nodeSize,Float32Array),r=this._cluster(r,a),t&&console.log("z%d: %d clusters in %dms",a,r.length,+Date.now()-i)}return this.trees[this.options.minZoom]=ne(r,he,me,this.options.nodeSize,Float32Array),t&&console.timeEnd("total time"),this},getClusters:function(e,t){for(var n=this.trees[this._limitZoom(t)],r=n.range(fe(e[0]),de(e[3]),fe(e[2]),de(e[1])),a=[],i=0;i<r.length;i++){var o=n.points[r[i]];a.push(o.numPoints?ue(o):this.points[o.id])}return a},getChildren:function(e,t){for(var n=this.trees[t+1].points[e],r=this.options.radius/(this.options.extent*Math.pow(2,t)),a=this.trees[t+1].within(n.x,n.y,r),i=[],o=0;o<a.length;o++){var s=this.trees[t+1].points[a[o]];s.parentId===e&&i.push(s.numPoints?ue(s):this.points[s.id])}return i},getLeaves:function(e,t,n,r){n=n||10,r=r||0;var a=[];return this._appendLeaves(a,e,t,n,r,0),a},getTile:function(e,t,n){var r=this.trees[this._limitZoom(e)],a=Math.pow(2,e),i=this.options.extent,o=this.options.radius/i,s=(n-o)/a,l=(n+1+o)/a,u={features:[]};return this._addTileFeatures(r.range((t-o)/a,s,(t+1+o)/a,l),r.points,t,n,a,u),0===t&&this._addTileFeatures(r.range(1-o/a,s,1,l),r.points,a,n,a,u),t===a-1&&this._addTileFeatures(r.range(0,s,o/a,l),r.points,-1,n,a,u),u.features.length?u:null},getClusterExpansionZoom:function(e,t){for(;t<this.options.maxZoom;){var n=this.getChildren(e,t);if(t++,1!==n.length)break;e=n[0].properties.cluster_id}return t},_appendLeaves:function(e,t,n,r,a,i){for(var o=this.getChildren(t,n),s=0;s<o.length;s++){var l=o[s].properties;if(l.cluster?i+l.point_count<=a?i+=l.point_count:i=this._appendLeaves(e,l.cluster_id,n+1,r,a,i):i<a?i++:e.push(o[s]),e.length===r)break}return i},_addTileFeatures:function(e,t,n,r,a,i){for(var o=0;o<e.length;o++){var s=t[e[o]];i.features.push({type:1,geometry:[[Math.round(this.options.extent*(s.x*a-n)),Math.round(this.options.extent*(s.y*a-r))]],tags:s.numPoints?ce(s):this.points[s.id].properties})}},_limitZoom:function(e){return Math.max(this.options.minZoom,Math.min(e,this.options.maxZoom+1))},_cluster:function(e,t){for(var n=[],r=this.options.radius/(this.options.extent*Math.pow(2,t)),a=0;a<e.length;a++){var i=e[a];if(!(i.zoom<=t)){i.zoom=t;var o=this.trees[t+1],s=o.within(i.x,i.y,r),l=i.numPoints||1,u=i.x*l,c=i.y*l,f=null;this.options.reduce&&(f=this.options.initial(),this._accumulate(f,i));for(var d=0;d<s.length;d++){var p=o.points[s[d]];if(t<p.zoom){var h=p.numPoints||1;p.zoom=t,u+=p.x*h,c+=p.y*h,l+=h,p.parentId=a,this.options.reduce&&this._accumulate(f,p)}}1===l?n.push(i):(i.parentId=a,n.push(se(u/l,c/l,l,a,f)))}}return n},_accumulate:function(e,t){var n=t.numPoints?t.properties:this.options.map(this.points[t.id].properties);this.options.reduce(e,n)}},Be.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,debug:0},Be.prototype.splitTile=function(e,t,n,r,a,i,o){for(var s=[e,t,n,r],l=this.options,u=l.debug;s.length;){r=s.pop(),n=s.pop(),t=s.pop(),e=s.pop();var c=1<<t,f=Ve(t,n,r),d=this.tiles[f];if(!d&&(u>1&&console.time("creation"),d=this.tiles[f]=je(e,t,n,r,l),this.tileCoords.push({z:t,x:n,y:r}),u)){u>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,n,r,d.numFeatures,d.numPoints,d.numSimplified),console.timeEnd("creation"));var p="z"+t;this.stats[p]=(this.stats[p]||0)+1,this.total++}if(d.source=e,a){if(t===l.maxZoom||t===a)continue;var h=1<<a-t;if(n!==Math.floor(i/h)||r!==Math.floor(o/h))continue}else if(t===l.indexMaxZoom||d.numPoints<=l.indexMaxPoints)continue;if(d.source=null,0!==e.length){u>1&&console.time("clipping");var m,v,g,y,b,x,_=.5*l.buffer/l.extent,w=.5-_,T=.5+_,k=1+_;m=v=g=y=null,b=Ce(e,c,n-_,n+T,0,d.minX,d.maxX,l),x=Ce(e,c,n+w,n+k,0,d.minX,d.maxX,l),e=null,b&&(m=Ce(b,c,r-_,r+T,1,d.minY,d.maxY,l),v=Ce(b,c,r+w,r+k,1,d.minY,d.maxY,l),b=null),x&&(g=Ce(x,c,r-_,r+T,1,d.minY,d.maxY,l),y=Ce(x,c,r+w,r+k,1,d.minY,d.maxY,l),x=null),u>1&&console.timeEnd("clipping"),s.push(m||[],t+1,2*n,2*r),s.push(v||[],t+1,2*n,2*r+1),s.push(g||[],t+1,2*n+1,2*r),s.push(y||[],t+1,2*n+1,2*r+1)}}},Be.prototype.getTile=function(e,t,n){var r=this.options,a=r.extent,i=r.debug;if(e<0||e>24)return null;var o=1<<e,s=Ve(e,t=(t%o+o)%o,n);if(this.tiles[s])return Ie(this.tiles[s],a);i>1&&console.log("drilling down to z%d-%d-%d",e,t,n);for(var l,u=e,c=t,f=n;!l&&u>0;)u--,c=Math.floor(c/2),f=Math.floor(f/2),l=this.tiles[Ve(u,c,f)];return l&&l.source?(i>1&&console.log("found parent tile z%d-%d-%d",u,c,f),i>1&&console.time("drilling down"),this.splitTile(l.source,u,c,f,e,t,n),i>1&&console.timeEnd("drilling down"),this.tiles[s]?Ie(this.tiles[s],a):null):null};var Ge=function(t){function n(e,n,r){t.call(this,e,n,Ue),r&&(this.loadGeoJSON=r)}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.loadData=function(e,t){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=t,this._pendingLoadDataParams=e,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},n.prototype._loadData=function(){var e=this;if(this._pendingCallback&&this._pendingLoadDataParams){var t=this._pendingCallback,n=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams,this.loadGeoJSON(n,function(r,a){if(r||!a)return t(r);if("object"!=typeof a)return t(new Error("Input data is not a valid GeoJSON object."));!function e(t,n){switch(t&&t.type||null){case"FeatureCollection":return t.features=t.features.map(P(e,n)),t;case"Feature":return t.geometry=e(t.geometry,n),t;case"Polygon":case"MultiPolygon":return function(e,t){return"Polygon"===e.type?e.coordinates=R(e.coordinates,t):"MultiPolygon"===e.type&&(e.coordinates=e.coordinates.map(P(R,t))),e}(t,n);default:return t}}(a,!0);try{e._geoJSONIndex=n.cluster?function(e){return new oe(e)}(n.superclusterOptions).load(a.features):function(e,t){return new Be(e,t)}(a,n.geojsonVtOptions)}catch(r){return t(r)}e.loaded={};var i={};if(n.request&&n.request.collectResourceTiming){var o=w(n.request.url);o&&(i.resourceTiming={},i.resourceTiming[n.source]=JSON.parse(JSON.stringify(o)))}t(null,i)})}},n.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},n.prototype.reloadTile=function(e,n){var r=this.loaded,a=e.uid;return r&&r[a]?t.prototype.reloadTile.call(this,e,n):this.loadTile(e,n)},n.prototype.loadGeoJSON=function(t,n){if(t.request)e.getJSON(t.request,n);else{if("string"!=typeof t.data)return n(new Error("Input data is not a valid GeoJSON object."));try{return n(null,JSON.parse(t.data))}catch(e){return n(new Error("Input data is not a valid GeoJSON object."))}}},n.prototype.removeSource=function(e,t){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),t()},n}(k),He=function(t){var n=this;this.self=t,this.actor=new e.default$7(t,this),this.layerIndexes={},this.workerSourceTypes={vector:k,geojson:Ge},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(e,t){if(n.workerSourceTypes[e])throw new Error('Worker source with name "'+e+'" already registered.');n.workerSourceTypes[e]=t},this.self.registerRTLTextPlugin=function(t){if(e.plugin.isLoaded())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=t.applyArabicShaping,e.plugin.processBidirectionalText=t.processBidirectionalText}};return He.prototype.setLayers=function(e,t,n){this.getLayerIndex(e).replace(t),n()},He.prototype.updateLayers=function(e,t,n){this.getLayerIndex(e).update(t.layers,t.removedIds),n()},He.prototype.loadTile=function(e,t,n){this.getWorkerSource(e,t.type,t.source).loadTile(t,n)},He.prototype.loadDEMTile=function(e,t,n){this.getDEMWorkerSource(e,t.source).loadTile(t,n)},He.prototype.reloadTile=function(e,t,n){this.getWorkerSource(e,t.type,t.source).reloadTile(t,n)},He.prototype.abortTile=function(e,t,n){this.getWorkerSource(e,t.type,t.source).abortTile(t,n)},He.prototype.removeTile=function(e,t,n){this.getWorkerSource(e,t.type,t.source).removeTile(t,n)},He.prototype.removeDEMTile=function(e,t){this.getDEMWorkerSource(e,t.source).removeTile(t)},He.prototype.removeSource=function(e,t,n){if(this.workerSources[e]&&this.workerSources[e][t.type]&&this.workerSources[e][t.type][t.source]){var r=this.workerSources[e][t.type][t.source];delete this.workerSources[e][t.type][t.source],void 0!==r.removeSource?r.removeSource(t,n):n()}},He.prototype.loadWorkerSource=function(e,t,n){try{this.self.importScripts(t.url),n()}catch(e){n(e.toString())}},He.prototype.loadRTLTextPlugin=function(t,n,r){try{e.plugin.isLoaded()||(this.self.importScripts(n),r(e.plugin.isLoaded()?null:new Error("RTL Text Plugin failed to import scripts from "+n)))}catch(e){r(e.toString())}},He.prototype.getLayerIndex=function(e){var t=this.layerIndexes[e];return t||(t=this.layerIndexes[e]=new r),t},He.prototype.getWorkerSource=function(e,t,n){var r=this;if(this.workerSources[e]||(this.workerSources[e]={}),this.workerSources[e][t]||(this.workerSources[e][t]={}),!this.workerSources[e][t][n]){var a={send:function(t,n,a){r.actor.send(t,n,a,e)}};this.workerSources[e][t][n]=new this.workerSourceTypes[t](a,this.getLayerIndex(e))}return this.workerSources[e][t][n]},He.prototype.getDEMWorkerSource=function(e,t){return this.demWorkerSources[e]||(this.demWorkerSources[e]={}),this.demWorkerSources[e][t]||(this.demWorkerSources[e][t]=new C),this.demWorkerSources[e][t]},"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&new He(self),He}),a(0,function(e){var t=e.createCommonjsModule(function(e){function t(e){return!!("undefined"!=typeof window&&"undefined"!=typeof document&&Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray&&Function.prototype&&Function.prototype.bind&&Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions&&"JSON"in window&&"parse"in JSON&&"stringify"in JSON&&function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var e,t,n=new Blob([""],{type:"text/javascript"}),r=URL.createObjectURL(n);try{t=new Worker(r),e=!0}catch(t){e=!1}return t&&t.terminate(),URL.revokeObjectURL(r),e}()&&"Uint8ClampedArray"in window&&function(e){return void 0===n[e]&&(n[e]=function(e){var n=document.createElement("canvas"),r=Object.create(t.webGLContextAttributes);return r.failIfMajorPerformanceCaveat=e,n.probablySupportsContext?n.probablySupportsContext("webgl",r)||n.probablySupportsContext("experimental-webgl",r):n.supportsContext?n.supportsContext("webgl",r)||n.supportsContext("experimental-webgl",r):n.getContext("webgl",r)||n.getContext("experimental-webgl",r)}(e)),n[e]}(e&&e.failIfMajorPerformanceCaveat))}e.exports?e.exports=t:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=t);var n={};t.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),n=e.default.performance&&e.default.performance.now?e.default.performance.now.bind(e.default.performance):Date.now.bind(Date),r=e.default.requestAnimationFrame||e.default.mozRequestAnimationFrame||e.default.webkitRequestAnimationFrame||e.default.msRequestAnimationFrame,a=e.default.cancelAnimationFrame||e.default.mozCancelAnimationFrame||e.default.webkitCancelAnimationFrame||e.default.msCancelAnimationFrame,i={now:n,frame:function(e){return r(e)},cancelFrame:function(e){return a(e)},getImageData:function(t){var n=e.default.document.createElement("canvas"),r=n.getContext("2d");if(!r)throw new Error("failed to create canvas 2d context");return n.width=t.width,n.height=t.height,r.drawImage(t,0,0,t.width,t.height),r.getImageData(0,0,t.width,t.height)},hardwareConcurrency:e.default.navigator.hardwareConcurrency||4,get devicePixelRatio(){return e.default.devicePixelRatio},supportsWebp:!1};if(e.default.document){var o=e.default.document.createElement("img");o.onload=function(){i.supportsWebp=!0},o.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="}var s={create:function(t,n,r){var a=e.default.document.createElement(t);return n&&(a.className=n),r&&r.appendChild(a),a},createNS:function(t,n){return e.default.document.createElementNS(t,n)}},l=e.default.document?e.default.document.documentElement.style:null;function u(e){if(!l)return null;for(var t=0;t<e.length;t++)if(e[t]in l)return e[t];return e[0]}var c,f=u(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);s.disableDrag=function(){l&&f&&(c=l[f],l[f]="none")},s.enableDrag=function(){l&&f&&(l[f]=c)};var d=u(["transform","WebkitTransform"]);s.setTransform=function(e,t){e.style[d]=t};var p=!1;try{var h=Object.defineProperty({},"passive",{get:function(){p=!0}});e.default.addEventListener("test",h,h),e.default.removeEventListener("test",h,h)}catch(e){p=!1}s.addEventListener=function(e,t,n,r){void 0===r&&(r={}),"passive"in r&&p?e.addEventListener(t,n,r):e.addEventListener(t,n,r.capture)},s.removeEventListener=function(e,t,n,r){void 0===r&&(r={}),"passive"in r&&p?e.removeEventListener(t,n,r):e.removeEventListener(t,n,r.capture)};var m=function(t){t.preventDefault(),t.stopPropagation(),e.default.removeEventListener("click",m,!0)};s.suppressClick=function(){e.default.addEventListener("click",m,!0),e.default.setTimeout(function(){e.default.removeEventListener("click",m,!0)},0)},s.mousePos=function(t,n){var r=t.getBoundingClientRect();return n=n.touches?n.touches[0]:n,new e.default$1(n.clientX-r.left-t.clientLeft,n.clientY-r.top-t.clientTop)},s.touchPos=function(t,n){for(var r=t.getBoundingClientRect(),a=[],i="touchend"===n.type?n.changedTouches:n.touches,o=0;o<i.length;o++)a.push(new e.default$1(i[o].clientX-r.left-t.clientLeft,i[o].clientY-r.top-t.clientTop));return a},s.mouseButton=function(t){return void 0!==e.default.InstallTrigger&&2===t.button&&t.ctrlKey&&e.default.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:t.button},s.remove=function(e){e.parentNode&&e.parentNode.removeChild(e)};var v={API_URL:"https://api.mapbox.com",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null},g="See https://www.mapbox.com/api-documentation/#access-tokens";function y(e,t){var n=C(v.API_URL);if(e.protocol=n.protocol,e.authority=n.authority,"/"!==n.path&&(e.path=""+n.path+e.path),!v.REQUIRE_ACCESS_TOKEN)return E(e);if(!(t=t||v.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+g);if("s"===t[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+g);return e.params.push("access_token="+t),E(e)}function b(e){return 0===e.indexOf("mapbox:")}var x=function(e,t){if(!b(e))return e;var n=C(e);return n.path="/v4/"+n.authority+".json",n.params.push("secure"),y(n,t)},_=function(e,t,n,r){var a=C(e);return b(e)?(a.path="/styles/v1"+a.path+"/sprite"+t+n,y(a,r)):(a.path+=""+t+n,E(a))},w=/(\.(png|jpg)\d*)(?=$)/,T=function(e,t,n){if(!t||!b(t))return e;var r=C(e),a=i.devicePixelRatio>=2||512===n?"@2x":"",o=i.supportsWebp?".webp":"$1";return r.path=r.path.replace(w,""+a+o),function(e){for(var t=0;t<e.length;t++)0===e[t].indexOf("access_token=tk.")&&(e[t]="access_token="+(v.ACCESS_TOKEN||""))}(r.params),E(r)},k=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function C(e){var t=e.match(k);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function E(e){var t=e.params.length?"?"+e.params.join("&"):"";return e.protocol+"://"+e.authority+e.path+t}var M=e.default.HTMLImageElement,A=e.default.HTMLCanvasElement,S=e.default.HTMLVideoElement,O=e.default.ImageData,P=function(e,t,n,r){this.context=e,this.format=n,this.texture=e.gl.createTexture(),this.update(t,r)};P.prototype.update=function(e,t){var n=e.width,r=e.height,a=!this.size||this.size[0]!==n||this.size[1]!==r,i=this.context,o=i.gl;this.useMipmap=Boolean(t&&t.useMipmap),o.bindTexture(o.TEXTURE_2D,this.texture),a?(this.size=[n,r],i.pixelStoreUnpack.set(1),this.format!==o.RGBA||t&&!1===t.premultiply||i.pixelStoreUnpackPremultiplyAlpha.set(!0),e instanceof M||e instanceof A||e instanceof S||e instanceof O?o.texImage2D(o.TEXTURE_2D,0,this.format,this.format,o.UNSIGNED_BYTE,e):o.texImage2D(o.TEXTURE_2D,0,this.format,n,r,0,this.format,o.UNSIGNED_BYTE,e.data)):e instanceof M||e instanceof A||e instanceof S||e instanceof O?o.texSubImage2D(o.TEXTURE_2D,0,0,0,o.RGBA,o.UNSIGNED_BYTE,e):o.texSubImage2D(o.TEXTURE_2D,0,0,0,n,r,o.RGBA,o.UNSIGNED_BYTE,e.data),this.useMipmap&&this.isSizePowerOfTwo()&&o.generateMipmap(o.TEXTURE_2D)},P.prototype.bind=function(e,t,n){var r=this.context.gl;r.bindTexture(r.TEXTURE_2D,this.texture),n!==r.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(n=r.LINEAR),e!==this.filter&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,n||e),this.filter=e),t!==this.wrap&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,t),this.wrap=t)},P.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},P.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var R=function(){this.images={},this.loaded=!1,this.requestors=[],this.shelfPack=new e.default$2(64,64,{autoResize:!0}),this.patterns={},this.atlasImage=new e.RGBAImage({width:64,height:64}),this.dirty=!0};R.prototype.isLoaded=function(){return this.loaded},R.prototype.setLoaded=function(e){if(this.loaded!==e&&(this.loaded=e,e)){for(var t=0,n=this.requestors;t<n.length;t+=1){var r=n[t],a=r.ids,i=r.callback;this._notify(a,i)}this.requestors=[]}},R.prototype.getImage=function(e){return this.images[e]},R.prototype.addImage=function(e,t){this.images[e]=t},R.prototype.removeImage=function(e){delete this.images[e];var t=this.patterns[e];t&&(this.shelfPack.unref(t.bin),delete this.patterns[e])},R.prototype.getImages=function(e,t){var n=!0;if(!this.isLoaded())for(var r=0,a=e;r<a.length;r+=1){var i=a[r];this.images[i]||(n=!1)}this.isLoaded()||n?this._notify(e,t):this.requestors.push({ids:e,callback:t})},R.prototype._notify=function(e,t){for(var n={},r=0,a=e;r<a.length;r+=1){var i=a[r],o=this.images[i];o&&(n[i]={data:o.data.clone(),pixelRatio:o.pixelRatio,sdf:o.sdf})}t(null,n)},R.prototype.getPixelSize=function(){return{width:this.shelfPack.w,height:this.shelfPack.h}},R.prototype.getPattern=function(t){var n=this.patterns[t];if(n)return n.position;var r=this.getImage(t);if(!r)return null;var a=r.data.width+2,i=r.data.height+2,o=this.shelfPack.packOne(a,i);if(!o)return null;this.atlasImage.resize(this.getPixelSize());var s=r.data,l=this.atlasImage,u=o.x+1,c=o.y+1,f=s.width,d=s.height;e.RGBAImage.copy(s,l,{x:0,y:0},{x:u,y:c},{width:f,height:d}),e.RGBAImage.copy(s,l,{x:0,y:d-1},{x:u,y:c-1},{width:f,height:1}),e.RGBAImage.copy(s,l,{x:0,y:0},{x:u,y:c+d},{width:f,height:1}),e.RGBAImage.copy(s,l,{x:f-1,y:0},{x:u-1,y:c},{width:1,height:d}),e.RGBAImage.copy(s,l,{x:0,y:0},{x:u+f,y:c},{width:1,height:d}),this.dirty=!0;var p=new e.ImagePosition(o,r);return this.patterns[t]={bin:o,position:p},p},R.prototype.bind=function(e){var t=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new P(e,this.atlasImage,t.RGBA),this.atlasTexture.bind(t.LINEAR,t.CLAMP_TO_EDGE)};var L=I,D=1e20;function I(e,t,n,r,a,i){this.fontSize=e||24,this.buffer=void 0===t?3:t,this.cutoff=r||.25,this.fontFamily=a||"sans-serif",this.fontWeight=i||"normal",this.radius=n||8;var o=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=o,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(o*o),this.gridInner=new Float64Array(o*o),this.f=new Float64Array(o),this.d=new Float64Array(o),this.z=new Float64Array(o+1),this.v=new Int16Array(o),this.middle=Math.round(o/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function z(e,t,n,r,a,i,o){for(var s=0;s<t;s++){for(var l=0;l<n;l++)r[l]=e[l*t+s];for(j(r,a,i,o,n),l=0;l<n;l++)e[l*t+s]=a[l]}for(l=0;l<n;l++){for(s=0;s<t;s++)r[s]=e[l*t+s];for(j(r,a,i,o,t),s=0;s<t;s++)e[l*t+s]=Math.sqrt(a[s])}}function j(e,t,n,r,a){n[0]=0,r[0]=-D,r[1]=+D;for(var i=1,o=0;i<a;i++){for(var s=(e[i]+i*i-(e[n[o]]+n[o]*n[o]))/(2*i-2*n[o]);s<=r[o];)o--,s=(e[i]+i*i-(e[n[o]]+n[o]*n[o]))/(2*i-2*n[o]);n[++o]=i,r[o]=s,r[o+1]=+D}for(i=0,o=0;i<a;i++){for(;r[o+1]<i;)o++;t[i]=(i-n[o])*(i-n[o])+e[n[o]]}}I.prototype.draw=function(e){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(e,this.buffer,this.middle);for(var t=this.ctx.getImageData(0,0,this.size,this.size),n=new Uint8ClampedArray(this.size*this.size),r=0;r<this.size*this.size;r++){var a=t.data[4*r+3]/255;this.gridOuter[r]=1===a?0:0===a?D:Math.pow(Math.max(0,.5-a),2),this.gridInner[r]=1===a?D:0===a?0:Math.pow(Math.max(0,a-.5),2)}for(z(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),z(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),r=0;r<this.size*this.size;r++){var i=this.gridOuter[r]-this.gridInner[r];n[r]=Math.max(0,Math.min(255,Math.round(255-255*(i/this.radius+this.cutoff))))}return n};var N=function(e,t){this.requestTransform=e,this.localIdeographFontFamily=t,this.entries={}};N.prototype.setURL=function(e){this.url=e},N.prototype.getGlyphs=function(t,n){var r=this,a=[];for(var i in t)for(var o=0,s=t[i];o<s.length;o+=1){var l=s[o];a.push({stack:i,id:l})}e.asyncAll(a,function(e,t){var n=e.stack,a=e.id,i=r.entries[n];i||(i=r.entries[n]={glyphs:{},requests:{}});var o=i.glyphs[a];if(void 0===o)if(o=r._tinySDF(i,n,a))t(null,{stack:n,id:a,glyph:o});else{var s=Math.floor(a/256);if(256*s>65535)t(new Error("glyphs > 65535 not supported"));else{var l=i.requests[s];l||(l=i.requests[s]=[],N.loadGlyphRange(n,s,r.url,r.requestTransform,function(e,t){if(t)for(var n in t)i.glyphs[+n]=t[+n];for(var r=0,a=l;r<a.length;r+=1)(0,a[r])(e,t);delete i.requests[s]})),l.push(function(e,r){e?t(e):r&&t(null,{stack:n,id:a,glyph:r[a]||null})})}}else t(null,{stack:n,id:a,glyph:o})},function(e,t){if(e)n(e);else if(t){for(var r={},a=0,i=t;a<i.length;a+=1){var o=i[a],s=o.stack,l=o.id,u=o.glyph;(r[s]||(r[s]={}))[l]=u&&{id:u.id,bitmap:u.bitmap.clone(),metrics:u.metrics}}n(null,r)}})},N.prototype._tinySDF=function(t,n,r){var a=this.localIdeographFontFamily;if(a&&(e.default$4["CJK Unified Ideographs"](r)||e.default$4["Hangul Syllables"](r))){var i=t.tinySDF;if(!i){var o="400";/bold/i.test(n)?o="900":/medium/i.test(n)?o="500":/light/i.test(n)&&(o="200"),i=t.tinySDF=new N.TinySDF(24,3,8,.25,a,o)}return{id:r,bitmap:new e.AlphaImage({width:30,height:30},i.draw(String.fromCharCode(r))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},N.loadGlyphRange=function(t,n,r,a,i){var o=256*n,s=o+255,l=a(function(e,t){if(!b(e))return e;var n=C(e);return n.path="/fonts/v1"+n.path,y(n,t)}(r).replace("{fontstack}",t).replace("{range}",o+"-"+s),e.ResourceType.Glyphs);e.getArrayBuffer(l,function(t,n){if(t)i(t);else if(n){for(var r={},a=0,o=e.default$3(n.data);a<o.length;a+=1){var s=o[a];r[s.id]=s}i(null,r)}})},N.TinySDF=L;var F=function(){this.specification=e.default$5.light.position};F.prototype.possiblyEvaluate=function(t,n){return e.sphericalToCartesian(t.expression.evaluate(n))},F.prototype.interpolate=function(t,n,r){return{x:e.number(t.x,n.x,r),y:e.number(t.y,n.y,r),z:e.number(t.z,n.z,r)}};var B=new e.Properties({anchor:new e.DataConstantProperty(e.default$5.light.anchor),position:new F,color:new e.DataConstantProperty(e.default$5.light.color),intensity:new e.DataConstantProperty(e.default$5.light.intensity)}),V=function(t){function n(n){t.call(this),this._transitionable=new e.Transitionable(B),this.setLight(n),this._transitioning=this._transitionable.untransitioned()}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.getLight=function(){return this._transitionable.serialize()},n.prototype.setLight=function(t){if(!this._validate(e.validateLight,t))for(var n in t){var r=t[n];e.endsWith(n,"-transition")?this._transitionable.setTransition(n.slice(0,-"-transition".length),r):this._transitionable.setValue(n,r)}},n.prototype.updateTransitions=function(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)},n.prototype.hasTransition=function(){return this._transitioning.hasTransition()},n.prototype.recalculate=function(e){this.properties=this._transitioning.possiblyEvaluate(e)},n.prototype._validate=function(t,n){return e.emitValidationErrors(this,t.call(e.validateStyle,e.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:e.default$5})))},n}(e.Evented),U=function(e,t){this.width=e,this.height=t,this.nextRow=0,this.bytes=4,this.data=new Uint8Array(this.width*this.height*this.bytes),this.positions={}};U.prototype.getDash=function(e,t){var n=e.join(",")+String(t);return this.positions[n]||(this.positions[n]=this.addDash(e,t)),this.positions[n]},U.prototype.addDash=function(t,n){var r=n?7:0,a=2*r+1;if(this.nextRow+a>this.height)return e.warnOnce("LineAtlas out of space"),null;for(var i=0,o=0;o<t.length;o++)i+=t[o];for(var s=this.width/i,l=s/2,u=t.length%2==1,c=-r;c<=r;c++)for(var f=this.nextRow+r+c,d=this.width*f,p=u?-t[t.length-1]:0,h=t[0],m=1,v=0;v<this.width;v++){for(;h<v/s;)p=h,h+=t[m],u&&m===t.length-1&&(h+=t[0]),m++;var g=Math.abs(v-p*s),y=Math.abs(v-h*s),b=Math.min(g,y),x=m%2==1,_=void 0;if(n){var w=r?c/r*(l+1):0;if(x){var T=l-Math.abs(w);_=Math.sqrt(b*b+T*T)}else _=l-Math.sqrt(b*b+w*w)}else _=(x?1:-1)*b;this.data[3+4*(d+v)]=Math.max(0,Math.min(255,_+128))}var k={y:(this.nextRow+r+.5)/this.height,height:2*r/this.height,width:i};return this.nextRow+=a,this.dirty=!0,k},U.prototype.bind=function(e){var t=e.gl;this.texture?(t.bindTexture(t.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.width,this.height,t.RGBA,t.UNSIGNED_BYTE,this.data))):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.width,this.height,0,t.RGBA,t.UNSIGNED_BYTE,this.data))};var G=function t(n,r){this.workerPool=n,this.actors=[],this.currentActor=0,this.id=e.uniqueId();for(var a=this.workerPool.acquire(this.id),i=0;i<a.length;i++){var o=a[i],s=new t.Actor(o,r,this.id);s.name="Worker "+i,this.actors.push(s)}};function H(t,n,r){var a=function(t,n){if(t)return r(t);if(n){var a=e.pick(n,["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds"]);n.vector_layers&&(a.vectorLayers=n.vector_layers,a.vectorLayerIds=a.vectorLayers.map(function(e){return e.id})),r(null,a)}};t.url?e.getJSON(n(x(t.url),e.ResourceType.Source),a):i.frame(function(){return a(null,t)})}G.prototype.broadcast=function(t,n,r){r=r||function(){},e.asyncAll(this.actors,function(e,r){e.send(t,n,r)},r)},G.prototype.send=function(e,t,n,r){return("number"!=typeof r||isNaN(r))&&(r=this.currentActor=(this.currentActor+1)%this.actors.length),this.actors[r].send(e,t,n),r},G.prototype.remove=function(){this.actors.forEach(function(e){e.remove()}),this.actors=[],this.workerPool.release(this.id)},G.Actor=e.default$7;var W=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid LngLat object: ("+e+", "+t+")");if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};W.prototype.wrap=function(){return new W(e.wrap(this.lng,-180,180),this.lat)},W.prototype.toArray=function(){return[this.lng,this.lat]},W.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},W.prototype.toBounds=function(e){var t=360*e/40075017,n=t/Math.cos(Math.PI/180*this.lat);return new q(new W(this.lng-n,this.lat-t),new W(this.lng+n,this.lat+t))},W.convert=function(e){if(e instanceof W)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new W(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==typeof e&&null!==e)return new W(Number(e.lng),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var q=function(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))};q.prototype.setNorthEast=function(e){return this._ne=e instanceof W?new W(e.lng,e.lat):W.convert(e),this},q.prototype.setSouthWest=function(e){return this._sw=e instanceof W?new W(e.lng,e.lat):W.convert(e),this},q.prototype.extend=function(e){var t,n,r=this._sw,a=this._ne;if(e instanceof W)t=e,n=e;else{if(!(e instanceof q))return Array.isArray(e)?e.every(Array.isArray)?this.extend(q.convert(e)):this.extend(W.convert(e)):this;if(t=e._sw,n=e._ne,!t||!n)return this}return r||a?(r.lng=Math.min(t.lng,r.lng),r.lat=Math.min(t.lat,r.lat),a.lng=Math.max(n.lng,a.lng),a.lat=Math.max(n.lat,a.lat)):(this._sw=new W(t.lng,t.lat),this._ne=new W(n.lng,n.lat)),this},q.prototype.getCenter=function(){return new W((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},q.prototype.getSouthWest=function(){return this._sw},q.prototype.getNorthEast=function(){return this._ne},q.prototype.getNorthWest=function(){return new W(this.getWest(),this.getNorth())},q.prototype.getSouthEast=function(){return new W(this.getEast(),this.getSouth())},q.prototype.getWest=function(){return this._sw.lng},q.prototype.getSouth=function(){return this._sw.lat},q.prototype.getEast=function(){return this._ne.lng},q.prototype.getNorth=function(){return this._ne.lat},q.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},q.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},q.prototype.isEmpty=function(){return!(this._sw&&this._ne)},q.convert=function(e){return!e||e instanceof q?e:new q(e)};var Y=function(e,t,n){this.bounds=q.convert(this.validateBounds(e)),this.minzoom=t||0,this.maxzoom=n||24};Y.prototype.validateBounds=function(e){return Array.isArray(e)&&4===e.length?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]},Y.prototype.contains=function(e){var t=Math.floor(this.lngX(this.bounds.getWest(),e.z)),n=Math.floor(this.latY(this.bounds.getNorth(),e.z)),r=Math.ceil(this.lngX(this.bounds.getEast(),e.z)),a=Math.ceil(this.latY(this.bounds.getSouth(),e.z));return e.x>=t&&e.x<r&&e.y>=n&&e.y<a},Y.prototype.lngX=function(e,t){return(e+180)*(Math.pow(2,t)/360)},Y.prototype.latY=function(t,n){var r=e.clamp(Math.sin(Math.PI/180*t),-.9999,.9999),a=Math.pow(2,n)/(2*Math.PI);return Math.pow(2,n-1)+.5*Math.log((1+r)/(1-r))*-a};var X=function(t){function n(n,r,a,i){if(t.call(this),this.id=n,this.dispatcher=a,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,e.extend(this,e.pick(r,["url","scheme","tileSize"])),this._options=e.extend({type:"vector"},r),this._collectResourceTiming=r.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(i)}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.load=function(){var t=this;this.fire(new e.Event("dataloading",{dataType:"source"})),H(this._options,this.map._transformRequest,function(n,r){n?t.fire(new e.ErrorEvent(n)):r&&(e.extend(t,r),r.bounds&&(t.tileBounds=new Y(r.bounds,t.minzoom,t.maxzoom)),t.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),t.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))})},n.prototype.hasTile=function(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)},n.prototype.onAdd=function(e){this.map=e,this.load()},n.prototype.serialize=function(){return e.extend({},this._options)},n.prototype.loadTile=function(t,n){var r=T(t.tileID.canonical.url(this.tiles,this.scheme),this.url),a={request:this.map._transformRequest(r,e.ResourceType.Tile),uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:i.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes};function o(e,r){return t.aborted?n(null):e?n(e):(r&&r.resourceTiming&&(t.resourceTiming=r.resourceTiming),this.map._refreshExpiredTiles&&t.setExpiryData(r),t.loadVectorData(r,this.map.painter),n(null),void(t.reloadCallback&&(this.loadTile(t,t.reloadCallback),t.reloadCallback=null)))}a.request.collectResourceTiming=this._collectResourceTiming,void 0===t.workerID||"expired"===t.state?t.workerID=this.dispatcher.send("loadTile",a,o.bind(this)):"loading"===t.state?t.reloadCallback=n:this.dispatcher.send("reloadTile",a,o.bind(this),t.workerID)},n.prototype.abortTile=function(e){this.dispatcher.send("abortTile",{uid:e.uid,type:this.type,source:this.id},void 0,e.workerID)},n.prototype.unloadTile=function(e){e.unloadVectorData(),this.dispatcher.send("removeTile",{uid:e.uid,type:this.type,source:this.id},void 0,e.workerID)},n.prototype.hasTransition=function(){return!1},n}(e.Evented),Z=function(t){function n(n,r,a,i){t.call(this),this.id=n,this.dispatcher=a,this.setEventedParent(i),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=e.extend({},r),e.extend(this,e.pick(r,["url","scheme","tileSize"]))}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.load=function(){var t=this;this.fire(new e.Event("dataloading",{dataType:"source"})),H(this._options,this.map._transformRequest,function(n,r){n?t.fire(new e.ErrorEvent(n)):r&&(e.extend(t,r),r.bounds&&(t.tileBounds=new Y(r.bounds,t.minzoom,t.maxzoom)),t.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),t.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))})},n.prototype.onAdd=function(e){this.map=e,this.load()},n.prototype.serialize=function(){return e.extend({},this._options)},n.prototype.hasTile=function(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)},n.prototype.loadTile=function(t,n){var r=this,a=T(t.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);t.request=e.getImage(this.map._transformRequest(a,e.ResourceType.Tile),function(e,a){if(delete t.request,t.aborted)t.state="unloaded",n(null);else if(e)t.state="errored",n(e);else if(a){r.map._refreshExpiredTiles&&t.setExpiryData(a),delete a.cacheControl,delete a.expires;var i=r.map.painter.context,o=i.gl;t.texture=r.map.painter.getTileTexture(a.width),t.texture?t.texture.update(a,{useMipmap:!0}):(t.texture=new P(i,a,o.RGBA,{useMipmap:!0}),t.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),i.extTextureFilterAnisotropic&&o.texParameterf(o.TEXTURE_2D,i.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,i.extTextureFilterAnisotropicMax)),t.state="loaded",n(null)}})},n.prototype.abortTile=function(e,t){e.request&&(e.request.abort(),delete e.request),t()},n.prototype.unloadTile=function(e,t){e.texture&&this.map.painter.saveTileTexture(e.texture),t()},n.prototype.hasTransition=function(){return!1},n}(e.Evented),$=function(t){function n(n,r,a,i){t.call(this,n,r,a,i),this.type="raster-dem",this.maxzoom=22,this._options=e.extend({},r),this.encoding=r.encoding||"mapbox"}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},n.prototype.loadTile=function(t,n){var r=T(t.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);t.request=e.getImage(this.map._transformRequest(r,e.ResourceType.Tile),function(e,r){if(delete t.request,t.aborted)t.state="unloaded",n(null);else if(e)t.state="errored",n(e);else if(r){this.map._refreshExpiredTiles&&t.setExpiryData(r),delete r.cacheControl,delete r.expires;var a=i.getImageData(r),o={uid:t.uid,coord:t.tileID,source:this.id,rawImageData:a,encoding:this.encoding};t.workerID&&"expired"!==t.state||(t.workerID=this.dispatcher.send("loadDEMTile",o,function(e,r){e&&(t.state="errored",n(e)),r&&(t.dem=r,t.needsHillshadePrepare=!0,t.state="loaded",n(null))}.bind(this)))}}.bind(this)),t.neighboringTiles=this._getNeighboringTiles(t.tileID)},n.prototype._getNeighboringTiles=function(t){var n=t.canonical,r=Math.pow(2,n.z),a=(n.x-1+r)%r,i=0===n.x?t.wrap-1:t.wrap,o=(n.x+1+r)%r,s=n.x+1===r?t.wrap+1:t.wrap,l={};return l[new e.OverscaledTileID(t.overscaledZ,i,n.z,a,n.y).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,n.z,o,n.y).key]={backfilled:!1},n.y>0&&(l[new e.OverscaledTileID(t.overscaledZ,i,n.z,a,n.y-1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,t.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,n.z,o,n.y-1).key]={backfilled:!1}),n.y+1<r&&(l[new e.OverscaledTileID(t.overscaledZ,i,n.z,a,n.y+1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,t.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,n.z,o,n.y+1).key]={backfilled:!1}),l},n.prototype.unloadTile=function(e){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded",this.dispatcher.send("removeDEMTile",{uid:e.uid,source:this.id},void 0,e.workerID)},n}(Z),K=function(t){function n(n,r,a,i){t.call(this),this.id=n,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this.dispatcher=a,this.setEventedParent(i),this._data=r.data,this._options=e.extend({},r),this._collectResourceTiming=r.collectResourceTiming,this._resourceTiming=[],void 0!==r.maxzoom&&(this.maxzoom=r.maxzoom),r.type&&(this.type=r.type);var o=e.default$8/this.tileSize;this.workerOptions=e.extend({source:this.id,cluster:r.cluster||!1,geojsonVtOptions:{buffer:(void 0!==r.buffer?r.buffer:128)*o,tolerance:(void 0!==r.tolerance?r.tolerance:.375)*o,extent:e.default$8,maxZoom:this.maxzoom,lineMetrics:r.lineMetrics||!1},superclusterOptions:{maxZoom:void 0!==r.clusterMaxZoom?Math.min(r.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:e.default$8,radius:(r.clusterRadius||50)*o,log:!1}},r.workerOptions)}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.load=function(){var t=this;this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(n){if(n)t.fire(new e.ErrorEvent(n));else{var r={dataType:"source",sourceDataType:"metadata"};t._collectResourceTiming&&t._resourceTiming&&t._resourceTiming.length>0&&(r.resourceTiming=t._resourceTiming,t._resourceTiming=[]),t.fire(new e.Event("data",r))}})},n.prototype.onAdd=function(e){this.map=e,this.load()},n.prototype.setData=function(t){var n=this;return this._data=t,this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(t){if(t)return n.fire(new e.ErrorEvent(t));var r={dataType:"source",sourceDataType:"content"};n._collectResourceTiming&&n._resourceTiming&&n._resourceTiming.length>0&&(r.resourceTiming=n._resourceTiming,n._resourceTiming=[]),n.fire(new e.Event("data",r))}),this},n.prototype._updateWorkerData=function(t){var n,r,a=this,i=e.extend({},this.workerOptions),o=this._data;"string"==typeof o?(i.request=this.map._transformRequest((n=o,(r=e.default.document.createElement("a")).href=n,r.href),e.ResourceType.Source),i.request.collectResourceTiming=this._collectResourceTiming):i.data=JSON.stringify(o),this.workerID=this.dispatcher.send(this.type+"."+i.source+".loadData",i,function(e,n){a._removed||n&&n.abandoned||(a._loaded=!0,n&&n.resourceTiming&&n.resourceTiming[a.id]&&(a._resourceTiming=n.resourceTiming[a.id].slice(0)),a.dispatcher.send(a.type+"."+i.source+".coalesce",null,null,a.workerID),t(e))},this.workerID)},n.prototype.loadTile=function(e,t){var n=this,r=void 0===e.workerID?"loadTile":"reloadTile",a={type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:i.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes};e.workerID=this.dispatcher.send(r,a,function(a,i){return e.unloadVectorData(),e.aborted?t(null):a?t(a):(e.loadVectorData(i,n.map.painter,"reloadTile"===r),t(null))},this.workerID)},n.prototype.abortTile=function(e){e.aborted=!0},n.prototype.unloadTile=function(e){e.unloadVectorData(),this.dispatcher.send("removeTile",{uid:e.uid,type:this.type,source:this.id},null,e.workerID)},n.prototype.onRemove=function(){this._removed=!0,this.dispatcher.send("removeSource",{type:this.type,source:this.id},null,this.workerID)},n.prototype.serialize=function(){return e.extend({},this._options,{type:this.type,data:this._data})},n.prototype.hasTransition=function(){return!1},n}(e.Evented),J=e.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),Q=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};Q.prototype.bind=function(e,t,n,r,a,i,o,s){this.context=e;for(var l=this.boundPaintVertexBuffers.length!==r.length,u=0;!l&&u<r.length;u++)this.boundPaintVertexBuffers[u]!==r[u]&&(l=!0);var c=!this.vao||this.boundProgram!==t||this.boundLayoutVertexBuffer!==n||l||this.boundIndexBuffer!==a||this.boundVertexOffset!==i||this.boundDynamicVertexBuffer!==o||this.boundDynamicVertexBuffer2!==s;!e.extVertexArrayObject||c?this.freshBind(t,n,r,a,i,o,s):(e.bindVertexArrayOES.set(this.vao),o&&o.bind(),a&&a.dynamicDraw&&a.bind(),s&&s.bind())},Q.prototype.freshBind=function(e,t,n,r,a,i,o){var s,l=e.numAttributes,u=this.context,c=u.gl;if(u.extVertexArrayObject)this.vao&&this.destroy(),this.vao=u.extVertexArrayObject.createVertexArrayOES(),u.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=e,this.boundLayoutVertexBuffer=t,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=r,this.boundVertexOffset=a,this.boundDynamicVertexBuffer=i,this.boundDynamicVertexBuffer2=o;else{s=u.currentNumAttributes||0;for(var f=l;f<s;f++)c.disableVertexAttribArray(f)}t.enableAttributes(c,e);for(var d=0,p=n;d<p.length;d+=1)p[d].enableAttributes(c,e);i&&i.enableAttributes(c,e),o&&o.enableAttributes(c,e),t.bind(),t.setVertexAttribPointers(c,e,a);for(var h=0,m=n;h<m.length;h+=1){var v=m[h];v.bind(),v.setVertexAttribPointers(c,e,a)}i&&(i.bind(),i.setVertexAttribPointers(c,e,a)),r&&r.bind(),o&&(o.bind(),o.setVertexAttribPointers(c,e,a)),u.currentNumAttributes=l},Q.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var ee=function(t){function n(e,n,r,a){t.call(this),this.id=e,this.dispatcher=r,this.coordinates=n.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this.setEventedParent(a),this.options=n}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.load=function(){var t=this;this.fire(new e.Event("dataloading",{dataType:"source"})),this.url=this.options.url,e.getImage(this.map._transformRequest(this.url,e.ResourceType.Image),function(n,r){n?t.fire(new e.ErrorEvent(n)):r&&(t.image=i.getImageData(r),t._finishLoading())})},n.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})))},n.prototype.onAdd=function(e){this.map=e,this.load()},n.prototype.setCoordinates=function(t){this.coordinates=t;var n=this.map,r=t.map(function(e){return n.transform.locationCoordinate(W.convert(e)).zoomTo(0)}),a=this.centerCoord=e.getCoordinatesCenter(r);a.column=Math.floor(a.column),a.row=Math.floor(a.row),this.tileID=new e.CanonicalTileID(a.zoom,a.column,a.row),this.minzoom=this.maxzoom=a.zoom;var i=r.map(function(t){var n=t.zoomTo(a.zoom);return new e.default$1(Math.round((n.column-a.column)*e.default$8),Math.round((n.row-a.row)*e.default$8))});return this._boundsArray=new e.RasterBoundsArray,this._boundsArray.emplaceBack(i[0].x,i[0].y,0,0),this._boundsArray.emplaceBack(i[1].x,i[1].y,e.default$8,0),this._boundsArray.emplaceBack(i[3].x,i[3].y,0,e.default$8),this._boundsArray.emplaceBack(i[2].x,i[2].y,e.default$8,e.default$8),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})),this},n.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var e=this.map.painter.context,t=e.gl;for(var n in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,J.members)),this.boundsVAO||(this.boundsVAO=new Q),this.texture||(this.texture=new P(e,this.image,t.RGBA),this.texture.bind(t.LINEAR,t.CLAMP_TO_EDGE)),this.tiles){var r=this.tiles[n];"loaded"!==r.state&&(r.state="loaded",r.texture=this.texture)}}},n.prototype.loadTile=function(e,t){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={},t(null)):(e.state="errored",t(null))},n.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},n.prototype.hasTransition=function(){return!1},n}(e.Evented),te=function(t){function n(e,n,r,a){t.call(this,e,n,r,a),this.roundZoom=!0,this.type="video",this.options=n}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.load=function(){var t=this,n=this.options;this.urls=[];for(var r=0,a=n.urls;r<a.length;r+=1){var i=a[r];t.urls.push(t.map._transformRequest(i,e.ResourceType.Source).url)}e.getVideo(this.urls,function(n,r){n?t.fire(new e.ErrorEvent(n)):r&&(t.video=r,t.video.loop=!0,t.video.addEventListener("playing",function(){t.map._rerender()}),t.map&&t.video.play(),t._finishLoading())})},n.prototype.getVideo=function(){return this.video},n.prototype.onAdd=function(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},n.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var e=this.map.painter.context,t=e.gl;for(var n in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,J.members)),this.boundsVAO||(this.boundsVAO=new Q),this.texture?this.video.paused||(this.texture.bind(t.LINEAR,t.CLAMP_TO_EDGE),t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,this.video)):(this.texture=new P(e,this.video,t.RGBA),this.texture.bind(t.LINEAR,t.CLAMP_TO_EDGE)),this.tiles){var r=this.tiles[n];"loaded"!==r.state&&(r.state="loaded",r.texture=this.texture)}}},n.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},n.prototype.hasTransition=function(){return this.video&&!this.video.paused},n}(ee),ne=function(t){function n(n,r,a,i){t.call(this,n,r,a,i),r.coordinates?Array.isArray(r.coordinates)&&4===r.coordinates.length&&!r.coordinates.some(function(e){return!Array.isArray(e)||2!==e.length||e.some(function(e){return"number"!=typeof e})})||this.fire(new e.ErrorEvent(new e.default$9("sources."+n,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new e.ErrorEvent(new e.default$9("sources."+n,null,'missing required property "coordinates"'))),r.animate&&"boolean"!=typeof r.animate&&this.fire(new e.ErrorEvent(new e.default$9("sources."+n,null,'optional "animate" property must be a boolean value'))),r.canvas?"string"==typeof r.canvas||r.canvas instanceof e.default.HTMLCanvasElement||this.fire(new e.ErrorEvent(new e.default$9("sources."+n,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new e.ErrorEvent(new e.default$9("sources."+n,null,'missing required property "canvas"'))),this.options=r,this.animate=void 0===r.animate||r.animate}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.load=function(){this.canvas||(this.canvas=this.options.canvas instanceof e.default.HTMLCanvasElement?this.options.canvas:e.default.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new e.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map._rerender()},this.pause=function(){this._playing=!1},this._finishLoading())},n.prototype.getCanvas=function(){return this.canvas},n.prototype.onAdd=function(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()},n.prototype.onRemove=function(){this.pause()},n.prototype.prepare=function(){var e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var t=this.map.painter.context,n=t.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,J.members)),this.boundsVAO||(this.boundsVAO=new Q),this.texture?e?this.texture.update(this.canvas):this._playing&&(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.canvas)):(this.texture=new P(t,this.canvas,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this.tiles){var a=this.tiles[r];"loaded"!==a.state&&(a.state="loaded",a.texture=this.texture)}}},n.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},n.prototype.hasTransition=function(){return this._playing},n.prototype._hasInvalidDimensions=function(){for(var e=0,t=[this.canvas.width,this.canvas.height];e<t.length;e+=1){var n=t[e];if(isNaN(n)||n<=0)return!0}return!1},n}(ee),re={vector:X,raster:Z,"raster-dem":$,geojson:K,video:te,image:ee,canvas:ne},ae=function(t,n,r,a){var i=new re[n.type](t,n,r,a);if(i.id!==t)throw new Error("Expected Source id to be "+t+" instead of "+i.id);return e.bindAll(["load","abort","unload","serialize","prepare"],i),i};function ie(e,t,n,r,a){var i=a.maxPitchScaleFactor(),o=e.tilesIn(n,i);o.sort(oe);for(var s=[],l=0,u=o;l<u.length;l+=1){var c=u[l];s.push({wrappedTileID:c.tileID.wrapped().key,queryResults:c.tile.queryRenderedFeatures(t,c.queryGeometry,c.scale,r,a,i,e.transform.calculatePosMatrix(c.tileID.toUnwrapped()))})}return function(e){for(var t={},n={},r=0,a=e;r<a.length;r+=1){var i=a[r],o=i.queryResults,s=i.wrappedTileID,l=n[s]=n[s]||{};for(var u in o)for(var c=o[u],f=l[u]=l[u]||{},d=t[u]=t[u]||[],p=0,h=c;p<h.length;p+=1){var m=h[p];f[m.featureIndex]||(f[m.featureIndex]=!0,d.push(m.feature))}}return t}(s)}function oe(e,t){var n=e.tileID,r=t.tileID;return n.overscaledZ-r.overscaledZ||n.canonical.y-r.canonical.y||n.wrap-r.wrap||n.canonical.x-r.canonical.x}var se=function(t,n){this.tileID=t,this.uid=e.uniqueId(),this.uses=0,this.tileSize=n,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.expiredRequestCount=0,this.state="loading"};se.prototype.registerFadeDuration=function(e){var t=e+this.timeAdded;t<i.now()||this.fadeEndTime&&t<this.fadeEndTime||(this.fadeEndTime=t)},se.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},se.prototype.loadVectorData=function(t,n,r){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){if(t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(e,t){var n={};if(!t)return n;for(var r=0,a=e;r<a.length;r+=1){var i=a[r],o=i.layerIds.map(function(e){return t.getLayer(e)}).filter(Boolean);if(0!==o.length){i.layers=o;for(var s=0,l=o;s<l.length;s+=1)n[l[s].id]=i}}return n}(t.buckets,n.style),r)for(var a in this.buckets){var i=this.buckets[a];i instanceof e.default$14&&(i.justReloaded=!0)}for(var o in this.queryPadding=0,this.buckets){var s=this.buckets[o];this.queryPadding=Math.max(this.queryPadding,n.style.getLayer(s.layerIds[0]).queryRadius(s))}t.iconAtlasImage&&(this.iconAtlasImage=t.iconAtlasImage),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new e.CollisionBoxArray},se.prototype.unloadVectorData=function(){for(var e in this.buckets)this.buckets[e].destroy();this.buckets={},this.iconAtlasTexture&&this.iconAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},se.prototype.unloadDEMData=function(){this.dem=null,this.neighboringTiles=null,this.state="unloaded"},se.prototype.getBucket=function(e){return this.buckets[e.id]},se.prototype.upload=function(e){for(var t in this.buckets){var n=this.buckets[t];n.uploaded||(n.upload(e),n.uploaded=!0)}var r=e.gl;this.iconAtlasImage&&(this.iconAtlasTexture=new P(e,this.iconAtlasImage,r.RGBA),this.iconAtlasImage=null),this.glyphAtlasImage&&(this.glyphAtlasTexture=new P(e,this.glyphAtlasImage,r.ALPHA),this.glyphAtlasImage=null)},se.prototype.queryRenderedFeatures=function(e,t,n,r,a,i,o){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:t,scale:n,tileSize:this.tileSize,posMatrix:o,transform:a,params:r,queryPadding:this.queryPadding*i},e):{}},se.prototype.querySourceFeatures=function(t,n){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData){var r=this.latestFeatureIndex.loadVTLayers(),a=n?n.sourceLayer:"",i=r._geojsonTileLayer||r[a];if(i)for(var o=e.default$13(n&&n.filter),s={z:this.tileID.overscaledZ,x:this.tileID.canonical.x,y:this.tileID.canonical.y},l=0;l<i.length;l++){var u=i.feature(l);if(o(new e.default$16(this.tileID.overscaledZ),u)){var c=new e.default$12(u,s.z,s.x,s.y);c.tile=s,t.push(c)}}}},se.prototype.clearMask=function(){this.segments&&(this.segments.destroy(),delete this.segments),this.maskedBoundsBuffer&&(this.maskedBoundsBuffer.destroy(),delete this.maskedBoundsBuffer),this.maskedIndexBuffer&&(this.maskedIndexBuffer.destroy(),delete this.maskedIndexBuffer)},se.prototype.setMask=function(t,n){if(!e.default$10(this.mask,t)&&(this.mask=t,this.clearMask(),!e.default$10(t,{0:!0}))){var r=new e.RasterBoundsArray,a=new e.TriangleIndexArray;this.segments=new e.default$15,this.segments.prepareSegment(0,r,a);for(var i=Object.keys(t),o=0;o<i.length;o++){var s=t[i[o]],l=e.default$8>>s.z,u=new e.default$1(s.x*l,s.y*l),c=new e.default$1(u.x+l,u.y+l),f=this.segments.prepareSegment(4,r,a);r.emplaceBack(u.x,u.y,u.x,u.y),r.emplaceBack(c.x,u.y,c.x,u.y),r.emplaceBack(u.x,c.y,u.x,c.y),r.emplaceBack(c.x,c.y,c.x,c.y);var d=f.vertexLength;a.emplaceBack(d,d+1,d+2),a.emplaceBack(d+1,d+2,d+3),f.vertexLength+=4,f.primitiveLength+=2}this.maskedBoundsBuffer=n.createVertexBuffer(r,J.members),this.maskedIndexBuffer=n.createIndexBuffer(a)}},se.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},se.prototype.setExpiryData=function(t){var n=this.expirationTime;if(t.cacheControl){var r=e.parseCacheControl(t.cacheControl);r["max-age"]&&(this.expirationTime=Date.now()+1e3*r["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){var a=Date.now(),i=!1;if(this.expirationTime>a)i=!1;else if(n)if(this.expirationTime<n)i=!0;else{var o=this.expirationTime-n;o?this.expirationTime=a+Math.max(o,3e4):i=!0}else i=!0;i?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},se.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)};var le=function(e,t){this.max=e,this.onRemove=t,this.reset()};le.prototype.reset=function(){for(var e in this.data)for(var t=0,n=this.data[e];t<n.length;t+=1){var r=n[t];r.timeout&&clearTimeout(r.timeout),this.onRemove(r.value)}return this.data={},this.order=[],this},le.prototype.add=function(e,t,n){var r=this,a=e.wrapped().key;void 0===this.data[a]&&(this.data[a]=[]);var i={value:t,timeout:void 0};if(void 0!==n&&(i.timeout=setTimeout(function(){r.remove(e,i)},n)),this.data[a].push(i),this.order.push(a),this.order.length>this.max){var o=this._getAndRemoveByKey(this.order[0]);o&&this.onRemove(o)}return this},le.prototype.has=function(e){return e.wrapped().key in this.data},le.prototype.getAndRemove=function(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null},le.prototype._getAndRemoveByKey=function(e){var t=this.data[e].shift();return t.timeout&&clearTimeout(t.timeout),0===this.data[e].length&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),t.value},le.prototype.get=function(e){return this.has(e)?this.data[e.wrapped().key][0].value:null},le.prototype.remove=function(e,t){if(!this.has(e))return this;var n=e.wrapped().key,r=void 0===t?0:this.data[n].indexOf(t),a=this.data[n][r];return this.data[n].splice(r,1),a.timeout&&clearTimeout(a.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(a.value),this.order.splice(this.order.indexOf(n),1),this},le.prototype.setMaxSize=function(e){for(this.max=e;this.order.length>this.max;){var t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this};var ue=function(e,t,n){this.context=e;var r=e.gl;this.buffer=r.createBuffer(),this.dynamicDraw=Boolean(n),this.unbindVAO(),e.bindElementBuffer.set(this.buffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer};ue.prototype.unbindVAO=function(){this.context.extVertexArrayObject&&this.context.bindVertexArrayOES.set(null)},ue.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},ue.prototype.updateData=function(e){var t=this.context.gl;this.unbindVAO(),this.bind(),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)},ue.prototype.destroy=function(){var e=this.context.gl;this.buffer&&(e.deleteBuffer(this.buffer),delete this.buffer)};var ce={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},fe=function(e,t,n,r){this.length=t.length,this.attributes=n,this.itemSize=t.bytesPerElement,this.dynamicDraw=r,this.context=e;var a=e.gl;this.buffer=a.createBuffer(),e.bindVertexBuffer.set(this.buffer),a.bufferData(a.ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?a.DYNAMIC_DRAW:a.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer};fe.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},fe.prototype.updateData=function(e){var t=this.context.gl;this.bind(),t.bufferSubData(t.ARRAY_BUFFER,0,e.arrayBuffer)},fe.prototype.enableAttributes=function(e,t){for(var n=0;n<this.attributes.length;n++){var r=this.attributes[n],a=t.attributes[r.name];void 0!==a&&e.enableVertexAttribArray(a)}},fe.prototype.setVertexAttribPointers=function(e,t,n){for(var r=0;r<this.attributes.length;r++){var a=this.attributes[r],i=t.attributes[a.name];void 0!==i&&e.vertexAttribPointer(i,a.components,e[ce[a.type]],!1,this.itemSize,a.offset+this.itemSize*(n||0))}},fe.prototype.destroy=function(){var e=this.context.gl;this.buffer&&(e.deleteBuffer(this.buffer),delete this.buffer)};var de=function(t){this.context=t,this.current=e.default$6.transparent};de.prototype.get=function(){return this.current},de.prototype.set=function(e){var t=this.current;e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a||(this.context.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e)};var pe=function(e){this.context=e,this.current=1};pe.prototype.get=function(){return this.current},pe.prototype.set=function(e){this.current!==e&&(this.context.gl.clearDepth(e),this.current=e)};var he=function(e){this.context=e,this.current=0};he.prototype.get=function(){return this.current},he.prototype.set=function(e){this.current!==e&&(this.context.gl.clearStencil(e),this.current=e)};var me=function(e){this.context=e,this.current=[!0,!0,!0,!0]};me.prototype.get=function(){return this.current},me.prototype.set=function(e){var t=this.current;e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]||(this.context.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e)};var ve=function(e){this.context=e,this.current=!0};ve.prototype.get=function(){return this.current},ve.prototype.set=function(e){this.current!==e&&(this.context.gl.depthMask(e),this.current=e)};var ge=function(e){this.context=e,this.current=255};ge.prototype.get=function(){return this.current},ge.prototype.set=function(e){this.current!==e&&(this.context.gl.stencilMask(e),this.current=e)};var ye=function(e){this.context=e,this.current={func:e.gl.ALWAYS,ref:0,mask:255}};ye.prototype.get=function(){return this.current},ye.prototype.set=function(e){var t=this.current;e.func===t.func&&e.ref===t.ref&&e.mask===t.mask||(this.context.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e)};var be=function(e){this.context=e;var t=this.context.gl;this.current=[t.KEEP,t.KEEP,t.KEEP]};be.prototype.get=function(){return this.current},be.prototype.set=function(e){var t=this.current;e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]||(this.context.gl.stencilOp(e[0],e[1],e[2]),this.current=e)};var xe=function(e){this.context=e,this.current=!1};xe.prototype.get=function(){return this.current},xe.prototype.set=function(e){if(this.current!==e){var t=this.context.gl;e?t.enable(t.STENCIL_TEST):t.disable(t.STENCIL_TEST),this.current=e}};var _e=function(e){this.context=e,this.current=[0,1]};_e.prototype.get=function(){return this.current},_e.prototype.set=function(e){var t=this.current;e[0]===t[0]&&e[1]===t[1]||(this.context.gl.depthRange(e[0],e[1]),this.current=e)};var we=function(e){this.context=e,this.current=!1};we.prototype.get=function(){return this.current},we.prototype.set=function(e){if(this.current!==e){var t=this.context.gl;e?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),this.current=e}};var Te=function(e){this.context=e,this.current=e.gl.LESS};Te.prototype.get=function(){return this.current},Te.prototype.set=function(e){this.current!==e&&(this.context.gl.depthFunc(e),this.current=e)};var ke=function(e){this.context=e,this.current=!1};ke.prototype.get=function(){return this.current},ke.prototype.set=function(e){if(this.current!==e){var t=this.context.gl;e?t.enable(t.BLEND):t.disable(t.BLEND),this.current=e}};var Ce=function(e){this.context=e;var t=this.context.gl;this.current=[t.ONE,t.ZERO]};Ce.prototype.get=function(){return this.current},Ce.prototype.set=function(e){var t=this.current;e[0]===t[0]&&e[1]===t[1]||(this.context.gl.blendFunc(e[0],e[1]),this.current=e)};var Ee=function(t){this.context=t,this.current=e.default$6.transparent};Ee.prototype.get=function(){return this.current},Ee.prototype.set=function(e){var t=this.current;e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a||(this.context.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e)};var Me=function(e){this.context=e,this.current=null};Me.prototype.get=function(){return this.current},Me.prototype.set=function(e){this.current!==e&&(this.context.gl.useProgram(e),this.current=e)};var Ae=function(e){this.context=e,this.current=1};Ae.prototype.get=function(){return this.current},Ae.prototype.set=function(t){var n=this.context.lineWidthRange,r=e.clamp(t,n[0],n[1]);this.current!==r&&(this.context.gl.lineWidth(r),this.current=t)};var Se=function(e){this.context=e,this.current=e.gl.TEXTURE0};Se.prototype.get=function(){return this.current},Se.prototype.set=function(e){this.current!==e&&(this.context.gl.activeTexture(e),this.current=e)};var Oe=function(e){this.context=e;var t=this.context.gl;this.current=[0,0,t.drawingBufferWidth,t.drawingBufferHeight]};Oe.prototype.get=function(){return this.current},Oe.prototype.set=function(e){var t=this.current;e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]||(this.context.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e)};var Pe=function(e){this.context=e,this.current=null};Pe.prototype.get=function(){return this.current},Pe.prototype.set=function(e){if(this.current!==e){var t=this.context.gl;t.bindFramebuffer(t.FRAMEBUFFER,e),this.current=e}};var Re=function(e){this.context=e,this.current=null};Re.prototype.get=function(){return this.current},Re.prototype.set=function(e){if(this.current!==e){var t=this.context.gl;t.bindRenderbuffer(t.RENDERBUFFER,e),this.current=e}};var Le=function(e){this.context=e,this.current=null};Le.prototype.get=function(){return this.current},Le.prototype.set=function(e){if(this.current!==e){var t=this.context.gl;t.bindTexture(t.TEXTURE_2D,e),this.current=e}};var De=function(e){this.context=e,this.current=null};De.prototype.get=function(){return this.current},De.prototype.set=function(e){if(this.current!==e){var t=this.context.gl;t.bindBuffer(t.ARRAY_BUFFER,e),this.current=e}};var Ie=function(e){this.context=e,this.current=null};Ie.prototype.get=function(){return this.current},Ie.prototype.set=function(e){var t=this.context.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),this.current=e};var ze=function(e){this.context=e,this.current=null};ze.prototype.get=function(){return this.current},ze.prototype.set=function(e){this.current!==e&&this.context.extVertexArrayObject&&(this.context.extVertexArrayObject.bindVertexArrayOES(e),this.current=e)};var je=function(e){this.context=e,this.current=4};je.prototype.get=function(){return this.current},je.prototype.set=function(e){if(this.current!==e){var t=this.context.gl;t.pixelStorei(t.UNPACK_ALIGNMENT,e),this.current=e}};var Ne=function(e){this.context=e,this.current=!1};Ne.prototype.get=function(){return this.current},Ne.prototype.set=function(e){if(this.current!==e){var t=this.context.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e}};var Fe=function(e,t){this.context=e,this.current=null,this.parent=t};Fe.prototype.get=function(){return this.current};var Be=function(e){function t(t,n){e.call(this,t,n),this.dirty=!1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.set=function(e){if(this.dirty||this.current!==e){var t=this.context.gl;this.context.bindFramebuffer.set(this.parent),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}},t.prototype.setDirty=function(){this.dirty=!0},t}(Fe),Ve=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.set=function(e){if(this.current!==e){var t=this.context.gl;this.context.bindFramebuffer.set(this.parent),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e),this.current=e}},t}(Fe),Ue=function(e,t,n){this.context=e,this.width=t,this.height=n;var r=e.gl,a=this.framebuffer=r.createFramebuffer();this.colorAttachment=new Be(e,a),this.depthAttachment=new Ve(e,a)};Ue.prototype.destroy=function(){var e=this.context.gl,t=this.colorAttachment.get();t&&e.deleteTexture(t);var n=this.depthAttachment.get();n&&e.deleteRenderbuffer(n),e.deleteFramebuffer(this.framebuffer)};var Ge=function(e,t,n){this.func=e,this.mask=t,this.range=n};Ge.ReadOnly=!1,Ge.ReadWrite=!0,Ge.disabled=new Ge(519,Ge.ReadOnly,[0,1]);var He=function(e,t,n,r,a,i){this.test=e,this.ref=t,this.mask=n,this.fail=r,this.depthFail=a,this.pass=i};He.disabled=new He({func:519,mask:0},0,0,7680,7680,7680);var We=function(e,t,n){this.blendFunction=e,this.blendColor=t,this.mask=n};We.disabled=new We(We.Replace=[1,0],e.default$6.transparent,[!1,!1,!1,!1]),We.unblended=new We(We.Replace,e.default$6.transparent,[!0,!0,!0,!0]),We.alphaBlended=new We([1,771],e.default$6.transparent,[!0,!0,!0,!0]);var qe=function(e){this.gl=e,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.lineWidthRange=e.getParameter(e.ALIASED_LINE_WIDTH_RANGE),this.clearColor=new de(this),this.clearDepth=new pe(this),this.clearStencil=new he(this),this.colorMask=new me(this),this.depthMask=new ve(this),this.stencilMask=new ge(this),this.stencilFunc=new ye(this),this.stencilOp=new be(this),this.stencilTest=new xe(this),this.depthRange=new _e(this),this.depthTest=new we(this),this.depthFunc=new Te(this),this.blend=new ke(this),this.blendFunc=new Ce(this),this.blendColor=new Ee(this),this.program=new Me(this),this.lineWidth=new Ae(this),this.activeTexture=new Se(this),this.viewport=new Oe(this),this.bindFramebuffer=new Pe(this),this.bindRenderbuffer=new Re(this),this.bindTexture=new Le(this),this.bindVertexBuffer=new De(this),this.bindElementBuffer=new Ie(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new ze(this),this.pixelStoreUnpack=new je(this),this.pixelStoreUnpackPremultiplyAlpha=new Ne(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=e.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&e.getExtension("OES_texture_half_float_linear")};qe.prototype.createIndexBuffer=function(e,t){return new ue(this,e,t)},qe.prototype.createVertexBuffer=function(e,t,n){return new fe(this,e,t,n)},qe.prototype.createRenderbuffer=function(e,t,n){var r=this.gl,a=r.createRenderbuffer();return this.bindRenderbuffer.set(a),r.renderbufferStorage(r.RENDERBUFFER,e,t,n),this.bindRenderbuffer.set(null),a},qe.prototype.createFramebuffer=function(e,t){return new Ue(this,e,t)},qe.prototype.clear=function(e){var t=e.color,n=e.depth,r=this.gl,a=0;t&&(a|=r.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),void 0!==n&&(a|=r.DEPTH_BUFFER_BIT,this.clearDepth.set(n),this.depthMask.set(!0)),r.clear(a)},qe.prototype.setDepthMode=function(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)},qe.prototype.setStencilMode=function(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)},qe.prototype.setColorMode=function(t){e.default$10(t.blendFunction,We.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor)),this.colorMask.set(t.mask)};var Ye=function(t){function n(e,n,r){var a=this;t.call(this),this.id=e,this.dispatcher=r,this.on("data",function(e){"source"===e.dataType&&"metadata"===e.sourceDataType&&(a._sourceLoaded=!0),a._sourceLoaded&&!a._paused&&"source"===e.dataType&&"content"===e.sourceDataType&&(a.reload(),a.transform&&a.update(a.transform))}),this.on("error",function(){a._sourceErrored=!0}),this._source=ae(e,n,r,this),this._tiles={},this._cache=new le(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._isIdRenderable=this._isIdRenderable.bind(this),this._coveredTiles={}}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.onAdd=function(e){this.map=e,this._maxTileCacheSize=e?e._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(e)},n.prototype.onRemove=function(e){this._source&&this._source.onRemove&&this._source.onRemove(e)},n.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;for(var e in this._tiles){var t=this._tiles[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}return!0},n.prototype.getSource=function(){return this._source},n.prototype.pause=function(){this._paused=!0},n.prototype.resume=function(){if(this._paused){var e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform)}},n.prototype._loadTile=function(e,t){return this._source.loadTile(e,t)},n.prototype._unloadTile=function(e){if(this._source.unloadTile)return this._source.unloadTile(e,function(){})},n.prototype._abortTile=function(e){if(this._source.abortTile)return this._source.abortTile(e,function(){})},n.prototype.serialize=function(){return this._source.serialize()},n.prototype.prepare=function(e){for(var t in this._source.prepare&&this._source.prepare(),this._tiles)this._tiles[t].upload(e)},n.prototype.getIds=function(){var t=this;return Object.keys(this._tiles).map(Number).sort(function(n,r){var a=t._tiles[n].tileID,i=t._tiles[r].tileID,o=new e.default$1(a.canonical.x,a.canonical.y).rotate(t.transform.angle),s=new e.default$1(i.canonical.x,i.canonical.y).rotate(t.transform.angle);return a.overscaledZ-i.overscaledZ||s.y-o.y||s.x-o.x})},n.prototype.getRenderableIds=function(){return this.getIds().filter(this._isIdRenderable)},n.prototype.hasRenderableParent=function(e){var t=this.findLoadedParent(e,0,{});return!!t&&this._isIdRenderable(t.tileID.key)},n.prototype._isIdRenderable=function(e){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]},n.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var e in this._cache.reset(),this._tiles)this._reloadTile(e,"reloading")},n.prototype._reloadTile=function(e,t){var n=this._tiles[e];n&&("loading"!==n.state&&(n.state=t),this._loadTile(n,this._tileLoaded.bind(this,n,e,t)))},n.prototype._tileLoaded=function(t,n,r,a){if(a)return t.state="errored",void(404!==a.status?this._source.fire(new e.ErrorEvent(a,{tile:t})):this.update(this.transform));t.timeAdded=i.now(),"expired"===r&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(n,t),"raster-dem"===this.getSource().type&&t.dem&&this._backfillDEM(t),this._source.fire(new e.Event("data",{dataType:"source",tile:t,coord:t.tileID})),this.map&&(this.map.painter.tileExtentVAO.vao=null)},n.prototype._backfillDEM=function(e){for(var t=this.getRenderableIds(),n=0;n<t.length;n++){var r=t[n];if(e.neighboringTiles&&e.neighboringTiles[r]){var a=this.getTileByID(r);i(e,a),i(a,e)}}function i(e,t){e.needsHillshadePrepare=!0;var n=t.tileID.canonical.x-e.tileID.canonical.x,r=t.tileID.canonical.y-e.tileID.canonical.y,a=Math.pow(2,e.tileID.canonical.z),i=t.tileID.key;0===n&&0===r||Math.abs(r)>1||(Math.abs(n)>1&&(1===Math.abs(n+a)?n+=a:1===Math.abs(n-a)&&(n-=a)),t.dem&&e.dem&&(e.dem.backfillBorder(t.dem,n,r),e.neighboringTiles&&e.neighboringTiles[i]&&(e.neighboringTiles[i].backfilled=!0)))}},n.prototype.getTile=function(e){return this.getTileByID(e.key)},n.prototype.getTileByID=function(e){return this._tiles[e]},n.prototype.getZoom=function(e){return e.zoom+e.scaleZoom(e.tileSize/this._source.tileSize)},n.prototype._findLoadedChildren=function(e,t,n){var r=!1;for(var a in this._tiles){var i=this._tiles[a];if(!(n[a]||!i.hasData()||i.tileID.overscaledZ<=e.overscaledZ||i.tileID.overscaledZ>t)){var o=Math.pow(2,i.tileID.canonical.z-e.canonical.z);if(Math.floor(i.tileID.canonical.x/o)===e.canonical.x&&Math.floor(i.tileID.canonical.y/o)===e.canonical.y)for(n[a]=i.tileID,r=!0;i&&i.tileID.overscaledZ-1>e.overscaledZ;){var s=i.tileID.scaledTo(i.tileID.overscaledZ-1);if(!s)break;(i=this._tiles[s.key])&&i.hasData()&&(delete n[a],n[s.key]=s)}}}return r},n.prototype.findLoadedParent=function(e,t,n){for(var r=e.overscaledZ-1;r>=t;r--){var a=e.scaledTo(r);if(!a)return;var i=String(a.key),o=this._tiles[i];if(o&&o.hasData())return n[i]=a,o;if(this._cache.has(a))return n[i]=a,this._cache.get(a)}},n.prototype.updateCacheSize=function(e){var t=(Math.ceil(e.width/this._source.tileSize)+1)*(Math.ceil(e.height/this._source.tileSize)+1),n=Math.floor(5*t),r="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,n):n;this._cache.setMaxSize(r)},n.prototype.handleWrapJump=function(e){var t=(e-(void 0===this._prevLng?e:this._prevLng))/360,n=Math.round(t);if(this._prevLng=e,n){var r={};for(var a in this._tiles){var i=this._tiles[a];i.tileID=i.tileID.unwrapTo(i.tileID.wrap+n),r[i.tileID.key]=i}for(var o in this._tiles=r,this._timers)clearTimeout(this._timers[o]),delete this._timers[o];for(var s in this._tiles){var l=this._tiles[s];this._setTileReloadTimer(s,l)}}},n.prototype.update=function(t){var r=this;if(this.transform=t,this._sourceLoaded&&!this._paused){var a;this.updateCacheSize(t),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?a=t.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(t){return new e.OverscaledTileID(t.canonical.z,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y)}):(a=t.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(a=a.filter(function(e){return r._source.hasTile(e)}))):a=[];var o,s=(this._source.roundZoom?Math.round:Math.floor)(this.getZoom(t)),l=Math.max(s-n.maxOverzooming,this._source.minzoom),u=Math.max(s+n.maxUnderzooming,this._source.minzoom),c=this._updateRetainedTiles(a,s),f={};if(Ze(this._source.type))for(var d=Object.keys(c),p=0;p<d.length;p++){var h=d[p],m=c[h],v=r._tiles[h];if(v&&(void 0===v.fadeEndTime||v.fadeEndTime>=i.now())){r._findLoadedChildren(m,u,c)&&(c[h]=m);var g=r.findLoadedParent(m,l,f);g&&r._addTile(g.tileID)}}for(o in f)c[o]||(r._coveredTiles[o]=!0);for(o in f)c[o]=f[o];for(var y=e.keysDifference(this._tiles,c),b=0;b<y.length;b++)r._removeTile(y[b])}},n.prototype._updateRetainedTiles=function(e,t){for(var r={},a={},i=Math.max(t-n.maxOverzooming,this._source.minzoom),o=Math.max(t+n.maxUnderzooming,this._source.minzoom),s=0;s<e.length;s++){var l=e[s],u=this._addTile(l),c=!1;if(u.hasData())r[l.key]=l;else{c=u.wasRequested(),r[l.key]=l;var f=!0;if(t+1>this._source.maxzoom){var d=l.children(this._source.maxzoom)[0],p=this.getTile(d);p&&p.hasData()?r[d.key]=d:f=!1}else{this._findLoadedChildren(l,o,r);for(var h=l.children(this._source.maxzoom),m=0;m<h.length;m++)if(!r[h[m].key]){f=!1;break}}if(!f)for(var v=l.overscaledZ-1;v>=i;--v){var g=l.scaledTo(v);if(a[g.key])break;if(a[g.key]=!0,!(u=this.getTile(g))&&c&&(u=this._addTile(g)),u&&(r[g.key]=g,c=u.wasRequested(),u.hasData()))break}}}return r},n.prototype._addTile=function(t){var n=this._tiles[t.key];if(n)return n;(n=this._cache.getAndRemove(t))&&(this._setTileReloadTimer(t.key,n),n.tileID=t);var r=Boolean(n);return r||(n=new se(t,this._source.tileSize*t.overscaleFactor()),this._loadTile(n,this._tileLoaded.bind(this,n,t.key,n.state))),n?(n.uses++,this._tiles[t.key]=n,r||this._source.fire(new e.Event("dataloading",{tile:n,coord:n.tileID,dataType:"source"})),n):null},n.prototype._setTileReloadTimer=function(e,t){var n=this;e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);var r=t.getExpiryTimeout();r&&(this._timers[e]=setTimeout(function(){n._reloadTile(e,"expired"),delete n._timers[e]},r))},n.prototype._removeTile=function(e){var t=this._tiles[e];t&&(t.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),t.uses>0||(t.hasData()?this._cache.add(t.tileID,t,t.getExpiryTimeout()):(t.aborted=!0,this._abortTile(t),this._unloadTile(t))))},n.prototype.clearTiles=function(){for(var e in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(e);this._cache.reset()},n.prototype.tilesIn=function(t,n){for(var r=[],a=this.getIds(),i=1/0,o=1/0,s=-1/0,l=-1/0,u=t[0].zoom,c=0;c<t.length;c++){var f=t[c];i=Math.min(i,f.column),o=Math.min(o,f.row),s=Math.max(s,f.column),l=Math.max(l,f.row)}for(var d=0;d<a.length;d++){var p=this._tiles[a[d]],h=p.tileID,m=Math.pow(2,this.transform.zoom-p.tileID.overscaledZ),v=n*p.queryPadding*e.default$8/p.tileSize/m,g=[Xe(h,new e.default$17(i,o,u)),Xe(h,new e.default$17(s,l,u))];if(g[0].x-v<e.default$8&&g[0].y-v<e.default$8&&g[1].x+v>=0&&g[1].y+v>=0){for(var y=[],b=0;b<t.length;b++)y.push(Xe(h,t[b]));r.push({tile:p,tileID:h,queryGeometry:[y],scale:m})}}return r},n.prototype.getVisibleCoordinates=function(){for(var e=this,t=this.getRenderableIds().map(function(t){return e._tiles[t].tileID}),n=0,r=t;n<r.length;n+=1){var a=r[n];a.posMatrix=e.transform.calculatePosMatrix(a.toUnwrapped())}return t},n.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Ze(this._source.type))for(var e in this._tiles){var t=this._tiles[e];if(void 0!==t.fadeEndTime&&t.fadeEndTime>=i.now())return!0}return!1},n}(e.Evented);function Xe(t,n){var r=n.zoomTo(t.canonical.z);return new e.default$1((r.column-(t.canonical.x+t.wrap*Math.pow(2,t.canonical.z)))*e.default$8,(r.row-t.canonical.y)*e.default$8)}function Ze(e){return"raster"===e||"image"===e||"video"===e}function $e(){return new e.default.Worker(Ar.workerUrl)}Ye.maxOverzooming=10,Ye.maxUnderzooming=3;var Ke,Je=function(){this.active={}};function Qe(t,n){var r={};for(var a in t)"ref"!==a&&(r[a]=t[a]);return e.default$18.forEach(function(e){e in n&&(r[e]=n[e])}),r}function et(e){e=e.slice();for(var t=Object.create(null),n=0;n<e.length;n++)t[e[n].id]=e[n];for(var r=0;r<e.length;r++)"ref"in e[r]&&(e[r]=Qe(e[r],t[e[r].ref]));return e}Je.prototype.acquire=function(e){if(!this.workers){var t=Ar.workerCount;for(this.workers=[];this.workers.length<t;)this.workers.push(new $e)}return this.active[e]=!0,this.workers.slice()},Je.prototype.release=function(e){delete this.active[e],0===Object.keys(this.active).length&&(this.workers.forEach(function(e){e.terminate()}),this.workers=null)};var tt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function nt(e,t,n){n.push({command:tt.addSource,args:[e,t[e]]})}function rt(e,t,n){t.push({command:tt.removeSource,args:[e]}),n[e]=!0}function at(e,t,n,r){rt(e,n,r),nt(e,t,n)}function it(t,n,r){var a;for(a in t[r])if(t[r].hasOwnProperty(a)&&"data"!==a&&!e.default$10(t[r][a],n[r][a]))return!1;for(a in n[r])if(n[r].hasOwnProperty(a)&&"data"!==a&&!e.default$10(t[r][a],n[r][a]))return!1;return!0}function ot(t,n,r,a,i,o){var s;for(s in n=n||{},t=t||{})t.hasOwnProperty(s)&&(e.default$10(t[s],n[s])||r.push({command:o,args:[a,s,n[s],i]}));for(s in n)n.hasOwnProperty(s)&&!t.hasOwnProperty(s)&&(e.default$10(t[s],n[s])||r.push({command:o,args:[a,s,n[s],i]}))}function st(e){return e.id}function lt(e,t){return e[t.id]=t,e}var ut=function(e,t,n){var r=this.boxCells=[],a=this.circleCells=[];this.xCellCount=Math.ceil(e/n),this.yCellCount=Math.ceil(t/n);for(var i=0;i<this.xCellCount*this.yCellCount;i++)r.push([]),a.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=t,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/t,this.boxUid=0,this.circleUid=0};ut.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},ut.prototype.insert=function(e,t,n,r,a){this._forEachCell(t,n,r,a,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(a)},ut.prototype.insertCircle=function(e,t,n,r){this._forEachCell(t-r,n-r,t+r,n+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(t),this.circles.push(n),this.circles.push(r)},ut.prototype._insertBoxCell=function(e,t,n,r,a,i){this.boxCells[a].push(i)},ut.prototype._insertCircleCell=function(e,t,n,r,a,i){this.circleCells[a].push(i)},ut.prototype._query=function(e,t,n,r,a){if(n<0||e>this.width||r<0||t>this.height)return!a&&[];var i=[];if(e<=0&&t<=0&&this.width<=n&&this.height<=r){if(a)return!0;for(var o=0;o<this.boxKeys.length;o++)i.push({key:this.boxKeys[o],x1:this.bboxes[4*o],y1:this.bboxes[4*o+1],x2:this.bboxes[4*o+2],y2:this.bboxes[4*o+3]});for(var s=0;s<this.circleKeys.length;s++){var l=this.circles[3*s],u=this.circles[3*s+1],c=this.circles[3*s+2];i.push({key:this.circleKeys[s],x1:l-c,y1:u-c,x2:l+c,y2:u+c})}}else{var f={hitTest:a,seenUids:{box:{},circle:{}}};this._forEachCell(e,t,n,r,this._queryCell,i,f)}return a?i.length>0:i},ut.prototype._queryCircle=function(e,t,n,r){var a=e-n,i=e+n,o=t-n,s=t+n;if(i<0||a>this.width||s<0||o>this.height)return!r&&[];var l=[],u={hitTest:r,circle:{x:e,y:t,radius:n},seenUids:{box:{},circle:{}}};return this._forEachCell(a,o,i,s,this._queryCellCircle,l,u),r?l.length>0:l},ut.prototype.query=function(e,t,n,r){return this._query(e,t,n,r,!1)},ut.prototype.hitTest=function(e,t,n,r){return this._query(e,t,n,r,!0)},ut.prototype.hitTestCircle=function(e,t,n){return this._queryCircle(e,t,n,!0)},ut.prototype._queryCell=function(e,t,n,r,a,i,o){var s=o.seenUids,l=this.boxCells[a];if(null!==l)for(var u=this.bboxes,c=0,f=l;c<f.length;c+=1){var d=f[c];if(!s.box[d]){s.box[d]=!0;var p=4*d;if(e<=u[p+2]&&t<=u[p+3]&&n>=u[p+0]&&r>=u[p+1]){if(o.hitTest)return i.push(!0),!0;i.push({key:this.boxKeys[d],x1:u[p],y1:u[p+1],x2:u[p+2],y2:u[p+3]})}}}var h=this.circleCells[a];if(null!==h)for(var m=this.circles,v=0,g=h;v<g.length;v+=1){var y=g[v];if(!s.circle[y]){s.circle[y]=!0;var b=3*y;if(this._circleAndRectCollide(m[b],m[b+1],m[b+2],e,t,n,r)){if(o.hitTest)return i.push(!0),!0;var x=m[b],_=m[b+1],w=m[b+2];i.push({key:this.circleKeys[y],x1:x-w,y1:_-w,x2:x+w,y2:_+w})}}}},ut.prototype._queryCellCircle=function(e,t,n,r,a,i,o){var s=o.circle,l=o.seenUids,u=this.boxCells[a];if(null!==u)for(var c=this.bboxes,f=0,d=u;f<d.length;f+=1){var p=d[f];if(!l.box[p]){l.box[p]=!0;var h=4*p;if(this._circleAndRectCollide(s.x,s.y,s.radius,c[h+0],c[h+1],c[h+2],c[h+3]))return i.push(!0),!0}}var m=this.circleCells[a];if(null!==m)for(var v=this.circles,g=0,y=m;g<y.length;g+=1){var b=y[g];if(!l.circle[b]){l.circle[b]=!0;var x=3*b;if(this._circlesCollide(v[x],v[x+1],v[x+2],s.x,s.y,s.radius))return i.push(!0),!0}}},ut.prototype._forEachCell=function(e,t,n,r,a,i,o){for(var s=this._convertToXCellCoord(e),l=this._convertToYCellCoord(t),u=this._convertToXCellCoord(n),c=this._convertToYCellCoord(r),f=s;f<=u;f++)for(var d=l;d<=c;d++){var p=this.xCellCount*d+f;if(a.call(this,e,t,n,r,p,i,o))return}},ut.prototype._convertToXCellCoord=function(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))},ut.prototype._convertToYCellCoord=function(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))},ut.prototype._circlesCollide=function(e,t,n,r,a,i){var o=r-e,s=a-t,l=n+i;return l*l>o*o+s*s},ut.prototype._circleAndRectCollide=function(e,t,n,r,a,i,o){var s=(i-r)/2,l=Math.abs(e-(r+s));if(l>s+n)return!1;var u=(o-a)/2,c=Math.abs(t-(a+u));if(c>u+n)return!1;if(l<=s||c<=u)return!0;var f=l-s,d=c-u;return f*f+d*d<=n*n};var ct=e.default$19.layout;function ft(t,n,r,a,i){var o=e.mat4.identity(new Float32Array(16));return n?(e.mat4.identity(o),e.mat4.scale(o,o,[1/i,1/i,1]),r||e.mat4.rotateZ(o,o,a.angle)):(e.mat4.scale(o,o,[a.width/2,-a.height/2,1]),e.mat4.translate(o,o,[1,-1,0]),e.mat4.multiply(o,o,t)),o}function dt(t,n,r,a,i){var o=e.mat4.identity(new Float32Array(16));return n?(e.mat4.multiply(o,o,t),e.mat4.scale(o,o,[i,i,1]),r||e.mat4.rotateZ(o,o,-a.angle)):(e.mat4.scale(o,o,[1,-1,1]),e.mat4.translate(o,o,[-1,-1,0]),e.mat4.scale(o,o,[2/a.width,2/a.height,1])),o}function pt(t,n){var r=[t.x,t.y,0,1];Tt(r,r,n);var a=r[3];return{point:new e.default$1(r[0]/a,r[1]/a),signedDistanceFromCamera:a}}function ht(e,t){var n=e[0]/e[3],r=e[1]/e[3];return n>=-t[0]&&n<=t[0]&&r>=-t[1]&&r<=t[1]}function mt(t,n,r,a,i,o,s,l){var u=a?t.textSizeData:t.iconSizeData,c=e.evaluateSizeForZoom(u,r.transform.zoom,ct.properties[a?"text-size":"icon-size"]),f=[256/r.width*2+1,256/r.height*2+1],d=a?t.text.dynamicLayoutVertexArray:t.icon.dynamicLayoutVertexArray;d.clear();for(var p=t.lineVertexArray,h=a?t.text.placedSymbolArray:t.icon.placedSymbolArray,m=r.transform.width/r.transform.height,v=!1,g=0;g<h.length;g++){var y=h.get(g);if(y.hidden||y.writingMode===e.WritingMode.vertical&&!v)wt(y.numGlyphs,d);else{v=!1;var b=[y.anchorX,y.anchorY,0,1];if(e.vec4.transformMat4(b,b,n),ht(b,f)){var x=.5+b[3]/r.transform.cameraToCenterDistance*.5,_=e.evaluateSizeForFeature(u,c,y),w=s?_*x:_/x,T=new e.default$1(y.anchorX,y.anchorY),k=pt(T,i).point,C={},E=yt(y,w,!1,l,n,i,o,t.glyphOffsetArray,p,d,k,T,C,m);v=E.useVertical,(E.notEnoughRoom||v||E.needsFlipping&&yt(y,w,!0,l,n,i,o,t.glyphOffsetArray,p,d,k,T,C,m).notEnoughRoom)&&wt(y.numGlyphs,d)}else wt(y.numGlyphs,d)}}a?t.text.dynamicLayoutVertexBuffer.updateData(d):t.icon.dynamicLayoutVertexBuffer.updateData(d)}function vt(e,t,n,r,a,i,o,s,l,u,c,f){var d=s.glyphStartIndex+s.numGlyphs,p=s.lineStartIndex,h=s.lineStartIndex+s.lineLength,m=t.getoffsetX(s.glyphStartIndex),v=t.getoffsetX(d-1),g=xt(e*m,n,r,a,i,o,s.segment,p,h,l,u,c,f);if(!g)return null;var y=xt(e*v,n,r,a,i,o,s.segment,p,h,l,u,c,f);return y?{first:g,last:y}:null}function gt(t,n,r,a){return t===e.WritingMode.horizontal&&Math.abs(r.y-n.y)>Math.abs(r.x-n.x)*a?{useVertical:!0}:(t===e.WritingMode.vertical?n.y<r.y:n.x>r.x)?{needsFlipping:!0}:null}function yt(t,n,r,a,i,o,s,l,u,c,f,d,p,h){var m,v=n/24,g=t.lineOffsetX*n,y=t.lineOffsetY*n;if(t.numGlyphs>1){var b=t.glyphStartIndex+t.numGlyphs,x=t.lineStartIndex,_=t.lineStartIndex+t.lineLength,w=vt(v,l,g,y,r,f,d,t,u,o,p,!1);if(!w)return{notEnoughRoom:!0};var T=pt(w.first.point,s).point,k=pt(w.last.point,s).point;if(a&&!r){var C=gt(t.writingMode,T,k,h);if(C)return C}m=[w.first];for(var E=t.glyphStartIndex+1;E<b-1;E++)m.push(xt(v*l.getoffsetX(E),g,y,r,f,d,t.segment,x,_,u,o,p,!1));m.push(w.last)}else{if(a&&!r){var M=pt(d,i).point,A=t.lineStartIndex+t.segment+1,S=new e.default$1(u.getx(A),u.gety(A)),O=pt(S,i),P=O.signedDistanceFromCamera>0?O.point:bt(d,S,M,1,i),R=gt(t.writingMode,M,P,h);if(R)return R}var L=xt(v*l.getoffsetX(t.glyphStartIndex),g,y,r,f,d,t.segment,t.lineStartIndex,t.lineStartIndex+t.lineLength,u,o,p,!1);if(!L)return{notEnoughRoom:!0};m=[L]}for(var D=0,I=m;D<I.length;D+=1){var z=I[D];e.addDynamicAttributes(c,z.point,z.angle)}return{}}function bt(e,t,n,r,a){var i=pt(e.add(e.sub(t)._unit()),a).point,o=n.sub(i);return n.add(o._mult(r/o.mag()))}function xt(t,n,r,a,i,o,s,l,u,c,f,d,p){var h=a?t-n:t+n,m=h>0?1:-1,v=0;a&&(m*=-1,v=Math.PI),m<0&&(v+=Math.PI);for(var g=m>0?l+s:l+s+1,y=g,b=i,x=i,_=0,w=0,T=Math.abs(h);_+w<=T;){if((g+=m)<l||g>=u)return null;if(x=b,void 0===(b=d[g])){var k=new e.default$1(c.getx(g),c.gety(g)),C=pt(k,f);if(C.signedDistanceFromCamera>0)b=d[g]=C.point;else{var E=g-m;b=bt(0===_?o:new e.default$1(c.getx(E),c.gety(E)),k,x,T-_+1,f)}}_+=w,w=x.dist(b)}var M=(T-_)/w,A=b.sub(x),S=A.mult(M)._add(x);return S._add(A._unit()._perp()._mult(r*m)),{point:S,angle:v+Math.atan2(b.y-x.y,b.x-x.x),tileDistance:p?{prevTileDistance:g-m===y?0:c.gettileUnitDistanceFromAnchor(g-m),lastSegmentViewportDistance:T-_}:null}}var _t=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function wt(e,t){for(var n=0;n<e;n++){var r=t.length;t.resize(r+4),t.float32.set(_t,3*r)}}function Tt(e,t,n){var r=t[0],a=t[1];return e[0]=n[0]*r+n[4]*a+n[12],e[1]=n[1]*r+n[5]*a+n[13],e[3]=n[3]*r+n[7]*a+n[15],e}e.default$20.mat4;var kt=function(e,t,n){void 0===t&&(t=new ut(e.width+200,e.height+200,25)),void 0===n&&(n=new ut(e.width+200,e.height+200,25)),this.transform=e,this.grid=t,this.ignoredGrid=n,this.pitchfactor=Math.cos(e._pitch)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+100,this.screenBottomBoundary=e.height+100};function Ct(e,t,n){e[t+4]=n?1:0}function Et(t,n,r){return n*(e.default$8/(t.tileSize*Math.pow(2,r-t.tileID.overscaledZ)))}kt.prototype.placeCollisionBox=function(e,t,n,r){var a=this.projectAndGetPerspectiveRatio(r,e.anchorPointX,e.anchorPointY),i=n*a.perspectiveRatio,o=e.x1*i+a.point.x,s=e.y1*i+a.point.y,l=e.x2*i+a.point.x,u=e.y2*i+a.point.y;return!t&&this.grid.hitTest(o,s,l,u)?{box:[],offscreen:!1}:{box:[o,s,l,u],offscreen:this.isOffscreen(o,s,l,u)}},kt.prototype.approximateTileDistance=function(e,t,n,r,a){var i=a?1:r/this.pitchfactor,o=e.lastSegmentViewportDistance*n;return e.prevTileDistance+o+(i-1)*o*Math.abs(Math.sin(t))},kt.prototype.placeCollisionCircles=function(t,n,r,a,i,o,s,l,u,c,f,d,p){var h=[],m=this.projectAnchor(c,o.anchorX,o.anchorY),v=u/24,g=o.lineOffsetX*u,y=o.lineOffsetY*u,b=new e.default$1(o.anchorX,o.anchorY),x=vt(v,l,g,y,!1,pt(b,f).point,b,o,s,f,{},!0),_=!1,w=!0,T=m.perspectiveRatio*a,k=1/(a*r),C=0,E=0;x&&(C=this.approximateTileDistance(x.first.tileDistance,x.first.angle,k,m.cameraDistance,p),E=this.approximateTileDistance(x.last.tileDistance,x.last.angle,k,m.cameraDistance,p));for(var M=0;M<t.length;M+=5){var A=t[M],S=t[M+1],O=t[M+2],P=t[M+3];if(!x||P<-C||P>E)Ct(t,M,!1);else{var R=this.projectPoint(c,A,S),L=O*T;if(h.length>0){var D=R.x-h[h.length-4],I=R.y-h[h.length-3];if(L*L*2>D*D+I*I&&M+8<t.length){var z=t[M+8];if(z>-C&&z<E){Ct(t,M,!1);continue}}}var j=M/5;if(h.push(R.x,R.y,L,j),Ct(t,M,!0),w=w&&this.isOffscreen(R.x-L,R.y-L,R.x+L,R.y+L),!n&&this.grid.hitTestCircle(R.x,R.y,L)){if(!d)return{circles:[],offscreen:!1};_=!0}}}return{circles:_?[]:h,offscreen:w}},kt.prototype.queryRenderedSymbols=function(t){if(0===t.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var n=[],r=1/0,a=1/0,i=-1/0,o=-1/0,s=0,l=t;s<l.length;s+=1){var u=l[s],c=new e.default$1(u.x+100,u.y+100);r=Math.min(r,c.x),a=Math.min(a,c.y),i=Math.max(i,c.x),o=Math.max(o,c.y),n.push(c)}for(var f={},d={},p=0,h=this.grid.query(r,a,i,o).concat(this.ignoredGrid.query(r,a,i,o));p<h.length;p+=1){var m=h[p],v=m.key;if(void 0===f[v.bucketInstanceId]&&(f[v.bucketInstanceId]={}),!f[v.bucketInstanceId][v.featureIndex]){var g=[new e.default$1(m.x1,m.y1),new e.default$1(m.x2,m.y1),new e.default$1(m.x2,m.y2),new e.default$1(m.x1,m.y2)];e.polygonIntersectsPolygon(n,g)&&(f[v.bucketInstanceId][v.featureIndex]=!0,void 0===d[v.bucketInstanceId]&&(d[v.bucketInstanceId]=[]),d[v.bucketInstanceId].push(v.featureIndex))}}return d},kt.prototype.insertCollisionBox=function(e,t,n,r){var a={bucketInstanceId:n,featureIndex:r};(t?this.ignoredGrid:this.grid).insert(a,e[0],e[1],e[2],e[3])},kt.prototype.insertCollisionCircles=function(e,t,n,r){for(var a=t?this.ignoredGrid:this.grid,i={bucketInstanceId:n,featureIndex:r},o=0;o<e.length;o+=4)a.insertCircle(i,e[o],e[o+1],e[o+2])},kt.prototype.projectAnchor=function(e,t,n){var r=[t,n,0,1];return Tt(r,r,e),{perspectiveRatio:.5+this.transform.cameraToCenterDistance/r[3]*.5,cameraDistance:r[3]}},kt.prototype.projectPoint=function(t,n,r){var a=[n,r,0,1];return Tt(a,a,t),new e.default$1((a[0]/a[3]+1)/2*this.transform.width+100,(-a[1]/a[3]+1)/2*this.transform.height+100)},kt.prototype.projectAndGetPerspectiveRatio=function(t,n,r){var a=[n,r,0,1];return Tt(a,a,t),{point:new e.default$1((a[0]/a[3]+1)/2*this.transform.width+100,(-a[1]/a[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/a[3]*.5}},kt.prototype.isOffscreen=function(e,t,n,r){return n<100||e>=this.screenRightBoundary||r<100||t>this.screenBottomBoundary};var Mt=e.default$19.layout,At=function(e,t,n,r){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?t:-t))):r&&n?1:0,this.placed=n};At.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var St=function(e,t,n,r,a){this.text=new At(e?e.text:null,t,n,a),this.icon=new At(e?e.icon:null,t,r,a)};St.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var Ot=function(e,t,n){this.text=e,this.icon=t,this.skipFade=n},Pt=function(e,t){this.transform=e.clone(),this.collisionIndex=new kt(this.transform),this.placements={},this.opacities={},this.stale=!1,this.fadeDuration=t,this.retainedQueryData={}};function Rt(e,t,n){e.emplaceBack(t?1:0,n?1:0),e.emplaceBack(t?1:0,n?1:0),e.emplaceBack(t?1:0,n?1:0),e.emplaceBack(t?1:0,n?1:0)}Pt.prototype.placeLayerTile=function(t,n,r,a){var i=n.getBucket(t),o=n.latestFeatureIndex;if(i&&o&&t.id===i.layerIds[0]){var s=n.collisionBoxArray,l=i.layers[0].layout,u=Math.pow(2,this.transform.zoom-n.tileID.overscaledZ),c=n.tileSize/e.default$8,f=this.transform.calculatePosMatrix(n.tileID.toUnwrapped()),d=ft(f,"map"===l.get("text-pitch-alignment"),"map"===l.get("text-rotation-alignment"),this.transform,Et(n,1,this.transform.zoom)),p=ft(f,"map"===l.get("icon-pitch-alignment"),"map"===l.get("icon-rotation-alignment"),this.transform,Et(n,1,this.transform.zoom));this.retainedQueryData[i.bucketInstanceId]=new function(e,t,n,r,a){this.bucketInstanceId=e,this.featureIndex=t,this.sourceLayerIndex=n,this.bucketIndex=r,this.tileID=a}(i.bucketInstanceId,o,i.sourceLayerIndex,i.index,n.tileID),this.placeLayerBucket(i,f,d,p,u,c,r,a,s)}},Pt.prototype.placeLayerBucket=function(t,n,r,a,i,o,s,l,u){for(var c=t.layers[0].layout,f=e.evaluateSizeForZoom(t.textSizeData,this.transform.zoom,Mt.properties["text-size"]),d=!t.hasTextData()||c.get("text-optional"),p=!t.hasIconData()||c.get("icon-optional"),h=0,m=t.symbolInstances;h<m.length;h+=1){var v=m[h];if(!l[v.crossTileID]){var g=void 0!==v.feature.text,y=void 0!==v.feature.icon,b=!0,x=null,_=null,w=null,T=0,k=0;v.collisionArrays||(v.collisionArrays=t.deserializeCollisionBoxes(u,v.textBoxStartIndex,v.textBoxEndIndex,v.iconBoxStartIndex,v.iconBoxEndIndex)),v.collisionArrays.textFeatureIndex&&(T=v.collisionArrays.textFeatureIndex),v.collisionArrays.textBox&&(g=(x=this.collisionIndex.placeCollisionBox(v.collisionArrays.textBox,c.get("text-allow-overlap"),o,n)).box.length>0,b=b&&x.offscreen);var C=v.collisionArrays.textCircles;if(C){var E=t.text.placedSymbolArray.get(v.placedTextSymbolIndices[0]),M=e.evaluateSizeForFeature(t.textSizeData,f,E);_=this.collisionIndex.placeCollisionCircles(C,c.get("text-allow-overlap"),i,o,v.key,E,t.lineVertexArray,t.glyphOffsetArray,M,n,r,s,"map"===c.get("text-pitch-alignment")),g=c.get("text-allow-overlap")||_.circles.length>0,b=b&&_.offscreen}v.collisionArrays.iconFeatureIndex&&(k=v.collisionArrays.iconFeatureIndex),v.collisionArrays.iconBox&&(y=(w=this.collisionIndex.placeCollisionBox(v.collisionArrays.iconBox,c.get("icon-allow-overlap"),o,n)).box.length>0,b=b&&w.offscreen),d||p?p?d||(y=y&&g):g=y&&g:y=g=y&&g,g&&x&&this.collisionIndex.insertCollisionBox(x.box,c.get("text-ignore-placement"),t.bucketInstanceId,T),y&&w&&this.collisionIndex.insertCollisionBox(w.box,c.get("icon-ignore-placement"),t.bucketInstanceId,k),g&&_&&this.collisionIndex.insertCollisionCircles(_.circles,c.get("text-ignore-placement"),t.bucketInstanceId,T),this.placements[v.crossTileID]=new Ot(g,y,b||t.justReloaded),l[v.crossTileID]=!0}}t.justReloaded=!1},Pt.prototype.commit=function(e,t){this.commitTime=t;var n=!1,r=e&&0!==this.fadeDuration?(this.commitTime-e.commitTime)/this.fadeDuration:1,a=e?e.opacities:{};for(var i in this.placements){var o=this.placements[i],s=a[i];s?(this.opacities[i]=new St(s,r,o.text,o.icon),n=n||o.text!==s.text.placed||o.icon!==s.icon.placed):(this.opacities[i]=new St(null,r,o.text,o.icon,o.skipFade),n=n||o.text||o.icon)}for(var l in a){var u=a[l];if(!this.opacities[l]){var c=new St(u,r,!1,!1);c.isHidden()||(this.opacities[l]=c,n=n||u.text.placed||u.icon.placed)}}n?this.lastPlacementChangeTime=t:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=e?e.lastPlacementChangeTime:t)},Pt.prototype.updateLayerOpacities=function(e,t){for(var n={},r=0,a=t;r<a.length;r+=1){var i=a[r],o=i.getBucket(e);o&&i.latestFeatureIndex&&e.id===o.layerIds[0]&&this.updateBucketOpacities(o,n,i.collisionBoxArray)}},Pt.prototype.updateBucketOpacities=function(e,t,n){e.hasTextData()&&e.text.opacityVertexArray.clear(),e.hasIconData()&&e.icon.opacityVertexArray.clear(),e.hasCollisionBoxData()&&e.collisionBox.collisionVertexArray.clear(),e.hasCollisionCircleData()&&e.collisionCircle.collisionVertexArray.clear();for(var r=e.layers[0].layout,a=new St(null,0,!1,!1,!0),i=new St(null,0,r.get("text-allow-overlap"),r.get("icon-allow-overlap"),!0),o=0;o<e.symbolInstances.length;o++){var s=e.symbolInstances[o],l=t[s.crossTileID],u=this.opacities[s.crossTileID];l?u=a:u||(u=i,this.opacities[s.crossTileID]=u),t[s.crossTileID]=!0;var c=s.numGlyphVertices>0||s.numVerticalGlyphVertices>0,f=s.numIconVertices>0;if(c){for(var d=Bt(u.text),p=(s.numGlyphVertices+s.numVerticalGlyphVertices)/4,h=0;h<p;h++)e.text.opacityVertexArray.emplaceBack(d);for(var m=0,v=s.placedTextSymbolIndices;m<v.length;m+=1){var g=v[m];e.text.placedSymbolArray.get(g).hidden=u.text.isHidden()}}if(f){for(var y=Bt(u.icon),b=0;b<s.numIconVertices/4;b++)e.icon.opacityVertexArray.emplaceBack(y);e.icon.placedSymbolArray.get(o).hidden=u.icon.isHidden()}s.collisionArrays||(s.collisionArrays=e.deserializeCollisionBoxes(n,s.textBoxStartIndex,s.textBoxEndIndex,s.iconBoxStartIndex,s.iconBoxEndIndex));var x=s.collisionArrays;if(x){x.textBox&&e.hasCollisionBoxData()&&Rt(e.collisionBox.collisionVertexArray,u.text.placed,!1),x.iconBox&&e.hasCollisionBoxData()&&Rt(e.collisionBox.collisionVertexArray,u.icon.placed,!1);var _=x.textCircles;if(_&&e.hasCollisionCircleData())for(var w=0;w<_.length;w+=5){var T=l||0===_[w+4];Rt(e.collisionCircle.collisionVertexArray,u.text.placed,T)}}}e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasCollisionBoxData()&&e.collisionBox.collisionVertexBuffer&&e.collisionBox.collisionVertexBuffer.updateData(e.collisionBox.collisionVertexArray),e.hasCollisionCircleData()&&e.collisionCircle.collisionVertexBuffer&&e.collisionCircle.collisionVertexBuffer.updateData(e.collisionCircle.collisionVertexArray)},Pt.prototype.symbolFadeChange=function(e){return 0===this.fadeDuration?1:(e-this.commitTime)/this.fadeDuration},Pt.prototype.hasTransitions=function(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration},Pt.prototype.stillRecent=function(e){return"undefined"!==this.commitTime&&this.commitTime+this.fadeDuration>e},Pt.prototype.setStale=function(){this.stale=!0};var Lt=Math.pow(2,25),Dt=Math.pow(2,24),It=Math.pow(2,17),zt=Math.pow(2,16),jt=Math.pow(2,9),Nt=Math.pow(2,8),Ft=Math.pow(2,1);function Bt(e){if(0===e.opacity&&!e.placed)return 0;if(1===e.opacity&&e.placed)return 4294967295;var t=e.placed?1:0,n=Math.floor(127*e.opacity);return n*Lt+t*Dt+n*It+t*zt+n*jt+t*Nt+n*Ft+t}var Vt=function(){this._currentTileIndex=0,this._seenCrossTileIDs={}};Vt.prototype.continuePlacement=function(e,t,n,r,a){for(;this._currentTileIndex<e.length;){var i=e[this._currentTileIndex];if(t.placeLayerTile(r,i,n,this._seenCrossTileIDs),this._currentTileIndex++,a())return!0}};var Ut=function(e,t,n,r,a){this.placement=new Pt(e,a),this._currentPlacementIndex=t.length-1,this._forceFullPlacement=n,this._showCollisionBoxes=r,this._done=!1};Ut.prototype.isDone=function(){return this._done},Ut.prototype.continuePlacement=function(e,t,n){for(var r=this,a=i.now(),o=function(){var e=i.now()-a;return!r._forceFullPlacement&&e>2};this._currentPlacementIndex>=0;){var s=t[e[r._currentPlacementIndex]],l=r.placement.collisionIndex.transform.zoom;if("symbol"===s.type&&(!s.minzoom||s.minzoom<=l)&&(!s.maxzoom||s.maxzoom>l)){if(r._inProgressLayer||(r._inProgressLayer=new Vt),r._inProgressLayer.continuePlacement(n[s.source],r.placement,r._showCollisionBoxes,s,o))return;delete r._inProgressLayer}r._currentPlacementIndex--}this._done=!0},Ut.prototype.commit=function(e,t){return this.placement.commit(e,t),this.placement};var Gt=512/e.default$8/2,Ht=function(e,t,n){this.tileID=e,this.indexedSymbolInstances={},this.bucketInstanceId=n;for(var r=0,a=t;r<a.length;r+=1){var i=a[r],o=i.key;this.indexedSymbolInstances[o]||(this.indexedSymbolInstances[o]=[]),this.indexedSymbolInstances[o].push({crossTileID:i.crossTileID,coord:this.getScaledCoordinates(i,e)})}};Ht.prototype.getScaledCoordinates=function(t,n){var r=n.canonical.z-this.tileID.canonical.z,a=Gt/Math.pow(2,r),i=t.anchor;return{x:Math.floor((n.canonical.x*e.default$8+i.x)*a),y:Math.floor((n.canonical.y*e.default$8+i.y)*a)}},Ht.prototype.findMatches=function(e,t,n){for(var r=this.tileID.canonical.z<t.canonical.z?1:Math.pow(2,this.tileID.canonical.z-t.canonical.z),a=0,i=e;a<i.length;a+=1){var o=i[a];if(!o.crossTileID){var s=this.indexedSymbolInstances[o.key];if(s)for(var l=this.getScaledCoordinates(o,t),u=0,c=s;u<c.length;u+=1){var f=c[u];if(Math.abs(f.coord.x-l.x)<=r&&Math.abs(f.coord.y-l.y)<=r&&!n[f.crossTileID]){n[f.crossTileID]=!0,o.crossTileID=f.crossTileID;break}}}}};var Wt=function(){this.maxCrossTileID=0};Wt.prototype.generate=function(){return++this.maxCrossTileID};var qt=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};qt.prototype.handleWrapJump=function(e){var t=Math.round((e-this.lng)/360);if(0!==t)for(var n in this.indexes){var r=this.indexes[n],a={};for(var i in r){var o=r[i];o.tileID=o.tileID.unwrapTo(o.tileID.wrap+t),a[o.tileID.key]=o}this.indexes[n]=a}this.lng=e},qt.prototype.addBucket=function(e,t,n){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===t.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(var r=0,a=t.symbolInstances;r<a.length;r+=1)a[r].crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]={});var i=this.usedCrossTileIDs[e.overscaledZ];for(var o in this.indexes){var s=this.indexes[o];if(Number(o)>e.overscaledZ)for(var l in s){var u=s[l];u.tileID.isChildOf(e)&&u.findMatches(t.symbolInstances,e,i)}else{var c=s[e.scaledTo(Number(o)).key];c&&c.findMatches(t.symbolInstances,e,i)}}for(var f=0,d=t.symbolInstances;f<d.length;f+=1){var p=d[f];p.crossTileID||(p.crossTileID=n.generate(),i[p.crossTileID]=!0)}return void 0===this.indexes[e.overscaledZ]&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new Ht(e,t.symbolInstances,t.bucketInstanceId),!0},qt.prototype.removeBucketCrossTileIDs=function(e,t){for(var n in t.indexedSymbolInstances)for(var r=0,a=t.indexedSymbolInstances[n];r<a.length;r+=1){var i=a[r];delete this.usedCrossTileIDs[e][i.crossTileID]}},qt.prototype.removeStaleBuckets=function(e){var t=!1;for(var n in this.indexes){var r=this.indexes[n];for(var a in r)e[r[a].bucketInstanceId]||(this.removeBucketCrossTileIDs(n,r[a]),delete r[a],t=!0)}return t};var Yt=function(){this.layerIndexes={},this.crossTileIDs=new Wt,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Yt.prototype.addLayer=function(e,t,n){var r=this.layerIndexes[e.id];void 0===r&&(r=this.layerIndexes[e.id]=new qt);var a=!1,i={};r.handleWrapJump(n);for(var o=0,s=t;o<s.length;o+=1){var l=s[o],u=l.getBucket(e);u&&e.id===u.layerIds[0]&&(u.bucketInstanceId||(u.bucketInstanceId=++this.maxBucketInstanceId),r.addBucket(l.tileID,u,this.crossTileIDs)&&(a=!0),i[u.bucketInstanceId]=!0)}return r.removeStaleBuckets(i)&&(a=!0),a},Yt.prototype.pruneUnusedLayers=function(e){var t={};for(var n in e.forEach(function(e){t[e]=!0}),this.layerIndexes)t[n]||delete this.layerIndexes[n]};var Xt=function(t,n){return e.emitValidationErrors(t,n&&n.filter(function(e){return"source.canvas"!==e.identifier}))},Zt=e.pick(tt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),$t=e.pick(tt,["setCenter","setZoom","setBearing","setPitch"]),Kt=function(t){function n(r,a){var i=this;void 0===a&&(a={}),t.call(this),this.map=r,this.dispatcher=new G((Ke||(Ke=new Je),Ke),this),this.imageManager=new R,this.glyphManager=new N(r._transformRequest,a.localIdeographFontFamily),this.lineAtlas=new U(256,512),this.crossTileSymbolIndex=new Yt,this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new e.default$23,this._loaded=!1,this._resetUpdates();var o=this;this._rtlTextPluginCallback=n.registerForPluginAvailability(function(e){for(var t in o.dispatcher.broadcast("loadRTLTextPlugin",e.pluginURL,e.completionCallback),o.sourceCaches)o.sourceCaches[t].reload()}),this.on("data",function(e){if("source"===e.dataType&&"metadata"===e.sourceDataType){var t=i.sourceCaches[e.sourceId];if(t){var n=t.getSource();if(n&&n.vectorLayerIds)for(var r in i._layers){var a=i._layers[r];a.source===n.id&&i._validateLayer(a)}}}})}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.loadURL=function(t,n){var r=this;void 0===n&&(n={}),this.fire(new e.Event("dataloading",{dataType:"style"}));var a="boolean"==typeof n.validate?n.validate:!b(t);t=function(e,t){if(!b(e))return e;var n=C(e);return n.path="/styles/v1"+n.path,y(n,t)}(t,n.accessToken);var i=this.map._transformRequest(t,e.ResourceType.Style);e.getJSON(i,function(t,n){t?r.fire(new e.ErrorEvent(t)):n&&r._load(n,a)})},n.prototype.loadJSON=function(t,n){var r=this;void 0===n&&(n={}),this.fire(new e.Event("dataloading",{dataType:"style"})),i.frame(function(){r._load(t,!1!==n.validate)})},n.prototype._load=function(t,n){var r=this;if(!n||!Xt(this,e.validateStyle(t))){for(var a in this._loaded=!0,this.stylesheet=t,t.sources)r.addSource(a,t.sources[a],{validate:!1});t.sprite?function(t,n,r){var a,o,s,l=i.devicePixelRatio>1?"@2x":"";function u(){if(s)r(s);else if(a&&o){var t=i.getImageData(o),n={};for(var l in a){var u=a[l],c=u.width,f=u.height,d=u.x,p=u.y,h=u.sdf,m=u.pixelRatio,v=new e.RGBAImage({width:c,height:f});e.RGBAImage.copy(t,v,{x:d,y:p},{x:0,y:0},{width:c,height:f}),n[l]={data:v,pixelRatio:m,sdf:h}}r(null,n)}}e.getJSON(n(_(t,l,".json"),e.ResourceType.SpriteJSON),function(e,t){s||(s=e,a=t,u())}),e.getImage(n(_(t,l,".png"),e.ResourceType.SpriteImage),function(e,t){s||(s=e,o=t,u())})}(t.sprite,this.map._transformRequest,function(t,n){if(t)r.fire(new e.ErrorEvent(t));else if(n)for(var a in n)r.imageManager.addImage(a,n[a]);r.imageManager.setLoaded(!0),r.fire(new e.Event("data",{dataType:"style"}))}):this.imageManager.setLoaded(!0),this.glyphManager.setURL(t.glyphs);var o=et(this.stylesheet.layers);this._order=o.map(function(e){return e.id}),this._layers={};for(var s=0,l=o;s<l.length;s+=1){var u=l[s];(u=e.default$22(u)).setEventedParent(r,{layer:{id:u.id}}),r._layers[u.id]=u}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new V(this.stylesheet.light),this.fire(new e.Event("data",{dataType:"style"})),this.fire(new e.Event("style.load"))}},n.prototype._validateLayer=function(t){var n=this.sourceCaches[t.source];if(n){var r=t.sourceLayer;if(r){var a=n.getSource();("geojson"===a.type||a.vectorLayerIds&&-1===a.vectorLayerIds.indexOf(r))&&this.fire(new e.ErrorEvent(new Error('Source layer "'+r+'" does not exist on source "'+a.id+'" as specified by style layer "'+t.id+'"')))}}},n.prototype.loaded=function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var e in this.sourceCaches)if(!this.sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()},n.prototype._serializeLayers=function(e){var t=this;return e.map(function(e){return t._layers[e].serialize()})},n.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var e in this.sourceCaches)if(this.sourceCaches[e].hasTransition())return!0;for(var t in this._layers)if(this._layers[t].hasTransition())return!0;return!1},n.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},n.prototype.update=function(t){if(this._loaded){if(this._changed){var n=Object.keys(this._updatedLayers),r=Object.keys(this._removedLayers);for(var a in(n.length||r.length)&&this._updateWorkerLayers(n,r),this._updatedSources){var i=this._updatedSources[a];"reload"===i?this._reloadSource(a):"clear"===i&&this._clearSource(a)}for(var o in this._updatedPaintProps)this._layers[o].updateTransitions(t);this.light.updateTransitions(t),this._resetUpdates(),this.fire(new e.Event("data",{dataType:"style"}))}for(var s in this.sourceCaches)this.sourceCaches[s].used=!1;for(var l=0,u=this._order;l<u.length;l+=1){var c=u[l],f=this._layers[c];f.recalculate(t),!f.isHidden(t.zoom)&&f.source&&(this.sourceCaches[f.source].used=!0)}this.light.recalculate(t),this.z=t.zoom}},n.prototype._updateWorkerLayers=function(e,t){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(e),removedIds:t})},n.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={}},n.prototype.setState=function(t){var n=this;if(this._checkLoaded(),Xt(this,e.validateStyle(t)))return!1;(t=e.clone(t)).layers=et(t.layers);var r=function(t,n){if(!t)return[{command:tt.setStyle,args:[n]}];var r=[];try{if(!e.default$10(t.version,n.version))return[{command:tt.setStyle,args:[n]}];e.default$10(t.center,n.center)||r.push({command:tt.setCenter,args:[n.center]}),e.default$10(t.zoom,n.zoom)||r.push({command:tt.setZoom,args:[n.zoom]}),e.default$10(t.bearing,n.bearing)||r.push({command:tt.setBearing,args:[n.bearing]}),e.default$10(t.pitch,n.pitch)||r.push({command:tt.setPitch,args:[n.pitch]}),e.default$10(t.sprite,n.sprite)||r.push({command:tt.setSprite,args:[n.sprite]}),e.default$10(t.glyphs,n.glyphs)||r.push({command:tt.setGlyphs,args:[n.glyphs]}),e.default$10(t.transition,n.transition)||r.push({command:tt.setTransition,args:[n.transition]}),e.default$10(t.light,n.light)||r.push({command:tt.setLight,args:[n.light]});var a={},i=[];!function(t,n,r,a){var i;for(i in n=n||{},t=t||{})t.hasOwnProperty(i)&&(n.hasOwnProperty(i)||rt(i,r,a));for(i in n)n.hasOwnProperty(i)&&(t.hasOwnProperty(i)?e.default$10(t[i],n[i])||("geojson"===t[i].type&&"geojson"===n[i].type&&it(t,n,i)?r.push({command:tt.setGeoJSONSourceData,args:[i,n[i].data]}):at(i,n,r,a)):nt(i,n,r))}(t.sources,n.sources,i,a);var o=[];t.layers&&t.layers.forEach(function(e){a[e.source]?r.push({command:tt.removeLayer,args:[e.id]}):o.push(e)}),r=r.concat(i),function(t,n,r){n=n||[];var a,i,o,s,l,u,c,f=(t=t||[]).map(st),d=n.map(st),p=t.reduce(lt,{}),h=n.reduce(lt,{}),m=f.slice(),v=Object.create(null);for(a=0,i=0;a<f.length;a++)o=f[a],h.hasOwnProperty(o)?i++:(r.push({command:tt.removeLayer,args:[o]}),m.splice(m.indexOf(o,i),1));for(a=0,i=0;a<d.length;a++)o=d[d.length-1-a],m[m.length-1-a]!==o&&(p.hasOwnProperty(o)?(r.push({command:tt.removeLayer,args:[o]}),m.splice(m.lastIndexOf(o,m.length-i),1)):i++,u=m[m.length-a],r.push({command:tt.addLayer,args:[h[o],u]}),m.splice(m.length-a,0,o),v[o]=!0);for(a=0;a<d.length;a++)if(s=p[o=d[a]],l=h[o],!v[o]&&!e.default$10(s,l))if(e.default$10(s.source,l.source)&&e.default$10(s["source-layer"],l["source-layer"])&&e.default$10(s.type,l.type)){for(c in ot(s.layout,l.layout,r,o,null,tt.setLayoutProperty),ot(s.paint,l.paint,r,o,null,tt.setPaintProperty),e.default$10(s.filter,l.filter)||r.push({command:tt.setFilter,args:[o,l.filter]}),e.default$10(s.minzoom,l.minzoom)&&e.default$10(s.maxzoom,l.maxzoom)||r.push({command:tt.setLayerZoomRange,args:[o,l.minzoom,l.maxzoom]}),s)s.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?ot(s[c],l[c],r,o,c.slice(6),tt.setPaintProperty):e.default$10(s[c],l[c])||r.push({command:tt.setLayerProperty,args:[o,c,l[c]]}));for(c in l)l.hasOwnProperty(c)&&!s.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?ot(s[c],l[c],r,o,c.slice(6),tt.setPaintProperty):e.default$10(s[c],l[c])||r.push({command:tt.setLayerProperty,args:[o,c,l[c]]}))}else r.push({command:tt.removeLayer,args:[o]}),u=m[m.lastIndexOf(o)+1],r.push({command:tt.addLayer,args:[l,u]})}(o,n.layers,r)}catch(e){console.warn("Unable to compute style diff:",e),r=[{command:tt.setStyle,args:[n]}]}return r}(this.serialize(),t).filter(function(e){return!(e.command in $t)});if(0===r.length)return!1;var a=r.filter(function(e){return!(e.command in Zt)});if(a.length>0)throw new Error("Unimplemented: "+a.map(function(e){return e.command}).join(", ")+".");return r.forEach(function(e){"setTransition"!==e.command&&n[e.command].apply(n,e.args)}),this.stylesheet=t,!0},n.prototype.addImage=function(t,n){if(this.getImage(t))return this.fire(new e.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(t,n),this.fire(new e.Event("data",{dataType:"style"}))},n.prototype.getImage=function(e){return this.imageManager.getImage(e)},n.prototype.removeImage=function(t){if(!this.getImage(t))return this.fire(new e.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(t),this.fire(new e.Event("data",{dataType:"style"}))},n.prototype.addSource=function(t,n,r){var a=this;if(this._checkLoaded(),void 0!==this.sourceCaches[t])throw new Error("There is already a source with this ID");if(!n.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(n).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(n.type)>=0&&this._validate(e.validateStyle.source,"sources."+t,n,null,r))){this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);var i=this.sourceCaches[t]=new Ye(t,n,this.dispatcher);i.style=this,i.setEventedParent(this,function(){return{isSourceLoaded:a.loaded(),source:i.serialize(),sourceId:t}}),i.onAdd(this.map),this._changed=!0}},n.prototype.removeSource=function(t){if(this._checkLoaded(),void 0===this.sourceCaches[t])throw new Error("There is no source with this ID");for(var n in this._layers)if(this._layers[n].source===t)return this.fire(new e.ErrorEvent(new Error('Source "'+t+'" cannot be removed while layer "'+n+'" is using it.')));var r=this.sourceCaches[t];delete this.sourceCaches[t],delete this._updatedSources[t],r.fire(new e.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:t})),r.setEventedParent(null),r.clearTiles(),r.onRemove&&r.onRemove(this.map),this._changed=!0},n.prototype.setGeoJSONSourceData=function(e,t){this._checkLoaded(),this.sourceCaches[e].getSource().setData(t),this._changed=!0},n.prototype.getSource=function(e){return this.sourceCaches[e]&&this.sourceCaches[e].getSource()},n.prototype.addLayer=function(t,n,r){this._checkLoaded();var a=t.id;if(this.getLayer(a))this.fire(new e.ErrorEvent(new Error('Layer with id "'+a+'" already exists on this map')));else if("object"==typeof t.source&&(this.addSource(a,t.source),t=e.clone(t),t=e.extend(t,{source:a})),!this._validate(e.validateStyle.layer,"layers."+a,t,{arrayIndex:-1},r)){var i=e.default$22(t);this._validateLayer(i),i.setEventedParent(this,{layer:{id:a}});var o=n?this._order.indexOf(n):this._order.length;if(n&&-1===o)this.fire(new e.ErrorEvent(new Error('Layer with id "'+n+'" does not exist on this map.')));else{if(this._order.splice(o,0,a),this._layerOrderChanged=!0,this._layers[a]=i,this._removedLayers[a]&&i.source){var s=this._removedLayers[a];delete this._removedLayers[a],s.type!==i.type?this._updatedSources[i.source]="clear":(this._updatedSources[i.source]="reload",this.sourceCaches[i.source].pause())}this._updateLayer(i)}}},n.prototype.moveLayer=function(t,n){if(this._checkLoaded(),this._changed=!0,this._layers[t]){if(t!==n){var r=this._order.indexOf(t);this._order.splice(r,1);var a=n?this._order.indexOf(n):this._order.length;n&&-1===a?this.fire(new e.ErrorEvent(new Error('Layer with id "'+n+'" does not exist on this map.'))):(this._order.splice(a,0,t),this._layerOrderChanged=!0)}}else this.fire(new e.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be moved.")))},n.prototype.removeLayer=function(t){this._checkLoaded();var n=this._layers[t];if(n){n.setEventedParent(null);var r=this._order.indexOf(t);this._order.splice(r,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=n,delete this._layers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t]}else this.fire(new e.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be removed.")))},n.prototype.getLayer=function(e){return this._layers[e]},n.prototype.setLayerZoomRange=function(t,n,r){this._checkLoaded();var a=this.getLayer(t);a?a.minzoom===n&&a.maxzoom===r||(null!=n&&(a.minzoom=n),null!=r&&(a.maxzoom=r),this._updateLayer(a)):this.fire(new e.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot have zoom extent.")))},n.prototype.setFilter=function(t,n){this._checkLoaded();var r=this.getLayer(t);if(r){if(!e.default$10(r.filter,n))return null==n?(r.filter=void 0,void this._updateLayer(r)):void(this._validate(e.validateStyle.filter,"layers."+r.id+".filter",n)||(r.filter=e.clone(n),this._updateLayer(r)))}else this.fire(new e.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be filtered.")))},n.prototype.getFilter=function(t){return e.clone(this.getLayer(t).filter)},n.prototype.setLayoutProperty=function(t,n,r){this._checkLoaded();var a=this.getLayer(t);a?e.default$10(a.getLayoutProperty(n),r)||(a.setLayoutProperty(n,r),this._updateLayer(a)):this.fire(new e.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be styled.")))},n.prototype.getLayoutProperty=function(e,t){return this.getLayer(e).getLayoutProperty(t)},n.prototype.setPaintProperty=function(t,n,r){this._checkLoaded();var a=this.getLayer(t);if(a){if(!e.default$10(a.getPaintProperty(n),r)){var i=a._transitionablePaint._values[n].value.isDataDriven();a.setPaintProperty(n,r),(a._transitionablePaint._values[n].value.isDataDriven()||i)&&this._updateLayer(a),this._changed=!0,this._updatedPaintProps[t]=!0}}else this.fire(new e.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be styled.")))},n.prototype.getPaintProperty=function(e,t){return this.getLayer(e).getPaintProperty(t)},n.prototype.getTransition=function(){return e.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},n.prototype.serialize=function(){var t=this;return e.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:e.mapObject(this.sourceCaches,function(e){return e.serialize()}),layers:this._order.map(function(e){return t._layers[e].serialize()})},function(e){return void 0!==e})},n.prototype._updateLayer=function(e){this._updatedLayers[e.id]=!0,e.source&&!this._updatedSources[e.source]&&(this._updatedSources[e.source]="reload",this.sourceCaches[e.source].pause()),this._changed=!0},n.prototype._flattenRenderedFeatures=function(e){for(var t=[],n=this._order.length-1;n>=0;n--)for(var r=this._order[n],a=0,i=e;a<i.length;a+=1){var o=i[a][r];if(o)for(var s=0,l=o;s<l.length;s+=1){var u=l[s];t.push(u)}}return t},n.prototype.queryRenderedFeatures=function(t,n,r){n&&n.filter&&this._validate(e.validateStyle.filter,"queryRenderedFeatures.filter",n.filter);var a={};if(n&&n.layers){if(!Array.isArray(n.layers))return this.fire(new e.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var i=0,o=n.layers;i<o.length;i+=1){var s=o[i],l=this._layers[s];if(!l)return this.fire(new e.ErrorEvent(new Error("The layer '"+s+"' does not exist in the map's style and cannot be queried for features."))),[];a[l.source]=!0}}var u=[];for(var c in this.sourceCaches)n.layers&&!a[c]||u.push(ie(this.sourceCaches[c],this._layers,t.worldCoordinate,n,r));return this.placement&&u.push(function(e,t,n,r,a){for(var i={},o=r.queryRenderedSymbols(t),s=[],l=0,u=Object.keys(o).map(Number);l<u.length;l+=1){var c=u[l];s.push(a[c])}s.sort(oe);for(var f=function(){var t=p[d],r=t.featureIndex.lookupSymbolFeatures(o[t.bucketInstanceId],t.bucketIndex,t.sourceLayerIndex,n.filter,n.layers,e);for(var a in r){var s=i[a]=i[a]||[],l=r[a];l.sort(function(e,n){var r=t.featureSortOrder;if(r){var a=r.indexOf(e.featureIndex);return r.indexOf(n.featureIndex)-a}return n.featureIndex-e.featureIndex});for(var u=0,c=l;u<c.length;u+=1){var f=c[u];s.push(f.feature)}}},d=0,p=s;d<p.length;d+=1)f();return i}(this._layers,t.viewport,n,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenRenderedFeatures(u)},n.prototype.querySourceFeatures=function(t,n){n&&n.filter&&this._validate(e.validateStyle.filter,"querySourceFeatures.filter",n.filter);var r=this.sourceCaches[t];return r?function(e,t){for(var n=e.getRenderableIds().map(function(t){return e.getTileByID(t)}),r=[],a={},i=0;i<n.length;i++){var o=n[i],s=o.tileID.canonical.key;a[s]||(a[s]=!0,o.querySourceFeatures(r,t))}return r}(r,n):[]},n.prototype.addSourceType=function(e,t,r){return n.getSourceType(e)?r(new Error('A source type called "'+e+'" already exists.')):(n.setSourceType(e,t),t.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:e,url:t.workerSourceURL},r):r(null,null))},n.prototype.getLight=function(){return this.light.getLight()},n.prototype.setLight=function(t){this._checkLoaded();var n=this.light.getLight(),r=!1;for(var a in t)if(!e.default$10(t[a],n[a])){r=!0;break}if(r){var o={now:i.now(),transition:e.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(t),this.light.updateTransitions(o)}},n.prototype._validate=function(t,n,r,a,i){return(!i||!1!==i.validate)&&Xt(this,t.call(e.validateStyle,e.extend({key:n,style:this.serialize(),value:r,styleSpec:e.default$5},a)))},n.prototype._remove=function(){for(var t in e.evented.off("pluginAvailable",this._rtlTextPluginCallback),this.sourceCaches)this.sourceCaches[t].clearTiles();this.dispatcher.remove()},n.prototype._clearSource=function(e){this.sourceCaches[e].clearTiles()},n.prototype._reloadSource=function(e){this.sourceCaches[e].resume(),this.sourceCaches[e].reload()},n.prototype._updateSources=function(e){for(var t in this.sourceCaches)this.sourceCaches[t].update(e)},n.prototype._generateCollisionBoxes=function(){for(var e in this.sourceCaches)this._reloadSource(e)},n.prototype._updatePlacement=function(e,t,n){for(var r=!1,a=!1,o={},s=0,l=this._order;s<l.length;s+=1){var u=l[s],c=this._layers[u];if("symbol"===c.type){if(!o[c.source]){var f=this.sourceCaches[c.source];o[c.source]=f.getRenderableIds().map(function(e){return f.getTileByID(e)}).sort(function(e,t){return t.tileID.overscaledZ-e.tileID.overscaledZ||(e.tileID.isLessThan(t.tileID)?-1:1)})}var d=this.crossTileSymbolIndex.addLayer(c,o[c.source],e.center.lng);r=r||d}}this.crossTileSymbolIndex.pruneUnusedLayers(this._order);var p=this._layerOrderChanged;if((p||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(i.now()))&&(this.pauseablePlacement=new Ut(e,this._order,p,t,n),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,o),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(this.placement,i.now()),a=!0),r&&this.pauseablePlacement.placement.setStale()),a||r)for(var h=0,m=this._order;h<m.length;h+=1){var v=m[h],g=this._layers[v];"symbol"===g.type&&this.placement.updateLayerOpacities(g,o[g.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(i.now())},n.prototype.getImages=function(e,t,n){this.imageManager.getImages(t.icons,n)},n.prototype.getGlyphs=function(e,t,n){this.glyphManager.getGlyphs(t.stacks,n)},n}(e.Evented);Kt.getSourceType=function(e){return re[e]},Kt.setSourceType=function(e,t){re[e]=t},Kt.registerForPluginAvailability=e.registerForPluginAvailability;var Jt=e.createLayout([{name:"a_pos",type:"Int16",components:2}]),Qt={prelude:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n\n// Unpack a pair of values that have been packed into a single float.\n// The packed values are assumed to be 8-bit unsigned integers, and are\n// packed like so:\n// packedValue = floor(input[0]) * 256 + input[1],\nvec2 unpack_float(const float packedValue) {\n    int packedIntValue = int(packedValue);\n    int v0 = packedIntValue / 256;\n    return vec2(v0, packedIntValue - v0 * 256);\n}\n\nvec2 unpack_opacity(const float packedOpacity) {\n    int intOpacity = int(packedOpacity) / 2;\n    return vec2(float(intOpacity) / 127.0, mod(packedOpacity, 2.0));\n}\n\n// To minimize the number of attributes needed, we encode a 4-component\n// color into a pair of floats (i.e. a vec2) as follows:\n// [ floor(color.r * 255) * 256 + color.g * 255,\n//   floor(color.b * 255) * 256 + color.g * 255 ]\nvec4 decode_color(const vec2 encodedColor) {\n    return vec4(\n        unpack_float(encodedColor[0]) / 255.0,\n        unpack_float(encodedColor[1]) / 255.0\n    );\n}\n\n// Unpack a pair of paint values and interpolate between them.\nfloat unpack_mix_vec2(const vec2 packedValue, const float t) {\n    return mix(packedValue[0], packedValue[1], t);\n}\n\n// Unpack a pair of paint values and interpolate between them.\nvec4 unpack_mix_vec4(const vec4 packedColors, const float t) {\n    vec4 minColor = decode_color(vec2(packedColors[0], packedColors[1]));\n    vec4 maxColor = decode_color(vec2(packedColors[2], packedColors[3]));\n    return mix(minColor, maxColor, t);\n}\n\n// The offset depends on how many pixels are between the world origin and the edge of the tile:\n// vec2 offset = mod(pixel_coord, size)\n//\n// At high zoom levels there are a ton of pixels between the world origin and the edge of the tile.\n// The glsl spec only guarantees 16 bits of precision for highp floats. We need more than that.\n//\n// The pixel_coord is passed in as two 16 bit values:\n// pixel_coord_upper = floor(pixel_coord / 2^16)\n// pixel_coord_lower = mod(pixel_coord, 2^16)\n//\n// The offset is calculated in a series of steps that should preserve this precision:\nvec2 get_pattern_pos(const vec2 pixel_coord_upper, const vec2 pixel_coord_lower,\n    const vec2 pattern_size, const float tile_units_to_pixels, const vec2 pos) {\n\n    vec2 offset = mod(mod(mod(pixel_coord_upper, pattern_size) * 256.0, pattern_size) * 256.0 + pixel_coord_lower, pattern_size);\n    return (tile_units_to_pixels * pos + offset) / pattern_size;\n}\n"},background:{fragmentSource:"uniform vec4 u_color;\nuniform float u_opacity;\n\nvoid main() {\n    gl_FragColor = u_color * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},backgroundPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\nuniform float u_opacity;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\nvoid main() {\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    gl_FragColor = mix(color1, color2, u_mix) * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n}\n"},circle:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvarying vec3 v_data;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize highp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    vec2 extrude = v_data.xy;\n    float extrude_length = length(extrude);\n\n    lowp float antialiasblur = v_data.z;\n    float antialiased_blur = -max(blur, antialiasblur);\n\n    float opacity_t = smoothstep(0.0, antialiased_blur, extrude_length - 1.0);\n\n    float color_t = stroke_width < 0.01 ? 0.0 : smoothstep(\n        antialiased_blur,\n        0.0,\n        extrude_length - radius / (radius + stroke_width)\n    );\n\n    gl_FragColor = opacity_t * mix(color * opacity, stroke_color * stroke_opacity, color_t);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform bool u_scale_with_map;\nuniform bool u_pitch_with_map;\nuniform vec2 u_extrude_scale;\nuniform highp float u_camera_to_center_distance;\n\nattribute vec2 a_pos;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvarying vec3 v_data;\n\nvoid main(void) {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize highp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    vec2 extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    vec2 circle_center = floor(a_pos * 0.5);\n    if (u_pitch_with_map) {\n        vec2 corner_position = circle_center;\n        if (u_scale_with_map) {\n            corner_position += extrude * (radius + stroke_width) * u_extrude_scale;\n        } else {\n            // Pitching the circle with the map effectively scales it with the map\n            // To counteract the effect for pitch-scale: viewport, we rescale the\n            // whole circle based on the pitch scaling effect at its central point\n            vec4 projected_center = u_matrix * vec4(circle_center, 0, 1);\n            corner_position += extrude * (radius + stroke_width) * u_extrude_scale * (projected_center.w / u_camera_to_center_distance);\n        }\n\n        gl_Position = u_matrix * vec4(corner_position, 0, 1);\n    } else {\n        gl_Position = u_matrix * vec4(circle_center, 0, 1);\n\n        if (u_scale_with_map) {\n            gl_Position.xy += extrude * (radius + stroke_width) * u_extrude_scale * u_camera_to_center_distance;\n        } else {\n            gl_Position.xy += extrude * (radius + stroke_width) * u_extrude_scale * gl_Position.w;\n        }\n    }\n\n    // This is a minimum blur distance that serves as a faux-antialiasing for\n    // the circle. since blur is a ratio of the circle's size and the intent is\n    // to keep the blur at roughly 1px, the two are inversely related.\n    lowp float antialiasblur = 1.0 / DEVICE_PIXEL_RATIO / (radius + stroke_width);\n\n    v_data = vec3(extrude.x, extrude.y, antialiasblur);\n}\n"},clippingMask:{fragmentSource:"void main() {\n    gl_FragColor = vec4(1.0);\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},heatmap:{fragmentSource:"#pragma mapbox: define highp float weight\n\nuniform highp float u_intensity;\nvarying vec2 v_extrude;\n\n// Gaussian kernel coefficient: 1 / sqrt(2 * PI)\n#define GAUSS_COEF 0.3989422804014327\n\nvoid main() {\n    #pragma mapbox: initialize highp float weight\n\n    // Kernel density estimation with a Gaussian kernel of size 5x5\n    float d = -0.5 * 3.0 * 3.0 * dot(v_extrude, v_extrude);\n    float val = weight * u_intensity * GAUSS_COEF * exp(d);\n\n    gl_FragColor = vec4(val, 1.0, 1.0, 1.0);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\n\nuniform mat4 u_matrix;\nuniform float u_extrude_scale;\nuniform float u_opacity;\nuniform float u_intensity;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_extrude;\n\n// Effective \"0\" in the kernel density texture to adjust the kernel size to;\n// this empirically chosen number minimizes artifacts on overlapping kernels\n// for typical heatmap cases (assuming clustered source)\nconst highp float ZERO = 1.0 / 255.0 / 16.0;\n\n// Gaussian kernel coefficient: 1 / sqrt(2 * PI)\n#define GAUSS_COEF 0.3989422804014327\n\nvoid main(void) {\n    #pragma mapbox: initialize highp float weight\n    #pragma mapbox: initialize mediump float radius\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    vec2 unscaled_extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    // This 'extrude' comes in ranging from [-1, -1], to [1, 1].  We'll use\n    // it to produce the vertices of a square mesh framing the point feature\n    // we're adding to the kernel density texture.  We'll also pass it as\n    // a varying, so that the fragment shader can determine the distance of\n    // each fragment from the point feature.\n    // Before we do so, we need to scale it up sufficiently so that the\n    // kernel falls effectively to zero at the edge of the mesh.\n    // That is, we want to know S such that\n    // weight * u_intensity * GAUSS_COEF * exp(-0.5 * 3.0^2 * S^2) == ZERO\n    // Which solves to:\n    // S = sqrt(-2.0 * log(ZERO / (weight * u_intensity * GAUSS_COEF))) / 3.0\n    float S = sqrt(-2.0 * log(ZERO / weight / u_intensity / GAUSS_COEF)) / 3.0;\n\n    // Pass the varying in units of radius\n    v_extrude = S * unscaled_extrude;\n\n    // Scale by radius and the zoom-based scale factor to produce actual\n    // mesh position\n    vec2 extrude = v_extrude * radius * u_extrude_scale;\n\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    vec4 pos = vec4(floor(a_pos * 0.5) + extrude, 0, 1);\n\n    gl_Position = u_matrix * pos;\n}\n"},heatmapTexture:{fragmentSource:"uniform sampler2D u_image;\nuniform sampler2D u_color_ramp;\nuniform float u_opacity;\nvarying vec2 v_pos;\n\nvoid main() {\n    float t = texture2D(u_image, v_pos).r;\n    vec4 color = texture2D(u_color_ramp, vec2(t, 0.5));\n    gl_FragColor = color * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(0.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nattribute vec2 a_pos;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos * u_world, 0, 1);\n\n    v_pos.x = a_pos.x;\n    v_pos.y = 1.0 - a_pos.y;\n}\n"},collisionBox:{fragmentSource:"\nvarying float v_placed;\nvarying float v_notUsed;\n\nvoid main() {\n\n    float alpha = 0.5;\n\n    // Red = collision, hide label\n    gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0) * alpha;\n\n    // Blue = no collision, label is showing\n    if (v_placed > 0.5) {\n        gl_FragColor = vec4(0.0, 0.0, 1.0, 0.5) * alpha;\n    }\n\n    if (v_notUsed > 0.5) {\n        // This box not used, fade it out\n        gl_FragColor *= .1;\n    }\n}",vertexSource:"attribute vec2 a_pos;\nattribute vec2 a_anchor_pos;\nattribute vec2 a_extrude;\nattribute vec2 a_placed;\n\nuniform mat4 u_matrix;\nuniform vec2 u_extrude_scale;\nuniform float u_camera_to_center_distance;\n\nvarying float v_placed;\nvarying float v_notUsed;\n\nvoid main() {\n    vec4 projectedPoint = u_matrix * vec4(a_anchor_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    highp float collision_perspective_ratio = clamp(\n        0.5 + 0.5 * (u_camera_to_center_distance / camera_to_anchor_distance),\n        0.0, // Prevents oversized near-field boxes in pitched/overzoomed tiles\n        4.0);\n\n    gl_Position = u_matrix * vec4(a_pos, 0.0, 1.0);\n    gl_Position.xy += a_extrude * u_extrude_scale * gl_Position.w * collision_perspective_ratio;\n\n    v_placed = a_placed.x;\n    v_notUsed = a_placed.y;\n}\n"},collisionCircle:{fragmentSource:"uniform float u_overscale_factor;\n\nvarying float v_placed;\nvarying float v_notUsed;\nvarying float v_radius;\nvarying vec2 v_extrude;\nvarying vec2 v_extrude_scale;\n\nvoid main() {\n    float alpha = 0.5;\n\n    // Red = collision, hide label\n    vec4 color = vec4(1.0, 0.0, 0.0, 1.0) * alpha;\n\n    // Blue = no collision, label is showing\n    if (v_placed > 0.5) {\n        color = vec4(0.0, 0.0, 1.0, 0.5) * alpha;\n    }\n\n    if (v_notUsed > 0.5) {\n        // This box not used, fade it out\n        color *= .2;\n    }\n\n    float extrude_scale_length = length(v_extrude_scale);\n    float extrude_length = length(v_extrude) * extrude_scale_length;\n    float stroke_width = 15.0 * extrude_scale_length / u_overscale_factor;\n    float radius = v_radius * extrude_scale_length;\n\n    float distance_to_edge = abs(extrude_length - radius);\n    float opacity_t = smoothstep(-stroke_width, 0.0, -distance_to_edge);\n\n    gl_FragColor = opacity_t * color;\n}\n",vertexSource:"attribute vec2 a_pos;\nattribute vec2 a_anchor_pos;\nattribute vec2 a_extrude;\nattribute vec2 a_placed;\n\nuniform mat4 u_matrix;\nuniform vec2 u_extrude_scale;\nuniform float u_camera_to_center_distance;\n\nvarying float v_placed;\nvarying float v_notUsed;\nvarying float v_radius;\n\nvarying vec2 v_extrude;\nvarying vec2 v_extrude_scale;\n\nvoid main() {\n    vec4 projectedPoint = u_matrix * vec4(a_anchor_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    highp float collision_perspective_ratio = clamp(\n        0.5 + 0.5 * (u_camera_to_center_distance / camera_to_anchor_distance),\n        0.0, // Prevents oversized near-field circles in pitched/overzoomed tiles\n        4.0);\n\n    gl_Position = u_matrix * vec4(a_pos, 0.0, 1.0);\n\n    highp float padding_factor = 1.2; // Pad the vertices slightly to make room for anti-alias blur\n    gl_Position.xy += a_extrude * u_extrude_scale * padding_factor * gl_Position.w * collision_perspective_ratio;\n\n    v_placed = a_placed.x;\n    v_notUsed = a_placed.y;\n    v_radius = abs(a_extrude.y); // We don't pitch the circles, so both units of the extrusion vector are equal in magnitude to the radius\n\n    v_extrude = a_extrude * padding_factor;\n    v_extrude_scale = u_extrude_scale * u_camera_to_center_distance * collision_perspective_ratio;\n}\n"},debug:{fragmentSource:"uniform highp vec4 u_color;\n\nvoid main() {\n    gl_FragColor = u_color;\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},fill:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_FragColor = color * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},fillOutline:{fragmentSource:"#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_pos;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = 1.0 - smoothstep(0.0, 1.0, dist);\n    gl_FragColor = outline_color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\nuniform vec2 u_world;\n\nvarying vec2 v_pos;\n\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},fillOutlinePattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    // find distance to outline for alpha interpolation\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = 1.0 - smoothstep(0.0, 1.0, dist);\n\n\n    gl_FragColor = mix(color1, color2, u_mix) * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},fillPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    gl_FragColor = mix(color1, color2, u_mix) * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n}\n"},fillExtrusion:{fragmentSource:"varying vec4 v_color;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define highp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize highp vec4 color\n\n    gl_FragColor = v_color;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\n\nattribute vec2 a_pos;\nattribute vec4 a_normal_ed;\n\nvarying vec4 v_color;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\n#pragma mapbox: define highp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize highp vec4 color\n\n    vec3 normal = a_normal_ed.xyz;\n\n    base = max(0.0, base);\n    height = max(0.0, height);\n\n    float t = mod(normal.x, 2.0);\n\n    gl_Position = u_matrix * vec4(a_pos, t > 0.0 ? height : base, 1);\n\n    // Relative luminance (how dark/bright is the surface color?)\n    float colorvalue = color.r * 0.2126 + color.g * 0.7152 + color.b * 0.0722;\n\n    v_color = vec4(0.0, 0.0, 0.0, 1.0);\n\n    // Add slight ambient lighting so no extrusions are totally black\n    vec4 ambientlight = vec4(0.03, 0.03, 0.03, 1.0);\n    color += ambientlight;\n\n    // Calculate cos(theta), where theta is the angle between surface normal and diffuse light ray\n    float directional = clamp(dot(normal / 16384.0, u_lightpos), 0.0, 1.0);\n\n    // Adjust directional so that\n    // the range of values for highlight/shading is narrower\n    // with lower light intensity\n    // and with lighter/brighter surface colors\n    directional = mix((1.0 - u_lightintensity), max((1.0 - colorvalue + u_lightintensity), 1.0), directional);\n\n    // Add gradient along z axis of side surfaces\n    if (normal.y != 0.0) {\n        directional *= clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0);\n    }\n\n    // Assign final color based on surface + ambient light color, diffuse light directional, and light color\n    // with lower bounds adjusted to hue of light\n    // so that shading is tinted with the complementary (opposite) color to the light color\n    v_color.r += clamp(color.r * directional * u_lightcolor.r, mix(0.0, 0.3, 1.0 - u_lightcolor.r), 1.0);\n    v_color.g += clamp(color.g * directional * u_lightcolor.g, mix(0.0, 0.3, 1.0 - u_lightcolor.g), 1.0);\n    v_color.b += clamp(color.b * directional * u_lightcolor.b, mix(0.0, 0.3, 1.0 - u_lightcolor.b), 1.0);\n}\n"},fillExtrusionPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    vec4 mixedColor = mix(color1, color2, u_mix);\n\n    gl_FragColor = mixedColor * v_lighting;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\nuniform float u_height_factor;\n\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\n\nattribute vec2 a_pos;\nattribute vec4 a_normal_ed;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\nvarying float v_directional;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n\n    vec3 normal = a_normal_ed.xyz;\n    float edgedistance = a_normal_ed.w;\n\n    base = max(0.0, base);\n    height = max(0.0, height);\n\n    float t = mod(normal.x, 2.0);\n    float z = t > 0.0 ? height : base;\n\n    gl_Position = u_matrix * vec4(a_pos, z, 1);\n\n    vec2 pos = normal.x == 1.0 && normal.y == 0.0 && normal.z == 16384.0\n        ? a_pos // extrusion top\n        : vec2(edgedistance, z * u_height_factor); // extrusion side\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, pos);\n\n    v_lighting = vec4(0.0, 0.0, 0.0, 1.0);\n    float directional = clamp(dot(normal / 16383.0, u_lightpos), 0.0, 1.0);\n    directional = mix((1.0 - u_lightintensity), max((0.5 + u_lightintensity), 1.0), directional);\n\n    if (normal.y != 0.0) {\n        directional *= clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0);\n    }\n\n    v_lighting.rgb += clamp(directional * u_lightcolor, mix(vec3(0.0), vec3(0.3), 1.0 - u_lightcolor), vec3(1.0));\n}\n"},extrusionTexture:{fragmentSource:"uniform sampler2D u_image;\nuniform float u_opacity;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_FragColor = texture2D(u_image, v_pos) * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(0.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nattribute vec2 a_pos;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos * u_world, 0, 1);\n\n    v_pos.x = a_pos.x;\n    v_pos.y = 1.0 - a_pos.y;\n}\n"},hillshadePrepare:{fragmentSource:"#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D u_image;\nvarying vec2 v_pos;\nuniform vec2 u_dimension;\nuniform float u_zoom;\nuniform float u_maxzoom;\n\nfloat getElevation(vec2 coord, float bias) {\n    // Convert encoded elevation value to meters\n    vec4 data = texture2D(u_image, coord) * 255.0;\n    return (data.r + data.g * 256.0 + data.b * 256.0 * 256.0) / 4.0;\n}\n\nvoid main() {\n    vec2 epsilon = 1.0 / u_dimension;\n\n    // queried pixels:\n    // +-----------+\n    // |   |   |   |\n    // | a | b | c |\n    // |   |   |   |\n    // +-----------+\n    // |   |   |   |\n    // | d | e | f |\n    // |   |   |   |\n    // +-----------+\n    // |   |   |   |\n    // | g | h | i |\n    // |   |   |   |\n    // +-----------+\n\n    float a = getElevation(v_pos + vec2(-epsilon.x, -epsilon.y), 0.0);\n    float b = getElevation(v_pos + vec2(0, -epsilon.y), 0.0);\n    float c = getElevation(v_pos + vec2(epsilon.x, -epsilon.y), 0.0);\n    float d = getElevation(v_pos + vec2(-epsilon.x, 0), 0.0);\n    float e = getElevation(v_pos, 0.0);\n    float f = getElevation(v_pos + vec2(epsilon.x, 0), 0.0);\n    float g = getElevation(v_pos + vec2(-epsilon.x, epsilon.y), 0.0);\n    float h = getElevation(v_pos + vec2(0, epsilon.y), 0.0);\n    float i = getElevation(v_pos + vec2(epsilon.x, epsilon.y), 0.0);\n\n    // here we divide the x and y slopes by 8 * pixel size\n    // where pixel size (aka meters/pixel) is:\n    // circumference of the world / (pixels per tile * number of tiles)\n    // which is equivalent to: 8 * 40075016.6855785 / (512 * pow(2, u_zoom))\n    // which can be reduced to: pow(2, 19.25619978527 - u_zoom)\n    // we want to vertically exaggerate the hillshading though, because otherwise\n    // it is barely noticeable at low zooms. to do this, we multiply this by some\n    // scale factor pow(2, (u_zoom - u_maxzoom) * a) where a is an arbitrary value\n    // Here we use a=0.3 which works out to the expression below. see \n    // nickidlugash's awesome breakdown for more info\n    // https://github.com/mapbox/mapbox-gl-js/pull/5286#discussion_r148419556\n    float exaggeration = u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;\n\n    vec2 deriv = vec2(\n        (c + f + f + i) - (a + d + d + g),\n        (g + h + h + i) - (a + b + b + c)\n    ) /  pow(2.0, (u_zoom - u_maxzoom) * exaggeration + 19.2562 - u_zoom);\n\n    gl_FragColor = clamp(vec4(\n        deriv.x / 2.0 + 0.5,\n        deriv.y / 2.0 + 0.5,\n        1.0,\n        1.0), 0.0, 1.0);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = (a_texture_pos / 8192.0) / 2.0 + 0.25;\n}\n"},hillshade:{fragmentSource:"uniform sampler2D u_image;\nvarying vec2 v_pos;\n\nuniform vec2 u_latrange;\nuniform vec2 u_light;\nuniform vec4 u_shadow;\nuniform vec4 u_highlight;\nuniform vec4 u_accent;\n\n#define PI 3.141592653589793\n\nvoid main() {\n    vec4 pixel = texture2D(u_image, v_pos);\n\n    vec2 deriv = ((pixel.rg * 2.0) - 1.0);\n\n    // We divide the slope by a scale factor based on the cosin of the pixel's approximate latitude\n    // to account for mercator projection distortion. see #4807 for details\n    float scaleFactor = cos(radians((u_latrange[0] - u_latrange[1]) * (1.0 - v_pos.y) + u_latrange[1]));\n    // We also multiply the slope by an arbitrary z-factor of 1.25\n    float slope = atan(1.25 * length(deriv) / scaleFactor);\n    float aspect = deriv.x != 0.0 ? atan(deriv.y, -deriv.x) : PI / 2.0 * (deriv.y > 0.0 ? 1.0 : -1.0);\n\n    float intensity = u_light.x;\n    // We add PI to make this property match the global light object, which adds PI/2 to the light's azimuthal\n    // position property to account for 0deg corresponding to north/the top of the viewport in the style spec\n    // and the original shader was written to accept (-illuminationDirection - 90) as the azimuthal.\n    float azimuth = u_light.y + PI;\n\n    // We scale the slope exponentially based on intensity, using a calculation similar to\n    // the exponential interpolation function in the style spec:\n    // https://github.com/mapbox/mapbox-gl-js/blob/master/src/style-spec/expression/definitions/interpolate.js#L217-L228\n    // so that higher intensity values create more opaque hillshading.\n    float base = 1.875 - intensity * 1.75;\n    float maxValue = 0.5 * PI;\n    float scaledSlope = intensity != 0.5 ? ((pow(base, slope) - 1.0) / (pow(base, maxValue) - 1.0)) * maxValue : slope;\n\n    // The accent color is calculated with the cosine of the slope while the shade color is calculated with the sine\n    // so that the accent color's rate of change eases in while the shade color's eases out.\n    float accent = cos(scaledSlope);\n    // We multiply both the accent and shade color by a clamped intensity value\n    // so that intensities >= 0.5 do not additionally affect the color values\n    // while intensity values < 0.5 make the overall color more transparent.\n    vec4 accent_color = (1.0 - accent) * u_accent * clamp(intensity * 2.0, 0.0, 1.0);\n    float shade = abs(mod((aspect + azimuth) / PI + 0.5, 2.0) - 1.0);\n    vec4 shade_color = mix(u_shadow, u_highlight, shade) * sin(scaledSlope) * clamp(intensity * 2.0, 0.0, 1.0);\n    gl_FragColor = accent_color * (1.0 - shade_color.a) + shade_color;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = a_texture_pos / 8192.0;\n}\n"},line:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_width2;\nvarying vec2 v_normal;\nvarying float v_gamma_scale;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\n// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_gamma_scale;\nvarying highp float v_linesofar;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n\n    v_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * 2.0;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_width2 = vec2(outset, inset);\n}\n"},lineGradient:{fragmentSource:"\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nuniform sampler2D u_image;\n\nvarying vec2 v_width2;\nvarying vec2 v_normal;\nvarying float v_gamma_scale;\nvarying highp float v_lineprogress;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    // For gradient lines, v_lineprogress is the ratio along the entire line,\n    // scaled to [0, 2^15), and the gradient ramp is stored in a texture.\n    vec4 color = texture2D(u_image, vec2(v_lineprogress, 0.5));\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"\n// the attribute conveying progress along a line is scaled to [0, 2^15)\n#define MAX_LINE_DISTANCE 32767.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\n// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_gamma_scale;\nvarying highp float v_lineprogress;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n\n    v_lineprogress = (floor(a_data.z / 4.0) + a_data.w * 64.0) * 2.0 / MAX_LINE_DISTANCE;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_width2 = vec2(outset, inset);\n}\n"},linePattern:{fragmentSource:"uniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_fade;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float x_a = mod(v_linesofar / u_pattern_size_a.x, 1.0);\n    float x_b = mod(v_linesofar / u_pattern_size_b.x, 1.0);\n\n    // v_normal.y is 0 at the midpoint of the line, -1 at the lower edge, 1 at the upper edge\n    // we clamp the line width outset to be between 0 and half the pattern height plus padding (2.0)\n    // to ensure we don't sample outside the designated symbol on the sprite sheet.\n    // 0.5 is added to shift the component to be bounded between 0 and 1 for interpolation of\n    // the texture coordinate\n    float y_a = 0.5 + (v_normal.y * clamp(v_width2.s, 0.0, (u_pattern_size_a.y + 2.0) / 2.0) / u_pattern_size_a.y);\n    float y_b = 0.5 + (v_normal.y * clamp(v_width2.s, 0.0, (u_pattern_size_b.y + 2.0) / 2.0) / u_pattern_size_b.y);\n    vec2 pos_a = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, vec2(x_a, y_a));\n    vec2 pos_b = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, vec2(x_b, y_b));\n\n    vec4 color = mix(texture2D(u_image, pos_a), texture2D(u_image, pos_b), u_fade);\n\n    gl_FragColor = color * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize mediump float width\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_linesofar = a_linesofar;\n    v_width2 = vec2(outset, inset);\n}\n"},lineSDF:{fragmentSource:"\nuniform sampler2D u_image;\nuniform float u_sdfgamma;\nuniform float u_mix;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float width\n    #pragma mapbox: initialize lowp float floorwidth\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float sdfdist_a = texture2D(u_image, v_tex_a).a;\n    float sdfdist_b = texture2D(u_image, v_tex_b).a;\n    float sdfdist = mix(sdfdist_a, sdfdist_b, u_mix);\n    alpha *= smoothstep(0.5 - u_sdfgamma / floorwidth, 0.5 + u_sdfgamma / floorwidth, sdfdist);\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_patternscale_a;\nuniform float u_tex_y_a;\nuniform vec2 u_patternscale_b;\nuniform float u_tex_y_b;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n    #pragma mapbox: initialize lowp float floorwidth\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist =outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_tex_a = vec2(a_linesofar * u_patternscale_a.x / floorwidth, normal.y * u_patternscale_a.y + u_tex_y_a);\n    v_tex_b = vec2(a_linesofar * u_patternscale_b.x / floorwidth, normal.y * u_patternscale_b.y + u_tex_y_b);\n\n    v_width2 = vec2(outset, inset);\n}\n"},raster:{fragmentSource:"uniform float u_fade_t;\nuniform float u_opacity;\nuniform sampler2D u_image0;\nuniform sampler2D u_image1;\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nuniform float u_brightness_low;\nuniform float u_brightness_high;\n\nuniform float u_saturation_factor;\nuniform float u_contrast_factor;\nuniform vec3 u_spin_weights;\n\nvoid main() {\n\n    // read and cross-fade colors from the main and parent tiles\n    vec4 color0 = texture2D(u_image0, v_pos0);\n    vec4 color1 = texture2D(u_image1, v_pos1);\n    if (color0.a > 0.0) {\n        color0.rgb = color0.rgb / color0.a;\n    }\n    if (color1.a > 0.0) {\n        color1.rgb = color1.rgb / color1.a;\n    }\n    vec4 color = mix(color0, color1, u_fade_t);\n    color.a *= u_opacity;\n    vec3 rgb = color.rgb;\n\n    // spin\n    rgb = vec3(\n        dot(rgb, u_spin_weights.xyz),\n        dot(rgb, u_spin_weights.zxy),\n        dot(rgb, u_spin_weights.yzx));\n\n    // saturation\n    float average = (color.r + color.g + color.b) / 3.0;\n    rgb += (average - rgb) * u_saturation_factor;\n\n    // contrast\n    rgb = (rgb - 0.5) * u_contrast_factor + 0.5;\n\n    // brightness\n    vec3 u_high_vec = vec3(u_brightness_low, u_brightness_low, u_brightness_low);\n    vec3 u_low_vec = vec3(u_brightness_high, u_brightness_high, u_brightness_high);\n\n    gl_FragColor = vec4(mix(u_high_vec, u_low_vec, rgb) * color.a, color.a);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_tl_parent;\nuniform float u_scale_parent;\nuniform float u_buffer_scale;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    // We are using Int16 for texture position coordinates to give us enough precision for\n    // fractional coordinates. We use 8192 to scale the texture coordinates in the buffer\n    // as an arbitrarily high number to preserve adequate precision when rendering.\n    // This is also the same value as the EXTENT we are using for our tile buffer pos coordinates,\n    // so math for modifying either is consistent.\n    v_pos0 = (((a_texture_pos / 8192.0) - 0.5) / u_buffer_scale ) + 0.5;\n    v_pos1 = (v_pos0 * u_scale_parent) + u_tl_parent;\n}\n"},symbolIcon:{fragmentSource:"uniform sampler2D u_texture;\n\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_tex;\nvarying float v_fade_opacity;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    lowp float alpha = opacity * v_fade_opacity;\n    gl_FragColor = texture2D(u_texture, v_tex) * alpha;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"const float PI = 3.141592653589793;\n\nattribute vec4 a_pos_offset;\nattribute vec4 a_data;\nattribute vec3 a_projected_pos;\nattribute float a_fade_opacity;\n\nuniform bool u_is_size_zoom_constant;\nuniform bool u_is_size_feature_constant;\nuniform highp float u_size_t; // used to interpolate between zoom stops when size is a composite function\nuniform highp float u_size; // used when size is both zoom and feature constant\nuniform highp float u_camera_to_center_distance;\nuniform highp float u_pitch;\nuniform bool u_rotate_symbol;\nuniform highp float u_aspect_ratio;\nuniform float u_fade_change;\n\n#pragma mapbox: define lowp float opacity\n\nuniform mat4 u_matrix;\nuniform mat4 u_label_plane_matrix;\nuniform mat4 u_gl_coord_matrix;\n\nuniform bool u_is_text;\nuniform bool u_pitch_with_map;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_tex;\nvarying float v_fade_opacity;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 a_pos = a_pos_offset.xy;\n    vec2 a_offset = a_pos_offset.zw;\n\n    vec2 a_tex = a_data.xy;\n    vec2 a_size = a_data.zw;\n\n    highp float segment_angle = -a_projected_pos[2];\n\n    float size;\n    if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = mix(a_size[0], a_size[1], u_size_t) / 10.0;\n    } else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = a_size[0] / 10.0;\n    } else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {\n        size = u_size;\n    } else {\n        size = u_size;\n    }\n\n    vec4 projectedPoint = u_matrix * vec4(a_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    // See comments in symbol_sdf.vertex\n    highp float distance_ratio = u_pitch_with_map ?\n        camera_to_anchor_distance / u_camera_to_center_distance :\n        u_camera_to_center_distance / camera_to_anchor_distance;\n    highp float perspective_ratio = clamp(\n            0.5 + 0.5 * distance_ratio,\n            0.0, // Prevents oversized near-field symbols in pitched/overzoomed tiles\n            4.0);\n\n    size *= perspective_ratio;\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    highp float symbol_rotation = 0.0;\n    if (u_rotate_symbol) {\n        // See comments in symbol_sdf.vertex\n        vec4 offsetProjectedPoint = u_matrix * vec4(a_pos + vec2(1, 0), 0, 1);\n\n        vec2 a = projectedPoint.xy / projectedPoint.w;\n        vec2 b = offsetProjectedPoint.xy / offsetProjectedPoint.w;\n\n        symbol_rotation = atan((b.y - a.y) / u_aspect_ratio, b.x - a.x);\n    }\n\n    highp float angle_sin = sin(segment_angle + symbol_rotation);\n    highp float angle_cos = cos(segment_angle + symbol_rotation);\n    mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n\n    vec4 projected_pos = u_label_plane_matrix * vec4(a_projected_pos.xy, 0.0, 1.0);\n    gl_Position = u_gl_coord_matrix * vec4(projected_pos.xy / projected_pos.w + rotation_matrix * (a_offset / 32.0 * fontScale), 0.0, 1.0);\n\n    v_tex = a_tex / u_texsize;\n    vec2 fade_opacity = unpack_opacity(a_fade_opacity);\n    float fade_change = fade_opacity[1] > 0.5 ? u_fade_change : -u_fade_change;\n    v_fade_opacity = max(0.0, min(1.0, fade_opacity[0] + fade_change));\n}\n"},symbolSDF:{fragmentSource:"#define SDF_PX 8.0\n#define EDGE_GAMMA 0.105/DEVICE_PIXEL_RATIO\n\nuniform bool u_is_halo;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nuniform sampler2D u_texture;\nuniform highp float u_gamma_scale;\nuniform bool u_is_text;\n\nvarying vec2 v_data0;\nvarying vec3 v_data1;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    vec2 tex = v_data0.xy;\n    float gamma_scale = v_data1.x;\n    float size = v_data1.y;\n    float fade_opacity = v_data1[2];\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    lowp vec4 color = fill_color;\n    highp float gamma = EDGE_GAMMA / (fontScale * u_gamma_scale);\n    lowp float buff = (256.0 - 64.0) / 256.0;\n    if (u_is_halo) {\n        color = halo_color;\n        gamma = (halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (fontScale * u_gamma_scale);\n        buff = (6.0 - halo_width / fontScale) / SDF_PX;\n    }\n\n    lowp float dist = texture2D(u_texture, tex).a;\n    highp float gamma_scaled = gamma * gamma_scale;\n    highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);\n\n    gl_FragColor = color * (alpha * opacity * fade_opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"const float PI = 3.141592653589793;\n\nattribute vec4 a_pos_offset;\nattribute vec4 a_data;\nattribute vec3 a_projected_pos;\nattribute float a_fade_opacity;\n\n// contents of a_size vary based on the type of property value\n// used for {text,icon}-size.\n// For constants, a_size is disabled.\n// For source functions, we bind only one value per vertex: the value of {text,icon}-size evaluated for the current feature.\n// For composite functions:\n// [ text-size(lowerZoomStop, feature),\n//   text-size(upperZoomStop, feature) ]\nuniform bool u_is_size_zoom_constant;\nuniform bool u_is_size_feature_constant;\nuniform highp float u_size_t; // used to interpolate between zoom stops when size is a composite function\nuniform highp float u_size; // used when size is both zoom and feature constant\n\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nuniform mat4 u_matrix;\nuniform mat4 u_label_plane_matrix;\nuniform mat4 u_gl_coord_matrix;\n\nuniform bool u_is_text;\nuniform bool u_pitch_with_map;\nuniform highp float u_pitch;\nuniform bool u_rotate_symbol;\nuniform highp float u_aspect_ratio;\nuniform highp float u_camera_to_center_distance;\nuniform float u_fade_change;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_data0;\nvarying vec3 v_data1;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    vec2 a_pos = a_pos_offset.xy;\n    vec2 a_offset = a_pos_offset.zw;\n\n    vec2 a_tex = a_data.xy;\n    vec2 a_size = a_data.zw;\n\n    highp float segment_angle = -a_projected_pos[2];\n    float size;\n\n    if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = mix(a_size[0], a_size[1], u_size_t) / 10.0;\n    } else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = a_size[0] / 10.0;\n    } else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {\n        size = u_size;\n    } else {\n        size = u_size;\n    }\n\n    vec4 projectedPoint = u_matrix * vec4(a_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    // If the label is pitched with the map, layout is done in pitched space,\n    // which makes labels in the distance smaller relative to viewport space.\n    // We counteract part of that effect by multiplying by the perspective ratio.\n    // If the label isn't pitched with the map, we do layout in viewport space,\n    // which makes labels in the distance larger relative to the features around\n    // them. We counteract part of that effect by dividing by the perspective ratio.\n    highp float distance_ratio = u_pitch_with_map ?\n        camera_to_anchor_distance / u_camera_to_center_distance :\n        u_camera_to_center_distance / camera_to_anchor_distance;\n    highp float perspective_ratio = clamp(\n        0.5 + 0.5 * distance_ratio,\n        0.0, // Prevents oversized near-field symbols in pitched/overzoomed tiles\n        4.0);\n\n    size *= perspective_ratio;\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    highp float symbol_rotation = 0.0;\n    if (u_rotate_symbol) {\n        // Point labels with 'rotation-alignment: map' are horizontal with respect to tile units\n        // To figure out that angle in projected space, we draw a short horizontal line in tile\n        // space, project it, and measure its angle in projected space.\n        vec4 offsetProjectedPoint = u_matrix * vec4(a_pos + vec2(1, 0), 0, 1);\n\n        vec2 a = projectedPoint.xy / projectedPoint.w;\n        vec2 b = offsetProjectedPoint.xy / offsetProjectedPoint.w;\n\n        symbol_rotation = atan((b.y - a.y) / u_aspect_ratio, b.x - a.x);\n    }\n\n    highp float angle_sin = sin(segment_angle + symbol_rotation);\n    highp float angle_cos = cos(segment_angle + symbol_rotation);\n    mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n\n    vec4 projected_pos = u_label_plane_matrix * vec4(a_projected_pos.xy, 0.0, 1.0);\n    gl_Position = u_gl_coord_matrix * vec4(projected_pos.xy / projected_pos.w + rotation_matrix * (a_offset / 32.0 * fontScale), 0.0, 1.0);\n    float gamma_scale = gl_Position.w;\n\n    vec2 tex = a_tex / u_texsize;\n    vec2 fade_opacity = unpack_opacity(a_fade_opacity);\n    float fade_change = fade_opacity[1] > 0.5 ? u_fade_change : -u_fade_change;\n    float interpolated_fade_opacity = max(0.0, min(1.0, fade_opacity[0] + fade_change));\n\n    v_data0 = vec2(tex.x, tex.y);\n    v_data1 = vec3(gamma_scale, size, interpolated_fade_opacity);\n}\n"}},en=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,tn=function(e){var t=Qt[e],n={};t.fragmentSource=t.fragmentSource.replace(en,function(e,t,r,a,i){return n[i]=!0,"define"===t?"\n#ifndef HAS_UNIFORM_u_"+i+"\nvarying "+r+" "+a+" "+i+";\n#else\nuniform "+r+" "+a+" u_"+i+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+i+"\n    "+r+" "+a+" "+i+" = u_"+i+";\n#endif\n"}),t.vertexSource=t.vertexSource.replace(en,function(e,t,r,a,i){var o="float"===a?"vec2":"vec4";return n[i]?"define"===t?"\n#ifndef HAS_UNIFORM_u_"+i+"\nuniform lowp float a_"+i+"_t;\nattribute "+r+" "+o+" a_"+i+";\nvarying "+r+" "+a+" "+i+";\n#else\nuniform "+r+" "+a+" u_"+i+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+i+"\n    "+i+" = unpack_mix_"+o+"(a_"+i+", a_"+i+"_t);\n#else\n    "+r+" "+a+" "+i+" = u_"+i+";\n#endif\n":"define"===t?"\n#ifndef HAS_UNIFORM_u_"+i+"\nuniform lowp float a_"+i+"_t;\nattribute "+r+" "+o+" a_"+i+";\n#else\nuniform "+r+" "+a+" u_"+i+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+i+"\n    "+r+" "+a+" "+i+" = unpack_mix_"+o+"(a_"+i+", a_"+i+"_t);\n#else\n    "+r+" "+a+" "+i+" = u_"+i+";\n#endif\n"})};for(var nn in Qt)tn(nn);var rn=Qt,an=function(e,t,n,r){var a=e.gl;this.program=a.createProgram();var o=n.defines().concat("#define DEVICE_PIXEL_RATIO "+i.devicePixelRatio.toFixed(1));r&&o.push("#define OVERDRAW_INSPECTOR;");var s=o.concat(rn.prelude.fragmentSource,t.fragmentSource).join("\n"),l=o.concat(rn.prelude.vertexSource,t.vertexSource).join("\n"),u=a.createShader(a.FRAGMENT_SHADER);a.shaderSource(u,s),a.compileShader(u),a.attachShader(this.program,u);var c=a.createShader(a.VERTEX_SHADER);a.shaderSource(c,l),a.compileShader(c),a.attachShader(this.program,c);for(var f=n.layoutAttributes||[],d=0;d<f.length;d++)a.bindAttribLocation(this.program,d,f[d].name);a.linkProgram(this.program),this.numAttributes=a.getProgramParameter(this.program,a.ACTIVE_ATTRIBUTES),this.attributes={},this.uniforms={};for(var p=0;p<this.numAttributes;p++){var h=a.getActiveAttrib(this.program,p);h&&(this.attributes[h.name]=a.getAttribLocation(this.program,h.name))}for(var m=a.getProgramParameter(this.program,a.ACTIVE_UNIFORMS),v=0;v<m;v++){var g=a.getActiveUniform(this.program,v);g&&(this.uniforms[g.name]=a.getUniformLocation(this.program,g.name))}};function on(t,n,r,a,i){for(var o=0;o<r.length;o++){var s=r[o];if(a.isLessThan(s.tileID))break;if(n.key===s.tileID.key)return;if(s.tileID.isChildOf(n)){for(var l=n.children(1/0),u=0;u<l.length;u++)on(t,l[u],r.slice(o),a,i);return}}var c=n.overscaledZ-t.overscaledZ,f=new e.CanonicalTileID(c,n.canonical.x-(t.canonical.x<<c),n.canonical.y-(t.canonical.y<<c));i[f.key]=i[f.key]||f}function sn(e,t,n,r,a){var i=e.context,o=i.gl,s=a?e.useProgram("collisionCircle"):e.useProgram("collisionBox");i.setDepthMode(Ge.disabled),i.setStencilMode(He.disabled),i.setColorMode(e.colorModeForRenderPass());for(var l=0;l<r.length;l++){var u=r[l],c=t.getTile(u),f=c.getBucket(n);if(f){var d=a?f.collisionCircle:f.collisionBox;if(d){o.uniformMatrix4fv(s.uniforms.u_matrix,!1,u.posMatrix),a||i.lineWidth.set(1),o.uniform1f(s.uniforms.u_camera_to_center_distance,e.transform.cameraToCenterDistance);var p=Et(c,1,e.transform.zoom),h=Math.pow(2,e.transform.zoom-c.tileID.overscaledZ);o.uniform1f(s.uniforms.u_pixels_to_tile_units,p),o.uniform2f(s.uniforms.u_extrude_scale,e.transform.pixelsToGLUnits[0]/(p*h),e.transform.pixelsToGLUnits[1]/(p*h)),o.uniform1f(s.uniforms.u_overscale_factor,c.tileID.overscaleFactor()),s.draw(i,a?o.TRIANGLES:o.LINES,n.id,d.layoutVertexBuffer,d.indexBuffer,d.segments,null,d.collisionVertexBuffer,null)}}}}an.prototype.draw=function(e,t,n,r,a,i,o,s,l){for(var u,c=e.gl,f=(u={},u[c.LINES]=2,u[c.TRIANGLES]=3,u)[t],d=0,p=i.get();d<p.length;d+=1){var h=p[d],m=h.vaos||(h.vaos={});(m[n]||(m[n]=new Q)).bind(e,this,r,o?o.getPaintVertexBuffers():[],a,h.vertexOffset,s,l),c.drawElements(t,h.primitiveLength*f,c.UNSIGNED_SHORT,h.primitiveOffset*f*2)}};var ln=e.mat4.identity(new Float32Array(16)),un=e.default$19.layout;function cn(e,t,n,r,a,i,o,s,l,u){var c,f=e.context,d=f.gl,p=e.transform,h="map"===s,m="map"===l,v=h&&"line"===n.layout.get("symbol-placement"),g=h&&!m&&!v,y=m;f.setDepthMode(y?e.depthModeForSublayer(0,Ge.ReadOnly):Ge.disabled);for(var b=0,x=r;b<x.length;b+=1){var _=x[b],w=t.getTile(_),T=w.getBucket(n);if(T){var k=a?T.text:T.icon;if(k&&k.segments.get().length){var C=k.programConfigurations.get(n.id),E=a||T.sdfIcons,M=a?T.textSizeData:T.iconSizeData;if(c||(c=e.useProgram(E?"symbolSDF":"symbolIcon",C),C.setUniforms(e.context,c,n.paint,{zoom:e.transform.zoom}),fn(c,e,0,a,g,m,M)),f.activeTexture.set(d.TEXTURE0),d.uniform1i(c.uniforms.u_texture,0),a)w.glyphAtlasTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE),d.uniform2fv(c.uniforms.u_texsize,w.glyphAtlasTexture.size);else{var A=1!==n.layout.get("icon-size").constantOr(0)||T.iconsNeedLinear,S=m||0!==p.pitch;w.iconAtlasTexture.bind(E||e.options.rotating||e.options.zooming||A||S?d.LINEAR:d.NEAREST,d.CLAMP_TO_EDGE),d.uniform2fv(c.uniforms.u_texsize,w.iconAtlasTexture.size)}d.uniformMatrix4fv(c.uniforms.u_matrix,!1,e.translatePosMatrix(_.posMatrix,w,i,o));var O=Et(w,1,e.transform.zoom),P=ft(_.posMatrix,m,h,e.transform,O),R=dt(_.posMatrix,m,h,e.transform,O);d.uniformMatrix4fv(c.uniforms.u_gl_coord_matrix,!1,e.translatePosMatrix(R,w,i,o,!0)),v?(d.uniformMatrix4fv(c.uniforms.u_label_plane_matrix,!1,ln),mt(T,_.posMatrix,e,a,P,R,m,u)):d.uniformMatrix4fv(c.uniforms.u_label_plane_matrix,!1,P),d.uniform1f(c.uniforms.u_fade_change,e.options.fadeDuration?e.symbolFadeChange:1),dn(c,0,e,n,0,k,a,E,m)}}}}function fn(t,n,r,a,i,o,s){var l=n.context.gl,u=n.transform;l.uniform1i(t.uniforms.u_pitch_with_map,o?1:0),l.uniform1f(t.uniforms.u_is_text,a?1:0),l.uniform1f(t.uniforms.u_pitch,u.pitch/360*2*Math.PI);var c="constant"===s.functionType||"source"===s.functionType,f="constant"===s.functionType||"camera"===s.functionType;l.uniform1i(t.uniforms.u_is_size_zoom_constant,c?1:0),l.uniform1i(t.uniforms.u_is_size_feature_constant,f?1:0),l.uniform1f(t.uniforms.u_camera_to_center_distance,u.cameraToCenterDistance);var d=e.evaluateSizeForZoom(s,u.zoom,un.properties[a?"text-size":"icon-size"]);void 0!==d.uSizeT&&l.uniform1f(t.uniforms.u_size_t,d.uSizeT),void 0!==d.uSize&&l.uniform1f(t.uniforms.u_size,d.uSize),l.uniform1f(t.uniforms.u_aspect_ratio,u.width/u.height),l.uniform1i(t.uniforms.u_rotate_symbol,i?1:0)}function dn(e,t,n,r,a,i,o,s,l){var u=n.context,c=u.gl,f=n.transform;if(s){var d=0!==r.paint.get(o?"text-halo-width":"icon-halo-width").constantOr(1),p=l?Math.cos(f._pitch)*f.cameraToCenterDistance:1;c.uniform1f(e.uniforms.u_gamma_scale,p),d&&(c.uniform1f(e.uniforms.u_is_halo,1),pn(i,r,u,e)),c.uniform1f(e.uniforms.u_is_halo,0)}pn(i,r,u,e)}function pn(e,t,n,r){r.draw(n,n.gl.TRIANGLES,t.id,e.layoutVertexBuffer,e.indexBuffer,e.segments,e.programConfigurations.get(t.id),e.dynamicLayoutVertexBuffer,e.opacityVertexBuffer)}function hn(e,t,n,r,a,o,s,l,u){var c,f,d,p,h=t.context,m=h.gl,v=a.paint.get("line-dasharray"),g=a.paint.get("line-pattern");if(l||u){var y=1/Et(n,1,t.transform.tileZoom);if(v){c=t.lineAtlas.getDash(v.from,"round"===a.layout.get("line-cap")),f=t.lineAtlas.getDash(v.to,"round"===a.layout.get("line-cap"));var b=c.width*v.fromScale,x=f.width*v.toScale;m.uniform2f(e.uniforms.u_patternscale_a,y/b,-c.height/2),m.uniform2f(e.uniforms.u_patternscale_b,y/x,-f.height/2),m.uniform1f(e.uniforms.u_sdfgamma,t.lineAtlas.width/(256*Math.min(b,x)*i.devicePixelRatio)/2)}else if(g){if(d=t.imageManager.getPattern(g.from),p=t.imageManager.getPattern(g.to),!d||!p)return;m.uniform2f(e.uniforms.u_pattern_size_a,d.displaySize[0]*g.fromScale/y,d.displaySize[1]),m.uniform2f(e.uniforms.u_pattern_size_b,p.displaySize[0]*g.toScale/y,p.displaySize[1]);var _=t.imageManager.getPixelSize(),w=_.width,T=_.height;m.uniform2fv(e.uniforms.u_texsize,[w,T])}m.uniform2f(e.uniforms.u_gl_units_to_pixels,1/t.transform.pixelsToGLUnits[0],1/t.transform.pixelsToGLUnits[1])}l&&(v?(m.uniform1i(e.uniforms.u_image,0),h.activeTexture.set(m.TEXTURE0),t.lineAtlas.bind(h),m.uniform1f(e.uniforms.u_tex_y_a,c.y),m.uniform1f(e.uniforms.u_tex_y_b,f.y),m.uniform1f(e.uniforms.u_mix,v.t)):g&&(m.uniform1i(e.uniforms.u_image,0),h.activeTexture.set(m.TEXTURE0),t.imageManager.bind(h),m.uniform2fv(e.uniforms.u_pattern_tl_a,d.tl),m.uniform2fv(e.uniforms.u_pattern_br_a,d.br),m.uniform2fv(e.uniforms.u_pattern_tl_b,p.tl),m.uniform2fv(e.uniforms.u_pattern_br_b,p.br),m.uniform1f(e.uniforms.u_fade,g.t))),h.setStencilMode(t.stencilModeForClipping(o));var k=t.translatePosMatrix(o.posMatrix,n,a.paint.get("line-translate"),a.paint.get("line-translate-anchor"));if(m.uniformMatrix4fv(e.uniforms.u_matrix,!1,k),m.uniform1f(e.uniforms.u_ratio,1/Et(n,1,t.transform.zoom)),a.paint.get("line-gradient")){h.activeTexture.set(m.TEXTURE0);var C=a.gradientTexture;if(!a.gradient)return;C||(C=a.gradientTexture=new P(h,a.gradient,m.RGBA)),C.bind(m.LINEAR,m.CLAMP_TO_EDGE),m.uniform1i(e.uniforms.u_image,0)}e.draw(h,m.TRIANGLES,a.id,r.layoutVertexBuffer,r.indexBuffer,r.segments,s)}var mn=function(e,t){if(!e)return!1;var n=t.imageManager.getPattern(e.from),r=t.imageManager.getPattern(e.to);return!n||!r},vn=function(e,t,n){var r=t.context,a=r.gl,i=t.imageManager.getPattern(e.from),o=t.imageManager.getPattern(e.to);a.uniform1i(n.uniforms.u_image,0),a.uniform2fv(n.uniforms.u_pattern_tl_a,i.tl),a.uniform2fv(n.uniforms.u_pattern_br_a,i.br),a.uniform2fv(n.uniforms.u_pattern_tl_b,o.tl),a.uniform2fv(n.uniforms.u_pattern_br_b,o.br);var s=t.imageManager.getPixelSize(),l=s.width,u=s.height;a.uniform2fv(n.uniforms.u_texsize,[l,u]),a.uniform1f(n.uniforms.u_mix,e.t),a.uniform2fv(n.uniforms.u_pattern_size_a,i.displaySize),a.uniform2fv(n.uniforms.u_pattern_size_b,o.displaySize),a.uniform1f(n.uniforms.u_scale_a,e.fromScale),a.uniform1f(n.uniforms.u_scale_b,e.toScale),r.activeTexture.set(a.TEXTURE0),t.imageManager.bind(t.context)},gn=function(e,t,n){var r=t.context.gl;r.uniform1f(n.uniforms.u_tile_units_to_pixels,1/Et(e,1,t.transform.tileZoom));var a=Math.pow(2,e.tileID.overscaledZ),i=e.tileSize*Math.pow(2,t.transform.tileZoom)/a,o=i*(e.tileID.canonical.x+e.tileID.wrap*a),s=i*e.tileID.canonical.y;r.uniform2f(n.uniforms.u_pixel_coord_upper,o>>16,s>>16),r.uniform2f(n.uniforms.u_pixel_coord_lower,65535&o,65535&s)};function yn(e,t,n,r,a){if(!mn(n.paint.get("fill-pattern"),e))for(var i=!0,o=0,s=r;o<s.length;o+=1){var l=s[o],u=t.getTile(l),c=u.getBucket(n);c&&(e.context.setStencilMode(e.stencilModeForClipping(l)),a(e,t,n,u,l,c,i),i=!1)}}function bn(e,t,n,r,a,i,o){var s=e.context.gl,l=i.programConfigurations.get(n.id);_n("fill",n.paint.get("fill-pattern"),e,l,n,r,a,o).draw(e.context,s.TRIANGLES,n.id,i.layoutVertexBuffer,i.indexBuffer,i.segments,l)}function xn(e,t,n,r,a,i,o){var s=e.context.gl,l=i.programConfigurations.get(n.id),u=_n("fillOutline",n.getPaintProperty("fill-outline-color")?null:n.paint.get("fill-pattern"),e,l,n,r,a,o);s.uniform2f(u.uniforms.u_world,s.drawingBufferWidth,s.drawingBufferHeight),u.draw(e.context,s.LINES,n.id,i.layoutVertexBuffer,i.indexBuffer2,i.segments2,l)}function _n(e,t,n,r,a,i,o,s){var l,u=n.context.program.get();return t?(l=n.useProgram(e+"Pattern",r),(s||l.program!==u)&&(r.setUniforms(n.context,l,a.paint,{zoom:n.transform.zoom}),vn(t,n,l)),gn(i,n,l)):(l=n.useProgram(e,r),(s||l.program!==u)&&r.setUniforms(n.context,l,a.paint,{zoom:n.transform.zoom})),n.context.gl.uniformMatrix4fv(l.uniforms.u_matrix,!1,n.translatePosMatrix(o.posMatrix,i,a.paint.get("fill-translate"),a.paint.get("fill-translate-anchor"))),l}var wn=e.default$20.mat3,Tn=e.default$20.mat4,kn=e.default$20.vec3;function Cn(e,t,n,r,a,i,o){var s=e.context,l=s.gl,u=n.paint.get("fill-extrusion-pattern"),c=e.context.program.get(),f=i.programConfigurations.get(n.id),d=e.useProgram(u?"fillExtrusionPattern":"fillExtrusion",f);if((o||d.program!==c)&&f.setUniforms(s,d,n.paint,{zoom:e.transform.zoom}),u){if(mn(u,e))return;vn(u,e,d),gn(r,e,d),l.uniform1f(d.uniforms.u_height_factor,-Math.pow(2,a.overscaledZ)/r.tileSize/8)}e.context.gl.uniformMatrix4fv(d.uniforms.u_matrix,!1,e.translatePosMatrix(a.posMatrix,r,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor"))),function(e,t){var n=t.context.gl,r=t.style.light,a=r.properties.get("position"),i=[a.x,a.y,a.z],o=wn.create();"viewport"===r.properties.get("anchor")&&wn.fromRotation(o,-t.transform.angle),kn.transformMat3(i,i,o);var s=r.properties.get("color");n.uniform3fv(e.uniforms.u_lightpos,i),n.uniform1f(e.uniforms.u_lightintensity,r.properties.get("intensity")),n.uniform3f(e.uniforms.u_lightcolor,s.r,s.g,s.b)}(d,e),d.draw(s,l.TRIANGLES,n.id,i.layoutVertexBuffer,i.indexBuffer,i.segments,f)}function En(t,n,r){var a=t.context,i=a.gl,o=n.fbo;if(o){var s=t.useProgram("hillshade"),l=t.transform.calculatePosMatrix(n.tileID.toUnwrapped(),!0);!function(e,t,n){var r=n.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===n.paint.get("hillshade-illumination-anchor")&&(r-=t.transform.angle),t.context.gl.uniform2f(e.uniforms.u_light,n.paint.get("hillshade-exaggeration"),r)}(s,t,r);var u=function(t,n){var r=n.toCoordinate(),a=new e.default$17(r.column,r.row+1,r.zoom);return[t.transform.coordinateLocation(r).lat,t.transform.coordinateLocation(a).lat]}(t,n.tileID);a.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,o.colorAttachment.get()),i.uniformMatrix4fv(s.uniforms.u_matrix,!1,l),i.uniform2fv(s.uniforms.u_latrange,u),i.uniform1i(s.uniforms.u_image,0);var c=r.paint.get("hillshade-shadow-color");i.uniform4f(s.uniforms.u_shadow,c.r,c.g,c.b,c.a);var f=r.paint.get("hillshade-highlight-color");i.uniform4f(s.uniforms.u_highlight,f.r,f.g,f.b,f.a);var d=r.paint.get("hillshade-accent-color");if(i.uniform4f(s.uniforms.u_accent,d.r,d.g,d.b,d.a),n.maskedBoundsBuffer&&n.maskedIndexBuffer&&n.segments)s.draw(a,i.TRIANGLES,r.id,n.maskedBoundsBuffer,n.maskedIndexBuffer,n.segments);else{var p=t.rasterBoundsBuffer;t.rasterBoundsVAO.bind(a,s,p,[]),i.drawArrays(i.TRIANGLE_STRIP,0,p.length)}}}function Mn(t,n,r){var a=t.context,i=a.gl;if(n.dem&&n.dem.level){var o=n.dem.level.dim,s=n.dem.getPixels();if(a.activeTexture.set(i.TEXTURE1),a.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||t.getTileTexture(n.tileSize),n.demTexture){var l=n.demTexture;l.update(s,{premultiply:!1}),l.bind(i.NEAREST,i.CLAMP_TO_EDGE)}else n.demTexture=new P(a,s,i.RGBA,{premultiply:!1}),n.demTexture.bind(i.NEAREST,i.CLAMP_TO_EDGE);a.activeTexture.set(i.TEXTURE0);var u=n.fbo;if(!u){var c=new P(a,{width:o,height:o,data:null},i.RGBA);c.bind(i.LINEAR,i.CLAMP_TO_EDGE),(u=n.fbo=a.createFramebuffer(o,o)).colorAttachment.set(c.texture)}a.bindFramebuffer.set(u.framebuffer),a.viewport.set([0,0,o,o]);var f=e.mat4.create();e.mat4.ortho(f,0,e.default$8,-e.default$8,0,0,1),e.mat4.translate(f,f,[0,-e.default$8,0]);var d=t.useProgram("hillshadePrepare");i.uniformMatrix4fv(d.uniforms.u_matrix,!1,f),i.uniform1f(d.uniforms.u_zoom,n.tileID.overscaledZ),i.uniform2fv(d.uniforms.u_dimension,[2*o,2*o]),i.uniform1i(d.uniforms.u_image,1),i.uniform1f(d.uniforms.u_maxzoom,r);var p=t.rasterBoundsBuffer;t.rasterBoundsVAO.bind(a,d,p,[]),i.drawArrays(i.TRIANGLE_STRIP,0,p.length),n.needsHillshadePrepare=!1}}function An(t,n,r,a,o){var s=a.paint.get("raster-fade-duration");if(s>0){var l=i.now(),u=(l-t.timeAdded)/s,c=n?(l-n.timeAdded)/s:-1,f=r.getSource(),d=o.coveringZoomLevel({tileSize:f.tileSize,roundZoom:f.roundZoom}),p=!n||Math.abs(n.tileID.overscaledZ-d)>Math.abs(t.tileID.overscaledZ-d),h=p&&t.refreshedUponExpiration?1:e.clamp(p?u:1-c,0,1);return t.refreshedUponExpiration&&u>=1&&(t.refreshedUponExpiration=!1),n?{opacity:1,mix:1-h}:{opacity:h,mix:0}}return{opacity:1,mix:0}}function Sn(t,n,r){var a=t.context,o=a.gl;a.lineWidth.set(1*i.devicePixelRatio);var s=r.posMatrix,l=t.useProgram("debug");a.setDepthMode(Ge.disabled),a.setStencilMode(He.disabled),a.setColorMode(t.colorModeForRenderPass()),o.uniformMatrix4fv(l.uniforms.u_matrix,!1,s),o.uniform4f(l.uniforms.u_color,1,0,0,1),t.debugVAO.bind(a,l,t.debugBuffer,[]),o.drawArrays(o.LINE_STRIP,0,t.debugBuffer.length);for(var u=function(e,t,n,r){r=r||1;var a,i,o,s,l,u,c,f,d=[];for(a=0,i=e.length;a<i;a++)if(l=On[e[a]]){for(f=null,o=0,s=l[1].length;o<s;o+=2)-1===l[1][o]&&-1===l[1][o+1]?f=null:(u=t+l[1][o]*r,c=200-l[1][o+1]*r,f&&d.push(f.x,f.y,u,c),f={x:u,y:c});t+=l[0]*r}return d}(r.toString(),50,0,5),c=new e.PosArray,f=0;f<u.length;f+=2)c.emplaceBack(u[f],u[f+1]);var d=a.createVertexBuffer(c,Jt.members);(new Q).bind(a,l,d,[]),o.uniform4f(l.uniforms.u_color,1,1,1,1);for(var p=n.getTile(r).tileSize,h=e.default$8/(Math.pow(2,t.transform.zoom-r.overscaledZ)*p),m=[[-1,-1],[-1,1],[1,-1],[1,1]],v=0;v<m.length;v++){var g=m[v];o.uniformMatrix4fv(l.uniforms.u_matrix,!1,e.mat4.translate([],s,[h*g[0],h*g[1],0])),o.drawArrays(o.LINES,0,d.length)}o.uniform4f(l.uniforms.u_color,0,0,0,1),o.uniformMatrix4fv(l.uniforms.u_matrix,!1,s),o.drawArrays(o.LINES,0,d.length)}var On={" ":[16,[]],"!":[10,[5,21,5,7,-1,-1,5,2,4,1,5,0,6,1,5,2]],'"':[16,[4,21,4,14,-1,-1,12,21,12,14]],"#":[21,[11,25,4,-7,-1,-1,17,25,10,-7,-1,-1,4,12,18,12,-1,-1,3,6,17,6]],$:[20,[8,25,8,-4,-1,-1,12,25,12,-4,-1,-1,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],"%":[24,[21,21,3,0,-1,-1,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,-1,-1,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7]],"&":[26,[23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2]],"'":[10,[5,19,4,20,5,21,6,20,6,18,5,16,4,15]],"(":[14,[11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7]],")":[14,[3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7]],"*":[16,[8,21,8,9,-1,-1,3,18,13,12,-1,-1,13,18,3,12]],"+":[26,[13,18,13,0,-1,-1,4,9,22,9]],",":[10,[6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"-":[26,[4,9,22,9]],".":[10,[5,2,4,1,5,0,6,1,5,2]],"/":[22,[20,25,2,-7]],0:[20,[9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21]],1:[20,[6,17,8,18,11,21,11,0]],2:[20,[4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0]],3:[20,[5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],4:[20,[13,21,3,7,18,7,-1,-1,13,21,13,0]],5:[20,[15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],6:[20,[16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7]],7:[20,[17,21,7,0,-1,-1,3,21,17,21]],8:[20,[8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21]],9:[20,[16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3]],":":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,5,2,4,1,5,0,6,1,5,2]],";":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"<":[24,[20,18,4,9,20,0]],"=":[26,[4,12,22,12,-1,-1,4,6,22,6]],">":[24,[4,18,20,9,4,0]],"?":[18,[3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,-1,-1,9,2,8,1,9,0,10,1,9,2]],"@":[27,[18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,-1,-1,12,16,10,14,9,11,9,8,10,6,11,5,-1,-1,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,-1,-1,19,16,18,8,18,6,19,5]],A:[18,[9,21,1,0,-1,-1,9,21,17,0,-1,-1,4,7,14,7]],B:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,-1,-1,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0]],C:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5]],D:[21,[4,21,4,0,-1,-1,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0]],E:[19,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11,-1,-1,4,0,17,0]],F:[18,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11]],G:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,-1,-1,13,8,18,8]],H:[22,[4,21,4,0,-1,-1,18,21,18,0,-1,-1,4,11,18,11]],I:[8,[4,21,4,0]],J:[16,[12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7]],K:[21,[4,21,4,0,-1,-1,18,21,4,7,-1,-1,9,12,18,0]],L:[17,[4,21,4,0,-1,-1,4,0,16,0]],M:[24,[4,21,4,0,-1,-1,4,21,12,0,-1,-1,20,21,12,0,-1,-1,20,21,20,0]],N:[22,[4,21,4,0,-1,-1,4,21,18,0,-1,-1,18,21,18,0]],O:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21]],P:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10]],Q:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,-1,-1,12,4,18,-2]],R:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,-1,-1,11,11,18,0]],S:[20,[17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],T:[16,[8,21,8,0,-1,-1,1,21,15,21]],U:[22,[4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21]],V:[18,[1,21,9,0,-1,-1,17,21,9,0]],W:[24,[2,21,7,0,-1,-1,12,21,7,0,-1,-1,12,21,17,0,-1,-1,22,21,17,0]],X:[20,[3,21,17,0,-1,-1,17,21,3,0]],Y:[18,[1,21,9,11,9,0,-1,-1,17,21,9,11]],Z:[20,[17,21,3,0,-1,-1,3,21,17,21,-1,-1,3,0,17,0]],"[":[14,[4,25,4,-7,-1,-1,5,25,5,-7,-1,-1,4,25,11,25,-1,-1,4,-7,11,-7]],"\\":[14,[0,21,14,-3]],"]":[14,[9,25,9,-7,-1,-1,10,25,10,-7,-1,-1,3,25,10,25,-1,-1,3,-7,10,-7]],"^":[16,[6,15,8,18,10,15,-1,-1,3,12,8,17,13,12,-1,-1,8,17,8,0]],_:[16,[0,-2,16,-2]],"`":[10,[6,21,5,20,4,18,4,16,5,15,6,16,5,17]],a:[19,[15,14,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],b:[19,[4,21,4,0,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],c:[18,[15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],d:[19,[15,21,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],e:[18,[3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],f:[12,[10,21,8,21,6,20,5,17,5,0,-1,-1,2,14,9,14]],g:[19,[15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],h:[19,[4,21,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],i:[8,[3,21,4,20,5,21,4,22,3,21,-1,-1,4,14,4,0]],j:[10,[5,21,6,20,7,21,6,22,5,21,-1,-1,6,14,6,-3,5,-6,3,-7,1,-7]],k:[17,[4,21,4,0,-1,-1,14,14,4,4,-1,-1,8,8,15,0]],l:[8,[4,21,4,0]],m:[30,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0,-1,-1,15,10,18,13,20,14,23,14,25,13,26,10,26,0]],n:[19,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],o:[19,[8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14]],p:[19,[4,14,4,-7,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],q:[19,[15,14,15,-7,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],r:[13,[4,14,4,0,-1,-1,4,8,5,11,7,13,9,14,12,14]],s:[17,[14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3]],t:[12,[5,21,5,4,6,1,8,0,10,0,-1,-1,2,14,9,14]],u:[19,[4,14,4,4,5,1,7,0,10,0,12,1,15,4,-1,-1,15,14,15,0]],v:[16,[2,14,8,0,-1,-1,14,14,8,0]],w:[22,[3,14,7,0,-1,-1,11,14,7,0,-1,-1,11,14,15,0,-1,-1,19,14,15,0]],x:[17,[3,14,14,0,-1,-1,14,14,3,0]],y:[16,[2,14,8,0,-1,-1,14,14,8,0,6,-4,4,-6,2,-7,1,-7]],z:[17,[14,14,3,0,-1,-1,3,14,14,14,-1,-1,3,0,14,0]],"{":[14,[9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,-1,-1,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,-1,-1,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7]],"|":[8,[4,25,4,-7]],"}":[14,[5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,-1,-1,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,-1,-1,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7]],"~":[24,[3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,-1,-1,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]]},Pn={symbol:function(e,t,n,r){if("translucent"===e.renderPass){var a=e.context;a.setStencilMode(He.disabled),a.setColorMode(e.colorModeForRenderPass()),0!==n.paint.get("icon-opacity").constantOr(1)&&cn(e,t,n,r,!1,n.paint.get("icon-translate"),n.paint.get("icon-translate-anchor"),n.layout.get("icon-rotation-alignment"),n.layout.get("icon-pitch-alignment"),n.layout.get("icon-keep-upright")),0!==n.paint.get("text-opacity").constantOr(1)&&cn(e,t,n,r,!0,n.paint.get("text-translate"),n.paint.get("text-translate-anchor"),n.layout.get("text-rotation-alignment"),n.layout.get("text-pitch-alignment"),n.layout.get("text-keep-upright")),t.map.showCollisionBoxes&&function(e,t,n,r){sn(e,t,n,r,!1),sn(e,t,n,r,!0)}(e,t,n,r)}},circle:function(e,t,n,r){if("translucent"===e.renderPass){var a=n.paint.get("circle-opacity"),i=n.paint.get("circle-stroke-width"),o=n.paint.get("circle-stroke-opacity");if(0!==a.constantOr(1)||0!==i.constantOr(1)&&0!==o.constantOr(1)){var s=e.context,l=s.gl;s.setDepthMode(e.depthModeForSublayer(0,Ge.ReadOnly)),s.setStencilMode(He.disabled),s.setColorMode(e.colorModeForRenderPass());for(var u=!0,c=0;c<r.length;c++){var f=r[c],d=t.getTile(f),p=d.getBucket(n);if(p){var h=e.context.program.get(),m=p.programConfigurations.get(n.id),v=e.useProgram("circle",m);if((u||v.program!==h)&&(m.setUniforms(s,v,n.paint,{zoom:e.transform.zoom}),u=!1),l.uniform1f(v.uniforms.u_camera_to_center_distance,e.transform.cameraToCenterDistance),l.uniform1i(v.uniforms.u_scale_with_map,"map"===n.paint.get("circle-pitch-scale")?1:0),"map"===n.paint.get("circle-pitch-alignment")){l.uniform1i(v.uniforms.u_pitch_with_map,1);var g=Et(d,1,e.transform.zoom);l.uniform2f(v.uniforms.u_extrude_scale,g,g)}else l.uniform1i(v.uniforms.u_pitch_with_map,0),l.uniform2fv(v.uniforms.u_extrude_scale,e.transform.pixelsToGLUnits);l.uniformMatrix4fv(v.uniforms.u_matrix,!1,e.translatePosMatrix(f.posMatrix,d,n.paint.get("circle-translate"),n.paint.get("circle-translate-anchor"))),v.draw(s,l.TRIANGLES,n.id,p.layoutVertexBuffer,p.indexBuffer,p.segments,m)}}}}},heatmap:function(t,n,r,a){if(0!==r.paint.get("heatmap-opacity"))if("offscreen"===t.renderPass){var i=t.context,o=i.gl;i.setDepthMode(t.depthModeForSublayer(0,Ge.ReadOnly)),i.setStencilMode(He.disabled),function(e,t,n){var r=e.gl;e.activeTexture.set(r.TEXTURE1),e.viewport.set([0,0,t.width/4,t.height/4]);var a=n.heatmapFbo;if(a)r.bindTexture(r.TEXTURE_2D,a.colorAttachment.get()),e.bindFramebuffer.set(a.framebuffer);else{var i=r.createTexture();r.bindTexture(r.TEXTURE_2D,i),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),a=n.heatmapFbo=e.createFramebuffer(t.width/4,t.height/4),function e(t,n,r,a){var i=t.gl;i.texImage2D(i.TEXTURE_2D,0,i.RGBA,n.width/4,n.height/4,0,i.RGBA,t.extTextureHalfFloat?t.extTextureHalfFloat.HALF_FLOAT_OES:i.UNSIGNED_BYTE,null),a.colorAttachment.set(r),t.extTextureHalfFloat&&i.checkFramebufferStatus(i.FRAMEBUFFER)!==i.FRAMEBUFFER_COMPLETE&&(t.extTextureHalfFloat=null,a.colorAttachment.setDirty(),e(t,n,r,a))}(e,t,i,a)}}(i,t,r),i.clear({color:e.default$6.transparent}),i.setColorMode(new We([o.ONE,o.ONE],e.default$6.transparent,[!0,!0,!0,!0]));for(var s=!0,l=0;l<a.length;l++){var u=a[l];if(!n.hasRenderableParent(u)){var c=n.getTile(u),f=c.getBucket(r);if(f){var d=t.context.program.get(),p=f.programConfigurations.get(r.id),h=t.useProgram("heatmap",p),m=t.transform.zoom;(s||h.program!==d)&&(p.setUniforms(t.context,h,r.paint,{zoom:m}),s=!1),o.uniform1f(h.uniforms.u_extrude_scale,Et(c,1,m)),o.uniform1f(h.uniforms.u_intensity,r.paint.get("heatmap-intensity")),o.uniformMatrix4fv(h.uniforms.u_matrix,!1,u.posMatrix),h.draw(i,o.TRIANGLES,r.id,f.layoutVertexBuffer,f.indexBuffer,f.segments,p)}}}i.viewport.set([0,0,t.width,t.height])}else"translucent"===t.renderPass&&(t.context.setColorMode(t.colorModeForRenderPass()),function(t,n){var r=t.context,a=r.gl,i=n.heatmapFbo;if(i){r.activeTexture.set(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,i.colorAttachment.get()),r.activeTexture.set(a.TEXTURE1);var o=n.colorRampTexture;o||(o=n.colorRampTexture=new P(r,n.colorRamp,a.RGBA)),o.bind(a.LINEAR,a.CLAMP_TO_EDGE),r.setDepthMode(Ge.disabled);var s=t.useProgram("heatmapTexture"),l=n.paint.get("heatmap-opacity");a.uniform1f(s.uniforms.u_opacity,l),a.uniform1i(s.uniforms.u_image,0),a.uniform1i(s.uniforms.u_color_ramp,1);var u=e.mat4.create();e.mat4.ortho(u,0,t.width,t.height,0,0,1),a.uniformMatrix4fv(s.uniforms.u_matrix,!1,u),a.uniform2f(s.uniforms.u_world,a.drawingBufferWidth,a.drawingBufferHeight),t.viewportVAO.bind(t.context,s,t.viewportBuffer,[]),a.drawArrays(a.TRIANGLE_STRIP,0,4)}}(t,r))},line:function(e,t,n,r){if("translucent"===e.renderPass&&0!==n.paint.get("line-opacity").constantOr(1)){var a=e.context;a.setDepthMode(e.depthModeForSublayer(0,Ge.ReadOnly)),a.setColorMode(e.colorModeForRenderPass());for(var i,o=n.paint.get("line-dasharray")?"lineSDF":n.paint.get("line-pattern")?"linePattern":n.paint.get("line-gradient")?"lineGradient":"line",s=!0,l=0,u=r;l<u.length;l+=1){var c=u[l],f=t.getTile(c),d=f.getBucket(n);if(d){var p=d.programConfigurations.get(n.id),h=e.context.program.get(),m=e.useProgram(o,p),v=s||m.program!==h,g=i!==f.tileID.overscaledZ;v&&p.setUniforms(e.context,m,n.paint,{zoom:e.transform.zoom}),hn(m,e,f,d,n,c,p,v,g),i=f.tileID.overscaledZ,s=!1}}}},fill:function(t,n,r,a){var i=r.paint.get("fill-color"),o=r.paint.get("fill-opacity");if(0!==o.constantOr(1)){var s=t.context;s.setColorMode(t.colorModeForRenderPass());var l=r.paint.get("fill-pattern")||1!==i.constantOr(e.default$6.transparent).a||1!==o.constantOr(0)?"translucent":"opaque";t.renderPass===l&&(s.setDepthMode(t.depthModeForSublayer(1,"opaque"===t.renderPass?Ge.ReadWrite:Ge.ReadOnly)),yn(t,n,r,a,bn)),"translucent"===t.renderPass&&r.paint.get("fill-antialias")&&(s.lineWidth.set(2),s.setDepthMode(t.depthModeForSublayer(r.getPaintProperty("fill-outline-color")?2:0,Ge.ReadOnly)),yn(t,n,r,a,xn))}},"fill-extrusion":function(t,n,r,a){if(0!==r.paint.get("fill-extrusion-opacity"))if("offscreen"===t.renderPass){!function(t,n){var r=t.context,a=r.gl,i=n.viewportFrame;if(t.depthRboNeedsClear&&t.setupOffscreenDepthRenderbuffer(),!i){var o=new P(r,{width:t.width,height:t.height,data:null},a.RGBA);o.bind(a.LINEAR,a.CLAMP_TO_EDGE),(i=n.viewportFrame=r.createFramebuffer(t.width,t.height)).colorAttachment.set(o.texture)}r.bindFramebuffer.set(i.framebuffer),i.depthAttachment.set(t.depthRbo),t.depthRboNeedsClear&&(r.clear({depth:1}),t.depthRboNeedsClear=!1),r.clear({color:e.default$6.transparent}),r.setStencilMode(He.disabled),r.setDepthMode(new Ge(a.LEQUAL,Ge.ReadWrite,[0,1])),r.setColorMode(t.colorModeForRenderPass())}(t,r);for(var i=!0,o=0,s=a;o<s.length;o+=1){var l=s[o],u=n.getTile(l),c=u.getBucket(r);c&&(Cn(t,0,r,u,l,c,i),i=!1)}}else"translucent"===t.renderPass&&function(e,t){var n=t.viewportFrame;if(n){var r=e.context,a=r.gl,i=e.useProgram("extrusionTexture");r.setStencilMode(He.disabled),r.setDepthMode(Ge.disabled),r.setColorMode(e.colorModeForRenderPass()),r.activeTexture.set(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,n.colorAttachment.get()),a.uniform1f(i.uniforms.u_opacity,t.paint.get("fill-extrusion-opacity")),a.uniform1i(i.uniforms.u_image,0);var o=Tn.create();Tn.ortho(o,0,e.width,e.height,0,0,1),a.uniformMatrix4fv(i.uniforms.u_matrix,!1,o),a.uniform2f(i.uniforms.u_world,a.drawingBufferWidth,a.drawingBufferHeight),e.viewportVAO.bind(r,i,e.viewportBuffer,[]),a.drawArrays(a.TRIANGLE_STRIP,0,4)}}(t,r)},hillshade:function(e,t,n,r){if("offscreen"===e.renderPass||"translucent"===e.renderPass){var a=e.context,i=t.getSource().maxzoom;a.setDepthMode(e.depthModeForSublayer(0,Ge.ReadOnly)),a.setStencilMode(He.disabled),a.setColorMode(e.colorModeForRenderPass());for(var o=0,s=r;o<s.length;o+=1){var l=s[o],u=t.getTile(l);u.needsHillshadePrepare&&"offscreen"===e.renderPass?Mn(e,u,i):"translucent"===e.renderPass&&En(e,u,n)}a.viewport.set([0,0,e.width,e.height])}},raster:function(e,t,n,r){if("translucent"===e.renderPass&&0!==n.paint.get("raster-opacity")){var a,i,o=e.context,s=o.gl,l=t.getSource(),u=e.useProgram("raster");o.setStencilMode(He.disabled),o.setColorMode(e.colorModeForRenderPass()),s.uniform1f(u.uniforms.u_brightness_low,n.paint.get("raster-brightness-min")),s.uniform1f(u.uniforms.u_brightness_high,n.paint.get("raster-brightness-max")),s.uniform1f(u.uniforms.u_saturation_factor,(a=n.paint.get("raster-saturation"))>0?1-1/(1.001-a):-a),s.uniform1f(u.uniforms.u_contrast_factor,(i=n.paint.get("raster-contrast"))>0?1/(1-i):1+i),s.uniform3fv(u.uniforms.u_spin_weights,function(e){e*=Math.PI/180;var t=Math.sin(e),n=Math.cos(e);return[(2*n+1)/3,(-Math.sqrt(3)*t-n+1)/3,(Math.sqrt(3)*t-n+1)/3]}(n.paint.get("raster-hue-rotate"))),s.uniform1f(u.uniforms.u_buffer_scale,1),s.uniform1i(u.uniforms.u_image0,0),s.uniform1i(u.uniforms.u_image1,1);for(var c=r.length&&r[0].overscaledZ,f=0,d=r;f<d.length;f+=1){var p=d[f];o.setDepthMode(e.depthModeForSublayer(p.overscaledZ-c,1===n.paint.get("raster-opacity")?Ge.ReadWrite:Ge.ReadOnly,s.LESS));var h=t.getTile(p),m=e.transform.calculatePosMatrix(p.toUnwrapped(),!0);h.registerFadeDuration(n.paint.get("raster-fade-duration")),s.uniformMatrix4fv(u.uniforms.u_matrix,!1,m);var v=t.findLoadedParent(p,0,{}),g=An(h,v,t,n,e.transform),y=void 0,b=void 0;if(o.activeTexture.set(s.TEXTURE0),h.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),o.activeTexture.set(s.TEXTURE1),v?(v.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),y=Math.pow(2,v.tileID.overscaledZ-h.tileID.overscaledZ),b=[h.tileID.canonical.x*y%1,h.tileID.canonical.y*y%1]):h.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),s.uniform2fv(u.uniforms.u_tl_parent,b||[0,0]),s.uniform1f(u.uniforms.u_scale_parent,y||1),s.uniform1f(u.uniforms.u_fade_t,g.mix),s.uniform1f(u.uniforms.u_opacity,g.opacity*n.paint.get("raster-opacity")),l instanceof ee){var x=l.boundsBuffer;l.boundsVAO.bind(o,u,x,[]),s.drawArrays(s.TRIANGLE_STRIP,0,x.length)}else if(h.maskedBoundsBuffer&&h.maskedIndexBuffer&&h.segments)u.draw(o,s.TRIANGLES,n.id,h.maskedBoundsBuffer,h.maskedIndexBuffer,h.segments);else{var _=e.rasterBoundsBuffer;e.rasterBoundsVAO.bind(o,u,_,[]),s.drawArrays(s.TRIANGLE_STRIP,0,_.length)}}}},background:function(e,t,n){var r=n.paint.get("background-color"),a=n.paint.get("background-opacity");if(0!==a){var i=e.context,o=i.gl,s=e.transform,l=s.tileSize,u=n.paint.get("background-pattern"),c=u||1!==r.a||1!==a?"translucent":"opaque";if(e.renderPass===c){var f;if(i.setStencilMode(He.disabled),i.setDepthMode(e.depthModeForSublayer(0,"opaque"===c?Ge.ReadWrite:Ge.ReadOnly)),i.setColorMode(e.colorModeForRenderPass()),u){if(mn(u,e))return;f=e.useProgram("backgroundPattern"),vn(u,e,f),e.tileExtentPatternVAO.bind(i,f,e.tileExtentBuffer,[])}else f=e.useProgram("background"),o.uniform4fv(f.uniforms.u_color,[r.r,r.g,r.b,r.a]),e.tileExtentVAO.bind(i,f,e.tileExtentBuffer,[]);o.uniform1f(f.uniforms.u_opacity,a);for(var d=0,p=s.coveringTiles({tileSize:l});d<p.length;d+=1){var h=p[d];u&&gn({tileID:h,tileSize:l},e,f),o.uniformMatrix4fv(f.uniforms.u_matrix,!1,e.transform.calculatePosMatrix(h.toUnwrapped())),o.drawArrays(o.TRIANGLE_STRIP,0,e.tileExtentBuffer.length)}}}},debug:function(e,t,n){for(var r=0;r<n.length;r++)Sn(e,t,n[r])}},Rn=function(t,n){this.context=new qe(t),this.transform=n,this._tileTextures={},this.setup(),this.numSublayers=Ye.maxUnderzooming+Ye.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.depthRboNeedsClear=!0,this.emptyProgramConfiguration=new e.default$24,this.crossTileSymbolIndex=new Yt};function Ln(e,t){if(e.row>t.row){var n=e;e=t,t=n}return{x0:e.column,y0:e.row,x1:t.column,y1:t.row,dx:t.column-e.column,dy:t.row-e.row}}function Dn(e,t,n,r,a){var i=Math.max(n,Math.floor(t.y0)),o=Math.min(r,Math.ceil(t.y1));if(e.x0===t.x0&&e.y0===t.y0?e.x0+t.dy/e.dy*e.dx<t.x1:e.x1-t.dy/e.dy*e.dx<t.x0){var s=e;e=t,t=s}for(var l=e.dx/e.dy,u=t.dx/t.dy,c=e.dx>0,f=t.dx<0,d=i;d<o;d++){var p=l*Math.max(0,Math.min(e.dy,d+c-e.y0))+e.x0,h=u*Math.max(0,Math.min(t.dy,d+f-t.y0))+t.x0;a(Math.floor(h),Math.ceil(p),d)}}function In(e,t,n,r,a,i){var o,s=Ln(e,t),l=Ln(t,n),u=Ln(n,e);s.dy>l.dy&&(o=s,s=l,l=o),s.dy>u.dy&&(o=s,s=u,u=o),l.dy>u.dy&&(o=l,l=u,u=o),s.dy&&Dn(u,s,r,a,i),l.dy&&Dn(u,l,r,a,i)}Rn.prototype.resize=function(e,t){var n=this.context.gl;if(this.width=e*i.devicePixelRatio,this.height=t*i.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var r=0,a=this.style._order;r<a.length;r+=1){var o=a[r];this.style._layers[o].resize()}this.depthRbo&&(n.deleteRenderbuffer(this.depthRbo),this.depthRbo=null)},Rn.prototype.setup=function(){var t=this.context,n=new e.PosArray;n.emplaceBack(0,0),n.emplaceBack(e.default$8,0),n.emplaceBack(0,e.default$8),n.emplaceBack(e.default$8,e.default$8),this.tileExtentBuffer=t.createVertexBuffer(n,Jt.members),this.tileExtentVAO=new Q,this.tileExtentPatternVAO=new Q;var r=new e.PosArray;r.emplaceBack(0,0),r.emplaceBack(e.default$8,0),r.emplaceBack(e.default$8,e.default$8),r.emplaceBack(0,e.default$8),r.emplaceBack(0,0),this.debugBuffer=t.createVertexBuffer(r,Jt.members),this.debugVAO=new Q;var a=new e.RasterBoundsArray;a.emplaceBack(0,0,0,0),a.emplaceBack(e.default$8,0,e.default$8,0),a.emplaceBack(0,e.default$8,0,e.default$8),a.emplaceBack(e.default$8,e.default$8,e.default$8,e.default$8),this.rasterBoundsBuffer=t.createVertexBuffer(a,J.members),this.rasterBoundsVAO=new Q;var i=new e.PosArray;i.emplaceBack(0,0),i.emplaceBack(1,0),i.emplaceBack(0,1),i.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(i,Jt.members),this.viewportVAO=new Q},Rn.prototype.clearStencil=function(){var t=this.context,n=t.gl;t.setColorMode(We.disabled),t.setDepthMode(Ge.disabled),t.setStencilMode(new He({func:n.ALWAYS,mask:0},0,255,n.ZERO,n.ZERO,n.ZERO));var r=e.mat4.create();e.mat4.ortho(r,0,this.width,this.height,0,0,1),e.mat4.scale(r,r,[n.drawingBufferWidth,n.drawingBufferHeight,0]);var a=this.useProgram("clippingMask");n.uniformMatrix4fv(a.uniforms.u_matrix,!1,r),this.viewportVAO.bind(t,a,this.viewportBuffer,[]),n.drawArrays(n.TRIANGLE_STRIP,0,4)},Rn.prototype._renderTileClippingMasks=function(e){var t=this.context,n=t.gl;t.setColorMode(We.disabled),t.setDepthMode(Ge.disabled);var r=1;this._tileClippingMaskIDs={};for(var a=0,i=e;a<i.length;a+=1){var o=i[a],s=this._tileClippingMaskIDs[o.key]=r++;t.setStencilMode(new He({func:n.ALWAYS,mask:0},s,255,n.KEEP,n.KEEP,n.REPLACE));var l=this.useProgram("clippingMask");n.uniformMatrix4fv(l.uniforms.u_matrix,!1,o.posMatrix),this.tileExtentVAO.bind(this.context,l,this.tileExtentBuffer,[]),n.drawArrays(n.TRIANGLE_STRIP,0,this.tileExtentBuffer.length)}},Rn.prototype.stencilModeForClipping=function(e){var t=this.context.gl;return new He({func:t.EQUAL,mask:255},this._tileClippingMaskIDs[e.key],0,t.KEEP,t.KEEP,t.REPLACE)},Rn.prototype.colorModeForRenderPass=function(){var t=this.context.gl;return this._showOverdrawInspector?new We([t.CONSTANT_COLOR,t.ONE],new e.default$6(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?We.unblended:We.alphaBlended},Rn.prototype.depthModeForSublayer=function(e,t,n){var r=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon,a=r-1+this.depthRange;return new Ge(n||this.context.gl.LEQUAL,t,[a,r])},Rn.prototype.render=function(t,n){var r=this;for(var a in this.style=t,this.options=n,this.lineAtlas=t.lineAtlas,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(i.now()),t.sourceCaches){var o=r.style.sourceCaches[a];o.used&&o.prepare(r.context)}var s=this.style._order,l=e.filterObject(this.style.sourceCaches,function(e){return"raster"===e.getSource().type||"raster-dem"===e.getSource().type}),u=function(t){var n=l[t];!function(t,n){for(var r=t.sort(function(e,t){return e.tileID.isLessThan(t.tileID)?-1:t.tileID.isLessThan(e.tileID)?1:0}),a=0;a<r.length;a++){var i={},o=r[a],s=r.slice(a+1);on(o.tileID.wrapped(),o.tileID,s,new e.OverscaledTileID(0,o.tileID.wrap+1,0,0,0),i),o.setMask(i,n)}}(n.getVisibleCoordinates().map(function(e){return n.getTile(e)}),r.context)};for(var c in l)u(c);this.renderPass="offscreen";var f,d=[];this.depthRboNeedsClear=!0;for(var p=0;p<s.length;p++){var h=r.style._layers[s[p]];h.hasOffscreenPass()&&!h.isHidden(r.transform.zoom)&&(h.source!==(f&&f.id)&&(d=[],(f=r.style.sourceCaches[h.source])&&(d=f.getVisibleCoordinates()).reverse()),d.length&&r.renderLayer(r,f,h,d))}this.context.bindFramebuffer.set(null),this.context.clear({color:n.showOverdrawInspector?e.default$6.black:e.default$6.transparent,depth:1}),this._showOverdrawInspector=n.showOverdrawInspector,this.depthRange=(t._order.length+2)*this.numSublayers*this.depthEpsilon,this.renderPass="opaque";var m,v=[];for(this.currentLayer=s.length-1,this.currentLayer;this.currentLayer>=0;this.currentLayer--){var g=r.style._layers[s[r.currentLayer]];g.source!==(m&&m.id)&&(v=[],(m=r.style.sourceCaches[g.source])&&(r.clearStencil(),v=m.getVisibleCoordinates(),m.getSource().isTileClipped&&r._renderTileClippingMasks(v))),r.renderLayer(r,m,g,v)}this.renderPass="translucent";var y,b=[];for(this.currentLayer=0,this.currentLayer;this.currentLayer<s.length;this.currentLayer++){var x=r.style._layers[s[r.currentLayer]];x.source!==(y&&y.id)&&(b=[],(y=r.style.sourceCaches[x.source])&&(r.clearStencil(),b=y.getVisibleCoordinates(),y.getSource().isTileClipped&&r._renderTileClippingMasks(b)),b.reverse()),r.renderLayer(r,y,x,b)}if(this.options.showTileBoundaries){var _=this.style.sourceCaches[Object.keys(this.style.sourceCaches)[0]];_&&Pn.debug(this,_,_.getVisibleCoordinates())}},Rn.prototype.setupOffscreenDepthRenderbuffer=function(){var e=this.context;this.depthRbo||(this.depthRbo=e.createRenderbuffer(e.gl.DEPTH_COMPONENT16,this.width,this.height))},Rn.prototype.renderLayer=function(e,t,n,r){n.isHidden(this.transform.zoom)||("background"===n.type||r.length)&&(this.id=n.id,Pn[n.type](e,t,n,r))},Rn.prototype.translatePosMatrix=function(t,n,r,a,i){if(!r[0]&&!r[1])return t;var o=i?"map"===a?this.transform.angle:0:"viewport"===a?-this.transform.angle:0;if(o){var s=Math.sin(o),l=Math.cos(o);r=[r[0]*l-r[1]*s,r[0]*s+r[1]*l]}var u=[i?r[0]:Et(n,r[0],this.transform.zoom),i?r[1]:Et(n,r[1],this.transform.zoom),0],c=new Float32Array(16);return e.mat4.translate(c,t,u),c},Rn.prototype.saveTileTexture=function(e){var t=this._tileTextures[e.size[0]];t?t.push(e):this._tileTextures[e.size[0]]=[e]},Rn.prototype.getTileTexture=function(e){var t=this._tileTextures[e];return t&&t.length>0?t.pop():null},Rn.prototype._createProgramCached=function(e,t){this.cache=this.cache||{};var n=""+e+(t.cacheKey||"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[n]||(this.cache[n]=new an(this.context,rn[e],t,this._showOverdrawInspector)),this.cache[n]},Rn.prototype.useProgram=function(e,t){var n=this._createProgramCached(e,t||this.emptyProgramConfiguration);return this.context.program.set(n.program),n};var zn=e.default$20.vec4,jn=e.default$20.mat4,Nn=e.default$20.mat2,Fn=function(e,t,n){this.tileSize=512,this._renderWorldCopies=void 0===n||n,this._minZoom=e||0,this._maxZoom=t||22,this.latRange=[-85.05113,85.05113],this.width=0,this.height=0,this._center=new W(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._posMatrixCache={},this._alignedPosMatrixCache={}},Bn={minZoom:{configurable:!0},maxZoom:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerPoint:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},unmodified:{configurable:!0},x:{configurable:!0},y:{configurable:!0},point:{configurable:!0}};Fn.prototype.clone=function(){var e=new Fn(this._minZoom,this._maxZoom,this._renderWorldCopies);return e.tileSize=this.tileSize,e.latRange=this.latRange,e.width=this.width,e.height=this.height,e._center=this._center,e.zoom=this.zoom,e.angle=this.angle,e._fov=this._fov,e._pitch=this._pitch,e._unmodified=this._unmodified,e._calcMatrices(),e},Bn.minZoom.get=function(){return this._minZoom},Bn.minZoom.set=function(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))},Bn.maxZoom.get=function(){return this._maxZoom},Bn.maxZoom.set=function(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))},Bn.renderWorldCopies.get=function(){return this._renderWorldCopies},Bn.renderWorldCopies.set=function(e){void 0===e?e=!0:null===e&&(e=!1),this._renderWorldCopies=e},Bn.worldSize.get=function(){return this.tileSize*this.scale},Bn.centerPoint.get=function(){return this.size._div(2)},Bn.size.get=function(){return new e.default$1(this.width,this.height)},Bn.bearing.get=function(){return-this.angle/Math.PI*180},Bn.bearing.set=function(t){var n=-e.wrap(t,-180,180)*Math.PI/180;this.angle!==n&&(this._unmodified=!1,this.angle=n,this._calcMatrices(),this.rotationMatrix=Nn.create(),Nn.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Bn.pitch.get=function(){return this._pitch/Math.PI*180},Bn.pitch.set=function(t){var n=e.clamp(t,0,60)/180*Math.PI;this._pitch!==n&&(this._unmodified=!1,this._pitch=n,this._calcMatrices())},Bn.fov.get=function(){return this._fov/Math.PI*180},Bn.fov.set=function(e){e=Math.max(.01,Math.min(60,e)),this._fov!==e&&(this._unmodified=!1,this._fov=e/180*Math.PI,this._calcMatrices())},Bn.zoom.get=function(){return this._zoom},Bn.zoom.set=function(e){var t=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==t&&(this._unmodified=!1,this._zoom=t,this.scale=this.zoomScale(t),this.tileZoom=Math.floor(t),this.zoomFraction=t-this.tileZoom,this._constrain(),this._calcMatrices())},Bn.center.get=function(){return this._center},Bn.center.set=function(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._constrain(),this._calcMatrices())},Fn.prototype.coveringZoomLevel=function(e){return(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize))},Fn.prototype.getVisibleUnwrappedCoordinates=function(t){var n=this.pointCoordinate(new e.default$1(0,0),0),r=this.pointCoordinate(new e.default$1(this.width,0),0),a=Math.floor(n.column),i=Math.floor(r.column),o=[new e.UnwrappedTileID(0,t)];if(this._renderWorldCopies)for(var s=a;s<=i;s++)0!==s&&o.push(new e.UnwrappedTileID(s,t));return o},Fn.prototype.coveringTiles=function(t){var n=this.coveringZoomLevel(t),r=n;if(void 0!==t.minzoom&&n<t.minzoom)return[];void 0!==t.maxzoom&&n>t.maxzoom&&(n=t.maxzoom);var a=this.pointCoordinate(this.centerPoint,n),i=new e.default$1(a.column-.5,a.row-.5);return function(t,n,r,a){void 0===a&&(a=!0);var i=1<<t,o={};function s(n,s,l){var u,c,f,d;if(l>=0&&l<=i)for(u=n;u<s;u++)c=Math.floor(u/i),f=(u%i+i)%i,0!==c&&!0!==a||(d=new e.OverscaledTileID(r,c,t,f,l),o[d.key]=d)}return In(n[0],n[1],n[2],0,i,s),In(n[2],n[3],n[0],0,i,s),Object.keys(o).map(function(e){return o[e]})}(n,[this.pointCoordinate(new e.default$1(0,0),n),this.pointCoordinate(new e.default$1(this.width,0),n),this.pointCoordinate(new e.default$1(this.width,this.height),n),this.pointCoordinate(new e.default$1(0,this.height),n)],t.reparseOverscaled?r:n,this._renderWorldCopies).sort(function(e,t){return i.dist(e.canonical)-i.dist(t.canonical)})},Fn.prototype.resize=function(e,t){this.width=e,this.height=t,this.pixelsToGLUnits=[2/e,-2/t],this._constrain(),this._calcMatrices()},Bn.unmodified.get=function(){return this._unmodified},Fn.prototype.zoomScale=function(e){return Math.pow(2,e)},Fn.prototype.scaleZoom=function(e){return Math.log(e)/Math.LN2},Fn.prototype.project=function(t){return new e.default$1(this.lngX(t.lng),this.latY(t.lat))},Fn.prototype.unproject=function(e){return new W(this.xLng(e.x),this.yLat(e.y))},Bn.x.get=function(){return this.lngX(this.center.lng)},Bn.y.get=function(){return this.latY(this.center.lat)},Bn.point.get=function(){return new e.default$1(this.x,this.y)},Fn.prototype.lngX=function(e){return(180+e)*this.worldSize/360},Fn.prototype.latY=function(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))*this.worldSize/360},Fn.prototype.xLng=function(e){return 360*e/this.worldSize-180},Fn.prototype.yLat=function(e){var t=180-360*e/this.worldSize;return 360/Math.PI*Math.atan(Math.exp(t*Math.PI/180))-90},Fn.prototype.setLocationAtPoint=function(e,t){var n=this.pointCoordinate(t)._sub(this.pointCoordinate(this.centerPoint));this.center=this.coordinateLocation(this.locationCoordinate(e)._sub(n)),this._renderWorldCopies&&(this.center=this.center.wrap())},Fn.prototype.locationPoint=function(e){return this.coordinatePoint(this.locationCoordinate(e))},Fn.prototype.pointLocation=function(e){return this.coordinateLocation(this.pointCoordinate(e))},Fn.prototype.locationCoordinate=function(t){return new e.default$17(this.lngX(t.lng)/this.tileSize,this.latY(t.lat)/this.tileSize,this.zoom).zoomTo(this.tileZoom)},Fn.prototype.coordinateLocation=function(e){var t=e.zoomTo(this.zoom);return new W(this.xLng(t.column*this.tileSize),this.yLat(t.row*this.tileSize))},Fn.prototype.pointCoordinate=function(t,n){void 0===n&&(n=this.tileZoom);var r=[t.x,t.y,0,1],a=[t.x,t.y,1,1];zn.transformMat4(r,r,this.pixelMatrixInverse),zn.transformMat4(a,a,this.pixelMatrixInverse);var i=r[3],o=a[3],s=r[0]/i,l=a[0]/o,u=r[1]/i,c=a[1]/o,f=r[2]/i,d=a[2]/o,p=f===d?0:(0-f)/(d-f);return new e.default$17(e.number(s,l,p)/this.tileSize,e.number(u,c,p)/this.tileSize,this.zoom)._zoomTo(n)},Fn.prototype.coordinatePoint=function(t){var n=t.zoomTo(this.zoom),r=[n.column*this.tileSize,n.row*this.tileSize,0,1];return zn.transformMat4(r,r,this.pixelMatrix),new e.default$1(r[0]/r[3],r[1]/r[3])},Fn.prototype.calculatePosMatrix=function(t,n){void 0===n&&(n=!1);var r=t.key,a=n?this._alignedPosMatrixCache:this._posMatrixCache;if(a[r])return a[r];var i=t.canonical,o=this.worldSize/this.zoomScale(i.z),s=i.x+Math.pow(2,i.z)*t.wrap,l=jn.identity(new Float64Array(16));return jn.translate(l,l,[s*o,i.y*o,0]),jn.scale(l,l,[o/e.default$8,o/e.default$8,1]),jn.multiply(l,n?this.alignedProjMatrix:this.projMatrix,l),a[r]=new Float32Array(l),a[r]},Fn.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var t,n,r,a,i=-90,o=90,s=-180,l=180,u=this.size,c=this._unmodified;if(this.latRange){var f=this.latRange;i=this.latY(f[1]),t=(o=this.latY(f[0]))-i<u.y?u.y/(o-i):0}if(this.lngRange){var d=this.lngRange;s=this.lngX(d[0]),n=(l=this.lngX(d[1]))-s<u.x?u.x/(l-s):0}var p=Math.max(n||0,t||0);if(p)return this.center=this.unproject(new e.default$1(n?(l+s)/2:this.x,t?(o+i)/2:this.y)),this.zoom+=this.scaleZoom(p),this._unmodified=c,void(this._constraining=!1);if(this.latRange){var h=this.y,m=u.y/2;h-m<i&&(a=i+m),h+m>o&&(a=o-m)}if(this.lngRange){var v=this.x,g=u.x/2;v-g<s&&(r=s+g),v+g>l&&(r=l-g)}void 0===r&&void 0===a||(this.center=this.unproject(new e.default$1(void 0!==r?r:this.x,void 0!==a?a:this.y))),this._unmodified=c,this._constraining=!1}},Fn.prototype._calcMatrices=function(){if(this.height){this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var e=this._fov/2,t=Math.PI/2+this._pitch,n=Math.sin(e)*this.cameraToCenterDistance/Math.sin(Math.PI-t-e),r=this.x,a=this.y,i=1.01*(Math.cos(Math.PI/2-this._pitch)*n+this.cameraToCenterDistance),o=new Float64Array(16);jn.perspective(o,this._fov,this.width/this.height,1,i),jn.scale(o,o,[1,-1,1]),jn.translate(o,o,[0,0,-this.cameraToCenterDistance]),jn.rotateX(o,o,this._pitch),jn.rotateZ(o,o,this.angle),jn.translate(o,o,[-r,-a,0]);var s=this.worldSize/(2*Math.PI*6378137*Math.abs(Math.cos(this.center.lat*(Math.PI/180))));jn.scale(o,o,[1,1,s,1]),this.projMatrix=o;var l=this.width%2/2,u=this.height%2/2,c=Math.cos(this.angle),f=Math.sin(this.angle),d=r-Math.round(r)+c*l+f*u,p=a-Math.round(a)+c*u+f*l,h=new Float64Array(o);if(jn.translate(h,h,[d>.5?d-1:d,p>.5?p-1:p,0]),this.alignedProjMatrix=h,o=jn.create(),jn.scale(o,o,[this.width/2,-this.height/2,1]),jn.translate(o,o,[1,-1,0]),this.pixelMatrix=jn.multiply(new Float64Array(16),o,this.projMatrix),!(o=jn.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=o,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Fn.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var t=this.pointCoordinate(new e.default$1(0,0)).zoomTo(this.zoom),n=[t.column*this.tileSize,t.row*this.tileSize,0,1];return zn.transformMat4(n,n,this.pixelMatrix)[3]/this.cameraToCenterDistance},Object.defineProperties(Fn.prototype,Bn);var Vn=function(){var t,n,r,a;e.bindAll(["_onHashChange","_updateHash"],this),this._updateHash=(t=this._updateHashUnthrottled.bind(this),n=!1,r=0,a=function(){r=0,n&&(t(),r=setTimeout(a,300),n=!1)},function(){return n=!0,r||a(),r})};Vn.prototype.addTo=function(t){return this._map=t,e.default.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Vn.prototype.remove=function(){return e.default.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Vn.prototype.getHashString=function(e){var t=this._map.getCenter(),n=Math.round(100*this._map.getZoom())/100,r=Math.ceil((n*Math.LN2+Math.log(512/360/.5))/Math.LN10),a=Math.pow(10,r),i=Math.round(t.lng*a)/a,o=Math.round(t.lat*a)/a,s=this._map.getBearing(),l=this._map.getPitch(),u="";return u+=e?"#/"+i+"/"+o+"/"+n:"#"+n+"/"+o+"/"+i,(s||l)&&(u+="/"+Math.round(10*s)/10),l&&(u+="/"+Math.round(l)),u},Vn.prototype._onHashChange=function(){var t=e.default.location.hash.replace("#","").split("/");return t.length>=3&&(this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:+(t[3]||0),pitch:+(t[4]||0)}),!0)},Vn.prototype._updateHashUnthrottled=function(){var t=this.getHashString();e.default.history.replaceState(e.default.history.state,"",t)};var Un=function(t){function n(n,r,a,i){void 0===i&&(i={});var o=s.mousePos(r.getCanvasContainer(),a),l=r.unproject(o);t.call(this,n,e.extend({point:o,lngLat:l,originalEvent:a},i)),this._defaultPrevented=!1,this.target=r}t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n;var r={defaultPrevented:{configurable:!0}};return n.prototype.preventDefault=function(){this._defaultPrevented=!0},r.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(n.prototype,r),n}(e.Event),Gn=function(t){function n(n,r,a){var i=s.touchPos(r.getCanvasContainer(),a),o=i.map(function(e){return r.unproject(e)}),l=i.reduce(function(e,t,n,r){return e.add(t.div(r.length))},new e.default$1(0,0)),u=r.unproject(l);t.call(this,n,{points:i,point:l,lngLats:o,lngLat:u,originalEvent:a}),this._defaultPrevented=!1}t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n;var r={defaultPrevented:{configurable:!0}};return n.prototype.preventDefault=function(){this._defaultPrevented=!0},r.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(n.prototype,r),n}(e.Event),Hn=function(e){function t(t,n,r){e.call(this,t,{originalEvent:r}),this._defaultPrevented=!1}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={defaultPrevented:{configurable:!0}};return t.prototype.preventDefault=function(){this._defaultPrevented=!0},n.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(t.prototype,n),t}(e.Event),Wn=function(t){this._map=t,this._el=t.getCanvasContainer(),this._delta=0,e.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};Wn.prototype.isEnabled=function(){return!!this._enabled},Wn.prototype.isActive=function(){return!!this._active},Wn.prototype.enable=function(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=e&&"center"===e.around)},Wn.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Wn.prototype.onWheel=function(t){if(this.isEnabled()){var n=t.deltaMode===e.default.WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY,r=i.now(),a=r-(this._lastWheelEventTime||0);this._lastWheelEventTime=r,0!==n&&n%4.000244140625==0?this._type="wheel":0!==n&&Math.abs(n)<4?this._type="trackpad":a>400?(this._type=null,this._lastValue=n,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(a*n)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,n+=this._lastValue)),t.shiftKey&&n&&(n/=4),this._type&&(this._lastWheelEvent=t,this._delta-=n,this.isActive()||this._start(t)),t.preventDefault()}},Wn.prototype._onTimeout=function(e){this._type="wheel",this._delta-=this._lastValue,this.isActive()||this._start(e)},Wn.prototype._start=function(t){if(this._delta){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),this._active=!0,this._map.fire(new e.Event("movestart",{originalEvent:t})),this._map.fire(new e.Event("zoomstart",{originalEvent:t})),this._finishTimeout&&clearTimeout(this._finishTimeout);var n=s.mousePos(this._el,t);this._around=W.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(n)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame))}},Wn.prototype._onScrollFrame=function(){var t=this;if(this._frameId=null,this.isActive()){var n=this._map.transform;if(0!==this._delta){var r="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?1/450:.01,a=2/(1+Math.exp(-Math.abs(this._delta*r)));this._delta<0&&0!==a&&(a=1/a);var o="number"==typeof this._targetZoom?n.zoomScale(this._targetZoom):n.scale;this._targetZoom=Math.min(n.maxZoom,Math.max(n.minZoom,n.scaleZoom(o*a))),"wheel"===this._type&&(this._startZoom=n.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var s=!1;if("wheel"===this._type){var l=Math.min((i.now()-this._lastWheelEventTime)/200,1),u=this._easing(l);n.zoom=e.number(this._startZoom,this._targetZoom,u),l<1?this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame)):s=!0}else n.zoom=this._targetZoom,s=!0;n.setLocationAtPoint(this._around,this._aroundPoint),this._map.fire(new e.Event("move",{originalEvent:this._lastWheelEvent})),this._map.fire(new e.Event("zoom",{originalEvent:this._lastWheelEvent})),s&&(this._active=!1,this._finishTimeout=setTimeout(function(){t._map.fire(new e.Event("zoomend",{originalEvent:t._lastWheelEvent})),t._map.fire(new e.Event("moveend",{originalEvent:t._lastWheelEvent})),delete t._targetZoom},200))}},Wn.prototype._smoothOutEasing=function(t){var n=e.ease;if(this._prevEase){var r=this._prevEase,a=(i.now()-r.start)/r.duration,o=r.easing(a+.01)-r.easing(a),s=.27/Math.sqrt(o*o+1e-4)*.01,l=Math.sqrt(.0729-s*s);n=e.bezier(s,l,.25,1)}return this._prevEase={start:i.now(),duration:t,easing:n},n};var qn=function(t){this._map=t,this._el=t.getCanvasContainer(),this._container=t.getContainer(),e.bindAll(["_onMouseMove","_onMouseUp","_onKeyDown"],this)};qn.prototype.isEnabled=function(){return!!this._enabled},qn.prototype.isActive=function(){return!!this._active},qn.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},qn.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},qn.prototype.onMouseDown=function(t){this.isEnabled()&&t.shiftKey&&0===t.button&&(e.default.document.addEventListener("mousemove",this._onMouseMove,!1),e.default.document.addEventListener("keydown",this._onKeyDown,!1),e.default.document.addEventListener("mouseup",this._onMouseUp,!1),s.disableDrag(),this._startPos=s.mousePos(this._el,t),this._active=!0)},qn.prototype._onMouseMove=function(e){var t=this._startPos,n=s.mousePos(this._el,e);this._box||(this._box=s.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",e));var r=Math.min(t.x,n.x),a=Math.max(t.x,n.x),i=Math.min(t.y,n.y),o=Math.max(t.y,n.y);s.setTransform(this._box,"translate("+r+"px,"+i+"px)"),this._box.style.width=a-r+"px",this._box.style.height=o-i+"px"},qn.prototype._onMouseUp=function(t){if(0===t.button){var n=this._startPos,r=s.mousePos(this._el,t),a=(new q).extend(this._map.unproject(n)).extend(this._map.unproject(r));this._finish(),s.suppressClick(),n.x===r.x&&n.y===r.y?this._fireEvent("boxzoomcancel",t):this._map.fitBounds(a,{linear:!0}).fire(new e.Event("boxzoomend",{originalEvent:t,boxZoomBounds:a}))}},qn.prototype._onKeyDown=function(e){27===e.keyCode&&(this._finish(),this._fireEvent("boxzoomcancel",e))},qn.prototype._finish=function(){this._active=!1,e.default.document.removeEventListener("mousemove",this._onMouseMove,!1),e.default.document.removeEventListener("keydown",this._onKeyDown,!1),e.default.document.removeEventListener("mouseup",this._onMouseUp,!1),this._container.classList.remove("mapboxgl-crosshair"),this._box&&(s.remove(this._box),this._box=null),s.enableDrag()},qn.prototype._fireEvent=function(t,n){return this._map.fire(new e.Event(t,{originalEvent:n}))};var Yn=e.bezier(0,0,.25,1),Xn=function(t,n){this._map=t,this._el=n.element||t.getCanvasContainer(),this._state="disabled",this._button=n.button||"right",this._bearingSnap=n.bearingSnap||0,this._pitchWithRotate=!1!==n.pitchWithRotate,e.bindAll(["_onMouseMove","_onMouseUp","_onBlur","_onDragFrame"],this)};Xn.prototype.isEnabled=function(){return"disabled"!==this._state},Xn.prototype.isActive=function(){return"active"===this._state},Xn.prototype.enable=function(){this.isEnabled()||(this._state="enabled")},Xn.prototype.disable=function(){if(this.isEnabled())switch(this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend"),this._pitchWithRotate&&this._fireEvent("pitchend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled"}},Xn.prototype.onMouseDown=function(t){if("enabled"===this._state){if("right"===this._button){if(this._eventButton=s.mouseButton(t),this._eventButton!==(t.ctrlKey?0:2))return}else{if(t.ctrlKey||0!==s.mouseButton(t))return;this._eventButton=0}s.disableDrag(),e.default.document.addEventListener("mousemove",this._onMouseMove,{capture:!0}),e.default.document.addEventListener("mouseup",this._onMouseUp),e.default.addEventListener("blur",this._onBlur),this._state="pending",this._inertia=[[i.now(),this._map.getBearing()]],this._previousPos=s.mousePos(this._el,t),this._center=this._map.transform.centerPoint,t.preventDefault()}},Xn.prototype._onMouseMove=function(e){this._lastMoveEvent=e,this._pos=s.mousePos(this._el,e),"pending"===this._state&&(this._state="active",this._fireEvent("rotatestart",e),this._fireEvent("movestart",e),this._pitchWithRotate&&this._fireEvent("pitchstart",e)),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame))},Xn.prototype._onDragFrame=function(){this._frameId=null;var e=this._lastMoveEvent;if(e){var t=this._map.transform,n=this._previousPos,r=this._pos,a=.8*(n.x-r.x),o=-.5*(n.y-r.y),s=t.bearing-a,l=t.pitch-o,u=this._inertia,c=u[u.length-1];this._drainInertiaBuffer(),u.push([i.now(),this._map._normalizeBearing(s,c[1])]),t.bearing=s,this._pitchWithRotate&&(this._fireEvent("pitch",e),t.pitch=l),this._fireEvent("rotate",e),this._fireEvent("move",e),delete this._lastMoveEvent,this._previousPos=this._pos}},Xn.prototype._onMouseUp=function(e){if(s.mouseButton(e)===this._eventButton)switch(this._state){case"active":this._state="enabled",s.suppressClick(),this._unbind(),this._deactivate(),this._inertialRotate(e);break;case"pending":this._state="enabled",this._unbind()}},Xn.prototype._onBlur=function(e){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend",e),this._pitchWithRotate&&this._fireEvent("pitchend",e),this._fireEvent("moveend",e);break;case"pending":this._state="enabled",this._unbind()}},Xn.prototype._unbind=function(){e.default.document.removeEventListener("mousemove",this._onMouseMove,{capture:!0}),e.default.document.removeEventListener("mouseup",this._onMouseUp),e.default.removeEventListener("blur",this._onBlur),s.enableDrag()},Xn.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._previousPos},Xn.prototype._inertialRotate=function(e){var t=this;this._fireEvent("rotateend",e),this._drainInertiaBuffer();var n=this._map,r=n.getBearing(),a=this._inertia,i=function(){Math.abs(r)<t._bearingSnap?n.resetNorth({noMoveStart:!0},{originalEvent:e}):t._fireEvent("moveend",e),t._pitchWithRotate&&t._fireEvent("pitchend",e)};if(a.length<2)i();else{var o=a[0],s=a[a.length-1],l=a[a.length-2],u=n._normalizeBearing(r,l[1]),c=s[1]-o[1],f=c<0?-1:1,d=(s[0]-o[0])/1e3;if(0!==c&&0!==d){var p=Math.abs(c*(.25/d));p>180&&(p=180);var h=p/180;u+=f*p*(h/2),Math.abs(n._normalizeBearing(u,0))<this._bearingSnap&&(u=n._normalizeBearing(0,u)),n.rotateTo(u,{duration:1e3*h,easing:Yn,noMoveStart:!0},{originalEvent:e})}else i()}},Xn.prototype._fireEvent=function(t,n){return this._map.fire(new e.Event(t,n?{originalEvent:n}:{}))},Xn.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,t=i.now();e.length>0&&t-e[0][0]>160;)e.shift()};var Zn=e.bezier(0,0,.3,1),$n=function(t){this._map=t,this._el=t.getCanvasContainer(),this._state="disabled",e.bindAll(["_onMove","_onMouseUp","_onTouchEnd","_onBlur","_onDragFrame"],this)};$n.prototype.isEnabled=function(){return"disabled"!==this._state},$n.prototype.isActive=function(){return"active"===this._state},$n.prototype.enable=function(){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-drag-pan"),this._state="enabled")},$n.prototype.disable=function(){if(this.isEnabled())switch(this._el.classList.remove("mapboxgl-touch-drag-pan"),this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("dragend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled"}},$n.prototype.onMouseDown=function(t){"enabled"===this._state&&(t.ctrlKey||0!==s.mouseButton(t)||(s.addEventListener(e.default.document,"mousemove",this._onMove,{capture:!0}),s.addEventListener(e.default.document,"mouseup",this._onMouseUp),this._start(t)))},$n.prototype.onTouchStart=function(t){"enabled"===this._state&&(t.touches.length>1||(s.addEventListener(e.default.document,"touchmove",this._onMove,{capture:!0,passive:!1}),s.addEventListener(e.default.document,"touchend",this._onTouchEnd),this._start(t)))},$n.prototype._start=function(t){e.default.addEventListener("blur",this._onBlur),this._state="pending",this._previousPos=s.mousePos(this._el,t),this._inertia=[[i.now(),this._previousPos]]},$n.prototype._onMove=function(e){this._lastMoveEvent=e,e.preventDefault(),this._pos=s.mousePos(this._el,e),this._drainInertiaBuffer(),this._inertia.push([i.now(),this._pos]),"pending"===this._state&&(this._state="active",this._fireEvent("dragstart",e),this._fireEvent("movestart",e)),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame))},$n.prototype._onDragFrame=function(){this._frameId=null;var e=this._lastMoveEvent;if(e){var t=this._map.transform;t.setLocationAtPoint(t.pointLocation(this._previousPos),this._pos),this._fireEvent("drag",e),this._fireEvent("move",e),this._previousPos=this._pos,delete this._lastMoveEvent}},$n.prototype._onMouseUp=function(e){if(0===s.mouseButton(e))switch(this._state){case"active":this._state="enabled",s.suppressClick(),this._unbind(),this._deactivate(),this._inertialPan(e);break;case"pending":this._state="enabled",this._unbind()}},$n.prototype._onTouchEnd=function(e){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._inertialPan(e);break;case"pending":this._state="enabled",this._unbind()}},$n.prototype._onBlur=function(e){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._fireEvent("dragend",e),this._fireEvent("moveend",e);break;case"pending":this._state="enabled",this._unbind()}},$n.prototype._unbind=function(){s.removeEventListener(e.default.document,"touchmove",this._onMove,{capture:!0,passive:!1}),s.removeEventListener(e.default.document,"touchend",this._onTouchEnd),s.removeEventListener(e.default.document,"mousemove",this._onMove,{capture:!0}),s.removeEventListener(e.default.document,"mouseup",this._onMouseUp),s.removeEventListener(e.default,"blur",this._onBlur)},$n.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._previousPos,delete this._pos},$n.prototype._inertialPan=function(e){this._fireEvent("dragend",e),this._drainInertiaBuffer();var t=this._inertia;if(t.length<2)this._fireEvent("moveend",e);else{var n=t[t.length-1],r=t[0],a=n[1].sub(r[1]),i=(n[0]-r[0])/1e3;if(0===i||n[1].equals(r[1]))this._fireEvent("moveend",e);else{var o=a.mult(.3/i),s=o.mag();s>1400&&(s=1400,o._unit()._mult(s));var l=s/750,u=o.mult(-l/2);this._map.panBy(u,{duration:1e3*l,easing:Zn,noMoveStart:!0},{originalEvent:e})}}},$n.prototype._fireEvent=function(t,n){return this._map.fire(new e.Event(t,n?{originalEvent:n}:{}))},$n.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,t=i.now();e.length>0&&t-e[0][0]>160;)e.shift()};var Kn=function(t){this._map=t,this._el=t.getCanvasContainer(),e.bindAll(["_onKeyDown"],this)};function Jn(e){return e*(2-e)}Kn.prototype.isEnabled=function(){return!!this._enabled},Kn.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("keydown",this._onKeyDown,!1),this._enabled=!0)},Kn.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("keydown",this._onKeyDown),this._enabled=!1)},Kn.prototype._onKeyDown=function(e){if(!(e.altKey||e.ctrlKey||e.metaKey)){var t=0,n=0,r=0,a=0,i=0;switch(e.keyCode){case 61:case 107:case 171:case 187:t=1;break;case 189:case 109:case 173:t=-1;break;case 37:e.shiftKey?n=-1:(e.preventDefault(),a=-1);break;case 39:e.shiftKey?n=1:(e.preventDefault(),a=1);break;case 38:e.shiftKey?r=1:(e.preventDefault(),i=-1);break;case 40:e.shiftKey?r=-1:(i=1,e.preventDefault());break;default:return}var o=this._map,s=o.getZoom(),l={duration:300,delayEndEvents:500,easing:Jn,zoom:t?Math.round(s)+t*(e.shiftKey?2:1):s,bearing:o.getBearing()+15*n,pitch:o.getPitch()+10*r,offset:[100*-a,100*-i],center:o.getCenter()};o.easeTo(l,{originalEvent:e})}};var Qn=function(t){this._map=t,e.bindAll(["_onDblClick","_onZoomEnd"],this)};Qn.prototype.isEnabled=function(){return!!this._enabled},Qn.prototype.isActive=function(){return!!this._active},Qn.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Qn.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Qn.prototype.onTouchStart=function(e){var t=this;this.isEnabled()&&(e.points.length>1||(this._tapped?(clearTimeout(this._tapped),this._tapped=null,this._zoom(e)):this._tapped=setTimeout(function(){t._tapped=null},300)))},Qn.prototype.onDblClick=function(e){this.isEnabled()&&(e.originalEvent.preventDefault(),this._zoom(e))},Qn.prototype._zoom=function(e){this._active=!0,this._map.on("zoomend",this._onZoomEnd),this._map.zoomTo(this._map.getZoom()+(e.originalEvent.shiftKey?-1:1),{around:e.lngLat},e)},Qn.prototype._onZoomEnd=function(){this._active=!1,this._map.off("zoomend",this._onZoomEnd)};var er=e.bezier(0,0,.15,1),tr=function(t){this._map=t,this._el=t.getCanvasContainer(),e.bindAll(["_onMove","_onEnd","_onTouchFrame"],this)};tr.prototype.isEnabled=function(){return!!this._enabled},tr.prototype.enable=function(e){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-zoom-rotate"),this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around)},tr.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove("mapboxgl-touch-zoom-rotate"),this._enabled=!1)},tr.prototype.disableRotation=function(){this._rotationDisabled=!0},tr.prototype.enableRotation=function(){this._rotationDisabled=!1},tr.prototype.onStart=function(t){if(this.isEnabled()&&2===t.touches.length){var n=s.mousePos(this._el,t.touches[0]),r=s.mousePos(this._el,t.touches[1]);this._startVec=n.sub(r),this._gestureIntent=void 0,this._inertia=[],s.addEventListener(e.default.document,"touchmove",this._onMove,{passive:!1}),s.addEventListener(e.default.document,"touchend",this._onEnd)}},tr.prototype._getTouchEventData=function(e){var t=s.mousePos(this._el,e.touches[0]),n=s.mousePos(this._el,e.touches[1]),r=t.sub(n);return{vec:r,center:t.add(n).div(2),scale:r.mag()/this._startVec.mag(),bearing:this._rotationDisabled?0:180*r.angleWith(this._startVec)/Math.PI}},tr.prototype._onMove=function(t){if(2===t.touches.length){var n=this._getTouchEventData(t),r=n.vec,a=n.scale,i=n.bearing;if(!this._gestureIntent){var o=Math.abs(1-a)>.15;Math.abs(i)>10?this._gestureIntent="rotate":o&&(this._gestureIntent="zoom"),this._gestureIntent&&(this._map.fire(new e.Event(this._gestureIntent+"start",{originalEvent:t})),this._map.fire(new e.Event("movestart",{originalEvent:t})),this._startVec=r)}this._lastTouchEvent=t,this._frameId||(this._frameId=this._map._requestRenderFrame(this._onTouchFrame)),t.preventDefault()}},tr.prototype._onTouchFrame=function(){this._frameId=null;var t=this._gestureIntent;if(t){var n=this._map.transform;this._startScale||(this._startScale=n.scale,this._startBearing=n.bearing);var r=this._getTouchEventData(this._lastTouchEvent),a=r.center,o=r.bearing,s=r.scale,l=n.pointLocation(a),u=n.locationPoint(l);"rotate"===t&&(n.bearing=this._startBearing+o),n.zoom=n.scaleZoom(this._startScale*s),n.setLocationAtPoint(l,u),this._map.fire(new e.Event(t,{originalEvent:this._lastTouchEvent})),this._map.fire(new e.Event("move",{originalEvent:this._lastTouchEvent})),this._drainInertiaBuffer(),this._inertia.push([i.now(),s,a])}},tr.prototype._onEnd=function(t){s.removeEventListener(e.default.document,"touchmove",this._onMove,{passive:!1}),s.removeEventListener(e.default.document,"touchend",this._onEnd);var n=this._gestureIntent,r=this._startScale;if(this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._gestureIntent,delete this._startScale,delete this._startBearing,delete this._lastTouchEvent,n){this._map.fire(new e.Event(n+"end",{originalEvent:t})),this._drainInertiaBuffer();var a=this._inertia,i=this._map;if(a.length<2)i.snapToNorth({},{originalEvent:t});else{var o=a[a.length-1],l=a[0],u=i.transform.scaleZoom(r*o[1]),c=i.transform.scaleZoom(r*l[1]),f=u-c,d=(o[0]-l[0])/1e3,p=o[2];if(0!==d&&u!==c){var h=.15*f/d;Math.abs(h)>2.5&&(h=h>0?2.5:-2.5);var m=1e3*Math.abs(h/(12*.15)),v=u+h*m/2e3;v<0&&(v=0),i.easeTo({zoom:v,duration:m,easing:er,around:this._aroundCenter?i.getCenter():i.unproject(p),noMoveStart:!0},{originalEvent:t})}else i.snapToNorth({},{originalEvent:t})}}},tr.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,t=i.now();e.length>2&&t-e[0][0]>160;)e.shift()};var nr={scrollZoom:Wn,boxZoom:qn,dragRotate:Xn,dragPan:$n,keyboard:Kn,doubleClickZoom:Qn,touchZoomRotate:tr},rr=function(t){function n(n,r){t.call(this),this._moving=!1,this._zooming=!1,this.transform=n,this._bearingSnap=r.bearingSnap,e.bindAll(["_renderFrameCallback"],this)}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.getCenter=function(){return this.transform.center},n.prototype.setCenter=function(e,t){return this.jumpTo({center:e},t)},n.prototype.panBy=function(t,n,r){return t=e.default$1.convert(t).mult(-1),this.panTo(this.transform.center,e.extend({offset:t},n),r)},n.prototype.panTo=function(t,n,r){return this.easeTo(e.extend({center:t},n),r)},n.prototype.getZoom=function(){return this.transform.zoom},n.prototype.setZoom=function(e,t){return this.jumpTo({zoom:e},t),this},n.prototype.zoomTo=function(t,n,r){return this.easeTo(e.extend({zoom:t},n),r)},n.prototype.zoomIn=function(e,t){return this.zoomTo(this.getZoom()+1,e,t),this},n.prototype.zoomOut=function(e,t){return this.zoomTo(this.getZoom()-1,e,t),this},n.prototype.getBearing=function(){return this.transform.bearing},n.prototype.setBearing=function(e,t){return this.jumpTo({bearing:e},t),this},n.prototype.rotateTo=function(t,n,r){return this.easeTo(e.extend({bearing:t},n),r)},n.prototype.resetNorth=function(t,n){return this.rotateTo(0,e.extend({duration:1e3},t),n),this},n.prototype.snapToNorth=function(e,t){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,t):this},n.prototype.getPitch=function(){return this.transform.pitch},n.prototype.setPitch=function(e,t){return this.jumpTo({pitch:e},t),this},n.prototype.fitBounds=function(t,n,r){if("number"==typeof(n=e.extend({padding:{top:0,bottom:0,right:0,left:0},offset:[0,0],maxZoom:this.transform.maxZoom},n)).padding){var a=n.padding;n.padding={top:a,bottom:a,right:a,left:a}}if(!e.default$10(Object.keys(n.padding).sort(function(e,t){return e<t?-1:e>t?1:0}),["bottom","left","right","top"]))return e.warnOnce("options.padding must be a positive number, or an Object with keys 'bottom', 'left', 'right', 'top'"),this;t=q.convert(t);var i=[(n.padding.left-n.padding.right)/2,(n.padding.top-n.padding.bottom)/2],o=Math.min(n.padding.right,n.padding.left),s=Math.min(n.padding.top,n.padding.bottom);n.offset=[n.offset[0]+i[0],n.offset[1]+i[1]];var l=e.default$1.convert(n.offset),u=this.transform,c=u.project(t.getNorthWest()),f=u.project(t.getSouthEast()),d=f.sub(c),p=(u.width-2*o-2*Math.abs(l.x))/d.x,h=(u.height-2*s-2*Math.abs(l.y))/d.y;return h<0||p<0?(e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset."),this):(n.center=u.unproject(c.add(f).div(2)),n.zoom=Math.min(u.scaleZoom(u.scale*Math.min(p,h)),n.maxZoom),n.bearing=0,n.linear?this.easeTo(n,r):this.flyTo(n,r))},n.prototype.jumpTo=function(t,n){this.stop();var r=this.transform,a=!1,i=!1,o=!1;return"zoom"in t&&r.zoom!==+t.zoom&&(a=!0,r.zoom=+t.zoom),void 0!==t.center&&(r.center=W.convert(t.center)),"bearing"in t&&r.bearing!==+t.bearing&&(i=!0,r.bearing=+t.bearing),"pitch"in t&&r.pitch!==+t.pitch&&(o=!0,r.pitch=+t.pitch),this.fire(new e.Event("movestart",n)).fire(new e.Event("move",n)),a&&this.fire(new e.Event("zoomstart",n)).fire(new e.Event("zoom",n)).fire(new e.Event("zoomend",n)),i&&this.fire(new e.Event("rotatestart",n)).fire(new e.Event("rotate",n)).fire(new e.Event("rotateend",n)),o&&this.fire(new e.Event("pitchstart",n)).fire(new e.Event("pitch",n)).fire(new e.Event("pitchend",n)),this.fire(new e.Event("moveend",n))},n.prototype.easeTo=function(t,n){var r=this;this.stop(),!1===(t=e.extend({offset:[0,0],duration:500,easing:e.ease},t)).animate&&(t.duration=0);var a=this.transform,i=this.getZoom(),o=this.getBearing(),s=this.getPitch(),l="zoom"in t?+t.zoom:i,u="bearing"in t?this._normalizeBearing(t.bearing,o):o,c="pitch"in t?+t.pitch:s,f=a.centerPoint.add(e.default$1.convert(t.offset)),d=a.pointLocation(f),p=W.convert(t.center||d);this._normalizeCenter(p);var h,m,v=a.project(d),g=a.project(p).sub(v),y=a.zoomScale(l-i);return t.around&&(h=W.convert(t.around),m=a.locationPoint(h)),this._zooming=l!==i,this._rotating=o!==u,this._pitching=c!==s,this._prepareEase(n,t.noMoveStart),clearTimeout(this._easeEndTimeoutID),this._ease(function(t){if(r._zooming&&(a.zoom=e.number(i,l,t)),r._rotating&&(a.bearing=e.number(o,u,t)),r._pitching&&(a.pitch=e.number(s,c,t)),h)a.setLocationAtPoint(h,m);else{var d=a.zoomScale(a.zoom-i),p=l>i?Math.min(2,y):Math.max(.5,y),b=Math.pow(p,1-t),x=a.unproject(v.add(g.mult(t*b)).mult(d));a.setLocationAtPoint(a.renderWorldCopies?x.wrap():x,f)}r._fireMoveEvents(n)},function(){t.delayEndEvents?r._easeEndTimeoutID=setTimeout(function(){return r._afterEase(n)},t.delayEndEvents):r._afterEase(n)},t),this},n.prototype._prepareEase=function(t,n){this._moving=!0,n||this.fire(new e.Event("movestart",t)),this._zooming&&this.fire(new e.Event("zoomstart",t)),this._rotating&&this.fire(new e.Event("rotatestart",t)),this._pitching&&this.fire(new e.Event("pitchstart",t))},n.prototype._fireMoveEvents=function(t){this.fire(new e.Event("move",t)),this._zooming&&this.fire(new e.Event("zoom",t)),this._rotating&&this.fire(new e.Event("rotate",t)),this._pitching&&this.fire(new e.Event("pitch",t))},n.prototype._afterEase=function(t){var n=this._zooming,r=this._rotating,a=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,n&&this.fire(new e.Event("zoomend",t)),r&&this.fire(new e.Event("rotateend",t)),a&&this.fire(new e.Event("pitchend",t)),this.fire(new e.Event("moveend",t))},n.prototype.flyTo=function(t,n){var r=this;this.stop(),t=e.extend({offset:[0,0],speed:1.2,curve:1.42,easing:e.ease},t);var a=this.transform,i=this.getZoom(),o=this.getBearing(),s=this.getPitch(),l="zoom"in t?e.clamp(+t.zoom,a.minZoom,a.maxZoom):i,u="bearing"in t?this._normalizeBearing(t.bearing,o):o,c="pitch"in t?+t.pitch:s,f=a.zoomScale(l-i),d=a.centerPoint.add(e.default$1.convert(t.offset)),p=a.pointLocation(d),h=W.convert(t.center||p);this._normalizeCenter(h);var m=a.project(p),v=a.project(h).sub(m),g=t.curve,y=Math.max(a.width,a.height),b=y/f,x=v.mag();if("minZoom"in t){var _=e.clamp(Math.min(t.minZoom,i,l),a.minZoom,a.maxZoom),w=y/a.zoomScale(_-i);g=Math.sqrt(w/x*2)}var T=g*g;function k(e){var t=(b*b-y*y+(e?-1:1)*T*T*x*x)/(2*(e?b:y)*T*x);return Math.log(Math.sqrt(t*t+1)-t)}function C(e){return(Math.exp(e)-Math.exp(-e))/2}function E(e){return(Math.exp(e)+Math.exp(-e))/2}var M=k(0),A=function(e){return E(M)/E(M+g*e)},S=function(e){return y*((E(M)*(C(t=M+g*e)/E(t))-C(M))/T)/x;var t},O=(k(1)-M)/g;if(Math.abs(x)<1e-6||!isFinite(O)){if(Math.abs(y-b)<1e-6)return this.easeTo(t,n);var P=b<y?-1:1;O=Math.abs(Math.log(b/y))/g,S=function(){return 0},A=function(e){return Math.exp(P*g*e)}}if("duration"in t)t.duration=+t.duration;else{var R="screenSpeed"in t?+t.screenSpeed/g:+t.speed;t.duration=1e3*O/R}return t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0),this._zooming=!0,this._rotating=o!==u,this._pitching=c!==s,this._prepareEase(n,!1),this._ease(function(t){var l=t*O,f=1/A(l);a.zoom=i+a.scaleZoom(f),r._rotating&&(a.bearing=e.number(o,u,t)),r._pitching&&(a.pitch=e.number(s,c,t));var p=a.unproject(m.add(v.mult(S(l))).mult(f));a.setLocationAtPoint(a.renderWorldCopies?p.wrap():p,d),r._fireMoveEvents(n)},function(){return r._afterEase(n)},t),this},n.prototype.isEasing=function(){return!!this._easeFrameId},n.prototype.stop=function(){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var e=this._onEaseEnd;delete this._onEaseEnd,e.call(this)}return this},n.prototype._ease=function(e,t,n){!1===n.animate||0===n.duration?(e(1),t()):(this._easeStart=i.now(),this._easeOptions=n,this._onEaseFrame=e,this._onEaseEnd=t,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},n.prototype._renderFrameCallback=function(){var e=Math.min((i.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(e)),e<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},n.prototype._normalizeBearing=function(t,n){t=e.wrap(t,-180,180);var r=Math.abs(t-n);return Math.abs(t-360-n)<r&&(t-=360),Math.abs(t+360-n)<r&&(t+=360),t},n.prototype._normalizeCenter=function(e){var t=this.transform;if(t.renderWorldCopies&&!t.lngRange){var n=e.lng-t.center.lng;e.lng+=n>180?-360:n<-180?360:0}},n}(e.Evented),ar=function(t){void 0===t&&(t={}),this.options=t,e.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};ar.prototype.getDefaultPosition=function(){return"bottom-right"},ar.prototype.onAdd=function(e){var t=this.options&&this.options.compact;return this._map=e,this._container=s.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),t&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===t&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},ar.prototype.onRemove=function(){s.remove(this._container),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0},ar.prototype._updateEditLink=function(){var e=this._editLink;e||(e=this._editLink=this._container.querySelector(".mapbox-improve-map"));var t=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:v.ACCESS_TOKEN}];if(e){var n=t.reduce(function(e,n,r){return n.value&&(e+=n.key+"="+n.value+(r<t.length-1?"&":"")),e},"?");e.href="https://www.mapbox.com/feedback/"+n+(this._map._hash?this._map._hash.getHashString(!0):"")}},ar.prototype._updateData=function(e){e&&"metadata"===e.sourceDataType&&(this._updateAttributions(),this._updateEditLink())},ar.prototype._updateAttributions=function(){if(this._map.style){var e=[];if(this._map.style.stylesheet){var t=this._map.style.stylesheet;this.styleOwner=t.owner,this.styleId=t.id}var n=this._map.style.sourceCaches;for(var r in n){var a=n[r].getSource();a.attribution&&e.indexOf(a.attribution)<0&&e.push(a.attribution)}e.sort(function(e,t){return e.length-t.length}),(e=e.filter(function(t,n){for(var r=n+1;r<e.length;r++)if(e[r].indexOf(t)>=0)return!1;return!0})).length?(this._container.innerHTML=e.join(" | "),this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null}},ar.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var ir=function(){e.bindAll(["_updateLogo"],this)};ir.prototype.onAdd=function(e){this._map=e,this._container=s.create("div","mapboxgl-ctrl");var t=s.create("a","mapboxgl-ctrl-logo");return t.target="_blank",t.href="https://www.mapbox.com/",t.setAttribute("aria-label","Mapbox logo"),this._container.appendChild(t),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._container},ir.prototype.onRemove=function(){s.remove(this._container),this._map.off("sourcedata",this._updateLogo)},ir.prototype.getDefaultPosition=function(){return"bottom-left"},ir.prototype._updateLogo=function(e){e&&"metadata"!==e.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},ir.prototype._logoRequired=function(){if(this._map.style){var e=this._map.style.sourceCaches;for(var t in e)if(e[t].getSource().mapbox_logo)return!0;return!1}};var or=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};or.prototype.add=function(e){var t=++this._id;return this._queue.push({callback:e,id:t,cancelled:!1}),t},or.prototype.remove=function(e){for(var t=this._currentlyRunning,n=0,r=t?this._queue.concat(t):this._queue;n<r.length;n+=1){var a=r[n];if(a.id===e)return void(a.cancelled=!0)}},or.prototype.run=function(){var e=this._currentlyRunning=this._queue;this._queue=[];for(var t=0,n=e;t<n.length;t+=1){var r=n[t];if(!r.cancelled&&(r.callback(),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},or.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var sr=e.default.HTMLImageElement,lr=e.default.HTMLElement,ur={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:0,maxZoom:22,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,bearingSnap:7,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,transformRequest:null,fadeDuration:300},cr=function(n){function r(t){if(null!=(t=e.extend({},ur,t)).minZoom&&null!=t.maxZoom&&t.minZoom>t.maxZoom)throw new Error("maxZoom must be greater than minZoom");var r=new Fn(t.minZoom,t.maxZoom,t.renderWorldCopies);n.call(this,r,t),this._interactive=t.interactive,this._maxTileCacheSize=t.maxTileCacheSize,this._failIfMajorPerformanceCaveat=t.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=t.preserveDrawingBuffer,this._trackResize=t.trackResize,this._bearingSnap=t.bearingSnap,this._refreshExpiredTiles=t.refreshExpiredTiles,this._fadeDuration=t.fadeDuration,this._crossFadingFactor=1,this._collectResourceTiming=t.collectResourceTiming,this._renderTaskQueue=new or;var a=t.transformRequest;if(this._transformRequest=a?function(e,t){return a(e,t)||{url:e}}:function(e){return{url:e}},"string"==typeof t.container){var i=e.default.document.getElementById(t.container);if(!i)throw new Error("Container '"+t.container+"' not found.");this._container=i}else{if(!(t.container instanceof lr))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=t.container}t.maxBounds&&this.setMaxBounds(t.maxBounds),e.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored","_update","_render","_onData","_onDataLoading"],this),this._setupContainer(),this._setupPainter(),this.on("move",this._update.bind(this,!1)),this.on("zoom",this._update.bind(this,!0)),void 0!==e.default&&(e.default.addEventListener("online",this._onWindowOnline,!1),e.default.addEventListener("resize",this._onWindowResize,!1)),function(e,t){var n=e.getCanvasContainer(),r=null,a=!1;for(var i in nr)e[i]=new nr[i](e,t),t.interactive&&t[i]&&e[i].enable(t[i]);s.addEventListener(n,"mouseout",function(t){e.fire(new Un("mouseout",e,t))}),s.addEventListener(n,"mousedown",function(n){a=!0;var r=new Un("mousedown",e,n);e.fire(r),r.defaultPrevented||(t.interactive&&!e.doubleClickZoom.isActive()&&e.stop(),e.boxZoom.onMouseDown(n),e.boxZoom.isActive()||e.dragPan.isActive()||e.dragRotate.onMouseDown(n),e.boxZoom.isActive()||e.dragRotate.isActive()||e.dragPan.onMouseDown(n))}),s.addEventListener(n,"mouseup",function(t){var n=e.dragRotate.isActive();r&&!n&&e.fire(new Un("contextmenu",e,r)),r=null,a=!1,e.fire(new Un("mouseup",e,t))}),s.addEventListener(n,"mousemove",function(t){if(!e.dragPan.isActive()&&!e.dragRotate.isActive()){for(var r=t.toElement||t.target;r&&r!==n;)r=r.parentNode;r===n&&e.fire(new Un("mousemove",e,t))}}),s.addEventListener(n,"mouseover",function(t){for(var r=t.toElement||t.target;r&&r!==n;)r=r.parentNode;r===n&&e.fire(new Un("mouseover",e,t))}),s.addEventListener(n,"touchstart",function(n){var r=new Gn("touchstart",e,n);e.fire(r),r.defaultPrevented||(t.interactive&&e.stop(),e.boxZoom.isActive()||e.dragRotate.isActive()||e.dragPan.onTouchStart(n),e.touchZoomRotate.onStart(n),e.doubleClickZoom.onTouchStart(r))},{passive:!1}),s.addEventListener(n,"touchmove",function(t){e.fire(new Gn("touchmove",e,t))},{passive:!1}),s.addEventListener(n,"touchend",function(t){e.fire(new Gn("touchend",e,t))}),s.addEventListener(n,"touchcancel",function(t){e.fire(new Gn("touchcancel",e,t))}),s.addEventListener(n,"click",function(t){e.fire(new Un("click",e,t))}),s.addEventListener(n,"dblclick",function(t){var n=new Un("dblclick",e,t);e.fire(n),n.defaultPrevented||e.doubleClickZoom.onDblClick(n)}),s.addEventListener(n,"contextmenu",function(t){var n=e.dragRotate.isActive();a||n?a&&(r=t):e.fire(new Un("contextmenu",e,t)),t.preventDefault()}),s.addEventListener(n,"wheel",function(t){var n=new Hn("wheel",e,t);e.fire(n),n.defaultPrevented||e.scrollZoom.onWheel(t)},{passive:!1})}(this,t),this._hash=t.hash&&(new Vn).addTo(this),this._hash&&this._hash._onHashChange()||this.jumpTo({center:t.center,zoom:t.zoom,bearing:t.bearing,pitch:t.pitch}),this.resize(),t.style&&this.setStyle(t.style,{localIdeographFontFamily:t.localIdeographFontFamily}),t.attributionControl&&this.addControl(new ar),this.addControl(new ir,t.logoPosition),this.on("style.load",function(){this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",this._onData),this.on("dataloading",this._onDataLoading)}n&&(r.__proto__=n),r.prototype=Object.create(n&&n.prototype),r.prototype.constructor=r;var a={showTileBoundaries:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0}};return r.prototype.addControl=function(e,t){void 0===t&&e.getDefaultPosition&&(t=e.getDefaultPosition()),void 0===t&&(t="top-right");var n=e.onAdd(this),r=this._controlPositions[t];return-1!==t.indexOf("bottom")?r.insertBefore(n,r.firstChild):r.appendChild(n),this},r.prototype.removeControl=function(e){return e.onRemove(this),this},r.prototype.resize=function(t){var n=this._containerDimensions(),r=n[0],a=n[1];return this._resizeCanvas(r,a),this.transform.resize(r,a),this.painter.resize(r,a),this.fire(new e.Event("movestart",t)).fire(new e.Event("move",t)).fire(new e.Event("resize",t)).fire(new e.Event("moveend",t))},r.prototype.getBounds=function(){var t=new q(this.transform.pointLocation(new e.default$1(0,this.transform.height)),this.transform.pointLocation(new e.default$1(this.transform.width,0)));return(this.transform.angle||this.transform.pitch)&&(t.extend(this.transform.pointLocation(new e.default$1(this.transform.size.x,0))),t.extend(this.transform.pointLocation(new e.default$1(0,this.transform.size.y)))),t},r.prototype.getMaxBounds=function(){return this.transform.latRange&&2===this.transform.latRange.length&&this.transform.lngRange&&2===this.transform.lngRange.length?new q([this.transform.lngRange[0],this.transform.latRange[0]],[this.transform.lngRange[1],this.transform.latRange[1]]):null},r.prototype.setMaxBounds=function(e){if(e){var t=q.convert(e);this.transform.lngRange=[t.getWest(),t.getEast()],this.transform.latRange=[t.getSouth(),t.getNorth()],this.transform._constrain(),this._update()}else null==e&&(this.transform.lngRange=null,this.transform.latRange=null,this._update());return this},r.prototype.setMinZoom=function(e){if((e=null==e?0:e)>=0&&e<=this.transform.maxZoom)return this.transform.minZoom=e,this._update(),this.getZoom()<e&&this.setZoom(e),this;throw new Error("minZoom must be between 0 and the current maxZoom, inclusive")},r.prototype.getMinZoom=function(){return this.transform.minZoom},r.prototype.setMaxZoom=function(e){if((e=null==e?22:e)>=this.transform.minZoom)return this.transform.maxZoom=e,this._update(),this.getZoom()>e&&this.setZoom(e),this;throw new Error("maxZoom must be greater than the current minZoom")},r.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},r.prototype.setRenderWorldCopies=function(e){return this.transform.renderWorldCopies=e,this._update(),this},r.prototype.getMaxZoom=function(){return this.transform.maxZoom},r.prototype.project=function(e){return this.transform.locationPoint(W.convert(e))},r.prototype.unproject=function(t){return this.transform.pointLocation(e.default$1.convert(t))},r.prototype.isMoving=function(){return this._moving||this.dragPan.isActive()||this.dragRotate.isActive()||this.scrollZoom.isActive()},r.prototype.isZooming=function(){return this._zooming||this.scrollZoom.isActive()},r.prototype.isRotating=function(){return this._rotating||this.dragRotate.isActive()},r.prototype.on=function(e,t,r){var a,i=this;if(void 0===r)return n.prototype.on.call(this,e,t);var o=function(){if("mouseenter"===e||"mouseover"===e){var n=!1;return{layer:t,listener:r,delegates:{mousemove:function(a){var o=i.getLayer(t)?i.queryRenderedFeatures(a.point,{layers:[t]}):[];o.length?n||(n=!0,r.call(i,new Un(e,i,a.originalEvent,{features:o}))):n=!1},mouseout:function(){n=!1}}}}if("mouseleave"===e||"mouseout"===e){var o=!1;return{layer:t,listener:r,delegates:{mousemove:function(n){(i.getLayer(t)?i.queryRenderedFeatures(n.point,{layers:[t]}):[]).length?o=!0:o&&(o=!1,r.call(i,new Un(e,i,n.originalEvent)))},mouseout:function(t){o&&(o=!1,r.call(i,new Un(e,i,t.originalEvent)))}}}}return{layer:t,listener:r,delegates:(a={},a[e]=function(e){var n=i.getLayer(t)?i.queryRenderedFeatures(e.point,{layers:[t]}):[];n.length&&(e.features=n,r.call(i,e),delete e.features)},a)}}();for(var s in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[e]=this._delegatedListeners[e]||[],this._delegatedListeners[e].push(o),o.delegates)i.on(s,o.delegates[s]);return this},r.prototype.off=function(e,t,r){if(void 0===r)return n.prototype.off.call(this,e,t);if(this._delegatedListeners&&this._delegatedListeners[e])for(var a=this._delegatedListeners[e],i=0;i<a.length;i++){var o=a[i];if(o.layer===t&&o.listener===r){for(var s in o.delegates)this.off(s,o.delegates[s]);return a.splice(i,1),this}}return this},r.prototype.queryRenderedFeatures=function(t,n){var r;return 2===arguments.length?(t=arguments[0],n=arguments[1]):1===arguments.length&&((r=arguments[0])instanceof e.default$1||Array.isArray(r))?(t=arguments[0],n={}):1===arguments.length?(t=void 0,n=arguments[0]):(t=void 0,n={}),this.style?this.style.queryRenderedFeatures(this._makeQueryGeometry(t),n,this.transform):[]},r.prototype._makeQueryGeometry=function(t){var n,r=this;if(void 0===t&&(t=[e.default$1.convert([0,0]),e.default$1.convert([this.transform.width,this.transform.height])]),t instanceof e.default$1||"number"==typeof t[0])n=[e.default$1.convert(t)];else{var a=[e.default$1.convert(t[0]),e.default$1.convert(t[1])];n=[a[0],new e.default$1(a[1].x,a[0].y),a[1],new e.default$1(a[0].x,a[1].y),a[0]]}return{viewport:n,worldCoordinate:n.map(function(e){return r.transform.pointCoordinate(e)})}},r.prototype.querySourceFeatures=function(e,t){return this.style.querySourceFeatures(e,t)},r.prototype.setStyle=function(t,n){if((!n||!1!==n.diff&&!n.localIdeographFontFamily)&&this.style&&t&&"object"==typeof t)try{return this.style.setState(t)&&this._update(!0),this}catch(t){e.warnOnce("Unable to perform style diff: "+(t.message||t.error||t)+".  Rebuilding the style from scratch.")}return this.style&&(this.style.setEventedParent(null),this.style._remove()),t?(this.style=new Kt(this,n||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof t?this.style.loadURL(t):this.style.loadJSON(t),this):(delete this.style,this)},r.prototype.getStyle=function(){if(this.style)return this.style.serialize()},r.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():e.warnOnce("There is no style added to the map.")},r.prototype.addSource=function(e,t){return this.style.addSource(e,t),this._update(!0),this},r.prototype.isSourceLoaded=function(t){var n=this.style&&this.style.sourceCaches[t];if(void 0!==n)return n.loaded();this.fire(new e.ErrorEvent(new Error("There is no source with ID '"+t+"'")))},r.prototype.areTilesLoaded=function(){var e=this.style&&this.style.sourceCaches;for(var t in e){var n=e[t]._tiles;for(var r in n){var a=n[r];if("loaded"!==a.state&&"errored"!==a.state)return!1}}return!0},r.prototype.addSourceType=function(e,t,n){return this.style.addSourceType(e,t,n)},r.prototype.removeSource=function(e){return this.style.removeSource(e),this._update(!0),this},r.prototype.getSource=function(e){return this.style.getSource(e)},r.prototype.addImage=function(t,n,r){void 0===r&&(r={});var a=r.pixelRatio;void 0===a&&(a=1);var o=r.sdf;if(void 0===o&&(o=!1),n instanceof sr){var s=i.getImageData(n),l=s.width,u=s.height,c=s.data;this.style.addImage(t,{data:new e.RGBAImage({width:l,height:u},c),pixelRatio:a,sdf:o})}else{if(void 0===n.width||void 0===n.height)return this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var f=n.width,d=n.height,p=n.data;this.style.addImage(t,{data:new e.RGBAImage({width:f,height:d},p.slice(0)),pixelRatio:a,sdf:o})}},r.prototype.hasImage=function(t){return t?!!this.style.getImage(t):(this.fire(new e.ErrorEvent(new Error("Missing required image id"))),!1)},r.prototype.removeImage=function(e){this.style.removeImage(e)},r.prototype.loadImage=function(t,n){e.getImage(this._transformRequest(t,e.ResourceType.Image),n)},r.prototype.addLayer=function(e,t){return this.style.addLayer(e,t),this._update(!0),this},r.prototype.moveLayer=function(e,t){return this.style.moveLayer(e,t),this._update(!0),this},r.prototype.removeLayer=function(e){return this.style.removeLayer(e),this._update(!0),this},r.prototype.getLayer=function(e){return this.style.getLayer(e)},r.prototype.setFilter=function(e,t){return this.style.setFilter(e,t),this._update(!0),this},r.prototype.setLayerZoomRange=function(e,t,n){return this.style.setLayerZoomRange(e,t,n),this._update(!0),this},r.prototype.getFilter=function(e){return this.style.getFilter(e)},r.prototype.setPaintProperty=function(e,t,n){return this.style.setPaintProperty(e,t,n),this._update(!0),this},r.prototype.getPaintProperty=function(e,t){return this.style.getPaintProperty(e,t)},r.prototype.setLayoutProperty=function(e,t,n){return this.style.setLayoutProperty(e,t,n),this._update(!0),this},r.prototype.getLayoutProperty=function(e,t){return this.style.getLayoutProperty(e,t)},r.prototype.setLight=function(e){return this.style.setLight(e),this._update(!0),this},r.prototype.getLight=function(){return this.style.getLight()},r.prototype.getContainer=function(){return this._container},r.prototype.getCanvasContainer=function(){return this._canvasContainer},r.prototype.getCanvas=function(){return this._canvas},r.prototype._containerDimensions=function(){var e=0,t=0;return this._container&&(e=this._container.offsetWidth||400,t=this._container.offsetHeight||300),[e,t]},r.prototype._setupContainer=function(){var e=this._container;e.classList.add("mapboxgl-map"),(this._missingCSSContainer=s.create("div","mapboxgl-missing-css",e)).innerHTML="Missing Mapbox GL JS CSS";var t=this._canvasContainer=s.create("div","mapboxgl-canvas-container",e);this._interactive&&t.classList.add("mapboxgl-interactive"),this._canvas=s.create("canvas","mapboxgl-canvas",t),this._canvas.style.position="absolute",this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var n=this._containerDimensions();this._resizeCanvas(n[0],n[1]);var r=this._controlContainer=s.create("div","mapboxgl-control-container",e),a=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(e){a[e]=s.create("div","mapboxgl-ctrl-"+e,r)})},r.prototype._resizeCanvas=function(t,n){var r=e.default.devicePixelRatio||1;this._canvas.width=r*t,this._canvas.height=r*n,this._canvas.style.width=t+"px",this._canvas.style.height=n+"px"},r.prototype._setupPainter=function(){var n=e.extend({failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer},t.webGLContextAttributes),r=this._canvas.getContext("webgl",n)||this._canvas.getContext("experimental-webgl",n);r?this.painter=new Rn(r,this.transform):this.fire(new e.ErrorEvent(new Error("Failed to initialize WebGL")))},r.prototype._contextLost=function(t){t.preventDefault(),this._frameId&&(i.cancelFrame(this._frameId),this._frameId=null),this.fire(new e.Event("webglcontextlost",{originalEvent:t}))},r.prototype._contextRestored=function(t){this._setupPainter(),this.resize(),this._update(),this.fire(new e.Event("webglcontextrestored",{originalEvent:t}))},r.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!(!this.style||!this.style.loaded())},r.prototype._update=function(e){this.style&&(this._styleDirty=this._styleDirty||e,this._sourcesDirty=!0,this._rerender())},r.prototype._requestRenderFrame=function(e){return this._update(),this._renderTaskQueue.add(e)},r.prototype._cancelRenderFrame=function(e){this._renderTaskQueue.remove(e)},r.prototype._render=function(){this._renderTaskQueue.run();var t=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var n=this.transform.zoom,r=i.now();this.style.zoomHistory.update(n,r);var a=new e.default$16(n,{now:r,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),o=a.crossFadingFactor();1===o&&o===this._crossFadingFactor||(t=!0,this._crossFadingFactor=o),this.style.update(a)}return this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),fadeDuration:this._fadeDuration}),this.fire(new e.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new e.Event("load"))),this.style&&(this.style.hasTransitions()||t)&&(this._styleDirty=!0),(this._sourcesDirty||this._repaint||this._styleDirty||this._placementDirty)&&this._rerender(),this},r.prototype.remove=function(){this._hash&&this._hash.remove(),i.cancelFrame(this._frameId),this._renderTaskQueue.clear(),this._frameId=null,this.setStyle(null),void 0!==e.default&&(e.default.removeEventListener("resize",this._onWindowResize,!1),e.default.removeEventListener("online",this._onWindowOnline,!1));var t=this.painter.context.gl.getExtension("WEBGL_lose_context");t&&t.loseContext(),fr(this._canvasContainer),fr(this._controlContainer),fr(this._missingCSSContainer),this._container.classList.remove("mapboxgl-map"),this.fire(new e.Event("remove"))},r.prototype._rerender=function(){var e=this;this.style&&!this._frameId&&(this._frameId=i.frame(function(){e._frameId=null,e._render()}))},r.prototype._onWindowOnline=function(){this._update()},r.prototype._onWindowResize=function(){this._trackResize&&this.stop().resize()._update()},a.showTileBoundaries.get=function(){return!!this._showTileBoundaries},a.showTileBoundaries.set=function(e){this._showTileBoundaries!==e&&(this._showTileBoundaries=e,this._update())},a.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},a.showCollisionBoxes.set=function(e){this._showCollisionBoxes!==e&&(this._showCollisionBoxes=e,e?this.style._generateCollisionBoxes():this._update())},a.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},a.showOverdrawInspector.set=function(e){this._showOverdrawInspector!==e&&(this._showOverdrawInspector=e,this._update())},a.repaint.get=function(){return!!this._repaint},a.repaint.set=function(e){this._repaint=e,this._update()},a.vertices.get=function(){return!!this._vertices},a.vertices.set=function(e){this._vertices=e,this._update()},r.prototype._onData=function(t){this._update("style"===t.dataType),this.fire(new e.Event(t.dataType+"data",t))},r.prototype._onDataLoading=function(t){this.fire(new e.Event(t.dataType+"dataloading",t))},Object.defineProperties(r.prototype,a),r}(rr);function fr(e){e.parentNode&&e.parentNode.removeChild(e)}var dr={showCompass:!0,showZoom:!0},pr=function(t){var n=this;this.options=e.extend({},dr,t),this._container=s.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(e){return e.preventDefault()}),this.options.showZoom&&(this._zoomInButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-in","Zoom In",function(){return n._map.zoomIn()}),this._zoomOutButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-out","Zoom Out",function(){return n._map.zoomOut()})),this.options.showCompass&&(e.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-compass","Reset North",function(){return n._map.resetNorth()}),this._compassArrow=s.create("span","mapboxgl-ctrl-compass-arrow",this._compass))};function hr(e,t,n){if(e=new W(e.lng,e.lat),t){var r=new W(e.lng-360,e.lat),a=new W(e.lng+360,e.lat),i=n.locationPoint(e).distSqr(t);n.locationPoint(r).distSqr(t)<i?e=r:n.locationPoint(a).distSqr(t)<i&&(e=a)}for(;Math.abs(e.lng-n.center.lng)>180;){var o=n.locationPoint(e);if(o.x>=0&&o.y>=0&&o.x<=n.width&&o.y<=n.height)break;e.lng>n.center.lng?e.lng-=360:e.lng+=360}return e}pr.prototype._rotateCompassArrow=function(){var e="rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassArrow.style.transform=e},pr.prototype.onAdd=function(e){return this._map=e,this.options.showCompass&&(this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Xn(e,{button:"left",element:this._compass}),this._handler.enable()),this._container},pr.prototype.onRemove=function(){s.remove(this._container),this.options.showCompass&&(this._map.off("rotate",this._rotateCompassArrow),this._handler.disable(),delete this._handler),delete this._map},pr.prototype._createButton=function(e,t,n){var r=s.create("button",e,this._container);return r.type="button",r.setAttribute("aria-label",t),r.addEventListener("click",n),r};var mr={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function vr(e,t,n){var r=e.classList;for(var a in mr)r.remove("mapboxgl-"+n+"-anchor-"+a);r.add("mapboxgl-"+n+"-anchor-"+t)}var gr=function(t){if((arguments[0]instanceof e.default.HTMLElement||2===arguments.length)&&(t=e.extend({element:t},arguments[1])),e.bindAll(["_update","_onMapClick"],this),this._anchor=t&&t.anchor||"center",this._color=t&&t.color||"#3FB1CE",t&&t.element)this._element=t.element,this._offset=e.default$1.convert(t&&t.offset||[0,0]);else{this._defaultMarker=!0,this._element=s.create("div");var n=s.createNS("http://www.w3.org/2000/svg","svg");n.setAttributeNS(null,"height","41px"),n.setAttributeNS(null,"width","27px"),n.setAttributeNS(null,"viewBox","0 0 27 41");var r=s.createNS("http://www.w3.org/2000/svg","g");r.setAttributeNS(null,"stroke","none"),r.setAttributeNS(null,"stroke-width","1"),r.setAttributeNS(null,"fill","none"),r.setAttributeNS(null,"fill-rule","evenodd");var a=s.createNS("http://www.w3.org/2000/svg","g");a.setAttributeNS(null,"fill-rule","nonzero");var i=s.createNS("http://www.w3.org/2000/svg","g");i.setAttributeNS(null,"transform","translate(3.0, 29.0)"),i.setAttributeNS(null,"fill","#000000");for(var o=0,l=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];o<l.length;o+=1){var u=l[o],c=s.createNS("http://www.w3.org/2000/svg","ellipse");c.setAttributeNS(null,"opacity","0.04"),c.setAttributeNS(null,"cx","10.5"),c.setAttributeNS(null,"cy","5.80029008"),c.setAttributeNS(null,"rx",u.rx),c.setAttributeNS(null,"ry",u.ry),i.appendChild(c)}var f=s.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"fill",this._color);var d=s.createNS("http://www.w3.org/2000/svg","path");d.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),f.appendChild(d);var p=s.createNS("http://www.w3.org/2000/svg","g");p.setAttributeNS(null,"opacity","0.25"),p.setAttributeNS(null,"fill","#000000");var h=s.createNS("http://www.w3.org/2000/svg","path");h.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),p.appendChild(h);var m=s.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"transform","translate(6.0, 7.0)"),m.setAttributeNS(null,"fill","#FFFFFF");var v=s.createNS("http://www.w3.org/2000/svg","g");v.setAttributeNS(null,"transform","translate(8.0, 8.0)");var g=s.createNS("http://www.w3.org/2000/svg","circle");g.setAttributeNS(null,"fill","#000000"),g.setAttributeNS(null,"opacity","0.25"),g.setAttributeNS(null,"cx","5.5"),g.setAttributeNS(null,"cy","5.5"),g.setAttributeNS(null,"r","5.4999962");var y=s.createNS("http://www.w3.org/2000/svg","circle");y.setAttributeNS(null,"fill","#FFFFFF"),y.setAttributeNS(null,"cx","5.5"),y.setAttributeNS(null,"cy","5.5"),y.setAttributeNS(null,"r","5.4999962"),v.appendChild(g),v.appendChild(y),a.appendChild(i),a.appendChild(f),a.appendChild(p),a.appendChild(m),a.appendChild(v),n.appendChild(a),this._element.appendChild(n),this._offset=e.default$1.convert(t&&t.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._popup=null};gr.prototype.addTo=function(e){return this.remove(),this._map=e,e.getCanvasContainer().appendChild(this._element),e.on("move",this._update),e.on("moveend",this._update),this._update(),this._map.on("click",this._onMapClick),this},gr.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),delete this._map),s.remove(this._element),this._popup&&this._popup.remove(),this},gr.prototype.getLngLat=function(){return this._lngLat},gr.prototype.setLngLat=function(e){return this._lngLat=W.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},gr.prototype.getElement=function(){return this._element},gr.prototype.setPopup=function(e){if(this._popup&&(this._popup.remove(),this._popup=null),e){if(!("offset"in e.options)){var t=Math.sqrt(Math.pow(13.5,2)/2);e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[t,-1*(24.6+t)],"bottom-right":[-t,-1*(24.6+t)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=e,this._lngLat&&this._popup.setLngLat(this._lngLat)}return this},gr.prototype._onMapClick=function(e){var t=e.originalEvent.target,n=this._element;this._popup&&(t===n||n.contains(t))&&this.togglePopup()},gr.prototype.getPopup=function(){return this._popup},gr.prototype.togglePopup=function(){var e=this._popup;return e?(e.isOpen()?e.remove():e.addTo(this._map),this):this},gr.prototype._update=function(e){this._map&&(this._map.transform.renderWorldCopies&&(this._lngLat=hr(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset),e&&"moveend"!==e.type||(this._pos=this._pos.round()),s.setTransform(this._element,mr[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px)"),vr(this._element,this._anchor,"marker"))},gr.prototype.getOffset=function(){return this._offset},gr.prototype.setOffset=function(t){return this._offset=e.default$1.convert(t),this._update(),this};var yr,br={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showUserLocation:!0},xr=function(t){function n(n){t.call(this),this.options=e.extend({},br,n),e.bindAll(["_onSuccess","_onError","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.onAdd=function(t){var n;return this._map=t,this._container=s.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),n=this._setupUI,void 0!==yr?n(yr):void 0!==e.default.navigator.permissions?e.default.navigator.permissions.query({name:"geolocation"}).then(function(e){yr="denied"!==e.state,n(yr)}):(yr=!!e.default.navigator.geolocation,n(yr)),this._container},n.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(e.default.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker.remove(),s.remove(this._container),this._map=void 0},n.prototype._onSuccess=function(t){if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(t),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("geolocate",t)),this._finish()},n.prototype._updateCamera=function(e){var t=new W(e.coords.longitude,e.coords.latitude),n=e.coords.accuracy;this._map.fitBounds(t.toBounds(n),this.options.fitBoundsOptions,{geolocateSource:!0})},n.prototype._updateMarker=function(e){e?this._userLocationDotMarker.setLngLat([e.coords.longitude,e.coords.latitude]).addTo(this._map):this._userLocationDotMarker.remove()},n.prototype._onError=function(t){if(this.options.trackUserLocation)if(1===t.code)this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),void 0!==this._geolocationWatchID&&this._clearWatch();else switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("error",t)),this._finish()},n.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},n.prototype._setupUI=function(t){var n=this;!1!==t&&(this._container.addEventListener("contextmenu",function(e){return e.preventDefault()}),this._geolocateButton=s.create("button","mapboxgl-ctrl-icon mapboxgl-ctrl-geolocate",this._container),this._geolocateButton.type="button",this._geolocateButton.setAttribute("aria-label","Geolocate"),this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=s.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new gr(this._dotElement),this.options.trackUserLocation&&(this._watchState="OFF")),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(t){t.geolocateSource||"ACTIVE_LOCK"!==n._watchState||(n._watchState="BACKGROUND",n._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),n._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),n.fire(new e.Event("trackuserlocationend")))}))},n.prototype.trigger=function(){if(!this._setup)return e.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new e.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}"OFF"===this._watchState&&void 0!==this._geolocationWatchID?this._clearWatch():void 0===this._geolocationWatchID&&(this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._geolocationWatchID=e.default.navigator.geolocation.watchPosition(this._onSuccess,this._onError,this.options.positionOptions))}else e.default.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},n.prototype._clearWatch=function(){e.default.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},n}(e.Evented),_r={maxWidth:100,unit:"metric"},wr=function(t){this.options=e.extend({},_r,t),e.bindAll(["_onMove","setUnit"],this)};function Tr(e,t,n){var r,a,i,o,s,l,u=n&&n.maxWidth||100,c=e._container.clientHeight/2,f=(r=e.unproject([0,c]),a=e.unproject([u,c]),i=Math.PI/180,o=r.lat*i,s=a.lat*i,l=Math.sin(o)*Math.sin(s)+Math.cos(o)*Math.cos(s)*Math.cos((a.lng-r.lng)*i),6371e3*Math.acos(Math.min(l,1)));if(n&&"imperial"===n.unit){var d=3.2808*f;d>5280?kr(t,u,d/5280,"mi"):kr(t,u,d,"ft")}else n&&"nautical"===n.unit?kr(t,u,f/1852,"nm"):kr(t,u,f,"m")}function kr(e,t,n,r){var a,i,o,s=(a=n,(i=Math.pow(10,(""+Math.floor(a)).length-1))*(o=(o=a/i)>=10?10:o>=5?5:o>=3?3:o>=2?2:1)),l=s/n;"m"===r&&s>=1e3&&(s/=1e3,r="km"),e.style.width=t*l+"px",e.innerHTML=s+r}wr.prototype.getDefaultPosition=function(){return"bottom-left"},wr.prototype._onMove=function(){Tr(this._map,this._container,this.options)},wr.prototype.onAdd=function(e){return this._map=e,this._container=s.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",e.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},wr.prototype.onRemove=function(){s.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},wr.prototype.setUnit=function(e){this.options.unit=e,Tr(this._map,this._container,this.options)};var Cr=function(){this._fullscreen=!1,e.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in e.default.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in e.default.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in e.default.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in e.default.document&&(this._fullscreenchange="MSFullscreenChange"),this._className="mapboxgl-ctrl"};Cr.prototype.onAdd=function(t){return this._map=t,this._mapContainer=this._map.getContainer(),this._container=s.create("div",this._className+" mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._container.style.display="none",e.warnOnce("This device does not support fullscreen mode.")),this._container},Cr.prototype.onRemove=function(){s.remove(this._container),this._map=null,e.default.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Cr.prototype._checkFullscreenSupport=function(){return!!(e.default.document.fullscreenEnabled||e.default.document.mozFullScreenEnabled||e.default.document.msFullscreenEnabled||e.default.document.webkitFullscreenEnabled)},Cr.prototype._setupUI=function(){var t=this._fullscreenButton=s.create("button",this._className+"-icon "+this._className+"-fullscreen",this._container);t.setAttribute("aria-label","Toggle fullscreen"),t.type="button",this._fullscreenButton.addEventListener("click",this._onClickFullscreen),e.default.document.addEventListener(this._fullscreenchange,this._changeIcon)},Cr.prototype._isFullscreen=function(){return this._fullscreen},Cr.prototype._changeIcon=function(){(e.default.document.fullscreenElement||e.default.document.mozFullScreenElement||e.default.document.webkitFullscreenElement||e.default.document.msFullscreenElement)===this._mapContainer!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle(this._className+"-shrink"),this._fullscreenButton.classList.toggle(this._className+"-fullscreen"))},Cr.prototype._onClickFullscreen=function(){this._isFullscreen()?e.default.document.exitFullscreen?e.default.document.exitFullscreen():e.default.document.mozCancelFullScreen?e.default.document.mozCancelFullScreen():e.default.document.msExitFullscreen?e.default.document.msExitFullscreen():e.default.document.webkitCancelFullScreen&&e.default.document.webkitCancelFullScreen():this._mapContainer.requestFullscreen?this._mapContainer.requestFullscreen():this._mapContainer.mozRequestFullScreen?this._mapContainer.mozRequestFullScreen():this._mapContainer.msRequestFullscreen?this._mapContainer.msRequestFullscreen():this._mapContainer.webkitRequestFullscreen&&this._mapContainer.webkitRequestFullscreen()};var Er={closeButton:!0,closeOnClick:!0},Mr=function(t){function n(n){t.call(this),this.options=e.extend(Object.create(Er),n),e.bindAll(["_update","_onClickClose"],this)}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.addTo=function(t){return this._map=t,this._map.on("move",this._update),this.options.closeOnClick&&this._map.on("click",this._onClickClose),this._update(),this.fire(new e.Event("open")),this},n.prototype.isOpen=function(){return!!this._map},n.prototype.remove=function(){return this._content&&s.remove(this._content),this._container&&(s.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("click",this._onClickClose),delete this._map),this.fire(new e.Event("close")),this},n.prototype.getLngLat=function(){return this._lngLat},n.prototype.setLngLat=function(e){return this._lngLat=W.convert(e),this._pos=null,this._update(),this},n.prototype.setText=function(t){return this.setDOMContent(e.default.document.createTextNode(t))},n.prototype.setHTML=function(t){var n,r=e.default.document.createDocumentFragment(),a=e.default.document.createElement("body");for(a.innerHTML=t;n=a.firstChild;)r.appendChild(n);return this.setDOMContent(r)},n.prototype.setDOMContent=function(e){return this._createContent(),this._content.appendChild(e),this._update(),this},n.prototype._createContent=function(){this._content&&s.remove(this._content),this._content=s.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=s.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClickClose))},n.prototype._update=function(){if(this._map&&this._lngLat&&this._content){this._container||(this._container=s.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=s.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content)),this._map.transform.renderWorldCopies&&(this._lngLat=hr(this._lngLat,this._pos,this._map.transform));var t=this._pos=this._map.project(this._lngLat),n=this.options.anchor,r=function t(n){if(n){if("number"==typeof n){var r=Math.round(Math.sqrt(.5*Math.pow(n,2)));return{center:new e.default$1(0,0),top:new e.default$1(0,n),"top-left":new e.default$1(r,r),"top-right":new e.default$1(-r,r),bottom:new e.default$1(0,-n),"bottom-left":new e.default$1(r,-r),"bottom-right":new e.default$1(-r,-r),left:new e.default$1(n,0),right:new e.default$1(-n,0)}}if(n instanceof e.default$1||Array.isArray(n)){var a=e.default$1.convert(n);return{center:a,top:a,"top-left":a,"top-right":a,bottom:a,"bottom-left":a,"bottom-right":a,left:a,right:a}}return{center:e.default$1.convert(n.center||[0,0]),top:e.default$1.convert(n.top||[0,0]),"top-left":e.default$1.convert(n["top-left"]||[0,0]),"top-right":e.default$1.convert(n["top-right"]||[0,0]),bottom:e.default$1.convert(n.bottom||[0,0]),"bottom-left":e.default$1.convert(n["bottom-left"]||[0,0]),"bottom-right":e.default$1.convert(n["bottom-right"]||[0,0]),left:e.default$1.convert(n.left||[0,0]),right:e.default$1.convert(n.right||[0,0])}}return t(new e.default$1(0,0))}(this.options.offset);if(!n){var a,i=this._container.offsetWidth,o=this._container.offsetHeight;a=t.y+r.bottom.y<o?["top"]:t.y>this._map.transform.height-o?["bottom"]:[],t.x<i/2?a.push("left"):t.x>this._map.transform.width-i/2&&a.push("right"),n=0===a.length?"bottom":a.join("-")}var l=t.add(r[n]).round();s.setTransform(this._container,mr[n]+" translate("+l.x+"px,"+l.y+"px)"),vr(this._container,n,"popup")}},n.prototype._onClickClose=function(){this.remove()},n}(e.Evented),Ar={version:"0.45.0",supported:t,workerCount:Math.max(Math.floor(i.hardwareConcurrency/2),1),setRTLTextPlugin:e.setRTLTextPlugin,Map:cr,NavigationControl:pr,GeolocateControl:xr,AttributionControl:ar,ScaleControl:wr,FullscreenControl:Cr,Popup:Mr,Marker:gr,Style:Kt,LngLat:W,LngLatBounds:q,Point:e.default$1,Evented:e.Evented,config:v,get accessToken(){return v.ACCESS_TOKEN},set accessToken(e){v.ACCESS_TOKEN=e},workerUrl:""};return Ar}),r})}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],410:[function(e,t,n){"use strict";t.exports=function(e){for(var t=1<<e+1,n=new Array(t),r=0;r<t;++r)n[r]=i(e,r);return n};var r=e("convex-hull");function a(e,t,n){for(var r=new Array(e),a=0;a<e;++a)r[a]=0,a===t&&(r[a]+=.5),a===n&&(r[a]+=.5);return r}function i(e,t){if(0===t||t===(1<<e+1)-1)return[];for(var n=[],i=[],o=0;o<=e;++o)if(t&1<<o){n.push(a(e,o-1,o-1)),i.push(null);for(var s=0;s<=e;++s)~t&1<<s&&(n.push(a(e,o-1,s-1)),i.push([o,s]))}var l=r(n),u=[];e:for(var o=0;o<l.length;++o){for(var c=l[o],f=[],s=0;s<c.length;++s){if(!i[c[s]])continue e;f.push(i[c[s]].slice())}u.push(f)}return u}},{"convex-hull":118}],411:[function(e,t,n){var r=e("./normalize"),a=e("gl-mat4/create"),i=e("gl-mat4/clone"),o=e("gl-mat4/determinant"),s=e("gl-mat4/invert"),l=e("gl-mat4/transpose"),u={length:e("gl-vec3/length"),normalize:e("gl-vec3/normalize"),dot:e("gl-vec3/dot"),cross:e("gl-vec3/cross")},c=a(),f=a(),d=[0,0,0,0],p=[[0,0,0],[0,0,0],[0,0,0]],h=[0,0,0];function m(e,t,n,r,a){e[0]=t[0]*r+n[0]*a,e[1]=t[1]*r+n[1]*a,e[2]=t[2]*r+n[2]*a}t.exports=function(e,t,n,a,v,g){if(t||(t=[0,0,0]),n||(n=[0,0,0]),a||(a=[0,0,0]),v||(v=[0,0,0,1]),g||(g=[0,0,0,1]),!r(c,e))return!1;if(i(f,c),f[3]=0,f[7]=0,f[11]=0,f[15]=1,Math.abs(o(f)<1e-8))return!1;var y=c[3],b=c[7],x=c[11],_=c[12],w=c[13],T=c[14],k=c[15];if(0!==y||0!==b||0!==x){d[0]=y,d[1]=b,d[2]=x,d[3]=k;var C=s(f,f);if(!C)return!1;l(f,f),function(e,t,n){var r=t[0],a=t[1],i=t[2],o=t[3];e[0]=n[0]*r+n[4]*a+n[8]*i+n[12]*o,e[1]=n[1]*r+n[5]*a+n[9]*i+n[13]*o,e[2]=n[2]*r+n[6]*a+n[10]*i+n[14]*o,e[3]=n[3]*r+n[7]*a+n[11]*i+n[15]*o}(v,d,f)}else v[0]=v[1]=v[2]=0,v[3]=1;if(t[0]=_,t[1]=w,t[2]=T,function(e,t){e[0][0]=t[0],e[0][1]=t[1],e[0][2]=t[2],e[1][0]=t[4],e[1][1]=t[5],e[1][2]=t[6],e[2][0]=t[8],e[2][1]=t[9],e[2][2]=t[10]}(p,c),n[0]=u.length(p[0]),u.normalize(p[0],p[0]),a[0]=u.dot(p[0],p[1]),m(p[1],p[1],p[0],1,-a[0]),n[1]=u.length(p[1]),u.normalize(p[1],p[1]),a[0]/=n[1],a[1]=u.dot(p[0],p[2]),m(p[2],p[2],p[0],1,-a[1]),a[2]=u.dot(p[1],p[2]),m(p[2],p[2],p[1],1,-a[2]),n[2]=u.length(p[2]),u.normalize(p[2],p[2]),a[1]/=n[2],a[2]/=n[2],u.cross(h,p[1],p[2]),u.dot(p[0],h)<0)for(var E=0;E<3;E++)n[E]*=-1,p[E][0]*=-1,p[E][1]*=-1,p[E][2]*=-1;return g[0]=.5*Math.sqrt(Math.max(1+p[0][0]-p[1][1]-p[2][2],0)),g[1]=.5*Math.sqrt(Math.max(1-p[0][0]+p[1][1]-p[2][2],0)),g[2]=.5*Math.sqrt(Math.max(1-p[0][0]-p[1][1]+p[2][2],0)),g[3]=.5*Math.sqrt(Math.max(1+p[0][0]+p[1][1]+p[2][2],0)),p[2][1]>p[1][2]&&(g[0]=-g[0]),p[0][2]>p[2][0]&&(g[1]=-g[1]),p[1][0]>p[0][1]&&(g[2]=-g[2]),!0}},{"./normalize":412,"gl-mat4/clone":248,"gl-mat4/create":249,"gl-mat4/determinant":250,"gl-mat4/invert":254,"gl-mat4/transpose":264,"gl-vec3/cross":317,"gl-vec3/dot":322,"gl-vec3/length":332,"gl-vec3/normalize":339}],412:[function(e,t,n){t.exports=function(e,t){var n=t[15];if(0===n)return!1;for(var r=1/n,a=0;a<16;a++)e[a]=t[a]*r;return!0}},{}],413:[function(e,t,n){var r=e("gl-vec3/lerp"),a=e("mat4-recompose"),i=e("mat4-decompose"),o=e("gl-mat4/determinant"),s=e("quat-slerp"),l=f(),u=f(),c=f();function f(){return{translate:d(),scale:d(1),skew:d(),perspective:[0,0,0,1],quaternion:[0,0,0,1]}}function d(e){return[e||0,e||0,e||0]}t.exports=function(e,t,n,f){if(0===o(t)||0===o(n))return!1;var d=i(t,l.translate,l.scale,l.skew,l.perspective,l.quaternion),p=i(n,u.translate,u.scale,u.skew,u.perspective,u.quaternion);return!(!d||!p||(r(c.translate,l.translate,u.translate,f),r(c.skew,l.skew,u.skew,f),r(c.scale,l.scale,u.scale,f),r(c.perspective,l.perspective,u.perspective,f),s(c.quaternion,l.quaternion,u.quaternion,f),a(e,c.translate,c.scale,c.skew,c.perspective,c.quaternion),0))}},{"gl-mat4/determinant":250,"gl-vec3/lerp":333,"mat4-decompose":411,"mat4-recompose":414,"quat-slerp":466}],414:[function(e,t,n){var r={identity:e("gl-mat4/identity"),translate:e("gl-mat4/translate"),multiply:e("gl-mat4/multiply"),create:e("gl-mat4/create"),scale:e("gl-mat4/scale"),fromRotationTranslation:e("gl-mat4/fromRotationTranslation")},a=(r.create(),r.create());t.exports=function(e,t,n,i,o,s){return r.identity(e),r.fromRotationTranslation(e,s,t),e[3]=o[0],e[7]=o[1],e[11]=o[2],e[15]=o[3],r.identity(a),0!==i[2]&&(a[9]=i[2],r.multiply(e,e,a)),0!==i[1]&&(a[9]=0,a[8]=i[1],r.multiply(e,e,a)),0!==i[0]&&(a[8]=0,a[4]=i[0],r.multiply(e,e,a)),r.scale(e,e,n),e}},{"gl-mat4/create":249,"gl-mat4/fromRotationTranslation":252,"gl-mat4/identity":253,"gl-mat4/multiply":256,"gl-mat4/scale":262,"gl-mat4/translate":263}],415:[function(e,t,n){"use strict";t.exports=Math.log2||function(e){return Math.log(e)*Math.LOG2E}},{}],416:[function(e,t,n){"use strict";var r=e("binary-search-bounds"),a=e("mat4-interpolate"),i=e("gl-mat4/invert"),o=e("gl-mat4/rotateX"),s=e("gl-mat4/rotateY"),l=e("gl-mat4/rotateZ"),u=e("gl-mat4/lookAt"),c=e("gl-mat4/translate"),f=(e("gl-mat4/scale"),e("gl-vec3/normalize")),d=[0,0,0];function p(e){this._components=e.slice(),this._time=[0],this.prevMatrix=e.slice(),this.nextMatrix=e.slice(),this.computedMatrix=e.slice(),this.computedInverse=e.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}t.exports=function(e){return new p((e=e||{}).matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};var h=p.prototype;h.recalcMatrix=function(e){var t=this._time,n=r.le(t,e),o=this.computedMatrix;if(!(n<0)){var s=this._components;if(n===t.length-1)for(var l=16*n,u=0;u<16;++u)o[u]=s[l++];else{for(var c=t[n+1]-t[n],l=16*n,d=this.prevMatrix,p=!0,u=0;u<16;++u)d[u]=s[l++];for(var h=this.nextMatrix,u=0;u<16;++u)h[u]=s[l++],p=p&&d[u]===h[u];if(c<1e-6||p)for(var u=0;u<16;++u)o[u]=d[u];else a(o,d,h,(e-t[n])/c)}var m=this.computedUp;m[0]=o[1],m[1]=o[5],m[2]=o[9],f(m,m);var v=this.computedInverse;i(v,o);var g=this.computedEye,y=v[15];g[0]=v[12]/y,g[1]=v[13]/y,g[2]=v[14]/y;for(var b=this.computedCenter,x=Math.exp(this.computedRadius[0]),u=0;u<3;++u)b[u]=g[u]-o[2+4*u]*x}},h.idle=function(e){if(!(e<this.lastT())){for(var t=this._components,n=t.length-16,r=0;r<16;++r)t.push(t[n++]);this._time.push(e)}},h.flush=function(e){var t=r.gt(this._time,e)-2;t<0||(this._time.splice(0,t),this._components.splice(0,16*t))},h.lastT=function(){return this._time[this._time.length-1]},h.lookAt=function(e,t,n,r){this.recalcMatrix(e),t=t||this.computedEye,n=n||d,r=r||this.computedUp,this.setMatrix(e,u(this.computedMatrix,t,n,r));for(var a=0,i=0;i<3;++i)a+=Math.pow(n[i]-t[i],2);a=Math.log(Math.sqrt(a)),this.computedRadius[0]=a},h.rotate=function(e,t,n,r){this.recalcMatrix(e);var a=this.computedInverse;t&&s(a,a,t),n&&o(a,a,n),r&&l(a,a,r),this.setMatrix(e,i(this.computedMatrix,a))};var m=[0,0,0];h.pan=function(e,t,n,r){m[0]=-(t||0),m[1]=-(n||0),m[2]=-(r||0),this.recalcMatrix(e);var a=this.computedInverse;c(a,a,m),this.setMatrix(e,i(a,a))},h.translate=function(e,t,n,r){m[0]=t||0,m[1]=n||0,m[2]=r||0,this.recalcMatrix(e);var a=this.computedMatrix;c(a,a,m),this.setMatrix(e,a)},h.setMatrix=function(e,t){if(!(e<this.lastT())){this._time.push(e);for(var n=0;n<16;++n)this._components.push(t[n])}},h.setDistance=function(e,t){this.computedRadius[0]=t},h.setDistanceLimits=function(e,t){var n=this._limits;n[0]=e,n[1]=t},h.getDistanceLimits=function(e){var t=this._limits;return e?(e[0]=t[0],e[1]=t[1],e):t}},{"binary-search-bounds":79,"gl-mat4/invert":254,"gl-mat4/lookAt":255,"gl-mat4/rotateX":259,"gl-mat4/rotateY":260,"gl-mat4/rotateZ":261,"gl-mat4/scale":262,"gl-mat4/translate":263,"gl-vec3/normalize":339,"mat4-interpolate":413}],417:[function(e,t,n){"use strict";t.exports=function(e){var t=e.length;if(t<3){for(var n=new Array(t),a=0;a<t;++a)n[a]=a;return 2===t&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]?[0]:n}for(var i=new Array(t),a=0;a<t;++a)i[a]=a;i.sort(function(t,n){var r=e[t][0]-e[n][0];return r||e[t][1]-e[n][1]});for(var o=[i[0],i[1]],s=[i[0],i[1]],a=2;a<t;++a){for(var l=i[a],u=e[l],c=o.length;c>1&&r(e[o[c-2]],e[o[c-1]],u)<=0;)c-=1,o.pop();for(o.push(l),c=s.length;c>1&&r(e[s[c-2]],e[s[c-1]],u)>=0;)c-=1,s.pop();s.push(l)}for(var n=new Array(s.length+o.length-2),f=0,a=0,d=o.length;a<d;++a)n[f++]=o[a];for(var p=s.length-2;p>0;--p)n[f++]=s[p];return n};var r=e("robust-orientation")[3]},{"robust-orientation":486}],418:[function(e,t,n){"use strict";t.exports=function(e,t){t||(t=e,e=window);var n=0,a=0,i=0,o={shift:!1,alt:!1,control:!1,meta:!1},s=!1;function l(e){var t=!1;return"altKey"in e&&(t=t||e.altKey!==o.alt,o.alt=!!e.altKey),"shiftKey"in e&&(t=t||e.shiftKey!==o.shift,o.shift=!!e.shiftKey),"ctrlKey"in e&&(t=t||e.ctrlKey!==o.control,o.control=!!e.ctrlKey),"metaKey"in e&&(t=t||e.metaKey!==o.meta,o.meta=!!e.metaKey),t}function u(e,s){var u=r.x(s),c=r.y(s);"buttons"in s&&(e=0|s.buttons),(e!==n||u!==a||c!==i||l(s))&&(n=0|e,a=u||0,i=c||0,t&&t(n,a,i,o))}function c(e){u(0,e)}function f(){(n||a||i||o.shift||o.alt||o.meta||o.control)&&(a=i=0,n=0,o.shift=o.alt=o.control=o.meta=!1,t&&t(0,0,0,o))}function d(e){l(e)&&t&&t(n,a,i,o)}function p(e){0===r.buttons(e)?u(0,e):u(n,e)}function h(e){u(n|r.buttons(e),e)}function m(e){u(n&~r.buttons(e),e)}function v(){s||(s=!0,e.addEventListener("mousemove",p),e.addEventListener("mousedown",h),e.addEventListener("mouseup",m),e.addEventListener("mouseleave",c),e.addEventListener("mouseenter",c),e.addEventListener("mouseout",c),e.addEventListener("mouseover",c),e.addEventListener("blur",f),e.addEventListener("keyup",d),e.addEventListener("keydown",d),e.addEventListener("keypress",d),e!==window&&(window.addEventListener("blur",f),window.addEventListener("keyup",d),window.addEventListener("keydown",d),window.addEventListener("keypress",d)))}v();var g={element:e};return Object.defineProperties(g,{enabled:{get:function(){return s},set:function(t){t?v():s&&(s=!1,e.removeEventListener("mousemove",p),e.removeEventListener("mousedown",h),e.removeEventListener("mouseup",m),e.removeEventListener("mouseleave",c),e.removeEventListener("mouseenter",c),e.removeEventListener("mouseout",c),e.removeEventListener("mouseover",c),e.removeEventListener("blur",f),e.removeEventListener("keyup",d),e.removeEventListener("keydown",d),e.removeEventListener("keypress",d),e!==window&&(window.removeEventListener("blur",f),window.removeEventListener("keyup",d),window.removeEventListener("keydown",d),window.removeEventListener("keypress",d)))},enumerable:!0},buttons:{get:function(){return n},enumerable:!0},x:{get:function(){return a},enumerable:!0},y:{get:function(){return i},enumerable:!0},mods:{get:function(){return o},enumerable:!0}}),g};var r=e("mouse-event")},{"mouse-event":420}],419:[function(e,t,n){var r={left:0,top:0};t.exports=function(e,t,n){t=t||e.currentTarget||e.srcElement,Array.isArray(n)||(n=[0,0]);var a=e.clientX||0,i=e.clientY||0,o=function(e){return e===window||e===document||e===document.body?r:e.getBoundingClientRect()}(t);return n[0]=a-o.left,n[1]=i-o.top,n}},{}],420:[function(e,t,n){"use strict";function r(e){return e.target||e.srcElement||window}n.buttons=function(e){if("object"==typeof e){if("buttons"in e)return e.buttons;if("which"in e){var t=e.which;if(2===t)return 4;if(3===t)return 2;if(t>0)return 1<<t-1}else if("button"in e){var t=e.button;if(1===t)return 4;if(2===t)return 2;if(t>=0)return 1<<t}}return 0},n.element=r,n.x=function(e){if("object"==typeof e){if("offsetX"in e)return e.offsetX;var t=r(e),n=t.getBoundingClientRect();return e.clientX-n.left}return 0},n.y=function(e){if("object"==typeof e){if("offsetY"in e)return e.offsetY;var t=r(e),n=t.getBoundingClientRect();return e.clientY-n.top}return 0}},{}],421:[function(e,t,n){"use strict";var r=e("to-px");t.exports=function(e,t,n){"function"==typeof e&&(n=!!t,t=e,e=window);var a=r("ex",e),i=function(e){n&&e.preventDefault();var r=e.deltaX||0,i=e.deltaY||0,o=e.deltaZ||0,s=e.deltaMode,l=1;switch(s){case 1:l=a;break;case 2:l=window.innerHeight}if(i*=l,o*=l,(r*=l)||i||o)return t(r,i,o,e)};return e.addEventListener("wheel",i),i}},{"to-px":516}],422:[function(e,t,n){"use strict";var r=e("typedarray-pool");function a(e){return"a"+e}function i(e){return"d"+e}function o(e,t){return"c"+e+"_"+t}function s(e){return"s"+e}function l(e,t){return"t"+e+"_"+t}function u(e){return"o"+e}function c(e){return"x"+e}function f(e){return"p"+e}function d(e,t){return"d"+e+"_"+t}function p(e){return"i"+e}function h(e,t){return"u"+e+"_"+t}function m(e){return"b"+e}function v(e){return"y"+e}function g(e){return"e"+e}function y(e){return"v"+e}t.exports=function(e){function t(e){throw new Error("ndarray-extract-contour: "+e)}"object"!=typeof e&&t("Must specify arguments");var n=e.order;Array.isArray(n)||t("Must specify order");var E=e.arrayArguments||1;E<1&&t("Must have at least one array argument");var M=e.scalarArguments||0;M<0&&t("Scalar arg count must be > 0"),"function"!=typeof e.vertex&&t("Must specify vertex creation function"),"function"!=typeof e.cell&&t("Must specify cell creation function"),"function"!=typeof e.phase&&t("Must specify phase function");for(var A=e.getters||[],S=new Array(E),O=0;O<E;++O)A.indexOf(O)>=0?S[O]=!0:S[O]=!1;return function(e,t,n,E,M,A){var S=A.length,O=M.length;if(O<2)throw new Error("ndarray-extract-contour: Dimension must be at least 2");for(var P="extractContour"+M.join("_"),R=[],L=[],D=[],I=0;I<S;++I)D.push(a(I));for(var I=0;I<E;++I)D.push(c(I));for(var I=0;I<O;++I)L.push(s(I)+"="+a(0)+".shape["+I+"]|0");for(var I=0;I<S;++I){L.push(i(I)+"="+a(I)+".data",u(I)+"="+a(I)+".offset|0");for(var z=0;z<O;++z)L.push(l(I,z)+"="+a(I)+".stride["+z+"]|0")}for(var I=0;I<S;++I){L.push(f(I)+"="+u(I)),L.push(o(I,0));for(var z=1;z<1<<O;++z){for(var j=[],N=0;N<O;++N)z&1<<N&&j.push("-"+l(I,N));L.push(d(I,z)+"=("+j.join("")+")|0"),L.push(o(I,z)+"=0")}}for(var I=0;I<S;++I)for(var z=0;z<O;++z){var F=[l(I,M[z])];z>0&&F.push(l(I,M[z-1])+"*"+s(M[z-1])),L.push(h(I,M[z])+"=("+F.join("-")+")|0")}for(var I=0;I<O;++I)L.push(p(I)+"=0");L.push(_+"=0");for(var B=["2"],I=O-2;I>=0;--I)B.push(s(M[I]));L.push(w+"=("+B.join("*")+")|0",x+"=mallocUint32("+w+")",b+"=mallocUint32("+w+")",T+"=0"),L.push(m(0)+"=0");for(var z=1;z<1<<O;++z){for(var V=[],U=[],N=0;N<O;++N)z&1<<N&&(0===U.length?V.push("1"):V.unshift(U.join("*"))),U.push(s(M[N]));var G="";V[0].indexOf(s(M[O-2]))<0&&(G="-");var H=C(O,z,M);L.push(g(H)+"=(-"+V.join("-")+")|0",v(H)+"=("+G+V.join("-")+")|0",m(H)+"=0")}function W(e,t){R.push("for(",p(M[e]),"=",t,";",p(M[e]),"<",s(M[e]),";","++",p(M[e]),"){")}function q(e){for(var t=0;t<S;++t)R.push(f(t),"+=",h(t,M[e]),";");R.push("}")}function Y(){for(var e=1;e<1<<O;++e)R.push(k,"=",g(e),";",g(e),"=",v(e),";",v(e),"=",k,";")}L.push(y(0)+"=0",k+"=0"),function e(t,n){if(t<0)!function(e){for(var t=0;t<S;++t)A[t]?R.push(o(t,0),"=",i(t),".get(",f(t),");"):R.push(o(t,0),"=",i(t),"[",f(t),"];");for(var n=[],t=0;t<S;++t)n.push(o(t,0));for(var t=0;t<E;++t)n.push(c(t));R.push(m(0),"=",x,"[",T,"]=phase(",n.join(),");");for(var r=1;r<1<<O;++r)R.push(m(r),"=",x,"[",T,"+",g(r),"];");for(var a=[],r=1;r<1<<O;++r)a.push("("+m(0)+"!=="+m(r)+")");R.push("if(",a.join("||"),"){");for(var s=[],t=0;t<O;++t)s.push(p(t));for(var t=0;t<S;++t){s.push(o(t,0));for(var r=1;r<1<<O;++r)A[t]?R.push(o(t,r),"=",i(t),".get(",f(t),"+",d(t,r),");"):R.push(o(t,r),"=",i(t),"[",f(t),"+",d(t,r),"];"),s.push(o(t,r))}for(var t=0;t<1<<O;++t)s.push(m(t));for(var t=0;t<E;++t)s.push(c(t));R.push("vertex(",s.join(),");",y(0),"=",b,"[",T,"]=",_,"++;");for(var l=(1<<O)-1,u=m(l),r=0;r<O;++r)if(0==(e&~(1<<r))){for(var h=l^1<<r,v=m(h),w=[],k=h;k>0;k=k-1&h)w.push(b+"["+T+"+"+g(k)+"]");w.push(y(0));for(var k=0;k<S;++k)1&r?w.push(o(k,l),o(k,h)):w.push(o(k,h),o(k,l));1&r?w.push(u,v):w.push(v,u);for(var k=0;k<E;++k)w.push(c(k));R.push("if(",u,"!==",v,"){","face(",w.join(),")}")}R.push("}",T,"+=1;")}(n);else{!function(e){for(var t=e-1;t>=0;--t)W(t,0);for(var n=[],t=0;t<S;++t)A[t]?n.push(i(t)+".get("+f(t)+")"):n.push(i(t)+"["+f(t)+"]");for(var t=0;t<E;++t)n.push(c(t));R.push(x,"[",T,"++]=phase(",n.join(),");");for(var t=0;t<e;++t)q(t);for(var r=0;r<S;++r)R.push(f(r),"+=",h(r,M[e]),";")}(t),R.push("if(",s(M[t]),">0){",p(M[t]),"=1;"),e(t-1,n|1<<M[t]);for(var r=0;r<S;++r)R.push(f(r),"+=",h(r,M[t]),";");t===O-1&&(R.push(T,"=0;"),Y()),W(t,2),e(t-1,n),t===O-1&&(R.push("if(",p(M[O-1]),"&1){",T,"=0;}"),Y()),q(t),R.push("}")}}(O-1,0),R.push("freeUint32(",b,");freeUint32(",x,");");var X=["'use strict';","function ",P,"(",D.join(),"){","var ",L.join(),";",R.join(""),"}","return ",P].join("");return new Function("vertex","face","phase","mallocUint32","freeUint32",X)(e,t,n,r.mallocUint32,r.freeUint32)}(e.vertex,e.cell,e.phase,M,n,S)};var b="V",x="P",_="N",w="Q",T="X",k="T";function C(e,t,n){for(var r=0,a=0;a<e;++a)t&1<<a&&(r|=1<<n[a]);return r}},{"typedarray-pool":522}],423:[function(e,t,n){"use strict";var r=e("cwise/lib/wrapper")({args:["index","array","scalar"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{_inline_1_arg1_=_inline_1_arg2_.apply(void 0,_inline_1_arg0_)}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"cwise",blockSize:64});t.exports=function(e,t){return r(e,t),e}},{"cwise/lib/wrapper":137}],424:[function(e,t,n){"use strict";t.exports=function(e,t,n){if(Array.isArray(n)){if(n.length!==t.dimension)throw new Error("ndarray-gradient: invalid boundary conditions")}else n=r(t.dimension,"string"==typeof n?n:"clamp");if(e.dimension!==t.dimension+1)throw new Error("ndarray-gradient: output dimension must be +1 input dimension");if(e.shape[t.dimension]!==t.dimension)throw new Error("ndarray-gradient: output shape must match input shape");for(var a=0;a<t.dimension;++a)if(e.shape[a]!==t.shape[a])throw new Error("ndarray-gradient: shape mismatch");return 0===t.size?e:t.dimension<=0?(e.set(0),e):function(e){var t=e.join();if(g=o[t])return g;var n=e.length,r=["function gradient(dst,src){var s=src.shape.slice();"];function a(t){for(var a=n-t.length,i=[],o=[],s=[],l=0;l<n;++l)t.indexOf(l+1)>=0?s.push("0"):t.indexOf(-(l+1))>=0?s.push("s["+l+"]-1"):(s.push("-1"),i.push("1"),o.push("s["+l+"]-2"));var u=".lo("+i.join()+").hi("+o.join()+")";if(0===i.length&&(u=""),a>0){r.push("if(1");for(var l=0;l<n;++l)t.indexOf(l+1)>=0||t.indexOf(-(l+1))>=0||r.push("&&s[",l,"]>2");r.push("){grad",a,"(src.pick(",s.join(),")",u);for(var l=0;l<n;++l)t.indexOf(l+1)>=0||t.indexOf(-(l+1))>=0||r.push(",dst.pick(",s.join(),",",l,")",u);r.push(");")}for(var l=0;l<t.length;++l){var c=Math.abs(t[l])-1,f="dst.pick("+s.join()+","+c+")"+u;switch(e[c]){case"clamp":var d=s.slice(),p=s.slice();t[l]<0?d[c]="s["+c+"]-2":p[c]="1",0===a?r.push("if(s[",c,"]>1){dst.set(",s.join(),",",c,",0.5*(src.get(",d.join(),")-src.get(",p.join(),")))}else{dst.set(",s.join(),",",c,",0)};"):r.push("if(s[",c,"]>1){diff(",f,",src.pick(",d.join(),")",u,",src.pick(",p.join(),")",u,");}else{zero(",f,");};");break;case"mirror":0===a?r.push("dst.set(",s.join(),",",c,",0);"):r.push("zero(",f,");");break;case"wrap":var h=s.slice(),m=s.slice();t[l]<0?(h[c]="s["+c+"]-2",m[c]="0"):(h[c]="s["+c+"]-1",m[c]="1"),0===a?r.push("if(s[",c,"]>2){dst.set(",s.join(),",",c,",0.5*(src.get(",h.join(),")-src.get(",m.join(),")))}else{dst.set(",s.join(),",",c,",0)};"):r.push("if(s[",c,"]>2){diff(",f,",src.pick(",h.join(),")",u,",src.pick(",m.join(),")",u,");}else{zero(",f,");};");break;default:throw new Error("ndarray-gradient: Invalid boundary condition")}}a>0&&r.push("};")}for(var s=0;s<1<<n;++s){for(var f=[],d=0;d<n;++d)s&1<<d&&f.push(d+1);for(var p=0;p<1<<f.length;++p){for(var h=f.slice(),d=0;d<f.length;++d)p&1<<d&&(h[d]=-h[d]);a(h)}}r.push("return dst;};return gradient");for(var m=["diff","zero"],v=[l,u],s=1;s<=n;++s)m.push("grad"+s),v.push(c(s));m.push(r.join(""));var g=Function.apply(void 0,m).apply(void 0,v);return i[t]=g,g}(n)(e,t)};var r=e("dup"),a=e("cwise-compiler"),i={},o={},s={body:"",args:[],thisVars:[],localVars:[]},l=a({args:["array","array","array"],pre:s,post:s,body:{args:[{name:"out",lvalue:!0,rvalue:!1,count:1},{name:"left",lvalue:!1,rvalue:!0,count:1},{name:"right",lvalue:!1,rvalue:!0,count:1}],body:"out=0.5*(left-right)",thisVars:[],localVars:[]},funcName:"cdiff"}),u=a({args:["array"],pre:s,post:s,body:{args:[{name:"out",lvalue:!0,rvalue:!1,count:1}],body:"out=0",thisVars:[],localVars:[]},funcName:"zero"});function c(e){if(e in i)return i[e];for(var t=[],n=0;n<e;++n)t.push("out",n,"s=0.5*(inp",n,"l-inp",n,"r);");for(var o=["array"],l=["junk"],n=0;n<e;++n){o.push("array"),l.push("out"+n+"s");var u=r(e);u[n]=-1,o.push({array:0,offset:u.slice()}),u[n]=1,o.push({array:0,offset:u.slice()}),l.push("inp"+n+"l","inp"+n+"r")}return i[e]=a({args:o,pre:s,post:s,body:{body:t.join(""),args:l.map(function(e){return{name:e,lvalue:0===e.indexOf("out"),rvalue:0===e.indexOf("inp"),count:"junk"!==e|0}}),thisVars:[],localVars:[]},funcName:"fdTemplate"+e})}},{"cwise-compiler":134,dup:155}],425:[function(e,t,n){"use strict";var r=e("ndarray-warp"),a=e("gl-matrix-invert");t.exports=function(e,t,n){var i=t.dimension,o=a([],n);return r(e,t,function(e,t){for(var n=0;n<i;++n){e[n]=o[(i+1)*i+n];for(var r=0;r<i;++r)e[n]+=o[(i+1)*r+n]*t[r]}var a=o[(i+1)*(i+1)-1];for(r=0;r<i;++r)a+=o[(i+1)*r+i]*t[r];var s=1/a;for(n=0;n<i;++n)e[n]*=s;return e}),e}},{"gl-matrix-invert":265,"ndarray-warp":432}],426:[function(e,t,n){"use strict";function r(e,t){var n=Math.floor(t),r=t-n,a=0<=n&&n<e.shape[0],i=0<=n+1&&n+1<e.shape[0],o=a?+e.get(n):0,s=i?+e.get(n+1):0;return(1-r)*o+r*s}function a(e,t,n){var r=Math.floor(t),a=t-r,i=0<=r&&r<e.shape[0],o=0<=r+1&&r+1<e.shape[0],s=Math.floor(n),l=n-s,u=0<=s&&s<e.shape[1],c=0<=s+1&&s+1<e.shape[1],f=i&&u?e.get(r,s):0,d=i&&c?e.get(r,s+1):0,p=o&&u?e.get(r+1,s):0,h=o&&c?e.get(r+1,s+1):0;return(1-l)*((1-a)*f+a*p)+l*((1-a)*d+a*h)}function i(e,t,n,r){var a=Math.floor(t),i=t-a,o=0<=a&&a<e.shape[0],s=0<=a+1&&a+1<e.shape[0],l=Math.floor(n),u=n-l,c=0<=l&&l<e.shape[1],f=0<=l+1&&l+1<e.shape[1],d=Math.floor(r),p=r-d,h=0<=d&&d<e.shape[2],m=0<=d+1&&d+1<e.shape[2],v=o&&c&&h?e.get(a,l,d):0,g=o&&f&&h?e.get(a,l+1,d):0,y=s&&c&&h?e.get(a+1,l,d):0,b=s&&f&&h?e.get(a+1,l+1,d):0,x=o&&c&&m?e.get(a,l,d+1):0,_=o&&f&&m?e.get(a,l+1,d+1):0,w=s&&c&&m?e.get(a+1,l,d+1):0,T=s&&f&&m?e.get(a+1,l+1,d+1):0;return(1-p)*((1-u)*((1-i)*v+i*y)+u*((1-i)*g+i*b))+p*((1-u)*((1-i)*x+i*w)+u*((1-i)*_+i*T))}t.exports=function(e,t,n,o){switch(e.shape.length){case 0:return 0;case 1:return r(e,t);case 2:return a(e,t,n);case 3:return i(e,t,n,o);default:return function(e){var t,n,r=0|e.shape.length,a=new Array(r),i=new Array(r),o=new Array(r),s=new Array(r);for(t=0;t<r;++t)n=+arguments[t+1],a[t]=Math.floor(n),i[t]=n-a[t],o[t]=0<=a[t]&&a[t]<e.shape[t],s[t]=0<=a[t]+1&&a[t]+1<e.shape[t];var l,u,c,f=0;e:for(t=0;t<1<<r;++t){for(u=1,c=e.offset,l=0;l<r;++l)if(t&1<<l){if(!s[l])continue e;u*=i[l],c+=e.stride[l]*(a[l]+1)}else{if(!o[l])continue e;u*=1-i[l],c+=e.stride[l]*a[l]}f+=u*e.data[c]}return f}.apply(void 0,arguments)}},t.exports.d1=r,t.exports.d2=a,t.exports.d3=i},{}],427:[function(e,t,n){"use strict";var r=e("cwise-compiler"),a={body:"",args:[],thisVars:[],localVars:[]};function i(e){if(!e)return a;for(var t=0;t<e.args.length;++t){var n=e.args[t];e.args[t]=0===t?{name:n,lvalue:!0,rvalue:!!e.rvalue,count:e.count||1}:{name:n,lvalue:!1,rvalue:!0,count:1}}return e.thisVars||(e.thisVars=[]),e.localVars||(e.localVars=[]),e}function o(e){for(var t=[],n=0;n<e.args.length;++n)t.push("a"+n);var a=new Function("P",["return function ",e.funcName,"_ndarrayops(",t.join(","),") {P(",t.join(","),");return a0}"].join(""));return a(function(e){return r({args:e.args,pre:i(e.pre),body:i(e.body),post:i(e.proc),funcName:e.funcName})}(e))}var s={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var e in s){var t=s[e];n[e]=o({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+t+"c"},funcName:e}),n[e+"eq"]=o({args:["array","array"],body:{args:["a","b"],body:"a"+t+"=b"},rvalue:!0,funcName:e+"eq"}),n[e+"s"]=o({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+t+"s"},funcName:e+"s"}),n[e+"seq"]=o({args:["array","scalar"],body:{args:["a","s"],body:"a"+t+"=s"},rvalue:!0,funcName:e+"seq"})}}();var l={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var e in l){var t=l[e];n[e]=o({args:["array","array"],body:{args:["a","b"],body:"a="+t+"b"},funcName:e}),n[e+"eq"]=o({args:["array"],body:{args:["a"],body:"a="+t+"a"},rvalue:!0,count:2,funcName:e+"eq"})}}();var u={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var e in u){var t=u[e];n[e]=o({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+t+"c"},funcName:e}),n[e+"s"]=o({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+t+"s"},funcName:e+"s"}),n[e+"eq"]=o({args:["array","array"],body:{args:["a","b"],body:"a=a"+t+"b"},rvalue:!0,count:2,funcName:e+"eq"}),n[e+"seq"]=o({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+t+"s"},rvalue:!0,count:2,funcName:e+"seq"})}}();var c=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];!function(){for(var e=0;e<c.length;++e){var t=c[e];n[t]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:t}),n[t+"eq"]=o({args:["array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"eq"})}}();var f=["max","min","atan2","pow"];!function(){for(var e=0;e<f.length;++e){var t=f[e];n[t]=o({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:t}),n[t+"s"]=o({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:t+"s"}),n[t+"eq"]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"eq"}),n[t+"seq"]=o({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"seq"})}}();var d=["atan2","pow"];!function(){for(var e=0;e<d.length;++e){var t=d[e];n[t+"op"]=o({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:t+"op"}),n[t+"ops"]=o({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:t+"ops"}),n[t+"opeq"]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"opeq"}),n[t+"opseq"]=o({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"opseq"})}}(),n.any=r({args:["array"],pre:a,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),n.all=r({args:["array"],pre:a,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),n.sum=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),n.prod=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),n.norm2squared=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),n.norm2=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),n.norminf=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),n.norm1=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),n.sup=r({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),n.inf=r({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),n.argmin=r({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),n.argmax=r({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),n.random=o({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),n.assign=o({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),n.assigns=o({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),n.equals=r({args:["array","array"],pre:a,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},{"cwise-compiler":134}],428:[function(e,t,n){"use strict";var r=e("ndarray"),a=e("./doConvert.js");t.exports=function(e,t){for(var n=[],i=e,o=1;Array.isArray(i);)n.push(i.length),o*=i.length,i=i[0];return 0===n.length?r():(t||(t=r(new Float64Array(o),n)),a(t,e),t)}},{"./doConvert.js":429,ndarray:433}],429:[function(e,t,n){t.exports=e("cwise-compiler")({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\nvar _inline_1_v=_inline_1_arg1_,_inline_1_i\nfor(_inline_1_i=0;_inline_1_i<_inline_1_arg2_.length-1;++_inline_1_i) {\n_inline_1_v=_inline_1_v[_inline_1_arg2_[_inline_1_i]]\n}\n_inline_1_arg0_=_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]\n}",args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64})},{"cwise-compiler":134}],430:[function(e,t,n){"use strict";var r=e("typedarray-pool"),a=32;function i(e){switch(e){case"uint8":return[r.mallocUint8,r.freeUint8];case"uint16":return[r.mallocUint16,r.freeUint16];case"uint32":return[r.mallocUint32,r.freeUint32];case"int8":return[r.mallocInt8,r.freeInt8];case"int16":return[r.mallocInt16,r.freeInt16];case"int32":return[r.mallocInt32,r.freeInt32];case"float32":return[r.mallocFloat,r.freeFloat];case"float64":return[r.mallocDouble,r.freeDouble];default:return null}}function o(e){for(var t=[],n=0;n<e;++n)t.push("s"+n);for(var n=0;n<e;++n)t.push("n"+n);for(var n=1;n<e;++n)t.push("d"+n);for(var n=1;n<e;++n)t.push("e"+n);for(var n=1;n<e;++n)t.push("f"+n);return t}t.exports=function(e,t){var n=["'use strict'"],r=["ndarraySortWrapper",e.join("d"),t].join("");n.push(["function ",r,"(",["array"].join(","),"){"].join(""));for(var s=["data=array.data,offset=array.offset|0,shape=array.shape,stride=array.stride"],l=0;l<e.length;++l)s.push(["s",l,"=stride[",l,"]|0,n",l,"=shape[",l,"]|0"].join(""));for(var u=new Array(e.length),c=[],l=0;l<e.length;++l){var f=e[l];0!==f&&(0===c.length?u[f]="1":u[f]=c.join("*"),c.push("n"+f))}for(var d=-1,p=-1,l=0;l<e.length;++l){var h=e[l];0!==h&&(d>0?s.push(["d",h,"=s",h,"-d",d,"*n",d].join("")):s.push(["d",h,"=s",h].join("")),d=h);var f=e.length-1-l;0!==f&&(p>0?s.push(["e",f,"=s",f,"-e",p,"*n",p,",f",f,"=",u[f],"-f",p,"*n",p].join("")):s.push(["e",f,"=s",f,",f",f,"=",u[f]].join("")),p=f)}n.push("var "+s.join(","));var m=["0","n0-1","data","offset"].concat(o(e.length));n.push(["if(n0<=",a,"){","insertionSort(",m.join(","),")}else{","quickSort(",m.join(","),")}"].join("")),n.push("}return "+r);var v=new Function("insertionSort","quickSort",n.join("\n")),g=function(e,t){var n=["'use strict'"],r=["ndarrayInsertionSort",e.join("d"),t].join(""),a=["left","right","data","offset"].concat(o(e.length)),s=i(t),l=["i,j,cptr,ptr=left*s0+offset"];if(e.length>1){for(var u=[],c=1;c<e.length;++c)l.push("i"+c),u.push("n"+c);s?l.push("scratch=malloc("+u.join("*")+")"):l.push("scratch=new Array("+u.join("*")+")"),l.push("dptr","sptr","a","b")}else l.push("scratch");function f(e){return"generic"===t?["data.get(",e,")"].join(""):["data[",e,"]"].join("")}function d(e,n){return"generic"===t?["data.set(",e,",",n,")"].join(""):["data[",e,"]=",n].join("")}if(n.push(["function ",r,"(",a.join(","),"){var ",l.join(",")].join(""),"for(i=left+1;i<=right;++i){","j=i;ptr+=s0","cptr=ptr"),e.length>1){n.push("dptr=0;sptr=ptr");for(var c=e.length-1;c>=0;--c){var p=e[c];0!==p&&n.push(["for(i",p,"=0;i",p,"<n",p,";++i",p,"){"].join(""))}n.push("scratch[dptr++]=",f("sptr"));for(var c=0;c<e.length;++c){var p=e[c];0!==p&&n.push("sptr+=d"+p,"}")}n.push("__g:while(j--\x3eleft){","dptr=0","sptr=cptr-s0");for(var c=1;c<e.length;++c)1===c&&n.push("__l:"),n.push(["for(i",c,"=0;i",c,"<n",c,";++i",c,"){"].join(""));n.push(["a=",f("sptr"),"\nb=scratch[dptr]\nif(a<b){break __g}\nif(a>b){break __l}"].join(""));for(var c=e.length-1;c>=1;--c)n.push("sptr+=e"+c,"dptr+=f"+c,"}");n.push("dptr=cptr;sptr=cptr-s0");for(var c=e.length-1;c>=0;--c){var p=e[c];0!==p&&n.push(["for(i",p,"=0;i",p,"<n",p,";++i",p,"){"].join(""))}n.push(d("dptr",f("sptr")));for(var c=0;c<e.length;++c){var p=e[c];0!==p&&n.push(["dptr+=d",p,";sptr+=d",p].join(""),"}")}n.push("cptr-=s0\n}"),n.push("dptr=cptr;sptr=0");for(var c=e.length-1;c>=0;--c){var p=e[c];0!==p&&n.push(["for(i",p,"=0;i",p,"<n",p,";++i",p,"){"].join(""))}n.push(d("dptr","scratch[sptr++]"));for(var c=0;c<e.length;++c){var p=e[c];0!==p&&n.push("dptr+=d"+p,"}")}}else n.push("scratch="+f("ptr"),"while((j--\x3eleft)&&("+f("cptr-s0")+">scratch)){",d("cptr",f("cptr-s0")),"cptr-=s0","}",d("cptr","scratch"));if(n.push("}"),e.length>1&&s&&n.push("free(scratch)"),n.push("} return "+r),s){var h=new Function("malloc","free",n.join("\n"));return h(s[0],s[1])}var h=new Function(n.join("\n"));return h()}(e,t),y=function(e,t,n){var r=["'use strict'"],s=["ndarrayQuickSort",e.join("d"),t].join(""),l=["left","right","data","offset"].concat(o(e.length)),u=i(t),c=0;r.push(["function ",s,"(",l.join(","),"){"].join(""));var f=["sixth=((right-left+1)/6)|0","index1=left+sixth","index5=right-sixth","index3=(left+right)>>1","index2=index3-sixth","index4=index3+sixth","el1=index1","el2=index2","el3=index3","el4=index4","el5=index5","less=left+1","great=right-1","pivots_are_equal=true","tmp","tmp0","x","y","z","k","ptr0","ptr1","ptr2","comp_pivot1=0","comp_pivot2=0","comp=0"];if(e.length>1){for(var d=[],p=1;p<e.length;++p)d.push("n"+p),f.push("i"+p);for(var p=0;p<8;++p)f.push("b_ptr"+p);f.push("ptr3","ptr4","ptr5","ptr6","ptr7","pivot_ptr","ptr_shift","elementSize="+d.join("*")),u?f.push("pivot1=malloc(elementSize)","pivot2=malloc(elementSize)"):f.push("pivot1=new Array(elementSize),pivot2=new Array(elementSize)")}else f.push("pivot1","pivot2");function h(e){return["(offset+",e,"*s0)"].join("")}function m(e){return"generic"===t?["data.get(",e,")"].join(""):["data[",e,"]"].join("")}function v(e,n){return"generic"===t?["data.set(",e,",",n,")"].join(""):["data[",e,"]=",n].join("")}function g(t,n,a){if(1===t.length)r.push("ptr0="+h(t[0]));else for(var i=0;i<t.length;++i)r.push(["b_ptr",i,"=s0*",t[i]].join(""));n&&r.push("pivot_ptr=0"),r.push("ptr_shift=offset");for(var i=e.length-1;i>=0;--i){var o=e[i];0!==o&&r.push(["for(i",o,"=0;i",o,"<n",o,";++i",o,"){"].join(""))}if(t.length>1)for(var i=0;i<t.length;++i)r.push(["ptr",i,"=b_ptr",i,"+ptr_shift"].join(""));r.push(a),n&&r.push("++pivot_ptr");for(var i=0;i<e.length;++i){var o=e[i];0!==o&&(t.length>1?r.push("ptr_shift+=d"+o):r.push("ptr0+=d"+o),r.push("}"))}}function y(t,n,a,i){if(1===n.length)r.push("ptr0="+h(n[0]));else{for(var o=0;o<n.length;++o)r.push(["b_ptr",o,"=s0*",n[o]].join(""));r.push("ptr_shift=offset")}a&&r.push("pivot_ptr=0"),t&&r.push(t+":");for(var o=1;o<e.length;++o)r.push(["for(i",o,"=0;i",o,"<n",o,";++i",o,"){"].join(""));if(n.length>1)for(var o=0;o<n.length;++o)r.push(["ptr",o,"=b_ptr",o,"+ptr_shift"].join(""));r.push(i);for(var o=e.length-1;o>=1;--o)a&&r.push("pivot_ptr+=f"+o),n.length>1?r.push("ptr_shift+=e"+o):r.push("ptr0+=e"+o),r.push("}")}function b(){e.length>1&&u&&r.push("free(pivot1)","free(pivot2)")}function x(t,n){var a="el"+t,i="el"+n;if(e.length>1){var o="__l"+ ++c;y(o,[a,i],!1,["comp=",m("ptr0"),"-",m("ptr1"),"\n","if(comp>0){tmp0=",a,";",a,"=",i,";",i,"=tmp0;break ",o,"}\n","if(comp<0){break ",o,"}"].join(""))}else r.push(["if(",m(h(a)),">",m(h(i)),"){tmp0=",a,";",a,"=",i,";",i,"=tmp0}"].join(""))}function _(t,n){e.length>1?g([t,n],!1,v("ptr0",m("ptr1"))):r.push(v(h(t),m(h(n))))}function w(t,n,a){if(e.length>1){var i="__l"+ ++c;y(i,[n],!0,[t,"=",m("ptr0"),"-pivot",a,"[pivot_ptr]\n","if(",t,"!==0){break ",i,"}"].join(""))}else r.push([t,"=",m(h(n)),"-pivot",a].join(""))}function T(t,n){e.length>1?g([t,n],!1,["tmp=",m("ptr0"),"\n",v("ptr0",m("ptr1")),"\n",v("ptr1","tmp")].join("")):r.push(["ptr0=",h(t),"\n","ptr1=",h(n),"\n","tmp=",m("ptr0"),"\n",v("ptr0",m("ptr1")),"\n",v("ptr1","tmp")].join(""))}function k(t,n,a){e.length>1?(g([t,n,a],!1,["tmp=",m("ptr0"),"\n",v("ptr0",m("ptr1")),"\n",v("ptr1",m("ptr2")),"\n",v("ptr2","tmp")].join("")),r.push("++"+n,"--"+a)):r.push(["ptr0=",h(t),"\n","ptr1=",h(n),"\n","ptr2=",h(a),"\n","++",n,"\n","--",a,"\n","tmp=",m("ptr0"),"\n",v("ptr0",m("ptr1")),"\n",v("ptr1",m("ptr2")),"\n",v("ptr2","tmp")].join(""))}function C(e,t){T(e,t),r.push("--"+t)}function E(t,n,a){e.length>1?g([t,n],!0,[v("ptr0",m("ptr1")),"\n",v("ptr1",["pivot",a,"[pivot_ptr]"].join(""))].join("")):r.push(v(h(t),m(h(n))),v(h(n),"pivot"+a))}function M(t,n){r.push(["if((",n,"-",t,")<=",a,"){\n","insertionSort(",t,",",n,",data,offset,",o(e.length).join(","),")\n","}else{\n",s,"(",t,",",n,",data,offset,",o(e.length).join(","),")\n","}"].join(""))}function A(t,n,a){e.length>1?(r.push(["__l",++c,":while(true){"].join("")),g([t],!0,["if(",m("ptr0"),"!==pivot",n,"[pivot_ptr]){break __l",c,"}"].join("")),r.push(a,"}")):r.push(["while(",m(h(t)),"===pivot",n,"){",a,"}"].join(""))}if(r.push("var "+f.join(",")),x(1,2),x(4,5),x(1,3),x(2,3),x(1,4),x(3,4),x(2,5),x(2,3),x(4,5),e.length>1?g(["el1","el2","el3","el4","el5","index1","index3","index5"],!0,["pivot1[pivot_ptr]=",m("ptr1"),"\n","pivot2[pivot_ptr]=",m("ptr3"),"\n","pivots_are_equal=pivots_are_equal&&(pivot1[pivot_ptr]===pivot2[pivot_ptr])\n","x=",m("ptr0"),"\n","y=",m("ptr2"),"\n","z=",m("ptr4"),"\n",v("ptr5","x"),"\n",v("ptr6","y"),"\n",v("ptr7","z")].join("")):r.push(["pivot1=",m(h("el2")),"\n","pivot2=",m(h("el4")),"\n","pivots_are_equal=pivot1===pivot2\n","x=",m(h("el1")),"\n","y=",m(h("el3")),"\n","z=",m(h("el5")),"\n",v(h("index1"),"x"),"\n",v(h("index3"),"y"),"\n",v(h("index5"),"z")].join("")),_("index2","left"),_("index4","right"),r.push("if(pivots_are_equal){"),r.push("for(k=less;k<=great;++k){"),w("comp","k",1),r.push("if(comp===0){continue}"),r.push("if(comp<0){"),r.push("if(k!==less){"),T("k","less"),r.push("}"),r.push("++less"),r.push("}else{"),r.push("while(true){"),w("comp","great",1),r.push("if(comp>0){"),r.push("great--"),r.push("}else if(comp<0){"),k("k","less","great"),r.push("break"),r.push("}else{"),C("k","great"),r.push("break"),r.push("}"),r.push("}"),r.push("}"),r.push("}"),r.push("}else{"),r.push("for(k=less;k<=great;++k){"),w("comp_pivot1","k",1),r.push("if(comp_pivot1<0){"),r.push("if(k!==less){"),T("k","less"),r.push("}"),r.push("++less"),r.push("}else{"),w("comp_pivot2","k",2),r.push("if(comp_pivot2>0){"),r.push("while(true){"),w("comp","great",2),r.push("if(comp>0){"),r.push("if(--great<k){break}"),r.push("continue"),r.push("}else{"),w("comp","great",1),r.push("if(comp<0){"),k("k","less","great"),r.push("}else{"),C("k","great"),r.push("}"),r.push("break"),r.push("}"),r.push("}"),r.push("}"),r.push("}"),r.push("}"),r.push("}"),E("left","(less-1)",1),E("right","(great+1)",2),M("left","(less-2)"),M("(great+2)","right"),r.push("if(pivots_are_equal){"),b(),r.push("return"),r.push("}"),r.push("if(less<index1&&great>index5){"),A("less",1,"++less"),A("great",2,"--great"),r.push("for(k=less;k<=great;++k){"),w("comp_pivot1","k",1),r.push("if(comp_pivot1===0){"),r.push("if(k!==less){"),T("k","less"),r.push("}"),r.push("++less"),r.push("}else{"),w("comp_pivot2","k",2),r.push("if(comp_pivot2===0){"),r.push("while(true){"),w("comp","great",2),r.push("if(comp===0){"),r.push("if(--great<k){break}"),r.push("continue"),r.push("}else{"),w("comp","great",1),r.push("if(comp<0){"),k("k","less","great"),r.push("}else{"),C("k","great"),r.push("}"),r.push("break"),r.push("}"),r.push("}"),r.push("}"),r.push("}"),r.push("}"),r.push("}"),b(),M("less","great"),r.push("}return "+s),e.length>1&&u){var S=new Function("insertionSort","malloc","free",r.join("\n"));return S(n,u[0],u[1])}return(S=new Function("insertionSort",r.join("\n")))(n)}(e,t,g);return v(g,y)}},{"typedarray-pool":522}],431:[function(e,t,n){"use strict";var r=e("./lib/compile_sort.js"),a={};t.exports=function(e){var t=e.order,n=e.dtype,i=[t,n].join(":"),o=a[i];return o||(a[i]=o=r(t,n)),o(e),e}},{"./lib/compile_sort.js":430}],432:[function(e,t,n){"use strict";var r=e("ndarray-linear-interpolate"),a=e("cwise/lib/wrapper")({args:["index","array","scalar","scalar","scalar"],pre:{body:"{this_warped=new Array(_inline_3_arg4_)}",args:[{name:"_inline_3_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_3_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_3_arg2_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_3_arg3_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_3_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_warped"],localVars:[]},body:{body:"{_inline_4_arg2_(this_warped,_inline_4_arg0_),_inline_4_arg1_=_inline_4_arg3_.apply(void 0,this_warped)}",args:[{name:"_inline_4_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_4_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_4_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_4_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_4_arg4_",lvalue:!1,rvalue:!1,count:0}],thisVars:["this_warped"],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"warpND",blockSize:64}),i=e("cwise/lib/wrapper")({args:["index","array","scalar","scalar","scalar"],pre:{body:"{this_warped=[0]}",args:[],thisVars:["this_warped"],localVars:[]},body:{body:"{_inline_7_arg2_(this_warped,_inline_7_arg0_),_inline_7_arg1_=_inline_7_arg3_(_inline_7_arg4_,this_warped[0])}",args:[{name:"_inline_7_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_7_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_7_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_7_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_7_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_warped"],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"warp1D",blockSize:64}),o=e("cwise/lib/wrapper")({args:["index","array","scalar","scalar","scalar"],pre:{body:"{this_warped=[0,0]}",args:[],thisVars:["this_warped"],localVars:[]},body:{body:"{_inline_10_arg2_(this_warped,_inline_10_arg0_),_inline_10_arg1_=_inline_10_arg3_(_inline_10_arg4_,this_warped[0],this_warped[1])}",args:[{name:"_inline_10_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_10_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_10_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_10_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_10_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_warped"],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"warp2D",blockSize:64}),s=e("cwise/lib/wrapper")({args:["index","array","scalar","scalar","scalar"],pre:{body:"{this_warped=[0,0,0]}",args:[],thisVars:["this_warped"],localVars:[]},body:{body:"{_inline_13_arg2_(this_warped,_inline_13_arg0_),_inline_13_arg1_=_inline_13_arg3_(_inline_13_arg4_,this_warped[0],this_warped[1],this_warped[2])}",args:[{name:"_inline_13_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_13_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_13_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_13_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_13_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_warped"],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"warp3D",blockSize:64});t.exports=function(e,t,n){switch(t.shape.length){case 1:i(e,n,r.d1,t);break;case 2:o(e,n,r.d2,t);break;case 3:s(e,n,r.d3,t);break;default:a(e,n,r.bind(void 0,t),t.shape.length)}return e}},{"cwise/lib/wrapper":137,"ndarray-linear-interpolate":426}],433:[function(e,t,n){var r=e("iota-array"),a=e("is-buffer"),i="undefined"!=typeof Float64Array;function o(e,t){return e[0]-t[0]}function s(){var e,t=this.stride,n=new Array(t.length);for(e=0;e<n.length;++e)n[e]=[Math.abs(t[e]),e];n.sort(o);var r=new Array(n.length);for(e=0;e<r.length;++e)r[e]=n[e][1];return r}function l(e,t){var n=["View",t,"d",e].join("");t<0&&(n="View_Nil"+e);var a="generic"===e;if(-1===t){var i="function "+n+"(a){this.data=a;};var proto="+n+".prototype;proto.dtype='"+e+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+n+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+n+"(a){return new "+n+"(a);}",o=new Function(i);return o()}if(0===t){var i="function "+n+"(a,d) {this.data = a;this.offset = d};var proto="+n+".prototype;proto.dtype='"+e+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+n+"_copy() {return new "+n+"(this.data,this.offset)};proto.pick=function "+n+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+n+"_get(){return "+(a?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+n+"_set(v){return "+(a?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+n+"(a,b,c,d){return new "+n+"(a,d)}",o=new Function("TrivialArray",i);return o(u[e][0])}var i=["'use strict'"],l=r(t),c=l.map(function(e){return"i"+e}),f="this.offset+"+l.map(function(e){return"this.stride["+e+"]*i"+e}).join("+"),d=l.map(function(e){return"b"+e}).join(","),p=l.map(function(e){return"c"+e}).join(",");i.push("function "+n+"(a,"+d+","+p+",d){this.data=a","this.shape=["+d+"]","this.stride=["+p+"]","this.offset=d|0}","var proto="+n+".prototype","proto.dtype='"+e+"'","proto.dimension="+t),i.push("Object.defineProperty(proto,'size',{get:function "+n+"_size(){return "+l.map(function(e){return"this.shape["+e+"]"}).join("*"),"}})"),1===t?i.push("proto.order=[0]"):(i.push("Object.defineProperty(proto,'order',{get:"),t<4?(i.push("function "+n+"_order(){"),2===t?i.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===t&&i.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):i.push("ORDER})")),i.push("proto.set=function "+n+"_set("+c.join(",")+",v){"),a?i.push("return this.data.set("+f+",v)}"):i.push("return this.data["+f+"]=v}"),i.push("proto.get=function "+n+"_get("+c.join(",")+"){"),a?i.push("return this.data.get("+f+")}"):i.push("return this.data["+f+"]}"),i.push("proto.index=function "+n+"_index(",c.join(),"){return "+f+"}"),i.push("proto.hi=function "+n+"_hi("+c.join(",")+"){return new "+n+"(this.data,"+l.map(function(e){return["(typeof i",e,"!=='number'||i",e,"<0)?this.shape[",e,"]:i",e,"|0"].join("")}).join(",")+","+l.map(function(e){return"this.stride["+e+"]"}).join(",")+",this.offset)}");var h=l.map(function(e){return"a"+e+"=this.shape["+e+"]"}),m=l.map(function(e){return"c"+e+"=this.stride["+e+"]"});i.push("proto.lo=function "+n+"_lo("+c.join(",")+"){var b=this.offset,d=0,"+h.join(",")+","+m.join(","));for(var v=0;v<t;++v)i.push("if(typeof i"+v+"==='number'&&i"+v+">=0){d=i"+v+"|0;b+=c"+v+"*d;a"+v+"-=d}");i.push("return new "+n+"(this.data,"+l.map(function(e){return"a"+e}).join(",")+","+l.map(function(e){return"c"+e}).join(",")+",b)}"),i.push("proto.step=function "+n+"_step("+c.join(",")+"){var "+l.map(function(e){return"a"+e+"=this.shape["+e+"]"}).join(",")+","+l.map(function(e){return"b"+e+"=this.stride["+e+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var v=0;v<t;++v)i.push("if(typeof i"+v+"==='number'){d=i"+v+"|0;if(d<0){c+=b"+v+"*(a"+v+"-1);a"+v+"=ceil(-a"+v+"/d)}else{a"+v+"=ceil(a"+v+"/d)}b"+v+"*=d}");i.push("return new "+n+"(this.data,"+l.map(function(e){return"a"+e}).join(",")+","+l.map(function(e){return"b"+e}).join(",")+",c)}");for(var g=new Array(t),y=new Array(t),v=0;v<t;++v)g[v]="a[i"+v+"]",y[v]="b[i"+v+"]";i.push("proto.transpose=function "+n+"_transpose("+c+"){"+c.map(function(e,t){return e+"=("+e+"===undefined?"+t+":"+e+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+n+"(this.data,"+g.join(",")+","+y.join(",")+",this.offset)}"),i.push("proto.pick=function "+n+"_pick("+c+"){var a=[],b=[],c=this.offset");for(var v=0;v<t;++v)i.push("if(typeof i"+v+"==='number'&&i"+v+">=0){c=(c+this.stride["+v+"]*i"+v+")|0}else{a.push(this.shape["+v+"]);b.push(this.stride["+v+"])}");i.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),i.push("return function construct_"+n+"(data,shape,stride,offset){return new "+n+"(data,"+l.map(function(e){return"shape["+e+"]"}).join(",")+","+l.map(function(e){return"stride["+e+"]"}).join(",")+",offset)}");var o=new Function("CTOR_LIST","ORDER",i.join("\n"));return o(u[e],s)}var u={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};t.exports=function(e,t,n,r){if(void 0===e){var o=u.array[0];return o([])}"number"==typeof e&&(e=[e]),void 0===t&&(t=[e.length]);var s=t.length;if(void 0===n){n=new Array(s);for(var c=s-1,f=1;c>=0;--c)n[c]=f,f*=t[c]}if(void 0===r){r=0;for(var c=0;c<s;++c)n[c]<0&&(r-=(t[c]-1)*n[c])}for(var d=function(e){if(a(e))return"buffer";if(i)switch(Object.prototype.toString.call(e)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(e)?"array":"generic"}(e),p=u[d];p.length<=s+1;)p.push(l(d,p.length-1));return(o=p[s+1])(e,t,n,r)}},{"iota-array":399,"is-buffer":401}],434:[function(e,t,n){"use strict";var r=e("double-bits"),a=Math.pow(2,-1074),i=-1>>>0;t.exports=function(e,t){if(isNaN(e)||isNaN(t))return NaN;if(e===t)return e;if(0===e)return t<0?-a:a;var n=r.hi(e),o=r.lo(e);return t>e==e>0?o===i?(n+=1,o=0):o+=1:0===o?(o=i,n-=1):o-=1,r.pack(o,n)}},{"double-bits":152}],435:[function(e,t,n){var r=Math.PI,a=u(120);function i(e,t,n,r){return["C",e,t,n,r,n,r]}function o(e,t,n,r,a,i){return["C",e/3+2/3*n,t/3+2/3*r,a/3+2/3*n,i/3+2/3*r,a,i]}function s(e,t,n,i,o,u,c,f,d,p){if(p)T=p[0],k=p[1],_=p[2],w=p[3];else{var h=l(e,t,-o);e=h.x,t=h.y,h=l(f,d,-o),f=h.x,d=h.y;var m=(e-f)/2,v=(t-d)/2,g=m*m/(n*n)+v*v/(i*i);g>1&&(g=Math.sqrt(g),n*=g,i*=g);var y=n*n,b=i*i,x=(u==c?-1:1)*Math.sqrt(Math.abs((y*b-y*v*v-b*m*m)/(y*v*v+b*m*m)));x==1/0&&(x=1);var _=x*n*v/i+(e+f)/2,w=x*-i*m/n+(t+d)/2,T=Math.asin(((t-w)/i).toFixed(9)),k=Math.asin(((d-w)/i).toFixed(9));T=e<_?r-T:T,k=f<_?r-k:k,T<0&&(T=2*r+T),k<0&&(k=2*r+k),c&&T>k&&(T-=2*r),!c&&k>T&&(k-=2*r)}if(Math.abs(k-T)>a){var C=k,E=f,M=d;k=T+a*(c&&k>T?1:-1),f=_+n*Math.cos(k),d=w+i*Math.sin(k);var A=s(f,d,n,i,o,0,c,E,M,[k,C,_,w])}var S=Math.tan((k-T)/4),O=4/3*n*S,P=4/3*i*S,R=[2*e-(e+O*Math.sin(T)),2*t-(t-P*Math.cos(T)),f+O*Math.sin(k),d-P*Math.cos(k),f,d];if(p)return R;A&&(R=R.concat(A));for(var L=0;L<R.length;){var D=l(R[L],R[L+1],o);R[L++]=D.x,R[L++]=D.y}return R}function l(e,t,n){return{x:e*Math.cos(n)-t*Math.sin(n),y:e*Math.sin(n)+t*Math.cos(n)}}function u(e){return e*(r/180)}t.exports=function(e){for(var t,n=[],r=0,a=0,l=0,c=0,f=null,d=null,p=0,h=0,m=0,v=e.length;m<v;m++){var g=e[m],y=g[0];switch(y){case"M":l=g[1],c=g[2];break;case"A":(g=s(p,h,g[1],g[2],u(g[3]),g[4],g[5],g[6],g[7])).unshift("C"),g.length>7&&(n.push(g.splice(0,7)),g.unshift("C"));break;case"S":var b=p,x=h;"C"!=t&&"S"!=t||(b+=b-r,x+=x-a),g=["C",b,x,g[1],g[2],g[3],g[4]];break;case"T":"Q"==t||"T"==t?(f=2*p-f,d=2*h-d):(f=p,d=h),g=o(p,h,f,d,g[1],g[2]);break;case"Q":f=g[1],d=g[2],g=o(p,h,g[1],g[2],g[3],g[4]);break;case"L":g=i(p,h,g[1],g[2]);break;case"H":g=i(p,h,g[1],h);break;case"V":g=i(p,h,p,g[1]);break;case"Z":g=i(p,h,l,c)}t=y,p=g[g.length-2],h=g[g.length-1],g.length>4?(r=g[g.length-4],a=g[g.length-3]):(r=p,a=h),n.push(g)}return n}},{}],436:[function(e,t,n){n.vertexNormals=function(e,t,n){for(var r=t.length,a=new Array(r),i=void 0===n?1e-6:n,o=0;o<r;++o)a[o]=[0,0,0];for(var o=0;o<e.length;++o)for(var s=e[o],l=0,u=s[s.length-1],c=s[0],f=0;f<s.length;++f){l=u,u=c,c=s[(f+1)%s.length];for(var d=t[l],p=t[u],h=t[c],m=new Array(3),v=0,g=new Array(3),y=0,b=0;b<3;++b)m[b]=d[b]-p[b],v+=m[b]*m[b],g[b]=h[b]-p[b],y+=g[b]*g[b];if(v*y>i)for(var x=a[u],_=1/Math.sqrt(v*y),b=0;b<3;++b){var w=(b+1)%3,T=(b+2)%3;x[b]+=_*(g[w]*m[T]-g[T]*m[w])}}for(var o=0;o<r;++o){for(var x=a[o],k=0,b=0;b<3;++b)k+=x[b]*x[b];if(k>i)for(var _=1/Math.sqrt(k),b=0;b<3;++b)x[b]*=_;else for(var b=0;b<3;++b)x[b]=0}return a},n.faceNormals=function(e,t,n){for(var r=e.length,a=new Array(r),i=void 0===n?1e-6:n,o=0;o<r;++o){for(var s=e[o],l=new Array(3),u=0;u<3;++u)l[u]=t[s[u]];for(var c=new Array(3),f=new Array(3),u=0;u<3;++u)c[u]=l[1][u]-l[0][u],f[u]=l[2][u]-l[0][u];for(var d=new Array(3),p=0,u=0;u<3;++u){var h=(u+1)%3,m=(u+2)%3;d[u]=c[h]*f[m]-c[m]*f[h],p+=d[u]*d[u]}p=p>i?1/Math.sqrt(p):0;for(var u=0;u<3;++u)d[u]*=p;a[o]=d}return a}},{}],437:[function(e,t,n){
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
"use strict";var r=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if("0123456789"!==r.join(""))return!1;var a={};return"abcdefghijklmnopqrst".split("").forEach(function(e){a[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},a)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,o,s=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),l=1;l<arguments.length;l++){for(var u in n=Object(arguments[l]))a.call(n,u)&&(s[u]=n[u]);if(r){o=r(n);for(var c=0;c<o.length;c++)i.call(n,o[c])&&(s[o[c]]=n[o[c]])}}return s}},{}],438:[function(e,t,n){"use strict";t.exports=function(e,t,n,r,a,i,o,s,l,u){var c=t+i+u;if(f>0){var f=Math.sqrt(c+1);e[0]=.5*(o-l)/f,e[1]=.5*(s-r)/f,e[2]=.5*(n-i)/f,e[3]=.5*f}else{var d=Math.max(t,i,u),f=Math.sqrt(2*d-c+1);t>=d?(e[0]=.5*f,e[1]=.5*(a+n)/f,e[2]=.5*(s+r)/f,e[3]=.5*(o-l)/f):i>=d?(e[0]=.5*(n+a)/f,e[1]=.5*f,e[2]=.5*(l+o)/f,e[3]=.5*(s-r)/f):(e[0]=.5*(r+s)/f,e[1]=.5*(o+l)/f,e[2]=.5*f,e[3]=.5*(n-a)/f)}return e}},{}],439:[function(e,t,n){"use strict";t.exports=function(e){var t=(e=e||{}).center||[0,0,0],n=e.rotation||[0,0,0,1],r=e.radius||1;t=[].slice.call(t,0,3),c(n=[].slice.call(n,0,4),n);var a=new f(n,t,Math.log(r));return a.setDistanceLimits(e.zoomMin,e.zoomMax),("eye"in e||"up"in e)&&a.lookAt(0,e.eye,e.center,e.up),a};var r=e("filtered-vector"),a=e("gl-mat4/lookAt"),i=e("gl-mat4/fromQuat"),o=e("gl-mat4/invert"),s=e("./lib/quatFromFrame");function l(e,t,n){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2)+Math.pow(n,2))}function u(e,t,n,r){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2)+Math.pow(n,2)+Math.pow(r,2))}function c(e,t){var n=t[0],r=t[1],a=t[2],i=t[3],o=u(n,r,a,i);o>1e-6?(e[0]=n/o,e[1]=r/o,e[2]=a/o,e[3]=i/o):(e[0]=e[1]=e[2]=0,e[3]=1)}function f(e,t,n){this.radius=r([n]),this.center=r(t),this.rotation=r(e),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var d=f.prototype;d.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},d.recalcMatrix=function(e){this.radius.curve(e),this.center.curve(e),this.rotation.curve(e);var t=this.computedRotation;c(t,t);var n=this.computedMatrix;i(n,t);var r=this.computedCenter,a=this.computedEye,o=this.computedUp,s=Math.exp(this.computedRadius[0]);a[0]=r[0]+s*n[2],a[1]=r[1]+s*n[6],a[2]=r[2]+s*n[10],o[0]=n[1],o[1]=n[5],o[2]=n[9];for(var l=0;l<3;++l){for(var u=0,f=0;f<3;++f)u+=n[l+4*f]*a[f];n[12+l]=-u}},d.getMatrix=function(e,t){this.recalcMatrix(e);var n=this.computedMatrix;if(t){for(var r=0;r<16;++r)t[r]=n[r];return t}return n},d.idle=function(e){this.center.idle(e),this.radius.idle(e),this.rotation.idle(e)},d.flush=function(e){this.center.flush(e),this.radius.flush(e),this.rotation.flush(e)},d.pan=function(e,t,n,r){t=t||0,n=n||0,r=r||0,this.recalcMatrix(e);var a=this.computedMatrix,i=a[1],o=a[5],s=a[9],u=l(i,o,s);i/=u,o/=u,s/=u;var c=a[0],f=a[4],d=a[8],p=c*i+f*o+d*s,h=l(c-=i*p,f-=o*p,d-=s*p);c/=h,f/=h,d/=h;var m=a[2],v=a[6],g=a[10],y=m*i+v*o+g*s,b=m*c+v*f+g*d,x=l(m-=y*i+b*c,v-=y*o+b*f,g-=y*s+b*d);m/=x,v/=x,g/=x;var _=c*t+i*n,w=f*t+o*n,T=d*t+s*n;this.center.move(e,_,w,T);var k=Math.exp(this.computedRadius[0]);k=Math.max(1e-4,k+r),this.radius.set(e,Math.log(k))},d.rotate=function(e,t,n,r){this.recalcMatrix(e),t=t||0,n=n||0;var a=this.computedMatrix,i=a[0],o=a[4],s=a[8],c=a[1],f=a[5],d=a[9],p=a[2],h=a[6],m=a[10],v=t*i+n*c,g=t*o+n*f,y=t*s+n*d,b=-(h*y-m*g),x=-(m*v-p*y),_=-(p*g-h*v),w=Math.sqrt(Math.max(0,1-Math.pow(b,2)-Math.pow(x,2)-Math.pow(_,2))),T=u(b,x,_,w);T>1e-6?(b/=T,x/=T,_/=T,w/=T):(b=x=_=0,w=1);var k=this.computedRotation,C=k[0],E=k[1],M=k[2],A=k[3],S=C*w+A*b+E*_-M*x,O=E*w+A*x+M*b-C*_,P=M*w+A*_+C*x-E*b,R=A*w-C*b-E*x-M*_;if(r){b=p,x=h,_=m;var L=Math.sin(r)/l(b,x,_);b*=L,x*=L,_*=L,w=Math.cos(t),R=R*w-(S=S*w+R*b+O*_-P*x)*b-(O=O*w+R*x+P*b-S*_)*x-(P=P*w+R*_+S*x-O*b)*_}var D=u(S,O,P,R);D>1e-6?(S/=D,O/=D,P/=D,R/=D):(S=O=P=0,R=1),this.rotation.set(e,S,O,P,R)},d.lookAt=function(e,t,n,r){this.recalcMatrix(e),n=n||this.computedCenter,t=t||this.computedEye,r=r||this.computedUp;var i=this.computedMatrix;a(i,t,n,r);var o=this.computedRotation;s(o,i[0],i[1],i[2],i[4],i[5],i[6],i[8],i[9],i[10]),c(o,o),this.rotation.set(e,o[0],o[1],o[2],o[3]);for(var l=0,u=0;u<3;++u)l+=Math.pow(n[u]-t[u],2);this.radius.set(e,.5*Math.log(Math.max(l,1e-6))),this.center.set(e,n[0],n[1],n[2])},d.translate=function(e,t,n,r){this.center.move(e,t||0,n||0,r||0)},d.setMatrix=function(e,t){var n=this.computedRotation;s(n,t[0],t[1],t[2],t[4],t[5],t[6],t[8],t[9],t[10]),c(n,n),this.rotation.set(e,n[0],n[1],n[2],n[3]);var r=this.computedMatrix;o(r,t);var a=r[15];if(Math.abs(a)>1e-6){var i=r[12]/a,l=r[13]/a,u=r[14]/a;this.recalcMatrix(e);var f=Math.exp(this.computedRadius[0]);this.center.set(e,i-r[2]*f,l-r[6]*f,u-r[10]*f),this.radius.idle(e)}else this.center.idle(e),this.radius.idle(e)},d.setDistance=function(e,t){t>0&&this.radius.set(e,Math.log(t))},d.setDistanceLimits=function(e,t){e=e>0?Math.log(e):-1/0,t=t>0?Math.log(t):1/0,t=Math.max(t,e),this.radius.bounds[0][0]=e,this.radius.bounds[1][0]=t},d.getDistanceLimits=function(e){var t=this.radius.bounds;return e?(e[0]=Math.exp(t[0][0]),e[1]=Math.exp(t[1][0]),e):[Math.exp(t[0][0]),Math.exp(t[1][0])]},d.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},d.fromJSON=function(e){var t=this.lastT(),n=e.center;n&&this.center.set(t,n[0],n[1],n[2]);var r=e.rotation;r&&this.rotation.set(t,r[0],r[1],r[2],r[3]);var a=e.distance;a&&a>0&&this.radius.set(t,Math.log(a)),this.setDistanceLimits(e.zoomMin,e.zoomMax)}},{"./lib/quatFromFrame":438,"filtered-vector":215,"gl-mat4/fromQuat":251,"gl-mat4/invert":254,"gl-mat4/lookAt":255}],440:[function(e,t,n){
/*!
 * pad-left <https://github.com/jonschlinkert/pad-left>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT license.
 */
"use strict";var r=e("repeat-string");t.exports=function(e,t,n){return r(n=void 0!==n?n+"":" ",t)+e}},{"repeat-string":479}],441:[function(e,t,n){"use strict";function r(e,t){if("string"!=typeof e)return[e];var n=[e];"string"==typeof t||Array.isArray(t)?t={brackets:t}:t||(t={});var r=t.brackets?Array.isArray(t.brackets)?t.brackets:[t.brackets]:["{}","[]","()"],a=t.escape||"___",i=!!t.flat;r.forEach(function(e){var t=new RegExp(["\\",e[0],"[^\\",e[0],"\\",e[1],"]*\\",e[1]].join("")),r=[];function i(t,i,o){var s=n.push(t.slice(e[0].length,-e[1].length))-1;return r.push(s),a+s}n.forEach(function(e,r){for(var a,o=0;e!=a;)if(a=e,e=e.replace(t,i),o++>1e4)throw Error("References have circular dependency. Please, check them.");n[r]=e}),r=r.reverse(),n=n.map(function(t){return r.forEach(function(n){t=t.replace(new RegExp("(\\"+a+n+"(?![0-9]))","g"),e[0]+"$1"+e[1])}),t})});var o=new RegExp("\\"+a+"([0-9]+)");return i?n:function e(t,n,r){for(var a,i=[],s=0;a=o.exec(t);){if(s++>1e4)throw Error("Circular references in parenthesis");i.push(t.slice(0,a.index)),i.push(e(n[a[1]],n)),t=t.slice(a.index+a[0].length)}return i.push(t),i}(n[0],n)}function a(e,t){if(t&&t.flat){var n,r=t&&t.escape||"___",a=e[0];if(!a)return"";for(var i=new RegExp("\\"+r+"([0-9]+)"),o=0;a!=n;){if(o++>1e4)throw Error("Circular references in "+e);n=a,a=a.replace(i,s)}return a}return e.reduce(function e(t,n){return Array.isArray(n)&&(n=n.reduce(e,"")),t+n},"");function s(t,n){if(null==e[n])throw Error("Reference "+n+"is undefined");return e[n]}}function i(e,t){return Array.isArray(e)?a(e,t):r(e,t)}i.parse=r,i.stringify=a,t.exports=i},{}],442:[function(e,t,n){"use strict";var r=e("pick-by-alias");t.exports=function(e){var t;return arguments.length>1&&(e=arguments),"string"==typeof e?e=e.split(/\s/).map(parseFloat):"number"==typeof e&&(e=[e]),e.length&&"number"==typeof e[0]?t=1===e.length?{width:e[0],height:e[0],x:0,y:0}:2===e.length?{width:e[0],height:e[1],x:0,y:0}:{x:e[0],y:e[1],width:e[2]-e[0]||0,height:e[3]-e[1]||0}:e&&(e=r(e,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"}),t={x:e.left||0,y:e.top||0},null==e.width?e.right?t.width=e.right-t.x:t.width=0:t.width=e.width,null==e.height?e.bottom?t.height=e.bottom-t.y:t.height=0:t.height=e.height),t}},{"pick-by-alias":448}],443:[function(e,t,n){t.exports=function(e){var t=[];return e.replace(a,function(e,n,a){var o=n.toLowerCase();for(a=function(e){var t=e.match(i);return t?t.map(Number):[]}(a),"m"==o&&a.length>2&&(t.push([n].concat(a.splice(0,2))),o="l",n="m"==n?"l":"L");;){if(a.length==r[o])return a.unshift(n),t.push(a);if(a.length<r[o])throw new Error("malformed path data");t.push([n].concat(a.splice(0,r[o])))}}),t};var r={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},a=/([astvzqmhlc])([^astvzqmhlc]*)/gi,i=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi},{}],444:[function(e,t,n){t.exports=function(e,t){t||(t=[0,""]),e=String(e);var n=parseFloat(e,10);return t[0]=n,t[1]=e.match(/[\d.\-\+]*\s*(.*)/)[1]||"",t}},{}],445:[function(e,t,n){(function(e){(function(){var n,r,a,i,o,s;"undefined"!=typeof performance&&null!==performance&&performance.now?t.exports=function(){return performance.now()}:void 0!==e&&null!==e&&e.hrtime?(t.exports=function(){return(n()-o)/1e6},r=e.hrtime,i=(n=function(){var e;return 1e9*(e=r())[0]+e[1]})(),s=1e9*e.uptime(),o=i-s):Date.now?(t.exports=function(){return Date.now()-a},a=Date.now()):(t.exports=function(){return(new Date).getTime()-a},a=(new Date).getTime())}).call(this)}).call(this,e("_process"))},{_process:465}],446:[function(e,t,n){"use strict";t.exports=function(e){var t=e.length;if(t<r){for(var n=1,i=0;i<t;++i)for(var o=0;o<i;++o)if(e[i]<e[o])n=-n;else if(e[i]===e[o])return 0;return n}for(var s=a.mallocUint8(t),i=0;i<t;++i)s[i]=0;for(var n=1,i=0;i<t;++i)if(!s[i]){var l=1;s[i]=1;for(var o=e[i];o!==i;o=e[o]){if(s[o])return a.freeUint8(s),0;l+=1,s[o]=1}1&l||(n=-n)}return a.freeUint8(s),n};var r=32,a=e("typedarray-pool")},{"typedarray-pool":522}],447:[function(e,t,n){"use strict";var r=e("typedarray-pool"),a=e("invert-permutation");n.rank=function(e){var t=e.length;switch(t){case 0:case 1:return 0;case 2:return e[1]}var n,i,o,s=r.mallocUint32(t),l=r.mallocUint32(t),u=0;for(a(e,l),o=0;o<t;++o)s[o]=e[o];for(o=t-1;o>0;--o)i=l[o],n=s[o],s[o]=s[i],s[i]=n,l[o]=l[n],l[n]=i,u=(u+n)*o;return r.freeUint32(l),r.freeUint32(s),u},n.unrank=function(e,t,n){switch(e){case 0:return n||[];case 1:return n?(n[0]=0,n):[0];case 2:return n?(t?(n[0]=0,n[1]=1):(n[0]=1,n[1]=0),n):t?[0,1]:[1,0]}var r,a,i,o=1;for((n=n||new Array(e))[0]=0,i=1;i<e;++i)n[i]=i,o=o*i|0;for(i=e-1;i>0;--i)t=t-(r=t/o|0)*o|0,o=o/i|0,a=0|n[i],n[i]=0|n[r],n[r]=0|a;return n}},{"invert-permutation":398,"typedarray-pool":522}],448:[function(e,t,n){"use strict";t.exports=function(e,t,n){var r,i,o={};if("string"==typeof t&&(t=a(t)),Array.isArray(t)){var s={};for(i=0;i<t.length;i++)s[t[i]]=!0;t=s}for(r in t)t[r]=a(t[r]);var l={};for(r in t){var u=t[r];if(Array.isArray(u))for(i=0;i<u.length;i++){var c=u[i];if(n&&(l[c]=!0),c in e){if(o[r]=e[c],n)for(var f=i;f<u.length;f++)l[u[f]]=!0;break}}else r in e&&(t[r]&&(o[r]=e[r]),n&&(l[r]=!0))}if(n)for(r in e)l[r]||(o[r]=e[r]);return o};var r={};function a(e){return r[e]?r[e]:("string"==typeof e&&(e=r[e]=e.split(/\s*,\s*|\s+/)),e)}},{}],449:[function(e,t,n){"use strict";t.exports=function(e,t){for(var n=0|t.length,a=e.length,i=[new Array(n),new Array(n)],o=0;o<n;++o)i[0][o]=[],i[1][o]=[];for(var o=0;o<a;++o){var s=e[o];i[0][s[0]].push(s),i[1][s[1]].push(s)}for(var l=[],o=0;o<n;++o)i[0][o].length+i[1][o].length===0&&l.push([o]);function u(e,t){var n=i[t][e[t]];n.splice(n.indexOf(e),1)}function c(e,n,a){for(var o,s,l,c=0;c<2;++c)if(i[c][n].length>0){o=i[c][n][0],l=c;break}s=o[1^l];for(var f=0;f<2;++f)for(var d=i[f][n],p=0;p<d.length;++p){var h=d[p],m=h[1^f],v=r(t[e],t[n],t[s],t[m]);v>0&&(o=h,s=m,l=f)}return a?s:(o&&u(o,l),s)}function f(e,n){var a=i[n][e][0],o=[e];u(a,n);for(var s=a[1^n];;){for(;s!==e;)o.push(s),s=c(o[o.length-2],s,!1);if(i[0][e].length+i[1][e].length===0)break;var l=o[o.length-1],f=e,d=o[1],p=c(l,f,!0);if(r(t[l],t[f],t[d],t[p])<0)break;o.push(e),s=c(l,f)}return o}function d(e,t){return t[1]===t[t.length-1]}for(var o=0;o<n;++o)for(var p=0;p<2;++p){for(var h=[];i[p][o].length>0;){i[0][o].length;var m=f(o,p);d(h,m)?h.push.apply(h,m):(h.length>0&&l.push(h),h=m)}h.length>0&&l.push(h)}return l};var r=e("compare-angle")},{"compare-angle":115}],450:[function(e,t,n){"use strict";t.exports=function(e,t){for(var n=r(e,t.length),a=new Array(t.length),i=new Array(t.length),o=[],s=0;s<t.length;++s){var l=n[s].length;i[s]=l,a[s]=!0,l<=1&&o.push(s)}for(;o.length>0;){var u=o.pop();a[u]=!1;for(var c=n[u],s=0;s<c.length;++s){var f=c[s];0==--i[f]&&o.push(f)}}for(var d=new Array(t.length),p=[],s=0;s<t.length;++s)if(a[s]){var u=p.length;d[s]=u,p.push(t[s])}else d[s]=-1;for(var h=[],s=0;s<e.length;++s){var m=e[s];a[m[0]]&&a[m[1]]&&h.push([d[m[0]],d[m[1]]])}return[h,p]};var r=e("edges-to-adjacency-list")},{"edges-to-adjacency-list":157}],451:[function(e,t,n){"use strict";t.exports=function(e,t){var n=u(e,t);e=n[0];for(var f=(t=n[1]).length,d=(e.length,r(e,t.length)),p=0;p<f;++p)if(d[p].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");for(var h=a(e,t),m=(h=h.filter(function(e){for(var n=e.length,r=[0],a=0;a<n;++a){var i=t[e[a]],l=t[e[(a+1)%n]],u=o(-i[0],i[1]),c=o(-i[0],l[1]),f=o(l[0],i[1]),d=o(l[0],l[1]);r=s(r,s(s(u,c),s(f,d)))}return r[r.length-1]>0})).length,v=new Array(m),g=new Array(m),p=0;p<m;++p){v[p]=p;var y=new Array(m),b=h[p].map(function(e){return t[e]}),x=i([b]),_=0;e:for(var w=0;w<m;++w)if(y[w]=0,p!==w){for(var T=h[w],k=T.length,C=0;C<k;++C){var E=x(t[T[C]]);if(0!==E){E<0&&(y[w]=1,_+=1);continue e}}y[w]=1,_+=1}g[p]=[_,p,y]}g.sort(function(e,t){return t[0]-e[0]});for(var p=0;p<m;++p)for(var y=g[p],M=y[1],A=y[2],w=0;w<m;++w)A[w]&&(v[w]=M);for(var S=function(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=[];return t}(m),p=0;p<m;++p)S[p].push(v[p]),S[v[p]].push(p);for(var O={},P=c(f,!1),p=0;p<m;++p)for(var T=h[p],k=T.length,w=0;w<k;++w){var R=T[w],L=T[(w+1)%k],D=Math.min(R,L)+":"+Math.max(R,L);if(D in O){var I=O[D];S[I].push(p),S[p].push(I),P[R]=P[L]=!0}else O[D]=p}function z(e){for(var t=e.length,n=0;n<t;++n)if(!P[e[n]])return!1;return!0}for(var j=[],N=c(m,-1),p=0;p<m;++p)v[p]!==p||z(h[p])?N[p]=-1:(j.push(p),N[p]=0);for(var n=[];j.length>0;){var F=j.pop(),B=S[F];l(B,function(e,t){return e-t});var V,U=B.length,G=N[F];if(0===G){var T=h[F];V=[T]}for(var p=0;p<U;++p){var H=B[p];if(!(N[H]>=0)&&(N[H]=1^G,j.push(H),0===G)){var T=h[H];z(T)||(T.reverse(),V.push(T))}}0===G&&n.push(V)}return n};var r=e("edges-to-adjacency-list"),a=e("planar-dual"),i=e("point-in-big-polygon"),o=e("two-product"),s=e("robust-sum"),l=e("uniq"),u=e("./lib/trim-leaves");function c(e,t){for(var n=new Array(e),r=0;r<e;++r)n[r]=t;return n}},{"./lib/trim-leaves":450,"edges-to-adjacency-list":157,"planar-dual":449,"point-in-big-polygon":455,"robust-sum":491,"two-product":520,uniq:524}],452:[function(e,t,n){"use strict";t.exports=e("./quad")},{"./quad":454}],453:[function(e,t,n){arguments[4][99][0].apply(n,arguments)},{dup:99}],454:[function(e,t,n){"use strict";var r=e("binary-search-bounds"),a=e("clamp"),i=e("parse-rect"),o=e("array-bounds"),s=e("pick-by-alias"),l=e("defined"),u=e("flatten-vertex-data"),c=e("is-obj"),f=e("dtype"),d=e("math-log2");function p(e,t){for(var n=t[0],r=t[1],i=t[2],o=t[3],s=1/(i-n),l=1/(o-r),u=new Array(e.length),c=0,f=e.length/2;c<f;c++)u[2*c]=a((e[2*c]-n)*s,0,1),u[2*c+1]=a((e[2*c+1]-r)*l,0,1);return u}t.exports=function(e,t){t||(t={}),e=u(e,"float64"),t=s(t,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var n=l(t.maxDepth,255),a=l(t.bounds,o(e,2));a[0]===a[2]&&a[2]++,a[1]===a[3]&&a[3]++;var h,m=p(e,a),v=e.length>>>1;t.dtype||(t.dtype="array"),"string"==typeof t.dtype?h=new(f(t.dtype))(v):t.dtype&&(h=t.dtype,Array.isArray(h)&&(h.length=v));for(var g=0;g<v;++g)h[g]=g;var y=[],b=[],x=[],_=[];!function e(t,r,a,i,o,s){if(!i.length)return null;var l=y[o]||(y[o]=[]),u=x[o]||(x[o]=[]),c=b[o]||(b[o]=[]),f=l.length;if(++o>n){for(var d=0;d<i.length;d++)l.push(i[d]),u.push(s),c.push(null,null,null,null);return f}if(l.push(i[0]),u.push(s),i.length<=1)return c.push(null,null,null,null),f;for(var p=.5*a,h=t+p,v=r+p,g=[],_=[],w=[],T=[],k=1,C=i.length;k<C;k++){var E=i[k],M=m[2*E],A=m[2*E+1];M<h?A<v?g.push(E):_.push(E):A<v?w.push(E):T.push(E)}return s<<=2,c.push(e(t,r,p,g,o,s),e(t,v,p,_,o,s+1),e(h,r,p,w,o,s+2),e(h,v,p,T,o,s+3)),f}(0,0,1,h,0,1);for(var w=0,T=0;T<y.length;T++){var k=y[T];if(h.set)h.set(k,w);else for(var C=0,E=k.length;C<E;C++)h[C+w]=k[C];var M=w+y[T].length;_[T]=[w,M],w=M}return h.range=function(){for(var t,n=[],o=arguments.length;o--;)n[o]=arguments[o];if(c(n[n.length-1])){var u=n.pop();n.length||null==u.x&&null==u.l&&null==u.left||(n=[u],t={}),t=s(u,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else t={};n.length||(n=a);var f,h=i.apply(void 0,n),m=[Math.min(h.x,h.x+h.width),Math.min(h.y,h.y+h.height),Math.max(h.x,h.x+h.width),Math.max(h.y,h.y+h.height)],v=m[0],g=m[1],w=m[2],T=m[3],k=p([v,g,w,T],a),C=k[0],E=k[1],M=k[2],S=k[3],O=l(t.level,y.length);if(null!=t.d&&("number"==typeof t.d?f=[t.d,t.d]:t.d.length&&(f=t.d),O=Math.min(Math.max(Math.ceil(-d(Math.abs(f[0])/(a[2]-a[0]))),Math.ceil(-d(Math.abs(f[1])/(a[3]-a[1])))),O)),O=Math.min(O,y.length),t.lod)return function(e,t,n,a,i){for(var o=[],s=0;s<i;s++){var l=x[s],u=_[s][0],c=A(e,t,s),f=A(n,a,s),d=r.ge(l,c),p=r.gt(l,f,d,l.length-1);o[s]=[d+u,p+u]}return o}(C,E,M,S,O);var P=[];return function t(n,r,a,i,o,s){if(null!==o&&null!==s){var l=n+a,u=r+a;if(!(C>l||E>u||M<n||S<r||i>=O||o===s)){var c=y[i];void 0===s&&(s=c.length);for(var f=o;f<s;f++){var d=c[f],p=e[2*d],h=e[2*d+1];p>=v&&p<=w&&h>=g&&h<=T&&P.push(d)}var m=b[i],x=m[4*o+0],_=m[4*o+1],k=m[4*o+2],A=m[4*o+3],R=function(e,t){for(var n=null,r=0;null===n;)if(n=e[4*t+r],++r>e.length)return null;return n}(m,o+1),L=.5*a,D=i+1;t(n,r,L,D,x,_||k||A||R),t(n,r+L,L,D,_,k||A||R),t(n+L,r,L,D,k,A||R),t(n+L,r+L,L,D,A,R)}}}(0,0,1,0,0,1),P},h;function A(e,t,n){for(var r=1,a=.5,i=.5,o=.5,s=0;s<n;s++)r<<=2,r+=e<a?t<i?0:1:t<i?2:3,o*=.5,a+=e<a?-o:o,i+=t<i?-o:o;return r}}},{"array-bounds":53,"binary-search-bounds":453,clamp:103,defined:149,dtype:154,"flatten-vertex-data":216,"is-obj":404,"math-log2":415,"parse-rect":442,"pick-by-alias":448}],455:[function(e,t,n){t.exports=function(e){for(var t=e.length,n=[],i=[],s=0;s<t;++s)for(var c=e[s],f=c.length,d=f-1,p=0;p<f;d=p++){var h=c[d],m=c[p];h[0]===m[0]?i.push([h,m]):n.push([h,m])}if(0===n.length)return 0===i.length?u:function(e){return function(t){return e(t[0],t[1])?0:1}}(l(i));var v=a(n),g=function(e,t){return function(n){var a=o.le(t,n[0]);if(a<0)return 1;var i=e[a];if(!i){if(!(a>0&&t[a]===n[0]))return 1;i=e[a-1]}for(var s=1;i;){var l=i.key,u=r(n,l[0],l[1]);if(l[0][0]<l[1][0])if(u<0)i=i.left;else{if(!(u>0))return 0;s=-1,i=i.right}else if(u>0)i=i.left;else{if(!(u<0))return 0;s=1,i=i.right}}return s}}(v.slabs,v.coordinates);return 0===i.length?g:function(e,t){return function(n){return e(n[0],n[1])?0:t(n)}}(l(i),g)};var r=e("robust-orientation")[3],a=e("slab-decomposition"),i=e("interval-tree-1d"),o=e("binary-search-bounds");function s(){return!0}function l(e){for(var t={},n=0;n<e.length;++n){var r=e[n],a=r[0][0],o=r[0][1],l=r[1][1],u=[Math.min(o,l),Math.max(o,l)];a in t?t[a].push(u):t[a]=[u]}for(var c={},f=Object.keys(t),n=0;n<f.length;++n){var d=t[f[n]];c[f[n]]=i(d)}return function(e){return function(t,n){var r=e[t];return!!r&&!!r.queryPoint(n,s)}}(c)}function u(e){return 1}},{"binary-search-bounds":79,"interval-tree-1d":397,"robust-orientation":486,"slab-decomposition":502}],456:[function(e,t,n){
/*
 * @copyright 2016 Sean Connelly (@voidqk), http://syntheti.cc
 * @license MIT
 * @preserve Project Home: https://github.com/voidqk/polybooljs
 */
var r,a=e("./lib/build-log"),i=e("./lib/epsilon"),o=e("./lib/intersecter"),s=e("./lib/segment-chainer"),l=e("./lib/segment-selector"),u=e("./lib/geojson"),c=!1,f=i();function d(e,t,n){var a=r.segments(e),i=r.segments(t),o=r.combine(a,i),s=n(o);return r.polygon(s)}r={buildLog:function(e){return!0===e?c=a():!1===e&&(c=!1),!1!==c&&c.list},epsilon:function(e){return f.epsilon(e)},segments:function(e){var t=o(!0,f,c);return e.regions.forEach(t.addRegion),{segments:t.calculate(e.inverted),inverted:e.inverted}},combine:function(e,t){var n=o(!1,f,c);return{combined:n.calculate(e.segments,e.inverted,t.segments,t.inverted),inverted1:e.inverted,inverted2:t.inverted}},selectUnion:function(e){return{segments:l.union(e.combined,c),inverted:e.inverted1||e.inverted2}},selectIntersect:function(e){return{segments:l.intersect(e.combined,c),inverted:e.inverted1&&e.inverted2}},selectDifference:function(e){return{segments:l.difference(e.combined,c),inverted:e.inverted1&&!e.inverted2}},selectDifferenceRev:function(e){return{segments:l.differenceRev(e.combined,c),inverted:!e.inverted1&&e.inverted2}},selectXor:function(e){return{segments:l.xor(e.combined,c),inverted:e.inverted1!==e.inverted2}},polygon:function(e){return{regions:s(e.segments,f,c),inverted:e.inverted}},polygonFromGeoJSON:function(e){return u.toPolygon(r,e)},polygonToGeoJSON:function(e){return u.fromPolygon(r,f,e)},union:function(e,t){return d(e,t,r.selectUnion)},intersect:function(e,t){return d(e,t,r.selectIntersect)},difference:function(e,t){return d(e,t,r.selectDifference)},differenceRev:function(e,t){return d(e,t,r.selectDifferenceRev)},xor:function(e,t){return d(e,t,r.selectXor)}},"object"==typeof window&&(window.PolyBool=r),t.exports=r},{"./lib/build-log":457,"./lib/epsilon":458,"./lib/geojson":459,"./lib/intersecter":460,"./lib/segment-chainer":462,"./lib/segment-selector":463}],457:[function(e,t,n){t.exports=function(){var e,t=0,n=!1;function r(t,n){return e.list.push({type:t,data:n?JSON.parse(JSON.stringify(n)):void 0}),e}return e={list:[],segmentId:function(){return t++},checkIntersection:function(e,t){return r("check",{seg1:e,seg2:t})},segmentChop:function(e,t){return r("div_seg",{seg:e,pt:t}),r("chop",{seg:e,pt:t})},statusRemove:function(e){return r("pop_seg",{seg:e})},segmentUpdate:function(e){return r("seg_update",{seg:e})},segmentNew:function(e,t){return r("new_seg",{seg:e,primary:t})},segmentRemove:function(e){return r("rem_seg",{seg:e})},tempStatus:function(e,t,n){return r("temp_status",{seg:e,above:t,below:n})},rewind:function(e){return r("rewind",{seg:e})},status:function(e,t,n){return r("status",{seg:e,above:t,below:n})},vert:function(t){return t===n?e:(n=t,r("vert",{x:t}))},log:function(e){return"string"!=typeof e&&(e=JSON.stringify(e,!1,"  ")),r("log",{txt:e})},reset:function(){return r("reset")},selected:function(e){return r("selected",{segs:e})},chainStart:function(e){return r("chain_start",{seg:e})},chainRemoveHead:function(e,t){return r("chain_rem_head",{index:e,pt:t})},chainRemoveTail:function(e,t){return r("chain_rem_tail",{index:e,pt:t})},chainNew:function(e,t){return r("chain_new",{pt1:e,pt2:t})},chainMatch:function(e){return r("chain_match",{index:e})},chainClose:function(e){return r("chain_close",{index:e})},chainAddHead:function(e,t){return r("chain_add_head",{index:e,pt:t})},chainAddTail:function(e,t){return r("chain_add_tail",{index:e,pt:t})},chainConnect:function(e,t){return r("chain_con",{index1:e,index2:t})},chainReverse:function(e){return r("chain_rev",{index:e})},chainJoin:function(e,t){return r("chain_join",{index1:e,index2:t})},done:function(){return r("done")}}}},{}],458:[function(e,t,n){t.exports=function(e){"number"!=typeof e&&(e=1e-10);var t={epsilon:function(t){return"number"==typeof t&&(e=t),e},pointAboveOrOnLine:function(t,n,r){var a=n[0],i=n[1],o=r[0],s=r[1],l=t[0],u=t[1];return(o-a)*(u-i)-(s-i)*(l-a)>=-e},pointBetween:function(t,n,r){var a=t[1]-n[1],i=r[0]-n[0],o=t[0]-n[0],s=r[1]-n[1],l=o*i+a*s;if(l<e)return!1;var u=i*i+s*s;return!(l-u>-e)},pointsSameX:function(t,n){return Math.abs(t[0]-n[0])<e},pointsSameY:function(t,n){return Math.abs(t[1]-n[1])<e},pointsSame:function(e,n){return t.pointsSameX(e,n)&&t.pointsSameY(e,n)},pointsCompare:function(e,n){return t.pointsSameX(e,n)?t.pointsSameY(e,n)?0:e[1]<n[1]?-1:1:e[0]<n[0]?-1:1},pointsCollinear:function(t,n,r){var a=t[0]-n[0],i=t[1]-n[1],o=n[0]-r[0],s=n[1]-r[1];return Math.abs(a*s-o*i)<e},linesIntersect:function(t,n,r,a){var i=n[0]-t[0],o=n[1]-t[1],s=a[0]-r[0],l=a[1]-r[1],u=i*l-o*s;if(Math.abs(u)<e)return!1;var c=t[0]-r[0],f=t[1]-r[1],d=(s*f-l*c)/u,p=(i*f-o*c)/u,h={alongA:0,alongB:0,pt:[t[0]+d*i,t[1]+d*o]};return h.alongA=d<=-e?-2:d<e?-1:d-1<=-e?0:d-1<e?1:2,h.alongB=p<=-e?-2:p<e?-1:p-1<=-e?0:p-1<e?1:2,h},pointInsideRegion:function(t,n){for(var r=t[0],a=t[1],i=n[n.length-1][0],o=n[n.length-1][1],s=!1,l=0;l<n.length;l++){var u=n[l][0],c=n[l][1];c-a>e!=o-a>e&&(i-u)*(a-c)/(o-c)+u-r>e&&(s=!s),i=u,o=c}return s}};return t}},{}],459:[function(e,t,n){var r={toPolygon:function(e,t){function n(t){if(t.length<=0)return e.segments({inverted:!1,regions:[]});function n(t){var n=t.slice(0,t.length-1);return e.segments({inverted:!1,regions:[n]})}for(var r=n(t[0]),a=1;a<t.length;a++)r=e.selectDifference(e.combine(r,n(t[a])));return r}if("Polygon"===t.type)return e.polygon(n(t.coordinates));if("MultiPolygon"===t.type){for(var r=e.segments({inverted:!1,regions:[]}),a=0;a<t.coordinates.length;a++)r=e.selectUnion(e.combine(r,n(t.coordinates[a])));return e.polygon(r)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(e,t,n){function r(e,n){return t.pointInsideRegion([.5*(e[0][0]+e[1][0]),.5*(e[0][1]+e[1][1])],n)}function a(e){return{region:e,children:[]}}n=e.polygon(e.segments(n));var i=a(null);function o(e,t){for(var n=0;n<e.children.length;n++){var i=e.children[n];if(r(t,i.region))return void o(i,t)}for(var s=a(t),n=0;n<e.children.length;n++){var i=e.children[n];r(i.region,t)&&(s.children.push(i),e.children.splice(n,1),n--)}e.children.push(s)}for(var s=0;s<n.regions.length;s++){var l=n.regions[s];l.length<3||o(i,l)}function u(e,t){for(var n=0,r=e[e.length-1][0],a=e[e.length-1][1],i=[],o=0;o<e.length;o++){var s=e[o][0],l=e[o][1];i.push([s,l]),n+=l*r-s*a,r=s,a=l}var u=n<0;return u!==t&&i.reverse(),i.push([i[0][0],i[0][1]]),i}var c=[];function f(e){var t=[u(e.region,!1)];c.push(t);for(var n=0;n<e.children.length;n++)t.push(d(e.children[n]))}function d(e){for(var t=0;t<e.children.length;t++)f(e.children[t]);return u(e.region,!0)}for(var s=0;s<i.children.length;s++)f(i.children[s]);return c.length<=0?{type:"Polygon",coordinates:[]}:1==c.length?{type:"Polygon",coordinates:c[0]}:{type:"MultiPolygon",coordinates:c}}};t.exports=r},{}],460:[function(e,t,n){var r=e("./linked-list");t.exports=function(e,t,n){function a(e,t){return{id:n?n.segmentId():-1,start:e,end:t,myFill:{above:null,below:null},otherFill:null}}function i(e,t,r){return{id:n?n.segmentId():-1,start:e,end:t,myFill:{above:r.myFill.above,below:r.myFill.below},otherFill:null}}var o=r.create();function s(e,n){o.insertBefore(e,function(r){var a=function(e,n,r,a,i,o){var s=t.pointsCompare(n,i);return 0!==s?s:t.pointsSame(r,o)?0:e!==a?e?1:-1:t.pointAboveOrOnLine(r,a?i:o,a?o:i)?1:-1}(e.isStart,e.pt,n,r.isStart,r.pt,r.other.pt);return a<0})}function l(e,t){var n=function(e,t){var n=r.node({isStart:!0,pt:e.start,seg:e,primary:t,other:null,status:null});return s(n,e.end),n}(e,t);return function(e,t,n){var a=r.node({isStart:!1,pt:t.end,seg:t,primary:n,other:e,status:null});e.other=a,s(a,e.pt)}(n,e,t),n}function u(e,t){var r=i(t,e.seg.end,e.seg);return function(e,t){n&&n.segmentChop(e.seg,t),e.other.remove(),e.seg.end=t,e.other.pt=t,s(e.other,e.pt)}(e,t),l(r,e.primary)}function c(a,i){var s=r.create();function l(e){return s.findTransition(function(n){var r=function(e,n){var r=e.seg.start,a=e.seg.end,i=n.seg.start,o=n.seg.end;return t.pointsCollinear(r,i,o)?t.pointsCollinear(a,i,o)?1:t.pointAboveOrOnLine(a,i,o)?1:-1:t.pointAboveOrOnLine(r,i,o)?1:-1}(e,n.ev);return r>0})}function c(e,r){var a=e.seg,i=r.seg,o=a.start,s=a.end,l=i.start,c=i.end;n&&n.checkIntersection(a,i);var f=t.linesIntersect(o,s,l,c);if(!1===f){if(!t.pointsCollinear(o,s,l))return!1;if(t.pointsSame(o,c)||t.pointsSame(s,l))return!1;var d=t.pointsSame(o,l),p=t.pointsSame(s,c);if(d&&p)return r;var h=!d&&t.pointBetween(o,l,c),m=!p&&t.pointBetween(s,l,c);if(d)return m?u(r,s):u(e,c),r;h&&(p||(m?u(r,s):u(e,c)),u(r,o))}else 0===f.alongA&&(-1===f.alongB?u(e,l):0===f.alongB?u(e,f.pt):1===f.alongB&&u(e,c)),0===f.alongB&&(-1===f.alongA?u(r,o):0===f.alongA?u(r,f.pt):1===f.alongA&&u(r,s));return!1}for(var f=[];!o.isEmpty();){var d=o.getHead();if(n&&n.vert(d.pt[0]),d.isStart){n&&n.segmentNew(d.seg,d.primary);var p=l(d),h=p.before?p.before.ev:null,m=p.after?p.after.ev:null;function v(){if(h){var e=c(d,h);if(e)return e}return!!m&&c(d,m)}n&&n.tempStatus(d.seg,!!h&&h.seg,!!m&&m.seg);var g,y,b=v();if(b&&(e?(y=null===d.seg.myFill.below||d.seg.myFill.above!==d.seg.myFill.below)&&(b.seg.myFill.above=!b.seg.myFill.above):b.seg.otherFill=d.seg.myFill,n&&n.segmentUpdate(b.seg),d.other.remove(),d.remove()),o.getHead()!==d){n&&n.rewind(d.seg);continue}e?(y=null===d.seg.myFill.below||d.seg.myFill.above!==d.seg.myFill.below,d.seg.myFill.below=m?m.seg.myFill.above:a,d.seg.myFill.above=y?!d.seg.myFill.below:d.seg.myFill.below):null===d.seg.otherFill&&(g=m?d.primary===m.primary?m.seg.otherFill.above:m.seg.myFill.above:d.primary?i:a,d.seg.otherFill={above:g,below:g}),n&&n.status(d.seg,!!h&&h.seg,!!m&&m.seg),d.other.status=p.insert(r.node({ev:d}))}else{var x=d.status;if(null===x)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(s.exists(x.prev)&&s.exists(x.next)&&c(x.prev.ev,x.next.ev),n&&n.statusRemove(x.ev.seg),x.remove(),!d.primary){var _=d.seg.myFill;d.seg.myFill=d.seg.otherFill,d.seg.otherFill=_}f.push(d.seg)}o.getHead().remove()}return n&&n.done(),f}return e?{addRegion:function(e){for(var n,r=e[e.length-1],i=0;i<e.length;i++){n=r,r=e[i];var o=t.pointsCompare(n,r);0!==o&&l(a(o<0?n:r,o<0?r:n),!0)}},calculate:function(e){return c(e,!1)}}:{calculate:function(e,t,n,r){return e.forEach(function(e){l(i(e.start,e.end,e),!0)}),n.forEach(function(e){l(i(e.start,e.end,e),!1)}),c(t,r)}}}},{"./linked-list":461}],461:[function(e,t,n){t.exports={create:function(){var e={root:{root:!0,next:null},exists:function(t){return null!==t&&t!==e.root},isEmpty:function(){return null===e.root.next},getHead:function(){return e.root.next},insertBefore:function(t,n){for(var r=e.root,a=e.root.next;null!==a;){if(n(a))return t.prev=a.prev,t.next=a,a.prev.next=t,void(a.prev=t);r=a,a=a.next}r.next=t,t.prev=r,t.next=null},findTransition:function(t){for(var n=e.root,r=e.root.next;null!==r&&!t(r);)n=r,r=r.next;return{before:n===e.root?null:n,after:r,insert:function(e){return e.prev=n,e.next=r,n.next=e,null!==r&&(r.prev=e),e}}}};return e},node:function(e){return e.prev=null,e.next=null,e.remove=function(){e.prev.next=e.next,e.next&&(e.next.prev=e.prev),e.prev=null,e.next=null},e}}},{}],462:[function(e,t,n){t.exports=function(e,t,n){var r=[],a=[];return e.forEach(function(e){var i=e.start,o=e.end;if(t.pointsSame(i,o))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{n&&n.chainStart(e);for(var s={index:0,matches_head:!1,matches_pt1:!1},l={index:0,matches_head:!1,matches_pt1:!1},u=s,c=0;c<r.length;c++){var f=(v=r[c])[0],d=(v[1],v[v.length-1]);if(v[v.length-2],t.pointsSame(f,i)){if(k(c,!0,!0))break}else if(t.pointsSame(f,o)){if(k(c,!0,!1))break}else if(t.pointsSame(d,i)){if(k(c,!1,!0))break}else if(t.pointsSame(d,o)&&k(c,!1,!1))break}if(u===s)return r.push([i,o]),void(n&&n.chainNew(i,o));if(u===l){n&&n.chainMatch(s.index);var p=s.index,h=s.matches_pt1?o:i,m=s.matches_head,v=r[p],g=m?v[0]:v[v.length-1],y=m?v[1]:v[v.length-2],b=m?v[v.length-1]:v[0],x=m?v[v.length-2]:v[1];return t.pointsCollinear(y,g,h)&&(m?(n&&n.chainRemoveHead(s.index,h),v.shift()):(n&&n.chainRemoveTail(s.index,h),v.pop()),g=y),t.pointsSame(b,h)?(r.splice(p,1),t.pointsCollinear(x,b,g)&&(m?(n&&n.chainRemoveTail(s.index,g),v.pop()):(n&&n.chainRemoveHead(s.index,g),v.shift())),n&&n.chainClose(s.index),void a.push(v)):void(m?(n&&n.chainAddHead(s.index,h),v.unshift(h)):(n&&n.chainAddTail(s.index,h),v.push(h)))}var _=s.index,w=l.index;n&&n.chainConnect(_,w);var T=r[_].length<r[w].length;s.matches_head?l.matches_head?T?(C(_),E(_,w)):(C(w),E(w,_)):E(w,_):l.matches_head?E(_,w):T?(C(_),E(w,_)):(C(w),E(_,w))}function k(e,t,n){return u.index=e,u.matches_head=t,u.matches_pt1=n,u===s?(u=l,!1):(u=null,!0)}function C(e){n&&n.chainReverse(e),r[e].reverse()}function E(e,a){var i=r[e],o=r[a],s=i[i.length-1],l=i[i.length-2],u=o[0],c=o[1];t.pointsCollinear(l,s,u)&&(n&&n.chainRemoveTail(e,s),i.pop(),s=l),t.pointsCollinear(s,u,c)&&(n&&n.chainRemoveHead(a,u),o.shift()),n&&n.chainJoin(e,a),r[e]=i.concat(o),r.splice(a,1)}}),a}},{}],463:[function(e,t,n){function r(e,t,n){var r=[];return e.forEach(function(e){var a=(e.myFill.above?8:0)+(e.myFill.below?4:0)+(e.otherFill&&e.otherFill.above?2:0)+(e.otherFill&&e.otherFill.below?1:0);0!==t[a]&&r.push({id:n?n.segmentId():-1,start:e.start,end:e.end,myFill:{above:1===t[a],below:2===t[a]},otherFill:null})}),n&&n.selected(r),r}var a={union:function(e,t){return r(e,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],t)},intersect:function(e,t){return r(e,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],t)},difference:function(e,t){return r(e,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],t)},differenceRev:function(e,t){return r(e,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],t)},xor:function(e,t){return r(e,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],t)}};t.exports=a},{}],464:[function(e,t,n){"use strict";var r=new Float64Array(4),a=new Float64Array(4),i=new Float64Array(4);t.exports=function(e,t,n,o,s){r.length<o.length&&(r=new Float64Array(o.length),a=new Float64Array(o.length),i=new Float64Array(o.length));for(var l=0;l<o.length;++l)r[l]=e[l]-o[l],a[l]=t[l]-e[l],i[l]=n[l]-e[l];for(var u=0,c=0,f=0,d=0,p=0,h=0,l=0;l<o.length;++l){var m=a[l],v=i[l],g=r[l];u+=m*m,c+=m*v,f+=v*v,d+=g*m,p+=g*v,h+=g*g}var y,b,x,_,w,T=Math.abs(u*f-c*c),k=c*p-f*d,C=c*d-u*p;if(k+C<=T)if(k<0)C<0&&d<0?(C=0,-d>=u?(k=1,y=u+2*d+h):y=d*(k=-d/u)+h):(k=0,p>=0?(C=0,y=h):-p>=f?(C=1,y=f+2*p+h):y=p*(C=-p/f)+h);else if(C<0)C=0,d>=0?(k=0,y=h):-d>=u?(k=1,y=u+2*d+h):y=d*(k=-d/u)+h;else{var E=1/T;y=(k*=E)*(u*k+c*(C*=E)+2*d)+C*(c*k+f*C+2*p)+h}else k<0?(x=f+p)>(b=c+d)?(_=x-b)>=(w=u-2*c+f)?(k=1,C=0,y=u+2*d+h):y=(k=_/w)*(u*k+c*(C=1-k)+2*d)+C*(c*k+f*C+2*p)+h:(k=0,x<=0?(C=1,y=f+2*p+h):p>=0?(C=0,y=h):y=p*(C=-p/f)+h):C<0?(x=u+d)>(b=c+p)?(_=x-b)>=(w=u-2*c+f)?(C=1,k=0,y=f+2*p+h):y=(k=1-(C=_/w))*(u*k+c*C+2*d)+C*(c*k+f*C+2*p)+h:(C=0,x<=0?(k=1,y=u+2*d+h):d>=0?(k=0,y=h):y=d*(k=-d/u)+h):(_=f+p-c-d)<=0?(k=0,C=1,y=f+2*p+h):_>=(w=u-2*c+f)?(k=1,C=0,y=u+2*d+h):y=(k=_/w)*(u*k+c*(C=1-k)+2*d)+C*(c*k+f*C+2*p)+h;for(var M=1-k-C,l=0;l<o.length;++l)s[l]=M*e[l]+k*t[l]+C*n[l];return y<0?0:y}},{}],465:[function(e,t,n){var r,a,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function l(e){if(r===setTimeout)return setTimeout(e,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(e){r=o}try{a="function"==typeof clearTimeout?clearTimeout:s}catch(e){a=s}}();var u,c=[],f=!1,d=-1;function p(){f&&u&&(f=!1,u.length?c=u.concat(c):d=-1,c.length&&h())}function h(){if(!f){var e=l(p);f=!0;for(var t=c.length;t;){for(u=c,c=[];++d<t;)u&&u[d].run();d=-1,t=c.length}u=null,f=!1,function(e){if(a===clearTimeout)return clearTimeout(e);if((a===s||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(e);try{a(e)}catch(t){try{return a.call(null,e)}catch(t){return a.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function v(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new m(e,t)),1!==c.length||f||l(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],466:[function(e,t,n){t.exports=e("gl-quat/slerp")},{"gl-quat/slerp":280}],467:[function(e,n,r){(function(t){for(var r=e("performance-now"),a="undefined"==typeof window?t:window,i=["moz","webkit"],o="AnimationFrame",s=a["request"+o],l=a["cancel"+o]||a["cancelRequest"+o],u=0;!s&&u<i.length;u++)s=a[i[u]+"Request"+o],l=a[i[u]+"Cancel"+o]||a[i[u]+"CancelRequest"+o];if(!s||!l){var c=0,f=0,d=[];s=function(e){if(0===d.length){var t=r(),n=Math.max(0,1e3/60-(t-c));c=n+t,setTimeout(function(){var e=d.slice(0);d.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(c)}catch(e){setTimeout(function(){throw e},0)}},Math.round(n))}return d.push({handle:++f,callback:e,cancelled:!1}),f},l=function(e){for(var t=0;t<d.length;t++)d[t].handle===e&&(d[t].cancelled=!0)}}n.exports=function(e){return s.call(a,e)},n.exports.cancel=function(){l.apply(a,arguments)},n.exports.polyfill=function(e){e||(e=a),e.requestAnimationFrame=s,e.cancelAnimationFrame=l}}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"performance-now":445}],468:[function(e,t,n){"use strict";var r=e("big-rat/add");t.exports=function(e,t){for(var n=e.length,a=new Array(n),i=0;i<n;++i)a[i]=r(e[i],t[i]);return a}},{"big-rat/add":63}],469:[function(e,t,n){"use strict";t.exports=function(e){for(var t=new Array(e.length),n=0;n<e.length;++n)t[n]=r(e[n]);return t};var r=e("big-rat")},{"big-rat":66}],470:[function(e,t,n){"use strict";var r=e("big-rat"),a=e("big-rat/mul");t.exports=function(e,t){for(var n=r(t),i=e.length,o=new Array(i),s=0;s<i;++s)o[s]=a(e[s],n);return o}},{"big-rat":66,"big-rat/mul":75}],471:[function(e,t,n){"use strict";var r=e("big-rat/sub");t.exports=function(e,t){for(var n=e.length,a=new Array(n),i=0;i<n;++i)a[i]=r(e[i],t[i]);return a}},{"big-rat/sub":77}],472:[function(e,t,n){"use strict";var r=e("compare-cell"),a=e("compare-oriented-cell"),i=e("cell-orientation");t.exports=function(e){e.sort(a);for(var t=e.length,n=0,o=0;o<t;++o){var s=e[o],l=i(s);if(0!==l){if(n>0){var u=e[n-1];if(0===r(s,u)&&i(u)!==l){n-=1;continue}}e[n++]=s}}return e.length=n,e}},{"cell-orientation":100,"compare-cell":116,"compare-oriented-cell":117}],473:[function(e,t,n){"use strict";var r=e("array-bounds"),a=e("color-normalize"),i=e("update-diff"),o=e("pick-by-alias"),s=e("object-assign"),l=e("flatten-vertex-data"),u=e("to-float32"),c=u.float32,f=u.fract32;t.exports=function(e,t){if("function"==typeof e?(t||(t={}),t.regl=e):t=e,t.length&&(t.positions=t),!(e=t.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var n,u,p,h,m,v,g=e._gl,y={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},b=[];return h=e.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),u=e.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),p=e.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),m=e.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),v=e.buffer({usage:"static",type:"float",data:d}),T(t),n=e({vert:"\n\t\tprecision highp float;\n\n\t\tattribute vec2 position, positionFract;\n\t\tattribute vec4 error;\n\t\tattribute vec4 color;\n\n\t\tattribute vec2 direction, lineOffset, capOffset;\n\n\t\tuniform vec4 viewport;\n\t\tuniform float lineWidth, capSize;\n\t\tuniform vec2 scale, scaleFract, translate, translateFract;\n\n\t\tvarying vec4 fragColor;\n\n\t\tvoid main() {\n\t\t\tfragColor = color / 255.;\n\n\t\t\tvec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;\n\n\t\t\tvec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;\n\n\t\t\tvec2 position = position + dxy;\n\n\t\t\tvec2 pos = (position + translate) * scale\n\t\t\t\t+ (positionFract + translateFract) * scale\n\t\t\t\t+ (position + translate) * scaleFract\n\t\t\t\t+ (positionFract + translateFract) * scaleFract;\n\n\t\t\tpos += pixelOffset / viewport.zw;\n\n\t\t\tgl_Position = vec4(pos * 2. - 1., 0, 1);\n\t\t}\n\t\t",frag:"\n\t\tprecision mediump float;\n\n\t\tvarying vec4 fragColor;\n\n\t\tuniform float opacity;\n\n\t\tvoid main() {\n\t\t\tgl_FragColor = fragColor;\n\t\t\tgl_FragColor.a *= opacity;\n\t\t}\n\t\t",uniforms:{range:e.prop("range"),lineWidth:e.prop("lineWidth"),capSize:e.prop("capSize"),opacity:e.prop("opacity"),scale:e.prop("scale"),translate:e.prop("translate"),scaleFract:e.prop("scaleFract"),translateFract:e.prop("translateFract"),viewport:function(e,t){return[t.viewport.x,t.viewport.y,e.viewportWidth,e.viewportHeight]}},attributes:{color:{buffer:h,offset:function(e,t){return 4*t.offset},divisor:1},position:{buffer:u,offset:function(e,t){return 8*t.offset},divisor:1},positionFract:{buffer:p,offset:function(e,t){return 8*t.offset},divisor:1},error:{buffer:m,offset:function(e,t){return 16*t.offset},divisor:1},direction:{buffer:v,stride:24,offset:0},lineOffset:{buffer:v,stride:24,offset:8},capOffset:{buffer:v,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:e.prop("viewport")},viewport:e.prop("viewport"),stencil:!1,instances:e.prop("count"),count:d.length}),s(x,{update:T,draw:_,destroy:k,regl:e,gl:g,canvas:g.canvas,groups:b}),x;function x(e){e?T(e):null===e&&k(),_()}function _(t){if("number"==typeof t)return w(t);t&&!Array.isArray(t)&&(t=[t]),e._refresh(),b.forEach(function(e,n){e&&(t&&(t[n]?e.draw=!0:e.draw=!1),e.draw?w(n):e.draw=!0)})}function w(e){"number"==typeof e&&(e=b[e]),null!=e&&e&&e.count&&e.color&&e.opacity&&e.positions&&e.positions.length>1&&(e.scaleRatio=[e.scale[0]*e.viewport.width,e.scale[1]*e.viewport.height],n(e),e.after&&e.after(e))}function T(e){if(e){null!=e.length?"number"==typeof e[0]&&(e=[{positions:e}]):Array.isArray(e)||(e=[e]);var t=0,n=0;if(x.groups=b=e.map(function(e,u){var c=b[u];return e?("function"==typeof e?e={after:e}:"number"==typeof e[0]&&(e={positions:e}),e=o(e,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),c||(b[u]=c={id:u,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},e=s({},y,e)),i(c,e,[{lineWidth:function(e){return.5*+e},capSize:function(e){return.5*+e},opacity:parseFloat,errors:function(e){return e=l(e),n+=e.length,e},positions:function(e,n){return e=l(e,"float64"),n.count=Math.floor(e.length/2),n.bounds=r(e,2),n.offset=t,t+=n.count,e}},{color:function(e,t){var n=t.count;if(e||(e="transparent"),!Array.isArray(e)||"number"==typeof e[0]){var r=e;e=Array(n);for(var i=0;i<n;i++)e[i]=r}if(e.length<n)throw Error("Not enough colors");for(var o=new Uint8Array(4*n),s=0;s<n;s++){var l=a(e[s],"uint8");o.set(l,4*s)}return o},range:function(e,t,n){var r=t.bounds;return e||(e=r),t.scale=[1/(e[2]-e[0]),1/(e[3]-e[1])],t.translate=[-e[0],-e[1]],t.scaleFract=f(t.scale),t.translateFract=f(t.translate),e},viewport:function(e){var t;return Array.isArray(e)?t={x:e[0],y:e[1],width:e[2]-e[0],height:e[3]-e[1]}:e?(t={x:e.x||e.left||0,y:e.y||e.top||0},e.right?t.width=e.right-t.x:t.width=e.w||e.width||0,e.bottom?t.height=e.bottom-t.y:t.height=e.h||e.height||0):t={x:0,y:0,width:g.drawingBufferWidth,height:g.drawingBufferHeight},t}}]),c):c}),t||n){var d=b.reduce(function(e,t,n){return e+(t?t.count:0)},0),v=new Float64Array(2*d),_=new Uint8Array(4*d),w=new Float32Array(4*d);b.forEach(function(e,t){if(e){var n=e.positions,r=e.count,a=e.offset,i=e.color,o=e.errors;r&&(_.set(i,4*a),w.set(o,4*a),v.set(n,2*a))}}),u(c(v)),p(f(v)),h(_),m(w)}}}function k(){u.destroy(),p.destroy(),h.destroy(),m.destroy(),v.destroy()}};var d=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]]},{"array-bounds":53,"color-normalize":108,"flatten-vertex-data":216,"object-assign":437,"pick-by-alias":448,"to-float32":515,"update-diff":526}],474:[function(e,t,n){"use strict";var r=e("color-normalize"),a=e("array-bounds"),i=e("object-assign"),o=e("glslify"),s=e("pick-by-alias"),l=e("flatten-vertex-data"),u=e("earcut"),c=e("array-normalize"),f=e("to-float32"),d=f.float32,p=f.fract32,h=e("es6-weak-map"),m=e("parse-rect");function v(e,t){if(!(this instanceof v))return new v(e,t);if("function"==typeof e?(t||(t={}),t.regl=e):t=e,t.length&&(t.positions=t),!(e=t.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=e._gl,this.regl=e,this.passes=[],this.shaders=v.shaders.has(e)?v.shaders.get(e):v.shaders.set(e,v.createShaders(e)).get(e),this.update(t)}t.exports=v,v.dashMult=2,v.maxPatternLength=256,v.precisionThreshold=3e6,v.maxPoints=1e4,v.maxLines=2048,v.shaders=new h,v.createShaders=function(e){var t,n=e.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),r={primitive:"triangle strip",instances:e.prop("count"),count:4,offset:0,uniforms:{miterMode:function(e,t){return"round"===t.join?2:1},miterLimit:e.prop("miterLimit"),scale:e.prop("scale"),scaleFract:e.prop("scaleFract"),translateFract:e.prop("translateFract"),translate:e.prop("translate"),thickness:e.prop("thickness"),dashPattern:e.prop("dashTexture"),opacity:e.prop("opacity"),pixelRatio:e.context("pixelRatio"),id:e.prop("id"),dashSize:e.prop("dashLength"),viewport:function(e,t){return[t.viewport.x,t.viewport.y,e.viewportWidth,e.viewportHeight]},depth:e.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(e,t){return!t.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:e.prop("viewport")},viewport:e.prop("viewport")},a=e(i({vert:o(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;\nattribute vec4 color;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {\n\t// the order is important\n\treturn position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n}\n\nvoid main() {\n\tfloat lineStart = 1. - lineEnd;\n\tfloat lineOffset = lineTop * 2. - 1.;\n\n\tvec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);\n\ttangent = normalize(diff * scale * viewport.zw);\n\tvec2 normal = vec2(-tangent.y, tangent.x);\n\n\tvec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart\n\t\t+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd\n\n\t\t+ thickness * normal * .5 * lineOffset / viewport.zw;\n\n\tgl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor = color / 255.;\n}\n"]),frag:o(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D dashPattern;\n\nuniform float dashSize, pixelRatio, thickness, opacity, id;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvoid main() {\n\tfloat alpha = 1.;\n\n\tfloat t = fract(dot(tangent, gl_FragCoord.xy) / dashSize) * .5 + .25;\n\tfloat dash = texture2D(dashPattern, vec2(t, .5)).r;\n\n\tgl_FragColor = fragColor;\n\tgl_FragColor.a *= alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:n,divisor:0,stride:8,offset:0},lineTop:{buffer:n,divisor:0,stride:8,offset:4},aCoord:{buffer:e.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:e.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:e.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:e.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:e.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},r));try{t=e(i({cull:{enable:!0,face:"back"},vert:o(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, nextCoord, prevCoord;\nattribute vec4 aColor, bColor;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, translate;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\nuniform float miterLimit, miterMode;\n\nvarying vec4 fragColor;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 tangent;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nconst float REVERSE_THRESHOLD = -.875;\nconst float MIN_DIFF = 1e-6;\n\n// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead\n// TODO: precalculate dot products, normalize things beforehead etc.\n// TODO: refactor to rectangular algorithm\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff = b - a;\n\tvec2 perp = normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nbool isNaN( float val ){\n  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;\n}\n\nvoid main() {\n\tvec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;\n\n  vec2 adjustedScale;\n  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;\n  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;\n\n  vec2 scaleRatio = adjustedScale * viewport.zw;\n\tvec2 normalWidth = thickness / scaleRatio;\n\n\tfloat lineStart = 1. - lineEnd;\n\tfloat lineBot = 1. - lineTop;\n\n\tfragColor = (lineStart * aColor + lineEnd * bColor) / 255.;\n\n\tif (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;\n\n\tif (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);\n\tif (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);\n\n\tvec2 prevDiff = aCoord - prevCoord;\n\tvec2 currDiff = bCoord - aCoord;\n\tvec2 nextDiff = nextCoord - bCoord;\n\n\tvec2 prevTangent = normalize(prevDiff * scaleRatio);\n\tvec2 currTangent = normalize(currDiff * scaleRatio);\n\tvec2 nextTangent = normalize(nextDiff * scaleRatio);\n\n\tvec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);\n\tvec2 currNormal = vec2(-currTangent.y, currTangent.x);\n\tvec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);\n\n\tvec2 startJoinDirection = normalize(prevTangent - currTangent);\n\tvec2 endJoinDirection = normalize(currTangent - nextTangent);\n\n\t// collapsed/unidirectional segment cases\n\t// FIXME: there should be more elegant solution\n\tvec2 prevTanDiff = abs(prevTangent - currTangent);\n\tvec2 nextTanDiff = abs(nextTangent - currTangent);\n\tif (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {\n\t\tstartJoinDirection = currNormal;\n\t}\n\tif (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {\n\t\tendJoinDirection = currNormal;\n\t}\n\tif (aCoord == bCoord) {\n\t\tendJoinDirection = startJoinDirection;\n\t\tcurrNormal = prevNormal;\n\t\tcurrTangent = prevTangent;\n\t}\n\n\ttangent = currTangent;\n\n\t//calculate join shifts relative to normals\n\tfloat startJoinShift = dot(currNormal, startJoinDirection);\n\tfloat endJoinShift = dot(currNormal, endJoinDirection);\n\n\tfloat startMiterRatio = abs(1. / startJoinShift);\n\tfloat endMiterRatio = abs(1. / endJoinShift);\n\n\tvec2 startJoin = startJoinDirection * startMiterRatio;\n\tvec2 endJoin = endJoinDirection * endMiterRatio;\n\n\tvec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;\n\tstartTopJoin = sign(startJoinShift) * startJoin * .5;\n\tstartBotJoin = -startTopJoin;\n\n\tendTopJoin = sign(endJoinShift) * endJoin * .5;\n\tendBotJoin = -endTopJoin;\n\n\tvec2 aTopCoord = aCoord + normalWidth * startTopJoin;\n\tvec2 bTopCoord = bCoord + normalWidth * endTopJoin;\n\tvec2 aBotCoord = aCoord + normalWidth * startBotJoin;\n\tvec2 bBotCoord = bCoord + normalWidth * endBotJoin;\n\n\t//miter anti-clipping\n\tfloat baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));\n\tfloat abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));\n\n\t//prevent close to reverse direction switch\n\tbool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\tbool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\n\tif (prevReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);\n\t\taBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\taTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {\n\t\t//handle miter clipping\n\t\tbTopCoord -= normalWidth * endTopJoin;\n\t\tbTopCoord += normalize(endTopJoin * normalWidth) * baClipping;\n\t}\n\n\tif (nextReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);\n\t\tbBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\tbTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {\n\t\t//handle miter clipping\n\t\taBotCoord -= normalWidth * startBotJoin;\n\t\taBotCoord += normalize(startBotJoin * normalWidth) * abClipping;\n\t}\n\n\tvec2 aTopPosition = (aTopCoord) * adjustedScale + translate;\n\tvec2 aBotPosition = (aBotCoord) * adjustedScale + translate;\n\n\tvec2 bTopPosition = (bTopCoord) * adjustedScale + translate;\n\tvec2 bBotPosition = (bBotCoord) * adjustedScale + translate;\n\n\t//position is normalized 0..1 coord on the screen\n\tvec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;\n\n\tstartCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\tendCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\n\tgl_Position = vec4(position  * 2.0 - 1.0, depth, 1);\n\n\tenableStartMiter = step(dot(currTangent, prevTangent), .5);\n\tenableEndMiter = step(dot(currTangent, nextTangent), .5);\n\n\t//bevel miter cutoffs\n\tif (miterMode == 1.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tvec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;\n\t\t\tstartCutoff = vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff += viewport.xyxy;\n\t\t\tstartCutoff += startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tvec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;\n\t\t\tendCutoff = vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff += viewport.xyxy;\n\t\t\tendCutoff += endMiterWidth.xyxy;\n\t\t}\n\t}\n\n\t//round miter cutoffs\n\telse if (miterMode == 2.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tvec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;\n\t\t\tstartCutoff = vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff += viewport.xyxy;\n\t\t\tstartCutoff += startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tvec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;\n\t\t\tendCutoff = vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff += viewport.xyxy;\n\t\t\tendCutoff += endMiterWidth.xyxy;\n\t\t}\n\t}\n}\n"]),frag:o(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D dashPattern;\nuniform float dashSize, pixelRatio, thickness, opacity, id, miterMode;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff = b - a;\n\tvec2 perp = normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nvoid main() {\n\tfloat alpha = 1., distToStart, distToEnd;\n\tfloat cutoff = thickness * .5;\n\n\t//bevel miter\n\tif (miterMode == 1.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tdistToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart < -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *= min(max(distToStart + 1., 0.), 1.);\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tdistToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd < -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *= min(max(distToEnd + 1., 0.), 1.);\n\t\t}\n\t}\n\n\t// round miter\n\telse if (miterMode == 2.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tdistToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart < 0.) {\n\t\t\t\tfloat radius = length(gl_FragCoord.xy - startCoord);\n\n\t\t\t\tif(radius > cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tdistToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd < 0.) {\n\t\t\t\tfloat radius = length(gl_FragCoord.xy - endCoord);\n\n\t\t\t\tif(radius > cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\t}\n\n\tfloat t = fract(dot(tangent, gl_FragCoord.xy) / dashSize) * .5 + .25;\n\tfloat dash = texture2D(dashPattern, vec2(t, .5)).r;\n\n\tgl_FragColor = fragColor;\n\tgl_FragColor.a *= alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:n,divisor:0,stride:8,offset:0},lineTop:{buffer:n,divisor:0,stride:8,offset:4},aColor:{buffer:e.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:e.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:e.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:e.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:e.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:e.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},r))}catch(e){t=a}var s=e({primitive:"triangle",elements:function(e,t){return t.triangles},offset:0,vert:o(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 position, positionFract;\n\nuniform vec4 color;\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio, id;\nuniform vec4 viewport;\nuniform float opacity;\n\nvarying vec4 fragColor;\n\nconst float MAX_LINES = 256.;\n\nvoid main() {\n\tfloat depth = (MAX_LINES - 4. - id) / (MAX_LINES);\n\n\tvec2 position = position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n\n\tgl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor = color / 255.;\n\tfragColor.a *= opacity;\n}\n"]),frag:o(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n\tgl_FragColor = fragColor;\n}\n"]),uniforms:{scale:e.prop("scale"),color:e.prop("fill"),scaleFract:e.prop("scaleFract"),translateFract:e.prop("translateFract"),translate:e.prop("translate"),opacity:e.prop("opacity"),pixelRatio:e.context("pixelRatio"),id:e.prop("id"),viewport:function(e,t){return[t.viewport.x,t.viewport.y,e.viewportWidth,e.viewportHeight]}},attributes:{position:{buffer:e.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:e.prop("positionFractBuffer"),stride:8,offset:8}},blend:r.blend,depth:{enable:!1},scissor:r.scissor,stencil:r.stencil,viewport:r.viewport});return{fill:s,rect:a,miter:t}},v.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},v.prototype.render=function(){for(var e,t=[],n=arguments.length;n--;)t[n]=arguments[n];t.length&&(e=this).update.apply(e,t),this.draw()},v.prototype.draw=function(){for(var e=this,t=[],n=arguments.length;n--;)t[n]=arguments[n];return(t.length?t:this.passes).forEach(function(t,n){var r;if(t&&Array.isArray(t))return(r=e).draw.apply(r,t);"number"==typeof t&&(t=e.passes[t]),t&&t.count>1&&t.opacity&&(e.regl._refresh(),t.fill&&t.triangles&&t.triangles.length>2&&e.shaders.fill(t),t.thickness&&(t.scale[0]*t.viewport.width>v.precisionThreshold||t.scale[1]*t.viewport.height>v.precisionThreshold?e.shaders.rect(t):"rect"===t.join||!t.join&&(t.thickness<=2||t.count>=v.maxPoints)?e.shaders.rect(t):e.shaders.miter(t)))}),this},v.prototype.update=function(e){var t=this;if(e){null!=e.length?"number"==typeof e[0]&&(e=[{positions:e}]):Array.isArray(e)||(e=[e]);var n=this.regl,o=this.gl;if(e.forEach(function(e,f){var h=t.passes[f];if(void 0!==e)if(null!==e){if("number"==typeof e[0]&&(e={positions:e}),e=s(e,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow"}),h||(t.passes[f]=h={id:f,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:n.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:n.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:n.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:n.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},e=i({},v.defaults,e)),null!=e.thickness&&(h.thickness=parseFloat(e.thickness)),null!=e.opacity&&(h.opacity=parseFloat(e.opacity)),null!=e.miterLimit&&(h.miterLimit=parseFloat(e.miterLimit)),null!=e.overlay&&(h.overlay=!!e.overlay,f<v.maxLines&&(h.depth=2*(v.maxLines-1-f%v.maxLines)/v.maxLines-1)),null!=e.join&&(h.join=e.join),null!=e.hole&&(h.hole=e.hole),null!=e.fill&&(h.fill=e.fill?r(e.fill,"uint8"):null),null!=e.viewport&&(h.viewport=m(e.viewport)),h.viewport||(h.viewport=m([o.drawingBufferWidth,o.drawingBufferHeight])),null!=e.close&&(h.close=e.close),null===e.positions&&(e.positions=[]),e.positions){var g,y;if(e.positions.x&&e.positions.y){var b=e.positions.x,x=e.positions.y;y=h.count=Math.max(b.length,x.length),g=new Float64Array(2*y);for(var _=0;_<y;_++)g[2*_]=b[_],g[2*_+1]=x[_]}else g=l(e.positions,"float64"),y=h.count=Math.floor(g.length/2);var w=h.bounds=a(g,2);if(h.fill){for(var T=[],k={},C=0,E=0,M=0,A=h.count;E<A;E++){var S=g[2*E],O=g[2*E+1];isNaN(S)||isNaN(O)||null==S||null==O?(S=g[2*C],O=g[2*C+1],k[E]=C):C=E,T[M++]=S,T[M++]=O}for(var P=u(T,h.hole||[]),R=0,L=P.length;R<L;R++)null!=k[P[R]]&&(P[R]=k[P[R]]);h.triangles=P}var D=new Float64Array(g);c(D,2,w);var I=new Float64Array(2*y+6);h.close?g[0]===g[2*y-2]&&g[1]===g[2*y-1]?(I[0]=D[2*y-4],I[1]=D[2*y-3]):(I[0]=D[2*y-2],I[1]=D[2*y-1]):(I[0]=D[0],I[1]=D[1]),I.set(D,2),h.close?g[0]===g[2*y-2]&&g[1]===g[2*y-1]?(I[2*y+2]=D[2],I[2*y+3]=D[3],h.count-=1):(I[2*y+2]=D[0],I[2*y+3]=D[1],I[2*y+4]=D[2],I[2*y+5]=D[3]):(I[2*y+2]=D[2*y-2],I[2*y+3]=D[2*y-1],I[2*y+4]=D[2*y-2],I[2*y+5]=D[2*y-1]),h.positionBuffer(d(I)),h.positionFractBuffer(p(I))}if(e.range?h.range=e.range:h.range||(h.range=h.bounds),(e.range||e.positions)&&h.count){var z=h.bounds,j=z[2]-z[0],N=z[3]-z[1],F=h.range[2]-h.range[0],B=h.range[3]-h.range[1];h.scale=[j/F,N/B],h.translate=[-h.range[0]/F+z[0]/F||0,-h.range[1]/B+z[1]/B||0],h.scaleFract=p(h.scale),h.translateFract=p(h.translate)}if(e.dashes){var V,U=0;if(!e.dashes||e.dashes.length<2)U=1,V=new Uint8Array([255,255,255,255,255,255,255,255]);else{U=0;for(var G=0;G<e.dashes.length;++G)U+=e.dashes[G];V=new Uint8Array(U*v.dashMult);for(var H=0,W=255,q=0;q<2;q++)for(var Y=0;Y<e.dashes.length;++Y){for(var X=0,Z=e.dashes[Y]*v.dashMult*.5;X<Z;++X)V[H++]=W;W^=255}}h.dashLength=U,h.dashTexture({channels:1,data:V,width:V.length,height:1,mag:"linear",min:"linear"},0,0)}if(e.color){var $=h.count,K=e.color;K||(K="transparent");var J=new Uint8Array(4*$+4);if(Array.isArray(K)&&"number"!=typeof K[0]){for(var Q=0;Q<$;Q++){var ee=r(K[Q],"uint8");J.set(ee,4*Q)}J.set(r(K[0],"uint8"),4*$)}else for(var te=r(K,"uint8"),ne=0;ne<$+1;ne++)J.set(te,4*ne);h.colorBuffer({usage:"dynamic",type:"uint8",data:J})}}else t.passes[f]=null}),e.length<this.passes.length){for(var f=e.length;f<this.passes.length;f++){var h=t.passes[f];h&&(h.colorBuffer.destroy(),h.positionBuffer.destroy(),h.dashTexture.destroy())}this.passes.length=e.length}for(var g=[],y=0;y<this.passes.length;y++)null!==t.passes[y]&&g.push(t.passes[y]);return this.passes=g,this}},v.prototype.destroy=function(){return this.passes.forEach(function(e){e.colorBuffer.destroy(),e.positionBuffer.destroy(),e.dashTexture.destroy()}),this.passes.length=0,this}},{"array-bounds":53,"array-normalize":54,"color-normalize":108,earcut:156,"es6-weak-map":209,"flatten-vertex-data":216,glslify:392,"object-assign":437,"parse-rect":442,"pick-by-alias":448,"to-float32":515}],475:[function(e,t,n){"use strict";var r=e("./scatter"),a=e("object-assign");t.exports=function(e,t){var n=new r(e,t),i=n.render.bind(n);return a(i,{render:i,update:n.update.bind(n),draw:n.draw.bind(n),destroy:n.destroy.bind(n),regl:n.regl,gl:n.gl,canvas:n.gl.canvas,groups:n.groups,markers:n.markerCache,palette:n.palette}),i}},{"./scatter":476,"object-assign":437}],476:[function(e,t,n){"use strict";var r=e("color-normalize"),a=e("array-bounds"),i=e("color-id"),o=e("point-cluster"),s=e("object-assign"),l=e("glslify"),u=e("pick-by-alias"),c=e("update-diff"),f=e("flatten-vertex-data"),d=e("is-iexplorer"),p=e("to-float32"),h=e("parse-rect");function m(e,t){var n=this;if(!(this instanceof m))return new m(e,t);"function"==typeof e?(t||(t={}),t.regl=e):(t=e,e=null),t&&t.length&&(t.positions=t);var r,a=(e=t.regl)._gl,i=[];this.tooManyColors=d,r=e.texture({data:new Uint8Array(1020),width:255,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),s(this,{regl:e,gl:a,groups:[],markerCache:[null],markerTextures:[null],palette:i,paletteIds:{},paletteTexture:r,maxColors:255,maxSize:100,canvas:a.canvas}),this.update(t);var o={uniforms:{pixelRatio:e.context("pixelRatio"),palette:r,paletteSize:function(e,t){return[n.tooManyColors?0:255,r.height]},scale:e.prop("scale"),scaleFract:e.prop("scaleFract"),translate:e.prop("translate"),translateFract:e.prop("translateFract"),opacity:e.prop("opacity"),marker:e.prop("markerTexture")},attributes:{x:function(e,t){return t.xAttr||{buffer:t.positionBuffer,stride:8,offset:0}},y:function(e,t){return t.yAttr||{buffer:t.positionBuffer,stride:8,offset:4}},xFract:function(e,t){return t.xAttr?{constant:[0,0]}:{buffer:t.positionFractBuffer,stride:8,offset:0}},yFract:function(e,t){return t.yAttr?{constant:[0,0]}:{buffer:t.positionFractBuffer,stride:8,offset:4}},size:function(e,t){return t.size.length?{buffer:t.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(255*t.size/n.maxSize)]}},borderSize:function(e,t){return t.borderSize.length?{buffer:t.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(255*t.borderSize/n.maxSize)]}},colorId:function(e,t){return t.color.length?{buffer:t.colorBuffer,stride:n.tooManyColors?8:4,offset:0}:{constant:n.tooManyColors?i.slice(4*t.color,4*t.color+4):[t.color]}},borderColorId:function(e,t){return t.borderColor.length?{buffer:t.colorBuffer,stride:n.tooManyColors?8:4,offset:n.tooManyColors?4:2}:{constant:n.tooManyColors?i.slice(4*t.borderColor,4*t.borderColor+4):[t.borderColor]}},isActive:function(e,t){return!0===t.activation?{constant:[1]}:t.activation?t.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:e.prop("viewport")},viewport:e.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:e.prop("elements"),count:e.prop("count"),offset:e.prop("offset"),primitive:"points"},u=s({},o);u.frag=l(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragWidth, fragBorderColorLevel, fragColorLevel;\n\nuniform sampler2D marker;\nuniform float pixelRatio, opacity;\n\nfloat smoothStep(float x, float y) {\n  return 1.0 / (1.0 + exp(50.0*(x - y)));\n}\n\nvoid main() {\n  float dist = texture2D(marker, gl_PointCoord).r, delta = fragWidth;\n\n  // max-distance alpha\n  if (dist < 0.003) discard;\n\n  // null-border case\n  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {\n    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);\n    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);\n  }\n  else {\n    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);\n    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);\n\n    vec4 color = fragBorderColor;\n    color.a *= borderColorAmt;\n    color = mix(color, fragColor, colorAmt);\n    color.a *= opacity;\n\n    gl_FragColor = color;\n  }\n\n}\n"]),u.vert=l(["precision mediump float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform vec2 scale, scaleFract, translate, translateFract, paletteSize;\nuniform float pixelRatio;\nuniform sampler2D palette;\n\nconst float maxSize = 100.;\nconst float borderLevel = .5;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragPointSize, fragBorderRadius,\n    fragWidth, fragBorderColorLevel, fragColorLevel;\n\nvec2 paletteCoord(float id) {\n  return vec2(\n    (mod(id, paletteSize.x) + .5) / paletteSize.x,\n    (floor(id / paletteSize.x) + .5) / paletteSize.y\n  );\n}\nvec2 paletteCoord(vec2 id) {\n  return vec2(\n    (id.x + .5) / paletteSize.x,\n    (id.y + .5) / paletteSize.y\n  );\n}\nvec4 getColor(vec4 id) {\n  // zero-palette means we deal with direct buffer\n  if (paletteSize.x == 0.) return id / 255.;\n  return texture2D(palette, paletteCoord(id.xy));\n}\n\nvoid main() {\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = 2. * size * pixelRatio;\n  fragPointSize = size * pixelRatio;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0, 1);\n\n  fragColor = color;\n  fragBorderColor = borderColor;\n  fragWidth = 1. / gl_PointSize;\n\n  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);\n  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);\n}\n"]),this.drawMarker=e(u);var c=s({},o);c.frag=l(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\n\nuniform float opacity;\nvarying float fragBorderRadius, fragWidth;\n\nfloat smoothStep(float edge0, float edge1, float x) {\n\tfloat t;\n\tt = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n\treturn t * t * (3.0 - 2.0 * t);\n}\n\nvoid main() {\n\tfloat radius, alpha = 1.0, delta = fragWidth;\n\n\tradius = length(2.0 * gl_PointCoord.xy - 1.0);\n\n\tif (radius > 1.0 + delta) {\n\t\tdiscard;\n\t}\n\n\talpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);\n\n\tfloat borderRadius = fragBorderRadius;\n\tfloat ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);\n\tvec4 color = mix(fragColor, fragBorderColor, ratio);\n\tcolor.a *= alpha * opacity;\n\tgl_FragColor = color;\n}\n"]),c.vert=l(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio;\nuniform sampler2D palette;\nuniform vec2 paletteSize;\n\nconst float maxSize = 100.;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nvec2 paletteCoord(float id) {\n  return vec2(\n    (mod(id, paletteSize.x) + .5) / paletteSize.x,\n    (floor(id / paletteSize.x) + .5) / paletteSize.y\n  );\n}\nvec2 paletteCoord(vec2 id) {\n  return vec2(\n    (id.x + .5) / paletteSize.x,\n    (id.y + .5) / paletteSize.y\n  );\n}\n\nvec4 getColor(vec4 id) {\n  // zero-palette means we deal with direct buffer\n  if (paletteSize.x == 0.) return id / 255.;\n  return texture2D(palette, paletteCoord(id.xy));\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = (size + borderSize) * pixelRatio;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0, 1);\n\n  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);\n  fragColor = color;\n  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;\n  fragWidth = 1. / gl_PointSize;\n}\n"]),d&&(c.frag=c.frag.replace("smoothstep","smoothStep"),u.frag=u.frag.replace("smoothstep","smoothStep")),this.drawCircle=e(c)}t.exports=m,m.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},m.prototype.render=function(){for(var e,t=[],n=arguments.length;n--;)t[n]=arguments[n];return t.length&&(e=this).update.apply(e,t),this.draw(),this},m.prototype.draw=function(){for(var e=this,t=[],n=arguments.length;n--;)t[n]=arguments[n];var r=this.groups;if(1===t.length&&Array.isArray(t[0])&&(null===t[0][0]||Array.isArray(t[0][0]))&&(t=t[0]),this.regl._refresh(),t.length)for(var a=0;a<t.length;a++)e.drawItem(a,t[a]);else r.forEach(function(t,n){e.drawItem(n)});return this},m.prototype.drawItem=function(e,t){var n=this.groups,r=n[e];if("number"==typeof t&&(e=t,r=n[t],t=null),r&&r.count&&r.opacity){r.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,r,t));for(var a=[],i=1;i<r.activation.length;i++)r.activation[i]&&(!0===r.activation[i]||r.activation[i].data.length)&&a.push.apply(a,this.getMarkerDrawOptions(i,r,t));a.length&&this.drawMarker(a)}},m.prototype.getMarkerDrawOptions=function(e,t,n){var r=t.range,a=t.tree,i=t.viewport,o=t.activation,l=t.selectionBuffer,u=t.count;if(this.regl,!a)return n?[s({},t,{markerTexture:this.markerTextures[e],activation:o[e],count:n.length,elements:n,offset:0})]:[s({},t,{markerTexture:this.markerTextures[e],activation:o[e],offset:0})];var c=[],f=a.range(r,{lod:!0,px:[(r[2]-r[0])/i.width,(r[3]-r[1])/i.height]});if(n){for(var d=o[e],p=d.data,h=new Uint8Array(u),m=0;m<n.length;m++){var v=n[m];h[v]=p?p[v]:1}l.subdata(h)}for(var g=f.length;g--;){var y=f[g],b=y[0],x=y[1];c.push(s({},t,{markerTexture:this.markerTextures[e],activation:n?l:o[e],offset:b,count:x-b}))}return c},m.prototype.update=function(){for(var e=this,t=[],n=arguments.length;n--;)t[n]=arguments[n];if(t.length){1===t.length&&Array.isArray(t[0])&&(t=t[0]);var r=this.groups,i=this.gl,l=this.regl,d=this.maxSize,v=this.maxColors,g=this.palette;this.groups=r=t.map(function(t,n){var y=r[n];if(void 0===t)return y;null===t?t={positions:null}:"function"==typeof t?t={ondraw:t}:"number"==typeof t[0]&&(t={positions:t}),null===(t=u(t,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits"})).positions&&(t.positions=[]),y||(r[n]=y={id:n,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:l.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:l.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:l.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:l.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:l.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},t=s({},m.defaults,t)),!t.positions||"marker"in t||(t.marker=y.marker,delete y.marker),!t.marker||"positions"in t||(t.positions=y.positions,delete y.positions);var b=0,x=0;if(c(y,t,[{snap:!0,size:function(e,t){return null==e&&(e=m.defaults.size),b+=e&&e.length?1:0,e},borderSize:function(e,t){return null==e&&(e=m.defaults.borderSize),b+=e&&e.length?1:0,e},opacity:parseFloat,color:function(t,n){return null==t&&(t=m.defaults.color),t=e.updateColor(t),x++,t},borderColor:function(t,n){return null==t&&(t=m.defaults.borderColor),t=e.updateColor(t),x++,t},bounds:function(e,t,n){return"range"in n||(n.range=null),e},positions:function(e,t,n){var r=t.snap,i=t.positionBuffer,s=t.positionFractBuffer,u=t.selectionBuffer;if(e.x||e.y)return e.x.length?t.xAttr={buffer:l.buffer(e.x),offset:0,stride:4,count:e.x.length}:t.xAttr={buffer:e.x.buffer,offset:4*e.x.offset||0,stride:4*(e.x.stride||1),count:e.x.count},e.y.length?t.yAttr={buffer:l.buffer(e.y),offset:0,stride:4,count:e.y.length}:t.yAttr={buffer:e.y.buffer,offset:4*e.y.offset||0,stride:4*(e.y.stride||1),count:e.y.count},t.count=Math.max(t.xAttr.count,t.yAttr.count),e;e=f(e,"float64");var c=t.count=Math.floor(e.length/2),d=t.bounds=c?a(e,2):null;if(n.range||t.range||(delete t.range,n.range=d),n.marker||t.marker||(delete t.marker,n.marker=null),r&&(!0===r||c>r)?t.tree=o(e,{bounds:d}):r&&r.length&&(t.tree=r),t.tree){var h={primitive:"points",usage:"static",data:t.tree,type:"uint32"};t.elements?t.elements(h):t.elements=l.elements(h)}return i({data:p.float(e),usage:"dynamic"}),s({data:p.fract(e),usage:"dynamic"}),u({data:new Uint8Array(c),type:"uint8",usage:"stream"}),e}},{marker:function(t,n,r){var a=n.activation;if(a.forEach(function(e){return e&&e.destroy&&e.destroy()}),a.length=0,t&&"number"!=typeof t[0]){for(var i=[],o=0,s=Math.min(t.length,n.count);o<s;o++){var u=e.addMarker(t[o]);i[u]||(i[u]=new Uint8Array(n.count)),i[u][o]=1}for(var c=0;c<i.length;c++)if(i[c]){var f={data:i[c],type:"uint8",usage:"static"};a[c]?a[c](f):a[c]=l.buffer(f),a[c].data=i[c]}}else{var d=e.addMarker(t);a[d]=!0}return t},range:function(e,t,n){var r=t.bounds;if(r)return e||(e=r),t.scale=[1/(e[2]-e[0]),1/(e[3]-e[1])],t.translate=[-e[0],-e[1]],t.scaleFract=p.fract(t.scale),t.translateFract=p.fract(t.translate),e},viewport:function(e){var t=h(e||[i.drawingBufferWidth,i.drawingBufferHeight]);return t}}]),b){var _=y.count,w=y.size,T=y.borderSize,k=y.sizeBuffer,C=new Uint8Array(2*_);if(w.length||T.length)for(var E=0;E<_;E++)C[2*E]=Math.round(255*(null==w[E]?w:w[E])/d),C[2*E+1]=Math.round(255*(null==T[E]?T:T[E])/d);k({data:C,usage:"dynamic"})}if(x){var M,A=y.count,S=y.color,O=y.borderColor,P=y.colorBuffer;if(e.tooManyColors){if(S.length||O.length){M=new Uint8Array(8*A);for(var R=0;R<A;R++){var L=S[R];M[8*R]=g[4*L],M[8*R+1]=g[4*L+1],M[8*R+2]=g[4*L+2],M[8*R+3]=g[4*L+3];var D=O[R];M[8*R+4]=g[4*D],M[8*R+5]=g[4*D+1],M[8*R+6]=g[4*D+2],M[8*R+7]=g[4*D+3]}}}else if(S.length||O.length){M=new Uint8Array(4*A+2);for(var I=0;I<A;I++)null!=S[I]&&(M[4*I]=S[I]%v,M[4*I+1]=Math.floor(S[I]/v)),null!=O[I]&&(M[4*I+2]=O[I]%v,M[4*I+3]=Math.floor(O[I]/v))}P({data:M||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return y})}},m.prototype.addMarker=function(e){var t,n=this.markerTextures,r=this.regl,a=this.markerCache,i=null==e?0:a.indexOf(e);if(i>=0)return i;if(e instanceof Uint8Array||e instanceof Uint8ClampedArray)t=e;else{t=new Uint8Array(e.length);for(var o=0,s=e.length;o<s;o++)t[o]=255*e[o]}var l=Math.floor(Math.sqrt(t.length));return i=n.length,a.push(e),n.push(r.texture({channels:1,data:t,radius:l,mag:"linear",min:"linear"})),i},m.prototype.updateColor=function(e){var t=this.paletteIds,n=this.palette,a=this.maxColors;Array.isArray(e)||(e=[e]);var o=[];if("number"==typeof e[0]){var s=[];if(Array.isArray(e))for(var l=0;l<e.length;l+=4)s.push(e.slice(l,l+4));else for(var u=0;u<e.length;u+=4)s.push(e.subarray(u,u+4));e=s}for(var c=0;c<e.length;c++){var f=e[c];f=r(f,"uint8");var d=i(f,!1);if(null==t[d]){var p=n.length;t[d]=Math.floor(p/4),n[p]=f[0],n[p+1]=f[1],n[p+2]=f[2],n[p+3]=f[3]}o[c]=t[d]}return!this.tooManyColors&&n.length>a*a*4&&(this.tooManyColors=!0),this.updatePalette(n),1===o.length?o[0]:o},m.prototype.updatePalette=function(e){if(!this.tooManyColors){var t=this.maxColors,n=this.paletteTexture,r=Math.ceil(.25*e.length/t);if(r>1)for(var a=.25*(e=e.slice()).length%t;a<r*t;a++)e.push(0,0,0,0);n.height<r&&n.resize(t,r),n.subimage({width:Math.min(.25*e.length,t),height:r,data:e},0,0)}},m.prototype.destroy=function(){return this.groups.forEach(function(e){e.sizeBuffer.destroy(),e.positionBuffer.destroy(),e.positionFractBuffer.destroy(),e.colorBuffer.destroy(),e.activation.forEach(function(e){return e&&e.destroy&&e.destroy()}),e.selectionBuffer.destroy(),e.elements&&e.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(e){return e&&e.destroy&&e.destroy()}),this}},{"array-bounds":53,"color-id":106,"color-normalize":108,"flatten-vertex-data":216,glslify:392,"is-iexplorer":402,"object-assign":437,"parse-rect":442,"pick-by-alias":448,"point-cluster":452,"to-float32":515,"update-diff":526}],477:[function(e,t,n){"use strict";var r=e("regl-scatter2d/scatter"),a=e("pick-by-alias"),i=e("array-bounds"),o=e("raf"),s=e("array-range"),l=e("parse-rect"),u=e("flatten-vertex-data");function c(e,t){if(!(this instanceof c))return new c(e,t);this.traces=[],this.passes={},this.regl=e,this.scatter=r(e),this.canvas=this.scatter.canvas}function f(e,t,n){var r=null!=e.id?e.id:e,a=t,i=n,o=r<<16|(255&a)<<8|255&i;return o}function d(e,t,n){var r,a,i,o,s=e[t],l=e[n];return s.length>2?(s[0],s[2],r=s[1],a=s[3]):s.length?(r=s[0],a=s[1]):(s.x,r=s.y,s.x,s.width,a=s.y+s.height),l.length>2?(i=l[0],o=l[2],l[1],l[3]):l.length?(i=l[0],o=l[1]):(i=l.x,l.y,o=l.x+l.width,l.y,l.height),[i,r,o,a]}function p(e){if("number"==typeof e)return[e,e,e,e];if(2===e.length)return[e[0],e[1],e[0],e[1]];var t=l(e);return[t.x,t.y,t.x+t.width,t.y+t.height]}t.exports=c,c.prototype.render=function(){for(var e,t=this,n=[],r=arguments.length;r--;)n[r]=arguments[r];return n.length&&(e=this).update.apply(e,n),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?null==this.planned&&(this.planned=o(function(){t.draw(),t.dirty=!0,t.planned=null})):(this.draw(),this.dirty=!0,o(function(){t.dirty=!1})),this)},c.prototype.update=function(){for(var e,t=[],n=arguments.length;n--;)t[n]=arguments[n];if(t.length){for(var r=0;r<t.length;r++)this.updateItem(r,t[r]);this.traces=this.traces.filter(Boolean);for(var a=[],i=0,o=0;o<this.traces.length;o++){for(var s=this.traces[o],l=this.traces[o].passes,u=0;u<l.length;u++)a.push(this.passes[l[u]]);s.passOffset=i,i+=s.passes.length}return(e=this.scatter).update.apply(e,a),this}},c.prototype.updateItem=function(e,t){var n=this.regl;if(null===t)return this.traces[e]=null,this;if(!t)return this;var r,o=a(t,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),s=this.traces[e]||(this.traces[e]={id:e,buffer:n.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:l([n._gl.drawingBufferWidth,n._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(null!=o.color&&(s.color=o.color),null!=o.size&&(s.size=o.size),null!=o.marker&&(s.marker=o.marker),null!=o.borderColor&&(s.borderColor=o.borderColor),null!=o.borderSize&&(s.borderSize=o.borderSize),null!=o.opacity&&(s.opacity=o.opacity),o.viewport&&(s.viewport=l(o.viewport)),null!=o.diagonal&&(s.diagonal=o.diagonal),null!=o.upper&&(s.upper=o.upper),null!=o.lower&&(s.lower=o.lower),o.data){s.buffer(u(o.data)),s.columns=o.data.length,s.count=o.data[0].length,s.bounds=[];for(var c=0;c<s.columns;c++)s.bounds[c]=i(o.data[c],1)}o.range&&(s.range=o.range,r=s.range&&"number"!=typeof s.range[0]),o.domain&&(s.domain=o.domain);var h=!1;null!=o.padding&&(Array.isArray(o.padding)&&o.padding.length===s.columns&&"number"==typeof o.padding[o.padding.length-1]?(s.padding=o.padding.map(p),h=!0):s.padding=p(o.padding));var m=s.columns,v=s.count,g=s.viewport.width,y=s.viewport.height,b=s.viewport.x,x=s.viewport.y,_=g/m,w=y/m;s.passes=[];for(var T=0;T<m;T++)for(var k=0;k<m;k++)if((s.diagonal||k!==T)&&(s.upper||!(T>k))&&(s.lower||!(T<k))){var C=f(s.id,T,k),E=this.passes[C]||(this.passes[C]={});if(o.data&&(o.transpose?E.positions={x:{buffer:s.buffer,offset:k,count:v,stride:m},y:{buffer:s.buffer,offset:T,count:v,stride:m}}:E.positions={x:{buffer:s.buffer,offset:k*v,count:v},y:{buffer:s.buffer,offset:T*v,count:v}},E.bounds=d(s.bounds,T,k)),o.domain||o.viewport||o.data){var M=h?d(s.padding,T,k):s.padding;if(s.domain){var A=d(s.domain,T,k),S=A[0],O=A[1],P=A[2],R=A[3];E.viewport=[b+S*g+M[0],x+O*y+M[1],b+P*g-M[2],x+R*y-M[3]]}else E.viewport=[b+k*_+_*M[0],x+T*w+w*M[1],b+(k+1)*_-_*M[2],x+(T+1)*w-w*M[3]]}o.color&&(E.color=s.color),o.size&&(E.size=s.size),o.marker&&(E.marker=s.marker),o.borderSize&&(E.borderSize=s.borderSize),o.borderColor&&(E.borderColor=s.borderColor),o.opacity&&(E.opacity=s.opacity),o.range&&(E.range=r?d(s.range,T,k):s.range||E.bounds),s.passes.push(C)}return this},c.prototype.draw=function(){for(var e,t=[],n=arguments.length;n--;)t[n]=arguments[n];if(t.length){for(var r=[],a=0;a<t.length;a++)if("number"==typeof t[a]){var i=this.traces[t[a]],o=i.passes,l=i.passOffset;r.push.apply(r,s(l,l+o.length))}else if(t[a].length){var u=t[a],c=this.traces[a],f=c.passes,d=c.passOffset;f=f.map(function(e,t){r[d+t]=u})}(e=this.scatter).draw.apply(e,r)}else this.scatter.draw();return this},c.prototype.destroy=function(){return this.traces.forEach(function(e){e.buffer&&e.buffer.destroy&&e.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this}},{"array-bounds":53,"array-range":55,"flatten-vertex-data":216,"parse-rect":442,"pick-by-alias":448,raf:467,"regl-scatter2d/scatter":476}],478:[function(e,t,n){!function(e,r){"object"==typeof n&&void 0!==t?t.exports=r():e.createREGL=r()}(this,function(){function e(e,t){this.id=V++,this.type=e,this.data=t}function t(e){return"["+function e(t){if(0===t.length)return[];var n=t.charAt(0),r=t.charAt(t.length-1);if(1<t.length&&n===r&&('"'===n||"'"===n))return['"'+t.substr(1,t.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(n=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(t))return e(t.substr(0,n.index)).concat(e(n[1])).concat(e(t.substr(n.index+n[0].length)));if(1===(n=t.split(".")).length)return['"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(t=[],r=0;r<n.length;++r)t=t.concat(e(n[r]));return t}(e).join("][")+"]"}function n(e){return"string"==typeof e?e.split():e}function r(e){return"string"==typeof e?document.querySelector(e):e}function a(e){var t,a,i,o,s=e||{};e={};var l=[],u=[],c="undefined"==typeof window?1:window.devicePixelRatio,f=!1,d=function(e){},p=function(){};if("string"==typeof s?t=document.querySelector(s):"object"==typeof s&&("string"==typeof s.nodeName&&"function"==typeof s.appendChild&&"function"==typeof s.getBoundingClientRect?t=s:"function"==typeof s.drawArrays||"function"==typeof s.drawElements?i=(o=s).canvas:("gl"in s?o=s.gl:"canvas"in s?i=r(s.canvas):"container"in s&&(a=r(s.container)),"attributes"in s&&(e=s.attributes),"extensions"in s&&(l=n(s.extensions)),"optionalExtensions"in s&&(u=n(s.optionalExtensions)),"onDone"in s&&(d=s.onDone),"profile"in s&&(f=!!s.profile),"pixelRatio"in s&&(c=+s.pixelRatio))),t&&("canvas"===t.nodeName.toLowerCase()?i=t:a=t),!o){if(!i){if(!(t=function(e,t,n){function r(){var t=window.innerWidth,r=window.innerHeight;e!==document.body&&(r=e.getBoundingClientRect(),t=r.right-r.left,r=r.bottom-r.top),a.width=n*t,a.height=n*r,B(a.style,{width:t+"px",height:r+"px"})}var a=document.createElement("canvas");return B(a.style,{border:0,margin:0,padding:0,top:0,left:0}),e.appendChild(a),e===document.body&&(a.style.position="absolute",B(e.style,{margin:0,padding:0})),window.addEventListener("resize",r,!1),r(),{canvas:a,onDestroy:function(){window.removeEventListener("resize",r),e.removeChild(a)}}}(a||document.body,0,c)))return null;i=t.canvas,p=t.onDestroy}o=function(e,t){function n(n){try{return e.getContext(n,t)}catch(e){return null}}return n("webgl")||n("experimental-webgl")||n("webgl-experimental")}(i,e)}return o?{gl:o,canvas:i,container:a,extensions:l,optionalExtensions:u,pixelRatio:c,profile:f,onDone:d,onDestroy:p}:(p(),d("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function i(e,t){for(var n=Array(e),r=0;r<e;++r)n[r]=t(r);return n}function o(e){var t,n;return t=(65535<e)<<4,t|=n=(255<(e>>>=t))<<3,(t|=n=(15<(e>>>=n))<<2)|(n=(3<(e>>>=n))<<1)|e>>>n>>1}function s(){function e(e){e:{for(var t=16;268435456>=t;t*=16)if(e<=t){e=t;break e}e=0}return 0<(t=n[o(e)>>2]).length?t.pop():new ArrayBuffer(e)}function t(e){n[o(e.byteLength)>>2].push(e)}var n=i(8,function(){return[]});return{alloc:e,free:t,allocType:function(t,n){var r=null;switch(t){case 5120:r=new Int8Array(e(n),0,n);break;case 5121:r=new Uint8Array(e(n),0,n);break;case 5122:r=new Int16Array(e(2*n),0,n);break;case 5123:r=new Uint16Array(e(2*n),0,n);break;case 5124:r=new Int32Array(e(4*n),0,n);break;case 5125:r=new Uint32Array(e(4*n),0,n);break;case 5126:r=new Float32Array(e(4*n),0,n);break;default:return null}return r.length!==n?r.subarray(0,n):r},freeType:function(e){t(e.buffer)}}}function l(e){return!!e&&"object"==typeof e&&Array.isArray(e.shape)&&Array.isArray(e.stride)&&"number"==typeof e.offset&&e.shape.length===e.stride.length&&(Array.isArray(e.data)||Y(e.data))}function u(e,t,n,r,a,i){for(var o=0;o<t;++o)for(var s=e[o],l=0;l<n;++l)for(var u=s[l],c=0;c<r;++c)a[i++]=u[c]}function c(e){return 0|$[Object.prototype.toString.call(e)]}function f(e,t){for(var n=0;n<t.length;++n)e[n]=t[n]}function d(e,t,n,r,a,i,o){for(var s=0,l=0;l<n;++l)for(var u=0;u<r;++u)e[s++]=t[a*l+i*u+o]}function p(e,t,n,r){function a(t){this.id=u++,this.buffer=e.createBuffer(),this.type=t,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,n.profile&&(this.stats={size:0})}function i(t,n,r){t.byteLength=n.byteLength,e.bufferData(t.type,n,r)}function o(e,t,n,r,a,o){if(e.usage=n,Array.isArray(t)){if(e.dtype=r||5126,0<t.length)if(Array.isArray(t[0])){a=ee(t);for(var s=r=1;s<a.length;++s)r*=a[s];e.dimension=r,t=Q(t,a,e.dtype),i(e,t,n),o?e.persistentData=t:W.freeType(t)}else"number"==typeof t[0]?(e.dimension=a,f(a=W.allocType(e.dtype,t.length),t),i(e,a,n),o?e.persistentData=a:W.freeType(a)):Y(t[0])&&(e.dimension=t[0].length,e.dtype=r||c(t[0])||5126,t=Q(t,[t.length,t[0].length],e.dtype),i(e,t,n),o?e.persistentData=t:W.freeType(t))}else if(Y(t))e.dtype=r||c(t),e.dimension=a,i(e,t,n),o&&(e.persistentData=new Uint8Array(new Uint8Array(t.buffer)));else if(l(t)){a=t.shape;var u=t.stride,s=t.offset,p=0,h=0,m=0,v=0;1===a.length?(p=a[0],h=1,m=u[0],v=0):2===a.length&&(p=a[0],h=a[1],m=u[0],v=u[1]),e.dtype=r||c(t.data)||5126,e.dimension=h,d(a=W.allocType(e.dtype,p*h),t.data,p,h,m,v,s),i(e,a,n),o?e.persistentData=a:W.freeType(a)}}function s(n){t.bufferCount--;for(var a=0;a<r.state.length;++a){var i=r.state[a];i.buffer===n&&(e.disableVertexAttribArray(a),i.buffer=null)}e.deleteBuffer(n.buffer),n.buffer=null,delete p[n.id]}var u=0,p={};a.prototype.bind=function(){e.bindBuffer(this.type,this.buffer)},a.prototype.destroy=function(){s(this)};var h=[];return n.profile&&(t.getTotalBufferSize=function(){var e=0;return Object.keys(p).forEach(function(t){e+=p[t].stats.size}),e}),{create:function(r,i,u,h){function m(t){var r=35044,a=null,i=0,s=0,u=1;return Array.isArray(t)||Y(t)||l(t)?a=t:"number"==typeof t?i=0|t:t&&("data"in t&&(a=t.data),"usage"in t&&(r=J[t.usage]),"type"in t&&(s=K[t.type]),"dimension"in t&&(u=0|t.dimension),"length"in t&&(i=0|t.length)),v.bind(),a?o(v,a,r,s,u,h):(i&&e.bufferData(v.type,i,r),v.dtype=s||5121,v.usage=r,v.dimension=u,v.byteLength=i),n.profile&&(v.stats.size=v.byteLength*te[v.dtype]),m}t.bufferCount++;var v=new a(i);return p[v.id]=v,u||m(r),m._reglType="buffer",m._buffer=v,m.subdata=function(t,n){var r,a=0|(n||0);if(v.bind(),Y(t))e.bufferSubData(v.type,a,t);else if(Array.isArray(t)){if(0<t.length)if("number"==typeof t[0]){var i=W.allocType(v.dtype,t.length);f(i,t),e.bufferSubData(v.type,a,i),W.freeType(i)}else(Array.isArray(t[0])||Y(t[0]))&&(r=ee(t),i=Q(t,r,v.dtype),e.bufferSubData(v.type,a,i),W.freeType(i))}else if(l(t)){r=t.shape;var o=t.stride,s=i=0,u=0,p=0;1===r.length?(i=r[0],s=1,u=o[0],p=0):2===r.length&&(i=r[0],s=r[1],u=o[0],p=o[1]),r=Array.isArray(t.data)?v.dtype:c(t.data),d(r=W.allocType(r,i*s),t.data,i,s,u,p,t.offset),e.bufferSubData(v.type,a,r),W.freeType(r)}return m},n.profile&&(m.stats=v.stats),m.destroy=function(){s(v)},m},createStream:function(e,t){var n=h.pop();return n||(n=new a(e)),n.bind(),o(n,t,35040,0,1,!1),n},destroyStream:function(e){h.push(e)},clear:function(){X(p).forEach(s),h.forEach(s)},getBuffer:function(e){return e&&e._buffer instanceof a?e._buffer:null},restore:function(){X(p).forEach(function(t){t.buffer=e.createBuffer(),e.bindBuffer(t.type,t.buffer),e.bufferData(t.type,t.persistentData||t.byteLength,t.usage)})},_initBuffer:o}}function h(e,t,n,r){function a(e){this.id=u++,s[this.id]=this,this.buffer=e,this.primType=4,this.type=this.vertCount=0}function i(r,a,i,o,s,u,c){if(r.buffer.bind(),a){var f=c;c||Y(a)&&(!l(a)||Y(a.data))||(f=t.oes_element_index_uint?5125:5123),n._initBuffer(r.buffer,a,i,f,3)}else e.bufferData(34963,u,i),r.buffer.dtype=f||5121,r.buffer.usage=i,r.buffer.dimension=3,r.buffer.byteLength=u;if(f=c,!c){switch(r.buffer.dtype){case 5121:case 5120:f=5121;break;case 5123:case 5122:f=5123;break;case 5125:case 5124:f=5125}r.buffer.dtype=f}r.type=f,0>(a=s)&&(a=r.buffer.byteLength,5123===f?a>>=1:5125===f&&(a>>=2)),r.vertCount=a,a=o,0>o&&(a=4,1===(o=r.buffer.dimension)&&(a=0),2===o&&(a=1),3===o&&(a=4)),r.primType=a}function o(e){r.elementsCount--,delete s[e.id],e.buffer.destroy(),e.buffer=null}var s={},u=0,c={uint8:5121,uint16:5123};t.oes_element_index_uint&&(c.uint32=5125),a.prototype.bind=function(){this.buffer.bind()};var f=[];return{create:function(e,t){function s(e){if(e)if("number"==typeof e)u(e),f.primType=4,f.vertCount=0|e,f.type=5121;else{var t=null,n=35044,r=-1,a=-1,o=0,d=0;Array.isArray(e)||Y(e)||l(e)?t=e:("data"in e&&(t=e.data),"usage"in e&&(n=J[e.usage]),"primitive"in e&&(r=ne[e.primitive]),"count"in e&&(a=0|e.count),"type"in e&&(d=c[e.type]),"length"in e?o=0|e.length:(o=a,5123===d||5122===d?o*=2:5125!==d&&5124!==d||(o*=4))),i(f,t,n,r,a,o,d)}else u(),f.primType=4,f.vertCount=0,f.type=5121;return s}var u=n.create(null,34963,!0),f=new a(u._buffer);return r.elementsCount++,s(e),s._reglType="elements",s._elements=f,s.subdata=function(e,t){return u.subdata(e,t),s},s.destroy=function(){o(f)},s},createStream:function(e){var t=f.pop();return t||(t=new a(n.create(null,34963,!0,!1)._buffer)),i(t,e,35040,-1,-1,0,0),t},destroyStream:function(e){f.push(e)},getElements:function(e){return"function"==typeof e&&e._elements instanceof a?e._elements:null},clear:function(){X(s).forEach(o)}}}function m(e){for(var t=W.allocType(5123,e.length),n=0;n<e.length;++n)if(isNaN(e[n]))t[n]=65535;else if(1/0===e[n])t[n]=31744;else if(-1/0===e[n])t[n]=64512;else{re[0]=e[n];var r=ae[0],a=r>>>31<<15,i=(r<<1>>>24)-127,r=r>>13&1023;t[n]=-24>i?a:-14>i?a+(r+1024>>-14-i):15<i?a+31744:a+(i+15<<10)+r}return t}function v(e){return Array.isArray(e)||Y(e)}function g(e){return"[object "+e+"]"}function y(e){return Array.isArray(e)&&(0===e.length||"number"==typeof e[0])}function b(e){return!(!Array.isArray(e)||0===e.length||!v(e[0]))}function x(e){return Object.prototype.toString.call(e)}function _(e){if(!e)return!1;var t=x(e);return 0<=pe.indexOf(t)||y(e)||b(e)||l(e)}function w(e,t){36193===e.type?(e.data=m(t),W.freeType(t)):e.data=t}function T(e,t,n,r,a,i){if(e=void 0!==me[e]?me[e]:se[e]*he[t],i&&(e*=6),a){for(r=0;1<=n;)r+=e*n*n,n/=2;return r}return e*n*r}function k(e,t,n,r,a,i,o){function s(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function u(e,t){e.internalformat=t.internalformat,e.format=t.format,e.type=t.type,e.compressed=t.compressed,e.premultiplyAlpha=t.premultiplyAlpha,e.flipY=t.flipY,e.unpackAlignment=t.unpackAlignment,e.colorSpace=t.colorSpace,e.width=t.width,e.height=t.height,e.channels=t.channels}function c(e,t){if("object"==typeof t&&t){"premultiplyAlpha"in t&&(e.premultiplyAlpha=t.premultiplyAlpha),"flipY"in t&&(e.flipY=t.flipY),"alignment"in t&&(e.unpackAlignment=t.alignment),"colorSpace"in t&&(e.colorSpace=U[t.colorSpace]),"type"in t&&(e.type=G[t.type]);var n=e.width,r=e.height,a=e.channels,i=!1;"shape"in t?(n=t.shape[0],r=t.shape[1],3===t.shape.length&&(a=t.shape[2],i=!0)):("radius"in t&&(n=r=t.radius),"width"in t&&(n=t.width),"height"in t&&(r=t.height),"channels"in t&&(a=t.channels,i=!0)),e.width=0|n,e.height=0|r,e.channels=0|a,n=!1,"format"in t&&(n=t.format,r=e.internalformat=H[n],e.format=ae[r],n in G&&!("type"in t)&&(e.type=G[n]),n in q&&(e.compressed=!0),n=!0),!i&&n?e.channels=se[e.format]:i&&!n&&e.channels!==oe[e.format]&&(e.format=e.internalformat=oe[e.channels])}}function f(t){e.pixelStorei(37440,t.flipY),e.pixelStorei(37441,t.premultiplyAlpha),e.pixelStorei(37443,t.colorSpace),e.pixelStorei(3317,t.unpackAlignment)}function d(){s.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function p(e,t){var n=null;if(_(t)?n=t:t&&(c(e,t),"x"in t&&(e.xOffset=0|t.x),"y"in t&&(e.yOffset=0|t.y),_(t.data)&&(n=t.data)),t.copy){var r=a.viewportWidth,i=a.viewportHeight;e.width=e.width||r-e.xOffset,e.height=e.height||i-e.yOffset,e.needsCopy=!0}else if(n){if(Y(n))e.channels=e.channels||4,e.data=n,"type"in t||5121!==e.type||(e.type=0|$[Object.prototype.toString.call(n)]);else if(y(n)){switch(e.channels=e.channels||4,i=(r=n).length,e.type){case 5121:case 5123:case 5125:case 5126:(i=W.allocType(e.type,i)).set(r),e.data=i;break;case 36193:e.data=m(r)}e.alignment=1,e.needsFree=!0}else if(l(n)){r=n.data,Array.isArray(r)||5121!==e.type||(e.type=0|$[Object.prototype.toString.call(r)]);var o,s,u,f,i=n.shape,d=n.stride;3===i.length?(u=i[2],f=d[2]):f=u=1,o=i[0],s=i[1],i=d[0],d=d[1],e.alignment=1,e.width=o,e.height=s,e.channels=u,e.format=e.internalformat=oe[u],e.needsFree=!0,o=f,n=n.offset,u=e.width,f=e.height,s=e.channels;for(var p=W.allocType(36193===e.type?5126:e.type,u*f*s),h=0,g=0;g<f;++g)for(var T=0;T<u;++T)for(var k=0;k<s;++k)p[h++]=r[i*T+d*g+o*k+n];w(e,p)}else if(x(n)===le||x(n)===ue)x(n)===le?e.element=n:e.element=n.canvas,e.width=e.element.width,e.height=e.element.height,e.channels=4;else if(x(n)===ce)e.element=n,e.width=n.width,e.height=n.height,e.channels=4;else if(x(n)===fe)e.element=n,e.width=n.naturalWidth,e.height=n.naturalHeight,e.channels=4;else if(x(n)===de)e.element=n,e.width=n.videoWidth,e.height=n.videoHeight,e.channels=4;else if(b(n)){for(r=e.width||n[0].length,i=e.height||n.length,d=e.channels,d=v(n[0][0])?d||n[0][0].length:d||1,o=Z.shape(n),u=1,f=0;f<o.length;++f)u*=o[f];u=W.allocType(36193===e.type?5126:e.type,u),Z.flatten(n,o,"",u),w(e,u),e.alignment=1,e.width=r,e.height=i,e.channels=d,e.format=e.internalformat=oe[d],e.needsFree=!0}}else e.width=e.width||1,e.height=e.height||1,e.channels=e.channels||4}function h(t,n,a,i,o){var s=t.element,l=t.data,u=t.internalformat,c=t.format,d=t.type,p=t.width,h=t.height;f(t),s?e.texSubImage2D(n,o,a,i,c,d,s):t.compressed?e.compressedTexSubImage2D(n,o,a,i,u,p,h,l):t.needsCopy?(r(),e.copyTexSubImage2D(n,o,a,i,t.xOffset,t.yOffset,p,h)):e.texSubImage2D(n,o,a,i,p,h,c,d,l)}function g(){return pe.pop()||new d}function k(e){e.needsFree&&W.freeType(e.data),d.call(e),pe.push(e)}function C(e,t,n){var r=e.images[0]=g();e.mipmask=1,r.width=e.width=t,r.height=e.height=n,r.channels=e.channels=4}function E(e,t){var n=null;if(_(t))u(n=e.images[0]=g(),e),p(n,t),e.mipmask=1;else if(c(e,t),Array.isArray(t.mipmap))for(var r=t.mipmap,a=0;a<r.length;++a)u(n=e.images[a]=g(),e),n.width>>=a,n.height>>=a,p(n,r[a]),e.mipmask|=1<<a;else u(n=e.images[0]=g(),e),p(n,t),e.mipmask=1;u(e,e.images[0])}function M(t,n){for(var a=t.images,i=0;i<a.length&&a[i];++i){var o=a[i],s=n,l=i,u=o.element,c=o.data,d=o.internalformat,p=o.format,h=o.type,m=o.width,v=o.height,g=o.channels;f(o),u?e.texImage2D(s,l,p,p,h,u):o.compressed?e.compressedTexImage2D(s,l,d,m,v,0,c):o.needsCopy?(r(),e.copyTexImage2D(s,l,p,o.xOffset,o.yOffset,m,v,0)):((o=!c)&&(c=W.zero.allocType(h,m*v*g)),e.texImage2D(s,l,p,m,v,0,p,h,c),o&&c&&W.zero.freeType(c))}}function A(){var e=he.pop()||new function(){s.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)};s.call(e);for(var t=e.mipmask=0;16>t;++t)e.images[t]=null;return e}function S(e){for(var t=e.images,n=0;n<t.length;++n)t[n]&&k(t[n]),t[n]=null;he.push(e)}function O(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function P(e,t){"min"in t&&(e.minFilter=V[t.min],0<=ie.indexOf(e.minFilter)&&!("faces"in t)&&(e.genMipmaps=!0)),"mag"in t&&(e.magFilter=F[t.mag]);var n=e.wrapS,r=e.wrapT;if("wrap"in t){var a=t.wrap;"string"==typeof a?n=r=N[a]:Array.isArray(a)&&(n=N[a[0]],r=N[a[1]])}else"wrapS"in t&&(n=N[t.wrapS]),"wrapT"in t&&(r=N[t.wrapT]);if(e.wrapS=n,e.wrapT=r,"anisotropic"in t&&(e.anisotropic=t.anisotropic),"mipmap"in t){switch(n=!1,typeof t.mipmap){case"string":e.mipmapHint=j[t.mipmap],n=e.genMipmaps=!0;break;case"boolean":n=e.genMipmaps=t.mipmap;break;case"object":e.genMipmaps=!1,n=!0}!n||"min"in t||(e.minFilter=9984)}}function R(n,r){e.texParameteri(r,10241,n.minFilter),e.texParameteri(r,10240,n.magFilter),e.texParameteri(r,10242,n.wrapS),e.texParameteri(r,10243,n.wrapT),t.ext_texture_filter_anisotropic&&e.texParameteri(r,34046,n.anisotropic),n.genMipmaps&&(e.hint(33170,n.mipmapHint),e.generateMipmap(r))}function L(t){s.call(this),this.mipmask=0,this.internalformat=6408,this.id=me++,this.refCount=1,this.target=t,this.texture=e.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new O,o.profile&&(this.stats={size:0})}function D(t){e.activeTexture(33984),e.bindTexture(t.target,t.texture)}function I(){var t=ye[0];t?e.bindTexture(t.target,t.texture):e.bindTexture(3553,null)}function z(t){var n=t.texture,r=t.unit,a=t.target;0<=r&&(e.activeTexture(33984+r),e.bindTexture(a,null),ye[r]=null),e.deleteTexture(n),t.texture=null,t.params=null,t.pixels=null,t.refCount=0,delete ve[t.id],i.textureCount--}var j={"don't care":4352,"dont care":4352,nice:4354,fast:4353},N={repeat:10497,clamp:33071,mirror:33648},F={nearest:9728,linear:9729},V=B({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},F),U={none:0,browser:37444},G={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},H={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},q={};t.ext_srgb&&(H.srgb=35904,H.srgba=35906),t.oes_texture_float&&(G.float32=G.float=5126),t.oes_texture_half_float&&(G.float16=G["half float"]=36193),t.webgl_depth_texture&&(B(H,{depth:6402,"depth stencil":34041}),B(G,{uint16:5123,uint32:5125,"depth stencil":34042})),t.webgl_compressed_texture_s3tc&&B(q,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),t.webgl_compressed_texture_atc&&B(q,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),t.webgl_compressed_texture_pvrtc&&B(q,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),t.webgl_compressed_texture_etc1&&(q["rgb etc1"]=36196);var K=Array.prototype.slice.call(e.getParameter(34467));Object.keys(q).forEach(function(e){var t=q[e];0<=K.indexOf(t)&&(H[e]=t)});var J=Object.keys(H);n.textureFormats=J;var Q=[];Object.keys(H).forEach(function(e){Q[H[e]]=e});var ee=[];Object.keys(G).forEach(function(e){ee[G[e]]=e});var te=[];Object.keys(F).forEach(function(e){te[F[e]]=e});var ne=[];Object.keys(V).forEach(function(e){ne[V[e]]=e});var re=[];Object.keys(N).forEach(function(e){re[N[e]]=e});var ae=J.reduce(function(e,t){var n=H[t];return 6409===n||6406===n||6409===n||6410===n||6402===n||34041===n?e[n]=n:32855===n||0<=t.indexOf("rgba")?e[n]=6408:e[n]=6407,e},{}),pe=[],he=[],me=0,ve={},ge=n.maxTextureUnits,ye=Array(ge).map(function(){return null});return B(L.prototype,{bind:function(){this.bindCount+=1;var t=this.unit;if(0>t){for(var n=0;n<ge;++n){var r=ye[n];if(r){if(0<r.bindCount)continue;r.unit=-1}ye[n]=this,t=n;break}o.profile&&i.maxTextureUnits<t+1&&(i.maxTextureUnits=t+1),this.unit=t,e.activeTexture(33984+t),e.bindTexture(this.target,this.texture)}return t},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&z(this)}}),o.profile&&(i.getTotalTextureSize=function(){var e=0;return Object.keys(ve).forEach(function(t){e+=ve[t].stats.size}),e}),{create2D:function(t,n){function r(e,t){var n=a.texInfo;O.call(n);var i=A();return"number"==typeof e?C(i,0|e,"number"==typeof t?0|t:0|e):e?(P(n,e),E(i,e)):C(i,1,1),n.genMipmaps&&(i.mipmask=(i.width<<1)-1),a.mipmask=i.mipmask,u(a,i),a.internalformat=i.internalformat,r.width=i.width,r.height=i.height,D(a),M(i,3553),R(n,3553),I(),S(i),o.profile&&(a.stats.size=T(a.internalformat,a.type,i.width,i.height,n.genMipmaps,!1)),r.format=Q[a.internalformat],r.type=ee[a.type],r.mag=te[n.magFilter],r.min=ne[n.minFilter],r.wrapS=re[n.wrapS],r.wrapT=re[n.wrapT],r}var a=new L(3553);return ve[a.id]=a,i.textureCount++,r(t,n),r.subimage=function(e,t,n,i){t|=0,n|=0,i|=0;var o=g();return u(o,a),o.width=0,o.height=0,p(o,e),o.width=o.width||(a.width>>i)-t,o.height=o.height||(a.height>>i)-n,D(a),h(o,3553,t,n,i),I(),k(o),r},r.resize=function(t,n){var i=0|t,s=0|n||i;if(i===a.width&&s===a.height)return r;r.width=a.width=i,r.height=a.height=s,D(a);for(var l,u=a.channels,c=a.type,f=0;a.mipmask>>f;++f){var d=i>>f,p=s>>f;if(!d||!p)break;l=W.zero.allocType(c,d*p*u),e.texImage2D(3553,f,a.format,d,p,0,a.format,a.type,l),l&&W.zero.freeType(l)}return I(),o.profile&&(a.stats.size=T(a.internalformat,a.type,i,s,!1,!1)),r},r._reglType="texture2d",r._texture=a,o.profile&&(r.stats=a.stats),r.destroy=function(){a.decRef()},r},createCube:function(t,n,r,a,s,l){function f(e,t,n,r,a,i){var s,l=d.texInfo;for(O.call(l),s=0;6>s;++s)m[s]=A();if("number"!=typeof e&&e){if("object"==typeof e)if(t)E(m[0],e),E(m[1],t),E(m[2],n),E(m[3],r),E(m[4],a),E(m[5],i);else if(P(l,e),c(d,e),"faces"in e)for(e=e.faces,s=0;6>s;++s)u(m[s],d),E(m[s],e[s]);else for(s=0;6>s;++s)E(m[s],e)}else for(e=0|e||1,s=0;6>s;++s)C(m[s],e,e);for(u(d,m[0]),d.mipmask=l.genMipmaps?(m[0].width<<1)-1:m[0].mipmask,d.internalformat=m[0].internalformat,f.width=m[0].width,f.height=m[0].height,D(d),s=0;6>s;++s)M(m[s],34069+s);for(R(l,34067),I(),o.profile&&(d.stats.size=T(d.internalformat,d.type,f.width,f.height,l.genMipmaps,!0)),f.format=Q[d.internalformat],f.type=ee[d.type],f.mag=te[l.magFilter],f.min=ne[l.minFilter],f.wrapS=re[l.wrapS],f.wrapT=re[l.wrapT],s=0;6>s;++s)S(m[s]);return f}var d=new L(34067);ve[d.id]=d,i.cubeCount++;var m=Array(6);return f(t,n,r,a,s,l),f.subimage=function(e,t,n,r,a){n|=0,r|=0,a|=0;var i=g();return u(i,d),i.width=0,i.height=0,p(i,t),i.width=i.width||(d.width>>a)-n,i.height=i.height||(d.height>>a)-r,D(d),h(i,34069+e,n,r,a),I(),k(i),f},f.resize=function(t){if((t|=0)!==d.width){f.width=d.width=t,f.height=d.height=t,D(d);for(var n=0;6>n;++n)for(var r=0;d.mipmask>>r;++r)e.texImage2D(34069+n,r,d.format,t>>r,t>>r,0,d.format,d.type,null);return I(),o.profile&&(d.stats.size=T(d.internalformat,d.type,f.width,f.height,!1,!0)),f}},f._reglType="textureCube",f._texture=d,o.profile&&(f.stats=d.stats),f.destroy=function(){d.decRef()},f},clear:function(){for(var t=0;t<ge;++t)e.activeTexture(33984+t),e.bindTexture(3553,null),ye[t]=null;X(ve).forEach(z),i.cubeCount=0,i.textureCount=0},getTexture:function(e){return null},restore:function(){X(ve).forEach(function(t){t.texture=e.createTexture(),e.bindTexture(t.target,t.texture);for(var n=0;32>n;++n)if(0!=(t.mipmask&1<<n))if(3553===t.target)e.texImage2D(3553,n,t.internalformat,t.width>>n,t.height>>n,0,t.internalformat,t.type,null);else for(var r=0;6>r;++r)e.texImage2D(34069+r,n,t.internalformat,t.width>>n,t.height>>n,0,t.internalformat,t.type,null);R(t.texInfo,t.target)})}}}function C(e,t,n,r,a,i){function o(e,t,n){this.target=e,this.texture=t,this.renderbuffer=n;var r=e=0;t?(e=t.width,r=t.height):n&&(e=n.width,r=n.height),this.width=e,this.height=r}function s(e){e&&(e.texture&&e.texture._texture.decRef(),e.renderbuffer&&e.renderbuffer._renderbuffer.decRef())}function l(e,t,n){e&&(e.texture?e.texture._texture.refCount+=1:e.renderbuffer._renderbuffer.refCount+=1)}function u(t,n){n&&(n.texture?e.framebufferTexture2D(36160,t,n.target,n.texture._texture.texture,0):e.framebufferRenderbuffer(36160,t,36161,n.renderbuffer._renderbuffer.renderbuffer))}function c(e){var t=3553,n=null,r=null,a=e;return"object"==typeof e&&(a=e.data,"target"in e&&(t=0|e.target)),"texture2d"===(e=a._reglType)?n=a:"textureCube"===e?n=a:"renderbuffer"===e&&(r=a,t=36161),new o(t,n,r)}function f(e,t,n,i,s){return n?((e=r.create2D({width:e,height:t,format:i,type:s}))._texture.refCount=0,new o(3553,e,null)):((e=a.create({width:e,height:t,format:i}))._renderbuffer.refCount=0,new o(36161,null,e))}function d(e){return e&&(e.texture||e.renderbuffer)}function p(e,t,n){e&&(e.texture?e.texture.resize(t,n):e.renderbuffer&&e.renderbuffer.resize(t,n))}function h(){this.id=T++,k[this.id]=this,this.framebuffer=e.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function m(e){e.colorAttachments.forEach(s),s(e.depthAttachment),s(e.stencilAttachment),s(e.depthStencilAttachment)}function v(t){e.deleteFramebuffer(t.framebuffer),t.framebuffer=null,i.framebufferCount--,delete k[t.id]}function g(t){var r;e.bindFramebuffer(36160,t.framebuffer);var a=t.colorAttachments;for(r=0;r<a.length;++r)u(36064+r,a[r]);for(r=a.length;r<n.maxColorAttachments;++r)e.framebufferTexture2D(36160,36064+r,3553,null,0);e.framebufferTexture2D(36160,33306,3553,null,0),e.framebufferTexture2D(36160,36096,3553,null,0),e.framebufferTexture2D(36160,36128,3553,null,0),u(36096,t.depthAttachment),u(36128,t.stencilAttachment),u(33306,t.depthStencilAttachment),e.checkFramebufferStatus(36160),e.bindFramebuffer(36160,b.next?b.next.framebuffer:null),b.cur=b.next,e.getError()}function y(e,t){function n(e,t){var a,i=0,o=0,s=!0,u=!0;a=null;var p=!0,h="rgba",v="uint8",y=1,b=null,w=null,T=null,k=!1;"number"==typeof e?(i=0|e,o=0|t||i):e?("shape"in e?(o=e.shape,i=o[0],o=o[1]):("radius"in e&&(i=o=e.radius),"width"in e&&(i=e.width),"height"in e&&(o=e.height)),("color"in e||"colors"in e)&&(a=e.color||e.colors,Array.isArray(a)),a||("colorCount"in e&&(y=0|e.colorCount),"colorTexture"in e&&(p=!!e.colorTexture,h="rgba4"),"colorType"in e&&(v=e.colorType,!p)&&("half float"===v||"float16"===v?h="rgba16f":"float"!==v&&"float32"!==v||(h="rgba32f")),"colorFormat"in e&&(h=e.colorFormat,0<=x.indexOf(h)?p=!0:0<=_.indexOf(h)&&(p=!1))),("depthTexture"in e||"depthStencilTexture"in e)&&(k=!(!e.depthTexture&&!e.depthStencilTexture)),"depth"in e&&("boolean"==typeof e.depth?s=e.depth:(b=e.depth,u=!1)),"stencil"in e&&("boolean"==typeof e.stencil?u=e.stencil:(w=e.stencil,s=!1)),"depthStencil"in e&&("boolean"==typeof e.depthStencil?s=u=e.depthStencil:(T=e.depthStencil,u=s=!1))):i=o=1;var C=null,E=null,M=null,A=null;if(Array.isArray(a))C=a.map(c);else if(a)C=[c(a)];else for(C=Array(y),a=0;a<y;++a)C[a]=f(i,o,p,h,v);for(i=i||C[0].width,o=o||C[0].height,b?E=c(b):s&&!u&&(E=f(i,o,k,"depth","uint32")),w?M=c(w):u&&!s&&(M=f(i,o,!1,"stencil","uint8")),T?A=c(T):!b&&!w&&u&&s&&(A=f(i,o,k,"depth stencil","depth stencil")),s=null,a=0;a<C.length;++a)l(C[a]),C[a]&&C[a].texture&&(u=ye[C[a].texture._texture.format]*be[C[a].texture._texture.type],null===s&&(s=u));return l(E),l(M),l(A),m(r),r.width=i,r.height=o,r.colorAttachments=C,r.depthAttachment=E,r.stencilAttachment=M,r.depthStencilAttachment=A,n.color=C.map(d),n.depth=d(E),n.stencil=d(M),n.depthStencil=d(A),n.width=r.width,n.height=r.height,g(r),n}var r=new h;return i.framebufferCount++,n(e,t),B(n,{resize:function(e,t){var a=0|e,i=0|t||a;if(a===r.width&&i===r.height)return n;for(var o=r.colorAttachments,s=0;s<o.length;++s)p(o[s],a,i);return p(r.depthAttachment,a,i),p(r.stencilAttachment,a,i),p(r.depthStencilAttachment,a,i),r.width=n.width=a,r.height=n.height=i,g(r),n},_reglType:"framebuffer",_framebuffer:r,destroy:function(){v(r),m(r)},use:function(e){b.setFBO({framebuffer:n},e)}})}var b={cur:null,next:null,dirty:!1,setFBO:null},x=["rgba"],_=["rgba4","rgb565","rgb5 a1"];t.ext_srgb&&_.push("srgba"),t.ext_color_buffer_half_float&&_.push("rgba16f","rgb16f"),t.webgl_color_buffer_float&&_.push("rgba32f");var w=["uint8"];t.oes_texture_half_float&&w.push("half float","float16"),t.oes_texture_float&&w.push("float","float32");var T=0,k={};return B(b,{getFramebuffer:function(e){return"function"==typeof e&&"framebuffer"===e._reglType&&(e=e._framebuffer)instanceof h?e:null},create:y,createCube:function(e){function t(e){var a,i={color:null},o=0,s=null;a="rgba";var l="uint8",u=1;if("number"==typeof e?o=0|e:e?("shape"in e?o=e.shape[0]:("radius"in e&&(o=0|e.radius),"width"in e?o=0|e.width:"height"in e&&(o=0|e.height)),("color"in e||"colors"in e)&&(s=e.color||e.colors,Array.isArray(s)),s||("colorCount"in e&&(u=0|e.colorCount),"colorType"in e&&(l=e.colorType),"colorFormat"in e&&(a=e.colorFormat)),"depth"in e&&(i.depth=e.depth),"stencil"in e&&(i.stencil=e.stencil),"depthStencil"in e&&(i.depthStencil=e.depthStencil)):o=1,s)if(Array.isArray(s))for(e=[],a=0;a<s.length;++a)e[a]=s[a];else e=[s];else for(e=Array(u),s={radius:o,format:a,type:l},a=0;a<u;++a)e[a]=r.createCube(s);for(i.color=Array(e.length),a=0;a<e.length;++a)u=e[a],o=o||u.width,i.color[a]={target:34069,data:e[a]};for(a=0;6>a;++a){for(u=0;u<e.length;++u)i.color[u].target=34069+a;0<a&&(i.depth=n[0].depth,i.stencil=n[0].stencil,i.depthStencil=n[0].depthStencil),n[a]?n[a](i):n[a]=y(i)}return B(t,{width:o,height:o,color:e})}var n=Array(6);return t(e),B(t,{faces:n,resize:function(e){var r=0|e;if(r===t.width)return t;var a=t.color;for(e=0;e<a.length;++e)a[e].resize(r);for(e=0;6>e;++e)n[e].resize(r);return t.width=t.height=r,t},_reglType:"framebufferCube",destroy:function(){n.forEach(function(e){e.destroy()})}})},clear:function(){X(k).forEach(v)},restore:function(){X(k).forEach(function(t){t.framebuffer=e.createFramebuffer(),g(t)})}})}function E(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function M(e,t,n,r){function a(e,t,n,r){this.name=e,this.id=t,this.location=n,this.info=r}function i(e,t){for(var n=0;n<e.length;++n)if(e[n].id===t.id)return void(e[n].location=t.location);e.push(t)}function o(n,r,a){var i=(a=35632===n?u:c)[r];if(!i){var o=t.str(r),i=e.createShader(n);e.shaderSource(i,o),e.compileShader(i),a[r]=i}return i}function s(e,t){this.id=p++,this.fragId=e,this.vertId=t,this.program=null,this.uniforms=[],this.attributes=[],r.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function l(n,s){var l,u;l=o(35632,n.fragId),u=o(35633,n.vertId);var c=n.program=e.createProgram();e.attachShader(c,l),e.attachShader(c,u),e.linkProgram(c);var f=e.getProgramParameter(c,35718);r.profile&&(n.stats.uniformsCount=f);var d=n.uniforms;for(l=0;l<f;++l)if(u=e.getActiveUniform(c,l))if(1<u.size)for(var p=0;p<u.size;++p){var h=u.name.replace("[0]","["+p+"]");i(d,new a(h,t.id(h),e.getUniformLocation(c,h),u))}else i(d,new a(u.name,t.id(u.name),e.getUniformLocation(c,u.name),u));for(f=e.getProgramParameter(c,35721),r.profile&&(n.stats.attributesCount=f),d=n.attributes,l=0;l<f;++l)(u=e.getActiveAttrib(c,l))&&i(d,new a(u.name,t.id(u.name),e.getAttribLocation(c,u.name),u))}var u={},c={},f={},d=[],p=0;return r.profile&&(n.getMaxUniformsCount=function(){var e=0;return d.forEach(function(t){t.stats.uniformsCount>e&&(e=t.stats.uniformsCount)}),e},n.getMaxAttributesCount=function(){var e=0;return d.forEach(function(t){t.stats.attributesCount>e&&(e=t.stats.attributesCount)}),e}),{clear:function(){var t=e.deleteShader.bind(e);X(u).forEach(t),u={},X(c).forEach(t),c={},d.forEach(function(t){e.deleteProgram(t.program)}),d.length=0,f={},n.shaderCount=0},program:function(e,t,r){var a=f[t];a||(a=f[t]={});var i=a[e];return i||(i=new s(t,e),n.shaderCount++,l(i),a[e]=i,d.push(i)),i},restore:function(){u={},c={};for(var e=0;e<d.length;++e)l(d[e])},shader:o,frag:-1,vert:-1}}function A(e,t,n,r,a,i,o){function s(a){var i;i=null===t.next?5121:t.next.colorAttachments[0].texture._texture.type;var o=0,s=0,l=r.framebufferWidth,u=r.framebufferHeight,c=null;return Y(a)?c=a:a&&(o=0|a.x,s=0|a.y,l=0|(a.width||r.framebufferWidth-o),u=0|(a.height||r.framebufferHeight-s),c=a.data||null),n(),a=l*u*4,c||(5121===i?c=new Uint8Array(a):5126===i&&(c=c||new Float32Array(a))),e.pixelStorei(3333,4),e.readPixels(o,s,l,u,6408,i,c),c}return function(e){return e&&"framebuffer"in e?function(e){var n;return t.setFBO({framebuffer:e.framebuffer},function(){n=s(e)}),n}(e):s(e)}}function S(e){return Array.prototype.slice.call(e)}function O(e){return S(e).join("")}function P(){function e(){var e=[],t=[];return B(function(){e.push.apply(e,S(arguments))},{def:function(){var r="v"+n++;return t.push(r),0<arguments.length&&(e.push(r,"="),e.push.apply(e,S(arguments)),e.push(";")),r},toString:function(){return O([0<t.length?"var "+t+";":"",O(e)])}})}function t(){function t(e,t){r(e,t,"=",n.def(e,t),";")}var n=e(),r=e(),a=n.toString,i=r.toString;return B(function(){n.apply(n,S(arguments))},{def:n.def,entry:n,exit:r,save:t,set:function(e,r,a){t(e,r),n(e,r,"=",a,";")},toString:function(){return a()+i()}})}var n=0,r=[],a=[],i=e(),o={};return{global:i,link:function(e){for(var t=0;t<a.length;++t)if(a[t]===e)return r[t];return t="g"+n++,r.push(t),a.push(e),t},block:e,proc:function(e,n){function r(){var e="a"+a.length;return a.push(e),e}var a=[];n=n||0;for(var i=0;i<n;++i)r();var i=t(),s=i.toString;return o[e]=B(i,{arg:r,toString:function(){return O(["function(",a.join(),"){",s(),"}"])}})},scope:t,cond:function(){var e=O(arguments),n=t(),r=t(),a=n.toString,i=r.toString;return B(n,{then:function(){return n.apply(n,S(arguments)),this},else:function(){return r.apply(r,S(arguments)),this},toString:function(){var t=i();return t&&(t="else{"+t+"}"),O(["if(",e,"){",a(),"}",t])}})},compile:function(){var e=['"use strict";',i,"return {"];Object.keys(o).forEach(function(t){e.push('"',t,'":',o[t].toString(),",")}),e.push("}");var t=O(e).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,r.concat(t)).apply(null,a)}}}function R(e){return Array.isArray(e)||Y(e)||l(e)}function L(e){return e.sort(function(e,t){return"viewport"===e?-1:"viewport"===t?1:e<t?-1:1})}function D(e,t,n,r){this.thisDep=e,this.contextDep=t,this.propDep=n,this.append=r}function I(e){return e&&!(e.thisDep||e.contextDep||e.propDep)}function z(e){return new D(!1,!1,!1,e)}function j(e,t){var n=e.type;return 0===n?new D(!0,1<=(n=e.data.length),2<=n,t):4===n?new D((n=e.data).thisDep,n.contextDep,n.propDep,t):new D(3===n,2===n,1===n,t)}function N(e,t,n,r,a,o,s,l,u,c,f,d,p,h,m){function g(e){return e.replace(".","_")}function y(e,t,n){var r=g(e);re.push(e),te[r]=ee[r]=!!n,ae[r]=t}function b(e,t,n){var r=g(e);re.push(e),Array.isArray(n)?(ee[r]=n.slice(),te[r]=n.slice()):ee[r]=te[r]=n,ie[r]=t}function x(){var e=P(),n=e.link,r=e.global;e.id=le++,e.batchId="0";var a=n(oe),i=e.shared={props:"a0"};Object.keys(oe).forEach(function(e){i[e]=r.def(a,".",e)});var o=e.next={},s=e.current={};Object.keys(ie).forEach(function(e){Array.isArray(ee[e])&&(o[e]=r.def(i.next,".",e),s[e]=r.def(i.current,".",e))});var l=e.constants={};Object.keys(se).forEach(function(e){l[e]=r.def(JSON.stringify(se[e]))}),e.invoke=function(t,r){switch(r.type){case 0:var a=["this",i.context,i.props,e.batchId];return t.def(n(r.data),".call(",a.slice(0,Math.max(r.data.length+1,4)),")");case 1:return t.def(i.props,r.data);case 2:return t.def(i.context,r.data);case 3:return t.def("this",r.data);case 4:return r.data.append(e,t),r.data.ref}},e.attribCache={};var u={};return e.scopeAttrib=function(e){if((e=t.id(e))in u)return u[e];var r=c.scope[e];return r||(r=c.scope[e]=new Z),u[e]=n(r)},e}function _(e,t){var n=e.static,r=e.dynamic;if("framebuffer"in n){var a=n.framebuffer;return a?(a=l.getFramebuffer(a),z(function(e,t){var n=e.link(a),r=e.shared;return t.set(r.framebuffer,".next",n),r=r.context,t.set(r,".framebufferWidth",n+".width"),t.set(r,".framebufferHeight",n+".height"),n})):z(function(e,t){var n=e.shared;return t.set(n.framebuffer,".next","null"),n=n.context,t.set(n,".framebufferWidth",n+".drawingBufferWidth"),t.set(n,".framebufferHeight",n+".drawingBufferHeight"),"null"})}if("framebuffer"in r){var i=r.framebuffer;return j(i,function(e,t){var n=e.invoke(t,i),r=e.shared,a=r.framebuffer,n=t.def(a,".getFramebuffer(",n,")");return t.set(a,".next",n),r=r.context,t.set(r,".framebufferWidth",n+"?"+n+".width:"+r+".drawingBufferWidth"),t.set(r,".framebufferHeight",n+"?"+n+".height:"+r+".drawingBufferHeight"),n})}return null}function w(e){function n(e){if(e in r){var n=t.id(r[e]);return(e=z(function(){return n})).id=n,e}if(e in a){var i=a[e];return j(i,function(e,t){var n=e.invoke(t,i);return t.def(e.shared.strings,".id(",n,")")})}return null}var r=e.static,a=e.dynamic,i=n("frag"),o=n("vert"),s=null;return I(i)&&I(o)?(s=f.program(o.id,i.id),e=z(function(e,t){return e.link(s)})):e=new D(i&&i.thisDep||o&&o.thisDep,i&&i.contextDep||o&&o.contextDep,i&&i.propDep||o&&o.propDep,function(e,t){var n,r,a=e.shared.shader;return n=i?i.append(e,t):t.def(a,".","frag"),r=o?o.append(e,t):t.def(a,".","vert"),t.def(a+".program("+r+","+n+")")}),{frag:i,vert:o,progVar:e,program:s}}function T(e,t){function n(e,t){if(e in r){var n=0|r[e];return z(function(e,r){return t&&(e.OFFSET=n),n})}if(e in a){var o=a[e];return j(o,function(e,n){var r=e.invoke(n,o);return t&&(e.OFFSET=r),r})}return t&&i?z(function(e,t){return e.OFFSET="0",0}):null}var r=e.static,a=e.dynamic,i=function(){if("elements"in r){var e=r.elements;R(e)?e=o.getElements(o.create(e,!0)):e&&(e=o.getElements(e));var t=z(function(t,n){if(e){var r=t.link(e);return t.ELEMENTS=r}return t.ELEMENTS=null});return t.value=e,t}if("elements"in a){var n=a.elements;return j(n,function(e,t){var r=e.shared,a=r.isBufferArgs,r=r.elements,i=e.invoke(t,n),o=t.def("null"),a=t.def(a,"(",i,")"),i=e.cond(a).then(o,"=",r,".createStream(",i,");").else(o,"=",r,".getElements(",i,");");return t.entry(i),t.exit(e.cond(a).then(r,".destroyStream(",o,");")),e.ELEMENTS=o})}return null}(),s=n("offset",!0);return{elements:i,primitive:function(){if("primitive"in r){var e=r.primitive;return z(function(t,n){return ne[e]})}if("primitive"in a){var t=a.primitive;return j(t,function(e,n){var r=e.constants.primTypes,a=e.invoke(n,t);return n.def(r,"[",a,"]")})}return i?I(i)?i.value?z(function(e,t){return t.def(e.ELEMENTS,".primType")}):z(function(){return 4}):new D(i.thisDep,i.contextDep,i.propDep,function(e,t){var n=e.ELEMENTS;return t.def(n,"?",n,".primType:",4)}):null}(),count:function(){if("count"in r){var e=0|r.count;return z(function(){return e})}if("count"in a){var t=a.count;return j(t,function(e,n){return e.invoke(n,t)})}return i?I(i)?i?s?new D(s.thisDep,s.contextDep,s.propDep,function(e,t){return t.def(e.ELEMENTS,".vertCount-",e.OFFSET)}):z(function(e,t){return t.def(e.ELEMENTS,".vertCount")}):z(function(){return-1}):new D(i.thisDep||s.thisDep,i.contextDep||s.contextDep,i.propDep||s.propDep,function(e,t){var n=e.ELEMENTS;return e.OFFSET?t.def(n,"?",n,".vertCount-",e.OFFSET,":-1"):t.def(n,"?",n,".vertCount:-1")}):null}(),instances:n("instances",!1),offset:s}}function k(e,n){var r=e.static,i=e.dynamic,o={};return Object.keys(r).forEach(function(e){var n=r[e],i=t.id(e),s=new Z;if(R(n))s.state=1,s.buffer=a.getBuffer(a.create(n,34962,!1,!0)),s.type=0;else{var l=a.getBuffer(n);if(l)s.state=1,s.buffer=l,s.type=0;else if("constant"in n){var u=n.constant;s.buffer="null",s.state=2,"number"==typeof u?s.x=u:xe.forEach(function(e,t){t<u.length&&(s[e]=u[t])})}else{var l=R(n.buffer)?a.getBuffer(a.create(n.buffer,34962,!1,!0)):a.getBuffer(n.buffer),c=0|n.offset,f=0|n.stride,d=0|n.size,p=!!n.normalized,h=0;"type"in n&&(h=K[n.type]),n=0|n.divisor,s.buffer=l,s.state=1,s.size=d,s.normalized=p,s.type=h||l.dtype,s.offset=c,s.stride=f,s.divisor=n}}o[e]=z(function(e,t){var n=e.attribCache;if(i in n)return n[i];var r={isStream:!1};return Object.keys(s).forEach(function(e){r[e]=s[e]}),s.buffer&&(r.buffer=e.link(s.buffer),r.type=r.type||r.buffer+".dtype"),n[i]=r})}),Object.keys(i).forEach(function(e){var t=i[e];o[e]=j(t,function(e,n){function r(e){n(l[e],"=",a,".",e,"|0;")}var a=e.invoke(n,t),i=e.shared,o=i.isBufferArgs,s=i.buffer,l={isStream:n.def(!1)},u=new Z;u.state=1,Object.keys(u).forEach(function(e){l[e]=n.def(""+u[e])});var c=l.buffer,f=l.type;return n("if(",o,"(",a,")){",l.isStream,"=true;",c,"=",s,".createStream(",34962,",",a,");",f,"=",c,".dtype;","}else{",c,"=",s,".getBuffer(",a,");","if(",c,"){",f,"=",c,".dtype;",'}else if("constant" in ',a,"){",l.state,"=",2,";","if(typeof "+a+'.constant === "number"){',l[xe[0]],"=",a,".constant;",xe.slice(1).map(function(e){return l[e]}).join("="),"=0;","}else{",xe.map(function(e,t){return l[e]+"="+a+".constant.length>"+t+"?"+a+".constant["+t+"]:0;"}).join(""),"}}else{","if(",o,"(",a,".buffer)){",c,"=",s,".createStream(",34962,",",a,".buffer);","}else{",c,"=",s,".getBuffer(",a,".buffer);","}",f,'="type" in ',a,"?",i.glTypes,"[",a,".type]:",c,".dtype;",l.normalized,"=!!",a,".normalized;"),r("size"),r("offset"),r("stride"),r("divisor"),n("}}"),n.exit("if(",l.isStream,"){",s,".destroyStream(",c,");","}"),l})}),o}function C(e,t,n,r,a){var o=_(e),s=function(e,t,n){function r(e){if(e in a){var n=a[e];e=!0;var r,o,s=0|n.x,l=0|n.y;return"width"in n?r=0|n.width:e=!1,"height"in n?o=0|n.height:e=!1,new D(!e&&t&&t.thisDep,!e&&t&&t.contextDep,!e&&t&&t.propDep,function(e,t){var a=e.shared.context,i=r;"width"in n||(i=t.def(a,".","framebufferWidth","-",s));var u=o;return"height"in n||(u=t.def(a,".","framebufferHeight","-",l)),[s,l,i,u]})}if(e in i){var u=i[e];return e=j(u,function(e,t){var n=e.invoke(t,u),r=e.shared.context,a=t.def(n,".x|0"),i=t.def(n,".y|0"),o=t.def('"width" in ',n,"?",n,".width|0:","(",r,".","framebufferWidth","-",a,")"),n=t.def('"height" in ',n,"?",n,".height|0:","(",r,".","framebufferHeight","-",i,")");return[a,i,o,n]}),t&&(e.thisDep=e.thisDep||t.thisDep,e.contextDep=e.contextDep||t.contextDep,e.propDep=e.propDep||t.propDep),e}return t?new D(t.thisDep,t.contextDep,t.propDep,function(e,t){var n=e.shared.context;return[0,0,t.def(n,".","framebufferWidth"),t.def(n,".","framebufferHeight")]}):null}var a=e.static,i=e.dynamic;if(e=r("viewport")){var o=e;e=new D(e.thisDep,e.contextDep,e.propDep,function(e,t){var n=o.append(e,t),r=e.shared.context;return t.set(r,".viewportWidth",n[2]),t.set(r,".viewportHeight",n[3]),n})}return{viewport:e,scissor_box:r("scissor.box")}}(e,o),l=T(e),u=function(e,t){var n=e.static,r=e.dynamic,a={};return re.forEach(function(e){function t(t,i){if(e in n){var s=t(n[e]);a[o]=z(function(){return s})}else if(e in r){var l=r[e];a[o]=j(l,function(e,t){return i(e,t,e.invoke(t,l))})}}var o=g(e);switch(e){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":return t(function(e){return e},function(e,t,n){return n});case"depth.func":return t(function(e){return Te[e]},function(e,t,n){return t.def(e.constants.compareFuncs,"[",n,"]")});case"depth.range":return t(function(e){return e},function(e,t,n){return[t.def("+",n,"[0]"),t=t.def("+",n,"[1]")]});case"blend.func":return t(function(e){return[we["srcRGB"in e?e.srcRGB:e.src],we["dstRGB"in e?e.dstRGB:e.dst],we["srcAlpha"in e?e.srcAlpha:e.src],we["dstAlpha"in e?e.dstAlpha:e.dst]]},function(e,t,n){function r(e,r){return t.def('"',e,r,'" in ',n,"?",n,".",e,r,":",n,".",e)}e=e.constants.blendFuncs;var a=r("src","RGB"),i=r("dst","RGB"),o=(a=t.def(e,"[",a,"]"),t.def(e,"[",r("src","Alpha"),"]"));return[a,i=t.def(e,"[",i,"]"),o,e=t.def(e,"[",r("dst","Alpha"),"]")]});case"blend.equation":return t(function(e){return"string"==typeof e?[$[e],$[e]]:"object"==typeof e?[$[e.rgb],$[e.alpha]]:void 0},function(e,t,n){var r=e.constants.blendEquations,a=t.def(),i=t.def();return(e=e.cond("typeof ",n,'==="string"')).then(a,"=",i,"=",r,"[",n,"];"),e.else(a,"=",r,"[",n,".rgb];",i,"=",r,"[",n,".alpha];"),t(e),[a,i]});case"blend.color":return t(function(e){return i(4,function(t){return+e[t]})},function(e,t,n){return i(4,function(e){return t.def("+",n,"[",e,"]")})});case"stencil.mask":return t(function(e){return 0|e},function(e,t,n){return t.def(n,"|0")});case"stencil.func":return t(function(e){return[Te[e.cmp||"keep"],e.ref||0,"mask"in e?e.mask:-1]},function(e,t,n){return[e=t.def('"cmp" in ',n,"?",e.constants.compareFuncs,"[",n,".cmp]",":",7680),t.def(n,".ref|0"),t=t.def('"mask" in ',n,"?",n,".mask|0:-1")]});case"stencil.opFront":case"stencil.opBack":return t(function(t){return["stencil.opBack"===e?1029:1028,ke[t.fail||"keep"],ke[t.zfail||"keep"],ke[t.zpass||"keep"]]},function(t,n,r){function a(e){return n.def('"',e,'" in ',r,"?",i,"[",r,".",e,"]:",7680)}var i=t.constants.stencilOps;return["stencil.opBack"===e?1029:1028,a("fail"),a("zfail"),a("zpass")]});case"polygonOffset.offset":return t(function(e){return[0|e.factor,0|e.units]},function(e,t,n){return[t.def(n,".factor|0"),t=t.def(n,".units|0")]});case"cull.face":return t(function(e){var t=0;return"front"===e?t=1028:"back"===e&&(t=1029),t},function(e,t,n){return t.def(n,'==="front"?',1028,":",1029)});case"lineWidth":return t(function(e){return e},function(e,t,n){return n});case"frontFace":return t(function(e){return Ce[e]},function(e,t,n){return t.def(n+'==="cw"?2304:2305')});case"colorMask":return t(function(e){return e.map(function(e){return!!e})},function(e,t,n){return i(4,function(e){return"!!"+n+"["+e+"]"})});case"sample.coverage":return t(function(e){return["value"in e?e.value:1,!!e.invert]},function(e,t,n){return[t.def('"value" in ',n,"?+",n,".value:1"),t=t.def("!!",n,".invert")]})}}),a}(e),c=w(e),f=s.viewport;return f&&(u.viewport=f),f=g("scissor.box"),(s=s[f])&&(u[f]=s),s=0<Object.keys(u).length,(o={framebuffer:o,draw:l,shader:c,state:u,dirty:s}).profile=function(e){var t,n=e.static;if(e=e.dynamic,"profile"in n){var r=!!n.profile;(t=z(function(e,t){return r})).enable=r}else if("profile"in e){var a=e.profile;t=j(a,function(e,t){return e.invoke(t,a)})}return t}(e),o.uniforms=function(e,t){var n=e.static,r=e.dynamic,a={};return Object.keys(n).forEach(function(e){var t,r=n[e];if("number"==typeof r||"boolean"==typeof r)t=z(function(){return r});else if("function"==typeof r){var o=r._reglType;"texture2d"===o||"textureCube"===o?t=z(function(e){return e.link(r)}):"framebuffer"!==o&&"framebufferCube"!==o||(t=z(function(e){return e.link(r.color[0])}))}else v(r)&&(t=z(function(e){return e.global.def("[",i(r.length,function(e){return r[e]}),"]")}));t.value=r,a[e]=t}),Object.keys(r).forEach(function(e){var t=r[e];a[e]=j(t,function(e,n){return e.invoke(n,t)})}),a}(n),o.attributes=k(t),o.context=function(e){var t=e.static,n=e.dynamic,r={};return Object.keys(t).forEach(function(e){var n=t[e];r[e]=z(function(e,t){return"number"==typeof n||"boolean"==typeof n?""+n:e.link(n)})}),Object.keys(n).forEach(function(e){var t=n[e];r[e]=j(t,function(e,n){return e.invoke(n,t)})}),r}(r),o}function E(e,t,n){var r=e.shared.context,a=e.scope();Object.keys(n).forEach(function(i){t.save(r,"."+i),a(r,".",i,"=",n[i].append(e,t),";")}),t(a)}function M(e,t,n,r){var a,i=e.shared,o=i.gl,s=i.framebuffer;Q&&(a=t.def(i.extensions,".webgl_draw_buffers"));var l=e.constants,i=l.drawBuffer,l=l.backBuffer;e=n?n.append(e,t):t.def(s,".next"),r||t("if(",e,"!==",s,".cur){"),t("if(",e,"){",o,".bindFramebuffer(",36160,",",e,".framebuffer);"),Q&&t(a,".drawBuffersWEBGL(",i,"[",e,".colorAttachments.length]);"),t("}else{",o,".bindFramebuffer(",36160,",null);"),Q&&t(a,".drawBuffersWEBGL(",l,");"),t("}",s,".cur=",e,";"),r||t("}")}function A(e,t,n){var r=e.shared,a=r.gl,o=e.current,s=e.next,l=r.current,u=r.next,c=e.cond(l,".dirty");re.forEach(function(t){var r,f;if(!((t=g(t))in n.state))if(t in s){r=s[t],f=o[t];var d=i(ee[t].length,function(e){return c.def(r,"[",e,"]")});c(e.cond(d.map(function(e,t){return e+"!=="+f+"["+t+"]"}).join("||")).then(a,".",ie[t],"(",d,");",d.map(function(e,t){return f+"["+t+"]="+e}).join(";"),";"))}else r=c.def(u,".",t),d=e.cond(r,"!==",l,".",t),c(d),t in ae?d(e.cond(r).then(a,".enable(",ae[t],");").else(a,".disable(",ae[t],");"),l,".",t,"=",r,";"):d(a,".",ie[t],"(",r,");",l,".",t,"=",r,";")}),0===Object.keys(n.state).length&&c(l,".dirty=false;"),t(c)}function S(e,t,n,r){var a=e.shared,i=e.current,o=a.current,s=a.gl;L(Object.keys(n)).forEach(function(a){var l=n[a];if(!r||r(l)){var u=l.append(e,t);if(ae[a]){var c=ae[a];I(l)?t(s,u?".enable(":".disable(",c,");"):t(e.cond(u).then(s,".enable(",c,");").else(s,".disable(",c,");")),t(o,".",a,"=",u,";")}else if(v(u)){var f=i[a];t(s,".",ie[a],"(",u,");",u.map(function(e,t){return f+"["+t+"]="+e}).join(";"),";")}else t(s,".",ie[a],"(",u,");",o,".",a,"=",u,";")}})}function O(e,t){J&&(e.instancing=t.def(e.shared.extensions,".angle_instanced_arrays"))}function N(e,t,n,r,a){function i(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function o(e){u=t.def(),e(u,"=",i(),";"),"string"==typeof a?e(d,".count+=",a,";"):e(d,".count++;"),h&&(r?(c=t.def(),e(c,"=",m,".getNumPendingQueries();")):e(m,".beginQuery(",d,");"))}function s(e){e(d,".cpuTime+=",i(),"-",u,";"),h&&(r?e(m,".pushScopeStats(",c,",",m,".getNumPendingQueries(),",d,");"):e(m,".endQuery();"))}function l(e){var n=t.def(p,".profile");t(p,".profile=",e,";"),t.exit(p,".profile=",n,";")}var u,c,f=e.shared,d=e.stats,p=f.current,m=f.timer;if(n=n.profile){if(I(n))return void(n.enable?(o(t),s(t.exit),l("true")):l("false"));l(n=n.append(e,t))}else n=t.def(p,".profile");o(f=e.block()),t("if(",n,"){",f,"}"),s(e=e.block()),t.exit("if(",n,"){",e,"}")}function F(e,t,n,r,a){function i(n,r,a){function i(){t("if(!",c,".buffer){",l,".enableVertexAttribArray(",u,");}");var n,i=a.type;n=a.size?t.def(a.size,"||",r):r,t("if(",c,".type!==",i,"||",c,".size!==",n,"||",p.map(function(e){return c+"."+e+"!=="+a[e]}).join("||"),"){",l,".bindBuffer(",34962,",",f,".buffer);",l,".vertexAttribPointer(",[u,n,i,a.normalized,a.stride,a.offset],");",c,".type=",i,";",c,".size=",n,";",p.map(function(e){return c+"."+e+"="+a[e]+";"}).join(""),"}"),J&&(i=a.divisor,t("if(",c,".divisor!==",i,"){",e.instancing,".vertexAttribDivisorANGLE(",[u,i],");",c,".divisor=",i,";}"))}function s(){t("if(",c,".buffer){",l,".disableVertexAttribArray(",u,");","}if(",xe.map(function(e,t){return c+"."+e+"!=="+d[t]}).join("||"),"){",l,".vertexAttrib4f(",u,",",d,");",xe.map(function(e,t){return c+"."+e+"="+d[t]+";"}).join(""),"}")}var l=o.gl,u=t.def(n,".location"),c=t.def(o.attributes,"[",u,"]");n=a.state;var f=a.buffer,d=[a.x,a.y,a.z,a.w],p=["buffer","normalized","offset","stride"];1===n?i():2===n?s():(t("if(",n,"===",1,"){"),i(),t("}else{"),s(),t("}"))}var o=e.shared;r.forEach(function(r){var o,s=r.name,l=n.attributes[s];if(l){if(!a(l))return;o=l.append(e,t)}else{if(!a(Ee))return;var u=e.scopeAttrib(s);o={},Object.keys(new Z).forEach(function(e){o[e]=t.def(u,".",e)})}i(e.link(r),function(e){switch(e){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(r.info.type),o)})}function B(e,n,r,a,o){for(var s,l=e.shared,u=l.gl,c=0;c<a.length;++c){var f,d=a[c],p=d.name,h=d.info.type,m=r.uniforms[p],d=e.link(d)+".location";if(m){if(!o(m))continue;if(I(m)){if(p=m.value,35678===h||35680===h)h=e.link(p._texture||p.color[0]._texture),n(u,".uniform1i(",d,",",h+".bind());"),n.exit(h,".unbind();");else if(35674===h||35675===h||35676===h)p=e.global.def("new Float32Array(["+Array.prototype.slice.call(p)+"])"),m=2,35675===h?m=3:35676===h&&(m=4),n(u,".uniformMatrix",m,"fv(",d,",false,",p,");");else{switch(h){case 5126:s="1f";break;case 35664:s="2f";break;case 35665:s="3f";break;case 35666:s="4f";break;case 35670:case 5124:s="1i";break;case 35671:case 35667:s="2i";break;case 35672:case 35668:s="3i";break;case 35673:s="4i";break;case 35669:s="4i"}n(u,".uniform",s,"(",d,",",v(p)?Array.prototype.slice.call(p):p,");")}continue}f=m.append(e,n)}else{if(!o(Ee))continue;f=n.def(l.uniforms,"[",t.id(p),"]")}switch(35678===h?n("if(",f,"&&",f,'._reglType==="framebuffer"){',f,"=",f,".color[0];","}"):35680===h&&n("if(",f,"&&",f,'._reglType==="framebufferCube"){',f,"=",f,".color[0];","}"),p=1,h){case 35678:case 35680:h=n.def(f,"._texture"),n(u,".uniform1i(",d,",",h,".bind());"),n.exit(h,".unbind();");continue;case 5124:case 35670:s="1i";break;case 35667:case 35671:s="2i",p=2;break;case 35668:case 35672:s="3i",p=3;break;case 35669:case 35673:s="4i",p=4;break;case 5126:s="1f";break;case 35664:s="2f",p=2;break;case 35665:s="3f",p=3;break;case 35666:s="4f",p=4;break;case 35674:s="Matrix2fv";break;case 35675:s="Matrix3fv";break;case 35676:s="Matrix4fv"}if(n(u,".uniform",s,"(",d,","),"M"===s.charAt(0)){var d=Math.pow(h-35674+2,2),g=e.global.def("new Float32Array(",d,")");n("false,(Array.isArray(",f,")||",f," instanceof Float32Array)?",f,":(",i(d,function(e){return g+"["+e+"]="+f+"["+e+"]"}),",",g,")")}else n(1<p?i(p,function(e){return f+"["+e+"]"}):f);n(");")}}function V(e,t,n,r){function a(a){var i=d[a];return i?i.contextDep&&r.contextDynamic||i.propDep?i.append(e,n):i.append(e,t):t.def(f,".",a)}function i(){function e(){n(l,".drawElementsInstancedANGLE(",[h,v,g,m+"<<(("+g+"-5121)>>1)",s],");")}function t(){n(l,".drawArraysInstancedANGLE(",[h,m,v,s],");")}p?y?e():(n("if(",p,"){"),e(),n("}else{"),t(),n("}")):t()}function o(){function e(){n(c+".drawElements("+[h,v,g,m+"<<(("+g+"-5121)>>1)"]+");")}function t(){n(c+".drawArrays("+[h,m,v]+");")}p?y?e():(n("if(",p,"){"),e(),n("}else{"),t(),n("}")):t()}var s,l,u=e.shared,c=u.gl,f=u.draw,d=r.draw,p=function(){var a=d.elements,i=t;return a?((a.contextDep&&r.contextDynamic||a.propDep)&&(i=n),a=a.append(e,i)):a=i.def(f,".","elements"),a&&i("if("+a+")"+c+".bindBuffer(34963,"+a+".buffer.buffer);"),a}(),h=a("primitive"),m=a("offset"),v=function(){var a=d.count,i=t;return a?((a.contextDep&&r.contextDynamic||a.propDep)&&(i=n),a=a.append(e,i)):a=i.def(f,".","count"),a}();if("number"==typeof v){if(0===v)return}else n("if(",v,"){"),n.exit("}");J&&(s=a("instances"),l=e.instancing);var g=p+".type",y=d.elements&&I(d.elements);J&&("number"!=typeof s||0<=s)?"string"==typeof s?(n("if(",s,">0){"),i(),n("}else if(",s,"<0){"),o(),n("}")):i():o()}function G(e,t,n,r,a){return t=x(),a=t.proc("body",a),J&&(t.instancing=a.def(t.shared.extensions,".angle_instanced_arrays")),e(t,a,n,r),t.compile().body}function H(e,t,n,r){O(e,t),F(e,t,n,r.attributes,function(){return!0}),B(e,t,n,r.uniforms,function(){return!0}),V(e,t,t,n)}function W(e,t,n,r){function a(){return!0}e.batchId="a1",O(e,t),F(e,t,n,r.attributes,a),B(e,t,n,r.uniforms,a),V(e,t,t,n)}function q(e,t,n,r){function a(e){return e.contextDep&&o||e.propDep}function i(e){return!a(e)}O(e,t);var o=n.contextDep,s=t.def(),l=t.def();e.shared.props=l,e.batchId=s;var u=e.scope(),c=e.scope();t(u.entry,"for(",s,"=0;",s,"<","a1",";++",s,"){",l,"=","a0","[",s,"];",c,"}",u.exit),n.needsContext&&E(e,c,n.context),n.needsFramebuffer&&M(e,c,n.framebuffer),S(e,c,n.state,a),n.profile&&a(n.profile)&&N(e,c,n,!1,!0),r?(F(e,u,n,r.attributes,i),F(e,c,n,r.attributes,a),B(e,u,n,r.uniforms,i),B(e,c,n,r.uniforms,a),V(e,u,c,n)):(t=e.global.def("{}"),r=n.shader.progVar.append(e,c),l=c.def(r,".id"),u=c.def(t,"[",l,"]"),c(e.shared.gl,".useProgram(",r,".program);","if(!",u,"){",u,"=",t,"[",l,"]=",e.link(function(t){return G(W,e,n,t,2)}),"(",r,");}",u,".call(this,a0[",s,"],",s,");"))}function Y(e,n){function r(t){var r=n.shader[t];r&&a.set(i.shader,"."+t,r.append(e,a))}var a=e.proc("scope",3);e.batchId="a2";var i=e.shared,o=i.current;E(e,a,n.context),n.framebuffer&&n.framebuffer.append(e,a),L(Object.keys(n.state)).forEach(function(t){var r=n.state[t].append(e,a);v(r)?r.forEach(function(n,r){a.set(e.next[t],"["+r+"]",n)}):a.set(i.next,"."+t,r)}),N(e,a,n,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(t){var r=n.draw[t];r&&a.set(i.draw,"."+t,""+r.append(e,a))}),Object.keys(n.uniforms).forEach(function(r){a.set(i.uniforms,"["+t.id(r)+"]",n.uniforms[r].append(e,a))}),Object.keys(n.attributes).forEach(function(t){var r=n.attributes[t].append(e,a),i=e.scopeAttrib(t);Object.keys(new Z).forEach(function(e){a.set(i,"."+e,r[e])})}),r("vert"),r("frag"),0<Object.keys(n.state).length&&(a(o,".dirty=true;"),a.exit(o,".dirty=true;")),a("a1(",e.shared.context,",a0,",e.batchId,");")}function X(e,t,n){var r=t.static[n];if(r&&function(e){if("object"==typeof e&&!v(e)){for(var t=Object.keys(e),n=0;n<t.length;++n)if(U.isDynamic(e[t[n]]))return!0;return!1}}(r)){var a=e.global,i=Object.keys(r),o=!1,s=!1,l=!1,u=e.global.def("{}");i.forEach(function(t){var n=r[t];if(U.isDynamic(n))"function"==typeof n&&(n=r[t]=U.unbox(n)),t=j(n,null),o=o||t.thisDep,l=l||t.propDep,s=s||t.contextDep;else{switch(a(u,".",t,"="),typeof n){case"number":a(n);break;case"string":a('"',n,'"');break;case"object":Array.isArray(n)&&a("[",n.join(),"]");break;default:a(e.link(n))}a(";")}}),t.dynamic[n]=new U.DynamicVariable(4,{thisDep:o,contextDep:s,propDep:l,ref:u,append:function(e,t){i.forEach(function(n){var a=r[n];U.isDynamic(a)&&(a=e.invoke(t,a),t(u,".",n,"=",a,";"))})}}),delete t.static[n]}}var Z=c.Record,$={add:32774,subtract:32778,"reverse subtract":32779};n.ext_blend_minmax&&($.min=32775,$.max=32776);var J=n.angle_instanced_arrays,Q=n.webgl_draw_buffers,ee={dirty:!0,profile:m.profile},te={},re=[],ae={},ie={};y("dither",3024),y("blend.enable",3042),b("blend.color","blendColor",[0,0,0,0]),b("blend.equation","blendEquationSeparate",[32774,32774]),b("blend.func","blendFuncSeparate",[1,0,1,0]),y("depth.enable",2929,!0),b("depth.func","depthFunc",513),b("depth.range","depthRange",[0,1]),b("depth.mask","depthMask",!0),b("colorMask","colorMask",[!0,!0,!0,!0]),y("cull.enable",2884),b("cull.face","cullFace",1029),b("frontFace","frontFace",2305),b("lineWidth","lineWidth",1),y("polygonOffset.enable",32823),b("polygonOffset.offset","polygonOffset",[0,0]),y("sample.alpha",32926),y("sample.enable",32928),b("sample.coverage","sampleCoverage",[1,!1]),y("stencil.enable",2960),b("stencil.mask","stencilMask",-1),b("stencil.func","stencilFunc",[519,0,-1]),b("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),b("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),y("scissor.enable",3089),b("scissor.box","scissor",[0,0,e.drawingBufferWidth,e.drawingBufferHeight]),b("viewport","viewport",[0,0,e.drawingBufferWidth,e.drawingBufferHeight]);var oe={gl:e,context:p,strings:t,next:te,current:ee,draw:d,elements:o,buffer:a,shader:f,attributes:c.state,uniforms:u,framebuffer:l,extensions:n,timer:h,isBufferArgs:R},se={primTypes:ne,compareFuncs:Te,blendFuncs:we,blendEquations:$,stencilOps:ke,glTypes:K,orientationType:Ce};Q&&(se.backBuffer=[1029],se.drawBuffer=i(r.maxDrawbuffers,function(e){return 0===e?[0]:i(e,function(e){return 36064+e})}));var le=0;return{next:te,current:ee,procs:function(){var e=x(),t=e.proc("poll"),n=e.proc("refresh"),a=e.block();t(a),n(a);var o,s=e.shared,l=s.gl,u=s.next,c=s.current;a(c,".dirty=false;"),M(e,t),M(e,n,null,!0),J&&(o=e.link(J));for(var f=0;f<r.maxAttributes;++f){var d=n.def(s.attributes,"[",f,"]"),p=e.cond(d,".buffer");p.then(l,".enableVertexAttribArray(",f,");",l,".bindBuffer(",34962,",",d,".buffer.buffer);",l,".vertexAttribPointer(",f,",",d,".size,",d,".type,",d,".normalized,",d,".stride,",d,".offset);").else(l,".disableVertexAttribArray(",f,");",l,".vertexAttrib4f(",f,",",d,".x,",d,".y,",d,".z,",d,".w);",d,".buffer=null;"),n(p),J&&n(o,".vertexAttribDivisorANGLE(",f,",",d,".divisor);")}return Object.keys(ae).forEach(function(r){var i=ae[r],o=a.def(u,".",r),s=e.block();s("if(",o,"){",l,".enable(",i,")}else{",l,".disable(",i,")}",c,".",r,"=",o,";"),n(s),t("if(",o,"!==",c,".",r,"){",s,"}")}),Object.keys(ie).forEach(function(r){var o,s,f=ie[r],d=ee[r],p=e.block();p(l,".",f,"("),v(d)?(f=d.length,o=e.global.def(u,".",r),s=e.global.def(c,".",r),p(i(f,function(e){return o+"["+e+"]"}),");",i(f,function(e){return s+"["+e+"]="+o+"["+e+"];"}).join("")),t("if(",i(f,function(e){return o+"["+e+"]!=="+s+"["+e+"]"}).join("||"),"){",p,"}")):(o=a.def(u,".",r),s=a.def(c,".",r),p(o,");",c,".",r,"=",o,";"),t("if(",o,"!==",s,"){",p,"}")),n(p)}),e.compile()}(),compile:function(e,t,n,r,a){var i=x();return i.stats=i.link(a),Object.keys(t.static).forEach(function(e){X(i,t,e)}),_e.forEach(function(t){X(i,e,t)}),n=C(e,t,n,r),function(e,t){var n=e.proc("draw",1);O(e,n),E(e,n,t.context),M(e,n,t.framebuffer),A(e,n,t),S(e,n,t.state),N(e,n,t,!1,!0);var r=t.shader.progVar.append(e,n);if(n(e.shared.gl,".useProgram(",r,".program);"),t.shader.program)H(e,n,t,t.shader.program);else{var a=e.global.def("{}"),i=n.def(r,".id"),o=n.def(a,"[",i,"]");n(e.cond(o).then(o,".call(this,a0);").else(o,"=",a,"[",i,"]=",e.link(function(n){return G(H,e,t,n,1)}),"(",r,");",o,".call(this,a0);"))}0<Object.keys(t.state).length&&n(e.shared.current,".dirty=true;")}(i,n),Y(i,n),function(e,t){function n(e){return e.contextDep&&a||e.propDep}var r=e.proc("batch",2);e.batchId="0",O(e,r);var a=!1,i=!0;Object.keys(t.context).forEach(function(e){a=a||t.context[e].propDep}),a||(E(e,r,t.context),i=!1);var o=!1;if((s=t.framebuffer)?(s.propDep?a=o=!0:s.contextDep&&a&&(o=!0),o||M(e,r,s)):M(e,r,null),t.state.viewport&&t.state.viewport.propDep&&(a=!0),A(e,r,t),S(e,r,t.state,function(e){return!n(e)}),t.profile&&n(t.profile)||N(e,r,t,!1,"a1"),t.contextDep=a,t.needsContext=i,t.needsFramebuffer=o,(i=t.shader.progVar).contextDep&&a||i.propDep)q(e,r,t,null);else if(i=i.append(e,r),r(e.shared.gl,".useProgram(",i,".program);"),t.shader.program)q(e,r,t,t.shader.program);else{var s=e.global.def("{}"),o=r.def(i,".id"),l=r.def(s,"[",o,"]");r(e.cond(l).then(l,".call(this,a0,a1);").else(l,"=",s,"[",o,"]=",e.link(function(n){return G(q,e,t,n,2)}),"(",i,");",l,".call(this,a0,a1);"))}0<Object.keys(t.state).length&&r(e.shared.current,".dirty=true;")}(i,n),i.compile()}}}function F(e,t){for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}var B=function(e,t){for(var n=Object.keys(t),r=0;r<n.length;++r)e[n[r]]=t[n[r]];return e},V=0,U={DynamicVariable:e,define:function(n,r){return new e(n,t(r+""))},isDynamic:function(t){return"function"==typeof t&&!t._reglType||t instanceof e},unbox:function(t,n){return"function"==typeof t?new e(0,t):t},accessor:t},G={next:"function"==typeof requestAnimationFrame?function(e){return requestAnimationFrame(e)}:function(e){return setTimeout(e,16)},cancel:"function"==typeof cancelAnimationFrame?function(e){return cancelAnimationFrame(e)}:clearTimeout},H="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date},W=s();W.zero=s();var q=function(e,t){var n=1;t.ext_texture_filter_anisotropic&&(n=e.getParameter(34047));var r=1,a=1;t.webgl_draw_buffers&&(r=e.getParameter(34852),a=e.getParameter(36063));var i=!!t.oes_texture_float;if(i){i=e.createTexture(),e.bindTexture(3553,i),e.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var o=e.createFramebuffer();if(e.bindFramebuffer(36160,o),e.framebufferTexture2D(36160,36064,3553,i,0),e.bindTexture(3553,null),36053!==e.checkFramebufferStatus(36160))i=!1;else{e.viewport(0,0,1,1),e.clearColor(1,0,0,1),e.clear(16384);var s=W.allocType(5126,4);e.readPixels(0,0,1,1,6408,5126,s),e.getError()?i=!1:(e.deleteFramebuffer(o),e.deleteTexture(i),i=1===s[0]),W.freeType(s)}}return s=!0,s=e.createTexture(),o=W.allocType(5121,36),e.activeTexture(33984),e.bindTexture(34067,s),e.texImage2D(34069,0,6408,3,3,0,6408,5121,o),W.freeType(o),e.bindTexture(34067,null),e.deleteTexture(s),s=!e.getError(),{colorBits:[e.getParameter(3410),e.getParameter(3411),e.getParameter(3412),e.getParameter(3413)],depthBits:e.getParameter(3414),stencilBits:e.getParameter(3415),subpixelBits:e.getParameter(3408),extensions:Object.keys(t).filter(function(e){return!!t[e]}),maxAnisotropic:n,maxDrawbuffers:r,maxColorAttachments:a,pointSizeDims:e.getParameter(33901),lineWidthDims:e.getParameter(33902),maxViewportDims:e.getParameter(3386),maxCombinedTextureUnits:e.getParameter(35661),maxCubeMapSize:e.getParameter(34076),maxRenderbufferSize:e.getParameter(34024),maxTextureUnits:e.getParameter(34930),maxTextureSize:e.getParameter(3379),maxAttributes:e.getParameter(34921),maxVertexUniforms:e.getParameter(36347),maxVertexTextureUnits:e.getParameter(35660),maxVaryingVectors:e.getParameter(36348),maxFragmentUniforms:e.getParameter(36349),glsl:e.getParameter(35724),renderer:e.getParameter(7937),vendor:e.getParameter(7936),version:e.getParameter(7938),readFloat:i,npotTextureCube:s}},Y=function(e){return e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Float32Array||e instanceof Float64Array||e instanceof Uint8ClampedArray},X=function(e){return Object.keys(e).map(function(t){return e[t]})},Z={shape:function(e){for(var t=[];e.length;e=e[0])t.push(e.length);return t},flatten:function(e,t,n,r){var a=1;if(t.length)for(var i=0;i<t.length;++i)a*=t[i];else a=0;switch(n=r||W.allocType(n,a),t.length){case 0:break;case 1:for(r=t[0],t=0;t<r;++t)n[t]=e[t];break;case 2:for(r=t[0],t=t[1],i=a=0;i<r;++i)for(var o=e[i],s=0;s<t;++s)n[a++]=o[s];break;case 3:u(e,t[0],t[1],t[2],n,0);break;default:!function e(t,n,r,a,i){for(var o=1,s=r+1;s<n.length;++s)o*=n[s];var l=n[r];if(4==n.length-r){var c=n[r+1],f=n[r+2];for(n=n[r+3],s=0;s<l;++s)u(t[s],c,f,n,a,i),i+=o}else for(s=0;s<l;++s)e(t[s],n,r+1,a,i),i+=o}(e,t,0,n,0)}return n}},$={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},K={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},J={dynamic:35048,stream:35040,static:35044},Q=Z.flatten,ee=Z.shape,te=[];te[5120]=1,te[5122]=2,te[5124]=4,te[5121]=1,te[5123]=2,te[5125]=4,te[5126]=4;var ne={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},re=new Float32Array(1),ae=new Uint32Array(re.buffer),ie=[9984,9986,9985,9987],oe=[0,6409,6410,6407,6408],se={};se[6409]=se[6406]=se[6402]=1,se[34041]=se[6410]=2,se[6407]=se[35904]=3,se[6408]=se[35906]=4;var le=g("HTMLCanvasElement"),ue=g("CanvasRenderingContext2D"),ce=g("ImageBitmap"),fe=g("HTMLImageElement"),de=g("HTMLVideoElement"),pe=Object.keys($).concat([le,ue,ce,fe,de]),he=[];he[5121]=1,he[5126]=4,he[36193]=2,he[5123]=2,he[5125]=4;var me=[];me[32854]=2,me[32855]=2,me[36194]=2,me[34041]=4,me[33776]=.5,me[33777]=.5,me[33778]=1,me[33779]=1,me[35986]=.5,me[35987]=1,me[34798]=1,me[35840]=.5,me[35841]=.25,me[35842]=.5,me[35843]=.25,me[36196]=.5;var ve=[];ve[32854]=2,ve[32855]=2,ve[36194]=2,ve[33189]=2,ve[36168]=1,ve[34041]=4,ve[35907]=4,ve[34836]=16,ve[34842]=8,ve[34843]=6;var ge=function(e,t,n,r,a){function i(e){this.id=u++,this.refCount=1,this.renderbuffer=e,this.format=32854,this.height=this.width=0,a.profile&&(this.stats={size:0})}function o(t){var n=t.renderbuffer;e.bindRenderbuffer(36161,null),e.deleteRenderbuffer(n),t.renderbuffer=null,t.refCount=0,delete c[t.id],r.renderbufferCount--}var s={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};t.ext_srgb&&(s.srgba=35907),t.ext_color_buffer_half_float&&(s.rgba16f=34842,s.rgb16f=34843),t.webgl_color_buffer_float&&(s.rgba32f=34836);var l=[];Object.keys(s).forEach(function(e){l[s[e]]=e});var u=0,c={};return i.prototype.decRef=function(){0>=--this.refCount&&o(this)},a.profile&&(r.getTotalRenderbufferSize=function(){var e=0;return Object.keys(c).forEach(function(t){e+=c[t].stats.size}),e}),{create:function(t,n){function o(t,n){var r=0,i=0,c=32854;if("object"==typeof t&&t?("shape"in t?(i=t.shape,r=0|i[0],i=0|i[1]):("radius"in t&&(r=i=0|t.radius),"width"in t&&(r=0|t.width),"height"in t&&(i=0|t.height)),"format"in t&&(c=s[t.format])):"number"==typeof t?(r=0|t,i="number"==typeof n?0|n:r):t||(r=i=1),r!==u.width||i!==u.height||c!==u.format)return o.width=u.width=r,o.height=u.height=i,u.format=c,e.bindRenderbuffer(36161,u.renderbuffer),e.renderbufferStorage(36161,c,r,i),a.profile&&(u.stats.size=ve[u.format]*u.width*u.height),o.format=l[u.format],o}var u=new i(e.createRenderbuffer());return c[u.id]=u,r.renderbufferCount++,o(t,n),o.resize=function(t,n){var r=0|t,i=0|n||r;return r===u.width&&i===u.height?o:(o.width=u.width=r,o.height=u.height=i,e.bindRenderbuffer(36161,u.renderbuffer),e.renderbufferStorage(36161,u.format,r,i),a.profile&&(u.stats.size=ve[u.format]*u.width*u.height),o)},o._reglType="renderbuffer",o._renderbuffer=u,a.profile&&(o.stats=u.stats),o.destroy=function(){u.decRef()},o},clear:function(){X(c).forEach(o)},restore:function(){X(c).forEach(function(t){t.renderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,t.renderbuffer),e.renderbufferStorage(36161,t.format,t.width,t.height)}),e.bindRenderbuffer(36161,null)}}},ye=[];ye[6408]=4,ye[6407]=3;var be=[];be[5121]=1,be[5126]=4,be[36193]=2;var xe=["x","y","z","w"],_e="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),we={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Te={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},ke={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Ce={cw:2304,ccw:2305},Ee=new D(!1,!1,!1,function(){});return function(e){function t(){if(0===Z.length)w&&w.update(),Q=null;else{Q=G.next(t),f();for(var e=Z.length-1;0<=e;--e){var n=Z[e];n&&n(P,null,0)}v.flush(),w&&w.update()}}function n(){!Q&&0<Z.length&&(Q=G.next(t))}function r(){Q&&(G.cancel(t),Q=null)}function i(e){e.preventDefault(),r(),$.forEach(function(e){e()})}function o(e){v.getError(),y.restore(),I.restore(),L.restore(),z.restore(),j.restore(),V.restore(),w&&w.restore(),W.procs.refresh(),n(),K.forEach(function(e){e()})}function s(e){function t(e){var t={},n={};return Object.keys(e).forEach(function(r){var a=e[r];U.isDynamic(a)?n[r]=U.unbox(a,r):t[r]=a}),{dynamic:n,static:t}}var n=t(e.context||{}),r=t(e.uniforms||{}),a=t(e.attributes||{}),i=t(function(e){function t(e){if(e in n){var t=n[e];delete n[e],Object.keys(t).forEach(function(r){n[e+"."+r]=t[r]})}}var n=B({},e);return delete n.uniforms,delete n.attributes,delete n.context,"stencil"in n&&n.stencil.op&&(n.stencil.opBack=n.stencil.opFront=n.stencil.op,delete n.stencil.op),t("blend"),t("depth"),t("cull"),t("stencil"),t("polygonOffset"),t("scissor"),t("sample"),n}(e));e={gpuTime:0,cpuTime:0,count:0};var n=W.compile(i,a,r,n,e),o=n.draw,s=n.batch,l=n.scope,u=[];return B(function(e,t){var n;if("function"==typeof e)return l.call(this,null,e,0);if("function"==typeof t)if("number"==typeof e)for(n=0;n<e;++n)l.call(this,null,t,n);else{if(!Array.isArray(e))return l.call(this,e,t,0);for(n=0;n<e.length;++n)l.call(this,e[n],t,n)}else if("number"==typeof e){if(0<e)return s.call(this,function(e){for(;u.length<e;)u.push(null);return u}(0|e),0|e)}else{if(!Array.isArray(e))return o.call(this,e);if(e.length)return s.call(this,e,e.length)}},{stats:e})}function l(e,t){var n=0;W.procs.poll();var r=t.color;r&&(v.clearColor(+r[0]||0,+r[1]||0,+r[2]||0,+r[3]||0),n|=16384),"depth"in t&&(v.clearDepth(+t.depth),n|=256),"stencil"in t&&(v.clearStencil(0|t.stencil),n|=1024),v.clear(n)}function u(e){return Z.push(e),n(),{cancel:function(){var t=F(Z,e);Z[t]=function e(){var t=F(Z,e);Z[t]=Z[Z.length-1],--Z.length,0>=Z.length&&r()}}}}function c(){var e=Y.viewport,t=Y.scissor_box;e[0]=e[1]=t[0]=t[1]=0,P.viewportWidth=P.framebufferWidth=P.drawingBufferWidth=e[2]=t[2]=v.drawingBufferWidth,P.viewportHeight=P.framebufferHeight=P.drawingBufferHeight=e[3]=t[3]=v.drawingBufferHeight}function f(){P.tick+=1,P.time=m(),c(),W.procs.poll()}function d(){c(),W.procs.refresh(),w&&w.update()}function m(){return(H()-T)/1e3}if(!(e=a(e)))return null;var v=e.gl,g=v.getContextAttributes();v.isContextLost();var y=function(e,t){function n(t){var n;t=t.toLowerCase();try{n=r[t]=e.getExtension(t)}catch(e){}return!!n}for(var r={},a=0;a<t.extensions.length;++a){var i=t.extensions[a];if(!n(i))return t.onDestroy(),t.onDone('"'+i+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return t.optionalExtensions.forEach(n),{extensions:r,restore:function(){Object.keys(r).forEach(function(e){if(!n(e))throw Error("(regl): error restoring extension "+e)})}}}(v,e);if(!y)return null;var b=function(){var e={"":0},t=[""];return{id:function(n){var r=e[n];return r||(r=e[n]=t.length,t.push(n),r)},str:function(e){return t[e]}}}(),x={bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},_=y.extensions,w=function(e,t){function n(e,t,n){var r=o.pop()||new function(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null};r.startQueryIndex=e,r.endQueryIndex=t,r.sum=0,r.stats=n,s.push(r)}var r=t.ext_disjoint_timer_query;if(!r)return null;var a=[],i=[],o=[],s=[],l=[],u=[];return{beginQuery:function(e){var t=a.pop()||r.createQueryEXT();r.beginQueryEXT(35007,t),i.push(t),n(i.length-1,i.length,e)},endQuery:function(){r.endQueryEXT(35007)},pushScopeStats:n,update:function(){var e,t;if(0!==(e=i.length)){u.length=Math.max(u.length,e+1),l.length=Math.max(l.length,e+1),l[0]=0;var n=u[0]=0;for(t=e=0;t<i.length;++t){var c=i[t];r.getQueryObjectEXT(c,34919)?(n+=r.getQueryObjectEXT(c,34918),a.push(c)):i[e++]=c,l[t+1]=n,u[t+1]=e}for(i.length=e,t=e=0;t<s.length;++t){var n=s[t],f=n.startQueryIndex,c=n.endQueryIndex;n.sum+=l[c]-l[f],f=u[f],(c=u[c])===f?(n.stats.gpuTime+=n.sum/1e6,o.push(n)):(n.startQueryIndex=f,n.endQueryIndex=c,s[e++]=n)}s.length=e}},getNumPendingQueries:function(){return i.length},clear:function(){a.push.apply(a,i);for(var e=0;e<a.length;e++)r.deleteQueryEXT(a[e]);i.length=0,a.length=0},restore:function(){i.length=0,a.length=0}}}(0,_),T=H(),S=v.drawingBufferWidth,O=v.drawingBufferHeight,P={tick:0,time:0,viewportWidth:S,viewportHeight:O,framebufferWidth:S,framebufferHeight:O,drawingBufferWidth:S,drawingBufferHeight:O,pixelRatio:e.pixelRatio},R=q(v,_),S=function(e,t,n,r){for(e=n.maxAttributes,t=Array(e),n=0;n<e;++n)t[n]=new E;return{Record:E,scope:{},state:t}}(v,_,R),L=p(v,x,e,S),D=h(v,_,L,x),I=M(v,b,x,e),z=k(v,_,R,function(){W.procs.poll()},P,x,e),j=ge(v,_,0,x,e),V=C(v,_,R,z,j,x),W=N(v,b,_,R,L,D,0,V,{},S,I,{elements:null,primitive:4,count:-1,offset:0,instances:-1},P,w,e),b=A(v,V,W.procs.poll,P),Y=W.next,X=v.canvas,Z=[],$=[],K=[],J=[e.onDestroy],Q=null;X&&(X.addEventListener("webglcontextlost",i,!1),X.addEventListener("webglcontextrestored",o,!1));var ee=V.setFBO=s({framebuffer:U.define.call(null,1,"framebuffer")});return d(),g=B(s,{clear:function(e){if("framebuffer"in e)if(e.framebuffer&&"framebufferCube"===e.framebuffer_reglType)for(var t=0;6>t;++t)ee(B({framebuffer:e.framebuffer.faces[t]},e),l);else ee(e,l);else l(0,e)},prop:U.define.bind(null,1),context:U.define.bind(null,2),this:U.define.bind(null,3),draw:s({}),buffer:function(e){return L.create(e,34962,!1,!1)},elements:function(e){return D.create(e,!1)},texture:z.create2D,cube:z.createCube,renderbuffer:j.create,framebuffer:V.create,framebufferCube:V.createCube,attributes:g,frame:u,on:function(e,t){var n;switch(e){case"frame":return u(t);case"lost":n=$;break;case"restore":n=K;break;case"destroy":n=J}return n.push(t),{cancel:function(){for(var e=0;e<n.length;++e)if(n[e]===t){n[e]=n[n.length-1],n.pop();break}}}},limits:R,hasExtension:function(e){return 0<=R.extensions.indexOf(e.toLowerCase())},read:b,destroy:function(){Z.length=0,r(),X&&(X.removeEventListener("webglcontextlost",i),X.removeEventListener("webglcontextrestored",o)),I.clear(),V.clear(),j.clear(),z.clear(),D.clear(),L.clear(),w&&w.clear(),J.forEach(function(e){e()})},_gl:v,_refresh:d,poll:function(){f(),w&&w.update()},now:m,stats:x}),e.onDone(null,g),g}})},{}],479:[function(e,t,n){
/*!
 * repeat-string <https://github.com/jonschlinkert/repeat-string>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */
"use strict";var r,a="";t.exports=function(e,t){if("string"!=typeof e)throw new TypeError("expected a string");if(1===t)return e;if(2===t)return e+e;var n=e.length*t;if(r!==e||void 0===r)r=e,a="";else if(a.length>=n)return a.substr(0,n);for(;n>a.length&&t>1;)1&t&&(a+=e),t>>=1,e+=e;return a=(a+=e).substr(0,n)}},{}],480:[function(e,n,r){(function(e){n.exports=e.performance&&e.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],481:[function(e,t,n){"use strict";t.exports=function(e){for(var t=e.length,n=e[e.length-1],r=t,a=t-2;a>=0;--a){var i=n,o=e[a],s=(n=i+o)-i,l=o-s;l&&(e[--r]=n,n=l)}for(var u=0,a=r;a<t;++a){var i=e[a],o=n,s=(n=i+o)-i,l=o-s;l&&(e[u++]=l)}return e[u++]=n,e.length=u,e}},{}],482:[function(e,t,n){"use strict";var r=e("two-product"),a=e("robust-sum"),i=e("robust-scale"),o=e("robust-compress"),s=6;function l(e,t){for(var n=new Array(e.length-1),r=1;r<e.length;++r)for(var a=n[r-1]=new Array(e.length-1),i=0,o=0;i<e.length;++i)i!==t&&(a[o++]=e[r][i]);return n}function u(e){return 1&e?"-":""}function c(e){if(2===e.length)return["sum(prod(",e[0][0],",",e[1][1],"),prod(-",e[0][1],",",e[1][0],"))"].join("");for(var t=[],n=0;n<e.length;++n)t.push(["scale(",c(l(e,n)),",",u(n),e[0][n],")"].join(""));return function e(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var n=t.length>>1;return["sum(",e(t.slice(0,n)),",",e(t.slice(n)),")"].join("")}(t)}function f(e){var t=new Function("sum","scale","prod","compress",["function robustDeterminant",e,"(m){return compress(",c(function(e){for(var t=new Array(e),n=0;n<e;++n){t[n]=new Array(e);for(var r=0;r<e;++r)t[n][r]=["m[",n,"][",r,"]"].join("")}return t}(e)),")};return robustDeterminant",e].join(""));return t(a,i,r,o)}var d=[function(){return[0]},function(e){return[e[0][0]]}];!function(){for(;d.length<s;)d.push(f(d.length));for(var e=[],n=["function robustDeterminant(m){switch(m.length){"],r=0;r<s;++r)e.push("det"+r),n.push("case ",r,":return det",r,"(m);");n.push("}var det=CACHE[m.length];if(!det)det=CACHE[m.length]=gen(m.length);return det(m);}return robustDeterminant"),e.push("CACHE","gen",n.join(""));var a=Function.apply(void 0,e);t.exports=a.apply(void 0,d.concat([d,f]));for(var r=0;r<d.length;++r)t.exports[r]=d[r]}()},{"robust-compress":481,"robust-scale":488,"robust-sum":491,"two-product":520}],483:[function(e,t,n){"use strict";var r=e("two-product"),a=e("robust-sum");t.exports=function(e,t){for(var n=r(e[0],t[0]),i=1;i<e.length;++i)n=a(n,r(e[i],t[i]));return n}},{"robust-sum":491,"two-product":520}],484:[function(e,t,n){"use strict";var r=e("two-product"),a=e("robust-sum"),i=e("robust-subtract"),o=e("robust-scale"),s=6;function l(e,t){for(var n=new Array(e.length-1),r=1;r<e.length;++r)for(var a=n[r-1]=new Array(e.length-1),i=0,o=0;i<e.length;++i)i!==t&&(a[o++]=e[r][i]);return n}function u(e){if(1===e.length)return e[0];if(2===e.length)return["sum(",e[0],",",e[1],")"].join("");var t=e.length>>1;return["sum(",u(e.slice(0,t)),",",u(e.slice(t)),")"].join("")}function c(e,t){if("m"===e.charAt(0)){if("w"===t.charAt(0)){var n=e.split("[");return["w",t.substr(1),"m",n[0].substr(1)].join("")}return["prod(",e,",",t,")"].join("")}return c(t,e)}function f(e){return!0&e?"-":""}function d(e){if(2===e.length)return[["diff(",c(e[0][0],e[1][1]),",",c(e[1][0],e[0][1]),")"].join("")];for(var t=[],n=0;n<e.length;++n)t.push(["scale(",u(d(l(e,n))),",",f(n),e[0][n],")"].join(""));return t}function p(e,t){for(var n=[],r=0;r<t-2;++r)n.push(["prod(m",e,"[",r,"],m",e,"[",r,"])"].join(""));return u(n)}function h(e){for(var t=[],n=[],s=function(e){for(var t=new Array(e),n=0;n<e;++n){t[n]=new Array(e);for(var r=0;r<e;++r)t[n][r]=["m",r,"[",e-n-2,"]"].join("")}return t}(e),c=0;c<e;++c)s[0][c]="1",s[e-1][c]="w"+c;for(var c=0;c<e;++c)0==(1&c)?t.push.apply(t,d(l(s,c))):n.push.apply(n,d(l(s,c)));for(var f=u(t),h=u(n),m="exactInSphere"+e,v=[],c=0;c<e;++c)v.push("m"+c);for(var g=["function ",m,"(",v.join(),"){"],c=0;c<e;++c){g.push("var w",c,"=",p(c,e),";");for(var y=0;y<e;++y)y!==c&&g.push("var w",c,"m",y,"=scale(w",c,",m",y,"[0]);")}g.push("var p=",f,",n=",h,",d=diff(p,n);return d[d.length-1];}return ",m);var b=new Function("sum","diff","prod","scale",g.join(""));return b(a,i,r,o)}var m=[function(){return 0},function(){return 0},function(){return 0}];!function(){for(;m.length<=s;)m.push(h(m.length));for(var e=[],n=["slow"],r=0;r<=s;++r)e.push("a"+r),n.push("o"+r);for(var a=["function testInSphere(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"],r=2;r<=s;++r)a.push("case ",r,":return o",r,"(",e.slice(0,r).join(),");");a.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return testInSphere"),n.push(a.join(""));var i=Function.apply(void 0,n);t.exports=i.apply(void 0,[function(e){var t=m[e.length];return t||(t=m[e.length]=h(e.length)),t.apply(void 0,e)}].concat(m));for(var r=0;r<=s;++r)t.exports[r]=m[r]}()},{"robust-scale":488,"robust-subtract":490,"robust-sum":491,"two-product":520}],485:[function(e,t,n){"use strict";var r=e("robust-determinant"),a=6;function i(e){for(var t="robustLinearSolve"+e+"d",n=["function ",t,"(A,b){return ["],a=0;a<e;++a){n.push("det([");for(var i=0;i<e;++i){i>0&&n.push(","),n.push("[");for(var o=0;o<e;++o)o>0&&n.push(","),o===a?n.push("+b[",i,"]"):n.push("+A[",i,"][",o,"]");n.push("]")}n.push("]),")}n.push("det(A)]}return ",t);var s=new Function("det",n.join(""));return s(e<6?r[e]:r)}var o=[function(){return[0]},function(e,t){return[[t[0]],[e[0][0]]]}];!function(){for(;o.length<a;)o.push(i(o.length));for(var e=[],n=["function dispatchLinearSolve(A,b){switch(A.length){"],r=0;r<a;++r)e.push("s"+r),n.push("case ",r,":return s",r,"(A,b);");n.push("}var s=CACHE[A.length];if(!s)s=CACHE[A.length]=g(A.length);return s(A,b)}return dispatchLinearSolve"),e.push("CACHE","g",n.join(""));var s=Function.apply(void 0,e);t.exports=s.apply(void 0,o.concat([o,i]));for(var r=0;r<a;++r)t.exports[r]=o[r]}()},{"robust-determinant":482}],486:[function(e,t,n){"use strict";var r=e("two-product"),a=e("robust-sum"),i=e("robust-scale"),o=e("robust-subtract"),s=5;function l(e,t){for(var n=new Array(e.length-1),r=1;r<e.length;++r)for(var a=n[r-1]=new Array(e.length-1),i=0,o=0;i<e.length;++i)i!==t&&(a[o++]=e[r][i]);return n}function u(e){return 1&e?"-":""}function c(e){if(1===e.length)return e[0];if(2===e.length)return["sum(",e[0],",",e[1],")"].join("");var t=e.length>>1;return["sum(",c(e.slice(0,t)),",",c(e.slice(t)),")"].join("")}function f(e){if(2===e.length)return[["sum(prod(",e[0][0],",",e[1][1],"),prod(-",e[0][1],",",e[1][0],"))"].join("")];for(var t=[],n=0;n<e.length;++n)t.push(["scale(",c(f(l(e,n))),",",u(n),e[0][n],")"].join(""));return t}function d(e){for(var t=[],n=[],s=function(e){for(var t=new Array(e),n=0;n<e;++n){t[n]=new Array(e);for(var r=0;r<e;++r)t[n][r]=["m",r,"[",e-n-1,"]"].join("")}return t}(e),u=[],d=0;d<e;++d)0==(1&d)?t.push.apply(t,f(l(s,d))):n.push.apply(n,f(l(s,d))),u.push("m"+d);var p=c(t),h=c(n),m="orientation"+e+"Exact",v=["function ",m,"(",u.join(),"){var p=",p,",n=",h,",d=sub(p,n);return d[d.length-1];};return ",m].join(""),g=new Function("sum","prod","scale","sub",v);return g(a,r,i,o)}var p=d(3),h=d(4),m=[function(){return 0},function(){return 0},function(e,t){return t[0]-e[0]},function(e,t,n){var r,a=(e[1]-n[1])*(t[0]-n[0]),i=(e[0]-n[0])*(t[1]-n[1]),o=a-i;if(a>0){if(i<=0)return o;r=a+i}else{if(!(a<0))return o;if(i>=0)return o;r=-(a+i)}var s=3.3306690738754716e-16*r;return o>=s||o<=-s?o:p(e,t,n)},function(e,t,n,r){var a=e[0]-r[0],i=t[0]-r[0],o=n[0]-r[0],s=e[1]-r[1],l=t[1]-r[1],u=n[1]-r[1],c=e[2]-r[2],f=t[2]-r[2],d=n[2]-r[2],p=i*u,m=o*l,v=o*s,g=a*u,y=a*l,b=i*s,x=c*(p-m)+f*(v-g)+d*(y-b),_=(Math.abs(p)+Math.abs(m))*Math.abs(c)+(Math.abs(v)+Math.abs(g))*Math.abs(f)+(Math.abs(y)+Math.abs(b))*Math.abs(d),w=7.771561172376103e-16*_;return x>w||-x>w?x:h(e,t,n,r)}];!function(){for(;m.length<=s;)m.push(d(m.length));for(var e=[],n=["slow"],r=0;r<=s;++r)e.push("a"+r),n.push("o"+r);for(var a=["function getOrientation(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"],r=2;r<=s;++r)a.push("case ",r,":return o",r,"(",e.slice(0,r).join(),");");a.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),n.push(a.join(""));var i=Function.apply(void 0,n);t.exports=i.apply(void 0,[function(e){var t=m[e.length];return t||(t=m[e.length]=d(e.length)),t.apply(void 0,e)}].concat(m));for(var r=0;r<=s;++r)t.exports[r]=m[r]}()},{"robust-scale":488,"robust-subtract":490,"robust-sum":491,"two-product":520}],487:[function(e,t,n){"use strict";var r=e("robust-sum"),a=e("robust-scale");t.exports=function(e,t){if(1===e.length)return a(t,e[0]);if(1===t.length)return a(e,t[0]);if(0===e.length||0===t.length)return[0];var n=[0];if(e.length<t.length)for(var i=0;i<e.length;++i)n=r(n,a(t,e[i]));else for(var i=0;i<t.length;++i)n=r(n,a(e,t[i]));return n}},{"robust-scale":488,"robust-sum":491}],488:[function(e,t,n){"use strict";var r=e("two-product"),a=e("two-sum");t.exports=function(e,t){var n=e.length;if(1===n){var i=r(e[0],t);return i[0]?i:[i[1]]}var o=new Array(2*n),s=[.1,.1],l=[.1,.1],u=0;r(e[0],t,s),s[0]&&(o[u++]=s[0]);for(var c=1;c<n;++c){r(e[c],t,l);var f=s[1];a(f,l[0],s),s[0]&&(o[u++]=s[0]);var d=l[1],p=s[1],h=d+p,m=h-d,v=p-m;s[1]=h,v&&(o[u++]=v)}return s[1]&&(o[u++]=s[1]),0===u&&(o[u++]=0),o.length=u,o}},{"two-product":520,"two-sum":521}],489:[function(e,t,n){"use strict";t.exports=function(e,t,n,a){var i=r(e,n,a),o=r(t,n,a);if(i>0&&o>0||i<0&&o<0)return!1;var s=r(n,e,t),l=r(a,e,t);return!(s>0&&l>0||s<0&&l<0)&&(0!==i||0!==o||0!==s||0!==l||function(e,t,n,r){for(var a=0;a<2;++a){var i=e[a],o=t[a],s=Math.min(i,o),l=Math.max(i,o),u=n[a],c=r[a],f=Math.min(u,c),d=Math.max(u,c);if(d<s||l<f)return!1}return!0}(e,t,n,a))};var r=e("robust-orientation")[3]},{"robust-orientation":486}],490:[function(e,t,n){"use strict";t.exports=function(e,t){var n=0|e.length,r=0|t.length;if(1===n&&1===r)return function(e,t){var n=e+t,r=n-e,a=e-(n-r)+(t-r);return a?[a,n]:[n]}(e[0],-t[0]);var a,i,o=new Array(n+r),s=0,l=0,u=0,c=Math.abs,f=e[l],d=c(f),p=-t[u],h=c(p);d<h?(i=f,(l+=1)<n&&(f=e[l],d=c(f))):(i=p,(u+=1)<r&&(p=-t[u],h=c(p))),l<n&&d<h||u>=r?(a=f,(l+=1)<n&&(f=e[l],d=c(f))):(a=p,(u+=1)<r&&(p=-t[u],h=c(p)));for(var m,v,g=a+i,y=g-a,b=i-y,x=b,_=g;l<n&&u<r;)d<h?(a=f,(l+=1)<n&&(f=e[l],d=c(f))):(a=p,(u+=1)<r&&(p=-t[u],h=c(p))),(b=(i=x)-(y=(g=a+i)-a))&&(o[s++]=b),x=_-((m=_+g)-(v=m-_))+(g-v),_=m;for(;l<n;)(b=(i=x)-(y=(g=(a=f)+i)-a))&&(o[s++]=b),x=_-((m=_+g)-(v=m-_))+(g-v),_=m,(l+=1)<n&&(f=e[l]);for(;u<r;)(b=(i=x)-(y=(g=(a=p)+i)-a))&&(o[s++]=b),x=_-((m=_+g)-(v=m-_))+(g-v),_=m,(u+=1)<r&&(p=-t[u]);return x&&(o[s++]=x),_&&(o[s++]=_),s||(o[s++]=0),o.length=s,o}},{}],491:[function(e,t,n){"use strict";t.exports=function(e,t){var n=0|e.length,r=0|t.length;if(1===n&&1===r)return function(e,t){var n=e+t,r=n-e,a=e-(n-r)+(t-r);return a?[a,n]:[n]}(e[0],t[0]);var a,i,o=new Array(n+r),s=0,l=0,u=0,c=Math.abs,f=e[l],d=c(f),p=t[u],h=c(p);d<h?(i=f,(l+=1)<n&&(f=e[l],d=c(f))):(i=p,(u+=1)<r&&(p=t[u],h=c(p))),l<n&&d<h||u>=r?(a=f,(l+=1)<n&&(f=e[l],d=c(f))):(a=p,(u+=1)<r&&(p=t[u],h=c(p)));for(var m,v,g=a+i,y=g-a,b=i-y,x=b,_=g;l<n&&u<r;)d<h?(a=f,(l+=1)<n&&(f=e[l],d=c(f))):(a=p,(u+=1)<r&&(p=t[u],h=c(p))),(b=(i=x)-(y=(g=a+i)-a))&&(o[s++]=b),x=_-((m=_+g)-(v=m-_))+(g-v),_=m;for(;l<n;)(b=(i=x)-(y=(g=(a=f)+i)-a))&&(o[s++]=b),x=_-((m=_+g)-(v=m-_))+(g-v),_=m,(l+=1)<n&&(f=e[l]);for(;u<r;)(b=(i=x)-(y=(g=(a=p)+i)-a))&&(o[s++]=b),x=_-((m=_+g)-(v=m-_))+(g-v),_=m,(u+=1)<r&&(p=t[u]);return x&&(o[s++]=x),_&&(o[s++]=_),s||(o[s++]=0),o.length=s,o}},{}],492:[function(e,t,n){"use strict";t.exports=function(e){return e<0?-1:e>0?1:0}},{}],493:[function(e,t,n){"use strict";t.exports=function(e){return a(r(e))};var r=e("boundary-cells"),a=e("reduce-simplicial-complex")},{"boundary-cells":83,"reduce-simplicial-complex":472}],494:[function(e,t,n){"use strict";t.exports=function(e,t,n,s){if(n=n||0,void 0===s&&(s=function(e){for(var t=e.length,n=0,r=0;r<t;++r)n=0|Math.max(n,e[r].length);return n-1}(e)),0===e.length||s<1)return{cells:[],vertexIds:[],vertexWeights:[]};var l=function(e,t){for(var n=e.length,r=a.mallocUint8(n),i=0;i<n;++i)r[i]=e[i]<t|0;return r}(t,+n),u=function(e,t){for(var n=e.length,o=t*(t+1)/2*n|0,s=a.mallocUint32(2*o),l=0,u=0;u<n;++u)for(var c=e[u],t=c.length,f=0;f<t;++f)for(var d=0;d<f;++d){var p=c[d],h=c[f];s[l++]=0|Math.min(p,h),s[l++]=0|Math.max(p,h)}i(r(s,[l/2|0,2]));for(var m=2,u=2;u<l;u+=2)s[u-2]===s[u]&&s[u-1]===s[u+1]||(s[m++]=s[u],s[m++]=s[u+1]);return r(s,[m/2|0,2])}(e,s),c=function(e,t,n,i){for(var o=e.data,s=e.shape[0],l=a.mallocDouble(s),u=0,c=0;c<s;++c){var f=o[2*c],d=o[2*c+1];if(n[f]!==n[d]){var p=t[f],h=t[d];o[2*u]=f,o[2*u+1]=d,l[u++]=(h-i)/(h-p)}}return e.shape[0]=u,r(l,[u])}(u,t,l,+n),f=function(e,t){var n=a.mallocInt32(2*t),r=e.shape[0],i=e.data;n[0]=0;for(var o=0,s=0;s<r;++s){var l=i[2*s];if(l!==o){for(n[2*o+1]=s;++o<l;)n[2*o]=s,n[2*o+1]=s;n[2*o]=s}}for(n[2*o+1]=r;++o<t;)n[2*o]=n[2*o+1]=r;return n}(u,0|t.length),d=o(s)(e,u.data,f,l),p=function(e){for(var t=0|e.shape[0],n=e.data,r=new Array(t),a=0;a<t;++a)r[a]=[n[2*a],n[2*a+1]];return r}(u),h=[].slice.call(c.data,0,c.shape[0]);return a.free(l),a.free(u.data),a.free(c.data),a.free(f),{cells:d,vertexIds:p,vertexWeights:h}};var r=e("ndarray"),a=e("typedarray-pool"),i=e("ndarray-sort"),o=e("./lib/codegen")},{"./lib/codegen":495,ndarray:433,"ndarray-sort":431,"typedarray-pool":522}],495:[function(e,t,n){"use strict";t.exports=function(e){var t=i[e];return t||(t=i[e]=function(e){var t=0,n=new Array(e+1);n[0]=[[]];for(var i=1;i<=e;++i)for(var o=n[i]=a(i),s=0;s<o.length;++s)t=Math.max(t,o[i].length);var l=["function B(C,E,i,j){","var a=Math.min(i,j)|0,b=Math.max(i,j)|0,l=C[2*a],h=C[2*a+1];","while(l<h){","var m=(l+h)>>1,v=E[2*m+1];","if(v===b){return m}","if(b<v){h=m}else{l=m+1}","}","return l;","};","function getContour",e,"d(F,E,C,S){","var n=F.length,R=[];","for(var i=0;i<n;++i){var c=F[i],l=c.length;"];function u(e){if(!(e.length<=0)){l.push("R.push(");for(var t=0;t<e.length;++t){var n=e[t];t>0&&l.push(","),l.push("[");for(var r=0;r<n.length;++r){var a=n[r];r>0&&l.push(","),l.push("B(C,E,c[",a[0],"],c[",a[1],"])")}l.push("]")}l.push(");")}}for(var i=e+1;i>1;--i){i<e+1&&l.push("else "),l.push("if(l===",i,"){");for(var c=[],s=0;s<i;++s)c.push("(S[c["+s+"]]<<"+s+")");l.push("var M=",c.join("+"),";if(M===0||M===",(1<<i)-1,"){continue}switch(M){");for(var o=n[i-1],s=0;s<o.length;++s)l.push("case ",s,":"),u(o[s]),l.push("break;");l.push("}}")}return l.push("}return R;};return getContour",e,"d"),new Function("pool",l.join(""))(r)}(e)),t};var r=e("typedarray-pool"),a=e("marching-simplex-table"),i={}},{"marching-simplex-table":410,"typedarray-pool":522}],496:[function(e,t,n){"use strict";"use restrict";var r=e("bit-twiddle"),a=e("union-find");function i(e,t){var n=e.length,r=e.length-t.length,a=Math.min;if(r)return r;switch(n){case 0:return 0;case 1:return e[0]-t[0];case 2:var i=e[0]+e[1]-t[0]-t[1];return i||a(e[0],e[1])-a(t[0],t[1]);case 3:var o=e[0]+e[1],s=t[0]+t[1];if(i=o+e[2]-(s+t[2]))return i;var l=a(e[0],e[1]),u=a(t[0],t[1]),i=a(l,e[2])-a(u,t[2]);return i||a(l+e[2],o)-a(u+t[2],s);default:var c=e.slice(0);c.sort();var f=t.slice(0);f.sort();for(var d=0;d<n;++d)if(r=c[d]-f[d])return r;return 0}}function o(e,t){return i(e[0],t[0])}function s(e,t){if(t){for(var n=e.length,r=new Array(n),a=0;a<n;++a)r[a]=[e[a],t[a]];r.sort(o);for(var a=0;a<n;++a)e[a]=r[a][0],t[a]=r[a][1];return e}return e.sort(i),e}function l(e){if(0===e.length)return[];for(var t=1,n=e.length,r=1;r<n;++r){var a=e[r];if(i(a,e[r-1])){if(r===t){t++;continue}e[t++]=a}}return e.length=t,e}function u(e,t){for(var n=0,r=e.length-1,a=-1;n<=r;){var o=n+r>>1,s=i(e[o],t);s<=0?(0===s&&(a=o),n=o+1):s>0&&(r=o-1)}return a}function c(e,t){for(var n=new Array(e.length),a=0,o=n.length;a<o;++a)n[a]=[];for(var s=[],a=0,l=t.length;a<l;++a)for(var c=t[a],f=c.length,d=1,p=1<<f;d<p;++d){s.length=r.popCount(d);for(var h=0,m=0;m<f;++m)d&1<<m&&(s[h++]=c[m]);var v=u(e,s);if(!(v<0))for(;n[v++].push(a),!(v>=e.length||0!==i(e[v],s)););}return n}function f(e,t){if(t<0)return[];for(var n=[],a=(1<<t+1)-1,i=0;i<e.length;++i)for(var o=e[i],l=a;l<1<<o.length;l=r.nextCombination(l)){for(var u=new Array(t+1),c=0,f=0;f<o.length;++f)l&1<<f&&(u[c++]=o[f]);n.push(u)}return s(n)}n.dimension=function(e){for(var t=0,n=Math.max,r=0,a=e.length;r<a;++r)t=n(t,e[r].length);return t-1},n.countVertices=function(e){for(var t=-1,n=Math.max,r=0,a=e.length;r<a;++r)for(var i=e[r],o=0,s=i.length;o<s;++o)t=n(t,i[o]);return t+1},n.cloneCells=function(e){for(var t=new Array(e.length),n=0,r=e.length;n<r;++n)t[n]=e[n].slice(0);return t},n.compareCells=i,n.normalize=s,n.unique=l,n.findCell=u,n.incidence=c,n.dual=function(e,t){if(!t)return c(l(f(e,0)),e);for(var n=new Array(t),r=0;r<t;++r)n[r]=[];for(var r=0,a=e.length;r<a;++r)for(var i=e[r],o=0,s=i.length;o<s;++o)n[i[o]].push(r);return n},n.explode=function(e){for(var t=[],n=0,r=e.length;n<r;++n)for(var a=e[n],i=0|a.length,o=1,l=1<<i;o<l;++o){for(var u=[],c=0;c<i;++c)o>>>c&1&&u.push(a[c]);t.push(u)}return s(t)},n.skeleton=f,n.boundary=function(e){for(var t=[],n=0,r=e.length;n<r;++n)for(var a=e[n],i=0,o=a.length;i<o;++i){for(var l=new Array(a.length-1),u=0,c=0;u<o;++u)u!==i&&(l[c++]=a[u]);t.push(l)}return s(t)},n.connectedComponents=function(e,t){return t?function(e,t){for(var n=new a(t),r=0;r<e.length;++r)for(var i=e[r],o=0;o<i.length;++o)for(var s=o+1;s<i.length;++s)n.link(i[o],i[s]);for(var l=[],u=n.ranks,r=0;r<u.length;++r)u[r]=-1;for(var r=0;r<e.length;++r){var c=n.find(e[r][0]);u[c]<0?(u[c]=l.length,l.push([e[r].slice(0)])):l[u[c]].push(e[r].slice(0))}return l}(e,t):function(e){for(var t=l(s(f(e,0))),n=new a(t.length),r=0;r<e.length;++r)for(var i=e[r],o=0;o<i.length;++o)for(var c=u(t,[i[o]]),d=o+1;d<i.length;++d)n.link(c,u(t,[i[d]]));for(var p=[],h=n.ranks,r=0;r<h.length;++r)h[r]=-1;for(var r=0;r<e.length;++r){var m=n.find(u(t,[e[r][0]]));h[m]<0?(h[m]=p.length,p.push([e[r].slice(0)])):p[h[m]].push(e[r].slice(0))}return p}(e)}},{"bit-twiddle":80,"union-find":523}],497:[function(e,t,n){arguments[4][80][0].apply(n,arguments)},{dup:80}],498:[function(e,t,n){arguments[4][496][0].apply(n,arguments)},{"bit-twiddle":497,dup:496,"union-find":499}],499:[function(e,t,n){"use strict";"use restrict";function r(e){this.roots=new Array(e),this.ranks=new Array(e);for(var t=0;t<e;++t)this.roots[t]=t,this.ranks[t]=0}t.exports=r,r.prototype.length=function(){return this.roots.length},r.prototype.makeSet=function(){var e=this.roots.length;return this.roots.push(e),this.ranks.push(0),e},r.prototype.find=function(e){for(var t=this.roots;t[e]!==e;){var n=t[e];t[e]=t[n],e=n}return e},r.prototype.link=function(e,t){var n=this.find(e),r=this.find(t);if(n!==r){var a=this.ranks,i=this.roots,o=a[n],s=a[r];o<s?i[n]=r:s<o?i[r]=n:(i[r]=n,++a[n])}}},{}],500:[function(e,t,n){"use strict";t.exports=function(e,t,n){for(var i=t.length,o=e.length,s=new Array(i),l=new Array(i),u=new Array(i),c=new Array(i),f=0;f<i;++f)s[f]=l[f]=-1,u[f]=1/0,c[f]=!1;for(var f=0;f<o;++f){var d=e[f];if(2!==d.length)throw new Error("Input must be a graph");var p=d[1],h=d[0];-1!==l[h]?l[h]=-2:l[h]=p,-1!==s[p]?s[p]=-2:s[p]=h}function m(e){if(c[e])return 1/0;var n=s[e],a=l[e];return n<0||a<0?1/0:function(e,t,n){var a=Math.abs(r(e,t,n)),i=Math.sqrt(Math.pow(t[0]-n[0],2)+Math.pow(t[1]-n[1],2));return a/i}(t[e],t[n],t[a])}function v(e,t){var n=k[e],r=k[t];k[e]=r,k[t]=n,C[n]=t,C[r]=e}function g(e){return u[k[e]]}function y(e){return 1&e?e-1>>1:(e>>1)-1}function b(e){for(var t=g(e);;){var n=t,r=2*e+1,a=2*(e+1),i=e;if(r<M){var o=g(r);o<n&&(i=r,n=o)}if(a<M){var s=g(a);s<n&&(i=a)}if(i===e)return e;v(e,i),e=i}}function x(e){for(var t=g(e);e>0;){var n=y(e);if(n>=0){var r=g(n);if(t<r){v(e,n),e=n;continue}}return e}}function _(){if(M>0){var e=k[0];return v(0,M-1),M-=1,b(0),e}return-1}function w(e,t){var n=k[e];return u[n]===t?e:(u[n]=-1/0,x(e),_(),u[n]=t,x((M+=1)-1))}function T(e){if(!c[e]){c[e]=!0;var t=s[e],n=l[e];s[n]>=0&&(s[n]=t),l[t]>=0&&(l[t]=n),C[t]>=0&&w(C[t],m(t)),C[n]>=0&&w(C[n],m(n))}}for(var k=[],C=new Array(i),f=0;f<i;++f){var E=u[f]=m(f);E<1/0?(C[f]=k.length,k.push(f)):C[f]=-1}for(var M=k.length,f=M>>1;f>=0;--f)b(f);for(;;){var A=_();if(A<0||u[A]>n)break;T(A)}for(var S=[],f=0;f<i;++f)c[f]||(C[f]=S.length,S.push(t[f].slice()));function O(e,t){if(e[t]<0)return t;var n=t,r=t;do{var a=e[r];if(!c[r]||a<0||a===r)break;if(a=e[r=a],!c[r]||a<0||a===r)break;r=a,n=e[n]}while(n!==r);for(var i=t;i!==r;i=e[i])e[i]=r;return r}S.length;var P=[];return e.forEach(function(e){var t=O(s,e[0]),n=O(l,e[1]);if(t>=0&&n>=0&&t!==n){var r=C[t],a=C[n];r!==a&&P.push([r,a])}}),a.unique(a.normalize(P)),{positions:S,edges:P}};var r=e("robust-orientation"),a=e("simplicial-complex")},{"robust-orientation":486,"simplicial-complex":498}],501:[function(e,t,n){"use strict";t.exports=function(e,t){var n,i,o,s;if(t[0][0]<t[1][0])n=t[0],i=t[1];else{if(!(t[0][0]>t[1][0]))return a(t,e);n=t[1],i=t[0]}if(e[0][0]<e[1][0])o=e[0],s=e[1];else{if(!(e[0][0]>e[1][0]))return-a(e,t);o=e[1],s=e[0]}var l=r(n,i,s),u=r(n,i,o);if(l<0){if(u<=0)return l}else if(l>0){if(u>=0)return l}else if(u)return u;if(l=r(s,o,i),u=r(s,o,n),l<0){if(u<=0)return l}else if(l>0){if(u>=0)return l}else if(u)return u;return i[0]-s[0]};var r=e("robust-orientation");function a(e,t){var n,a,i,o;if(t[0][0]<t[1][0])n=t[0],a=t[1];else{if(!(t[0][0]>t[1][0])){var s=Math.min(e[0][1],e[1][1]),l=Math.max(e[0][1],e[1][1]),u=Math.min(t[0][1],t[1][1]),c=Math.max(t[0][1],t[1][1]);return l<u?l-u:s>c?s-c:l-c}n=t[1],a=t[0]}e[0][1]<e[1][1]?(i=e[0],o=e[1]):(i=e[1],o=e[0]);var f=r(a,n,i);return f||(f=r(a,n,o))||o-a}},{"robust-orientation":486}],502:[function(e,t,n){"use strict";t.exports=function(e){for(var t=e.length,n=2*t,r=new Array(n),i=0;i<t;++i){var l=e[i],u=l[0][0]<l[1][0];r[2*i]=new d(l[0][0],l,u,i),r[2*i+1]=new d(l[1][0],l,!u,i)}r.sort(function(e,t){var n=e.x-t.x;return n||(n=e.create-t.create)||Math.min(e.segment[0][1],e.segment[1][1])-Math.min(t.segment[0][1],t.segment[1][1])});for(var c=a(o),p=[],h=[],m=[],i=0;i<n;){for(var v=r[i].x,g=[];i<n;){var y=r[i];if(y.x!==v)break;i+=1,y.segment[0][0]===y.x&&y.segment[1][0]===y.x?y.create&&(y.segment[0][1]<y.segment[1][1]?(g.push(new f(y.segment[0][1],y.index,!0,!0)),g.push(new f(y.segment[1][1],y.index,!1,!1))):(g.push(new f(y.segment[1][1],y.index,!0,!1)),g.push(new f(y.segment[0][1],y.index,!1,!0)))):c=y.create?c.insert(y.segment,y.index):c.remove(y.segment)}p.push(c.root),h.push(v),m.push(g)}return new s(p,h,m)};var r=e("binary-search-bounds"),a=e("functional-red-black-tree"),i=e("robust-orientation"),o=e("./lib/order-segments");function s(e,t,n){this.slabs=e,this.coordinates=t,this.horizontal=n}var l=s.prototype;function u(e,t){return e.y-t}function c(e,t){for(var n=null;e;){var r,a,o=e.key;o[0][0]<o[1][0]?(r=o[0],a=o[1]):(r=o[1],a=o[0]);var s=i(r,a,t);if(s<0)e=e.left;else if(s>0)if(t[0]!==o[1][0])n=e,e=e.right;else{var l=c(e.right,t);if(l)return l;e=e.left}else{if(t[0]!==o[1][0])return e;var l=c(e.right,t);if(l)return l;e=e.left}}return n}function f(e,t,n,r){this.y=e,this.index=t,this.start=n,this.closed=r}function d(e,t,n,r){this.x=e,this.segment=t,this.create=n,this.index=r}l.castUp=function(e){var t=r.le(this.coordinates,e[0]);if(t<0)return-1;this.slabs[t];var n=c(this.slabs[t],e),a=-1;if(n&&(a=n.value),this.coordinates[t]===e[0]){var s=null;if(n&&(s=n.key),t>0){var l=c(this.slabs[t-1],e);l&&(s?o(l.key,s)>0&&(s=l.key,a=l.value):(a=l.value,s=l.key))}var f=this.horizontal[t];if(f.length>0){var d=r.ge(f,e[1],u);if(d<f.length){var p=f[d];if(e[1]===p.y){if(p.closed)return p.index;for(;d<f.length-1&&f[d+1].y===e[1];)if((p=f[d+=1]).closed)return p.index;if(p.y===e[1]&&!p.start){if((d+=1)>=f.length)return a;p=f[d]}}if(p.start)if(s){var h=i(s[0],s[1],[e[0],p.y]);s[0][0]>s[1][0]&&(h=-h),h>0&&(a=p.index)}else a=p.index;else p.y!==e[1]&&(a=p.index)}}}return a}},{"./lib/order-segments":501,"binary-search-bounds":79,"functional-red-black-tree":219,"robust-orientation":486}],503:[function(e,t,n){"use strict";var r=e("robust-dot-product"),a=e("robust-sum");function i(e,t){var n=a(r(e,t),[t[t.length-1]]);return n[n.length-1]}function o(e,t,n,r){var a=r-t,i=-t/a;i<0?i=0:i>1&&(i=1);for(var o=1-i,s=e.length,l=new Array(s),u=0;u<s;++u)l[u]=i*e[u]+o*n[u];return l}t.exports=function(e,t){for(var n=[],r=[],a=i(e[e.length-1],t),s=e[e.length-1],l=e[0],u=0;u<e.length;++u,s=l){var c=i(l=e[u],t);if(a<0&&c>0||a>0&&c<0){var f=o(s,c,l,a);n.push(f),r.push(f.slice())}c<0?r.push(l.slice()):c>0?n.push(l.slice()):(n.push(l.slice()),r.push(l.slice())),a=c}return{positive:n,negative:r}},t.exports.positive=function(e,t){for(var n=[],r=i(e[e.length-1],t),a=e[e.length-1],s=e[0],l=0;l<e.length;++l,a=s){var u=i(s=e[l],t);(r<0&&u>0||r>0&&u<0)&&n.push(o(a,u,s,r)),u>=0&&n.push(s.slice()),r=u}return n},t.exports.negative=function(e,t){for(var n=[],r=i(e[e.length-1],t),a=e[e.length-1],s=e[0],l=0;l<e.length;++l,a=s){var u=i(s=e[l],t);(r<0&&u>0||r>0&&u<0)&&n.push(o(a,u,s,r)),u<=0&&n.push(s.slice()),r=u}return n}},{"robust-dot-product":483,"robust-sum":491}],504:[function(e,t,n){!function(){"use strict";var e={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/};function t(n){return function(n,r){var a,i,o,s,l,u,c,f,d,p=1,h=n.length,m="";for(i=0;i<h;i++)if("string"==typeof n[i])m+=n[i];else if(Array.isArray(n[i])){if((s=n[i])[2])for(a=r[p],o=0;o<s[2].length;o++){if(!a.hasOwnProperty(s[2][o]))throw new Error(t('[sprintf] property "%s" does not exist',s[2][o]));a=a[s[2][o]]}else a=s[1]?r[s[1]]:r[p++];if(e.not_type.test(s[8])&&e.not_primitive.test(s[8])&&a instanceof Function&&(a=a()),e.numeric_arg.test(s[8])&&"number"!=typeof a&&isNaN(a))throw new TypeError(t("[sprintf] expecting number but found %T",a));switch(e.number.test(s[8])&&(f=a>=0),s[8]){case"b":a=parseInt(a,10).toString(2);break;case"c":a=String.fromCharCode(parseInt(a,10));break;case"d":case"i":a=parseInt(a,10);break;case"j":a=JSON.stringify(a,null,s[6]?parseInt(s[6]):0);break;case"e":a=s[7]?parseFloat(a).toExponential(s[7]):parseFloat(a).toExponential();break;case"f":a=s[7]?parseFloat(a).toFixed(s[7]):parseFloat(a);break;case"g":a=s[7]?String(Number(a.toPrecision(s[7]))):parseFloat(a);break;case"o":a=(parseInt(a,10)>>>0).toString(8);break;case"s":a=String(a),a=s[7]?a.substring(0,s[7]):a;break;case"t":a=String(!!a),a=s[7]?a.substring(0,s[7]):a;break;case"T":a=Object.prototype.toString.call(a).slice(8,-1).toLowerCase(),a=s[7]?a.substring(0,s[7]):a;break;case"u":a=parseInt(a,10)>>>0;break;case"v":a=a.valueOf(),a=s[7]?a.substring(0,s[7]):a;break;case"x":a=(parseInt(a,10)>>>0).toString(16);break;case"X":a=(parseInt(a,10)>>>0).toString(16).toUpperCase()}e.json.test(s[8])?m+=a:(!e.number.test(s[8])||f&&!s[3]?d="":(d=f?"+":"-",a=a.toString().replace(e.sign,"")),u=s[4]?"0"===s[4]?"0":s[4].charAt(1):" ",c=s[6]-(d+a).length,l=s[6]&&c>0?u.repeat(c):"",m+=s[5]?d+a+l:"0"===u?d+l+a:l+d+a)}return m}(function(t){if(a[t])return a[t];for(var n,r=t,i=[],o=0;r;){if(null!==(n=e.text.exec(r)))i.push(n[0]);else if(null!==(n=e.modulo.exec(r)))i.push("%");else{if(null===(n=e.placeholder.exec(r)))throw new SyntaxError("[sprintf] unexpected placeholder");if(n[2]){o|=1;var s=[],l=n[2],u=[];if(null===(u=e.key.exec(l)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(s.push(u[1]);""!==(l=l.substring(u[0].length));)if(null!==(u=e.key_access.exec(l)))s.push(u[1]);else{if(null===(u=e.index_access.exec(l)))throw new SyntaxError("[sprintf] failed to parse named argument key");s.push(u[1])}n[2]=s}else o|=2;if(3===o)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");i.push(n)}r=r.substring(n[0].length)}return a[t]=i}(n),arguments)}function r(e,n){return t.apply(null,[e].concat(n||[]))}var a=Object.create(null);void 0!==n&&(n.sprintf=t,n.vsprintf=r),"undefined"!=typeof window&&(window.sprintf=t,window.vsprintf=r)}()},{}],505:[function(e,t,n){"use strict";var r=e("parenthesis");t.exports=function(e,t,n){if(null==e)throw Error("First argument should be a string");if(null==t)throw Error("Separator should be a string or a RegExp");n?("string"==typeof n||Array.isArray(n))&&(n={ignore:n}):n={},null==n.escape&&(n.escape=!0),null==n.ignore?n.ignore=["[]","()","{}","<>",'""',"''","``","",""]:("string"==typeof n.ignore&&(n.ignore=[n.ignore]),n.ignore=n.ignore.map(function(e){return 1===e.length&&(e+=e),e}));var a=r.parse(e,{flat:!0,brackets:n.ignore}),i=a[0],o=i.split(t);if(n.escape){for(var s=[],l=0;l<o.length;l++){var u=o[l],c=o[l+1];"\\"===u[u.length-1]&&"\\"!==u[u.length-2]?(s.push(u+t+c),l++):s.push(u)}o=s}for(var l=0;l<o.length;l++)a[0]=o[l],o[l]=r.stringify(a,{flat:!0});return o}},{parenthesis:441}],506:[function(e,t,n){"use strict";t.exports=function(e){for(var t=e.length,n=new Array(t),r=new Array(t),a=new Array(t),i=new Array(t),o=new Array(t),s=new Array(t),l=0;l<t;++l)n[l]=-1,r[l]=0,a[l]=!1,i[l]=0,o[l]=-1,s[l]=[];var u,c=0,f=[],d=[];function p(t){var l=[t],u=[t];for(n[t]=r[t]=c,a[t]=!0,c+=1;u.length>0;){t=u[u.length-1];var p=e[t];if(i[t]<p.length){for(var h=i[t];h<p.length;++h){var m=p[h];if(n[m]<0){n[m]=r[m]=c,a[m]=!0,c+=1,l.push(m),u.push(m);break}a[m]&&(r[t]=0|Math.min(r[t],r[m])),o[m]>=0&&s[t].push(o[m])}i[t]=h}else{if(r[t]===n[t]){for(var v=[],g=[],y=0,h=l.length-1;h>=0;--h){var b=l[h];if(a[b]=!1,v.push(b),g.push(s[b]),y+=s[b].length,o[b]=f.length,b===t){l.length=h;break}}f.push(v);for(var x=new Array(y),h=0;h<g.length;h++)for(var _=0;_<g[h].length;_++)x[--y]=g[h][_];d.push(x)}u.pop()}}}for(var l=0;l<t;++l)n[l]<0&&p(l);for(var l=0;l<d.length;l++){var h=d[l];if(0!==h.length){h.sort(function(e,t){return e-t}),u=[h[0]];for(var m=1;m<h.length;m++)h[m]!==h[m-1]&&u.push(h[m]);d[l]=u}}return{components:f,adjacencyList:d}}},{}],507:[function(e,t,n){"use strict";t.exports=function(e){return e.split("").map(function(e){return e in r?r[e]:""}).join("")};var r={" ":" ",0:"",1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"","+":"","-":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:""}},{}],508:[function(e,t,n){"use strict";t.exports=function(e,t){if(e.dimension<=0)return{positions:[],cells:[]};if(1===e.dimension)return function(e,t){for(var n=i(e,t),r=n.length,a=new Array(r),o=new Array(r),s=0;s<r;++s)a[s]=[n[s]],o[s]=[s];return{positions:a,cells:o}}(e,t);var n=e.order.join()+"-"+e.dtype,s=o[n],t=+t||0;return s||(s=o[n]=function(e,t){var n=e.length,i=["'use strict';"],o="surfaceNets"+e.join("_")+"d"+t;i.push("var contour=genContour({","order:[",e.join(),"],","scalarArguments: 3,","phase:function phaseFunc(p,a,b,c) { return (p > c)|0 },"),"generic"===t&&i.push("getters:[0],");for(var s=[],l=[],u=0;u<n;++u)s.push("d"+u),l.push("d"+u);for(var u=0;u<1<<n;++u)s.push("v"+u),l.push("v"+u);for(var u=0;u<1<<n;++u)s.push("p"+u),l.push("p"+u);s.push("a","b","c"),l.push("a","c"),i.push("vertex:function vertexFunc(",s.join(),"){");for(var c=[],u=0;u<1<<n;++u)c.push("(p"+u+"<<"+u+")");i.push("var m=(",c.join("+"),")|0;if(m===0||m===",(1<<(1<<n))-1,"){return}");var f=[],d=[];1<<(1<<n)<=128?(i.push("switch(m){"),d=i):i.push("switch(m>>>7){");for(var u=0;u<1<<(1<<n);++u){if(1<<(1<<n)>128&&u%128==0){f.length>0&&d.push("}}");var p="vExtra"+f.length;i.push("case ",u>>>7,":",p,"(m&0x7f,",l.join(),");break;"),d=["function ",p,"(m,",l.join(),"){switch(m){"],f.push(d)}d.push("case ",127&u,":");for(var h=new Array(n),m=new Array(n),v=new Array(n),g=new Array(n),y=0,b=0;b<n;++b)h[b]=[],m[b]=[],v[b]=0,g[b]=0;for(var b=0;b<1<<n;++b)for(var x=0;x<n;++x){var _=b^1<<x;if(!(_>b)&&!(u&1<<_)!=!(u&1<<b)){var w=1;u&1<<_?m[x].push("v"+_+"-v"+b):(m[x].push("v"+b+"-v"+_),w=-w),w<0?(h[x].push("-v"+b+"-v"+_),v[x]+=2):(h[x].push("v"+b+"+v"+_),v[x]-=2),y+=1;for(var T=0;T<n;++T)T!==x&&(_&1<<T?g[T]+=1:g[T]-=1)}}for(var k=[],x=0;x<n;++x)if(0===h[x].length)k.push("d"+x+"-0.5");else{var C="";v[x]<0?C=v[x]+"*c":v[x]>0&&(C="+"+v[x]+"*c");var E=h[x].length/y*.5,M=.5+g[x]/y*.5;k.push("d"+x+"-"+M+"-"+E+"*("+h[x].join("+")+C+")/("+m[x].join("+")+")")}d.push("a.push([",k.join(),"]);","break;")}i.push("}},"),f.length>0&&d.push("}}");for(var A=[],u=0;u<1<<n-1;++u)A.push("v"+u);A.push("c0","c1","p0","p1","a","b","c"),i.push("cell:function cellFunc(",A.join(),"){");var S=a(n-1);i.push("if(p0){b.push(",S.map(function(e){return"["+e.map(function(e){return"v"+e})+"]"}).join(),")}else{b.push(",S.map(function(e){var t=e.slice();return t.reverse(),"["+t.map(function(e){return"v"+e})+"]"}).join(),")}}});function ",o,"(array,level){var verts=[],cells=[];contour(array,verts,cells,level);return {positions:verts,cells:cells};} return ",o,";");for(var u=0;u<f.length;++u)i.push(f[u].join(""));return new Function("genContour",i.join(""))(r)}(e.order,e.dtype)),s(e,t)};var r=e("ndarray-extract-contour"),a=e("triangulate-hypercube"),i=e("zero-crossings"),o={}},{"ndarray-extract-contour":422,"triangulate-hypercube":518,"zero-crossings":551}],509:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=2*Math.PI,i=function(e,t,n,r,a,i,o){var s=e.x,l=e.y,u=r*(s*=t)-a*(l*=n),c=a*s+r*l;return{x:u+i,y:c+o}},o=function(e,t){var n=.551915024494,r=Math.cos(e),a=Math.sin(e),i=Math.cos(e+t),o=Math.sin(e+t);return[{x:r-a*n,y:a+r*n},{x:i+o*n,y:o-i*n},{x:i,y:o}]},s=function(e,t,n,r){var a=e*r-t*n<0?-1:1,i=Math.sqrt(e*e+t*t),o=Math.sqrt(e*e+t*t),s=e*n+t*r,l=s/(i*o);return l>1&&(l=1),l<-1&&(l=-1),a*Math.acos(l)};n.default=function(e){var t=e.px,n=e.py,l=e.cx,u=e.cy,c=e.rx,f=e.ry,d=e.xAxisRotation,p=void 0===d?0:d,h=e.largeArcFlag,m=void 0===h?0:h,v=e.sweepFlag,g=void 0===v?0:v,y=[];if(0===c||0===f)return[];var b=Math.sin(p*a/360),x=Math.cos(p*a/360),_=x*(t-l)/2+b*(n-u)/2,w=-b*(t-l)/2+x*(n-u)/2;if(0===_&&0===w)return[];c=Math.abs(c),f=Math.abs(f);var T=Math.pow(_,2)/Math.pow(c,2)+Math.pow(w,2)/Math.pow(f,2);T>1&&(c*=Math.sqrt(T),f*=Math.sqrt(T));var k=function(e,t,n,r,i,o,l,u,c,f,d,p){var h=Math.pow(i,2),m=Math.pow(o,2),v=Math.pow(d,2),g=Math.pow(p,2),y=h*m-h*g-m*v;y<0&&(y=0),y/=h*g+m*v;var b=(y=Math.sqrt(y)*(l===u?-1:1))*i/o*p,x=y*-o/i*d,_=f*b-c*x+(e+n)/2,w=c*b+f*x+(t+r)/2,T=(d-b)/i,k=(p-x)/o,C=(-d-b)/i,E=(-p-x)/o,M=s(1,0,T,k),A=s(T,k,C,E);return 0===u&&A>0&&(A-=a),1===u&&A<0&&(A+=a),[_,w,M,A]}(t,n,l,u,c,f,m,g,b,x,_,w),C=r(k,4),E=C[0],M=C[1],A=C[2],S=C[3],O=Math.abs(S)/(a/4);Math.abs(1-O)<1e-7&&(O=1);var P=Math.max(Math.ceil(O),1);S/=P;for(var R=0;R<P;R++)y.push(o(A,S)),A+=S;return y.map(function(e){var t=i(e[0],c,f,x,b,E,M),n=t.x,r=t.y,a=i(e[1],c,f,x,b,E,M),o=a.x,s=a.y,l=i(e[2],c,f,x,b,E,M),u=l.x,d=l.y;return{x1:n,y1:r,x2:o,y2:s,x:u,y:d}})},t.exports=n.default},{}],510:[function(e,t,n){"use strict";var r=e("parse-svg-path"),a=e("abs-svg-path"),i=e("normalize-svg-path"),o=e("is-svg-path"),s=e("assert");t.exports=function(e){if(Array.isArray(e)&&1===e.length&&"string"==typeof e[0]&&(e=e[0]),"string"==typeof e&&(s(o(e),"String is not an SVG path."),e=r(e)),s(Array.isArray(e),"Argument should be a string or an array of path segments."),e=a(e),!(e=i(e)).length)return[0,0,0,0];for(var t=[1/0,1/0,-1/0,-1/0],n=0,l=e.length;n<l;n++)for(var u=e[n].slice(1),c=0;c<u.length;c+=2)u[c+0]<t[0]&&(t[0]=u[c+0]),u[c+1]<t[1]&&(t[1]=u[c+1]),u[c+0]>t[2]&&(t[2]=u[c+0]),u[c+1]>t[3]&&(t[3]=u[c+1]);return t}},{"abs-svg-path":48,assert:56,"is-svg-path":407,"normalize-svg-path":511,"parse-svg-path":443}],511:[function(e,t,n){"use strict";t.exports=function(e){for(var t,n=[],o=0,s=0,l=0,u=0,c=null,f=null,d=0,p=0,h=0,m=e.length;h<m;h++){var v=e[h],g=v[0];switch(g){case"M":l=v[1],u=v[2];break;case"A":var y=r({px:d,py:p,cx:v[6],cy:v[7],rx:v[1],ry:v[2],xAxisRotation:v[3],largeArcFlag:v[4],sweepFlag:v[5]});if(!y.length)continue;for(var b,x=0;x<y.length;x++)b=y[x],v=["C",b.x1,b.y1,b.x2,b.y2,b.x,b.y],x<y.length-1&&n.push(v);break;case"S":var _=d,w=p;"C"!=t&&"S"!=t||(_+=_-o,w+=w-s),v=["C",_,w,v[1],v[2],v[3],v[4]];break;case"T":"Q"==t||"T"==t?(c=2*d-c,f=2*p-f):(c=d,f=p),v=i(d,p,c,f,v[1],v[2]);break;case"Q":c=v[1],f=v[2],v=i(d,p,v[1],v[2],v[3],v[4]);break;case"L":v=a(d,p,v[1],v[2]);break;case"H":v=a(d,p,v[1],p);break;case"V":v=a(d,p,d,v[1]);break;case"Z":v=a(d,p,l,u)}t=g,d=v[v.length-2],p=v[v.length-1],v.length>4?(o=v[v.length-4],s=v[v.length-3]):(o=d,s=p),n.push(v)}return n};var r=e("svg-arc-to-cubic-bezier");function a(e,t,n,r){return["C",e,t,n,r,n,r]}function i(e,t,n,r,a,i){return["C",e/3+2/3*n,t/3+2/3*r,a/3+2/3*n,i/3+2/3*r,a,i]}},{"svg-arc-to-cubic-bezier":509}],512:[function(e,t,n){"use strict";var r=e("svg-path-bounds"),a=e("parse-svg-path"),i=e("draw-svg-path"),o=e("is-svg-path"),s=e("bitmap-sdf"),l=document.createElement("canvas"),u=l.getContext("2d");t.exports=function(e,t){if(!o(e))throw Error("Argument should be valid svg path string");var n,c;t||(t={}),t.shape?(n=t.shape[0],c=t.shape[1]):(n=l.width=t.w||t.width||200,c=l.height=t.h||t.height||200);var f=Math.min(n,c),d=t.stroke||0,p=t.viewbox||t.viewBox||r(e),h=[n/(p[2]-p[0]),c/(p[3]-p[1])],m=Math.min(h[0]||0,h[1]||0)/2;if(u.fillStyle="black",u.fillRect(0,0,n,c),u.fillStyle="white",d&&("number"!=typeof d&&(d=1),u.strokeStyle=d>0?"white":"black",u.lineWidth=Math.abs(d)),u.translate(.5*n,.5*c),u.scale(m,m),function(){var e=document.createElement("canvas").getContext("2d");e.canvas.width=e.canvas.height=1;var t=new Path2D("M0,0h1v1h-1v-1Z");e.fillStyle="black",e.fill(t);var n=e.getImageData(0,0,1,1);return n&&n.data&&255===n.data[3]}()){var v=new Path2D(e);u.fill(v),d&&u.stroke(v)}else{var g=a(e);i(u,g),u.fill(),d&&u.stroke()}return u.setTransform(1,0,0,1,0,0),s(u,{cutoff:null!=t.cutoff?t.cutoff:.5,radius:null!=t.radius?t.radius:.5*f})}},{"bitmap-sdf":81,"draw-svg-path":153,"is-svg-path":407,"parse-svg-path":443,"svg-path-bounds":510}],513:[function(e,t,n){(function(n){"use strict";t.exports=function e(t,n,a){var a=a||{},o=i[t];o||(o=i[t]={" ":{data:new Float32Array(0),shape:.2}});var s=o[n];if(!s)if(n.length<=1||!/\d/.test(n))s=o[n]=function(e){for(var t=e.cells,n=e.positions,r=new Float32Array(6*t.length),a=0,i=0,o=0;o<t.length;++o)for(var s=t[o],l=0;l<3;++l){var u=n[s[l]];r[a++]=u[0],r[a++]=u[1]+1.4,i=Math.max(u[0],i)}return{data:r,shape:i}}(r(n,{triangles:!0,font:t,textAlign:a.textAlign||"left",textBaseline:"alphabetic"}));else{for(var l=n.split(/(\d|\s)/),u=new Array(l.length),c=0,f=0,d=0;d<l.length;++d)u[d]=e(t,l[d]),c+=u[d].data.length,f+=u[d].shape,d>0&&(f+=.02);for(var p=new Float32Array(c),h=0,m=-.5*f,d=0;d<u.length;++d){for(var v=u[d].data,g=0;g<v.length;g+=2)p[h++]=v[g]+m,p[h++]=v[g+1];m+=u[d].shape+.02}s=o[n]={data:p,shape:f}}return s};var r=e("vectorize-text"),a=window||n.global||{},i=a.__TEXT_CACHE||{};a.__TEXT_CACHE={}}).call(this,e("_process"))},{_process:465,"vectorize-text":527}],514:[function(e,t,n){!function(e){var n=/^\s+/,r=/\s+$/,a=0,i=e.round,o=e.min,s=e.max,l=e.random;function u(t,l){if(t=t||"",l=l||{},t instanceof u)return t;if(!(this instanceof u))return new u(t,l);var c=function(t){var a={r:0,g:0,b:0},i=1,l=null,u=null,c=null,f=!1,d=!1;return"string"==typeof t&&(t=function(e){e=e.replace(n,"").replace(r,"").toLowerCase();var t,a=!1;if(M[e])e=M[e],a=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};return(t=j.rgb.exec(e))?{r:t[1],g:t[2],b:t[3]}:(t=j.rgba.exec(e))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=j.hsl.exec(e))?{h:t[1],s:t[2],l:t[3]}:(t=j.hsla.exec(e))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=j.hsv.exec(e))?{h:t[1],s:t[2],v:t[3]}:(t=j.hsva.exec(e))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=j.hex8.exec(e))?{r:R(t[1]),g:R(t[2]),b:R(t[3]),a:z(t[4]),format:a?"name":"hex8"}:(t=j.hex6.exec(e))?{r:R(t[1]),g:R(t[2]),b:R(t[3]),format:a?"name":"hex"}:(t=j.hex4.exec(e))?{r:R(t[1]+""+t[1]),g:R(t[2]+""+t[2]),b:R(t[3]+""+t[3]),a:z(t[4]+""+t[4]),format:a?"name":"hex8"}:!!(t=j.hex3.exec(e))&&{r:R(t[1]+""+t[1]),g:R(t[2]+""+t[2]),b:R(t[3]+""+t[3]),format:a?"name":"hex"}}(t)),"object"==typeof t&&(N(t.r)&&N(t.g)&&N(t.b)?(a=function(e,t,n){return{r:255*O(e,255),g:255*O(t,255),b:255*O(n,255)}}(t.r,t.g,t.b),f=!0,d="%"===String(t.r).substr(-1)?"prgb":"rgb"):N(t.h)&&N(t.s)&&N(t.v)?(l=D(t.s),u=D(t.v),a=function(t,n,r){t=6*O(t,360),n=O(n,100),r=O(r,100);var a=e.floor(t),i=t-a,o=r*(1-n),s=r*(1-i*n),l=r*(1-(1-i)*n),u=a%6;return{r:255*[r,s,o,o,l,r][u],g:255*[l,r,r,s,o,o][u],b:255*[o,o,l,r,r,s][u]}}(t.h,l,u),f=!0,d="hsv"):N(t.h)&&N(t.s)&&N(t.l)&&(l=D(t.s),c=D(t.l),a=function(e,t,n){var r,a,i;function o(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=O(e,360),t=O(t,100),n=O(n,100),0===t)r=a=i=n;else{var s=n<.5?n*(1+t):n+t-n*t,l=2*n-s;r=o(l,s,e+1/3),a=o(l,s,e),i=o(l,s,e-1/3)}return{r:255*r,g:255*a,b:255*i}}(t.h,l,c),f=!0,d="hsl"),t.hasOwnProperty("a")&&(i=t.a)),i=S(i),{ok:f,format:t.format||d,r:o(255,s(a.r,0)),g:o(255,s(a.g,0)),b:o(255,s(a.b,0)),a:i}}(t);this._originalInput=t,this._r=c.r,this._g=c.g,this._b=c.b,this._a=c.a,this._roundA=i(100*this._a)/100,this._format=l.format||c.format,this._gradientType=l.gradientType,this._r<1&&(this._r=i(this._r)),this._g<1&&(this._g=i(this._g)),this._b<1&&(this._b=i(this._b)),this._ok=c.ok,this._tc_id=a++}function c(e,t,n){e=O(e,255),t=O(t,255),n=O(n,255);var r,a,i=s(e,t,n),l=o(e,t,n),u=(i+l)/2;if(i==l)r=a=0;else{var c=i-l;switch(a=u>.5?c/(2-i-l):c/(i+l),i){case e:r=(t-n)/c+(t<n?6:0);break;case t:r=(n-e)/c+2;break;case n:r=(e-t)/c+4}r/=6}return{h:r,s:a,l:u}}function f(e,t,n){e=O(e,255),t=O(t,255),n=O(n,255);var r,a,i=s(e,t,n),l=o(e,t,n),u=i,c=i-l;if(a=0===i?0:c/i,i==l)r=0;else{switch(i){case e:r=(t-n)/c+(t<n?6:0);break;case t:r=(n-e)/c+2;break;case n:r=(e-t)/c+4}r/=6}return{h:r,s:a,v:u}}function d(e,t,n,r){var a=[L(i(e).toString(16)),L(i(t).toString(16)),L(i(n).toString(16))];return r&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0):a.join("")}function p(e,t,n,r){var a=[L(I(r)),L(i(e).toString(16)),L(i(t).toString(16)),L(i(n).toString(16))];return a.join("")}function h(e,t){t=0===t?0:t||10;var n=u(e).toHsl();return n.s-=t/100,n.s=P(n.s),u(n)}function m(e,t){t=0===t?0:t||10;var n=u(e).toHsl();return n.s+=t/100,n.s=P(n.s),u(n)}function v(e){return u(e).desaturate(100)}function g(e,t){t=0===t?0:t||10;var n=u(e).toHsl();return n.l+=t/100,n.l=P(n.l),u(n)}function y(e,t){t=0===t?0:t||10;var n=u(e).toRgb();return n.r=s(0,o(255,n.r-i(-t/100*255))),n.g=s(0,o(255,n.g-i(-t/100*255))),n.b=s(0,o(255,n.b-i(-t/100*255))),u(n)}function b(e,t){t=0===t?0:t||10;var n=u(e).toHsl();return n.l-=t/100,n.l=P(n.l),u(n)}function x(e,t){var n=u(e).toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,u(n)}function _(e){var t=u(e).toHsl();return t.h=(t.h+180)%360,u(t)}function w(e){var t=u(e).toHsl(),n=t.h;return[u(e),u({h:(n+120)%360,s:t.s,l:t.l}),u({h:(n+240)%360,s:t.s,l:t.l})]}function T(e){var t=u(e).toHsl(),n=t.h;return[u(e),u({h:(n+90)%360,s:t.s,l:t.l}),u({h:(n+180)%360,s:t.s,l:t.l}),u({h:(n+270)%360,s:t.s,l:t.l})]}function k(e){var t=u(e).toHsl(),n=t.h;return[u(e),u({h:(n+72)%360,s:t.s,l:t.l}),u({h:(n+216)%360,s:t.s,l:t.l})]}function C(e,t,n){t=t||6,n=n||30;var r=u(e).toHsl(),a=360/n,i=[u(e)];for(r.h=(r.h-(a*t>>1)+720)%360;--t;)r.h=(r.h+a)%360,i.push(u(r));return i}function E(e,t){t=t||6;for(var n=u(e).toHsv(),r=n.h,a=n.s,i=n.v,o=[],s=1/t;t--;)o.push(u({h:r,s:a,v:i})),i=(i+s)%1;return o}u.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var t,n,r,a,i,o,s=this.toRgb();return t=s.r/255,n=s.g/255,r=s.b/255,a=t<=.03928?t/12.92:e.pow((t+.055)/1.055,2.4),i=n<=.03928?n/12.92:e.pow((n+.055)/1.055,2.4),o=r<=.03928?r/12.92:e.pow((r+.055)/1.055,2.4),.2126*a+.7152*i+.0722*o},setAlpha:function(e){return this._a=S(e),this._roundA=i(100*this._a)/100,this},toHsv:function(){var e=f(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=f(this._r,this._g,this._b),t=i(360*e.h),n=i(100*e.s),r=i(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=c(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=c(this._r,this._g,this._b),t=i(360*e.h),n=i(100*e.s),r=i(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return d(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,n,r,a){var o=[L(i(e).toString(16)),L(i(t).toString(16)),L(i(n).toString(16)),L(I(r))];return a&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:i(this._r),g:i(this._g),b:i(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+i(this._r)+", "+i(this._g)+", "+i(this._b)+")":"rgba("+i(this._r)+", "+i(this._g)+", "+i(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:i(100*O(this._r,255))+"%",g:i(100*O(this._g,255))+"%",b:i(100*O(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+i(100*O(this._r,255))+"%, "+i(100*O(this._g,255))+"%, "+i(100*O(this._b,255))+"%)":"rgba("+i(100*O(this._r,255))+"%, "+i(100*O(this._g,255))+"%, "+i(100*O(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(A[d(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+p(this._r,this._g,this._b,this._a),n=t,r=this._gradientType?"GradientType = 1, ":"";if(e){var a=u(e);n="#"+p(a._r,a._g,a._b,a._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&this._a>=0,a=!t&&r&&("hex"===e||"hex6"===e||"hex3"===e||"hex4"===e||"hex8"===e||"name"===e);return a?"name"===e&&0===this._a?this.toName():this.toRgbString():("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString())},clone:function(){return u(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(g,arguments)},brighten:function(){return this._applyModification(y,arguments)},darken:function(){return this._applyModification(b,arguments)},desaturate:function(){return this._applyModification(h,arguments)},saturate:function(){return this._applyModification(m,arguments)},greyscale:function(){return this._applyModification(v,arguments)},spin:function(){return this._applyModification(x,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(C,arguments)},complement:function(){return this._applyCombination(_,arguments)},monochromatic:function(){return this._applyCombination(E,arguments)},splitcomplement:function(){return this._applyCombination(k,arguments)},triad:function(){return this._applyCombination(w,arguments)},tetrad:function(){return this._applyCombination(T,arguments)}},u.fromRatio=function(e,t){if("object"==typeof e){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]="a"===r?e[r]:D(e[r]));e=n}return u(e,t)},u.equals=function(e,t){return!(!e||!t)&&u(e).toRgbString()==u(t).toRgbString()},u.random=function(){return u.fromRatio({r:l(),g:l(),b:l()})},u.mix=function(e,t,n){n=0===n?0:n||50;var r=u(e).toRgb(),a=u(t).toRgb(),i=n/100,o={r:(a.r-r.r)*i+r.r,g:(a.g-r.g)*i+r.g,b:(a.b-r.b)*i+r.b,a:(a.a-r.a)*i+r.a};return u(o)},u.readability=function(t,n){var r=u(t),a=u(n);return(e.max(r.getLuminance(),a.getLuminance())+.05)/(e.min(r.getLuminance(),a.getLuminance())+.05)},u.isReadable=function(e,t,n){var r,a,i=u.readability(e,t);switch(a=!1,(r=function(e){var t,n;return t=((e=e||{level:"AA",size:"small"}).level||"AA").toUpperCase(),n=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA"),"small"!==n&&"large"!==n&&(n="small"),{level:t,size:n}}(n)).level+r.size){case"AAsmall":case"AAAlarge":a=i>=4.5;break;case"AAlarge":a=i>=3;break;case"AAAsmall":a=i>=7}return a},u.mostReadable=function(e,t,n){var r,a,i,o,s=null,l=0;a=(n=n||{}).includeFallbackColors,i=n.level,o=n.size;for(var c=0;c<t.length;c++)(r=u.readability(e,t[c]))>l&&(l=r,s=u(t[c]));return u.isReadable(e,s,{level:i,size:o})||!a?s:(n.includeFallbackColors=!1,u.mostReadable(e,["#fff","#000"],n))};var M=u.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},A=u.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(M);function S(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function O(t,n){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(t)&&(t="100%");var r=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(t);return t=o(n,s(0,parseFloat(t))),r&&(t=parseInt(t*n,10)/100),e.abs(t-n)<1e-6?1:t%n/parseFloat(n)}function P(e){return o(1,s(0,e))}function R(e){return parseInt(e,16)}function L(e){return 1==e.length?"0"+e:""+e}function D(e){return e<=1&&(e=100*e+"%"),e}function I(t){return e.round(255*parseFloat(t)).toString(16)}function z(e){return R(e)/255}var j=function(){var e="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",t="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?",n="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?";return{CSS_UNIT:new RegExp(e),rgb:new RegExp("rgb"+t),rgba:new RegExp("rgba"+n),hsl:new RegExp("hsl"+t),hsla:new RegExp("hsla"+n),hsv:new RegExp("hsv"+t),hsva:new RegExp("hsva"+n),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function N(e){return!!j.CSS_UNIT.exec(e)}void 0!==t&&t.exports?t.exports=u:window.tinycolor=u}(Math)},{}],515:[function(e,t,n){"use strict";function r(e){if(e instanceof Float32Array)return e;if("number"==typeof e)return new Float32Array([e])[0];var t=new Float32Array(e);return t.set(e),t}t.exports=r,t.exports.float32=t.exports.float=r,t.exports.fract32=t.exports.fract=function(e){if("number"==typeof e)return r(e-r(e));for(var t=r(e),n=0,a=t.length;n<a;n++)t[n]=e[n]-t[n];return t}},{}],516:[function(e,t,n){"use strict";var r=e("parse-unit");t.exports=o;var a=96;function i(e,t){var n=r(getComputedStyle(e).getPropertyValue(t));return n[0]*o(n[1],e)}function o(e,t){switch(t=t||document.body,e=(e||"px").trim().toLowerCase(),t!==window&&t!==document||(t=document.body),e){case"%":return t.clientHeight/100;case"ch":case"ex":return function(e,t){var n=document.createElement("div");n.style["font-size"]="128"+e,t.appendChild(n);var r=i(n,"font-size")/128;return t.removeChild(n),r}(e,t);case"em":return i(t,"font-size");case"rem":return i(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return a;case"cm":return a/2.54;case"mm":return a/25.4;case"pt":return a/72;case"pc":return a/6}return 1}},{"parse-unit":444}],517:[function(e,t,n){!function(e,r){r("object"==typeof n&&void 0!==t?n:e.topojson=e.topojson||{})}(this,function(e){"use strict";var t=function(e){return e},n=function(e){if(null==(n=e.transform))return t;var n,r,a,i=n.scale[0],o=n.scale[1],s=n.translate[0],l=n.translate[1];return function(e,t){return t||(r=a=0),e[0]=(r+=e[0])*i+s,e[1]=(a+=e[1])*o+l,e}},r=function(e){var t=e.bbox;function r(e){l[0]=e[0],l[1]=e[1],s(l),l[0]<u&&(u=l[0]),l[0]>f&&(f=l[0]),l[1]<c&&(c=l[1]),l[1]>d&&(d=l[1])}function a(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(a);break;case"Point":r(e.coordinates);break;case"MultiPoint":e.coordinates.forEach(r)}}if(!t){var i,o,s=n(e),l=new Array(2),u=1/0,c=u,f=-u,d=-u;for(o in e.arcs.forEach(function(e){for(var t=-1,n=e.length;++t<n;)i=e[t],l[0]=i[0],l[1]=i[1],s(l,t),l[0]<u&&(u=l[0]),l[0]>f&&(f=l[0]),l[1]<c&&(c=l[1]),l[1]>d&&(d=l[1])}),e.objects)a(e.objects[o]);t=e.bbox=[u,c,f,d]}return t},a=function(e,t){for(var n,r=e.length,a=r-t;a<--r;)n=e[a],e[a++]=e[r],e[r]=n};function i(e,t){var n=t.id,r=t.bbox,a=null==t.properties?{}:t.properties,i=o(e,t);return null==n&&null==r?{type:"Feature",properties:a,geometry:i}:null==r?{type:"Feature",id:n,properties:a,geometry:i}:{type:"Feature",id:n,bbox:r,properties:a,geometry:i}}function o(e,t){var r=n(e),i=e.arcs;function o(e,t){t.length&&t.pop();for(var n=i[e<0?~e:e],o=0,s=n.length;o<s;++o)t.push(r(n[o].slice(),o));e<0&&a(t,s)}function s(e){return r(e.slice())}function l(e){for(var t=[],n=0,r=e.length;n<r;++n)o(e[n],t);return t.length<2&&t.push(t[0].slice()),t}function u(e){for(var t=l(e);t.length<4;)t.push(t[0].slice());return t}function c(e){return e.map(u)}return function e(t){var n,r=t.type;switch(r){case"GeometryCollection":return{type:r,geometries:t.geometries.map(e)};case"Point":n=s(t.coordinates);break;case"MultiPoint":n=t.coordinates.map(s);break;case"LineString":n=l(t.arcs);break;case"MultiLineString":n=t.arcs.map(l);break;case"Polygon":n=c(t.arcs);break;case"MultiPolygon":n=t.arcs.map(c);break;default:return null}return{type:r,coordinates:n}}(t)}var s=function(e,t){var n={},r={},a={},i=[],o=-1;function s(e,t){for(var r in e){var a=e[r];delete t[a.start],delete a.start,delete a.end,a.forEach(function(e){n[e<0?~e:e]=1}),i.push(a)}}return t.forEach(function(n,r){var a,i=e.arcs[n<0?~n:n];i.length<3&&!i[1][0]&&!i[1][1]&&(a=t[++o],t[o]=n,t[r]=a)}),t.forEach(function(t){var n,i,o=function(t){var n,r=e.arcs[t<0?~t:t],a=r[0];return e.transform?(n=[0,0],r.forEach(function(e){n[0]+=e[0],n[1]+=e[1]})):n=r[r.length-1],t<0?[n,a]:[a,n]}(t),s=o[0],l=o[1];if(n=a[s])if(delete a[n.end],n.push(t),n.end=l,i=r[l]){delete r[i.start];var u=i===n?n:n.concat(i);r[u.start=n.start]=a[u.end=i.end]=u}else r[n.start]=a[n.end]=n;else if(n=r[l])if(delete r[n.start],n.unshift(t),n.start=s,i=a[s]){delete a[i.end];var c=i===n?n:i.concat(n);r[c.start=i.start]=a[c.end=n.end]=c}else r[n.start]=a[n.end]=n;else r[(n=[t]).start=s]=a[n.end=l]=n}),s(a,r),s(r,a),t.forEach(function(e){n[e<0?~e:e]||i.push([e])}),i};function l(e,t,n){var r,a,i;if(arguments.length>1)r=function(e,t,n){var r,a=[],i=[];function o(e){var t=e<0?~e:e;(i[t]||(i[t]=[])).push({i:e,g:r})}function s(e){e.forEach(o)}function l(e){e.forEach(s)}return function e(t){switch(r=t,t.type){case"GeometryCollection":t.geometries.forEach(e);break;case"LineString":s(t.arcs);break;case"MultiLineString":case"Polygon":l(t.arcs);break;case"MultiPolygon":!function(e){e.forEach(l)}(t.arcs)}}(t),i.forEach(null==n?function(e){a.push(e[0].i)}:function(e){n(e[0].g,e[e.length-1].g)&&a.push(e[0].i)}),a}(0,t,n);else for(a=0,r=new Array(i=e.arcs.length);a<i;++a)r[a]=a;return{type:"MultiLineString",arcs:s(e,r)}}function u(e,t){var n={},r=[],a=[];function i(e){e.forEach(function(t){t.forEach(function(t){(n[t=t<0?~t:t]||(n[t]=[])).push(e)})}),r.push(e)}function l(t){return function(e){for(var t,n=-1,r=e.length,a=e[r-1],i=0;++n<r;)t=a,a=e[n],i+=t[0]*a[1]-t[1]*a[0];return Math.abs(i)}(o(e,{type:"Polygon",arcs:[t]}).coordinates[0])}return t.forEach(function e(t){switch(t.type){case"GeometryCollection":t.geometries.forEach(e);break;case"Polygon":i(t.arcs);break;case"MultiPolygon":t.arcs.forEach(i)}}),r.forEach(function(e){if(!e._){var t=[],r=[e];for(e._=1,a.push(t);e=r.pop();)t.push(e),e.forEach(function(e){e.forEach(function(e){n[e<0?~e:e].forEach(function(e){e._||(e._=1,r.push(e))})})})}}),r.forEach(function(e){delete e._}),{type:"MultiPolygon",arcs:a.map(function(t){var r,a=[];if(t.forEach(function(e){e.forEach(function(e){e.forEach(function(e){n[e<0?~e:e].length<2&&a.push(e)})})}),a=s(e,a),(r=a.length)>1)for(var i,o,u=1,c=l(a[0]);u<r;++u)(i=l(a[u]))>c&&(o=a[0],a[0]=a[u],a[u]=o,c=i);return a})}}var c=function(e,t){for(var n=0,r=e.length;n<r;){var a=n+r>>>1;e[a]<t?n=a+1:r=a}return n};e.bbox=r,e.feature=function(e,t){return"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map(function(t){return i(e,t)})}:i(e,t)},e.mesh=function(e){return o(e,l.apply(this,arguments))},e.meshArcs=l,e.merge=function(e){return o(e,u.apply(this,arguments))},e.mergeArcs=u,e.neighbors=function(e){var t={},n=e.map(function(){return[]});function r(e,n){e.forEach(function(e){e<0&&(e=~e);var r=t[e];r?r.push(n):t[e]=[n]})}function a(e,t){e.forEach(function(e){r(e,t)})}var i={LineString:r,MultiLineString:a,Polygon:a,MultiPolygon:function(e,t){e.forEach(function(e){a(e,t)})}};for(var o in e.forEach(function e(t,n){"GeometryCollection"===t.type?t.geometries.forEach(function(t){e(t,n)}):t.type in i&&i[t.type](t.arcs,n)}),t)for(var s=t[o],l=s.length,u=0;u<l;++u)for(var f=u+1;f<l;++f){var d,p=s[u],h=s[f];(d=n[p])[o=c(d,h)]!==h&&d.splice(o,0,h),(d=n[h])[o=c(d,p)]!==p&&d.splice(o,0,p)}return n},e.quantize=function(e,t){if(!((t=Math.floor(t))>=2))throw new Error("n must be 2");if(e.transform)throw new Error("already quantized");var n,a=r(e),i=a[0],o=(a[2]-i)/(t-1)||1,s=a[1],l=(a[3]-s)/(t-1)||1;function u(e){e[0]=Math.round((e[0]-i)/o),e[1]=Math.round((e[1]-s)/l)}function c(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(c);break;case"Point":u(e.coordinates);break;case"MultiPoint":e.coordinates.forEach(u)}}for(n in e.arcs.forEach(function(e){for(var t,n,r,a=1,u=1,c=e.length,f=e[0],d=f[0]=Math.round((f[0]-i)/o),p=f[1]=Math.round((f[1]-s)/l);a<c;++a)f=e[a],n=Math.round((f[0]-i)/o),r=Math.round((f[1]-s)/l),n===d&&r===p||((t=e[u++])[0]=n-d,d=n,t[1]=r-p,p=r);u<2&&((t=e[u++])[0]=0,t[1]=0),e.length=u}),e.objects)c(e.objects[n]);return e.transform={scale:[o,l],translate:[i,s]},e},e.transform=n,e.untransform=function(e){if(null==(n=e.transform))return t;var n,r,a,i=n.scale[0],o=n.scale[1],s=n.translate[0],l=n.translate[1];return function(e,t){t||(r=a=0);var n=Math.round((e[0]-s)/i),u=Math.round((e[1]-l)/o);return e[0]=n-r,r=n,e[1]=u-a,a=u,e}},Object.defineProperty(e,"__esModule",{value:!0})})},{}],518:[function(e,t,n){"use strict";t.exports=function(e){if(e<0)return[];if(0===e)return[[0]];for(var t=0|Math.round(i(e+1)),n=[],o=0;o<t;++o){for(var s=r.unrank(e,o),l=[0],u=0,c=0;c<s.length;++c)u+=1<<s[c],l.push(u);a(s)<1&&(l[0]=u,l[e]=0),n.push(l)}return n};var r=e("permutation-rank"),a=e("permutation-parity"),i=e("gamma")},{gamma:220,"permutation-parity":446,"permutation-rank":447}],519:[function(e,t,n){"use strict";t.exports=function(e){var t=(e=e||{}).center||[0,0,0],n=e.up||[0,1,0],r=e.right||f(n),a=e.radius||1,i=e.theta||0,c=e.phi||0;if(t=[].slice.call(t,0,3),n=[].slice.call(n,0,3),s(n,n),r=[].slice.call(r,0,3),s(r,r),"eye"in e){var p=e.eye,h=[p[0]-t[0],p[1]-t[1],p[2]-t[2]];o(r,h,n),u(r[0],r[1],r[2])<1e-6?r=f(n):s(r,r),a=u(h[0],h[1],h[2]);var m=l(n,h)/a,v=l(r,h)/a;c=Math.acos(m),i=Math.acos(v)}return a=Math.log(a),new d(e.zoomMin,e.zoomMax,t,n,r,a,i,c)};var r=e("filtered-vector"),a=e("gl-mat4/invert"),i=e("gl-mat4/rotate"),o=e("gl-vec3/cross"),s=e("gl-vec3/normalize"),l=e("gl-vec3/dot");function u(e,t,n){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2)+Math.pow(n,2))}function c(e){return Math.min(1,Math.max(-1,e))}function f(e){var t=Math.abs(e[0]),n=Math.abs(e[1]),r=Math.abs(e[2]),a=[0,0,0];t>Math.max(n,r)?a[2]=1:n>Math.max(t,r)?a[0]=1:a[1]=1;for(var i=0,o=0,l=0;l<3;++l)i+=e[l]*e[l],o+=a[l]*e[l];for(var l=0;l<3;++l)a[l]-=o/i*e[l];return s(a,a),a}function d(e,t,n,a,i,o,s,l){this.center=r(n),this.up=r(a),this.right=r(i),this.radius=r([o]),this.angle=r([s,l]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(e,t),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var u=0;u<16;++u)this.computedMatrix[u]=.5;this.recalcMatrix(0)}var p=d.prototype;p.setDistanceLimits=function(e,t){e=e>0?Math.log(e):-1/0,t=t>0?Math.log(t):1/0,t=Math.max(t,e),this.radius.bounds[0][0]=e,this.radius.bounds[1][0]=t},p.getDistanceLimits=function(e){var t=this.radius.bounds[0];return e?(e[0]=Math.exp(t[0][0]),e[1]=Math.exp(t[1][0]),e):[Math.exp(t[0][0]),Math.exp(t[1][0])]},p.recalcMatrix=function(e){this.center.curve(e),this.up.curve(e),this.right.curve(e),this.radius.curve(e),this.angle.curve(e);for(var t=this.computedUp,n=this.computedRight,r=0,a=0,i=0;i<3;++i)a+=t[i]*n[i],r+=t[i]*t[i];for(var l=Math.sqrt(r),c=0,i=0;i<3;++i)n[i]-=t[i]*a/r,c+=n[i]*n[i],t[i]/=l;for(var f=Math.sqrt(c),i=0;i<3;++i)n[i]/=f;var d=this.computedToward;o(d,t,n),s(d,d);for(var p=Math.exp(this.computedRadius[0]),h=this.computedAngle[0],m=this.computedAngle[1],v=Math.cos(h),g=Math.sin(h),y=Math.cos(m),b=Math.sin(m),x=this.computedCenter,_=v*y,w=g*y,T=b,k=-v*b,C=-g*b,E=y,M=this.computedEye,A=this.computedMatrix,i=0;i<3;++i){var S=_*n[i]+w*d[i]+T*t[i];A[4*i+1]=k*n[i]+C*d[i]+E*t[i],A[4*i+2]=S,A[4*i+3]=0}var O=A[1],P=A[5],R=A[9],L=A[2],D=A[6],I=A[10],z=P*I-R*D,j=R*L-O*I,N=O*D-P*L,F=u(z,j,N);z/=F,j/=F,N/=F,A[0]=z,A[4]=j,A[8]=N;for(var i=0;i<3;++i)M[i]=x[i]+A[2+4*i]*p;for(var i=0;i<3;++i){for(var c=0,B=0;B<3;++B)c+=A[i+4*B]*M[B];A[12+i]=-c}A[15]=1},p.getMatrix=function(e,t){this.recalcMatrix(e);var n=this.computedMatrix;if(t){for(var r=0;r<16;++r)t[r]=n[r];return t}return n};var h=[0,0,0];p.rotate=function(e,t,n,r){if(this.angle.move(e,t,n),r){this.recalcMatrix(e);var a=this.computedMatrix;h[0]=a[2],h[1]=a[6],h[2]=a[10];for(var o=this.computedUp,s=this.computedRight,l=this.computedToward,u=0;u<3;++u)a[4*u]=o[u],a[4*u+1]=s[u],a[4*u+2]=l[u];i(a,a,r,h);for(var u=0;u<3;++u)o[u]=a[4*u],s[u]=a[4*u+1];this.up.set(e,o[0],o[1],o[2]),this.right.set(e,s[0],s[1],s[2])}},p.pan=function(e,t,n,r){t=t||0,n=n||0,r=r||0,this.recalcMatrix(e);var a=this.computedMatrix,i=(Math.exp(this.computedRadius[0]),a[1]),o=a[5],s=a[9],l=u(i,o,s);i/=l,o/=l,s/=l;var c=a[0],f=a[4],d=a[8],p=c*i+f*o+d*s,h=u(c-=i*p,f-=o*p,d-=s*p),m=(c/=h)*t+i*n,v=(f/=h)*t+o*n,g=(d/=h)*t+s*n;this.center.move(e,m,v,g);var y=Math.exp(this.computedRadius[0]);y=Math.max(1e-4,y+r),this.radius.set(e,Math.log(y))},p.translate=function(e,t,n,r){this.center.move(e,t||0,n||0,r||0)},p.setMatrix=function(e,t,n,r){var i=1;"number"==typeof n&&(i=0|n),(i<0||i>3)&&(i=1);var o=(i+2)%3;t||(this.recalcMatrix(e),t=this.computedMatrix);var s=t[i],l=t[i+4],f=t[i+8];if(r){var d=Math.abs(s),p=Math.abs(l),h=Math.abs(f),m=Math.max(d,p,h);d===m?(s=s<0?-1:1,l=f=0):h===m?(f=f<0?-1:1,s=l=0):(l=l<0?-1:1,s=f=0)}else{var v=u(s,l,f);s/=v,l/=v,f/=v}var g,y,b=t[o],x=t[o+4],_=t[o+8],w=b*s+x*l+_*f,T=u(b-=s*w,x-=l*w,_-=f*w),k=l*(_/=T)-f*(x/=T),C=f*(b/=T)-s*_,E=s*x-l*b,M=u(k,C,E);if(k/=M,C/=M,E/=M,this.center.jump(e,H,W,q),this.radius.idle(e),this.up.jump(e,s,l,f),this.right.jump(e,b,x,_),2===i){var A=t[1],S=t[5],O=t[9],P=A*b+S*x+O*_,R=A*k+S*C+O*E;g=z<0?-Math.PI/2:Math.PI/2,y=Math.atan2(R,P)}else{var L=t[2],D=t[6],I=t[10],z=L*s+D*l+I*f,j=L*b+D*x+I*_,N=L*k+D*C+I*E;g=Math.asin(c(z)),y=Math.atan2(N,j)}this.angle.jump(e,y,g),this.recalcMatrix(e);var F=t[2],B=t[6],V=t[10],U=this.computedMatrix;a(U,t);var G=U[15],H=U[12]/G,W=U[13]/G,q=U[14]/G,Y=Math.exp(this.computedRadius[0]);this.center.jump(e,H-F*Y,W-B*Y,q-V*Y)},p.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},p.idle=function(e){this.center.idle(e),this.up.idle(e),this.right.idle(e),this.radius.idle(e),this.angle.idle(e)},p.flush=function(e){this.center.flush(e),this.up.flush(e),this.right.flush(e),this.radius.flush(e),this.angle.flush(e)},p.setDistance=function(e,t){t>0&&this.radius.set(e,Math.log(t))},p.lookAt=function(e,t,n,r){this.recalcMatrix(e),t=t||this.computedEye,n=n||this.computedCenter;var a=(r=r||this.computedUp)[0],i=r[1],o=r[2],s=u(a,i,o);if(!(s<1e-6)){a/=s,i/=s,o/=s;var l=t[0]-n[0],f=t[1]-n[1],d=t[2]-n[2],p=u(l,f,d);if(!(p<1e-6)){l/=p,f/=p,d/=p;var h=this.computedRight,m=h[0],v=h[1],g=h[2],y=a*m+i*v+o*g,b=u(m-=y*a,v-=y*i,g-=y*o);if(!(b<.01&&(b=u(m=i*d-o*f,v=o*l-a*d,g=a*f-i*l))<1e-6)){m/=b,v/=b,g/=b,this.up.set(e,a,i,o),this.right.set(e,m,v,g),this.center.set(e,n[0],n[1],n[2]),this.radius.set(e,Math.log(p));var x=i*g-o*v,_=o*m-a*g,w=a*v-i*m,T=u(x,_,w),k=a*l+i*f+o*d,C=m*l+v*f+g*d,E=(x/=T)*l+(_/=T)*f+(w/=T)*d,M=Math.asin(c(k)),A=Math.atan2(E,C),S=this.angle._state,O=S[S.length-1],P=S[S.length-2];O%=2*Math.PI;var R=Math.abs(O+2*Math.PI-A),L=Math.abs(O-A),D=Math.abs(O-2*Math.PI-A);R<L&&(O+=2*Math.PI),D<L&&(O-=2*Math.PI),this.angle.jump(this.angle.lastT(),O,P),this.angle.set(e,A,M)}}}}},{"filtered-vector":215,"gl-mat4/invert":254,"gl-mat4/rotate":258,"gl-vec3/cross":317,"gl-vec3/dot":322,"gl-vec3/normalize":339}],520:[function(e,t,n){"use strict";t.exports=function(e,t,n){var a=e*t,i=r*e,o=i-(i-e),s=e-o,l=r*t,u=l-(l-t),c=t-u,f=s*c-(a-o*u-s*u-o*c);return n?(n[0]=f,n[1]=a,n):[f,a]};var r=+(Math.pow(2,27)+1)},{}],521:[function(e,t,n){"use strict";t.exports=function(e,t,n){var r=e+t,a=r-e,i=t-a,o=e-(r-a);return n?(n[0]=o+i,n[1]=r,n):[o+i,r]}},{}],522:[function(e,n,r){(function(t,n){"use strict";var a=e("bit-twiddle"),i=e("dup");t.__TYPEDARRAY_POOL||(t.__TYPEDARRAY_POOL={UINT8:i([32,0]),UINT16:i([32,0]),UINT32:i([32,0]),INT8:i([32,0]),INT16:i([32,0]),INT32:i([32,0]),FLOAT:i([32,0]),DOUBLE:i([32,0]),DATA:i([32,0]),UINT8C:i([32,0]),BUFFER:i([32,0])});var o="undefined"!=typeof Uint8ClampedArray,s=t.__TYPEDARRAY_POOL;s.UINT8C||(s.UINT8C=i([32,0])),s.BUFFER||(s.BUFFER=i([32,0]));var l=s.DATA,u=s.BUFFER;function c(e){if(e){var t=e.length||e.byteLength,n=a.log2(t);l[n].push(e)}}function f(e){var e=a.nextPow2(e),t=a.log2(e),n=l[t];return n.length>0?n.pop():new ArrayBuffer(e)}function d(e){return new Uint8Array(f(e),0,e)}function p(e){return new Uint16Array(f(2*e),0,e)}function h(e){return new Uint32Array(f(4*e),0,e)}function m(e){return new Int8Array(f(e),0,e)}function v(e){return new Int16Array(f(2*e),0,e)}function g(e){return new Int32Array(f(4*e),0,e)}function y(e){return new Float32Array(f(4*e),0,e)}function b(e){return new Float64Array(f(8*e),0,e)}function x(e){return o?new Uint8ClampedArray(f(e),0,e):d(e)}function _(e){return new DataView(f(e),0,e)}function w(e){e=a.nextPow2(e);var t=a.log2(e),r=u[t];return r.length>0?r.pop():new n(e)}r.free=function(e){if(n.isBuffer(e))u[a.log2(e.length)].push(e);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(e)&&(e=e.buffer),!e)return;var t=e.length||e.byteLength,r=0|a.log2(t);l[r].push(e)}},r.freeUint8=r.freeUint16=r.freeUint32=r.freeInt8=r.freeInt16=r.freeInt32=r.freeFloat32=r.freeFloat=r.freeFloat64=r.freeDouble=r.freeUint8Clamped=r.freeDataView=function(e){c(e.buffer)},r.freeArrayBuffer=c,r.freeBuffer=function(e){u[a.log2(e.length)].push(e)},r.malloc=function(e,t){if(void 0===t||"arraybuffer"===t)return f(e);switch(t){case"uint8":return d(e);case"uint16":return p(e);case"uint32":return h(e);case"int8":return m(e);case"int16":return v(e);case"int32":return g(e);case"float":case"float32":return y(e);case"double":case"float64":return b(e);case"uint8_clamped":return x(e);case"buffer":return w(e);case"data":case"dataview":return _(e);default:return null}return null},r.mallocArrayBuffer=f,r.mallocUint8=d,r.mallocUint16=p,r.mallocUint32=h,r.mallocInt8=m,r.mallocInt16=v,r.mallocInt32=g,r.mallocFloat32=r.mallocFloat=y,r.mallocFloat64=r.mallocDouble=b,r.mallocUint8Clamped=x,r.mallocDataView=_,r.mallocBuffer=w,r.clearCache=function(){for(var e=0;e<32;++e)s.UINT8[e].length=0,s.UINT16[e].length=0,s.UINT32[e].length=0,s.INT8[e].length=0,s.INT16[e].length=0,s.INT32[e].length=0,s.FLOAT[e].length=0,s.DOUBLE[e].length=0,s.UINT8C[e].length=0,l[e].length=0,u[e].length=0}}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer)},{"bit-twiddle":80,buffer:93,dup:155}],523:[function(e,t,n){"use strict";"use restrict";function r(e){this.roots=new Array(e),this.ranks=new Array(e);for(var t=0;t<e;++t)this.roots[t]=t,this.ranks[t]=0}t.exports=r;var a=r.prototype;Object.defineProperty(a,"length",{get:function(){return this.roots.length}}),a.makeSet=function(){var e=this.roots.length;return this.roots.push(e),this.ranks.push(0),e},a.find=function(e){for(var t=e,n=this.roots;n[e]!==e;)e=n[e];for(;n[t]!==e;){var r=n[t];n[t]=e,t=r}return e},a.link=function(e,t){var n=this.find(e),r=this.find(t);if(n!==r){var a=this.ranks,i=this.roots,o=a[n],s=a[r];o<s?i[n]=r:s<o?i[r]=n:(i[r]=n,++a[n])}}},{}],524:[function(e,t,n){"use strict";t.exports=function(e,t,n){return 0===e.length?e:t?(n||e.sort(t),function(e,t){for(var n=1,r=e.length,a=e[0],i=e[0],o=1;o<r;++o)if(i=a,a=e[o],t(a,i)){if(o===n){n++;continue}e[n++]=a}return e.length=n,e}(e,t)):(n||e.sort(),function(e){for(var t=1,n=e.length,r=e[0],a=e[0],i=1;i<n;++i,a=r)if(a=r,(r=e[i])!==a){if(i===t){t++;continue}e[t++]=r}return e.length=t,e}(e))}},{}],525:[function(e,t,n){var r=/[\'\"]/;t.exports=function(e){return e?(r.test(e.charAt(0))&&(e=e.substr(1)),r.test(e.charAt(e.length-1))&&(e=e.substr(0,e.length-1)),e):""}},{}],526:[function(e,t,n){"use strict";t.exports=function(e,t,n){Array.isArray(n)||(n=[].slice.call(arguments,2));for(var r=0,a=n.length;r<a;r++){var i=n[r];for(var o in i)if((void 0===t[o]||Array.isArray(t[o])||e[o]!==t[o])&&o in t){var s;if(!0===i[o])s=t[o];else{if(!1===i[o])continue;if("function"==typeof i[o]&&void 0===(s=i[o](t[o],e,t)))continue}e[o]=s}}return e}},{}],527:[function(e,t,n){"use strict";t.exports=function(e,t){return"object"==typeof t&&null!==t||(t={}),r(e,t.canvas||a,t.context||i,t)};var r=e("./lib/vtext"),a=null,i=null;"undefined"!=typeof document&&((a=document.createElement("canvas")).width=8192,a.height=1024,i=a.getContext("2d"))},{"./lib/vtext":528}],528:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){var i=r.size||64,o=r.font||"normal";return n.font=i+"px "+o,n.textAlign="start",n.textBaseline="alphabetic",n.direction="ltr",f(function(e,t,n,r){var i=0|Math.ceil(t.measureText(n).width+2*r);if(i>8192)throw new Error("vectorize-text: String too long (sorry, this will get fixed later)");var o=3*r;e.height<o&&(e.height=o),t.fillStyle="#000",t.fillRect(0,0,e.width,e.height),t.fillStyle="#fff",t.fillText(n,r,2*r);var s=t.getImageData(0,0,i,o);return a(s.data,[o,i,4]).pick(-1,-1,0).transpose(1,0)}(t,n,e,i),r,i)},t.exports.processPixels=f;var r=e("surface-nets"),a=e("ndarray"),i=e("simplify-planar-graph"),o=e("clean-pslg"),s=e("cdt2d"),l=e("planar-graph-to-polyline");function u(e,t){var n=r(e,128);return t?i(n.cells,n.positions,.25):{edges:n.cells,positions:n.positions}}function c(e,t,n,r){var a=u(e,r),i=function(e,t,n){for(var r=t.textAlign||"start",a=t.textBaseline||"alphabetic",i=[1<<30,1<<30],o=[0,0],s=e.length,l=0;l<s;++l)for(var u=e[l],c=0;c<2;++c)i[c]=0|Math.min(i[c],u[c]),o[c]=0|Math.max(o[c],u[c]);var f=0;switch(r){case"center":f=-.5*(i[0]+o[0]);break;case"right":case"end":f=-o[0];break;case"left":case"start":f=-i[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+r+"'")}var d=0;switch(a){case"hanging":case"top":d=-i[1];break;case"middle":d=-.5*(i[1]+o[1]);break;case"alphabetic":case"ideographic":d=-3*n;break;case"bottom":d=-o[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+a+"'")}var p=1/n;return"lineHeight"in t?p*=+t.lineHeight:"width"in t?p=t.width/(o[0]-i[0]):"height"in t&&(p=t.height/(o[1]-i[1])),e.map(function(e){return[p*(e[0]+f),p*(e[1]+d)]})}(a.positions,t,n),c=a.edges,f="ccw"===t.orientation;if(o(i,c),t.polygons||t.polygon||t.polyline){for(var d=l(c,i),p=new Array(d.length),h=0;h<d.length;++h){for(var m=d[h],v=new Array(m.length),g=0;g<m.length;++g){for(var y=m[g],b=new Array(y.length),x=0;x<y.length;++x)b[x]=i[y[x]].slice();f&&b.reverse(),v[g]=b}p[h]=v}return p}return t.triangles||t.triangulate||t.triangle?{cells:s(i,c,{delaunay:!1,exterior:!1,interior:!0}),positions:i}:{edges:c,positions:i}}function f(e,t,n){try{return c(e,t,n,!0)}catch(e){}try{return c(e,t,n,!1)}catch(e){}return t.polygons||t.polyline||t.polygon?[]:t.triangles||t.triangulate||t.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}},{cdt2d:94,"clean-pslg":104,ndarray:433,"planar-graph-to-polyline":451,"simplify-planar-graph":500,"surface-nets":508}],529:[function(e,t,n){!function(){"use strict";if("undefined"==typeof ses||!ses.ok||ses.ok()){"undefined"!=typeof ses&&(ses.weakMapPermitHostObjects=v);var e=!1;if("function"==typeof WeakMap){var n=WeakMap;if("undefined"!=typeof navigator&&/Firefox/.test(navigator.userAgent));else{var r=new n,a=Object.freeze({});if(r.set(a,1),1===r.get(a))return void(t.exports=WeakMap);e=!0}}Object.prototype.hasOwnProperty;var i=Object.getOwnPropertyNames,o=Object.defineProperty,s=Object.isExtensible,l="weakmap:",u=l+"ident:"+Math.random()+"___";if("undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array){var c=new ArrayBuffer(25),f=new Uint8Array(c);crypto.getRandomValues(f),u=l+"rand:"+Array.prototype.map.call(f,function(e){return(e%36).toString(36)}).join("")+"___"}if(o(Object,"getOwnPropertyNames",{value:function(e){return i(e).filter(g)}}),"getPropertyNames"in Object){var d=Object.getPropertyNames;o(Object,"getPropertyNames",{value:function(e){return d(e).filter(g)}})}!function(){var e=Object.freeze;o(Object,"freeze",{value:function(t){return y(t),e(t)}});var t=Object.seal;o(Object,"seal",{value:function(e){return y(e),t(e)}});var n=Object.preventExtensions;o(Object,"preventExtensions",{value:function(e){return y(e),n(e)}})}();var p=!1,h=0,m=function(){this instanceof m||x();var e=[],t=[],n=h++;return Object.create(m.prototype,{get___:{value:b(function(r,a){var i,o=y(r);return o?n in o?o[n]:a:(i=e.indexOf(r))>=0?t[i]:a})},has___:{value:b(function(t){var r=y(t);return r?n in r:e.indexOf(t)>=0})},set___:{value:b(function(r,a){var i,o=y(r);return o?o[n]=a:(i=e.indexOf(r))>=0?t[i]=a:(i=e.length,t[i]=a,e[i]=r),this})},delete___:{value:b(function(r){var a,i,o=y(r);return o?n in o&&delete o[n]:!((a=e.indexOf(r))<0||(i=e.length-1,e[a]=void 0,t[a]=t[i],e[a]=e[i],e.length=i,t.length=i,0))})}})};m.prototype=Object.create(Object.prototype,{get:{value:function(e,t){return this.get___(e,t)},writable:!0,configurable:!0},has:{value:function(e){return this.has___(e)},writable:!0,configurable:!0},set:{value:function(e,t){return this.set___(e,t)},writable:!0,configurable:!0},delete:{value:function(e){return this.delete___(e)},writable:!0,configurable:!0}}),"function"==typeof n?function(){function r(){this instanceof m||x();var t,r=new n,a=void 0,i=!1;return t=e?function(e,t){return r.set(e,t),r.has(e)||(a||(a=new m),a.set(e,t)),this}:function(e,t){if(i)try{r.set(e,t)}catch(n){a||(a=new m),a.set___(e,t)}else r.set(e,t);return this},Object.create(m.prototype,{get___:{value:b(function(e,t){return a?r.has(e)?r.get(e):a.get___(e,t):r.get(e,t)})},has___:{value:b(function(e){return r.has(e)||!!a&&a.has___(e)})},set___:{value:b(t)},delete___:{value:b(function(e){var t=!!r.delete(e);return a&&a.delete___(e)||t})},permitHostObjects___:{value:b(function(e){if(e!==v)throw new Error("bogus call to permitHostObjects___");i=!0})}})}e&&"undefined"!=typeof Proxy&&(Proxy=void 0),r.prototype=m.prototype,t.exports=r,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():("undefined"!=typeof Proxy&&(Proxy=void 0),t.exports=m)}function v(e){e.permitHostObjects___&&e.permitHostObjects___(v)}function g(e){return!(e.substr(0,l.length)==l&&"___"===e.substr(e.length-3))}function y(e){if(e!==Object(e))throw new TypeError("Not an object: "+e);var t=e[u];if(t&&t.key===e)return t;if(s(e)){t={key:e};try{return o(e,u,{value:t,writable:!1,enumerable:!1,configurable:!1}),t}catch(e){return}}}function b(e){return e.prototype=null,Object.freeze(e)}function x(){p||"undefined"==typeof console||(p=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}}()},{}],530:[function(e,t,n){var r=e("./hidden-store.js");t.exports=function(){var e={};return function(t){if(("object"!=typeof t||null===t)&&"function"!=typeof t)throw new Error("Weakmap-shim: Key must be object");var n=t.valueOf(e);return n&&n.identity===e?n:r(t,e)}}},{"./hidden-store.js":531}],531:[function(e,t,n){t.exports=function(e,t){var n={identity:t},r=e.valueOf;return Object.defineProperty(e,"valueOf",{value:function(e){return e!==t?r.apply(this,arguments):n},writable:!0}),n}},{}],532:[function(e,t,n){var r=e("./create-store.js");t.exports=function(){var e=r();return{get:function(t,n){var r=e(t);return r.hasOwnProperty("value")?r.value:n},set:function(t,n){return e(t).value=n,this},has:function(t){return"value"in e(t)},delete:function(t){return delete e(t).value}}}},{"./create-store.js":530}],533:[function(e,t,n){var r=e("get-canvas-context");t.exports=function(e){return r("webgl",e)}},{"get-canvas-context":221}],534:[function(e,t,n){var r=e("../main"),a=e("object-assign"),i=r.instance();function o(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}o.prototype=new r.baseCalendar,a(o.prototype,{name:"Chinese",jdEpoch:1721425.5,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(e,t){if("string"==typeof e){var n=e.match(l);return n?n[0]:""}var r=this._validateYear(e),a=e.month(),i=""+this.toChineseMonth(r,a);return t&&i.length<2&&(i="0"+i),this.isIntercalaryMonth(r,a)&&(i+="i"),i},monthNames:function(e){if("string"==typeof e){var t=e.match(u);return t?t[0]:""}var n=this._validateYear(e),r=e.month(),a=this.toChineseMonth(n,r),i=["","","","","","","","","","","",""][a-1];return this.isIntercalaryMonth(n,r)&&(i=""+i),i},monthNamesShort:function(e){if("string"==typeof e){var t=e.match(c);return t?t[0]:""}var n=this._validateYear(e),r=e.month(),a=this.toChineseMonth(n,r),i=["","","","","","","","","","","",""][a-1];return this.isIntercalaryMonth(n,r)&&(i=""+i),i},parseMonth:function(e,t){e=this._validateYear(e);var n,r=parseInt(t);if(isNaN(r))""===t[0]&&(n=!0,t=t.substring(1)),""===t[t.length-1]&&(t=t.substring(0,t.length-1)),r=1+["","","","","","","","","","","",""].indexOf(t);else{var a=t[t.length-1];n="i"===a||"I"===a}var i=this.toMonthIndex(e,r,n);return i},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(e,t){if(e.year&&(e=e.year()),"number"!=typeof e||e<1888||e>2111)throw t.replace(/\{0\}/,this.local.name);return e},toMonthIndex:function(e,t,n){var a=this.intercalaryMonth(e),i=n&&t!==a;if(i||t<1||t>12)throw r.local.invalidMonth.replace(/\{0\}/,this.local.name);return a?!n&&t<=a?t-1:t:t-1},toChineseMonth:function(e,t){e.year&&(e=e.year(),t=e.month());var n=this.intercalaryMonth(e),a=n?12:11;if(t<0||t>a)throw r.local.invalidMonth.replace(/\{0\}/,this.local.name);return n?t<n?t+1:t:t+1},intercalaryMonth:function(e){e=this._validateYear(e);var t=f[e-f[0]],n=t>>13;return n},isIntercalaryMonth:function(e,t){e.year&&(e=e.year(),t=e.month());var n=this.intercalaryMonth(e);return!!n&&n===t},leapYear:function(e){return 0!==this.intercalaryMonth(e)},weekOfYear:function(e,t,n){var a,o=this._validateYear(e,r.local.invalidyear),s=d[o-d[0]],l=s>>9&4095,u=s>>5&15,c=31&s;(a=i.newDate(l,u,c)).add(4-(a.dayOfWeek()||7),"d");var f=this.toJD(e,t,n)-a.toJD();return 1+Math.floor(f/7)},monthsInYear:function(e){return this.leapYear(e)?13:12},daysInMonth:function(e,t){e.year&&(t=e.month(),e=e.year()),e=this._validateYear(e);var n=f[e-f[0]],a=n>>13,i=a?12:11;if(t>i)throw r.local.invalidMonth.replace(/\{0\}/,this.local.name);var o=n&1<<12-t?30:29;return o},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){var a=this._validate(e,s,n,r.local.invalidDate);e=this._validateYear(a.year()),t=a.month(),n=a.day();var o=this.isIntercalaryMonth(e,t),s=this.toChineseMonth(e,t),l=function(e,t,n,r,a){var i,o,s;if("object"==typeof e)o=e,i=t||{};else{var l="number"==typeof e&&e>=1888&&e<=2111;if(!l)throw new Error("Lunar year outside range 1888-2111");var u="number"==typeof t&&t>=1&&t<=12;if(!u)throw new Error("Lunar month outside range 1 - 12");var c,p="number"==typeof n&&n>=1&&n<=30;if(!p)throw new Error("Lunar day outside range 1 - 30");"object"==typeof r?(c=!1,i=r):(c=!!r,i=a||{}),o={year:e,month:t,day:n,isIntercalary:c}}s=o.day-1;var h,m=f[o.year-f[0]],v=m>>13;h=v?o.month>v?o.month:o.isIntercalary?o.month:o.month-1:o.month-1;for(var g=0;g<h;g++){var y=m&1<<12-g?30:29;s+=y}var b=d[o.year-d[0]],x=new Date(b>>9&4095,(b>>5&15)-1,(31&b)+s);return i.year=x.getFullYear(),i.month=1+x.getMonth(),i.day=x.getDate(),i}(e,s,n,o);return i.toJD(l.year,l.month,l.day)},fromJD:function(e){var t=i.fromJD(e),n=function(e,t,n,r){var a,i;if("object"==typeof e)a=e,i=t||{};else{var o="number"==typeof e&&e>=1888&&e<=2111;if(!o)throw new Error("Solar year outside range 1888-2111");var s="number"==typeof t&&t>=1&&t<=12;if(!s)throw new Error("Solar month outside range 1 - 12");var l="number"==typeof n&&n>=1&&n<=31;if(!l)throw new Error("Solar day outside range 1 - 31");a={year:e,month:t,day:n},i=r||{}}var u=d[a.year-d[0]],c=a.year<<9|a.month<<5|a.day;i.year=c>=u?a.year:a.year-1,u=d[i.year-d[0]];var p,h=new Date(u>>9&4095,(u>>5&15)-1,31&u),m=new Date(a.year,a.month-1,a.day);p=Math.round((m-h)/864e5);var v,g=f[i.year-f[0]];for(v=0;v<13;v++){var y=g&1<<12-v?30:29;if(p<y)break;p-=y}var b=g>>13;return!b||v<b?(i.isIntercalary=!1,i.month=1+v):v===b?(i.isIntercalary=!0,i.month=v):(i.isIntercalary=!1,i.month=v),i.day=1+p,i}(t.year(),t.month(),t.day()),r=this.toMonthIndex(n.year,n.month,n.isIntercalary);return this.newDate(n.year,r,n.day)},fromString:function(e){var t=e.match(s),n=this._validateYear(+t[1]),r=+t[2],a=!!t[3],i=this.toMonthIndex(n,r,a),o=+t[4];return this.newDate(n,i,o)},add:function(e,t,n){var r=e.year(),a=e.month(),i=this.isIntercalaryMonth(r,a),s=this.toChineseMonth(r,a),l=Object.getPrototypeOf(o.prototype).add.call(this,e,t,n);if("y"===n){var u=l.year(),c=l.month(),f=this.isIntercalaryMonth(u,s),d=i&&f?this.toMonthIndex(u,s,!0):this.toMonthIndex(u,s,!1);d!==c&&l.month(d)}return l}});var s=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,l=/^\d?\d[iI]?/m,u=/^??[]?/m,c=/^??[]?/m;r.calendars.chinese=o;var f=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],d=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904]},{"../main":548,"object-assign":437}],535:[function(e,t,n){var r=e("../main"),a=e("object-assign");function i(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}i.prototype=new r.baseCalendar,a(i.prototype,{name:"Coptic",jdEpoch:1825029.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,r.local.invalidYear),e=t.year()+(t.year()<0?1:0);return e%4==3||e%4==-1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,r.local.invalidYear||r.regionalOptions[""].invalidYear),13},weekOfYear:function(e,t,n){var r=this.newDate(e,t,n);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var n=this._validate(e,t,this.minDay,r.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(13===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){var a=this._validate(e,t,n,r.local.invalidDate);return(e=a.year())<0&&e++,a.day()+30*(a.month()-1)+365*(e-1)+Math.floor(e/4)+this.jdEpoch-1},fromJD:function(e){var t=Math.floor(e)+.5-this.jdEpoch,n=Math.floor((t-Math.floor((t+366)/1461))/365)+1;n<=0&&n--,t=Math.floor(e)+.5-this.newDate(n,1,1).toJD();var r=Math.floor(t/30)+1,a=t-30*(r-1)+1;return this.newDate(n,r,a)}}),r.calendars.coptic=i},{"../main":548,"object-assign":437}],536:[function(e,t,n){var r=e("../main"),a=e("object-assign");function i(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}i.prototype=new r.baseCalendar,a(i.prototype,{name:"Discworld",jdEpoch:1721425.5,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(e){return this._validate(e,this.minMonth,this.minDay,r.local.invalidYear),!1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,r.local.invalidYear),13},daysInYear:function(e){return this._validate(e,this.minMonth,this.minDay,r.local.invalidYear),400},weekOfYear:function(e,t,n){var r=this.newDate(e,t,n);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/8)+1},daysInMonth:function(e,t){var n=this._validate(e,t,this.minDay,r.local.invalidMonth);return this.daysPerMonth[n.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(e,t,n){var a=this._validate(e,t,n,r.local.invalidDate);return(a.day()+1)%8},weekDay:function(e,t,n){var r=this.dayOfWeek(e,t,n);return r>=2&&r<=6},extraInfo:function(e,t,n){var a=this._validate(e,t,n,r.local.invalidDate);return{century:o[Math.floor((a.year()-1)/100)+1]||""}},toJD:function(e,t,n){var a=this._validate(e,t,n,r.local.invalidDate);return e=a.year()+(a.year()<0?1:0),t=a.month(),(n=a.day())+(t>1?16:0)+(t>2?32*(t-2):0)+400*(e-1)+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e+.5)-Math.floor(this.jdEpoch)-1;var t=Math.floor(e/400)+1;e-=400*(t-1),e+=e>15?16:0;var n=Math.floor(e/32)+1,r=e-32*(n-1)+1;return this.newDate(t<=0?t-1:t,n,r)}});var o={20:"Fruitbat",21:"Anchovy"};r.calendars.discworld=i},{"../main":548,"object-assign":437}],537:[function(e,t,n){var r=e("../main"),a=e("object-assign");function i(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}i.prototype=new r.baseCalendar,a(i.prototype,{name:"Ethiopian",jdEpoch:1724220.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,r.local.invalidYear),e=t.year()+(t.year()<0?1:0);return e%4==3||e%4==-1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,r.local.invalidYear||r.regionalOptions[""].invalidYear),13},weekOfYear:function(e,t,n){var r=this.newDate(e,t,n);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var n=this._validate(e,t,this.minDay,r.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(13===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){var a=this._validate(e,t,n,r.local.invalidDate);return(e=a.year())<0&&e++,a.day()+30*(a.month()-1)+365*(e-1)+Math.floor(e/4)+this.jdEpoch-1},fromJD:function(e){var t=Math.floor(e)+.5-this.jdEpoch,n=Math.floor((t-Math.floor((t+366)/1461))/365)+1;n<=0&&n--,t=Math.floor(e)+.5-this.newDate(n,1,1).toJD();var r=Math.floor(t/30)+1,a=t-30*(r-1)+1;return this.newDate(n,r,a)}}),r.calendars.ethiopian=i},{"../main":548,"object-assign":437}],538:[function(e,t,n){var r=e("../main"),a=e("object-assign");function i(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function o(e,t){return e-t*Math.floor(e/t)}i.prototype=new r.baseCalendar,a(i.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,r.local.invalidYear);return this._leapYear(t.year())},_leapYear:function(e){return o(7*(e=e<0?e+1:e)+1,19)<7},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,r.local.invalidYear),this._leapYear(e.year?e.year():e)?13:12},weekOfYear:function(e,t,n){var r=this.newDate(e,t,n);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,r.local.invalidYear);return e=t.year(),this.toJD(-1===e?1:e+1,7,1)-this.toJD(e,7,1)},daysInMonth:function(e,t){return e.year&&(t=e.month(),e=e.year()),this._validate(e,t,this.minDay,r.local.invalidMonth),12===t&&this.leapYear(e)?30:8===t&&5===o(this.daysInYear(e),10)?30:9===t&&3===o(this.daysInYear(e),10)?29:this.daysPerMonth[t-1]},weekDay:function(e,t,n){return 6!==this.dayOfWeek(e,t,n)},extraInfo:function(e,t,n){var a=this._validate(e,t,n,r.local.invalidDate);return{yearType:(this.leapYear(a)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(a)%10-3]}},toJD:function(e,t,n){var a=this._validate(e,t,n,r.local.invalidDate);e=a.year(),t=a.month(),n=a.day();var i=e<=0?e+1:e,o=this.jdEpoch+this._delay1(i)+this._delay2(i)+n+1;if(t<7){for(var s=7;s<=this.monthsInYear(e);s++)o+=this.daysInMonth(e,s);for(var s=1;s<t;s++)o+=this.daysInMonth(e,s)}else for(var s=7;s<t;s++)o+=this.daysInMonth(e,s);return o},_delay1:function(e){var t=Math.floor((235*e-234)/19),n=12084+13753*t,r=29*t+Math.floor(n/25920);return o(3*(r+1),7)<3&&r++,r},_delay2:function(e){var t=this._delay1(e-1),n=this._delay1(e),r=this._delay1(e+1);return r-n==356?2:n-t==382?1:0},fromJD:function(e){e=Math.floor(e)+.5;for(var t=Math.floor(98496*(e-this.jdEpoch)/35975351)-1;e>=this.toJD(-1===t?1:t+1,7,1);)t++;for(var n=e<this.toJD(t,1,1)?7:1;e>this.toJD(t,n,this.daysInMonth(t,n));)n++;var r=e-this.toJD(t,n,1)+1;return this.newDate(t,n,r)}}),r.calendars.hebrew=i},{"../main":548,"object-assign":437}],539:[function(e,t,n){var r=e("../main"),a=e("object-assign");function i(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}i.prototype=new r.baseCalendar,a(i.prototype,{name:"Islamic",jdEpoch:1948439.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-khams","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,r.local.invalidYear);return(11*t.year()+14)%30<11},weekOfYear:function(e,t,n){var r=this.newDate(e,t,n);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInYear:function(e){return this.leapYear(e)?355:354},daysInMonth:function(e,t){var n=this._validate(e,t,this.minDay,r.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(12===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(e,t,n){return 5!==this.dayOfWeek(e,t,n)},toJD:function(e,t,n){var a=this._validate(e,t,n,r.local.invalidDate);return e=a.year(),t=a.month(),n=a.day(),e=e<=0?e+1:e,n+Math.ceil(29.5*(t-1))+354*(e-1)+Math.floor((3+11*e)/30)+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e)+.5;var t=Math.floor((30*(e-this.jdEpoch)+10646)/10631);t=t<=0?t-1:t;var n=Math.min(12,Math.ceil((e-29-this.toJD(t,1,1))/29.5)+1),r=e-this.toJD(t,n,1)+1;return this.newDate(t,n,r)}}),r.calendars.islamic=i},{"../main":548,"object-assign":437}],540:[function(e,t,n){var r=e("../main"),a=e("object-assign");function i(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}i.prototype=new r.baseCalendar,a(i.prototype,{name:"Julian",jdEpoch:1721423.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,r.local.invalidYear),e=t.year()<0?t.year()+1:t.year();return e%4==0},weekOfYear:function(e,t,n){var r=this.newDate(e,t,n);return r.add(4-(r.dayOfWeek()||7),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var n=this._validate(e,t,this.minDay,r.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(2===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){var a=this._validate(e,t,n,r.local.invalidDate);return e=a.year(),t=a.month(),n=a.day(),e<0&&e++,t<=2&&(e--,t+=12),Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+n-1524.5},fromJD:function(e){var t=Math.floor(e+.5),n=t+1524,r=Math.floor((n-122.1)/365.25),a=Math.floor(365.25*r),i=Math.floor((n-a)/30.6001),o=i-Math.floor(i<14?1:13),s=r-Math.floor(o>2?4716:4715),l=n-a-Math.floor(30.6001*i);return s<=0&&s--,this.newDate(s,o,l)}}),r.calendars.julian=i},{"../main":548,"object-assign":437}],541:[function(e,t,n){var r=e("../main"),a=e("object-assign");function i(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function o(e,t){return e-t*Math.floor(e/t)}function s(e,t){return o(e-1,t)+1}i.prototype=new r.baseCalendar,a(i.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(e){return this._validate(e,this.minMonth,this.minDay,r.local.invalidYear),!1},formatYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,r.local.invalidYear);e=t.year();var n=Math.floor(e/400);e%=400,e+=e<0?400:0;var a=Math.floor(e/20);return n+"."+a+"."+e%20},forYear:function(e){if((e=e.split(".")).length<3)throw"Invalid Mayan year";for(var t=0,n=0;n<e.length;n++){var r=parseInt(e[n],10);if(Math.abs(r)>19||n>0&&r<0)throw"Invalid Mayan year";t=20*t+r}return t},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,r.local.invalidYear),18},weekOfYear:function(e,t,n){return this._validate(e,t,n,r.local.invalidDate),0},daysInYear:function(e){return this._validate(e,this.minMonth,this.minDay,r.local.invalidYear),360},daysInMonth:function(e,t){return this._validate(e,t,this.minDay,r.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(e,t,n){var a=this._validate(e,t,n,r.local.invalidDate);return a.day()},weekDay:function(e,t,n){return this._validate(e,t,n,r.local.invalidDate),!0},extraInfo:function(e,t,n){var a=this._validate(e,t,n,r.local.invalidDate),i=a.toJD(),o=this._toHaab(i),s=this._toTzolkin(i);return{haabMonthName:this.local.haabMonths[o[0]-1],haabMonth:o[0],haabDay:o[1],tzolkinDayName:this.local.tzolkinMonths[s[0]-1],tzolkinDay:s[0],tzolkinTrecena:s[1]}},_toHaab:function(e){var t=o(8+(e-=this.jdEpoch)+340,365);return[Math.floor(t/20)+1,o(t,20)]},_toTzolkin:function(e){return[s(20+(e-=this.jdEpoch),20),s(e+4,13)]},toJD:function(e,t,n){var a=this._validate(e,t,n,r.local.invalidDate);return a.day()+20*a.month()+360*a.year()+this.jdEpoch},fromJD:function(e){e=Math.floor(e)+.5-this.jdEpoch;var t=Math.floor(e/360);e%=360,e+=e<0?360:0;var n=Math.floor(e/20),r=e%20;return this.newDate(t,n,r)}}),r.calendars.mayan=i},{"../main":548,"object-assign":437}],542:[function(e,t,n){var r=e("../main"),a=e("object-assign");function i(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}i.prototype=new r.baseCalendar;var o=r.instance("gregorian");a(i.prototype,{name:"Nanakshahi",jdEpoch:2257673.5,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,r.local.invalidYear||r.regionalOptions[""].invalidYear);return o.leapYear(t.year()+(t.year()<1?1:0)+1469)},weekOfYear:function(e,t,n){var r=this.newDate(e,t,n);return r.add(1-(r.dayOfWeek()||7),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var n=this._validate(e,t,this.minDay,r.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(12===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){var a=this._validate(e,t,n,r.local.invalidMonth),e=a.year();e<0&&e++;for(var i=a.day(),s=1;s<a.month();s++)i+=this.daysPerMonth[s-1];return i+o.toJD(e+1468,3,13)},fromJD:function(e){e=Math.floor(e+.5);for(var t=Math.floor((e-(this.jdEpoch-1))/366);e>=this.toJD(t+1,1,1);)t++;for(var n=e-Math.floor(this.toJD(t,1,1)+.5)+1,r=1;n>this.daysInMonth(t,r);)n-=this.daysInMonth(t,r),r++;return this.newDate(t,r,n)}}),r.calendars.nanakshahi=i},{"../main":548,"object-assign":437}],543:[function(e,t,n){var r=e("../main"),a=e("object-assign");function i(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}i.prototype=new r.baseCalendar,a(i.prototype,{name:"Nepali",jdEpoch:1700709.5,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(e){return this.daysInYear(e)!==this.daysPerYear},weekOfYear:function(e,t,n){var r=this.newDate(e,t,n);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,r.local.invalidYear);if(e=t.year(),void 0===this.NEPALI_CALENDAR_DATA[e])return this.daysPerYear;for(var n=0,a=this.minMonth;a<=12;a++)n+=this.NEPALI_CALENDAR_DATA[e][a];return n},daysInMonth:function(e,t){return e.year&&(t=e.month(),e=e.year()),this._validate(e,t,this.minDay,r.local.invalidMonth),void 0===this.NEPALI_CALENDAR_DATA[e]?this.daysPerMonth[t-1]:this.NEPALI_CALENDAR_DATA[e][t]},weekDay:function(e,t,n){return 6!==this.dayOfWeek(e,t,n)},toJD:function(e,t,n){var a=this._validate(e,t,n,r.local.invalidDate);e=a.year(),t=a.month(),n=a.day();var i=r.instance(),o=0,s=t,l=e;this._createMissingCalendarData(e);var u=e-(s>9||9===s&&n>=this.NEPALI_CALENDAR_DATA[l][0]?56:57);for(9!==t&&(o=n,s--);9!==s;)s<=0&&(s=12,l--),o+=this.NEPALI_CALENDAR_DATA[l][s],s--;return 9===t?(o+=n-this.NEPALI_CALENDAR_DATA[l][0])<0&&(o+=i.daysInYear(u)):o+=this.NEPALI_CALENDAR_DATA[l][9]-this.NEPALI_CALENDAR_DATA[l][0],i.newDate(u,1,1).add(o,"d").toJD()},fromJD:function(e){var t=r.instance(),n=t.fromJD(e),a=n.year(),i=n.dayOfYear(),o=a+56;this._createMissingCalendarData(o);for(var s=9,l=this.NEPALI_CALENDAR_DATA[o][0],u=this.NEPALI_CALENDAR_DATA[o][s]-l+1;i>u;)++s>12&&(s=1,o++),u+=this.NEPALI_CALENDAR_DATA[o][s];var c=this.NEPALI_CALENDAR_DATA[o][s]-(u-i);return this.newDate(o,s,c)},_createMissingCalendarData:function(e){var t=this.daysPerMonth.slice(0);t.unshift(17);for(var n=e-1;n<e+2;n++)void 0===this.NEPALI_CALENDAR_DATA[n]&&(this.NEPALI_CALENDAR_DATA[n]=t)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2000:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),r.calendars.nepali=i},{"../main":548,"object-assign":437}],544:[function(e,t,n){var r=e("../main"),a=e("object-assign");function i(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function o(e,t){return e-t*Math.floor(e/t)}i.prototype=new r.baseCalendar,a(i.prototype,{name:"Persian",jdEpoch:1948320.5,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Chharshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,r.local.invalidYear);return 682*((t.year()-(t.year()>0?474:473))%2820+474+38)%2816<682},weekOfYear:function(e,t,n){var r=this.newDate(e,t,n);return r.add(-(r.dayOfWeek()+1)%7,"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var n=this._validate(e,t,this.minDay,r.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(12===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(e,t,n){return 5!==this.dayOfWeek(e,t,n)},toJD:function(e,t,n){var a=this._validate(e,t,n,r.local.invalidDate);e=a.year(),t=a.month(),n=a.day();var i=e-(e>=0?474:473),s=474+o(i,2820);return n+(t<=7?31*(t-1):30*(t-1)+6)+Math.floor((682*s-110)/2816)+365*(s-1)+1029983*Math.floor(i/2820)+this.jdEpoch-1},fromJD:function(e){var t=(e=Math.floor(e)+.5)-this.toJD(475,1,1),n=Math.floor(t/1029983),r=o(t,1029983),a=2820;if(1029982!==r){var i=Math.floor(r/366),s=o(r,366);a=Math.floor((2134*i+2816*s+2815)/1028522)+i+1}var l=a+2820*n+474;l=l<=0?l-1:l;var u=e-this.toJD(l,1,1)+1,c=u<=186?Math.ceil(u/31):Math.ceil((u-6)/30),f=e-this.toJD(l,c,1)+1;return this.newDate(l,c,f)}}),r.calendars.persian=i,r.calendars.jalali=i},{"../main":548,"object-assign":437}],545:[function(e,t,n){var r=e("../main"),a=e("object-assign"),i=r.instance();function o(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}o.prototype=new r.baseCalendar,a(o.prototype,{name:"Taiwan",jdEpoch:2419402.5,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,r.local.invalidYear),e=this._t2gYear(t.year());return i.leapYear(e)},weekOfYear:function(e,t,n){var a=this._validate(e,this.minMonth,this.minDay,r.local.invalidYear),e=this._t2gYear(a.year());return i.weekOfYear(e,a.month(),a.day())},daysInMonth:function(e,t){var n=this._validate(e,t,this.minDay,r.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(2===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){var a=this._validate(e,t,n,r.local.invalidDate),e=this._t2gYear(a.year());return i.toJD(e,a.month(),a.day())},fromJD:function(e){var t=i.fromJD(e),n=this._g2tYear(t.year());return this.newDate(n,t.month(),t.day())},_t2gYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)},_g2tYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)}}),r.calendars.taiwan=o},{"../main":548,"object-assign":437}],546:[function(e,t,n){var r=e("../main"),a=e("object-assign"),i=r.instance();function o(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}o.prototype=new r.baseCalendar,a(o.prototype,{name:"Thai",jdEpoch:1523098.5,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,r.local.invalidYear),e=this._t2gYear(t.year());return i.leapYear(e)},weekOfYear:function(e,t,n){var a=this._validate(e,this.minMonth,this.minDay,r.local.invalidYear),e=this._t2gYear(a.year());return i.weekOfYear(e,a.month(),a.day())},daysInMonth:function(e,t){var n=this._validate(e,t,this.minDay,r.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(2===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){var a=this._validate(e,t,n,r.local.invalidDate),e=this._t2gYear(a.year());return i.toJD(e,a.month(),a.day())},fromJD:function(e){var t=i.fromJD(e),n=this._g2tYear(t.year());return this.newDate(n,t.month(),t.day())},_t2gYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)},_g2tYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)}}),r.calendars.thai=o},{"../main":548,"object-assign":437}],547:[function(e,t,n){var r=e("../main"),a=e("object-assign");function i(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}i.prototype=new r.baseCalendar,a(i.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thalth","Yawm al-Arba","Yawm al-Khams","Yawm al-Juma","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,r.local.invalidYear);return 355===this.daysInYear(t.year())},weekOfYear:function(e,t,n){var r=this.newDate(e,t,n);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInYear:function(e){for(var t=0,n=1;n<=12;n++)t+=this.daysInMonth(e,n);return t},daysInMonth:function(e,t){for(var n=this._validate(e,t,this.minDay,r.local.invalidMonth),a=n.toJD()-24e5+.5,i=0,s=0;s<o.length;s++){if(o[s]>a)return o[i]-o[i-1];i++}return 30},weekDay:function(e,t,n){return 5!==this.dayOfWeek(e,t,n)},toJD:function(e,t,n){var a=this._validate(e,t,n,r.local.invalidDate),i=12*(a.year()-1)+a.month()-15292,s=a.day()+o[i-1]-1;return s+24e5-.5},fromJD:function(e){for(var t=e-24e5+.5,n=0,r=0;r<o.length&&!(o[r]>t);r++)n++;var a=n+15292,i=Math.floor((a-1)/12),s=i+1,l=a-12*i,u=t-o[n-1]+1;return this.newDate(s,l,u)},isValid:function(e,t,n){var a=r.baseCalendar.prototype.isValid.apply(this,arguments);return a&&(e=null!=e.year?e.year:e,a=e>=1276&&e<=1500),a},_validate:function(e,t,n,a){var i=r.baseCalendar.prototype._validate.apply(this,arguments);if(i.year<1276||i.year>1500)throw a.replace(/\{0\}/,this.local.name);return i}}),r.calendars.ummalqura=i;var o=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},{"../main":548,"object-assign":437}],548:[function(e,t,n){var r=e("object-assign");function a(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}function i(e,t,n,r){if(this._calendar=e,this._year=t,this._month=n,this._day=r,0===this._calendar._validateLevel&&!this._calendar.isValid(this._year,this._month,this._day))throw(u.local.invalidDate||u.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function o(e,t){return"000000".substring(0,t-(e=""+e).length)+e}function s(){this.shortYearCutoff="+10"}function l(e){this.local=this.regionalOptions[e]||this.regionalOptions[""]}r(a.prototype,{instance:function(e,t){e=(e||"gregorian").toLowerCase(),t=t||"";var n=this._localCals[e+"-"+t];if(!n&&this.calendars[e]&&(n=new this.calendars[e](t),this._localCals[e+"-"+t]=n),!n)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,e);return n},newDate:function(e,t,n,r,a){return(r=(null!=e&&e.year?e.calendar():"string"==typeof r?this.instance(r,a):r)||this.instance()).newDate(e,t,n)},substituteDigits:function(e){return function(t){return(t+"").replace(/[0-9]/g,function(t){return e[t]})}},substituteChineseDigits:function(e,t){return function(n){for(var r="",a=0;n>0;){var i=n%10;r=(0===i?"":e[i]+t[a])+r,a++,n=Math.floor(n/10)}return 0===r.indexOf(e[1]+t[1])&&(r=r.substr(1)),r||e[0]}}}),r(i.prototype,{newDate:function(e,t,n){return this._calendar.newDate(null==e?this:e,t,n)},year:function(e){return 0===arguments.length?this._year:this.set(e,"y")},month:function(e){return 0===arguments.length?this._month:this.set(e,"m")},day:function(e){return 0===arguments.length?this._day:this.set(e,"d")},date:function(e,t,n){if(!this._calendar.isValid(e,t,n))throw(u.local.invalidDate||u.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=e,this._month=t,this._day=n,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(e,t){return this._calendar.add(this,e,t)},set:function(e,t){return this._calendar.set(this,e,t)},compareTo:function(e){if(this._calendar.name!==e._calendar.name)throw(u.local.differentCalendars||u.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,e._calendar.local.name);var t=this._year!==e._year?this._year-e._year:this._month!==e._month?this.monthOfYear()-e.monthOfYear():this._day-e._day;return 0===t?0:t<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(e){return this._calendar.fromJD(e)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(e){return this._calendar.fromJSDate(e)},toString:function(){return(this.year()<0?"-":"")+o(Math.abs(this.year()),4)+"-"+o(this.month(),2)+"-"+o(this.day(),2)}}),r(s.prototype,{_validateLevel:0,newDate:function(e,t,n){return null==e?this.today():(e.year&&(this._validate(e,t,n,u.local.invalidDate||u.regionalOptions[""].invalidDate),n=e.day(),t=e.month(),e=e.year()),new i(this,e,t,n))},today:function(){return this.fromJSDate(new Date)},epoch:function(e){var t=this._validate(e,this.minMonth,this.minDay,u.local.invalidYear||u.regionalOptions[""].invalidYear);return t.year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,u.local.invalidYear||u.regionalOptions[""].invalidYear);return(t.year()<0?"-":"")+o(Math.abs(t.year()),4)},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,u.local.invalidYear||u.regionalOptions[""].invalidYear),12},monthOfYear:function(e,t){var n=this._validate(e,t,this.minDay,u.local.invalidMonth||u.regionalOptions[""].invalidMonth);return(n.month()+this.monthsInYear(n)-this.firstMonth)%this.monthsInYear(n)+this.minMonth},fromMonthOfYear:function(e,t){var n=(t+this.firstMonth-2*this.minMonth)%this.monthsInYear(e)+this.minMonth;return this._validate(e,n,this.minDay,u.local.invalidMonth||u.regionalOptions[""].invalidMonth),n},daysInYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,u.local.invalidYear||u.regionalOptions[""].invalidYear);return this.leapYear(t)?366:365},dayOfYear:function(e,t,n){var r=this._validate(e,t,n,u.local.invalidDate||u.regionalOptions[""].invalidDate);return r.toJD()-this.newDate(r.year(),this.fromMonthOfYear(r.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(e,t,n){var r=this._validate(e,t,n,u.local.invalidDate||u.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(r))+2)%this.daysInWeek()},extraInfo:function(e,t,n){return this._validate(e,t,n,u.local.invalidDate||u.regionalOptions[""].invalidDate),{}},add:function(e,t,n){return this._validate(e,this.minMonth,this.minDay,u.local.invalidDate||u.regionalOptions[""].invalidDate),this._correctAdd(e,this._add(e,t,n),t,n)},_add:function(e,t,n){if(this._validateLevel++,"d"===n||"w"===n){var r=e.toJD()+t*("w"===n?this.daysInWeek():1),a=e.calendar().fromJD(r);return this._validateLevel--,[a.year(),a.month(),a.day()]}try{var i=e.year()+("y"===n?t:0),o=e.monthOfYear()+("m"===n?t:0),a=e.day();"y"===n?(e.month()!==this.fromMonthOfYear(i,o)&&(o=this.newDate(i,e.month(),this.minDay).monthOfYear()),o=Math.min(o,this.monthsInYear(i)),a=Math.min(a,this.daysInMonth(i,this.fromMonthOfYear(i,o)))):"m"===n&&(function(e){for(;o<e.minMonth;)i--,o+=e.monthsInYear(i);for(var t=e.monthsInYear(i);o>t-1+e.minMonth;)i++,o-=t,t=e.monthsInYear(i)}(this),a=Math.min(a,this.daysInMonth(i,this.fromMonthOfYear(i,o))));var s=[i,this.fromMonthOfYear(i,o),a];return this._validateLevel--,s}catch(e){throw this._validateLevel--,e}},_correctAdd:function(e,t,n,r){if(!(this.hasYearZero||"y"!==r&&"m"!==r||0!==t[0]&&e.year()>0==t[0]>0)){var a={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[r],i=n<0?-1:1;t=this._add(e,n*a[0]+i*a[1],a[2])}return e.date(t[0],t[1],t[2])},set:function(e,t,n){this._validate(e,this.minMonth,this.minDay,u.local.invalidDate||u.regionalOptions[""].invalidDate);var r="y"===n?t:e.year(),a="m"===n?t:e.month(),i="d"===n?t:e.day();return"y"!==n&&"m"!==n||(i=Math.min(i,this.daysInMonth(r,a))),e.date(r,a,i)},isValid:function(e,t,n){this._validateLevel++;var r=this.hasYearZero||0!==e;if(r){var a=this.newDate(e,t,this.minDay);r=t>=this.minMonth&&t-this.minMonth<this.monthsInYear(a)&&n>=this.minDay&&n-this.minDay<this.daysInMonth(a)}return this._validateLevel--,r},toJSDate:function(e,t,n){var r=this._validate(e,t,n,u.local.invalidDate||u.regionalOptions[""].invalidDate);return u.instance().fromJD(this.toJD(r)).toJSDate()},fromJSDate:function(e){return this.fromJD(u.instance().fromJSDate(e).toJD())},_validate:function(e,t,n,r){if(e.year){if(0===this._validateLevel&&this.name!==e.calendar().name)throw(u.local.differentCalendars||u.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,e.calendar().local.name);return e}try{if(this._validateLevel++,1===this._validateLevel&&!this.isValid(e,t,n))throw r.replace(/\{0\}/,this.local.name);var a=this.newDate(e,t,n);return this._validateLevel--,a}catch(e){throw this._validateLevel--,e}}}),l.prototype=new s,r(l.prototype,{name:"Gregorian",jdEpoch:1721425.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,u.local.invalidYear||u.regionalOptions[""].invalidYear),e=t.year()+(t.year()<0?1:0);return e%4==0&&(e%100!=0||e%400==0)},weekOfYear:function(e,t,n){var r=this.newDate(e,t,n);return r.add(4-(r.dayOfWeek()||7),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var n=this._validate(e,t,this.minDay,u.local.invalidMonth||u.regionalOptions[""].invalidMonth);return this.daysPerMonth[n.month()-1]+(2===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){var r=this._validate(e,t,n,u.local.invalidDate||u.regionalOptions[""].invalidDate);e=r.year(),t=r.month(),n=r.day(),e<0&&e++,t<3&&(t+=12,e--);var a=Math.floor(e/100),i=2-a+Math.floor(a/4);return Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+n+i-1524.5},fromJD:function(e){var t=Math.floor(e+.5),n=Math.floor((t-1867216.25)/36524.25),r=1524+(n=t+1+n-Math.floor(n/4)),a=Math.floor((r-122.1)/365.25),i=Math.floor(365.25*a),o=Math.floor((r-i)/30.6001),s=r-i-Math.floor(30.6001*o),l=o-(o>13.5?13:1),u=a-(l>2.5?4716:4715);return u<=0&&u--,this.newDate(u,l,s)},toJSDate:function(e,t,n){var r=this._validate(e,t,n,u.local.invalidDate||u.regionalOptions[""].invalidDate),a=new Date(r.year(),r.month()-1,r.day());return a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),a.setHours(a.getHours()>12?a.getHours()+2:0),a},fromJSDate:function(e){return this.newDate(e.getFullYear(),e.getMonth()+1,e.getDate())}});var u=t.exports=new a;u.cdate=i,u.baseCalendar=s,u.calendars.gregorian=l},{"object-assign":437}],549:[function(e,t,n){var r=e("object-assign"),a=e("./main");r(a.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),a.local=a.regionalOptions[""],r(a.cdate.prototype,{formatDate:function(e,t){return"string"!=typeof e&&(t=e,e=""),this._calendar.formatDate(e||"",this,t)}}),r(a.baseCalendar.prototype,{UNIX_EPOCH:a.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:a.instance().jdEpoch,TICKS_PER_DAY:864e9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(e,t,n){if("string"!=typeof e&&(n=t,t=e,e=""),!t)return"";if(t.calendar()!==this)throw a.local.invalidFormat||a.regionalOptions[""].invalidFormat;e=e||this.local.dateFormat;for(var r=(n=n||{}).dayNamesShort||this.local.dayNamesShort,i=n.dayNames||this.local.dayNames,o=n.monthNumbers||this.local.monthNumbers,s=n.monthNamesShort||this.local.monthNamesShort,l=n.monthNames||this.local.monthNames,u=(n.calculateWeek||this.local.calculateWeek,function(t,n){for(var r=1;b+r<e.length&&e.charAt(b+r)===t;)r++;return b+=r-1,Math.floor(r/(n||1))>1}),c=function(e,t,n,r){var a=""+t;if(u(e,r))for(;a.length<n;)a="0"+a;return a},f=function(e,t,n,r){return u(e)?r[t]:n[t]},d=this,p=function(e){return"function"==typeof o?o.call(d,e,u("m")):v(c("m",e.month(),2))},h=function(e,t){return t?"function"==typeof l?l.call(d,e):l[e.month()-d.minMonth]:"function"==typeof s?s.call(d,e):s[e.month()-d.minMonth]},m=this.local.digits,v=function(e){return n.localNumbers&&m?m(e):e},g="",y=!1,b=0;b<e.length;b++)if(y)"'"!==e.charAt(b)||u("'")?g+=e.charAt(b):y=!1;else switch(e.charAt(b)){case"d":g+=v(c("d",t.day(),2));break;case"D":g+=f("D",t.dayOfWeek(),r,i);break;case"o":g+=c("o",t.dayOfYear(),3);break;case"w":g+=c("w",t.weekOfYear(),2);break;case"m":g+=p(t);break;case"M":g+=h(t,u("M"));break;case"y":g+=u("y",2)?t.year():(t.year()%100<10?"0":"")+t.year()%100;break;case"Y":u("Y",2),g+=t.formatYear();break;case"J":g+=t.toJD();break;case"@":g+=(t.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":g+=(t.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":u("'")?g+="'":y=!0;break;default:g+=e.charAt(b)}return g},parseDate:function(e,t,n){if(null==t)throw a.local.invalidArguments||a.regionalOptions[""].invalidArguments;if(""===(t="object"==typeof t?t.toString():t+""))return null;e=e||this.local.dateFormat;var r=(n=n||{}).shortYearCutoff||this.shortYearCutoff;r="string"!=typeof r?r:this.today().year()%100+parseInt(r,10);for(var i=n.dayNamesShort||this.local.dayNamesShort,o=n.dayNames||this.local.dayNames,s=n.parseMonth||this.local.parseMonth,l=n.monthNumbers||this.local.monthNumbers,u=n.monthNamesShort||this.local.monthNamesShort,c=n.monthNames||this.local.monthNames,f=-1,d=-1,p=-1,h=-1,m=-1,v=!1,g=!1,y=function(t,n){for(var r=1;E+r<e.length&&e.charAt(E+r)===t;)r++;return E+=r-1,Math.floor(r/(n||1))>1},b=function(e,n){var r=y(e,n),i=[2,3,r?4:2,r?4:2,10,11,20]["oyYJ@!".indexOf(e)+1],o=new RegExp("^-?\\d{1,"+i+"}"),s=t.substring(C).match(o);if(!s)throw(a.local.missingNumberAt||a.regionalOptions[""].missingNumberAt).replace(/\{0\}/,C);return C+=s[0].length,parseInt(s[0],10)},x=this,_=function(){if("function"==typeof l){y("m");var e=l.call(x,t.substring(C));return C+=e.length,e}return b("m")},w=function(e,n,r,i){for(var o=y(e,i)?r:n,s=0;s<o.length;s++)if(t.substr(C,o[s].length).toLowerCase()===o[s].toLowerCase())return C+=o[s].length,s+x.minMonth;throw(a.local.unknownNameAt||a.regionalOptions[""].unknownNameAt).replace(/\{0\}/,C)},T=function(){if("function"==typeof c){var e=y("M")?c.call(x,t.substring(C)):u.call(x,t.substring(C));return C+=e.length,e}return w("M",u,c)},k=function(){if(t.charAt(C)!==e.charAt(E))throw(a.local.unexpectedLiteralAt||a.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,C);C++},C=0,E=0;E<e.length;E++)if(g)"'"!==e.charAt(E)||y("'")?k():g=!1;else switch(e.charAt(E)){case"d":h=b("d");break;case"D":w("D",i,o);break;case"o":m=b("o");break;case"w":b("w");break;case"m":p=_();break;case"M":p=T();break;case"y":var M=E;v=!y("y",2),E=M,d=b("y",2);break;case"Y":d=b("Y",2);break;case"J":f=b("J")+.5,"."===t.charAt(C)&&(C++,b("J"));break;case"@":f=b("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":f=b("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":C=t.length;break;case"'":y("'")?k():g=!0;break;default:k()}if(C<t.length)throw a.local.unexpectedText||a.regionalOptions[""].unexpectedText;if(-1===d?d=this.today().year():d<100&&v&&(d+=-1===r?1900:this.today().year()-this.today().year()%100-(d<=r?0:100)),"string"==typeof p&&(p=s.call(this,d,p)),m>-1){p=1,h=m;for(var A=this.daysInMonth(d,p);h>A;A=this.daysInMonth(d,p))p++,h-=A}return f>-1?this.fromJD(f):this.newDate(d,p,h)},determineDate:function(e,t,n,r,a){n&&"object"!=typeof n&&(a=r,r=n,n=null),"string"!=typeof r&&(a=r,r="");var i=this;return t=t?t.newDate():null,e=null==e?t:"string"==typeof e?function(e){try{return i.parseDate(r,e,a)}catch(e){}for(var t=((e=e.toLowerCase()).match(/^c/)&&n?n.newDate():null)||i.today(),o=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,s=o.exec(e);s;)t.add(parseInt(s[1],10),s[2]||"d"),s=o.exec(e);return t}(e):"number"==typeof e?isNaN(e)||e===1/0||e===-1/0?t:i.today().add(e,"d"):i.newDate(e)}})},{"./main":548,"object-assign":437}],550:[function(e,t,n){t.exports=e("cwise-compiler")({args:["array",{offset:[1],array:0},"scalar","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\n        var _inline_1_da = _inline_1_arg0_ - _inline_1_arg3_\n        var _inline_1_db = _inline_1_arg1_ - _inline_1_arg3_\n        if((_inline_1_da >= 0) !== (_inline_1_db >= 0)) {\n          _inline_1_arg2_.push(_inline_1_arg4_[0] + 0.5 + 0.5 * (_inline_1_da + _inline_1_db) / (_inline_1_da - _inline_1_db))\n        }\n      }",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg3_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:["_inline_1_da","_inline_1_db"]},funcName:"zeroCrossings"})},{"cwise-compiler":134}],551:[function(e,t,n){"use strict";t.exports=function(e,t){var n=[];return t=+t||0,r(e.hi(e.shape[0]-1),n,t),n};var r=e("./lib/zc-core")},{"./lib/zc-core":550}],552:[function(e,t,n){"use strict";t.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},{}],553:[function(e,t,n){"use strict";var r=e("./arrow_paths"),a=e("../../plots/font_attributes"),i=e("../../plots/cartesian/constants"),o=e("../../plot_api/plot_template").templatedArray;t.exports=o("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:a({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:r.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:r.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",i.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",i.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",i.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",i.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:a({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../plot_api/plot_template":734,"../../plots/cartesian/constants":750,"../../plots/font_attributes":771,"./arrow_paths":552}],554:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("../../plots/cartesian/axes"),i=e("./draw").draw;function o(e){var t=e._fullLayout;r.filterVisible(t.annotations).forEach(function(t){var n=a.getFromId(e,t.xref),r=a.getFromId(e,t.yref);t._extremes={},n&&s(t,n),r&&s(t,r)})}function s(e,t){var n,r=t._id,i=r.charAt(0),o=e[i],s=e["a"+i],l=e[i+"ref"],u=e["a"+i+"ref"],c=e["_"+i+"padplus"],f=e["_"+i+"padminus"],d={x:1,y:-1}[i]*e[i+"shift"],p=3*e.arrowsize*e.arrowwidth||0,h=p+d,m=p-d,v=3*e.startarrowsize*e.arrowwidth||0,g=v+d,y=v-d;if(u===l){var b=a.findExtremes(t,[t.r2c(o)],{ppadplus:h,ppadminus:m}),x=a.findExtremes(t,[t.r2c(s)],{ppadplus:Math.max(c,g),ppadminus:Math.max(f,y)});n={min:[b.min[0],x.min[0]],max:[b.max[0],x.max[0]]}}else g=s?g+s:g,y=s?y-s:y,n=a.findExtremes(t,[t.r2c(o)],{ppadplus:Math.max(c,h,g),ppadminus:Math.max(f,m,y)});e._extremes[r]=n}t.exports=function(e){var t=e._fullLayout,n=r.filterVisible(t.annotations);if(n.length&&e._fullData.length)return r.syncOrAsync([i,o],e)}},{"../../lib":696,"../../plots/cartesian/axes":744,"./draw":559}],555:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("../../registry"),i=e("../../plot_api/plot_template").arrayEditor;function o(e,t){var n,r,a,i,o,l,u,c=e._fullLayout.annotations,f=[],d=[],p=[],h=(t||[]).length;for(n=0;n<c.length;n++)if(a=c[n],i=a.clicktoshow){for(r=0;r<h;r++)if(o=t[r],l=o.xaxis,u=o.yaxis,l._id===a.xref&&u._id===a.yref&&l.d2r(o.x)===s(a._xclick,l)&&u.d2r(o.y)===s(a._yclick,u)){(a.visible?"onout"===i?d:p:f).push(n);break}r===h&&a.visible&&"onout"===i&&d.push(n)}return{on:f,off:d,explicitOff:p}}function s(e,t){return"log"===t.type?t.l2r(e):t.d2r(e)}t.exports={hasClickToShow:function(e,t){var n=o(e,t);return n.on.length>0||n.explicitOff.length>0},onClick:function(e,t){var n,s,l=o(e,t),u=l.on,c=l.off.concat(l.explicitOff),f={},d=e._fullLayout.annotations;if(u.length||c.length){for(n=0;n<u.length;n++)(s=i(e.layout,"annotations",d[u[n]])).modifyItem("visible",!0),r.extendFlat(f,s.getUpdateObj());for(n=0;n<c.length;n++)(s=i(e.layout,"annotations",d[c[n]])).modifyItem("visible",!1),r.extendFlat(f,s.getUpdateObj());return a.call("update",e,{},f)}}}},{"../../lib":696,"../../plot_api/plot_template":734,"../../registry":827}],556:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("../color");t.exports=function(e,t,n,i){i("opacity");var o=i("bgcolor"),s=i("bordercolor"),l=a.opacity(s);i("borderpad");var u=i("borderwidth"),c=i("showarrow");i("text",c?" ":n._dfltTitle.annotation),i("textangle"),r.coerceFont(i,"font",n.font),i("width"),i("align");var f=i("height");if(f&&i("valign"),c){var d,p,h=i("arrowside");-1!==h.indexOf("end")&&(d=i("arrowhead"),p=i("arrowsize")),-1!==h.indexOf("start")&&(i("startarrowhead",d),i("startarrowsize",p)),i("arrowcolor",l?t.bordercolor:a.defaultLine),i("arrowwidth",2*(l&&u||1)),i("standoff"),i("startstandoff")}var m=i("hovertext"),v=n.hoverlabel||{};if(m){var g=i("hoverlabel.bgcolor",v.bgcolor||(a.opacity(o)?a.rgb(o):a.defaultLine)),y=i("hoverlabel.bordercolor",v.bordercolor||a.contrast(g));r.coerceFont(i,"hoverlabel.font",{family:v.font.family,size:v.font.size,color:v.font.color||y})}i("captureevents",!!m)}},{"../../lib":696,"../color":570}],557:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),a=e("../../lib/to_log_range");t.exports=function(e,t,n,i){t=t||{};var o="log"===n&&"linear"===t.type,s="linear"===n&&"log"===t.type;if(o||s)for(var l,u,c=e._fullLayout.annotations,f=t._id.charAt(0),d=0;d<c.length;d++)l=c[d],u="annotations["+d+"].",l[f+"ref"]===t._id&&p(f),l["a"+f+"ref"]===t._id&&p("a"+f);function p(e){var n=l[e],s=null;s=o?a(n,t.range):Math.pow(10,n),r(s)||(s=null),i(u+e,s)}}},{"../../lib/to_log_range":722,"fast-isnumeric":214}],558:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("../../plots/cartesian/axes"),i=e("../../plots/array_container_defaults"),o=e("./common_defaults"),s=e("./attributes");function l(e,t,n){function i(n,a){return r.coerce(e,t,s,n,a)}var l=i("visible"),u=i("clicktoshow");if(l||u){o(e,t,n,i);for(var c=t.showarrow,f=["x","y"],d=[-10,-30],p={_fullLayout:n},h=0;h<2;h++){var m=f[h],v=a.coerceRef(e,t,p,m,"","paper");if("paper"!==v){var g=a.getFromId(p,v);g._annIndices.push(t._index)}if(a.coercePosition(t,p,i,v,m,.5),c){var y="a"+m,b=a.coerceRef(e,t,p,y,"pixel");"pixel"!==b&&b!==v&&(b=t[y]="pixel");var x="pixel"===b?d[h]:.4;a.coercePosition(t,p,i,b,y,x)}i(m+"anchor"),i(m+"shift")}if(r.noneOrAll(e,t,["x","y"]),c&&r.noneOrAll(e,t,["ax","ay"]),u){var _=i("xclick"),w=i("yclick");t._xclick=void 0===_?t.x:a.cleanPosition(_,p,t.xref),t._yclick=void 0===w?t.y:a.cleanPosition(w,p,t.yref)}}}t.exports=function(e,t){i(e,t,{name:"annotations",handleItemDefaults:l})}},{"../../lib":696,"../../plots/array_container_defaults":740,"../../plots/cartesian/axes":744,"./attributes":553,"./common_defaults":556}],559:[function(e,t,n){"use strict";var r=e("d3"),a=e("../../registry"),i=e("../../plots/plots"),o=e("../../lib"),s=e("../../plots/cartesian/axes"),l=e("../color"),u=e("../drawing"),c=e("../fx"),f=e("../../lib/svg_text_utils"),d=e("../../lib/setcursor"),p=e("../dragelement"),h=e("../../plot_api/plot_template").arrayEditor,m=e("./draw_arrow_head");function v(e,t){var n=e._fullLayout,r=n.annotations[t]||{},a=s.getFromId(e,r.xref),i=s.getFromId(e,r.yref);g(e,r,t,!1,a,i)}function g(e,t,n,i,s,v){var g,y,b=e._fullLayout,x=e._fullLayout._size,_=e._context.edits;i?(g="annotation-"+i,y=i+".annotations"):(g="annotation",y="annotations");var w=h(e.layout,y,t),T=w.modifyBase,k=w.modifyItem,C=w.getUpdateObj;b._infolayer.selectAll("."+g+'[data-index="'+n+'"]').remove();var E="clip"+b._uid+"_ann"+n;if(t._input&&!1!==t.visible){var M={x:{},y:{}},A=+t.textangle||0,S=b._infolayer.append("g").classed(g,!0).attr("data-index",String(n)).style("opacity",t.opacity),O=S.append("g").classed("annotation-text-g",!0),P=_[t.showarrow?"annotationTail":"annotationPosition"],R=t.captureevents||_.annotationText||P,L=O.append("g").style("pointer-events",R?"all":null).call(d,"pointer").on("click",function(){e._dragging=!1;var a={index:n,annotation:t._input,fullAnnotation:t,event:r.event};i&&(a.subplotId=i),e.emit("plotly_clickannotation",a)});t.hovertext&&L.on("mouseover",function(){var n=t.hoverlabel,r=n.font,a=this.getBoundingClientRect(),i=e.getBoundingClientRect();c.loneHover({x0:a.left-i.left,x1:a.right-i.left,y:(a.top+a.bottom)/2-i.top,text:t.hovertext,color:n.bgcolor,borderColor:n.bordercolor,fontFamily:r.family,fontSize:r.size,fontColor:r.color},{container:b._hoverlayer.node(),outerContainer:b._paper.node(),gd:e})}).on("mouseout",function(){c.loneUnhover(b._hoverlayer.node())});var D=t.borderwidth,I=t.borderpad,z=D+I,j=L.append("rect").attr("class","bg").style("stroke-width",D+"px").call(l.stroke,t.bordercolor).call(l.fill,t.bgcolor),N=t.width||t.height,F=b._topclips.selectAll("#"+E).data(N?[0]:[]);F.enter().append("clipPath").classed("annclip",!0).attr("id",E).append("rect"),F.exit().remove();var B=t.font,V=L.append("text").classed("annotation-text",!0).text(t.text);_.annotationText?V.call(f.makeEditable,{delegate:L,gd:e}).call(U).on("edit",function(n){t.text=n,this.call(U),k("text",n),s&&s.autorange&&T(s._name+".autorange",!0),v&&v.autorange&&T(v._name+".autorange",!0),a.call("relayout",e,C())}):V.call(U)}else r.selectAll("#"+E).remove();function U(n){return n.call(u.font,B).attr({"text-anchor":{left:"start",right:"end"}[t.align]||"middle"}),f.convertToTspans(n,e,G),n}function G(){var n=V.selectAll("a");if(1===n.size()&&n.text()===V.text()){var r=L.insert("a",":first-child").attr({"xlink:xlink:href":n.attr("xlink:href"),"xlink:xlink:show":n.attr("xlink:show")}).style({cursor:"pointer"});r.node().appendChild(j.node())}var c=L.select(".annotation-text-math-group"),h=!c.empty(),g=u.bBox((h?c:V).node()),y=g.width,w=g.height,R=t.width||y,I=t.height||w,B=Math.round(R+2*z),U=Math.round(I+2*z);function G(e,t){return"auto"===t&&(t=e<1/3?"left":e>2/3?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[t]}for(var H=!1,W=["x","y"],q=0;q<W.length;q++){var Y,X,Z,$,K,J=W[q],Q=t[J+"ref"]||J,ee=t["a"+J+"ref"],te={x:s,y:v}[J],ne=(A+("x"===J?0:-90))*Math.PI/180,re=B*Math.cos(ne),ae=U*Math.sin(ne),ie=Math.abs(re)+Math.abs(ae),oe=t[J+"anchor"],se=t[J+"shift"]*("x"===J?1:-1),le=M[J];if(te){var ue=te.r2fraction(t[J]);(ue<0||ue>1)&&(ee===Q?((ue=te.r2fraction(t["a"+J]))<0||ue>1)&&(H=!0):H=!0),Y=te._offset+te.r2p(t[J]),$=.5}else"x"===J?(Z=t[J],Y=x.l+x.w*Z):(Z=1-t[J],Y=x.t+x.h*Z),$=t.showarrow?.5:Z;if(t.showarrow){le.head=Y;var ce=t["a"+J];K=re*G(.5,t.xanchor)-ae*G(.5,t.yanchor),ee===Q?(le.tail=te._offset+te.r2p(ce),X=K):(le.tail=Y+ce,X=K+ce),le.text=le.tail+K;var fe=b["x"===J?"width":"height"];if("paper"===Q&&(le.head=o.constrain(le.head,1,fe-1)),"pixel"===ee){var de=-Math.max(le.tail-3,le.text),pe=Math.min(le.tail+3,le.text)-fe;de>0?(le.tail+=de,le.text+=de):pe>0&&(le.tail-=pe,le.text-=pe)}le.tail+=se,le.head+=se}else K=ie*G($,oe),X=K,le.text=Y+K;le.text+=se,K+=se,X+=se,t["_"+J+"padplus"]=ie/2+X,t["_"+J+"padminus"]=ie/2-X,t["_"+J+"size"]=ie,t["_"+J+"shift"]=K}if(e._dragging||!H){var he=0,me=0;if("left"!==t.align&&(he=(R-y)*("center"===t.align?.5:1)),"top"!==t.valign&&(me=(I-w)*("middle"===t.valign?.5:1)),h)c.select("svg").attr({x:z+he-1,y:z+me}).call(u.setClipUrl,N?E:null);else{var ve=z+me-g.top,ge=z+he-g.left;V.call(f.positionText,ge,ve).call(u.setClipUrl,N?E:null)}F.select("rect").call(u.setRect,z,z,R,I),j.call(u.setRect,D/2,D/2,B-D,U-D),L.call(u.setTranslate,Math.round(M.x.text-B/2),Math.round(M.y.text-U/2)),O.attr({transform:"rotate("+A+","+M.x.text+","+M.y.text+")"});var ye,be=function(n,r){S.selectAll(".annotation-arrow-g").remove();var c=M.x.head,f=M.y.head,d=M.x.tail+n,h=M.y.tail+r,g=M.x.text+n,y=M.y.text+r,b=o.rotationXYMatrix(A,g,y),w=o.apply2DTransform(b),E=o.apply2DTransform2(b),P=+j.attr("width"),R=+j.attr("height"),D=g-.5*P,I=D+P,z=y-.5*R,N=z+R,F=[[D,z,D,N],[D,N,I,N],[I,N,I,z],[I,z,D,z]].map(E);if(!F.reduce(function(e,t){return e^!!o.segmentsIntersect(c,f,c+1e6,f+1e6,t[0],t[1],t[2],t[3])},!1)){F.forEach(function(e){var t=o.segmentsIntersect(d,h,c,f,e[0],e[1],e[2],e[3]);t&&(d=t.x,h=t.y)});var B=t.arrowwidth,V=t.arrowcolor,U=t.arrowside,G=S.append("g").style({opacity:l.opacity(V)}).classed("annotation-arrow-g",!0),H=G.append("path").attr("d","M"+d+","+h+"L"+c+","+f).style("stroke-width",B+"px").call(l.stroke,l.rgb(V));if(m(H,U,t),_.annotationPosition&&H.node().parentNode&&!i){var W=c,q=f;if(t.standoff){var Y=Math.sqrt(Math.pow(c-d,2)+Math.pow(f-h,2));W+=t.standoff*(d-c)/Y,q+=t.standoff*(h-f)/Y}var X,Z,$=G.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(d-W)+","+(h-q),transform:"translate("+W+","+q+")"}).style("stroke-width",B+6+"px").call(l.stroke,"rgba(0,0,0,0)").call(l.fill,"rgba(0,0,0,0)");p.init({element:$.node(),gd:e,prepFn:function(){var e=u.getTranslate(L);X=e.x,Z=e.y,s&&s.autorange&&T(s._name+".autorange",!0),v&&v.autorange&&T(v._name+".autorange",!0)},moveFn:function(e,n){var r=w(X,Z),a=r[0]+e,i=r[1]+n;L.call(u.setTranslate,a,i),k("x",s?s.p2r(s.r2p(t.x)+e):t.x+e/x.w),k("y",v?v.p2r(v.r2p(t.y)+n):t.y-n/x.h),t.axref===t.xref&&k("ax",s.p2r(s.r2p(t.ax)+e)),t.ayref===t.yref&&k("ay",v.p2r(v.r2p(t.ay)+n)),G.attr("transform","translate("+e+","+n+")"),O.attr({transform:"rotate("+A+","+a+","+i+")"})},doneFn:function(){a.call("relayout",e,C());var t=document.querySelector(".js-notes-box-panel");t&&t.redraw(t.selectedObj)}})}}};t.showarrow&&be(0,0),P&&p.init({element:L.node(),gd:e,prepFn:function(){ye=O.attr("transform")},moveFn:function(e,n){var r="pointer";if(t.showarrow)t.axref===t.xref?k("ax",s.p2r(s.r2p(t.ax)+e)):k("ax",t.ax+e),t.ayref===t.yref?k("ay",v.p2r(v.r2p(t.ay)+n)):k("ay",t.ay+n),be(e,n);else{if(i)return;var a,o;if(s)a=s.p2r(s.r2p(t.x)+e);else{var l=t._xsize/x.w,u=t.x+(t._xshift-t.xshift)/x.w-l/2;a=p.align(u+e/x.w,l,0,1,t.xanchor)}if(v)o=v.p2r(v.r2p(t.y)+n);else{var c=t._ysize/x.h,f=t.y-(t._yshift+t.yshift)/x.h-c/2;o=p.align(f-n/x.h,c,0,1,t.yanchor)}k("x",a),k("y",o),s&&v||(r=p.getCursor(s?.5:a,v?.5:o,t.xanchor,t.yanchor))}O.attr({transform:"translate("+e+","+n+")"+ye}),d(L,r)},doneFn:function(){d(L),a.call("relayout",e,C());var t=document.querySelector(".js-notes-box-panel");t&&t.redraw(t.selectedObj)}})}else L.remove()}}t.exports={draw:function(e){var t=e._fullLayout;t._infolayer.selectAll(".annotation").remove();for(var n=0;n<t.annotations.length;n++)t.annotations[n].visible&&v(e,n);return i.previousPromises(e)},drawOne:v,drawRaw:g}},{"../../lib":696,"../../lib/setcursor":716,"../../lib/svg_text_utils":720,"../../plot_api/plot_template":734,"../../plots/cartesian/axes":744,"../../plots/plots":808,"../../registry":827,"../color":570,"../dragelement":592,"../drawing":595,"../fx":612,"./draw_arrow_head":560,d3:148}],560:[function(e,t,n){"use strict";var r=e("d3"),a=e("../color"),i=e("./arrow_paths");t.exports=function(e,t,n){var o,s,l,u,c=e.node(),f=i[n.arrowhead||0],d=i[n.startarrowhead||0],p=(n.arrowwidth||1)*(n.arrowsize||1),h=(n.arrowwidth||1)*(n.startarrowsize||1),m=t.indexOf("start")>=0,v=t.indexOf("end")>=0,g=f.backoff*p+n.standoff,y=d.backoff*h+n.startstandoff;if("line"===c.nodeName){o={x:+e.attr("x1"),y:+e.attr("y1")},s={x:+e.attr("x2"),y:+e.attr("y2")};var b=o.x-s.x,x=o.y-s.y;if(l=Math.atan2(x,b),u=l+Math.PI,g&&y&&g+y>Math.sqrt(b*b+x*x))return void R();if(g){if(g*g>b*b+x*x)return void R();var _=g*Math.cos(l),w=g*Math.sin(l);s.x+=_,s.y+=w,e.attr({x2:s.x,y2:s.y})}if(y){if(y*y>b*b+x*x)return void R();var T=y*Math.cos(l),k=y*Math.sin(l);o.x-=T,o.y-=k,e.attr({x1:o.x,y1:o.y})}}else if("path"===c.nodeName){var C=c.getTotalLength(),E="";if(C<g+y)return void R();var M=c.getPointAtLength(0),A=c.getPointAtLength(.1);l=Math.atan2(M.y-A.y,M.x-A.x),o=c.getPointAtLength(Math.min(y,C)),E="0px,"+y+"px,";var S=c.getPointAtLength(C),O=c.getPointAtLength(C-.1);u=Math.atan2(S.y-O.y,S.x-O.x),s=c.getPointAtLength(Math.max(0,C-g));var P=E?y+g:g;E+=C-P+"px,"+C+"px",e.style("stroke-dasharray",E)}function R(){e.style("stroke-dasharray","0px,100px")}function L(t,i,o,s){t.path&&(t.noRotate&&(o=0),r.select(c.parentNode).append("path").attr({class:e.attr("class"),d:t.path,transform:"translate("+i.x+","+i.y+")"+(o?"rotate("+180*o/Math.PI+")":"")+"scale("+s+")"}).style({fill:a.rgb(n.arrowcolor),"stroke-width":0}))}m&&L(d,o,l,h),v&&L(f,s,u,p)}},{"../color":570,"./arrow_paths":552,d3:148}],561:[function(e,t,n){"use strict";var r=e("./draw"),a=e("./click");t.exports={moduleType:"component",name:"annotations",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("annotations"),calcAutorange:e("./calc_autorange"),draw:r.draw,drawOne:r.drawOne,drawRaw:r.drawRaw,hasClickToShow:a.hasClickToShow,onClick:a.onClick,convertCoords:e("./convert_coords")}},{"../../plots/cartesian/include_components":755,"./attributes":553,"./calc_autorange":554,"./click":555,"./convert_coords":557,"./defaults":558,"./draw":559}],562:[function(e,t,n){"use strict";var r=e("../annotations/attributes"),a=e("../../plot_api/edit_types").overrideAll,i=e("../../plot_api/plot_template").templatedArray;t.exports=a(i("annotation",{visible:r.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:r.xanchor,xshift:r.xshift,yanchor:r.yanchor,yshift:r.yshift,text:r.text,textangle:r.textangle,font:r.font,width:r.width,height:r.height,opacity:r.opacity,align:r.align,valign:r.valign,bgcolor:r.bgcolor,bordercolor:r.bordercolor,borderpad:r.borderpad,borderwidth:r.borderwidth,showarrow:r.showarrow,arrowcolor:r.arrowcolor,arrowhead:r.arrowhead,startarrowhead:r.startarrowhead,arrowside:r.arrowside,arrowsize:r.arrowsize,startarrowsize:r.startarrowsize,arrowwidth:r.arrowwidth,standoff:r.standoff,startstandoff:r.startstandoff,hovertext:r.hovertext,hoverlabel:r.hoverlabel,captureevents:r.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":727,"../../plot_api/plot_template":734,"../annotations/attributes":553}],563:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("../../plots/cartesian/axes");function i(e,t){var n=t.fullSceneLayout,i=n.domain,o=t.fullLayout._size,s={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};e._xa={},r.extendFlat(e._xa,s),a.setConvert(e._xa),e._xa._offset=o.l+i.x[0]*o.w,e._xa.l2p=function(){return.5*(1+e._pdata[0]/e._pdata[3])*o.w*(i.x[1]-i.x[0])},e._ya={},r.extendFlat(e._ya,s),a.setConvert(e._ya),e._ya._offset=o.t+(1-i.y[1])*o.h,e._ya.l2p=function(){return.5*(1-e._pdata[1]/e._pdata[3])*o.h*(i.y[1]-i.y[0])}}t.exports=function(e){for(var t=e.fullSceneLayout,n=t.annotations,r=0;r<n.length;r++)i(n[r],e);e.fullLayout._infolayer.selectAll(".annotation-"+e.id).remove()}},{"../../lib":696,"../../plots/cartesian/axes":744}],564:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("../../plots/cartesian/axes"),i=e("../../plots/array_container_defaults"),o=e("../annotations/common_defaults"),s=e("./attributes");function l(e,t,n,i){function l(n,a){return r.coerce(e,t,s,n,a)}function u(e){var r=e+"axis",i={_fullLayout:{}};return i._fullLayout[r]=n[r],a.coercePosition(t,i,l,e,e,.5)}var c=l("visible");c&&(o(e,t,i.fullLayout,l),u("x"),u("y"),u("z"),r.noneOrAll(e,t,["x","y","z"]),t.xref="x",t.yref="y",t.zref="z",l("xanchor"),l("yanchor"),l("xshift"),l("yshift"),t.showarrow&&(t.axref="pixel",t.ayref="pixel",l("ax",-10),l("ay",-30),r.noneOrAll(e,t,["ax","ay"])))}t.exports=function(e,t,n){i(e,t,{name:"annotations",handleItemDefaults:l,fullLayout:n.fullLayout})}},{"../../lib":696,"../../plots/array_container_defaults":740,"../../plots/cartesian/axes":744,"../annotations/common_defaults":556,"./attributes":562}],565:[function(e,t,n){"use strict";var r=e("../annotations/draw").drawRaw,a=e("../../plots/gl3d/project"),i=["x","y","z"];t.exports=function(e){for(var t=e.fullSceneLayout,n=e.dataScale,o=t.annotations,s=0;s<o.length;s++){for(var l=o[s],u=!1,c=0;c<3;c++){var f=i[c],d=l[f],p=t[f+"axis"],h=p.r2fraction(d);if(h<0||h>1){u=!0;break}}u?e.fullLayout._infolayer.select(".annotation-"+e.id+'[data-index="'+s+'"]').remove():(l._pdata=a(e.glplot.cameraParams,[t.xaxis.r2l(l.x)*n[0],t.yaxis.r2l(l.y)*n[1],t.zaxis.r2l(l.z)*n[2]]),r(e.graphDiv,l,s,e.id,l._xa,l._ya))}}},{"../../plots/gl3d/project":796,"../annotations/draw":559}],566:[function(e,t,n){"use strict";var r=e("../../registry"),a=e("../../lib");t.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:e("./attributes")}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),includeBasePlot:function(e,t){var n=r.subplotsRegistry.gl3d;if(n)for(var i=n.attrRegex,o=Object.keys(e),s=0;s<o.length;s++){var l=o[s];i.test(l)&&(e[l].annotations||[]).length&&(a.pushUnique(t._basePlotModules,n),a.pushUnique(t._subplots.gl3d,l))}},convert:e("./convert"),draw:e("./draw")}},{"../../lib":696,"../../registry":827,"./attributes":562,"./convert":563,"./defaults":564,"./draw":565}],567:[function(e,t,n){"use strict";t.exports=e("world-calendars/dist/main"),e("world-calendars/dist/plus"),e("world-calendars/dist/calendars/chinese"),e("world-calendars/dist/calendars/coptic"),e("world-calendars/dist/calendars/discworld"),e("world-calendars/dist/calendars/ethiopian"),e("world-calendars/dist/calendars/hebrew"),e("world-calendars/dist/calendars/islamic"),e("world-calendars/dist/calendars/julian"),e("world-calendars/dist/calendars/mayan"),e("world-calendars/dist/calendars/nanakshahi"),e("world-calendars/dist/calendars/nepali"),e("world-calendars/dist/calendars/persian"),e("world-calendars/dist/calendars/taiwan"),e("world-calendars/dist/calendars/thai"),e("world-calendars/dist/calendars/ummalqura")},{"world-calendars/dist/calendars/chinese":534,"world-calendars/dist/calendars/coptic":535,"world-calendars/dist/calendars/discworld":536,"world-calendars/dist/calendars/ethiopian":537,"world-calendars/dist/calendars/hebrew":538,"world-calendars/dist/calendars/islamic":539,"world-calendars/dist/calendars/julian":540,"world-calendars/dist/calendars/mayan":541,"world-calendars/dist/calendars/nanakshahi":542,"world-calendars/dist/calendars/nepali":543,"world-calendars/dist/calendars/persian":544,"world-calendars/dist/calendars/taiwan":545,"world-calendars/dist/calendars/thai":546,"world-calendars/dist/calendars/ummalqura":547,"world-calendars/dist/main":548,"world-calendars/dist/plus":549}],568:[function(e,t,n){"use strict";var r=e("./calendars"),a=e("../../lib"),i=e("../../constants/numerical"),o=i.EPOCHJD,s=i.ONEDAY,l={valType:"enumerated",values:Object.keys(r.calendars),editType:"calc",dflt:"gregorian"},u=function(e,t,n,r){var i={};return i[n]=l,a.coerce(e,t,i,n,r)},c="##",f={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:c,w:c,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}},d={};function p(e){var t=d[e];return t||(t=d[e]=r.instance(e))}function h(e){return a.extendFlat({},l,{description:e})}function m(e){return"Sets the calendar system to use with `"+e+"` date data."}var v={xcalendar:h(m("x"))},g=a.extendFlat({},v,{ycalendar:h(m("y"))}),y=a.extendFlat({},g,{zcalendar:h(m("z"))}),b=h(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));t.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:g,bar:g,box:g,heatmap:g,contour:g,histogram:g,histogram2d:g,histogram2dcontour:g,scatter3d:y,surface:y,mesh3d:y,scattergl:g,ohlc:v,candlestick:v},layout:{calendar:h(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:b},yaxis:{calendar:b},scene:{xaxis:{calendar:b},yaxis:{calendar:b},zaxis:{calendar:b}},polar:{radialaxis:{calendar:b}}},transforms:{filter:{valuecalendar:h(["Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:h(["Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:l,handleDefaults:u,handleTraceDefaults:function(e,t,n,r){for(var a=0;a<n.length;a++)u(e,t,n[a]+"calendar",r.calendar)},CANONICAL_SUNDAY:{chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},CANONICAL_TICK:{chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},DFLTRANGE:{chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},getCal:p,worldCalFmt:function(e,t,n){for(var r,a,i,l,u,d=Math.floor((t+.05)/s)+o,h=p(n).fromJD(d),m=0;-1!==(m=e.indexOf("%",m));)"0"===(r=e.charAt(m+1))||"-"===r||"_"===r?(i=3,a=e.charAt(m+2),"_"===r&&(r="-")):(a=r,r="0",i=2),(l=f[a])?(u=l===c?c:h.formatDate(l[r]),e=e.substr(0,m)+u+e.substr(m+i),m+=u.length):m+=i;return e}}},{"../../constants/numerical":673,"../../lib":696,"./calendars":567}],569:[function(e,t,n){"use strict";n.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],n.defaultLine="#444",n.lightLine="#eee",n.background="#fff",n.borderLine="#BEC8D9",n.lightFraction=1e3/11},{}],570:[function(e,t,n){"use strict";var r=e("tinycolor2"),a=e("fast-isnumeric"),i=t.exports={},o=e("./attributes");i.defaults=o.defaults;var s=i.defaultLine=o.defaultLine;i.lightLine=o.lightLine;var l=i.background=o.background;function u(e){if(a(e)||"string"!=typeof e)return e;var t=e.trim();if("rgb"!==t.substr(0,3))return e;var n=t.match(/^rgba?\s*\(([^()]*)\)$/);if(!n)return e;var r=n[1].trim().split(/\s*[\s,]\s*/),i="a"===t.charAt(3)&&4===r.length;if(!i&&3!==r.length)return e;for(var o=0;o<r.length;o++){if(!r[o].length)return e;if(r[o]=Number(r[o]),!(r[o]>=0))return e;if(3===o)r[o]>1&&(r[o]=1);else if(r[o]>=1)return e}var s=Math.round(255*r[0])+", "+Math.round(255*r[1])+", "+Math.round(255*r[2]);return i?"rgba("+s+", "+r[3]+")":"rgb("+s+")"}i.tinyRGB=function(e){var t=e.toRgb();return"rgb("+Math.round(t.r)+", "+Math.round(t.g)+", "+Math.round(t.b)+")"},i.rgb=function(e){return i.tinyRGB(r(e))},i.opacity=function(e){return e?r(e).getAlpha():0},i.addOpacity=function(e,t){var n=r(e).toRgb();return"rgba("+Math.round(n.r)+", "+Math.round(n.g)+", "+Math.round(n.b)+", "+t+")"},i.combine=function(e,t){var n=r(e).toRgb();if(1===n.a)return r(e).toRgbString();var a=r(t||l).toRgb(),i=1===a.a?a:{r:255*(1-a.a)+a.r*a.a,g:255*(1-a.a)+a.g*a.a,b:255*(1-a.a)+a.b*a.a},o={r:i.r*(1-n.a)+n.r*n.a,g:i.g*(1-n.a)+n.g*n.a,b:i.b*(1-n.a)+n.b*n.a};return r(o).toRgbString()},i.contrast=function(e,t,n){var a=r(e);1!==a.getAlpha()&&(a=r(i.combine(e,l)));var o=a.isDark()?t?a.lighten(t):l:n?a.darken(n):s;return o.toString()},i.stroke=function(e,t){var n=r(t);e.style({stroke:i.tinyRGB(n),"stroke-opacity":n.getAlpha()})},i.fill=function(e,t){var n=r(t);e.style({fill:i.tinyRGB(n),"fill-opacity":n.getAlpha()})},i.clean=function(e){if(e&&"object"==typeof e){var t,n,r,a,o=Object.keys(e);for(t=0;t<o.length;t++)if(r=o[t],a=e[r],"color"===r.substr(r.length-5))if(Array.isArray(a))for(n=0;n<a.length;n++)a[n]=u(a[n]);else e[r]=u(a);else if("colorscale"===r.substr(r.length-10)&&Array.isArray(a))for(n=0;n<a.length;n++)Array.isArray(a[n])&&(a[n][1]=u(a[n][1]));else if(Array.isArray(a)){var s=a[0];if(!Array.isArray(s)&&s&&"object"==typeof s)for(n=0;n<a.length;n++)i.clean(a[n])}else a&&"object"==typeof a&&i.clean(a)}}},{"./attributes":569,"fast-isnumeric":214,tinycolor2:514}],571:[function(e,t,n){"use strict";var r=e("../../plots/cartesian/layout_attributes"),a=e("../../plots/font_attributes"),i=e("../../lib/extend").extendFlat,o=e("../../plot_api/edit_types").overrideAll;t.exports=o({thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",dflt:1.02,min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",dflt:.5,min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle"},ypad:{valType:"number",min:0,dflt:10},outlinecolor:r.linecolor,outlinewidth:r.linewidth,bordercolor:r.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:r.tickmode,nticks:r.nticks,tick0:r.tick0,dtick:r.dtick,tickvals:r.tickvals,ticktext:r.ticktext,ticks:i({},r.ticks,{dflt:""}),ticklen:r.ticklen,tickwidth:r.tickwidth,tickcolor:r.tickcolor,showticklabels:r.showticklabels,tickfont:a({}),tickangle:r.tickangle,tickformat:r.tickformat,tickformatstops:r.tickformatstops,tickprefix:r.tickprefix,showtickprefix:r.showtickprefix,ticksuffix:r.ticksuffix,showticksuffix:r.showticksuffix,separatethousands:r.separatethousands,exponentformat:r.exponentformat,showexponent:r.showexponent,title:{valType:"string"},titlefont:a({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}},"colorbars","from-root")},{"../../lib/extend":685,"../../plot_api/edit_types":727,"../../plots/cartesian/layout_attributes":757,"../../plots/font_attributes":771}],572:[function(e,t,n){"use strict";var r=e("./draw");t.exports=function(e,t,n){if("function"==typeof n)return n(e,t);var a=t[0].trace,i="cb"+a.uid,o=n.container,s=o?a[o]:a;if(e._fullLayout._infolayer.selectAll("."+i).remove(),s&&s.showscale){var l=t[0].t.cb=r(e,i);l.fillgradient(s.colorscale).zrange([s[n.min],s[n.max]]).options(s.colorbar)()}}},{"./draw":575}],573:[function(e,t,n){"use strict";t.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],574:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("../../plot_api/plot_template"),i=e("../../plots/cartesian/tick_value_defaults"),o=e("../../plots/cartesian/tick_mark_defaults"),s=e("../../plots/cartesian/tick_label_defaults"),l=e("./attributes");t.exports=function(e,t,n){var u=a.newContainer(t,"colorbar"),c=e.colorbar||{};function f(e,t){return r.coerce(c,u,l,e,t)}var d=f("thicknessmode");f("thickness","fraction"===d?30/(n.width-n.margin.l-n.margin.r):30);var p=f("lenmode");f("len","fraction"===p?1:n.height-n.margin.t-n.margin.b),f("x"),f("xanchor"),f("xpad"),f("y"),f("yanchor"),f("ypad"),r.noneOrAll(c,u,["x","y"]),f("outlinecolor"),f("outlinewidth"),f("bordercolor"),f("borderwidth"),f("bgcolor"),i(c,u,f,"linear");var h={outerTicks:!1,font:n.font};s(c,u,f,"linear",h),o(c,u,f,"linear",h),f("title",n._dfltTitle.colorbar),r.coerceFont(f,"titlefont",n.font),f("titleside")}},{"../../lib":696,"../../plot_api/plot_template":734,"../../plots/cartesian/tick_label_defaults":764,"../../plots/cartesian/tick_mark_defaults":765,"../../plots/cartesian/tick_value_defaults":766,"./attributes":571}],575:[function(e,t,n){"use strict";var r=e("d3"),a=e("tinycolor2"),i=e("../../plots/plots"),o=e("../../registry"),s=e("../../plots/cartesian/axes"),l=e("../dragelement"),u=e("../../lib"),c=e("../../lib/extend").extendFlat,f=e("../../lib/setcursor"),d=e("../drawing"),p=e("../color"),h=e("../titles"),m=e("../../lib/svg_text_utils"),v=e("../../constants/alignment"),g=v.LINE_SPACING,y=v.FROM_TL,b=v.FROM_BR,x=e("../../plots/cartesian/axis_defaults"),_=e("../../plots/cartesian/position_defaults"),w=e("../../plots/cartesian/layout_attributes"),T=e("./attributes"),k=e("./constants").cn;t.exports=function(e,t){var n={};for(var v in T)n[v]=null;function C(){var v=e._fullLayout,T=v._size;if("function"==typeof n.fillcolor||"function"==typeof n.line.color||n.fillgradient){var M,A,S=n.zrange||r.extent(("function"==typeof n.fillcolor?n.fillcolor:n.line.color).domain()),O=[],P=[],R="function"==typeof n.line.color?n.line.color:function(){return n.line.color},L="function"==typeof n.fillcolor?n.fillcolor:function(){return n.fillcolor},D=n.levels.end+n.levels.size/100,I=n.levels.size,z=1.001*S[0]-.001*S[1],j=1.001*S[1]-.001*S[0];for(A=0;A<1e5&&(M=n.levels.start+A*I,!(I>0?M>=D:M<=D));A++)M>z&&M<j&&O.push(M);if(n.fillgradient)P=[0];else if("function"==typeof n.fillcolor)if(n.filllevels)for(D=n.filllevels.end+n.filllevels.size/100,I=n.filllevels.size,A=0;A<1e5&&(M=n.filllevels.start+A*I,!(I>0?M>=D:M<=D));A++)M>S[0]&&M<S[1]&&P.push(M);else(P=O.map(function(e){return e-n.levels.size/2})).push(P[P.length-1]+n.levels.size);else n.fillcolor&&"string"==typeof n.fillcolor&&(P=[0]);n.levels.size<0&&(O.reverse(),P.reverse());var N,F=T.h,B=T.w,V=Math.round(n.thickness*("fraction"===n.thicknessmode?B:1)),U=V/T.w,G=Math.round(n.len*("fraction"===n.lenmode?F:1)),H=G/T.h,W=n.xpad/T.w,q=(n.borderwidth+n.outlinewidth)/2,Y=n.ypad/T.h,X=Math.round(n.x*T.w+n.xpad),Z=n.x-U*({middle:.5,right:1}[n.xanchor]||0),$=n.y+H*(({top:-.5,bottom:.5}[n.yanchor]||0)-.5),K=Math.round(T.h*(1-$)),J=K-G,Q={type:"linear",range:S,tickmode:n.tickmode,nticks:n.nticks,tick0:n.tick0,dtick:n.dtick,tickvals:n.tickvals,ticktext:n.ticktext,ticks:n.ticks,ticklen:n.ticklen,tickwidth:n.tickwidth,tickcolor:n.tickcolor,showticklabels:n.showticklabels,tickfont:n.tickfont,tickangle:n.tickangle,tickformat:n.tickformat,exponentformat:n.exponentformat,separatethousands:n.separatethousands,showexponent:n.showexponent,showtickprefix:n.showtickprefix,tickprefix:n.tickprefix,showticksuffix:n.showticksuffix,ticksuffix:n.ticksuffix,title:n.title,titlefont:n.titlefont,showline:!0,anchor:"free",position:1},ee={type:"linear",_id:"y"+t},te={letter:"y",font:v.font,noHover:!0,calendar:v.calendar};if(x(Q,ee,ve,te,v),_(Q,ee,ve,te),ee.position=n.x+W+U,C.axis=ee,-1!==["top","bottom"].indexOf(n.titleside)&&(ee.titleside=n.titleside,ee.titlex=n.x+W,ee.titley=$+("top"===n.titleside?H-Y:Y)),n.line.color&&"auto"===n.tickmode){ee.tickmode="linear",ee.tick0=n.levels.start;var ne=n.levels.size,re=u.constrain((K-J)/50,4,15)+1,ae=(S[1]-S[0])/((n.nticks||re)*ne);if(ae>1){var ie=Math.pow(10,Math.floor(Math.log(ae)/Math.LN10));ne*=ie*u.roundUp(ae/ie,[2,5,10]),(Math.abs(n.levels.start)/n.levels.size+1e-6)%1<2e-6&&(ee.tick0=0)}ee.dtick=ne}ee.domain=[$+Y,$+H-Y],ee.setScale();var oe=u.ensureSingle(v._infolayer,"g",t,function(e){e.classed(k.colorbar,!0).each(function(){var e=r.select(this);e.append("rect").classed(k.cbbg,!0),e.append("g").classed(k.cbfills,!0),e.append("g").classed(k.cblines,!0),e.append("g").classed(k.cbaxis,!0).classed(k.crisp,!0),e.append("g").classed(k.cbtitleunshift,!0).append("g").classed(k.cbtitle,!0),e.append("rect").classed(k.cboutline,!0),e.select(".cbtitle").datum(0)})});oe.attr("transform","translate("+Math.round(T.l)+","+Math.round(T.t)+")");var se=oe.select(".cbtitleunshift").attr("transform","translate(-"+Math.round(T.l)+",-"+Math.round(T.t)+")");ee._axislayer=oe.select(".cbaxis");var le=0;if(-1!==["top","bottom"].indexOf(n.titleside)){var ue,ce=T.l+(n.x+W)*T.w,fe=ee.titlefont.size;ue="top"===n.titleside?(1-($+H-Y))*T.h+T.t+3+.75*fe:(1-($+Y))*T.h+T.t-3-.25*fe,ge(ee._id+"title",{attributes:{x:ce,y:ue,"text-anchor":"start"}})}var de,pe,he,me=u.syncOrAsync([i.previousPromises,function(){if(-1!==["top","bottom"].indexOf(n.titleside)){var i=oe.select(".cbtitle"),o=i.select("text"),l=[-n.outlinewidth/2,n.outlinewidth/2],c=i.select(".h"+ee._id+"title-math-group").node(),f=15.6;if(o.node()&&(f=parseInt(o.node().style.fontSize,10)*g),c?(le=d.bBox(c).height)>f&&(l[1]-=(le-f)/2):o.node()&&!o.classed(k.jsPlaceholder)&&(le=d.bBox(o.node()).height),le){if(le+=5,"top"===n.titleside)ee.domain[1]-=le/T.h,l[1]*=-1;else{ee.domain[0]+=le/T.h;var p=m.lineCount(o);l[1]+=(1-p)*f}i.attr("transform","translate("+l+")"),ee.setScale()}}oe.selectAll(".cbfills,.cblines").attr("transform","translate(0,"+Math.round(T.h*(1-ee.domain[1]))+")"),ee._axislayer.attr("transform","translate(0,"+Math.round(-T.t)+")");var h=oe.select(".cbfills").selectAll("rect.cbfill").data(P);h.enter().append("rect").classed(k.cbfill,!0).style("stroke","none"),h.exit().remove();var y=S.map(ee.c2p).map(Math.round).sort(function(e,t){return e-t});h.each(function(i,o){var s=[0===o?S[0]:(P[o]+P[o-1])/2,o===P.length-1?S[1]:(P[o]+P[o+1])/2].map(ee.c2p).map(Math.round);s[1]=u.constrain(s[1]+(s[1]>s[0])?1:-1,y[0],y[1]);var l=r.select(this).attr({x:X,width:Math.max(V,2),y:r.min(s),height:Math.max(r.max(s)-r.min(s),2)});if(n.fillgradient)d.gradient(l,e,t,"vertical",n.fillgradient,"fill");else{var c=L(i).replace("e-","");l.attr("fill",a(c).toHexString())}});var b=oe.select(".cblines").selectAll("path.cbline").data(n.line.color&&n.line.width?O:[]);return b.enter().append("path").classed(k.cbline,!0),b.exit().remove(),b.each(function(e){r.select(this).attr("d","M"+X+","+(Math.round(ee.c2p(e))+n.line.width/2%1)+"h"+V).call(d.lineGroupStyle,n.line.width,R(e),n.line.dash)}),ee._axislayer.selectAll("g."+ee._id+"tick,path").remove(),ee._pos=X+V+(n.outlinewidth||0)/2-("outside"===n.ticks?1:0),ee.side="right",u.syncOrAsync([function(){return s.doTicksSingle(e,ee,!0)},function(){if(-1===["top","bottom"].indexOf(n.titleside)){var t=ee.titlefont.size,a=ee._offset+ee._length/2,i=T.l+(ee.position||0)*T.w+("right"===ee.side?10+t*(ee.showticklabels?1:.5):-10-t*(ee.showticklabels?.5:0));ge("h"+ee._id+"title",{avoid:{selection:r.select(e).selectAll("g."+ee._id+"tick"),side:n.titleside,offsetLeft:T.l,offsetTop:0,maxShift:v.width},attributes:{x:i,y:a,"text-anchor":"middle"},transform:{rotate:"-90",offset:0}})}}])},i.previousPromises,function(){var r=V+n.outlinewidth/2+d.bBox(ee._axislayer.node()).width;if((N=se.select("text")).node()&&!N.classed(k.jsPlaceholder)){var a,o=se.select(".h"+ee._id+"title-math-group").node();a=o&&-1!==["top","bottom"].indexOf(n.titleside)?d.bBox(o).width:d.bBox(se.node()).right-X-T.l,r=Math.max(r,a)}var s=2*n.xpad+r+n.borderwidth+n.outlinewidth/2,l=K-J;oe.select(".cbbg").attr({x:X-n.xpad-(n.borderwidth+n.outlinewidth)/2,y:J-q,width:Math.max(s,2),height:Math.max(l+2*q,2)}).call(p.fill,n.bgcolor).call(p.stroke,n.bordercolor).style({"stroke-width":n.borderwidth}),oe.selectAll(".cboutline").attr({x:X,y:J+n.ypad+("top"===n.titleside?le:0),width:Math.max(V,2),height:Math.max(l-2*n.ypad-le,2)}).call(p.stroke,n.outlinecolor).style({fill:"None","stroke-width":n.outlinewidth});var u=({center:.5,right:1}[n.xanchor]||0)*s;oe.attr("transform","translate("+(T.l-u)+","+T.t+")");var c={},f=y[n.yanchor],h=b[n.yanchor];"pixels"===n.lenmode?(c.y=n.y,c.t=l*f,c.b=l*h):(c.t=c.b=0,c.yt=n.y+n.len*f,c.yb=n.y-n.len*h);var m=y[n.xanchor],v=b[n.xanchor];if("pixels"===n.thicknessmode)c.x=n.x,c.l=s*m,c.r=s*v;else{var g=s-V;c.l=g*m,c.r=g*v,c.xl=n.x-n.thickness*m,c.xr=n.x+n.thickness*v}i.autoMargin(e,t,c)}],e);return me&&me.then&&(e._promises||[]).push(me),e._context.edits.colorbarPosition&&l.init({element:oe.node(),gd:e,prepFn:function(){de=oe.attr("transform"),f(oe)},moveFn:function(e,t){oe.attr("transform",de+" translate("+e+","+t+")"),pe=l.align(Z+e/T.w,U,0,1,n.xanchor),he=l.align($-t/T.h,H,0,1,n.yanchor);var r=l.getCursor(pe,he,n.xanchor,n.yanchor);f(oe,r)},doneFn:function(){f(oe),void 0!==pe&&void 0!==he&&o.call("restyle",e,{"colorbar.x":pe,"colorbar.y":he},E().index)}}),me}function ve(e,t){return u.coerce(Q,ee,w,e,t)}function ge(t,n){var r=E(),a="colorbar.title",i=r._module.colorbar.container;i&&(a=i+"."+a);var o={propContainer:ee,propName:a,traceIndex:r.index,placeholder:v._dfltTitle.colorbar,containerGroup:oe.select(".cbtitle")},s="h"===t.charAt(0)?t.substr(1):"h"+t;oe.selectAll("."+s+",."+s+"-math-group").remove(),h.draw(e,t,c(o,n||{}))}v._infolayer.selectAll("g."+t).remove()}function E(){var n,r,a=t.substr(2);for(n=0;n<e._fullData.length;n++)if((r=e._fullData[n]).uid===a)return r}return n.fillcolor=null,n.line={color:null,width:null,dash:null},n.levels={start:null,end:null,size:null},n.filllevels=null,n.fillgradient=null,n.zrange=null,Object.keys(n).forEach(function(e){C[e]=function(t){return arguments.length?(n[e]=u.isPlainObject(n[e])?u.extendFlat(n[e],t):t,C):n[e]}}),C.options=function(e){for(var t in e)"function"==typeof C[t]&&C[t](e[t]);return C},C._opts=n,C}},{"../../constants/alignment":668,"../../lib":696,"../../lib/extend":685,"../../lib/setcursor":716,"../../lib/svg_text_utils":720,"../../plots/cartesian/axes":744,"../../plots/cartesian/axis_defaults":746,"../../plots/cartesian/layout_attributes":757,"../../plots/cartesian/position_defaults":760,"../../plots/plots":808,"../../registry":827,"../color":570,"../dragelement":592,"../drawing":595,"../titles":661,"./attributes":571,"./constants":573,d3:148,tinycolor2:514}],576:[function(e,t,n){"use strict";var r=e("../../lib");t.exports=function(e){return r.isPlainObject(e.colorbar)}},{"../../lib":696}],577:[function(e,t,n){"use strict";var r=e("./scales.js");function a(e){return"`"+e+"`"}Object.keys(r),t.exports=function(e,t){e=e||"";var n,i=(t=t||{}).cLetter||"c",o=("onlyIfNumerical"in t?t.onlyIfNumerical:Boolean(e),"noScale"in t?t.noScale:"marker.line"===e),s="showScaleDflt"in t?t.showScaleDflt:"z"===i,l="string"==typeof t.colorscaleDflt?r[t.colorscaleDflt]:null,u=t.editTypeOverride||"",c=e?e+".":"";"colorAttr"in t?(n=t.colorAttr,t.colorAttr):a(c+(n={z:"z",c:"color"}[i]));var f=i+"auto",d=i+"min",p=i+"max",h=(a(c+d),a(c+p),{});h[d]=h[p]=void 0;var m={};m[f]=!1;var v={};return"color"===n&&(v.color={valType:"color",arrayOk:!0,editType:u||"style"}),v[f]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:h},v[d]={valType:"number",dflt:null,editType:u||"plot",impliedEdits:m},v[p]={valType:"number",dflt:null,editType:u||"plot",impliedEdits:m},v.colorscale={valType:"colorscale",editType:"calc",dflt:l,impliedEdits:{autocolorscale:!1}},v.autocolorscale={valType:"boolean",dflt:!1!==t.autoColorDflt,editType:"calc",impliedEdits:{colorscale:void 0}},v.reversescale={valType:"boolean",dflt:!1,editType:"calc"},o||(v.showscale={valType:"boolean",dflt:s,editType:"calc"}),v}},{"./scales.js":589}],578:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("./scales"),i=e("./flip_scale");t.exports=function(e,t,n,o){var s=e,l=e._input,u=e._fullInput,c=e.updateStyle;function f(t,r,a){void 0===a&&(a=r),c?c(e._input,n?n+"."+t:t,r):l[t]=r,s[t]=a,u&&e!==e._fullInput&&(c?c(e._fullInput,n?n+"."+t:t,a):u[t]=a)}n&&(s=r.nestedProperty(s,n).get(),l=r.nestedProperty(l,n).get(),u=r.nestedProperty(u,n).get()||{});var d=o+"auto",p=o+"min",h=o+"max",m=s[d],v=s[p],g=s[h],y=s.colorscale;!1===m&&void 0!==v||(v=r.aggNums(Math.min,null,t)),!1===m&&void 0!==g||(g=r.aggNums(Math.max,null,t)),v===g&&(v-=.5,g+=.5),f(p,v),f(h,g),f(d,!1!==m||void 0===v&&void 0===g),s.autocolorscale&&(f("colorscale",y=v*g<0?a.RdBu:v>=0?a.Reds:a.Blues,s.reversescale?i(y):y),l.autocolorscale||f("autocolorscale",!1))}},{"../../lib":696,"./flip_scale":582,"./scales":589}],579:[function(e,t,n){"use strict";var r=e("./scales");t.exports=r.RdBu},{"./scales":589}],580:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),a=e("../../lib"),i=e("../colorbar/has_colorbar"),o=e("../colorbar/defaults"),s=e("./is_valid_scale"),l=e("./flip_scale");t.exports=function(e,t,n,u,c){var f,d=c.prefix,p=c.cLetter,h=d.slice(0,d.length-1),m=d?a.nestedProperty(e,h).get()||{}:e,v=d?a.nestedProperty(t,h).get()||{}:t,g=m[p+"min"],y=m[p+"max"],b=m.colorscale,x=r(g)&&r(y)&&g<y;u(d+p+"auto",!x),u(d+p+"min"),u(d+p+"max"),void 0!==b&&(f=!s(b)),u(d+"autocolorscale",f);var _=u(d+"colorscale"),w=u(d+"reversescale");if(w&&(v.colorscale=l(_)),"marker.line."!==d&&!c.noScale){var T;d&&(T=i(m));var k=u(d+"showscale",T);k&&o(m,v,n)}}},{"../../lib":696,"../colorbar/defaults":574,"../colorbar/has_colorbar":576,"./flip_scale":582,"./is_valid_scale":586,"fast-isnumeric":214}],581:[function(e,t,n){"use strict";t.exports=function(e,t,n){for(var r=e.length,a=new Array(r),i=new Array(r),o=0;o<r;o++){var s=e[o];a[o]=t+s[0]*(n-t),i[o]=s[1]}return{domain:a,range:i}}},{}],582:[function(e,t,n){"use strict";t.exports=function(e){for(var t,n=e.length,r=new Array(n),a=n-1,i=0;a>=0;a--,i++)t=e[a],r[i]=[1-t[0],t[1]];return r}},{}],583:[function(e,t,n){"use strict";var r=e("./scales"),a=e("./default_scale"),i=e("./is_valid_scale_array");t.exports=function(e,t){if(t||(t=a),!e)return t;function n(){try{e=r[e]||JSON.parse(e)}catch(n){e=t}}return"string"==typeof e&&(n(),"string"==typeof e&&n()),i(e)?e:t}},{"./default_scale":579,"./is_valid_scale_array":587,"./scales":589}],584:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),a=e("../../lib"),i=e("./is_valid_scale");t.exports=function(e,t){var n=t?a.nestedProperty(e,t).get()||{}:e,o=n.color,s=!1;if(a.isArrayOrTypedArray(o))for(var l=0;l<o.length;l++)if(r(o[l])){s=!0;break}return a.isPlainObject(n)&&(s||!0===n.showscale||r(n.cmin)&&r(n.cmax)||i(n.colorscale)||a.isPlainObject(n.colorbar))}},{"../../lib":696,"./is_valid_scale":586,"fast-isnumeric":214}],585:[function(e,t,n){"use strict";n.scales=e("./scales"),n.defaultScale=e("./default_scale"),n.attributes=e("./attributes"),n.handleDefaults=e("./defaults"),n.calc=e("./calc"),n.hasColorscale=e("./has_colorscale"),n.isValidScale=e("./is_valid_scale"),n.getScale=e("./get_scale"),n.flipScale=e("./flip_scale"),n.extractScale=e("./extract_scale"),n.makeColorScaleFunc=e("./make_color_scale_func")},{"./attributes":577,"./calc":578,"./default_scale":579,"./defaults":580,"./extract_scale":581,"./flip_scale":582,"./get_scale":583,"./has_colorscale":584,"./is_valid_scale":586,"./make_color_scale_func":588,"./scales":589}],586:[function(e,t,n){"use strict";var r=e("./scales"),a=e("./is_valid_scale_array");t.exports=function(e){return void 0!==r[e]||a(e)}},{"./is_valid_scale_array":587,"./scales":589}],587:[function(e,t,n){"use strict";var r=e("tinycolor2");t.exports=function(e){var t=0;if(!Array.isArray(e)||e.length<2)return!1;if(!e[0]||!e[e.length-1])return!1;if(0!=+e[0][0]||1!=+e[e.length-1][0])return!1;for(var n=0;n<e.length;n++){var a=e[n];if(2!==a.length||+a[0]<t||!r(a[1]).isValid())return!1;t=+a[0]}return!0}},{tinycolor2:514}],588:[function(e,t,n){"use strict";var r=e("d3"),a=e("tinycolor2"),i=e("fast-isnumeric"),o=e("../color");function s(e){var t={r:e[0],g:e[1],b:e[2],a:e[3]};return a(t).toRgbString()}t.exports=function(e,t){t=t||{};for(var n=e.domain,l=e.range,u=l.length,c=new Array(u),f=0;f<u;f++){var d=a(l[f]).toRgb();c[f]=[d.r,d.g,d.b,d.a]}var p,h=r.scale.linear().domain(n).range(c).clamp(!0),m=t.noNumericCheck,v=t.returnArray;return(p=m&&v?h:m?function(e){return s(h(e))}:v?function(e){return i(e)?h(e):a(e).isValid()?e:o.defaultLine}:function(e){return i(e)?s(h(e)):a(e).isValid()?e:o.defaultLine}).domain=h.domain,p.range=function(){return l},p}},{"../color":570,d3:148,"fast-isnumeric":214,tinycolor2:514}],589:[function(e,t,n){"use strict";t.exports={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]}},{}],590:[function(e,t,n){"use strict";t.exports=function(e,t,n,r,a){var i=(e-n)/(r-n),o=i+t/(r-n),s=(i+o)/2;return"left"===a||"bottom"===a?i:"center"===a||"middle"===a?s:"right"===a||"top"===a?o:i<2/3-s?i:o>4/3-s?o:s}},{}],591:[function(e,t,n){"use strict";var r=e("../../lib"),a=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];t.exports=function(e,t,n,i){return e="left"===n?0:"center"===n?1:"right"===n?2:r.constrain(Math.floor(3*e),0,2),t="bottom"===i?0:"middle"===i?1:"top"===i?2:r.constrain(Math.floor(3*t),0,2),a[t][e]}},{"../../lib":696}],592:[function(e,t,n){"use strict";var r=e("mouse-event-offset"),a=e("has-hover"),i=e("has-passive-events"),o=e("../../registry"),s=e("../../lib"),l=e("../../plots/cartesian/constants"),u=e("../../constants/interactions"),c=t.exports={};c.align=e("./align"),c.getCursor=e("./cursor");var f=e("./unhover");function d(){var e=document.createElement("div");e.className="dragcover";var t=e.style;return t.position="fixed",t.left=0,t.right=0,t.top=0,t.bottom=0,t.zIndex=999999999,t.background="none",document.body.appendChild(e),e}function p(e){return r(e.changedTouches?e.changedTouches[0]:e,document.body)}c.unhover=f.wrapped,c.unhoverRaw=f.raw,c.init=function(e){var t,n,r,f,h,m,v,g,y=e.gd,b=1,x=u.DBLCLICKDELAY,_=e.element;y._mouseDownTime||(y._mouseDownTime=0),_.style.pointerEvents="all",_.onmousedown=T,i?(_._ontouchstart&&_.removeEventListener("touchstart",_._ontouchstart),_._ontouchstart=T,_.addEventListener("touchstart",T,{passive:!1})):_.ontouchstart=T;var w=e.clampFn||function(e,t,n){return Math.abs(e)<n&&(e=0),Math.abs(t)<n&&(t=0),[e,t]};function T(i){i.preventDefault(),y._dragged=!1,y._dragging=!0;var o=p(i);t=o[0],n=o[1],v=i.target,m=i,g=2===i.buttons||i.ctrlKey,void 0===i.clientX&&void 0===i.clientY&&(i.clientX=t,i.clientY=n),(r=(new Date).getTime())-y._mouseDownTime<x?b+=1:(b=1,y._mouseDownTime=r),e.prepFn&&e.prepFn(i,t,n),a&&!g?(h=d()).style.cursor=window.getComputedStyle(_).cursor:a||(h=document,f=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(_).cursor),document.addEventListener("mousemove",k),document.addEventListener("mouseup",C),document.addEventListener("touchmove",k),document.addEventListener("touchend",C)}function k(r){r.preventDefault();var a=p(r),i=e.minDrag||l.MINDRAG,o=w(a[0]-t,a[1]-n,i),s=o[0],u=o[1];(s||u)&&(y._dragged=!0,c.unhover(y)),y._dragged&&e.moveFn&&!g&&e.moveFn(s,u)}function C(t){if(document.removeEventListener("mousemove",k),document.removeEventListener("mouseup",C),document.removeEventListener("touchmove",k),document.removeEventListener("touchend",C),t.preventDefault(),a?s.removeElement(h):f&&(h.documentElement.style.cursor=f,f=null),y._dragging){if(y._dragging=!1,(new Date).getTime()-y._mouseDownTime>x&&(b=Math.max(b-1,1)),y._dragged)e.doneFn&&e.doneFn();else if(e.clickFn&&e.clickFn(b,m),!g){var n;try{n=new MouseEvent("click",t)}catch(e){var r=p(t);(n=document.createEvent("MouseEvents")).initMouseEvent("click",t.bubbles,t.cancelable,t.view,t.detail,t.screenX,t.screenY,r[0],r[1],t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,t.relatedTarget)}v.dispatchEvent(n)}!function(e){e._dragging=!1,e._replotPending&&o.call("plot",e)}(y),y._dragged=!1}else y._dragged=!1}},c.coverSlip=d},{"../../constants/interactions":672,"../../lib":696,"../../plots/cartesian/constants":750,"../../registry":827,"./align":590,"./cursor":591,"./unhover":593,"has-hover":393,"has-passive-events":394,"mouse-event-offset":419}],593:[function(e,t,n){"use strict";var r=e("../../lib/events"),a=e("../../lib/throttle"),i=e("../../lib/get_graph_div"),o=e("../fx/constants"),s=t.exports={};s.wrapped=function(e,t,n){(e=i(e))._fullLayout&&a.clear(e._fullLayout._uid+o.HOVERID),s.raw(e,t,n)},s.raw=function(e,t){var n=e._fullLayout,a=e._hoverdata;t||(t={}),t.target&&!1===r.triggerHandler(e,"plotly_beforehover",t)||(n._hoverlayer.selectAll("g").remove(),n._hoverlayer.selectAll("line").remove(),n._hoverlayer.selectAll("circle").remove(),e._hoverdata=void 0,t.target&&a&&e.emit("plotly_unhover",{event:t,points:a}))}},{"../../lib/events":684,"../../lib/get_graph_div":691,"../../lib/throttle":721,"../fx/constants":607}],594:[function(e,t,n){"use strict";n.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"}},{}],595:[function(e,t,n){"use strict";var r=e("d3"),a=e("fast-isnumeric"),i=e("tinycolor2"),o=e("../../registry"),s=e("../color"),l=e("../colorscale"),u=e("../../lib"),c=e("../../lib/svg_text_utils"),f=e("../../constants/xmlns_namespaces"),d=e("../../constants/alignment"),p=d.LINE_SPACING,h=e("../../constants/interactions").DESELECTDIM,m=e("../../traces/scatter/subtypes"),v=e("../../traces/scatter/make_bubble_size_func"),g=t.exports={};g.font=function(e,t,n,r){u.isPlainObject(t)&&(r=t.color,n=t.size,t=t.family),t&&e.style("font-family",t),n+1&&e.style("font-size",n+"px"),r&&e.call(s.fill,r)},g.setPosition=function(e,t,n){e.attr("x",t).attr("y",n)},g.setSize=function(e,t,n){e.attr("width",t).attr("height",n)},g.setRect=function(e,t,n,r,a){e.call(g.setPosition,t,n).call(g.setSize,r,a)},g.translatePoint=function(e,t,n,r){var i=n.c2p(e.x),o=r.c2p(e.y);return!!(a(i)&&a(o)&&t.node())&&("text"===t.node().nodeName?t.attr("x",i).attr("y",o):t.attr("transform","translate("+i+","+o+")"),!0)},g.translatePoints=function(e,t,n){e.each(function(e){var a=r.select(this);g.translatePoint(e,a,t,n)})},g.hideOutsideRangePoint=function(e,t,n,r,a,i){t.attr("display",n.isPtWithinRange(e,a)&&r.isPtWithinRange(e,i)?null:"none")},g.hideOutsideRangePoints=function(e,t){if(t._hasClipOnAxisFalse){var n=t.xaxis,a=t.yaxis;e.each(function(t){var i=t[0].trace,o=i.xcalendar,s=i.ycalendar,l="bar"===i.type?".bartext":".point,.textpoint";e.selectAll(l).each(function(e){g.hideOutsideRangePoint(e,r.select(this),n,a,o,s)})})}},g.crispRound=function(e,t,n){return t&&a(t)?e._context.staticPlot?t:t<1?1:Math.round(t):n||0},g.singleLineStyle=function(e,t,n,r,a){t.style("fill","none");var i=(((e||[])[0]||{}).trace||{}).line||{},o=n||i.width||0,l=a||i.dash||"";s.stroke(t,r||i.color),g.dashLine(t,l,o)},g.lineGroupStyle=function(e,t,n,a){e.style("fill","none").each(function(e){var i=(((e||[])[0]||{}).trace||{}).line||{},o=t||i.width||0,l=a||i.dash||"";r.select(this).call(s.stroke,n||i.color).call(g.dashLine,l,o)})},g.dashLine=function(e,t,n){n=+n||0,t=g.dashStyle(t,n),e.style({"stroke-dasharray":t,"stroke-width":n+"px"})},g.dashStyle=function(e,t){t=+t||1;var n=Math.max(t,3);return"solid"===e?e="":"dot"===e?e=n+"px,"+n+"px":"dash"===e?e=3*n+"px,"+3*n+"px":"longdash"===e?e=5*n+"px,"+5*n+"px":"dashdot"===e?e=3*n+"px,"+n+"px,"+n+"px,"+n+"px":"longdashdot"===e&&(e=5*n+"px,"+2*n+"px,"+n+"px,"+2*n+"px"),e},g.singleFillStyle=function(e){var t=r.select(e.node()),n=t.data(),a=(((n[0]||[])[0]||{}).trace||{}).fillcolor;a&&e.call(s.fill,a)},g.fillGroupStyle=function(e){e.style("stroke-width",0).each(function(e){var t=r.select(this);t.call(s.fill,e[0].trace.fillcolor)})};var y=e("./symbol_defs");g.symbolNames=[],g.symbolFuncs=[],g.symbolNeedLines={},g.symbolNoDot={},g.symbolNoFill={},g.symbolList=[],Object.keys(y).forEach(function(e){var t=y[e];g.symbolList=g.symbolList.concat([t.n,e,t.n+100,e+"-open"]),g.symbolNames[t.n]=e,g.symbolFuncs[t.n]=t.f,t.needLine&&(g.symbolNeedLines[t.n]=!0),t.noDot?g.symbolNoDot[t.n]=!0:g.symbolList=g.symbolList.concat([t.n+200,e+"-dot",t.n+300,e+"-open-dot"]),t.noFill&&(g.symbolNoFill[t.n]=!0)});var b=g.symbolNames.length,x="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";function _(e,t){var n=e%100;return g.symbolFuncs[n](t)+(e>=200?x:"")}g.symbolNumber=function(e){if("string"==typeof e){var t=0;e.indexOf("-open")>0&&(t=100,e=e.replace("-open","")),e.indexOf("-dot")>0&&(t+=200,e=e.replace("-dot","")),(e=g.symbolNames.indexOf(e))>=0&&(e+=t)}return e%100>=b||e>=400?0:Math.floor(Math.max(e,0))};var w={x1:1,x2:0,y1:0,y2:0},T={x1:0,x2:0,y1:1,y2:0},k=r.format("~.1f"),C={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:w},horizontalreversed:{node:"linearGradient",attrs:w,reversed:!0},vertical:{node:"linearGradient",attrs:T},verticalreversed:{node:"linearGradient",attrs:T,reversed:!0}};g.gradient=function(e,t,n,a,o,l){for(var c=o.length,f=C[a],d=new Array(c),p=0;p<c;p++)f.reversed?d[c-1-p]=[k(100*(1-o[p][0])),o[p][1]]:d[p]=[k(100*o[p][0]),o[p][1]];var h="g"+t._fullLayout._uid+"-"+n,m=t._fullLayout._defs.select(".gradients").selectAll("#"+h).data([a+d.join(";")],u.identity);m.exit().remove(),m.enter().append(f.node).each(function(){var e=r.select(this);f.attrs&&e.attr(f.attrs),e.attr("id",h);var t=e.selectAll("stop").data(d);t.exit().remove(),t.enter().append("stop"),t.each(function(e){var t=i(e[1]);r.select(this).attr({offset:e[0]+"%","stop-color":s.tinyRGB(t),"stop-opacity":t.getAlpha()})})}),e.style(l,"url(#"+h+")").style(l+"-opacity",null)},g.initGradients=function(e){var t=u.ensureSingle(e._fullLayout._defs,"g","gradients");t.selectAll("linearGradient,radialGradient").remove()},g.pointStyle=function(e,t,n){if(e.size()){var a=g.makePointStyleFns(t);e.each(function(e){g.singlePointStyle(e,r.select(this),t,a,n)})}},g.singlePointStyle=function(e,t,n,r,a){var i=n.marker,o=i.line;if(t.style("opacity",r.selectedOpacityFn?r.selectedOpacityFn(e):void 0===e.mo?i.opacity:e.mo),r.ms2mrc){var l;l="various"===e.ms||"various"===i.size?3:r.ms2mrc(e.ms),e.mrc=l,r.selectedSizeFn&&(l=e.mrc=r.selectedSizeFn(e));var c=g.symbolNumber(e.mx||i.symbol)||0;e.om=c%200>=100,t.attr("d",_(c,l))}var f,d,p,h=!1;if(e.so)p=o.outlierwidth,d=o.outliercolor,f=i.outliercolor;else{var m=(o||{}).width;p=(e.mlw+1||m+1||(e.trace?(e.trace.marker.line||{}).width:0)+1)-1||0,d="mlc"in e?e.mlcc=r.lineScale(e.mlc):u.isArrayOrTypedArray(o.color)?s.defaultLine:o.color,u.isArrayOrTypedArray(i.color)&&(f=s.defaultLine,h=!0),f="mc"in e?e.mcc=r.markerScale(e.mc):i.color||"rgba(0,0,0,0)",r.selectedColorFn&&(f=r.selectedColorFn(e))}if(e.om)t.call(s.stroke,f).style({"stroke-width":(p||1)+"px",fill:"none"});else{t.style("stroke-width",p+"px");var v=i.gradient,y=e.mgt;if(y?h=!0:y=v&&v.type,Array.isArray(y)&&(y=y[0],C[y]||(y=0)),y&&"none"!==y){var b=e.mgc;b?h=!0:b=v.color;var x=n.uid;h&&(x+="-"+e.i),g.gradient(t,a,x,y,[[0,b],[1,f]],"fill")}else s.fill(t,f);p&&s.stroke(t,d)}},g.makePointStyleFns=function(e){var t={},n=e.marker;return t.markerScale=g.tryColorscale(n,""),t.lineScale=g.tryColorscale(n,"line"),o.traceIs(e,"symbols")&&(t.ms2mrc=m.isBubble(e)?v(e):function(){return(n.size||6)/2}),e.selectedpoints&&u.extendFlat(t,g.makeSelectedPointStyleFns(e)),t},g.makeSelectedPointStyleFns=function(e){var t={},n=e.selected||{},r=e.unselected||{},a=e.marker||{},i=n.marker||{},s=r.marker||{},l=a.opacity,c=i.opacity,f=s.opacity,d=void 0!==c,p=void 0!==f;(u.isArrayOrTypedArray(l)||d||p)&&(t.selectedOpacityFn=function(e){var t=void 0===e.mo?a.opacity:e.mo;return e.selected?d?c:t:p?f:h*t});var m=a.color,v=i.color,g=s.color;(v||g)&&(t.selectedColorFn=function(e){var t=e.mcc||m;return e.selected?v||t:g||t});var y=a.size,b=i.size,x=s.size,_=void 0!==b,w=void 0!==x;return o.traceIs(e,"symbols")&&(_||w)&&(t.selectedSizeFn=function(e){var t=e.mrc||y/2;return e.selected?_?b/2:t:w?x/2:t}),t},g.makeSelectedTextStyleFns=function(e){var t={},n=e.selected||{},r=e.unselected||{},a=e.textfont||{},i=n.textfont||{},o=r.textfont||{},l=a.color,u=i.color,c=o.color;return t.selectedTextColorFn=function(e){var t=e.tc||l;return e.selected?u||t:c||(u?t:s.addOpacity(t,h))},t},g.selectedPointStyle=function(e,t){if(e.size()&&t.selectedpoints){var n=g.makeSelectedPointStyleFns(t),a=t.marker||{},i=[];n.selectedOpacityFn&&i.push(function(e,t){e.style("opacity",n.selectedOpacityFn(t))}),n.selectedColorFn&&i.push(function(e,t){s.fill(e,n.selectedColorFn(t))}),n.selectedSizeFn&&i.push(function(e,t){var r=t.mx||a.symbol||0,i=n.selectedSizeFn(t);e.attr("d",_(g.symbolNumber(r),i)),t.mrc2=i}),i.length&&e.each(function(e){for(var t=r.select(this),n=0;n<i.length;n++)i[n](t,e)})}},g.tryColorscale=function(e,t){var n=t?u.nestedProperty(e,t).get():e;if(n){var r=n.colorscale,a=n.color;if(r&&u.isArrayOrTypedArray(a))return l.makeColorScaleFunc(l.extractScale(r,n.cmin,n.cmax))}return u.identity};var E={start:1,end:-1,middle:0,bottom:1,top:-1};function M(e,t,n,a){var i=r.select(e.node().parentNode),o=-1!==t.indexOf("top")?"top":-1!==t.indexOf("bottom")?"bottom":"middle",s=-1!==t.indexOf("left")?"end":-1!==t.indexOf("right")?"start":"middle",l=a?a/.8+1:0,u=(c.lineCount(e)-1)*p+1,f=E[s]*l,d=.75*n+E[o]*l+(E[o]-1)*u*n/2;e.attr("text-anchor",s),i.attr("transform","translate("+f+","+d+")")}function A(e,t){var n=e.ts||t.textfont.size;return a(n)&&n>0?n:0}g.textPointStyle=function(e,t,n){if(e.size()){var a;if(t.selectedpoints){var i=g.makeSelectedTextStyleFns(t);a=i.selectedTextColorFn}e.each(function(e){var i=r.select(this),o=u.extractOption(e,t,"tx","text");if(o||0===o){var s=e.tp||t.textposition,l=A(e,t),f=a?a(e):e.tc||t.textfont.color;i.call(g.font,e.tf||t.textfont.family,l,f).text(o).call(c.convertToTspans,n).call(M,s,l,e.mrc)}else i.remove()})}},g.selectedTextStyle=function(e,t){if(e.size()&&t.selectedpoints){var n=g.makeSelectedTextStyleFns(t);e.each(function(e){var a=r.select(this),i=n.selectedTextColorFn(e),o=e.tp||t.textposition,l=A(e,t);s.fill(a,i),M(a,o,l,e.mrc2||e.mrc)})}};var S=.5;function O(e,t,n,a){var i=e[0]-t[0],o=e[1]-t[1],s=n[0]-t[0],l=n[1]-t[1],u=Math.pow(i*i+o*o,S/2),c=Math.pow(s*s+l*l,S/2),f=(c*c*i-u*u*s)*a,d=(c*c*o-u*u*l)*a,p=3*c*(u+c),h=3*u*(u+c);return[[r.round(t[0]+(p&&f/p),2),r.round(t[1]+(p&&d/p),2)],[r.round(t[0]-(h&&f/h),2),r.round(t[1]-(h&&d/h),2)]]}g.smoothopen=function(e,t){if(e.length<3)return"M"+e.join("L");var n,r="M"+e[0],a=[];for(n=1;n<e.length-1;n++)a.push(O(e[n-1],e[n],e[n+1],t));for(r+="Q"+a[0][0]+" "+e[1],n=2;n<e.length-1;n++)r+="C"+a[n-2][1]+" "+a[n-1][0]+" "+e[n];return r+="Q"+a[e.length-3][1]+" "+e[e.length-1]},g.smoothclosed=function(e,t){if(e.length<3)return"M"+e.join("L")+"Z";var n,r="M"+e[0],a=e.length-1,i=[O(e[a],e[0],e[1],t)];for(n=1;n<a;n++)i.push(O(e[n-1],e[n],e[n+1],t));for(i.push(O(e[a-1],e[a],e[0],t)),n=1;n<=a;n++)r+="C"+i[n-1][1]+" "+i[n][0]+" "+e[n];return r+="C"+i[a][1]+" "+i[0][0]+" "+e[0]+"Z"};var P={hv:function(e,t){return"H"+r.round(t[0],2)+"V"+r.round(t[1],2)},vh:function(e,t){return"V"+r.round(t[1],2)+"H"+r.round(t[0],2)},hvh:function(e,t){return"H"+r.round((e[0]+t[0])/2,2)+"V"+r.round(t[1],2)+"H"+r.round(t[0],2)},vhv:function(e,t){return"V"+r.round((e[1]+t[1])/2,2)+"H"+r.round(t[0],2)+"V"+r.round(t[1],2)}},R=function(e,t){return"L"+r.round(t[0],2)+","+r.round(t[1],2)};g.steps=function(e){var t=P[e]||R;return function(e){for(var n="M"+r.round(e[0][0],2)+","+r.round(e[0][1],2),a=1;a<e.length;a++)n+=t(e[a-1],e[a]);return n}},g.makeTester=function(){var e=u.ensureSingleById(r.select("body"),"svg","js-plotly-tester",function(e){e.attr(f.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),t=u.ensureSingle(e,"path","js-reference-point",function(e){e.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});g.tester=e,g.testref=t},g.savedBBoxes={};var L=0;function D(e){var t=e.getAttribute("data-unformatted");if(null!==t)return t+e.getAttribute("data-math")+e.getAttribute("text-anchor")+e.getAttribute("style")}g.bBox=function(e,t,n){var a,i,o;if(n||(n=D(e)),n){if(a=g.savedBBoxes[n])return u.extendFlat({},a)}else if(1===e.childNodes.length){var s=e.childNodes[0];if(n=D(s)){var l=+s.getAttribute("x")||0,f=+s.getAttribute("y")||0,d=s.getAttribute("transform");if(!d){var p=g.bBox(s,!1,n);return l&&(p.left+=l,p.right+=l),f&&(p.top+=f,p.bottom+=f),p}if(n+="~"+l+"~"+f+"~"+d,a=g.savedBBoxes[n])return u.extendFlat({},a)}}t?i=e:(o=g.tester.node(),i=e.cloneNode(!0),o.appendChild(i)),r.select(i).attr("transform",null).call(c.positionText,0,0);var h=i.getBoundingClientRect(),m=g.testref.node().getBoundingClientRect();t||o.removeChild(i);var v={height:h.height,width:h.width,left:h.left-m.left,top:h.top-m.top,right:h.right-m.left,bottom:h.bottom-m.top};return L>=1e4&&(g.savedBBoxes={},L=0),n&&(g.savedBBoxes[n]=v),L++,u.extendFlat({},v)},g.setClipUrl=function(e,t){if(t){if(void 0===g.baseUrl){var n=r.select("base");n.size()&&n.attr("href")?g.baseUrl=window.location.href.split("#")[0]:g.baseUrl=""}e.attr("clip-path","url("+g.baseUrl+"#"+t+")")}else e.attr("clip-path",null)},g.getTranslate=function(e){var t=e.attr?"attr":"getAttribute",n=e[t]("transform")||"",r=n.replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(e,t,n){return[t,n].join(" ")}).split(" ");return{x:+r[0]||0,y:+r[1]||0}},g.setTranslate=function(e,t,n){var r=e.attr?"attr":"getAttribute",a=e.attr?"attr":"setAttribute",i=e[r]("transform")||"";return t=t||0,n=n||0,i=i.replace(/(\btranslate\(.*?\);?)/,"").trim(),i=(i+=" translate("+t+", "+n+")").trim(),e[a]("transform",i),i},g.getScale=function(e){var t=e.attr?"attr":"getAttribute",n=e[t]("transform")||"",r=n.replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(e,t,n){return[t,n].join(" ")}).split(" ");return{x:+r[0]||1,y:+r[1]||1}},g.setScale=function(e,t,n){var r=e.attr?"attr":"getAttribute",a=e.attr?"attr":"setAttribute",i=e[r]("transform")||"";return t=t||1,n=n||1,i=i.replace(/(\bscale\(.*?\);?)/,"").trim(),i=(i+=" scale("+t+", "+n+")").trim(),e[a]("transform",i),i};var I=/\s*sc.*/;g.setPointGroupScale=function(e,t,n){if(t=t||1,n=n||1,e){var r=1===t&&1===n?"":" scale("+t+","+n+")";e.each(function(){var e=(this.getAttribute("transform")||"").replace(I,"");e=(e+=r).trim(),this.setAttribute("transform",e)})}};var z=/translate\([^)]*\)\s*$/;g.setTextPointsScale=function(e,t,n){e&&e.each(function(){var e,a=r.select(this),i=a.select("text");if(i.node()){var o=parseFloat(i.attr("x")||0),s=parseFloat(i.attr("y")||0),l=(a.attr("transform")||"").match(z);e=1===t&&1===n?[]:["translate("+o+","+s+")","scale("+t+","+n+")","translate("+-o+","+-s+")"],l&&e.push(l),a.attr("transform",e.join(" "))}})}},{"../../constants/alignment":668,"../../constants/interactions":672,"../../constants/xmlns_namespaces":674,"../../lib":696,"../../lib/svg_text_utils":720,"../../registry":827,"../../traces/scatter/make_bubble_size_func":1060,"../../traces/scatter/subtypes":1067,"../color":570,"../colorscale":585,"./symbol_defs":596,d3:148,"fast-isnumeric":214,tinycolor2:514}],596:[function(e,t,n){"use strict";var r=e("d3");t.exports={circle:{n:0,f:function(e){var t=r.round(e,2);return"M"+t+",0A"+t+","+t+" 0 1,1 0,-"+t+"A"+t+","+t+" 0 0,1 "+t+",0Z"}},square:{n:1,f:function(e){var t=r.round(e,2);return"M"+t+","+t+"H-"+t+"V-"+t+"H"+t+"Z"}},diamond:{n:2,f:function(e){var t=r.round(1.3*e,2);return"M"+t+",0L0,"+t+"L-"+t+",0L0,-"+t+"Z"}},cross:{n:3,f:function(e){var t=r.round(.4*e,2),n=r.round(1.2*e,2);return"M"+n+","+t+"H"+t+"V"+n+"H-"+t+"V"+t+"H-"+n+"V-"+t+"H-"+t+"V-"+n+"H"+t+"V-"+t+"H"+n+"Z"}},x:{n:4,f:function(e){var t=r.round(.8*e/Math.sqrt(2),2),n="l"+t+","+t,a="l"+t+",-"+t,i="l-"+t+",-"+t,o="l-"+t+","+t;return"M0,"+t+n+a+i+a+i+o+i+o+n+o+n+"Z"}},"triangle-up":{n:5,f:function(e){var t=r.round(2*e/Math.sqrt(3),2),n=r.round(e/2,2),a=r.round(e,2);return"M-"+t+","+n+"H"+t+"L0,-"+a+"Z"}},"triangle-down":{n:6,f:function(e){var t=r.round(2*e/Math.sqrt(3),2),n=r.round(e/2,2),a=r.round(e,2);return"M-"+t+",-"+n+"H"+t+"L0,"+a+"Z"}},"triangle-left":{n:7,f:function(e){var t=r.round(2*e/Math.sqrt(3),2),n=r.round(e/2,2),a=r.round(e,2);return"M"+n+",-"+t+"V"+t+"L-"+a+",0Z"}},"triangle-right":{n:8,f:function(e){var t=r.round(2*e/Math.sqrt(3),2),n=r.round(e/2,2),a=r.round(e,2);return"M-"+n+",-"+t+"V"+t+"L"+a+",0Z"}},"triangle-ne":{n:9,f:function(e){var t=r.round(.6*e,2),n=r.round(1.2*e,2);return"M-"+n+",-"+t+"H"+t+"V"+n+"Z"}},"triangle-se":{n:10,f:function(e){var t=r.round(.6*e,2),n=r.round(1.2*e,2);return"M"+t+",-"+n+"V"+t+"H-"+n+"Z"}},"triangle-sw":{n:11,f:function(e){var t=r.round(.6*e,2),n=r.round(1.2*e,2);return"M"+n+","+t+"H-"+t+"V-"+n+"Z"}},"triangle-nw":{n:12,f:function(e){var t=r.round(.6*e,2),n=r.round(1.2*e,2);return"M-"+t+","+n+"V-"+t+"H"+n+"Z"}},pentagon:{n:13,f:function(e){var t=r.round(.951*e,2),n=r.round(.588*e,2),a=r.round(-e,2),i=r.round(-.309*e,2),o=r.round(.809*e,2);return"M"+t+","+i+"L"+n+","+o+"H-"+n+"L-"+t+","+i+"L0,"+a+"Z"}},hexagon:{n:14,f:function(e){var t=r.round(e,2),n=r.round(e/2,2),a=r.round(e*Math.sqrt(3)/2,2);return"M"+a+",-"+n+"V"+n+"L0,"+t+"L-"+a+","+n+"V-"+n+"L0,-"+t+"Z"}},hexagon2:{n:15,f:function(e){var t=r.round(e,2),n=r.round(e/2,2),a=r.round(e*Math.sqrt(3)/2,2);return"M-"+n+","+a+"H"+n+"L"+t+",0L"+n+",-"+a+"H-"+n+"L-"+t+",0Z"}},octagon:{n:16,f:function(e){var t=r.round(.924*e,2),n=r.round(.383*e,2);return"M-"+n+",-"+t+"H"+n+"L"+t+",-"+n+"V"+n+"L"+n+","+t+"H-"+n+"L-"+t+","+n+"V-"+n+"Z"}},star:{n:17,f:function(e){var t=1.4*e,n=r.round(.225*t,2),a=r.round(.951*t,2),i=r.round(.363*t,2),o=r.round(.588*t,2),s=r.round(-t,2),l=r.round(-.309*t,2),u=r.round(.118*t,2),c=r.round(.809*t,2),f=r.round(.382*t,2);return"M"+n+","+l+"H"+a+"L"+i+","+u+"L"+o+","+c+"L0,"+f+"L-"+o+","+c+"L-"+i+","+u+"L-"+a+","+l+"H-"+n+"L0,"+s+"Z"}},hexagram:{n:18,f:function(e){var t=r.round(.66*e,2),n=r.round(.38*e,2),a=r.round(.76*e,2);return"M-"+a+",0l-"+n+",-"+t+"h"+a+"l"+n+",-"+t+"l"+n+","+t+"h"+a+"l-"+n+","+t+"l"+n+","+t+"h-"+a+"l-"+n+","+t+"l-"+n+",-"+t+"h-"+a+"Z"}},"star-triangle-up":{n:19,f:function(e){var t=r.round(e*Math.sqrt(3)*.8,2),n=r.round(.8*e,2),a=r.round(1.6*e,2),i=r.round(4*e,2),o="A "+i+","+i+" 0 0 1 ";return"M-"+t+","+n+o+t+","+n+o+"0,-"+a+o+"-"+t+","+n+"Z"}},"star-triangle-down":{n:20,f:function(e){var t=r.round(e*Math.sqrt(3)*.8,2),n=r.round(.8*e,2),a=r.round(1.6*e,2),i=r.round(4*e,2),o="A "+i+","+i+" 0 0 1 ";return"M"+t+",-"+n+o+"-"+t+",-"+n+o+"0,"+a+o+t+",-"+n+"Z"}},"star-square":{n:21,f:function(e){var t=r.round(1.1*e,2),n=r.round(2*e,2),a="A "+n+","+n+" 0 0 1 ";return"M-"+t+",-"+t+a+"-"+t+","+t+a+t+","+t+a+t+",-"+t+a+"-"+t+",-"+t+"Z"}},"star-diamond":{n:22,f:function(e){var t=r.round(1.4*e,2),n=r.round(1.9*e,2),a="A "+n+","+n+" 0 0 1 ";return"M-"+t+",0"+a+"0,"+t+a+t+",0"+a+"0,-"+t+a+"-"+t+",0Z"}},"diamond-tall":{n:23,f:function(e){var t=r.round(.7*e,2),n=r.round(1.4*e,2);return"M0,"+n+"L"+t+",0L0,-"+n+"L-"+t+",0Z"}},"diamond-wide":{n:24,f:function(e){var t=r.round(1.4*e,2),n=r.round(.7*e,2);return"M0,"+n+"L"+t+",0L0,-"+n+"L-"+t+",0Z"}},hourglass:{n:25,f:function(e){var t=r.round(e,2);return"M"+t+","+t+"H-"+t+"L"+t+",-"+t+"H-"+t+"Z"},noDot:!0},bowtie:{n:26,f:function(e){var t=r.round(e,2);return"M"+t+","+t+"V-"+t+"L-"+t+","+t+"V-"+t+"Z"},noDot:!0},"circle-cross":{n:27,f:function(e){var t=r.round(e,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t+"M"+t+",0A"+t+","+t+" 0 1,1 0,-"+t+"A"+t+","+t+" 0 0,1 "+t+",0Z"},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(e){var t=r.round(e,2),n=r.round(e/Math.sqrt(2),2);return"M"+n+","+n+"L-"+n+",-"+n+"M"+n+",-"+n+"L-"+n+","+n+"M"+t+",0A"+t+","+t+" 0 1,1 0,-"+t+"A"+t+","+t+" 0 0,1 "+t+",0Z"},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(e){var t=r.round(e,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t+"M"+t+","+t+"H-"+t+"V-"+t+"H"+t+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(e){var t=r.round(e,2);return"M"+t+","+t+"L-"+t+",-"+t+"M"+t+",-"+t+"L-"+t+","+t+"M"+t+","+t+"H-"+t+"V-"+t+"H"+t+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(e){var t=r.round(1.3*e,2);return"M"+t+",0L0,"+t+"L-"+t+",0L0,-"+t+"ZM0,-"+t+"V"+t+"M-"+t+",0H"+t},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(e){var t=r.round(1.3*e,2),n=r.round(.65*e,2);return"M"+t+",0L0,"+t+"L-"+t+",0L0,-"+t+"ZM-"+n+",-"+n+"L"+n+","+n+"M-"+n+","+n+"L"+n+",-"+n},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(e){var t=r.round(1.4*e,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(e){var t=r.round(e,2);return"M"+t+","+t+"L-"+t+",-"+t+"M"+t+",-"+t+"L-"+t+","+t},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(e){var t=r.round(1.2*e,2),n=r.round(.85*e,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t+"M"+n+","+n+"L-"+n+",-"+n+"M"+n+",-"+n+"L-"+n+","+n},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(e){var t=r.round(e/2,2),n=r.round(e,2);return"M"+t+","+n+"V-"+n+"m-"+n+",0V"+n+"M"+n+","+t+"H-"+n+"m0,-"+n+"H"+n},needLine:!0,noFill:!0},"y-up":{n:37,f:function(e){var t=r.round(1.2*e,2),n=r.round(1.6*e,2),a=r.round(.8*e,2);return"M-"+t+","+a+"L0,0M"+t+","+a+"L0,0M0,-"+n+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(e){var t=r.round(1.2*e,2),n=r.round(1.6*e,2),a=r.round(.8*e,2);return"M-"+t+",-"+a+"L0,0M"+t+",-"+a+"L0,0M0,"+n+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(e){var t=r.round(1.2*e,2),n=r.round(1.6*e,2),a=r.round(.8*e,2);return"M"+a+","+t+"L0,0M"+a+",-"+t+"L0,0M-"+n+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(e){var t=r.round(1.2*e,2),n=r.round(1.6*e,2),a=r.round(.8*e,2);return"M-"+a+","+t+"L0,0M-"+a+",-"+t+"L0,0M"+n+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(e){var t=r.round(1.4*e,2);return"M"+t+",0H-"+t},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(e){var t=r.round(1.4*e,2);return"M0,"+t+"V-"+t},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(e){var t=r.round(e,2);return"M"+t+",-"+t+"L-"+t+","+t},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(e){var t=r.round(e,2);return"M"+t+","+t+"L-"+t+",-"+t},needLine:!0,noDot:!0,noFill:!0}}},{d3:148}],597:[function(e,t,n){"use strict";t.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],598:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),a=e("../../registry"),i=e("../../plots/cartesian/axes"),o=e("./compute_error");function s(e,t,n,a){var s=t["error_"+a]||{},l=s.visible&&-1!==["linear","log"].indexOf(n.type),u=[];if(l){for(var c=o(s),f=0;f<e.length;f++){var d=e[f],p=d.i;if(void 0===p)p=f;else if(null===p)continue;var h=d[a];if(r(n.c2l(h))){var m=c(h,p);if(r(m[0])&&r(m[1])){var v=d[a+"s"]=h-m[0],g=d[a+"h"]=h+m[1];u.push(v,g)}}}var y=i.findExtremes(n,u,{padded:!0}),b=n._id;t._extremes[b].min=t._extremes[b].min.concat(y.min),t._extremes[b].max=t._extremes[b].max.concat(y.max)}}t.exports=function(e){for(var t=e.calcdata,n=0;n<t.length;n++){var r=t[n],o=r[0].trace;if(!0===o.visible&&a.traceIs(o,"errorBarsOK")){var l=i.getFromId(e,o.xaxis),u=i.getFromId(e,o.yaxis);s(r,o,l,"x"),s(r,o,u,"y")}}}},{"../../plots/cartesian/axes":744,"../../registry":827,"./compute_error":599,"fast-isnumeric":214}],599:[function(e,t,n){"use strict";function r(e,t){return"percent"===e?function(e){return Math.abs(e*t/100)}:"constant"===e?function(){return Math.abs(t)}:"sqrt"===e?function(e){return Math.sqrt(Math.abs(e))}:void 0}t.exports=function(e){var t=e.type,n=e.symmetric;if("data"===t){var a=e.array||[];if(n)return function(e,t){var n=+a[t];return[n,n]};var i=e.arrayminus||[];return function(e,t){var n=+a[t],r=+i[t];return isNaN(n)&&isNaN(r)?[NaN,NaN]:[r||0,n||0]}}var o=r(t,e.value),s=r(t,e.valueminus);return n||void 0===e.valueminus?function(e){var t=o(e);return[t,t]}:function(e){return[s(e),o(e)]}}},{}],600:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),a=e("../../registry"),i=e("../../lib"),o=e("../../plot_api/plot_template"),s=e("./attributes");t.exports=function(e,t,n,l){var u="error_"+l.axis,c=o.newContainer(t,u),f=e[u]||{};function d(e,t){return i.coerce(f,c,s,e,t)}var p=void 0!==f.array||void 0!==f.value||"sqrt"===f.type,h=d("visible",p);if(!1!==h){var m=d("type","array"in f?"data":"percent"),v=!0;"sqrt"!==m&&(v=d("symmetric",!(("data"===m?"arrayminus":"valueminus")in f))),"data"===m?(d("array"),d("traceref"),v||(d("arrayminus"),d("tracerefminus"))):"percent"!==m&&"constant"!==m||(d("value"),v||d("valueminus"));var g="copy_"+l.inherit+"style";if(l.inherit){var y=t["error_"+l.inherit];(y||{}).visible&&d(g,!(f.color||r(f.thickness)||r(f.width)))}l.inherit&&c[g]||(d("color",n),d("thickness"),d("width",a.traceIs(t,"gl3d")?0:4))}}},{"../../lib":696,"../../plot_api/plot_template":734,"../../registry":827,"./attributes":597,"fast-isnumeric":214}],601:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("../../plot_api/edit_types").overrideAll,i=e("./attributes"),o={error_x:r.extendFlat({},i),error_y:r.extendFlat({},i)};delete o.error_x.copy_zstyle,delete o.error_y.copy_zstyle,delete o.error_y.copy_ystyle;var s={error_x:r.extendFlat({},i),error_y:r.extendFlat({},i),error_z:r.extendFlat({},i)};delete s.error_x.copy_ystyle,delete s.error_y.copy_ystyle,delete s.error_z.copy_ystyle,delete s.error_z.copy_zstyle,t.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:o,bar:o,histogram:o,scatter3d:a(s,"calc","nested"),scattergl:a(o,"calc","nested")}},supplyDefaults:e("./defaults"),calc:e("./calc"),makeComputeError:e("./compute_error"),plot:e("./plot"),style:e("./style"),hoverInfo:function(e,t,n){(t.error_y||{}).visible&&(n.yerr=e.yh-e.y,t.error_y.symmetric||(n.yerrneg=e.y-e.ys)),(t.error_x||{}).visible&&(n.xerr=e.xh-e.x,t.error_x.symmetric||(n.xerrneg=e.x-e.xs))}}},{"../../lib":696,"../../plot_api/edit_types":727,"./attributes":597,"./calc":598,"./compute_error":599,"./defaults":600,"./plot":602,"./style":603}],602:[function(e,t,n){"use strict";var r=e("d3"),a=e("fast-isnumeric"),i=e("../drawing"),o=e("../../traces/scatter/subtypes");t.exports=function(e,t,n){var s=t.xaxis,l=t.yaxis,u=n&&n.duration>0;e.each(function(e){var c,f=e[0].trace,d=f.error_x||{},p=f.error_y||{};f.ids&&(c=function(e){return e.id});var h=o.hasMarkers(f)&&f.marker.maxdisplayed>0;p.visible||d.visible||(e=[]);var m=r.select(this).selectAll("g.errorbar").data(e,c);if(m.exit().remove(),e.length){d.visible||m.selectAll("path.xerror").remove(),p.visible||m.selectAll("path.yerror").remove(),m.style("opacity",1);var v=m.enter().append("g").classed("errorbar",!0);u&&v.style("opacity",0).transition().duration(n.duration).style("opacity",1),i.setClipUrl(m,t.layerClipId),m.each(function(e){var t=r.select(this),i=function(e,t,n){var r={x:t.c2p(e.x),y:n.c2p(e.y)};return void 0!==e.yh&&(r.yh=n.c2p(e.yh),r.ys=n.c2p(e.ys),a(r.ys)||(r.noYS=!0,r.ys=n.c2p(e.ys,!0))),void 0!==e.xh&&(r.xh=t.c2p(e.xh),r.xs=t.c2p(e.xs),a(r.xs)||(r.noXS=!0,r.xs=t.c2p(e.xs,!0))),r}(e,s,l);if(!h||e.vis){var o,c=t.select("path.yerror");if(p.visible&&a(i.x)&&a(i.yh)&&a(i.ys)){var f=p.width;o="M"+(i.x-f)+","+i.yh+"h"+2*f+"m-"+f+",0V"+i.ys,i.noYS||(o+="m-"+f+",0h"+2*f),c.size()?u&&(c=c.transition().duration(n.duration).ease(n.easing)):c=t.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0),c.attr("d",o)}else c.remove();var m=t.select("path.xerror");if(d.visible&&a(i.y)&&a(i.xh)&&a(i.xs)){var v=(d.copy_ystyle?p:d).width;o="M"+i.xh+","+(i.y-v)+"v"+2*v+"m0,-"+v+"H"+i.xs,i.noXS||(o+="m0,-"+v+"v"+2*v),m.size()?u&&(m=m.transition().duration(n.duration).ease(n.easing)):m=t.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0),m.attr("d",o)}else m.remove()}})}})}},{"../../traces/scatter/subtypes":1067,"../drawing":595,d3:148,"fast-isnumeric":214}],603:[function(e,t,n){"use strict";var r=e("d3"),a=e("../color");t.exports=function(e){e.each(function(e){var t=e[0].trace,n=t.error_y||{},i=t.error_x||{},o=r.select(this);o.selectAll("path.yerror").style("stroke-width",n.thickness+"px").call(a.stroke,n.color),i.copy_ystyle&&(i=n),o.selectAll("path.xerror").style("stroke-width",i.thickness+"px").call(a.stroke,i.color)})}},{"../color":570,d3:148}],604:[function(e,t,n){"use strict";var r=e("../../plots/font_attributes");t.exports={hoverlabel:{bgcolor:{valType:"color",arrayOk:!0,editType:"none"},bordercolor:{valType:"color",arrayOk:!0,editType:"none"},font:r({arrayOk:!0,editType:"none"}),namelength:{valType:"integer",min:-1,arrayOk:!0,editType:"none"},editType:"calc"}}},{"../../plots/font_attributes":771}],605:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("../../registry");function i(e,t,n,a){a=a||r.identity,Array.isArray(e)&&(t[0][n]=a(e))}t.exports=function(e){var t=e.calcdata,n=e._fullLayout;function o(e){return function(t){return r.coerceHoverinfo({hoverinfo:t},{_module:e._module},n)}}for(var s=0;s<t.length;s++){var l=t[s],u=l[0].trace;if(!a.traceIs(u,"pie")){var c=a.traceIs(u,"2dMap")?i:r.fillArray;c(u.hoverinfo,l,"hi",o(u)),u.hoverlabel&&(c(u.hoverlabel.bgcolor,l,"hbg"),c(u.hoverlabel.bordercolor,l,"hbc"),c(u.hoverlabel.font.size,l,"hts"),c(u.hoverlabel.font.color,l,"htc"),c(u.hoverlabel.font.family,l,"htf"),c(u.hoverlabel.namelength,l,"hnl"))}}}},{"../../lib":696,"../../registry":827}],606:[function(e,t,n){"use strict";var r=e("../../registry"),a=e("./hover").hover;t.exports=function(e,t,n){var i=r.getComponentMethod("annotations","onClick")(e,e._hoverdata);function o(){e.emit("plotly_click",{points:e._hoverdata,event:t})}void 0!==n&&a(e,t,n,!0),e._hoverdata&&t&&t.target&&(i&&i.then?i.then(o):o(),t.stopImmediatePropagation&&t.stopImmediatePropagation())}},{"../../registry":827,"./hover":610}],607:[function(e,t,n){"use strict";t.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],608:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("./attributes"),i=e("./hoverlabel_defaults");t.exports=function(e,t,n,o){i(e,t,function(n,i){return r.coerce(e,t,a,n,i)},o.hoverlabel)}},{"../../lib":696,"./attributes":604,"./hoverlabel_defaults":611}],609:[function(e,t,n){"use strict";var r=e("../../lib");n.getSubplot=function(e){return e.subplot||e.xaxis+e.yaxis||e.geo},n.isTraceInSubplots=function(e,t){if("splom"===e.type){for(var r=e.xaxes||[],a=e.yaxes||[],i=0;i<r.length;i++)for(var o=0;o<a.length;o++)if(-1!==t.indexOf(r[i]+a[o]))return!0;return!1}return-1!==t.indexOf(n.getSubplot(e))},n.flat=function(e,t){for(var n=new Array(e.length),r=0;r<e.length;r++)n[r]=t;return n},n.p2c=function(e,t){for(var n=new Array(e.length),r=0;r<e.length;r++)n[r]=e[r].p2c(t);return n},n.getDistanceFunction=function(e,t,r,a){return"closest"===e?a||n.quadrature(t,r):"x"===e?t:r},n.getClosest=function(e,t,n){if(!1!==n.index)n.index>=0&&n.index<e.length?n.distance=0:n.index=!1;else for(var r=0;r<e.length;r++){var a=t(e[r]);a<=n.distance&&(n.index=r,n.distance=a)}return n},n.inbox=function(e,t,n){return e*t<0||0===e?n:1/0},n.quadrature=function(e,t){return function(n){var r=e(n),a=t(n);return Math.sqrt(r*r+a*a)}},n.makeEventData=function(e,t,r){var a="index"in e?e.index:e.pointNumber,i={data:t._input,fullData:t,curveNumber:t.index,pointNumber:a};if(t._indexToPoints){var o=t._indexToPoints[a];1===o.length?i.pointIndex=o[0]:i.pointIndices=o}else i.pointIndex=a;return t._module.eventData?i=t._module.eventData(i,e,t,r,a):("xVal"in e?i.x=e.xVal:"x"in e&&(i.x=e.x),"yVal"in e?i.y=e.yVal:"y"in e&&(i.y=e.y),e.xa&&(i.xaxis=e.xa),e.ya&&(i.yaxis=e.ya),void 0!==e.zLabelVal&&(i.z=e.zLabelVal)),n.appendArrayPointValue(i,t,a),i},n.appendArrayPointValue=function(e,t,n){var a=t._arrayAttrs;if(a)for(var s=0;s<a.length;s++){var l=a[s],u=i(l);if(void 0===e[u]){var c=r.nestedProperty(t,l).get(),f=o(c,n);void 0!==f&&(e[u]=f)}}},n.appendArrayMultiPointValues=function(e,t,n){var a=t._arrayAttrs;if(a)for(var s=0;s<a.length;s++){var l=a[s],u=i(l);if(void 0===e[u]){for(var c=r.nestedProperty(t,l).get(),f=new Array(n.length),d=0;d<n.length;d++)f[d]=o(c,n[d]);e[u]=f}}};var a={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color"};function i(e){return a[e]||e}function o(e,t){return Array.isArray(t)?Array.isArray(e)&&Array.isArray(e[t[0]])?e[t[0]][t[1]]:void 0:e[t]}},{"../../lib":696}],610:[function(e,t,n){"use strict";var r=e("d3"),a=e("fast-isnumeric"),i=e("tinycolor2"),o=e("../../lib"),s=e("../../lib/events"),l=e("../../lib/svg_text_utils"),u=e("../../lib/override_cursor"),c=e("../drawing"),f=e("../color"),d=e("../dragelement"),p=e("../../plots/cartesian/axes"),h=e("../../registry"),m=e("./helpers"),v=e("./constants"),g=v.YANGLE,y=Math.PI*g/180,b=1/Math.sin(y),x=Math.cos(y),_=Math.sin(y),w=v.HOVERARROWSIZE,T=v.HOVERTEXTPAD;function k(e,t,n){var a=t.hovermode,i=t.rotateLabels,s=t.bgColor,u=t.container,d=t.outerContainer,p=t.commonLabelOpts||{},h=t.fontFamily||v.HOVERFONT,m=t.fontSize||v.HOVERFONTSIZE,y=e[0],b=y.xa,x=y.ya,_="y"===a?"yLabel":"xLabel",k=y[_],C=(String(k)||"").split(" ")[0],E=d.node().getBoundingClientRect(),M=E.top,A=E.width,S=E.height,O=void 0!==k&&y.distance<=t.hoverdistance&&("x"===a||"y"===a);if(O){var P,R,L=!0;for(P=0;P<e.length;P++){L&&void 0===e[P].zLabel&&(L=!1),R=e[P].hoverinfo||e[P].trace.hoverinfo;var D=Array.isArray(R)?R:R.split("+");if(-1===D.indexOf("all")&&-1===D.indexOf(a)){O=!1;break}}L&&(O=!1)}var I=u.selectAll("g.axistext").data(O?[0]:[]);I.enter().append("g").classed("axistext",!0),I.exit().remove(),I.each(function(){var t=r.select(this),i=o.ensureSingle(t,"path","",function(e){e.style({"stroke-width":"1px"})}),s=o.ensureSingle(t,"text","",function(e){e.attr("data-notex",1)}),u=p.bgcolor||f.defaultLine,d=p.bordercolor||f.contrast(u),v=f.contrast(u);i.style({fill:u,stroke:d}),s.text(k).call(c.font,p.font.family||h,p.font.size||m,p.font.color||v).call(l.positionText,0,0).call(l.convertToTspans,n),t.attr("transform","");var g=s.node().getBoundingClientRect();if("x"===a){s.attr("text-anchor","middle").call(l.positionText,0,"top"===b.side?M-g.bottom-w-T:M-g.top+w+T);var E="top"===b.side?"-":"";i.attr("d","M0,0L"+w+","+E+w+"H"+(T+g.width/2)+"v"+E+(2*T+g.height)+"H-"+(T+g.width/2)+"V"+E+w+"H-"+w+"Z"),t.attr("transform","translate("+(b._offset+(y.x0+y.x1)/2)+","+(x._offset+("top"===b.side?0:x._length))+")")}else{s.attr("text-anchor","right"===x.side?"start":"end").call(l.positionText,("right"===x.side?1:-1)*(T+w),M-g.top-g.height/2);var A="right"===x.side?"":"-";i.attr("d","M0,0L"+A+w+","+w+"V"+(T+g.height/2)+"h"+A+(2*T+g.width)+"V-"+(T+g.height/2)+"H"+A+w+"V-"+w+"Z"),t.attr("transform","translate("+(b._offset+("right"===x.side?b._length:0))+","+(x._offset+(y.y0+y.y1)/2)+")")}e=e.filter(function(e){return void 0!==e.zLabelVal||(e[_]||"").split(" ")[0]===C})});var z=u.selectAll("g.hovertext").data(e,function(e){return[e.trace.index,e.index,e.x0,e.y0,e.name,e.attr,e.xa,e.ya||""].join(",")});return z.enter().append("g").classed("hovertext",!0).each(function(){var e=r.select(this);e.append("rect").call(f.fill,f.addOpacity(s,.8)),e.append("text").classed("name",!0),e.append("path").style("stroke-width","1px"),e.append("text").classed("nums",!0).call(c.font,h,m)}),z.exit().remove(),z.each(function(e){var t=r.select(this).attr("transform",""),o="",u="",d=e.bgcolor||e.color,p=f.combine(f.opacity(d)?d:f.defaultLine,s),v=f.combine(f.opacity(e.color)?e.color:f.defaultLine,s),y=e.borderColor||f.contrast(p);if(void 0!==e.nameOverride&&(e.name=e.nameOverride),e.name){o=l.plainText(e.name||"");var b=Math.round(e.nameLength);b>-1&&o.length>b&&(o=b>3?o.substr(0,b-3)+"...":o.substr(0,b))}void 0!==e.zLabel?(void 0!==e.xLabel&&(u+="x: "+e.xLabel+"<br>"),void 0!==e.yLabel&&(u+="y: "+e.yLabel+"<br>"),u+=(u?"z: ":"")+e.zLabel):O&&e[a+"Label"]===k?u=e[("x"===a?"y":"x")+"Label"]||"":void 0===e.xLabel?void 0!==e.yLabel&&(u=e.yLabel):u=void 0===e.yLabel?e.xLabel:"("+e.xLabel+", "+e.yLabel+")",!e.text&&0!==e.text||Array.isArray(e.text)||(u+=(u?"<br>":"")+e.text),void 0!==e.extraText&&(u+=(u?"<br>":"")+e.extraText),""===u&&(""===o&&t.remove(),u=o);var x=t.select("text.nums").call(c.font,e.fontFamily||h,e.fontSize||m,e.fontColor||y).text(u).attr("data-notex",1).call(l.positionText,0,0).call(l.convertToTspans,n),_=t.select("text.name"),C=0;o&&o!==u?(_.call(c.font,e.fontFamily||h,e.fontSize||m,v).text(o).attr("data-notex",1).call(l.positionText,0,0).call(l.convertToTspans,n),C=_.node().getBoundingClientRect().width+2*T):(_.remove(),t.select("rect").remove()),t.select("path").style({fill:p,stroke:y});var E,P,R=x.node().getBoundingClientRect(),L=e.xa._offset+(e.x0+e.x1)/2,D=e.ya._offset+(e.y0+e.y1)/2,I=Math.abs(e.x1-e.x0),z=Math.abs(e.y1-e.y0),j=R.width+w+T+C;e.ty0=M-R.top,e.bx=R.width+2*T,e.by=R.height+2*T,e.anchor="start",e.txwidth=R.width,e.tx2width=C,e.offset=0,i?(e.pos=L,E=D+z/2+j<=S,P=D-z/2-j>=0,"top"!==e.idealAlign&&E||!P?E?(D+=z/2,e.anchor="start"):e.anchor="middle":(D-=z/2,e.anchor="end")):(e.pos=D,E=L+I/2+j<=A,P=L-I/2-j>=0,"left"!==e.idealAlign&&E||!P?E?(L+=I/2,e.anchor="start"):e.anchor="middle":(L-=I/2,e.anchor="end")),x.attr("text-anchor",e.anchor),C&&_.attr("text-anchor",e.anchor),t.attr("transform","translate("+L+","+D+")"+(i?"rotate("+g+")":""))}),z}function C(e,t){e.each(function(e){var n=r.select(this);if(e.del)n.remove();else{var a="end"===e.anchor?-1:1,i=n.select("text.nums"),o={start:1,end:-1,middle:0}[e.anchor],s=o*(w+T),u=s+o*(e.txwidth+T),f=0,d=e.offset;"middle"===e.anchor&&(s-=e.tx2width/2,u+=e.txwidth/2+T),t&&(d*=-_,f=e.offset*x),n.select("path").attr("d","middle"===e.anchor?"M-"+(e.bx/2+e.tx2width/2)+","+(d-e.by/2)+"h"+e.bx+"v"+e.by+"h-"+e.bx+"Z":"M0,0L"+(a*w+f)+","+(w+d)+"v"+(e.by/2-w)+"h"+a*e.bx+"v-"+e.by+"H"+(a*w+f)+"V"+(d-w)+"Z"),i.call(l.positionText,s+f,d+e.ty0-e.by/2+T),e.tx2width&&(n.select("text.name").call(l.positionText,u+o*T+f,d+e.ty0-e.by/2+T),n.select("rect").call(c.setRect,u+(o-1)*e.tx2width/2+f,d-e.by/2-1,e.tx2width,e.by+2))}})}function E(e,t){var n=e.index,r=e.trace||{},a=e.cd[0],i=e.cd[n]||{},s=Array.isArray(n)?function(e,t){return o.castOption(a,n,e)||o.extractOption({},r,"",t)}:function(e,t){return o.extractOption(i,r,e,t)};function l(t,n,r){var a=s(n,r);a&&(e[t]=a)}if(l("hoverinfo","hi","hoverinfo"),l("bgcolor","hbg","hoverlabel.bgcolor"),l("borderColor","hbc","hoverlabel.bordercolor"),l("fontFamily","htf","hoverlabel.font.family"),l("fontSize","hts","hoverlabel.font.size"),l("fontColor","htc","hoverlabel.font.color"),l("nameLength","hnl","hoverlabel.namelength"),e.posref="y"===t?e.xa._offset+(e.x0+e.x1)/2:e.ya._offset+(e.y0+e.y1)/2,e.x0=o.constrain(e.x0,0,e.xa._length),e.x1=o.constrain(e.x1,0,e.xa._length),e.y0=o.constrain(e.y0,0,e.ya._length),e.y1=o.constrain(e.y1,0,e.ya._length),void 0!==e.xLabelVal&&(e.xLabel="xLabel"in e?e.xLabel:p.hoverLabelText(e.xa,e.xLabelVal),e.xVal=e.xa.c2d(e.xLabelVal)),void 0!==e.yLabelVal&&(e.yLabel="yLabel"in e?e.yLabel:p.hoverLabelText(e.ya,e.yLabelVal),e.yVal=e.ya.c2d(e.yLabelVal)),void 0!==e.zLabelVal&&void 0===e.zLabel&&(e.zLabel=String(e.zLabelVal)),!(isNaN(e.xerr)||"log"===e.xa.type&&e.xerr<=0)){var u=p.tickText(e.xa,e.xa.c2l(e.xerr),"hover").text;void 0!==e.xerrneg?e.xLabel+=" +"+u+" / -"+p.tickText(e.xa,e.xa.c2l(e.xerrneg),"hover").text:e.xLabel+="  "+u,"x"===t&&(e.distance+=1)}if(!(isNaN(e.yerr)||"log"===e.ya.type&&e.yerr<=0)){var c=p.tickText(e.ya,e.ya.c2l(e.yerr),"hover").text;void 0!==e.yerrneg?e.yLabel+=" +"+c+" / -"+p.tickText(e.ya,e.ya.c2l(e.yerrneg),"hover").text:e.yLabel+="  "+c,"y"===t&&(e.distance+=1)}var f=e.hoverinfo||e.trace.hoverinfo;return"all"!==f&&(-1===(f=Array.isArray(f)?f:f.split("+")).indexOf("x")&&(e.xLabel=void 0),-1===f.indexOf("y")&&(e.yLabel=void 0),-1===f.indexOf("z")&&(e.zLabel=void 0),-1===f.indexOf("text")&&(e.text=void 0),-1===f.indexOf("name")&&(e.name=void 0)),e}function M(e,t){var n,r,a=t.container,o=t.fullLayout,s=t.event,l=!!e.hLinePoint,u=!!e.vLinePoint;if(a.selectAll(".spikeline").remove(),u||l){var d=f.combine(o.plot_bgcolor,o.paper_bgcolor);if(l){var p,h,m=e.hLinePoint;n=m&&m.xa;var v=(r=m&&m.ya).spikesnap;"cursor"===v?(p=s.pointerX,h=s.pointerY):(p=n._offset+m.x,h=r._offset+m.y);var g,y,b=i.readability(m.color,d)<1.5?f.contrast(d):m.color,x=r.spikemode,_=r.spikethickness,w=r.spikecolor||b,T=r._boundingBox,k=(T.left+T.right)/2<p?T.right:T.left;-1===x.indexOf("toaxis")&&-1===x.indexOf("across")||(-1!==x.indexOf("toaxis")&&(g=k,y=p),-1!==x.indexOf("across")&&(g=r._counterSpan[0],y=r._counterSpan[1]),a.insert("line",":first-child").attr({x1:g,x2:y,y1:h,y2:h,"stroke-width":_,stroke:w,"stroke-dasharray":c.dashStyle(r.spikedash,_)}).classed("spikeline",!0).classed("crisp",!0),a.insert("line",":first-child").attr({x1:g,x2:y,y1:h,y2:h,"stroke-width":_+2,stroke:d}).classed("spikeline",!0).classed("crisp",!0)),-1!==x.indexOf("marker")&&a.insert("circle",":first-child").attr({cx:k+("right"!==r.side?_:-_),cy:h,r:_,fill:w}).classed("spikeline",!0)}if(u){var C,E,M=e.vLinePoint;n=M&&M.xa,r=M&&M.ya;var A=n.spikesnap;"cursor"===A?(C=s.pointerX,E=s.pointerY):(C=n._offset+M.x,E=r._offset+M.y);var S,O,P=i.readability(M.color,d)<1.5?f.contrast(d):M.color,R=n.spikemode,L=n.spikethickness,D=n.spikecolor||P,I=n._boundingBox,z=(I.top+I.bottom)/2<E?I.bottom:I.top;-1===R.indexOf("toaxis")&&-1===R.indexOf("across")||(-1!==R.indexOf("toaxis")&&(S=z,O=E),-1!==R.indexOf("across")&&(S=n._counterSpan[0],O=n._counterSpan[1]),a.insert("line",":first-child").attr({x1:C,x2:C,y1:S,y2:O,"stroke-width":L,stroke:D,"stroke-dasharray":c.dashStyle(n.spikedash,L)}).classed("spikeline",!0).classed("crisp",!0),a.insert("line",":first-child").attr({x1:C,x2:C,y1:S,y2:O,"stroke-width":L+2,stroke:d}).classed("spikeline",!0).classed("crisp",!0)),-1!==R.indexOf("marker")&&a.insert("circle",":first-child").attr({cx:C,cy:z-("top"!==n.side?L:-L),r:L,fill:D}).classed("spikeline",!0)}}}function A(e,t){return!t||t.vLinePoint!==e._spikepoints.vLinePoint||t.hLinePoint!==e._spikepoints.hLinePoint}n.hover=function(e,t,n,i){e=o.getGraphDiv(e),o.throttle(e._fullLayout._uid+v.HOVERID,v.HOVERMINTIME,function(){!function(e,t,n,i){n||(n="xy");var l=Array.isArray(n)?n:[n],c=e._fullLayout,v=c._plots||[],g=v[n],y=c._has("cartesian");if(g){var x=g.overlays.map(function(e){return e.id});l=l.concat(x)}for(var _=l.length,w=new Array(_),T=new Array(_),S=!1,O=0;O<_;O++){var P=l[O],R=v[P];if(R)S=!0,w[O]=p.getFromId(e,R.xaxis._id),T[O]=p.getFromId(e,R.yaxis._id);else{var L=c[P]._subplot;w[O]=L.xaxis,T[O]=L.yaxis}}var D=t.hovermode||c.hovermode;if(D&&!S&&(D="closest"),-1===["x","y","closest"].indexOf(D)||!e.calcdata||e.querySelector(".zoombox")||e._dragging)return d.unhoverRaw(e,t);var I,z,j,N,F,B,V,U,G,H,W,q,Y,X=-1===c.hoverdistance?1/0:c.hoverdistance,Z=-1===c.spikedistance?1/0:c.spikedistance,$=[],K=[],J={hLinePoint:null,vLinePoint:null},Q=!1;if(Array.isArray(t))for(D="array",j=0;j<t.length;j++)F=e.calcdata[t[j].curveNumber||0],B=F[0].trace,"skip"!==F[0].trace.hoverinfo&&(K.push(F),"h"===B.orientation&&(Q=!0));else{for(N=0;N<e.calcdata.length;N++)F=e.calcdata[N],"skip"!==(B=F[0].trace).hoverinfo&&m.isTraceInSubplots(B,l)&&(K.push(F),"h"===B.orientation&&(Q=!0));var ee,te,ne=!t.target;if(ne)ee="xpx"in t?t.xpx:w[0]._length/2,te="ypx"in t?t.ypx:T[0]._length/2;else{if(!1===s.triggerHandler(e,"plotly_beforehover",t))return;var re=t.target.getBoundingClientRect();if(ee=t.clientX-re.left,te=t.clientY-re.top,ee<0||ee>w[0]._length||te<0||te>T[0]._length)return d.unhoverRaw(e,t)}if(t.pointerX=ee+w[0]._offset,t.pointerY=te+T[0]._offset,I="xval"in t?m.flat(l,t.xval):m.p2c(w,ee),z="yval"in t?m.flat(l,t.yval):m.p2c(T,te),!a(I[0])||!a(z[0]))return o.warn("Fx.hover failed",t,e),d.unhoverRaw(e,t)}var ae=1/0;for(N=0;N<K.length;N++)if((F=K[N])&&F[0]&&F[0].trace&&!0===F[0].trace.visible&&(B=F[0].trace,-1===["carpet","contourcarpet"].indexOf(B._module.name))){if("splom"===B.type?V=l[U=0]:(V=m.getSubplot(B),U=l.indexOf(V)),G=D,q={cd:F,trace:B,xa:w[U],ya:T[U],maxHoverDistance:X,maxSpikeDistance:Z,index:!1,distance:Math.min(ae,X),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:f.defaultLine,name:B.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},c[V]&&(q.subplot=c[V]._subplot),c._splomScenes&&c._splomScenes[B.uid]&&(q.scene=c._splomScenes[B.uid]),Y=$.length,"array"===G){var ie=t[N];"pointNumber"in ie?(q.index=ie.pointNumber,G="closest"):(G="","xval"in ie&&(H=ie.xval,G="x"),"yval"in ie&&(W=ie.yval,G=G?"closest":"y"))}else H=I[U],W=z[U];if(0!==X)if(B._module&&B._module.hoverPoints){var oe=B._module.hoverPoints(q,H,W,G,c._hoverlayer);if(oe)for(var se,le=0;le<oe.length;le++)se=oe[le],a(se.x0)&&a(se.y0)&&$.push(E(se,D))}else o.log("Unrecognized trace type in hover:",B);if("closest"===D&&$.length>Y&&($.splice(0,Y),ae=$[0].distance),y&&0!==Z&&0===$.length){q.distance=Z,q.index=!1;var ue=B._module.hoverPoints(q,H,W,"closest",c._hoverlayer);if(ue&&(ue=ue.filter(function(e){return e.spikeDistance<=Z})),ue&&ue.length){var ce,fe=ue.filter(function(e){return e.xa.showspikes});if(fe.length){var de=fe[0];a(de.x0)&&a(de.y0)&&(ce=ve(de),(!J.vLinePoint||J.vLinePoint.spikeDistance>ce.spikeDistance)&&(J.vLinePoint=ce))}var pe=ue.filter(function(e){return e.ya.showspikes});if(pe.length){var he=pe[0];a(he.x0)&&a(he.y0)&&(ce=ve(he),(!J.hLinePoint||J.hLinePoint.spikeDistance>ce.spikeDistance)&&(J.hLinePoint=ce))}}}}function me(e,t){for(var n,r=null,a=1/0,i=0;i<e.length;i++)(n=e[i].spikeDistance)<a&&n<=t&&(r=e[i],a=n);return r}function ve(e){return e?{xa:e.xa,ya:e.ya,x:void 0!==e.xSpike?e.xSpike:(e.x0+e.x1)/2,y:void 0!==e.ySpike?e.ySpike:(e.y0+e.y1)/2,distance:e.distance,spikeDistance:e.spikeDistance,curveNumber:e.trace.index,color:e.color,pointNumber:e.index}:null}var ge={fullLayout:c,container:c._hoverlayer,outerContainer:c._paperdiv,event:t},ye=e._spikepoints,be={vLinePoint:J.vLinePoint,hLinePoint:J.hLinePoint};if(e._spikepoints=be,y&&0!==Z&&0!==$.length){var xe=$.filter(function(e){return e.ya.showspikes}),_e=me(xe,Z);J.hLinePoint=ve(_e);var we=$.filter(function(e){return e.xa.showspikes}),Te=me(we,Z);J.vLinePoint=ve(Te)}if(0===$.length){var ke=d.unhoverRaw(e,t);return!y||null===J.hLinePoint&&null===J.vLinePoint||A(ye)&&M(J,ge),ke}y&&A(ye)&&M(J,ge),$.sort(function(e,t){return e.distance-t.distance});var Ce=e._hoverdata,Ee=[];for(j=0;j<$.length;j++){var Me=$[j];Ee.push(m.makeEventData(Me,Me.trace,Me.cd))}e._hoverdata=Ee;var Ae="y"===D&&(K.length>1||$.length>1)||"closest"===D&&Q&&$.length>1,Se=f.combine(c.plot_bgcolor||f.background,c.paper_bgcolor),Oe={hovermode:D,rotateLabels:Ae,bgColor:Se,container:c._hoverlayer,outerContainer:c._paperdiv,commonLabelOpts:c.hoverlabel,hoverdistance:c.hoverdistance},Pe=k($,Oe,e);if(function(e,t,n){var r,a,i,o,s,l,u,c=0,f=1,d=e.map(function(e,r){var a=e[t],i="x"===a._id.charAt(0),o=a.range;return!r&&o&&o[0]>o[1]!==i&&(f=-1),[{i:r,traceIndex:e.trace.index,dp:0,pos:e.pos,posref:e.posref,size:e.by*(i?b:1)/2,pmin:0,pmax:i?n.width:n.height}]}).sort(function(e,t){return e[0].posref-t[0].posref||f*(t[0].traceIndex-e[0].traceIndex)});function p(e){var t=e[0],n=e[e.length-1];if(a=t.pmin-t.pos-t.dp+t.size,i=n.pos+n.dp+n.size-t.pmax,a>.01){for(s=e.length-1;s>=0;s--)e[s].dp+=a;r=!1}if(!(i<.01)){if(a<-.01){for(s=e.length-1;s>=0;s--)e[s].dp-=i;r=!1}if(r){var u=0;for(o=0;o<e.length;o++)(l=e[o]).pos+l.dp+l.size>t.pmax&&u++;for(o=e.length-1;o>=0&&!(u<=0);o--)(l=e[o]).pos>t.pmax-1&&(l.del=!0,u--);for(o=0;o<e.length&&!(u<=0);o++)if((l=e[o]).pos<t.pmin+1)for(l.del=!0,u--,i=2*l.size,s=e.length-1;s>=0;s--)e[s].dp-=i;for(o=e.length-1;o>=0&&!(u<=0);o--)(l=e[o]).pos+l.dp+l.size>t.pmax&&(l.del=!0,u--)}}}for(;!r&&c<=e.length;){for(c++,r=!0,o=0;o<d.length-1;){var h=d[o],m=d[o+1],v=h[h.length-1],g=m[0];if((a=v.pos+v.dp+v.size-g.pos-g.dp+g.size)>.01&&v.pmin===g.pmin&&v.pmax===g.pmax){for(s=m.length-1;s>=0;s--)m[s].dp+=a;for(h.push.apply(h,m),d.splice(o+1,1),u=0,s=h.length-1;s>=0;s--)u+=h[s].dp;for(i=u/h.length,s=h.length-1;s>=0;s--)h[s].dp-=i;r=!1}else o++}d.forEach(p)}for(o=d.length-1;o>=0;o--){var y=d[o];for(s=y.length-1;s>=0;s--){var x=y[s],_=e[x.i];_.offset=x.dp,_.del=x.del}}}($,Ae?"xa":"ya",c),C(Pe,Ae),t.target&&t.target.tagName){var Re=h.getComponentMethod("annotations","hasClickToShow")(e,Ee);u(r.select(t.target),Re?"pointer":"")}t.target&&!i&&function(e,t,n){if(!n||n.length!==e._hoverdata.length)return!0;for(var r=n.length-1;r>=0;r--){var a=n[r],i=e._hoverdata[r];if(a.curveNumber!==i.curveNumber||String(a.pointNumber)!==String(i.pointNumber))return!0}return!1}(e,0,Ce)&&(Ce&&e.emit("plotly_unhover",{event:t,points:Ce}),e.emit("plotly_hover",{event:t,points:e._hoverdata,xaxes:w,yaxes:T,xvals:I,yvals:z}))}(e,t,n,i)})},n.loneHover=function(e,t){var n={color:e.color||f.defaultLine,x0:e.x0||e.x||0,x1:e.x1||e.x||0,y0:e.y0||e.y||0,y1:e.y1||e.y||0,xLabel:e.xLabel,yLabel:e.yLabel,zLabel:e.zLabel,text:e.text,name:e.name,idealAlign:e.idealAlign,borderColor:e.borderColor,fontFamily:e.fontFamily,fontSize:e.fontSize,fontColor:e.fontColor,trace:{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0},a=r.select(t.container),i=t.outerContainer?r.select(t.outerContainer):a,o={hovermode:"closest",rotateLabels:!1,bgColor:t.bgColor||f.background,container:a,outerContainer:i},s=k([n],o,t.gd);return C(s,o.rotateLabels),s.node()},n.multiHovers=function(e,t){Array.isArray(e)||(e=[e]);var n=e.map(function(e){return{color:e.color||f.defaultLine,x0:e.x0||e.x||0,x1:e.x1||e.x||0,y0:e.y0||e.y||0,y1:e.y1||e.y||0,xLabel:e.xLabel,yLabel:e.yLabel,zLabel:e.zLabel,text:e.text,name:e.name,idealAlign:e.idealAlign,borderColor:e.borderColor,fontFamily:e.fontFamily,fontSize:e.fontSize,fontColor:e.fontColor,trace:{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0}}),a=r.select(t.container),i=t.outerContainer?r.select(t.outerContainer):a,o={hovermode:"closest",rotateLabels:!1,bgColor:t.bgColor||f.background,container:a,outerContainer:i},s=k(n,o,t.gd),l=0;return s.sort(function(e,t){return e.y0-t.y0}).each(function(e){var t=e.y0-e.by/2;e.offset=t-5<l?l-t+5:0,l=t+e.by+e.offset}),C(s,o.rotateLabels),s.node()}},{"../../lib":696,"../../lib/events":684,"../../lib/override_cursor":707,"../../lib/svg_text_utils":720,"../../plots/cartesian/axes":744,"../../registry":827,"../color":570,"../dragelement":592,"../drawing":595,"./constants":607,"./helpers":609,d3:148,"fast-isnumeric":214,tinycolor2:514}],611:[function(e,t,n){"use strict";var r=e("../../lib");t.exports=function(e,t,n,a){n("hoverlabel.bgcolor",(a=a||{}).bgcolor),n("hoverlabel.bordercolor",a.bordercolor),n("hoverlabel.namelength",a.namelength),r.coerceFont(n,"hoverlabel.font",a.font)}},{"../../lib":696}],612:[function(e,t,n){"use strict";var r=e("d3"),a=e("../../lib"),i=e("../dragelement"),o=e("./helpers"),s=e("./layout_attributes"),l=e("./hover");t.exports={moduleType:"component",name:"fx",constants:e("./constants"),schema:{layout:s},attributes:e("./attributes"),layoutAttributes:s,supplyLayoutGlobalDefaults:e("./layout_global_defaults"),supplyDefaults:e("./defaults"),supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),getDistanceFunction:o.getDistanceFunction,getClosest:o.getClosest,inbox:o.inbox,quadrature:o.quadrature,appendArrayPointValue:o.appendArrayPointValue,castHoverOption:function(e,t,n){return a.castOption(e,t,"hoverlabel."+n)},castHoverinfo:function(e,t,n){return a.castOption(e,n,"hoverinfo",function(n){return a.coerceHoverinfo({hoverinfo:n},{_module:e._module},t)})},hover:l.hover,unhover:i.unhover,loneHover:l.loneHover,multiHovers:l.multiHovers,loneUnhover:function(e){var t=a.isD3Selection(e)?e:r.select(e);t.selectAll("g.hovertext").remove(),t.selectAll(".spikeline").remove()},click:e("./click")}},{"../../lib":696,"../dragelement":592,"./attributes":604,"./calc":605,"./click":606,"./constants":607,"./defaults":608,"./helpers":609,"./hover":610,"./layout_attributes":613,"./layout_defaults":614,"./layout_global_defaults":615,d3:148}],613:[function(e,t,n){"use strict";var r=e("./constants"),a=e("../../plots/font_attributes")({editType:"none"});a.family.dflt=r.HOVERFONT,a.size.dflt=r.HOVERFONTSIZE,t.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","orbit","turntable"],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1],editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:20,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:a,namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":771,"./constants":607}],614:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("./layout_attributes");t.exports=function(e,t,n){function i(n,i){return r.coerce(e,t,a,n,i)}var o,s=i("clickmode"),l=i("dragmode");"select"===l&&i("selectdirection"),t._has("cartesian")?s.indexOf("select")>-1?o="closest":(t._isHoriz=function(e){for(var t=!0,n=0;n<e.length;n++){var r=e[n];if("h"!==r.orientation){t=!1;break}}return t}(n),o=t._isHoriz?"y":"x"):o="closest";var u=i("hovermode",o);u&&(i("hoverdistance"),i("spikedistance"));var c=t._has("mapbox"),f=t._has("geo"),d=t._basePlotModules.length;"zoom"===t.dragmode&&((c||f)&&1===d||c&&f&&2===d)&&(t.dragmode="pan")}},{"../../lib":696,"./layout_attributes":613}],615:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("./hoverlabel_defaults"),i=e("./layout_attributes");t.exports=function(e,t){a(e,t,function(n,a){return r.coerce(e,t,i,n,a)})}},{"../../lib":696,"./hoverlabel_defaults":611,"./layout_attributes":613}],616:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("../../lib/regex").counter,i=e("../../plots/domain").attributes,o=e("../../plots/cartesian/constants").idRegex,s=e("../../plot_api/plot_template"),l={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[a("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[o.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[o.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:i({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function u(e,t,n){var r=t[n+"axes"],a=Object.keys((e._splomAxes||{})[n]||{});return Array.isArray(r)?r:a.length?a:void 0}function c(e,t,n,r,a,i){var o=t(e+"gap",n),s=t("domain."+e);t(e+"side",r);for(var l=new Array(a),u=s[0],c=(s[1]-u)/(a-o),f=c*(1-o),d=0;d<a;d++){var p=u+c*d;l[i?a-1-d:d]=[p,p+f]}return l}function f(e,t,n,r,a){var i,o=new Array(n);function s(e,n){-1!==t.indexOf(n)&&void 0===r[n]?(o[e]=n,r[n]=e):o[e]=""}if(Array.isArray(e))for(i=0;i<n;i++)s(i,e[i]);else for(s(0,a),i=1;i<n;i++)s(i,a+(i+1));return o}t.exports={moduleType:"component",name:"grid",schema:{layout:{grid:l}},layoutAttributes:l,sizeDefaults:function(e,t){var n=e.grid||{},a=u(t,n,"x"),i=u(t,n,"y");if(e.grid||a||i){var o,f,d=Array.isArray(n.subplots)&&Array.isArray(n.subplots[0]),p=Array.isArray(a),h=Array.isArray(i),m=p&&a!==n.xaxes&&h&&i!==n.yaxes;d?(o=n.subplots.length,f=n.subplots[0].length):(h&&(o=i.length),p&&(f=a.length));var v=s.newContainer(t,"grid"),g=C("rows",o),y=C("columns",f);if(g*y>1){if(!d&&!p&&!h){var b="independent"===C("pattern");b&&(d=!0)}v._hasSubplotGrid=d;var x,_,w="top to bottom"===C("roworder"),T=d?.2:.1,k=d?.3:.1;m&&t._splomGridDflt&&(x=t._splomGridDflt.xside,_=t._splomGridDflt.yside),v._domains={x:c("x",C,T,x,y),y:c("y",C,k,_,g,w)}}else delete t.grid}function C(e,t){return r.coerce(n,v,l,e,t)}},contentDefaults:function(e,t){var n=t.grid;if(n&&n._domains){var r,a,i,o,s,l,c,d=e.grid||{},p=t._subplots,h=n._hasSubplotGrid,m=n.rows,v=n.columns,g="independent"===n.pattern,y=n._axisMap={};if(h){var b=d.subplots||[];l=n.subplots=new Array(m);var x=1;for(r=0;r<m;r++){var _=l[r]=new Array(v),w=b[r]||[];for(a=0;a<v;a++)if(g?(s=1===x?"xy":"x"+x+"y"+x,x++):s=w[a],_[a]="",-1!==p.cartesian.indexOf(s)){if(c=s.indexOf("y"),i=s.slice(0,c),o=s.slice(c),void 0!==y[i]&&y[i]!==a||void 0!==y[o]&&y[o]!==r)continue;_[a]=s,y[i]=a,y[o]=r}}}else{var T=u(t,d,"x"),k=u(t,d,"y");n.xaxes=f(T,p.xaxis,v,y,"x"),n.yaxes=f(k,p.yaxis,m,y,"y")}var C=n._anchors={},E="top to bottom"===n.roworder;for(var M in y){var A,S,O,P=M.charAt(0),R=n[P+"side"];if(R.length<8)C[M]="free";else if("x"===P){if("t"===R.charAt(0)===E?(A=0,S=1,O=m):(A=m-1,S=-1,O=-1),h){var L=y[M];for(r=A;r!==O;r+=S)if((s=l[r][L])&&(c=s.indexOf("y"),s.slice(0,c)===M)){C[M]=s.slice(c);break}}else for(r=A;r!==O;r+=S)if(o=n.yaxes[r],-1!==p.cartesian.indexOf(M+o)){C[M]=o;break}}else if("l"===R.charAt(0)?(A=0,S=1,O=v):(A=v-1,S=-1,O=-1),h){var D=y[M];for(r=A;r!==O;r+=S)if((s=l[D][r])&&(c=s.indexOf("y"),s.slice(c)===M)){C[M]=s.slice(0,c);break}}else for(r=A;r!==O;r+=S)if(i=n.xaxes[r],-1!==p.cartesian.indexOf(i+M)){C[M]=i;break}}}}}},{"../../lib":696,"../../lib/regex":712,"../../plot_api/plot_template":734,"../../plots/cartesian/constants":750,"../../plots/domain":770}],617:[function(e,t,n){"use strict";var r=e("../../plots/cartesian/constants"),a=e("../../plot_api/plot_template").templatedArray;t.exports=a("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",r.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",r.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../plot_api/plot_template":734,"../../plots/cartesian/constants":750}],618:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),a=e("../../lib/to_log_range");t.exports=function(e,t,n,i){t=t||{};var o="log"===n&&"linear"===t.type,s="linear"===n&&"log"===t.type;if(o||s)for(var l,u,c=e._fullLayout.images,f=t._id.charAt(0),d=0;d<c.length;d++)if(l=c[d],u="images["+d+"].",l[f+"ref"]===t._id){var p=l[f],h=l["size"+f],m=null,v=null;if(o){m=a(p,t.range);var g=h/Math.pow(10,m)/2;v=2*Math.log(g+Math.sqrt(1+g*g))/Math.LN10}else m=Math.pow(10,p),v=m*(Math.pow(10,h/2)-Math.pow(10,-h/2));r(m)?r(v)||(v=null):(m=null,v=null),i(u+f,m),i(u+"size"+f,v)}}},{"../../lib/to_log_range":722,"fast-isnumeric":214}],619:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("../../plots/cartesian/axes"),i=e("../../plots/array_container_defaults"),o=e("./attributes");function s(e,t,n){function i(n,a){return r.coerce(e,t,o,n,a)}var s=i("source"),l=i("visible",!!s);if(!l)return t;i("layer"),i("xanchor"),i("yanchor"),i("sizex"),i("sizey"),i("sizing"),i("opacity");for(var u={_fullLayout:n},c=["x","y"],f=0;f<2;f++){var d=c[f],p=a.coerceRef(e,t,u,d,"paper");a.coercePosition(t,u,i,p,d,0)}return t}t.exports=function(e,t){var n={name:"images",handleItemDefaults:s};i(e,t,n)}},{"../../lib":696,"../../plots/array_container_defaults":740,"../../plots/cartesian/axes":744,"./attributes":617}],620:[function(e,t,n){"use strict";var r=e("d3"),a=e("../drawing"),i=e("../../plots/cartesian/axes"),o=e("../../constants/xmlns_namespaces");t.exports=function(e){var t,n,s=e._fullLayout,l=[],u={},c=[];for(n=0;n<s.images.length;n++){var f=s.images[n];if(f.visible)if("below"===f.layer&&"paper"!==f.xref&&"paper"!==f.yref){t=f.xref+f.yref;var d=s._plots[t];if(!d){c.push(f);continue}d.mainplot&&(t=d.mainplot.id),u[t]||(u[t]=[]),u[t].push(f)}else"above"===f.layer?l.push(f):c.push(f)}var p={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}}};function h(t){var n=r.select(this);if(!this.img||this.img.src!==t.source){n.attr("xmlns",o.svg);var a=new Promise(function(e){var r=new Image;function a(){n.remove(),e()}this.img=r,r.setAttribute("crossOrigin","anonymous"),r.onerror=a,r.onload=function(){var t=document.createElement("canvas");t.width=this.width,t.height=this.height;var r=t.getContext("2d");r.drawImage(this,0,0);var a=t.toDataURL("image/png");n.attr("xlink:href",a),e()},n.on("error",a),r.src=t.source}.bind(this));e._promises.push(a)}}function m(t){var n=r.select(this),o=i.getFromId(e,t.xref),l=i.getFromId(e,t.yref),u=s._size,c=o?Math.abs(o.l2p(t.sizex)-o.l2p(0)):t.sizex*u.w,f=l?Math.abs(l.l2p(t.sizey)-l.l2p(0)):t.sizey*u.h,d=c*p.x[t.xanchor].offset,h=f*p.y[t.yanchor].offset,m=p.x[t.xanchor].sizing+p.y[t.yanchor].sizing,v=(o?o.r2p(t.x)+o._offset:t.x*u.w+u.l)+d,g=(l?l.r2p(t.y)+l._offset:u.h-t.y*u.h+u.t)+h;switch(t.sizing){case"fill":m+=" slice";break;case"stretch":m="none"}n.attr({x:v,y:g,width:c,height:f,preserveAspectRatio:m,opacity:t.opacity});var y=o?o._id:"",b=l?l._id:"",x=y+b;n.call(a.setClipUrl,x?"clip"+s._uid+x:null)}var v=s._imageLowerLayer.selectAll("image").data(c),g=s._imageUpperLayer.selectAll("image").data(l);v.enter().append("image"),g.enter().append("image"),v.exit().remove(),g.exit().remove(),v.each(function(e){h.bind(this)(e),m.bind(this)(e)}),g.each(function(e){h.bind(this)(e),m.bind(this)(e)});var y=Object.keys(s._plots);for(n=0;n<y.length;n++){t=y[n];var b=s._plots[t];if(b.imagelayer){var x=b.imagelayer.selectAll("image").data(u[t]||[]);x.enter().append("image"),x.exit().remove(),x.each(function(e){h.bind(this)(e),m.bind(this)(e)})}}}},{"../../constants/xmlns_namespaces":674,"../../plots/cartesian/axes":744,"../drawing":595,d3:148}],621:[function(e,t,n){"use strict";t.exports={moduleType:"component",name:"images",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("images"),draw:e("./draw"),convertCoords:e("./convert_coords")}},{"../../plots/cartesian/include_components":755,"./attributes":617,"./convert_coords":618,"./defaults":619,"./draw":620}],622:[function(e,t,n){"use strict";n.isRightAnchor=function(e){return"right"===e.xanchor||"auto"===e.xanchor&&e.x>=2/3},n.isCenterAnchor=function(e){return"center"===e.xanchor||"auto"===e.xanchor&&e.x>1/3&&e.x<2/3},n.isBottomAnchor=function(e){return"bottom"===e.yanchor||"auto"===e.yanchor&&e.y<=1/3},n.isMiddleAnchor=function(e){return"middle"===e.yanchor||"auto"===e.yanchor&&e.y>1/3&&e.y<2/3}},{}],623:[function(e,t,n){"use strict";var r=e("../../plots/font_attributes"),a=e("../color/attributes");t.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:a.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:r({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},x:{valType:"number",min:-2,max:3,dflt:1.02,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,dflt:1,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":771,"../color/attributes":569}],624:[function(e,t,n){"use strict";t.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,textOffsetX:40}},{}],625:[function(e,t,n){"use strict";var r=e("../../registry"),a=e("../../lib"),i=e("../../plot_api/plot_template"),o=e("./attributes"),s=e("../../plots/layout_attributes"),l=e("./helpers");t.exports=function(e,t,n){for(var u,c,f,d,p=e.legend||{},h=0,m=!1,v="normal",g=0;g<n.length;g++){var y=n[g];y.visible&&((y.showlegend||y._dfltShowLegend)&&(h++,y.showlegend&&(m=!0,(r.traceIs(y,"pie")||!0===y._input.showlegend)&&h++)),(r.traceIs(y,"bar")&&"stack"===t.barmode||-1!==["tonextx","tonexty"].indexOf(y.fill))&&(v=l.isGrouped({traceorder:v})?"grouped+reversed":"reversed"),void 0!==y.legendgroup&&""!==y.legendgroup&&(v=l.isReversed({traceorder:v})?"reversed+grouped":"grouped"))}var b=a.coerce(e,t,s,"showlegend",m&&h>1);if(!1!==b){var x=i.newContainer(t,"legend");if(w("bgcolor",t.paper_bgcolor),w("bordercolor"),w("borderwidth"),a.coerceFont(w,"font",t.font),w("orientation"),"h"===x.orientation){var _=e.xaxis;_&&_.rangeslider&&_.rangeslider.visible?(u=0,f="left",c=1.1,d="bottom"):(u=0,f="left",c=-.1,d="top")}w("traceorder",v),l.isGrouped(t.legend)&&w("tracegroupgap"),w("x",u),w("xanchor",f),w("y",c),w("yanchor",d),a.noneOrAll(p,x,["x","y"])}function w(e,t){return a.coerce(p,x,o,e,t)}}},{"../../lib":696,"../../plot_api/plot_template":734,"../../plots/layout_attributes":799,"../../registry":827,"./attributes":623,"./helpers":629}],626:[function(e,t,n){"use strict";var r=e("d3"),a=e("../../lib"),i=e("../../plots/plots"),o=e("../../registry"),s=e("../../lib/events"),l=e("../dragelement"),u=e("../drawing"),c=e("../color"),f=e("../../lib/svg_text_utils"),d=e("./handle_click"),p=e("./constants"),h=e("../../constants/interactions"),m=e("../../constants/alignment"),v=m.LINE_SPACING,g=m.FROM_TL,y=m.FROM_BR,b=e("./get_legend_data"),x=e("./style"),_=e("./helpers"),w=e("./anchor_utils"),T=h.DBLCLICKDELAY;function k(e,t,n,r,a){var i=n.data()[0][0].trace,o={event:a,node:n.node(),curveNumber:i.index,expandedIndex:i._expandedIndex,data:e.data,layout:e.layout,frames:e._transitionData._frames,config:e._context,fullData:e._fullData,fullLayout:e._fullLayout};i._group&&(o.group=i._group),"pie"===i.type&&(o.label=n.datum()[0].label);var l=s.triggerHandler(e,"plotly_legendclick",o);if(!1!==l)if(1===r)t._clickTimeout=setTimeout(function(){d(n,e,r)},T);else if(2===r){t._clickTimeout&&clearTimeout(t._clickTimeout),e._legendMouseDownTime=0;var u=s.triggerHandler(e,"plotly_legenddoubleclick",o);!1!==u&&d(n,e,r)}}function C(e,t,n){var r=e.data()[0][0],i=t._fullLayout,s=r.trace,l=o.traceIs(s,"pie"),c=s.index,d=l?r.label:s.name,h=t._context.edits.legendText&&!l,m=a.ensureSingle(e,"text","legendtext");function g(n){f.convertToTspans(n,t,function(){!function(e,t){var n=e.data()[0][0];if(n.trace.showlegend){var r,a,i=e.select("g[class*=math-group]"),o=i.node(),s=t._fullLayout.legend.font.size*v;if(o){var l=u.bBox(o);r=l.height,a=l.width,u.setTranslate(i,0,r/4)}else{var c=e.select(".legendtext"),d=f.lineCount(c),h=c.node();r=s*d,a=h?u.bBox(h).width:0;var m=s*(.3+(1-d)/2);f.positionText(c,p.textOffsetX,m)}r=Math.max(r,16)+3,n.height=r,n.width=a}else e.remove()}(e,t)})}m.attr("text-anchor","start").classed("user-select-none",!0).call(u.font,i.legend.font).text(h?E(d,n):d),f.positionText(m,p.textOffsetX,0),h?m.call(f.makeEditable,{gd:t,text:d}).call(g).on("edit",function(e){this.text(E(e,n)).call(g);var i=r.trace._fullInput||{},s={};if(o.hasTransform(i,"groupby")){var l=o.getTransformIndices(i,"groupby"),u=l[l.length-1],f=a.keyedContainer(i,"transforms["+u+"].styles","target","value.name");f.set(r.trace._group,e),s=f.constructUpdate()}else s.name=e;return o.call("restyle",t,s,c)}):g(m)}function E(e,t){var n=Math.max(4,t);if(e&&e.trim().length>=n/2)return e;for(var r=n-(e=e||"").length;r>0;r--)e+=" ";return e}function M(e,t){var n,i=1,o=a.ensureSingle(e,"rect","legendtoggle",function(e){e.style("cursor","pointer").attr("pointer-events","all").call(c.fill,"rgba(0,0,0,0)")});o.on("mousedown",function(){(n=(new Date).getTime())-t._legendMouseDownTime<T?i+=1:(i=1,t._legendMouseDownTime=n)}),o.on("mouseup",function(){if(!t._dragged&&!t._editing){var n=t._fullLayout.legend;(new Date).getTime()-t._legendMouseDownTime>T&&(i=Math.max(i-1,1)),k(t,n,e,i,r.event)}})}function A(e,t,n){var a=e._fullLayout,i=a.legend,o=i.borderwidth,s=_.isGrouped(i),l=0;if(i._width=0,i._height=0,_.isVertical(i))s&&t.each(function(e,t){u.setTranslate(this,0,t*i.tracegroupgap)}),n.each(function(e){var t=e[0],n=t.height,r=t.width;u.setTranslate(this,o,5+o+i._height+n/2),i._height+=n,i._width=Math.max(i._width,r)}),i._width+=45+2*o,i._height+=10+2*o,s&&(i._height+=(i._lgroupsLength-1)*i.tracegroupgap),l=40;else if(s){for(var c=[i._width],f=t.data(),d=0,p=f.length;d<p;d++){var h=f[d].map(function(e){return e[0].width}),m=40+Math.max.apply(null,h);i._width+=i.tracegroupgap+m,c.push(i._width)}t.each(function(e,t){u.setTranslate(this,c[t],0)}),t.each(function(){var e=r.select(this),t=e.selectAll("g.traces"),n=0;t.each(function(e){var t=e[0],r=t.height;u.setTranslate(this,0,5+o+n+r/2),n+=r}),i._height=Math.max(i._height,n)}),i._height+=10+2*o,i._width+=2*o}else{var v,g=0,y=0,b=0,x=0,w=0,T=i.tracegroupgap||5;n.each(function(e){b=Math.max(40+e[0].width,b),w+=40+e[0].width+T}),v=a._size.w>o+w-T,n.each(function(e){var t=e[0],n=v?40+e[0].width:b;o+x+T+n>a._size.w&&(x=0,g+=y,i._height=i._height+y,y=0),u.setTranslate(this,o+x,5+o+t.height/2+g),i._width+=T+n,i._height=Math.max(i._height,t.height),x+=T+n,y=Math.max(t.height,y)}),i._width+=2*o,i._height+=10+2*o}i._width=Math.ceil(i._width),i._height=Math.ceil(i._height);var k=e._context.edits.legendText||e._context.edits.legendPosition;n.each(function(e){var t=e[0],n=r.select(this).select(".legendtoggle");u.setRect(n,0,-t.height/2,(k?0:i._width)+l,t.height)})}function S(e){var t=e._fullLayout,n=t.legend,r="left";w.isRightAnchor(n)?r="right":w.isCenterAnchor(n)&&(r="center");var a="top";w.isBottomAnchor(n)?a="bottom":w.isMiddleAnchor(n)&&(a="middle"),i.autoMargin(e,"legend",{x:n.x,y:n.y,l:n._width*g[r],r:n._width*y[r],b:n._height*y[a],t:n._height*g[a]})}t.exports=function(e){var t=e._fullLayout,n="legend"+t._uid;if(t._infolayer&&e.calcdata){e._legendMouseDownTime||(e._legendMouseDownTime=0);var s=t.legend,f=t.showlegend&&b(e.calcdata,s),d=t.hiddenlabels||[];if(!t.showlegend||!f.length)return t._infolayer.selectAll(".legend").remove(),t._topdefs.select("#"+n).remove(),void i.autoMargin(e,"legend");for(var h=0,m=0;m<f.length;m++)for(var v=0;v<f[m].length;v++){var _=f[m][v][0],T=_.trace,E=o.traceIs(T,"pie"),O=E?_.label:T.name;h=Math.max(h,O&&O.length||0)}var P=!1,R=a.ensureSingle(t._infolayer,"g","legend",function(e){e.attr("pointer-events","all"),P=!0}),L=a.ensureSingleById(t._topdefs,"clipPath",n,function(e){e.append("rect")}),D=a.ensureSingle(R,"rect","bg",function(e){e.attr("shape-rendering","crispEdges")});D.call(c.stroke,s.bordercolor).call(c.fill,s.bgcolor).style("stroke-width",s.borderwidth+"px");var I=a.ensureSingle(R,"g","scrollbox"),z=a.ensureSingle(R,"rect","scrollbar",function(e){e.attr({rx:20,ry:3,width:0,height:0}).call(c.fill,"#808BA4")}),j=I.selectAll("g.groups").data(f);j.enter().append("g").attr("class","groups"),j.exit().remove();var N=j.selectAll("g.traces").data(a.identity);N.enter().append("g").attr("class","traces"),N.exit().remove(),N.call(x,e).style("opacity",function(e){var t=e[0].trace;return o.traceIs(t,"pie")?-1!==d.indexOf(e[0].label)?.5:1:"legendonly"===t.visible?.5:1}).each(function(){r.select(this).call(C,e,h).call(M,e)}),a.syncOrAsync([i.previousPromises,function(){P&&(A(e,j,N),S(e));var c=t.width,f=t.height;A(e,j,N),s._height>f?function(e){var t=e._fullLayout.legend,n="left";w.isRightAnchor(t)?n="right":w.isCenterAnchor(t)&&(n="center"),i.autoMargin(e,"legend",{x:t.x,y:.5,l:t._width*g[n],r:t._width*y[n],b:0,t:0})}(e):S(e);var d=t._size,h=d.l+d.w*s.x,m=d.t+d.h*(1-s.y);w.isRightAnchor(s)?h-=s._width:w.isCenterAnchor(s)&&(h-=s._width/2),w.isBottomAnchor(s)?m-=s._height:w.isMiddleAnchor(s)&&(m-=s._height/2);var v=s._width,b=d.w;v>b?(h=d.l,v=b):(h+v>c&&(h=c-v),h<0&&(h=0),v=Math.min(c-h,s._width));var x,_,T,C,E=s._height,M=d.h;if(E>M?(m=d.t,E=M):(m+E>f&&(m=f-E),m<0&&(m=0),E=Math.min(f-m,s._height)),u.setTranslate(R,h,m),z.on(".drag",null),R.on("wheel",null),s._height<=E||e._context.staticPlot)D.attr({width:v-s.borderwidth,height:E-s.borderwidth,x:s.borderwidth/2,y:s.borderwidth/2}),u.setTranslate(I,0,0),L.select("rect").attr({width:v-2*s.borderwidth,height:E-2*s.borderwidth,x:s.borderwidth,y:s.borderwidth}),u.setClipUrl(I,n),u.setRect(z,0,0,0,0),delete s._scrollY;else{var O,F,B=Math.max(p.scrollBarMinHeight,E*E/s._height),V=E-B-2*p.scrollBarMargin,U=s._height-E,G=V/U,H=Math.min(s._scrollY||0,U);D.attr({width:v-2*s.borderwidth+p.scrollBarWidth+p.scrollBarMargin,height:E-s.borderwidth,x:s.borderwidth/2,y:s.borderwidth/2}),L.select("rect").attr({width:v-2*s.borderwidth+p.scrollBarWidth+p.scrollBarMargin,height:E-2*s.borderwidth,x:s.borderwidth,y:s.borderwidth+H}),u.setClipUrl(I,n),q(H,B,G),R.on("wheel",function(){q(H=a.constrain(s._scrollY+r.event.deltaY/V*U,0,U),B,G),0!==H&&H!==U&&r.event.preventDefault()});var W=r.behavior.drag().on("dragstart",function(){O=r.event.sourceEvent.clientY,F=H}).on("drag",function(){var e=r.event.sourceEvent;2===e.buttons||e.ctrlKey||q(H=a.constrain((e.clientY-O)/G+F,0,U),B,G)});z.call(W)}function q(t,n,r){s._scrollY=e._fullLayout.legend._scrollY=t,u.setTranslate(I,0,-t),u.setRect(z,v,p.scrollBarMargin+t*r,p.scrollBarWidth,n),L.select("rect").attr({y:s.borderwidth+t})}e._context.edits.legendPosition&&(R.classed("cursor-move",!0),l.init({element:R.node(),gd:e,prepFn:function(){var e=u.getTranslate(R);T=e.x,C=e.y},moveFn:function(e,t){var n=T+e,r=C+t;u.setTranslate(R,n,r),x=l.align(n,0,d.l,d.l+d.w,s.xanchor),_=l.align(r,0,d.t+d.h,d.t,s.yanchor)},doneFn:function(){void 0!==x&&void 0!==_&&o.call("relayout",e,{"legend.x":x,"legend.y":_})},clickFn:function(n,r){var a=t._infolayer.selectAll("g.traces").filter(function(){var e=this.getBoundingClientRect();return r.clientX>=e.left&&r.clientX<=e.right&&r.clientY>=e.top&&r.clientY<=e.bottom});a.size()>0&&k(e,R,a,n,r)}}))}],e)}}},{"../../constants/alignment":668,"../../constants/interactions":672,"../../lib":696,"../../lib/events":684,"../../lib/svg_text_utils":720,"../../plots/plots":808,"../../registry":827,"../color":570,"../dragelement":592,"../drawing":595,"./anchor_utils":622,"./constants":624,"./get_legend_data":627,"./handle_click":628,"./helpers":629,"./style":631,d3:148}],627:[function(e,t,n){"use strict";var r=e("../../registry"),a=e("./helpers");t.exports=function(e,t){var n,i,o={},s=[],l=!1,u={},c=0;function f(e,n){if(""!==e&&a.isGrouped(t))-1===s.indexOf(e)?(s.push(e),l=!0,o[e]=[[n]]):o[e].push([n]);else{var r="~~i"+c;s.push(r),o[r]=[[n]],c++}}for(n=0;n<e.length;n++){var d=e[n],p=d[0],h=p.trace,m=h.legendgroup;if(h.visible&&h.showlegend)if(r.traceIs(h,"pie"))for(u[m]||(u[m]={}),i=0;i<d.length;i++){var v=d[i].label;u[m][v]||(f(m,{label:v,color:d[i].color,i:d[i].i,trace:h,pts:d[i].pts}),u[m][v]=!0)}else f(m,p)}if(!s.length)return[];var g,y,b=s.length;if(l&&a.isGrouped(t))for(y=new Array(b),n=0;n<b;n++)g=o[s[n]],y[n]=a.isReversed(t)?g.reverse():g;else{for(y=[new Array(b)],n=0;n<b;n++)g=o[s[n]][0],y[0][a.isReversed(t)?b-n-1:n]=g;b=1}return t._lgroupsLength=b,y}},{"../../registry":827,"./helpers":629}],628:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("../../registry"),i=!0;t.exports=function(e,t,n){if(!t._dragged&&!t._editing){var o,s,l,u,c,f=t._fullLayout.hiddenlabels?t._fullLayout.hiddenlabels.slice():[],d=e.data()[0][0],p=t._fullData,h=d.trace,m=h.legendgroup,v={},g=[],y=[],b=[];if(1===n&&i&&t.data&&t._context.showTips?(r.notifier(r._(t,"Double-click on legend to isolate one trace"),"long"),i=!1):i=!1,a.traceIs(h,"pie")){var x=d.label,_=f.indexOf(x);1===n?-1===_?f.push(x):f.splice(_,1):2===n&&(f=[],t.calcdata[0].forEach(function(e){x!==e.label&&f.push(e.label)}),t._fullLayout.hiddenlabels&&t._fullLayout.hiddenlabels.length===f.length&&-1===_&&(f=[])),a.call("relayout",t,"hiddenlabels",f)}else{var w,T=m&&m.length,k=[];if(T)for(o=0;o<p.length;o++)(w=p[o]).visible&&w.legendgroup===m&&k.push(o);if(1===n){var C;switch(h.visible){case!0:C="legendonly";break;case!1:C=!1;break;case"legendonly":C=!0}if(T)for(o=0;o<p.length;o++)!1!==p[o].visible&&p[o].legendgroup===m&&L(p[o],C);else L(h,C)}else if(2===n){var E,M,A,S=!0;for(o=0;o<p.length;o++)if(!(E=p[o]===h)&&!(M=T&&p[o].legendgroup===m)&&!0===p[o].visible&&!a.traceIs(p[o],"notLegendIsolatable")){S=!1;break}for(o=0;o<p.length;o++)if(!1!==p[o].visible&&!a.traceIs(p[o],"notLegendIsolatable"))switch(h.visible){case"legendonly":L(p[o],!0);break;case!0:A=!!S||"legendonly",E=p[o]===h,M=E||T&&p[o].legendgroup===m,L(p[o],!!M||A)}}for(o=0;o<y.length;o++)if(l=y[o]){var O=l.constructUpdate(),P=Object.keys(O);for(s=0;s<P.length;s++)u=P[s],(v[u]=v[u]||[])[b[o]]=O[u]}for(c=Object.keys(v),o=0;o<c.length;o++)for(u=c[o],s=0;s<g.length;s++)v[u].hasOwnProperty(s)||(v[u][s]=void 0);a.call("restyle",t,v,g)}}function R(e,t,n){var r=g.indexOf(e),a=v[t];return a||(a=v[t]=[]),-1===g.indexOf(e)&&(g.push(e),r=g.length-1),a[r]=n,r}function L(e,t){var n=e._fullInput;if(a.hasTransform(n,"groupby")){var i=y[n.index];if(!i){var o=a.getTransformIndices(n,"groupby"),s=o[o.length-1];i=r.keyedContainer(n,"transforms["+s+"].styles","target","value.visible"),y[n.index]=i}var l=i.get(e._group);void 0===l&&(l=!0),!1!==l&&i.set(e._group,t),b[n.index]=R(n.index,"visible",!1!==n.visible)}else{var u=!1!==n.visible&&t;R(n.index,"visible",u)}}}},{"../../lib":696,"../../registry":827}],629:[function(e,t,n){"use strict";n.isGrouped=function(e){return-1!==(e.traceorder||"").indexOf("grouped")},n.isVertical=function(e){return"h"!==e.orientation},n.isReversed=function(e){return-1!==(e.traceorder||"").indexOf("reversed")}},{}],630:[function(e,t,n){"use strict";t.exports={moduleType:"component",name:"legend",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),draw:e("./draw"),style:e("./style")}},{"./attributes":623,"./defaults":625,"./draw":626,"./style":631}],631:[function(e,t,n){"use strict";var r=e("d3"),a=e("../../registry"),i=e("../../lib"),o=e("../drawing"),s=e("../color"),l=e("../../traces/scatter/subtypes"),u=e("../../traces/pie/style_one");t.exports=function(e,t){e.each(function(e){var t=r.select(this),n=i.ensureSingle(t,"g","layers");n.style("opacity",e[0].trace.opacity);var a=n.selectAll("g.legendfill").data([e]);a.enter().append("g").classed("legendfill",!0);var o=n.selectAll("g.legendlines").data([e]);o.enter().append("g").classed("legendlines",!0);var s=n.selectAll("g.legendsymbols").data([e]);s.enter().append("g").classed("legendsymbols",!0),s.selectAll("g.legendpoints").data([e]).enter().append("g").classed("legendpoints",!0)}).each(function(e){var t=e[0].trace,n=t.marker||{},i=n.line||{},o=r.select(this).select("g.legendpoints").selectAll("path.legendbar").data(a.traceIs(t,"bar")?[e]:[]);o.enter().append("path").classed("legendbar",!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)"),o.exit().remove(),o.each(function(e){var t=r.select(this),a=e[0],o=(a.mlw+1||i.width+1)-1;t.style("stroke-width",o+"px").call(s.fill,a.mc||n.color),o&&t.call(s.stroke,a.mlc||i.color)})}).each(function(e){var t=e[0].trace,n=r.select(this).select("g.legendpoints").selectAll("path.legendbox").data(a.traceIs(t,"box-violin")&&t.visible?[e]:[]);n.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)"),n.exit().remove(),n.each(function(){var e=t.line.width,n=r.select(this);n.style("stroke-width",e+"px").call(s.fill,t.fillcolor),e&&s.stroke(n,t.line.color)})}).each(function(e){var t=e[0].trace,n=r.select(this).select("g.legendpoints").selectAll("path.legendpie").data(a.traceIs(t,"pie")&&t.visible?[e]:[]);n.enter().append("path").classed("legendpie",!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)"),n.exit().remove(),n.size()&&n.call(u,e[0],t)}).each(function(e){var n=e[0].trace,a=n.visible&&n.fill&&"none"!==n.fill,i=l.hasLines(n),s=n.contours,u=!1,c=!1;if(s){var f=s.coloring;"lines"===f?u=!0:i="none"===f||"heatmap"===f||s.showlines,"constraint"===s.type?a="="!==s._operation:"fill"!==f&&"heatmap"!==f||(c=!0)}var d=l.hasMarkers(n)||l.hasText(n)||!a&&!c?"M5,0":i||u?"M5,-2":"M5,-3",p=r.select(this),h=p.select(".legendfill").selectAll("path").data(a||c?[e]:[]);h.enter().append("path").classed("js-fill",!0),h.exit().remove(),h.attr("d",d+"h30v6h-30z").call(a?o.fillGroupStyle:function(e){if(e.size()){var r="legendfill-"+n.uid;o.gradient(e,t,r,"horizontalreversed",n.colorscale,"fill")}});var m=p.select(".legendlines").selectAll("path").data(i||u?[e]:[]);m.enter().append("path").classed("js-line",!0),m.exit().remove(),m.attr("d",d+(u?"l30,0.0001":"h30")).call(i?o.lineGroupStyle:function(e){if(e.size()){var r="legendline-"+n.uid;o.lineGroupStyle(e),o.gradient(e,t,r,"horizontalreversed",n.colorscale,"stroke")}})}).each(function(e){var n,a,s=e[0],u=s.trace,c=l.hasMarkers(u),f=l.hasText(u),d=l.hasLines(u);function p(e,t,n){var r=i.nestedProperty(u,e).get(),a=i.isArrayOrTypedArray(r)&&t?t(r):r;if(n){if(a<n[0])return n[0];if(a>n[1])return n[1]}return a}function h(e){return e[0]}if(c||f||d){var m={},v={};if(c){m.mc=p("marker.color",h),m.mx=p("marker.symbol",h),m.mo=p("marker.opacity",i.mean,[.2,1]),m.mlc=p("marker.line.color",h),m.mlw=p("marker.line.width",i.mean,[0,5]),v.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var g=p("marker.size",i.mean,[2,16]);m.ms=g,v.marker.size=g}d&&(v.line={width:p("line.width",h,[0,10])}),f&&(m.tx="Aa",m.tp=p("textposition",h),m.ts=10,m.tc=p("textfont.color",h),m.tf=p("textfont.family",h)),n=[i.minExtend(s,m)],(a=i.minExtend(u,v)).selectedpoints=null}var y=r.select(this).select("g.legendpoints"),b=y.selectAll("path.scatterpts").data(c?n:[]);b.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform","translate(20,0)"),b.exit().remove(),b.call(o.pointStyle,a,t),c&&(n[0].mrc=3);var x=y.selectAll("g.pointtext").data(f?n:[]);x.enter().append("g").classed("pointtext",!0).append("text").attr("transform","translate(20,0)"),x.exit().remove(),x.selectAll("text").call(o.textPointStyle,a,t)}).each(function(e){var t=e[0].trace,n=r.select(this).select("g.legendpoints").selectAll("path.legendcandle").data("candlestick"===t.type&&t.visible?[e,e]:[]);n.enter().append("path").classed("legendcandle",!0).attr("d",function(e,t){return t?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform","translate(20,0)").style("stroke-miterlimit",1),n.exit().remove(),n.each(function(e,n){var a=t[n?"increasing":"decreasing"],i=a.line.width,o=r.select(this);o.style("stroke-width",i+"px").call(s.fill,a.fillcolor),i&&s.stroke(o,a.line.color)})}).each(function(e){var t=e[0].trace,n=r.select(this).select("g.legendpoints").selectAll("path.legendohlc").data("ohlc"===t.type&&t.visible?[e,e]:[]);n.enter().append("path").classed("legendohlc",!0).attr("d",function(e,t){return t?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform","translate(20,0)").style("stroke-miterlimit",1),n.exit().remove(),n.each(function(e,n){var a=t[n?"increasing":"decreasing"],i=a.line.width,l=r.select(this);l.style("fill","none").call(o.dashLine,a.line.dash,i),i&&s.stroke(l,a.line.color)})})}},{"../../lib":696,"../../registry":827,"../../traces/pie/style_one":1029,"../../traces/scatter/subtypes":1067,"../color":570,"../drawing":595,d3:148}],632:[function(e,t,n){"use strict";var r=e("../../registry"),a=e("../../plots/plots"),i=e("../../plots/cartesian/axis_ids"),o=e("../../lib"),s=e("../../../build/ploticon"),l=o._,u=t.exports={};function c(e,t){var n,a,o=t.currentTarget,s=o.getAttribute("data-attr"),l=o.getAttribute("data-val")||!0,u=e._fullLayout,c={},f=i.list(e,null,!0),d="on";if("zoom"===s){var p,h="in"===l?.5:2,m=(1+h)/2,v=(1-h)/2;for(a=0;a<f.length;a++)if(!(n=f[a]).fixedrange)if(p=n._name,"auto"===l)c[p+".autorange"]=!0;else if("reset"===l){if(void 0===n._rangeInitial)c[p+".autorange"]=!0;else{var g=n._rangeInitial.slice();c[p+".range[0]"]=g[0],c[p+".range[1]"]=g[1]}void 0!==n._showSpikeInitial&&(c[p+".showspikes"]=n._showSpikeInitial,"on"!==d||n._showSpikeInitial||(d="off"))}else{var y=[n.r2l(n.range[0]),n.r2l(n.range[1])],b=[m*y[0]+v*y[1],m*y[1]+v*y[0]];c[p+".range[0]"]=n.l2r(b[0]),c[p+".range[1]"]=n.l2r(b[1])}u._cartesianSpikesEnabled=d}else{if("hovermode"!==s||"x"!==l&&"y"!==l){if("hovermode"===s&&"closest"===l){for(a=0;a<f.length;a++)n=f[a],"on"!==d||n.showspikes||(d="off");u._cartesianSpikesEnabled=d}}else l=u._isHoriz?"y":"x",o.setAttribute("data-val",l);c[s]=l}r.call("relayout",e,c)}function f(e,t){for(var n=t.currentTarget,a=n.getAttribute("data-attr"),i=n.getAttribute("data-val")||!0,o=e._fullLayout._subplots.gl3d,s={},l=a.split("."),u=0;u<o.length;u++)s[o[u]+"."+l[1]]=i;var c="pan"===i?i:"zoom";s.dragmode=c,r.call("relayout",e,s)}function d(e,t){for(var n=t.currentTarget,a=n.getAttribute("data-attr"),i=e._fullLayout,s=i._subplots.gl3d,l={},u=0;u<s.length;u++){var c=s[u],f=c+".camera",d=i[c]._scene;"resetDefault"===a?l[f]=null:"resetLastSave"===a&&(l[f]=o.extendDeep({},d.cameraInitial))}r.call("relayout",e,l)}function p(e,t){var n=t.currentTarget,a=n._previousVal||!1,i=e.layout,s=e._fullLayout,l=s._subplots.gl3d,u=["xaxis","yaxis","zaxis"],c=["showspikes","spikesides","spikethickness","spikecolor"],f={},d={},p={};if(a)p=o.extendDeep(i,a),n._previousVal=null;else{p={"allaxes.showspikes":!1};for(var h=0;h<l.length;h++){var m=l[h],v=s[m],g=f[m]={};g.hovermode=v.hovermode,p[m+".hovermode"]=!1;for(var y=0;y<3;y++){var b=u[y];d=g[b]={};for(var x=0;x<c.length;x++){var _=c[x];d[_]=v[b][_]}}}n._previousVal=o.extendDeep({},f)}r.call("relayout",e,p)}function h(e,t){for(var n=t.currentTarget,a=n.getAttribute("data-attr"),i=n.getAttribute("data-val")||!0,o=e._fullLayout,s=o._subplots.geo,l=0;l<s.length;l++){var u=s[l],c=o[u];if("zoom"===a){var f=c.projection.scale,d="in"===i?2*f:.5*f;r.call("relayout",e,u+".projection.scale",d)}else"reset"===a&&v(e,"geo")}}function m(e){var t,n=e._fullLayout;t=n._has("cartesian")?n._isHoriz?"y":"x":"closest";var a=!e._fullLayout.hovermode&&t;r.call("relayout",e,"hovermode",a)}function v(e,t){for(var n=e._fullLayout,a=n._subplots[t],i={},o=0;o<a.length;o++)for(var s=a[o],l=n[s]._subplot,u=l.viewInitial,c=Object.keys(u),f=0;f<c.length;f++){var d=c[f];i[s+"."+d]=u[d]}r.call("relayout",e,i)}u.toImage={name:"toImage",title:function(e){var t=e._context.toImageButtonOptions||{},n=t.format||"png";return l(e,"png"===n?"Download plot as a png":"Download plot")},icon:s.camera,click:function(e){var t=e._context.toImageButtonOptions,n={format:t.format||"png"};o.notifier(l(e,"Taking snapshot - this may take a few seconds"),"long"),"svg"!==n.format&&o.isIE()&&(o.notifier(l(e,"IE only supports svg.  Changing format to svg."),"long"),n.format="svg"),["filename","width","height","scale"].forEach(function(e){t[e]&&(n[e]=t[e])}),r.call("downloadImage",e,n).then(function(t){o.notifier(l(e,"Snapshot succeeded")+" - "+t,"long")}).catch(function(){o.notifier(l(e,"Sorry, there was a problem downloading your snapshot!"),"long")})}},u.sendDataToCloud={name:"sendDataToCloud",title:function(e){return l(e,"Edit in Chart Studio")},icon:s.disk,click:function(e){a.sendDataToCloud(e)}},u.zoom2d={name:"zoom2d",title:function(e){return l(e,"Zoom")},attr:"dragmode",val:"zoom",icon:s.zoombox,click:c},u.pan2d={name:"pan2d",title:function(e){return l(e,"Pan")},attr:"dragmode",val:"pan",icon:s.pan,click:c},u.select2d={name:"select2d",title:function(e){return l(e,"Box Select")},attr:"dragmode",val:"select",icon:s.selectbox,click:c},u.lasso2d={name:"lasso2d",title:function(e){return l(e,"Lasso Select")},attr:"dragmode",val:"lasso",icon:s.lasso,click:c},u.zoomIn2d={name:"zoomIn2d",title:function(e){return l(e,"Zoom in")},attr:"zoom",val:"in",icon:s.zoom_plus,click:c},u.zoomOut2d={name:"zoomOut2d",title:function(e){return l(e,"Zoom out")},attr:"zoom",val:"out",icon:s.zoom_minus,click:c},u.autoScale2d={name:"autoScale2d",title:function(e){return l(e,"Autoscale")},attr:"zoom",val:"auto",icon:s.autoscale,click:c},u.resetScale2d={name:"resetScale2d",title:function(e){return l(e,"Reset axes")},attr:"zoom",val:"reset",icon:s.home,click:c},u.hoverClosestCartesian={name:"hoverClosestCartesian",title:function(e){return l(e,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:s.tooltip_basic,gravity:"ne",click:c},u.hoverCompareCartesian={name:"hoverCompareCartesian",title:function(e){return l(e,"Compare data on hover")},attr:"hovermode",val:function(e){return e._fullLayout._isHoriz?"y":"x"},icon:s.tooltip_compare,gravity:"ne",click:c},u.zoom3d={name:"zoom3d",title:function(e){return l(e,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:s.zoombox,click:f},u.pan3d={name:"pan3d",title:function(e){return l(e,"Pan")},attr:"scene.dragmode",val:"pan",icon:s.pan,click:f},u.orbitRotation={name:"orbitRotation",title:function(e){return l(e,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:s["3d_rotate"],click:f},u.tableRotation={name:"tableRotation",title:function(e){return l(e,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:s["z-axis"],click:f},u.resetCameraDefault3d={name:"resetCameraDefault3d",title:function(e){return l(e,"Reset camera to default")},attr:"resetDefault",icon:s.home,click:d},u.resetCameraLastSave3d={name:"resetCameraLastSave3d",title:function(e){return l(e,"Reset camera to last save")},attr:"resetLastSave",icon:s.movie,click:d},u.hoverClosest3d={name:"hoverClosest3d",title:function(e){return l(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:s.tooltip_basic,gravity:"ne",click:p},u.zoomInGeo={name:"zoomInGeo",title:function(e){return l(e,"Zoom in")},attr:"zoom",val:"in",icon:s.zoom_plus,click:h},u.zoomOutGeo={name:"zoomOutGeo",title:function(e){return l(e,"Zoom out")},attr:"zoom",val:"out",icon:s.zoom_minus,click:h},u.resetGeo={name:"resetGeo",title:function(e){return l(e,"Reset")},attr:"reset",val:null,icon:s.autoscale,click:h},u.hoverClosestGeo={name:"hoverClosestGeo",title:function(e){return l(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:s.tooltip_basic,gravity:"ne",click:m},u.hoverClosestGl2d={name:"hoverClosestGl2d",title:function(e){return l(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:s.tooltip_basic,gravity:"ne",click:m},u.hoverClosestPie={name:"hoverClosestPie",title:function(e){return l(e,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:s.tooltip_basic,gravity:"ne",click:m},u.toggleHover={name:"toggleHover",title:function(e){return l(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:s.tooltip_basic,gravity:"ne",click:function(e,t){m(e),p(e,t)}},u.resetViews={name:"resetViews",title:function(e){return l(e,"Reset views")},icon:s.home,click:function(e,t){var n=t.currentTarget;n.setAttribute("data-attr","zoom"),n.setAttribute("data-val","reset"),c(e,t),n.setAttribute("data-attr","resetLastSave"),d(e,t),v(e,"geo"),v(e,"mapbox")}},u.toggleSpikelines={name:"toggleSpikelines",title:function(e){return l(e,"Toggle Spike Lines")},icon:s.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(e){var t=e._fullLayout;t._cartesianSpikesEnabled="on"===t._cartesianSpikesEnabled?"off":"on";var n=function(e){for(var t,n,r=e._fullLayout,a=i.list(e,null,!0),o={},s=0;s<a.length;s++)t=a[s],n=t._name,o[n+".showspikes"]="on"===r._cartesianSpikesEnabled||t._showSpikeInitial;return o}(e);r.call("relayout",e,n)}},u.resetViewMapbox={name:"resetViewMapbox",title:function(e){return l(e,"Reset view")},attr:"reset",icon:s.home,click:function(e){v(e,"mapbox")}}},{"../../../build/ploticon":2,"../../lib":696,"../../plots/cartesian/axis_ids":747,"../../plots/plots":808,"../../registry":827}],633:[function(e,t,n){"use strict";n.manage=e("./manage")},{"./manage":634}],634:[function(e,t,n){"use strict";var r=e("../../plots/cartesian/axis_ids"),a=e("../../traces/scatter/subtypes"),i=e("../../registry"),o=e("./modebar"),s=e("./buttons");t.exports=function(e){var t=e._fullLayout,n=e._context,l=t._modeBar;if(n.displayModeBar){if(!Array.isArray(n.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(n.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var u,c=n.modeBarButtons;u=Array.isArray(c)&&c.length?function(e){for(var t=0;t<e.length;t++)for(var n=e[t],r=0;r<n.length;r++){var a=n[r];if("string"==typeof a){if(void 0===s[a])throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));e[t][r]=s[a]}}return e}(c):function(e,t,n){var o=e._fullLayout,l=e._fullData,u=o._has("cartesian"),c=o._has("gl3d"),f=o._has("geo"),d=o._has("pie"),p=o._has("gl2d"),h=o._has("ternary"),m=o._has("mapbox"),v=o._has("polar"),g=function(e){for(var t=r.list({_fullLayout:e},null,!0),n=0;n<t.length;n++)if(!t[n].fixedrange)return!1;return!0}(o),y=[];function b(e){if(e.length){for(var n=[],r=0;r<e.length;r++){var a=e[r];-1===t.indexOf(a)&&n.push(s[a])}y.push(n)}}b(["toImage","sendDataToCloud"]);var x=[],_=[],w=[],T=[];return(u||p||d||h)+f+c+m+v>1?(_=["toggleHover"],w=["resetViews"]):f?(x=["zoomInGeo","zoomOutGeo"],_=["hoverClosestGeo"],w=["resetGeo"]):c?(_=["hoverClosest3d"],w=["resetCameraDefault3d","resetCameraLastSave3d"]):m?(_=["toggleHover"],w=["resetViewMapbox"]):_=p?["hoverClosestGl2d"]:d?["hoverClosestPie"]:["toggleHover"],u&&(_=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),!u&&!p||g||(x=["zoomIn2d","zoomOut2d","autoScale2d"],"resetViews"!==w[0]&&(w=["resetScale2d"])),c?T=["zoom3d","pan3d","orbitRotation","tableRotation"]:(u||p)&&!g||h?T=["zoom2d","pan2d"]:m||f?T=["pan2d"]:v&&(T=["zoom2d"]),function(e){for(var t=!1,n=0;n<e.length&&!t;n++){var r=e[n];r._module&&r._module.selectPoints&&(i.traceIs(r,"scatter-like")?(a.hasMarkers(r)||a.hasText(r))&&(t=!0):i.traceIs(r,"box-violin")&&"all"!==r.boxpoints&&"all"!==r.points||(t=!0))}return t}(l)&&T.push("select2d","lasso2d"),b(T),b(x.concat(w)),b(_),function(e,t){if(t.length)if(Array.isArray(t[0]))for(var n=0;n<t.length;n++)e.push(t[n]);else e.push(t);return e}(y,n)}(e,n.modeBarButtonsToRemove,n.modeBarButtonsToAdd),l?l.update(e,u):t._modeBar=o(e,u)}else l&&(l.destroy(),delete t._modeBar)}},{"../../plots/cartesian/axis_ids":747,"../../registry":827,"../../traces/scatter/subtypes":1067,"./buttons":632,"./modebar":635}],635:[function(e,t,n){"use strict";var r=e("d3"),a=e("fast-isnumeric"),i=e("../../lib"),o=e("../../../build/ploticon"),s=new DOMParser;function l(e){this.container=e.container,this.element=document.createElement("div"),this.update(e.graphInfo,e.buttons),this.container.appendChild(this.element)}var u=l.prototype;u.update=function(e,t){this.graphInfo=e;var n=this.graphInfo._context,r=this.graphInfo._fullLayout,a="modebar-"+r._uid;this.element.setAttribute("id",a),this._uid=a,"hover"===n.displayModeBar?this.element.className="modebar modebar--hover":this.element.className="modebar","v"===r.modebar.orientation&&(this.element.className+=" vertical",t=t.reverse()),i.deleteRelatedStyleRule(a),i.addRelatedStyleRule(a,"#"+a,"background-color: "+r.modebar.bgcolor),i.addRelatedStyleRule(a,"#"+a+" .modebar-btn .icon path","fill: "+r.modebar.color),i.addRelatedStyleRule(a,"#"+a+" .modebar-btn:hover .icon path","fill: "+r.modebar.activecolor),i.addRelatedStyleRule(a,"#"+a+" .modebar-btn.active .icon path","fill: "+r.modebar.activecolor);var o=!this.hasButtons(t),s=this.hasLogo!==n.displaylogo,l=this.locale!==n.locale;this.locale=n.locale,(o||s||l)&&(this.removeAllButtons(),this.updateButtons(t),n.displaylogo&&("v"===r.modebar.orientation?this.element.prepend(this.getLogo()):this.element.appendChild(this.getLogo()),this.hasLogo=!0)),this.updateActiveButton()},u.updateButtons=function(e){var t=this;this.buttons=e,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(e){var n=t.createGroup();e.forEach(function(e){var r=e.name;if(!r)throw new Error("must provide button 'name' in button config");if(-1!==t.buttonsNames.indexOf(r))throw new Error("button name '"+r+"' is taken");t.buttonsNames.push(r);var a=t.createButton(e);t.buttonElements.push(a),n.appendChild(a)}),t.element.appendChild(n)})},u.createGroup=function(){var e=document.createElement("div");return e.className="modebar-group",e},u.createButton=function(e){var t=this,n=document.createElement("a");n.setAttribute("rel","tooltip"),n.className="modebar-btn";var a=e.title;void 0===a?a=e.name:"function"==typeof a&&(a=a(this.graphInfo)),(a||0===a)&&n.setAttribute("data-title",a),void 0!==e.attr&&n.setAttribute("data-attr",e.attr);var i=e.val;void 0!==i&&("function"==typeof i&&(i=i(this.graphInfo)),n.setAttribute("data-val",i));var s=e.click;if("function"!=typeof s)throw new Error("must provide button 'click' function in button config");n.addEventListener("click",function(n){e.click(t.graphInfo,n),t.updateActiveButton(n.currentTarget)}),n.setAttribute("data-toggle",e.toggle||!1),e.toggle&&r.select(n).classed("active",!0);var l=e.icon;return"function"==typeof l?n.appendChild(l()):n.appendChild(this.createIcon(l||o.question)),n.setAttribute("data-gravity",e.gravity||"n"),n},u.createIcon=function(e){var t,n=a(e.height)?Number(e.height):e.ascent-e.descent,r="http://www.w3.org/2000/svg";if(e.path){(t=document.createElementNS(r,"svg")).setAttribute("viewBox",[0,0,e.width,n].join(" ")),t.setAttribute("class","icon");var i=document.createElementNS(r,"path");i.setAttribute("d",e.path),e.transform?i.setAttribute("transform",e.transform):void 0!==e.ascent&&i.setAttribute("transform","matrix(1 0 0 -1 0 "+e.ascent+")"),t.appendChild(i)}if(e.svg){var o=s.parseFromString(e.svg,"application/xml");t=o.childNodes[0]}return t.setAttribute("height","1em"),t.setAttribute("width","1em"),t},u.updateActiveButton=function(e){var t=this.graphInfo._fullLayout,n=void 0!==e?e.getAttribute("data-attr"):null;this.buttonElements.forEach(function(e){var a=e.getAttribute("data-val")||!0,o=e.getAttribute("data-attr"),s="true"===e.getAttribute("data-toggle"),l=r.select(e);if(s)o===n&&l.classed("active",!l.classed("active"));else{var u=null===o?o:i.nestedProperty(t,o).get();l.classed("active",u===a)}})},u.hasButtons=function(e){var t=this.buttons;if(!t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n){if(e[n].length!==t[n].length)return!1;for(var r=0;r<e[n].length;r++)if(e[n][r].name!==t[n][r].name)return!1}return!0},u.getLogo=function(){var e=this.createGroup(),t=document.createElement("a");return t.href="https://plot.ly/",t.target="_blank",t.setAttribute("data-title",i._(this.graphInfo,"Produced with Plotly")),t.className="modebar-btn plotlyjsicon modebar-btn--logo",t.appendChild(this.createIcon(o.newplotlylogo)),e.appendChild(t),e},u.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},u.destroy=function(){i.removeElement(this.container.querySelector(".modebar")),i.deleteRelatedStyleRule(this._uid)},t.exports=function(e,t){var n=e._fullLayout,a=new l({graphInfo:e,container:n._paperdiv.node(),buttons:t});return n._privateplot&&r.select(a.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),a}},{"../../../build/ploticon":2,"../../lib":696,d3:148,"fast-isnumeric":214}],636:[function(e,t,n){"use strict";var r=e("../../plots/font_attributes"),a=e("../color/attributes"),i=e("../../plot_api/plot_template").templatedArray,o=i("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});t.exports={visible:{valType:"boolean",editType:"plot"},buttons:o,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:r({editType:"plot"}),bgcolor:{valType:"color",dflt:a.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:a.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":734,"../../plots/font_attributes":771,"../color/attributes":569}],637:[function(e,t,n){"use strict";t.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],638:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("../color"),i=e("../../plot_api/plot_template"),o=e("../../plots/array_container_defaults"),s=e("./attributes"),l=e("./constants");function u(e,t,n,a){var i=a.calendar;function o(n,a){return r.coerce(e,t,s.buttons,n,a)}var l=o("visible");if(l){var u=o("step");"all"!==u&&(!i||"gregorian"===i||"month"!==u&&"year"!==u?o("stepmode"):t.stepmode="backward",o("count")),o("label")}}t.exports=function(e,t,n,c,f){var d=e.rangeselector||{},p=i.newContainer(t,"rangeselector");function h(e,t){return r.coerce(d,p,s,e,t)}var m=o(d,p,{name:"buttons",handleItemDefaults:u,calendar:f}),v=h("visible",m.length>0);if(v){var g=function(e,t,n){for(var r=n.filter(function(n){return t[n].anchor===e._id}),a=0,i=0;i<r.length;i++){var o=t[r[i]].domain;o&&(a=Math.max(o[1],a))}return[e.domain[0],a+l.yPad]}(t,n,c);h("x",g[0]),h("y",g[1]),r.noneOrAll(e,t,["x","y"]),h("xanchor"),h("yanchor"),r.coerceFont(h,"font",n.font);var y=h("bgcolor");h("activecolor",a.contrast(y,l.lightAmount,l.darkAmount)),h("bordercolor"),h("borderwidth")}}},{"../../lib":696,"../../plot_api/plot_template":734,"../../plots/array_container_defaults":740,"../color":570,"./attributes":636,"./constants":637}],639:[function(e,t,n){"use strict";var r=e("d3"),a=e("../../registry"),i=e("../../plots/plots"),o=e("../color"),s=e("../drawing"),l=e("../../lib"),u=e("../../lib/svg_text_utils"),c=e("../../plots/cartesian/axis_ids"),f=e("../legend/anchor_utils"),d=e("../../constants/alignment"),p=d.LINE_SPACING,h=d.FROM_TL,m=d.FROM_BR,v=e("./constants"),g=e("./get_update_object");function y(e){return e._id}function b(e,t,n){var r=l.ensureSingle(e,"rect","selector-rect",function(e){e.attr("shape-rendering","crispEdges")});r.attr({rx:v.rx,ry:v.ry}),r.call(o.stroke,t.bordercolor).call(o.fill,function(e,t){return t._isActive||t._isHovered?e.activecolor:e.bgcolor}(t,n)).style("stroke-width",t.borderwidth+"px")}function x(e,t,n,r){var a=l.ensureSingle(e,"text","selector-text",function(e){e.classed("user-select-none",!0).attr("text-anchor","middle")});a.call(s.font,t.font).text(function(e){return e.label?e.label:"all"===e.step?"all":e.count+e.step.charAt(0)}(n)).call(function(e){u.convertToTspans(e,r)})}t.exports=function(e){var t=e._fullLayout,n=t._infolayer.selectAll(".rangeselector").data(function(e){for(var t=c.list(e,"x",!0),n=[],r=0;r<t.length;r++){var a=t[r];a.rangeselector&&a.rangeselector.visible&&n.push(a)}return n}(e),y);n.enter().append("g").classed("rangeselector",!0),n.exit().remove(),n.style({cursor:"pointer","pointer-events":"all"}),n.each(function(t){var n=r.select(this),o=t,c=o.rangeselector,d=n.selectAll("g.button").data(l.filterVisible(c.buttons));d.enter().append("g").classed("button",!0),d.exit().remove(),d.each(function(t){var n=r.select(this),i=g(o,t);t._isActive=function(e,t,n){if("all"===t.step)return!0===e.autorange;var r=Object.keys(n);return e.range[0]===n[r[0]]&&e.range[1]===n[r[1]]}(o,t,i),n.call(b,c,t),n.call(x,c,t,e),n.on("click",function(){e._dragged||a.call("relayout",e,i)}),n.on("mouseover",function(){t._isHovered=!0,n.call(b,c,t)}),n.on("mouseout",function(){t._isHovered=!1,n.call(b,c,t)})}),function(e,t,n,a,o){var l=0,c=0,d=n.borderwidth;t.each(function(){var e=r.select(this),t=e.select(".selector-text"),a=n.font.size*p,i=Math.max(a*u.lineCount(t),16)+3;c=Math.max(c,i)}),t.each(function(){var e=r.select(this),t=e.select(".selector-rect"),a=e.select(".selector-text"),i=a.node()&&s.bBox(a.node()).width,o=n.font.size*p,f=u.lineCount(a),h=Math.max(i+10,v.minButtonWidth);e.attr("transform","translate("+(d+l)+","+d+")"),t.attr({x:0,y:0,width:h,height:c}),u.positionText(a,h/2,c/2-(f-1)*o/2+3),l+=h+5});var g=e._fullLayout._size,y=g.l+g.w*n.x,b=g.t+g.h*(1-n.y),x="left";f.isRightAnchor(n)&&(y-=l,x="right"),f.isCenterAnchor(n)&&(y-=l/2,x="center");var _="top";f.isBottomAnchor(n)&&(b-=c,_="bottom"),f.isMiddleAnchor(n)&&(b-=c/2,_="middle"),l=Math.ceil(l),c=Math.ceil(c),y=Math.round(y),b=Math.round(b),i.autoMargin(e,a+"-range-selector",{x:n.x,y:n.y,l:l*h[x],r:l*m[x],b:c*m[_],t:c*h[_]}),o.attr("transform","translate("+y+","+b+")")}(e,d,c,o._name,n)})}},{"../../constants/alignment":668,"../../lib":696,"../../lib/svg_text_utils":720,"../../plots/cartesian/axis_ids":747,"../../plots/plots":808,"../../registry":827,"../color":570,"../drawing":595,"../legend/anchor_utils":622,"./constants":637,"./get_update_object":640,d3:148}],640:[function(e,t,n){"use strict";var r=e("d3");t.exports=function(e,t){var n=e._name,a={};if("all"===t.step)a[n+".autorange"]=!0;else{var i=function(e,t){var n,a=e.range,i=new Date(e.r2l(a[1])),o=t.step,s=t.count;switch(t.stepmode){case"backward":n=e.l2r(+r.time[o].utc.offset(i,-s));break;case"todate":var l=r.time[o].utc.offset(i,-s);n=e.l2r(+r.time[o].utc.ceil(l))}var u=a[1];return[n,u]}(e,t);a[n+".range[0]"]=i[0],a[n+".range[1]"]=i[1]}return a}},{d3:148}],641:[function(e,t,n){"use strict";t.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:e("./attributes")}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),draw:e("./draw")}},{"./attributes":636,"./defaults":638,"./draw":639}],642:[function(e,t,n){"use strict";var r=e("../color/attributes");t.exports={bgcolor:{valType:"color",dflt:r.background,editType:"plot"},bordercolor:{valType:"color",dflt:r.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},{"../color/attributes":569}],643:[function(e,t,n){"use strict";var r=e("../../plots/cartesian/axis_ids").list,a=e("../../plots/cartesian/autorange").getAutoRange,i=e("./constants");t.exports=function(e){for(var t=r(e,"x",!0),n=0;n<t.length;n++){var o=t[n],s=o[i.name];s&&s.visible&&s.autorange&&(s._input.autorange=!0,s._input.range=s.range=a(e,o))}}},{"../../plots/cartesian/autorange":743,"../../plots/cartesian/axis_ids":747,"./constants":644}],644:[function(e,t,n){"use strict";t.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},{}],645:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("../../plot_api/plot_template"),i=e("../../plots/cartesian/axis_ids"),o=e("./attributes"),s=e("./oppaxis_attributes");t.exports=function(e,t,n){var l=e[n],u=t[n];if(l.rangeslider||t._requestRangeslider[u._id]){r.isPlainObject(l.rangeslider)||(l.rangeslider={});var c,f,d=l.rangeslider,p=a.newContainer(u,"rangeslider"),h=T("visible");if(h){T("bgcolor",t.plot_bgcolor),T("bordercolor"),T("borderwidth"),T("thickness"),T("autorange",!u.isValidRange(d.range)),T("range");var m=t._subplots;if(m)for(var v=m.cartesian.filter(function(e){return e.substr(0,e.indexOf("y"))===i.name2id(n)}).map(function(e){return e.substr(e.indexOf("y"),e.length)}),g=r.simpleMap(v,i.id2name),y=0;y<g.length;y++){var b=g[y];c=d[b]||{},f=a.newContainer(p,b,"yaxis");var x,_=t[b];c.range&&_.isValidRange(c.range)&&(x="fixed");var w=k("rangemode",x);"match"!==w&&k("range",_.range.slice())}p._input=d}}function T(e,t){return r.coerce(d,p,o,e,t)}function k(e,t){return r.coerce(c,f,s,e,t)}}},{"../../lib":696,"../../plot_api/plot_template":734,"../../plots/cartesian/axis_ids":747,"./attributes":642,"./oppaxis_attributes":648}],646:[function(e,t,n){"use strict";var r=e("d3"),a=e("../../registry"),i=e("../../plots/plots"),o=e("../../lib"),s=e("../drawing"),l=e("../color"),u=e("../titles"),c=e("../../plots/cartesian"),f=e("../../plots/cartesian/axes"),d=e("../dragelement"),p=e("../../lib/setcursor"),h=e("./constants");function m(e,t,n,r){var a=o.ensureSingle(e,"rect",h.bgClassName,function(e){e.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),i=r.borderwidth%2==0?r.borderwidth:r.borderwidth-1,l=-r._offsetShift,u=s.crispRound(t,r.borderwidth);a.attr({width:r._width+i,height:r._height+i,transform:"translate("+l+","+l+")",fill:r.bgcolor,stroke:r.bordercolor,"stroke-width":u})}function v(e,t,n,r){var a=t._fullLayout,i=o.ensureSingleById(a._topdefs,"clipPath",r._clipId,function(e){e.append("rect").attr({x:0,y:0})});i.select("rect").attr({width:r._width,height:r._height})}function g(e,t,n,a){var l,u=f.getSubplots(t,n),d=t.calcdata,p=e.selectAll("g."+h.rangePlotClassName).data(u,o.identity);p.enter().append("g").attr("class",function(e){return h.rangePlotClassName+" "+e}).call(s.setClipUrl,a._clipId),p.order(),p.exit().remove(),p.each(function(e,o){var s=r.select(this),u=0===o,p=f.getFromId(t,e,"y"),h=p._name,m=a[h],v={data:[],layout:{xaxis:{type:n.type,domain:[0,1],range:a.range.slice(),calendar:n.calendar},width:a._width,height:a._height,margin:{t:0,b:0,l:0,r:0}},_context:t._context};v.layout[h]={type:p.type,domain:[0,1],range:"match"!==m.rangemode?m.range.slice():p.range.slice(),calendar:p.calendar},i.supplyDefaults(v);var g=v._fullLayout.xaxis,y=v._fullLayout[h],b={id:e,plotgroup:s,xaxis:g,yaxis:y,isRangePlot:!0};u?l=b:(b.mainplot="xy",b.mainplotinfo=l),c.rangePlot(t,b,function(e,t){for(var n=[],r=0;r<e.length;r++){var a=e[r],i=a[0].trace;i.xaxis+i.yaxis===t&&n.push(a)}return n}(d,e))})}function y(e,t,n,r,a){var i=o.ensureSingle(e,"rect",h.maskMinClassName,function(e){e.attr({x:0,y:0,"shape-rendering":"crispEdges"})});i.attr("height",r._height).call(l.fill,h.maskColor);var s=o.ensureSingle(e,"rect",h.maskMaxClassName,function(e){e.attr({y:0,"shape-rendering":"crispEdges"})});if(s.attr("height",r._height).call(l.fill,h.maskColor),"match"!==a.rangemode){var u=o.ensureSingle(e,"rect",h.maskMinOppAxisClassName,function(e){e.attr({y:0,"shape-rendering":"crispEdges"})});u.attr("width",r._width).call(l.fill,h.maskOppAxisColor);var c=o.ensureSingle(e,"rect",h.maskMaxOppAxisClassName,function(e){e.attr({y:0,"shape-rendering":"crispEdges"})});c.attr("width",r._width).style("border-top",h.maskOppBorder).call(l.fill,h.maskOppAxisColor)}}function b(e,t,n,r){if(!t._context.staticPlot){var a=o.ensureSingle(e,"rect",h.slideBoxClassName,function(e){e.attr({y:0,cursor:h.slideBoxCursor,"shape-rendering":"crispEdges"})});a.attr({height:r._height,fill:h.slideBoxFill})}}function x(e,t,n,r){var a=o.ensureSingle(e,"g",h.grabberMinClassName),i=o.ensureSingle(e,"g",h.grabberMaxClassName),s={x:0,width:h.handleWidth,rx:h.handleRadius,fill:l.background,stroke:l.defaultLine,"stroke-width":h.handleStrokeWidth,"shape-rendering":"crispEdges"},u={y:Math.round(r._height/4),height:Math.round(r._height/2)},c=o.ensureSingle(a,"rect",h.handleMinClassName,function(e){e.attr(s)});c.attr(u);var f=o.ensureSingle(i,"rect",h.handleMaxClassName,function(e){e.attr(s)});if(f.attr(u),!t._context.staticPlot){var d={width:h.grabAreaWidth,x:0,y:0,fill:h.grabAreaFill,cursor:h.grabAreaCursor},p=o.ensureSingle(a,"rect",h.grabAreaMinClassName,function(e){e.attr(d)});p.attr("height",r._height);var m=o.ensureSingle(i,"rect",h.grabAreaMaxClassName,function(e){e.attr(d)});m.attr("height",r._height)}}t.exports=function(e){var t=e._fullLayout,n=function(e){var t=f.list({_fullLayout:e},"x",!0),n=h.name,r=[];if(e._has("gl2d"))return r;for(var a=0;a<t.length;a++){var i=t[a];i[n]&&i[n].visible&&r.push(i)}return r}(t),s=t._infolayer.selectAll("g."+h.containerClassName).data(n,function(e){return e._name});s.enter().append("g").classed(h.containerClassName,!0).attr("pointer-events","all"),s.exit().each(function(e){var n=e[h.name];t._topdefs.select("#"+n._clipId).remove()}).remove(),0!==n.length&&s.each(function(n){var s=r.select(this),l=n[h.name],c=t[f.id2name(n.anchor)],_=l[f.id2name(n.anchor)];if(l.range){var w=l.range,T=n.range;w[0]=n.l2r(Math.min(n.r2l(w[0]),n.r2l(T[0]))),w[1]=n.l2r(Math.max(n.r2l(w[1]),n.r2l(T[1]))),l._input.range=w.slice()}n.cleanRange("rangeslider.range");for(var k=t.margin,C=t._size,E=n.domain,M=(n._boundingBox||{}).height||0,A=1/0,S=f.getSubplots(e,n),O=0;O<S.length;O++){var P=f.getFromId(e,S[O].substr(S[O].indexOf("y")));A=Math.min(A,P.domain[0])}l._id=h.name+n._id,l._clipId=l._id+"-"+t._uid,l._width=C.w*(E[1]-E[0]),l._height=(t.height-k.b-k.t)*l.thickness,l._offsetShift=Math.floor(l.borderwidth/2);var R=Math.round(k.l+C.w*E[0]),L=Math.round(C.t+C.h*(1-A)+M+l._offsetShift+h.extraPad);s.attr("transform","translate("+R+","+L+")");var D=n.r2l(l.range[0]),I=n.r2l(l.range[1]),z=I-D;if(l.p2d=function(e){return e/l._width*z+D},l.d2p=function(e){return(e-D)/z*l._width},l._rl=[D,I],"match"!==_.rangemode){var j=c.r2l(_.range[0]),N=c.r2l(_.range[1]),F=N-j;l.d2pOppAxis=function(e){return(e-j)/F*l._height}}s.call(m,e,n,l).call(v,e,n,l).call(g,e,n,l).call(y,e,n,l,_).call(b,e,n,l).call(x,e,n,l),function(e,t,n,i){var s=e.select("rect."+h.slideBoxClassName).node(),l=e.select("rect."+h.grabAreaMinClassName).node(),u=e.select("rect."+h.grabAreaMaxClassName).node();e.on("mousedown",function(){var c=r.event,f=c.target,h=c.clientX,m=h-e.node().getBoundingClientRect().left,v=i.d2p(n._rl[0]),g=i.d2p(n._rl[1]),y=d.coverSlip();function b(e){var c,d,b,x=+e.clientX-h;switch(f){case s:b="ew-resize",c=v+x,d=g+x;break;case l:b="col-resize",c=v+x,d=g;break;case u:b="col-resize",c=v,d=g+x;break;default:b="ew-resize",c=m,d=m+x}if(d<c){var _=d;d=c,c=_}i._pixelMin=c,i._pixelMax=d,p(r.select(y),b),function(e,t,n,r){function i(e){return n.l2r(o.constrain(e,r._rl[0],r._rl[1]))}var s=i(r.p2d(r._pixelMin)),l=i(r.p2d(r._pixelMax));window.requestAnimationFrame(function(){a.call("relayout",t,n._name+".range",[s,l])})}(0,t,n,i)}y.addEventListener("mousemove",b),y.addEventListener("mouseup",function e(){y.removeEventListener("mousemove",b),y.removeEventListener("mouseup",e),o.removeElement(y)})})}(s,e,n,l),function(e,t,n,r,a,i){var s=h.handleWidth/2;function l(e){return o.constrain(e,0,r._width)}function u(e){return o.constrain(e,0,r._height)}function c(e){return o.constrain(e,-s,r._width+s)}var f=l(r.d2p(n._rl[0])),d=l(r.d2p(n._rl[1]));if(e.select("rect."+h.slideBoxClassName).attr("x",f).attr("width",d-f),e.select("rect."+h.maskMinClassName).attr("width",f),e.select("rect."+h.maskMaxClassName).attr("x",d).attr("width",r._width-d),"match"!==i.rangemode){var p=r._height-u(r.d2pOppAxis(a._rl[1])),m=r._height-u(r.d2pOppAxis(a._rl[0]));e.select("rect."+h.maskMinOppAxisClassName).attr("x",f).attr("height",p).attr("width",d-f),e.select("rect."+h.maskMaxOppAxisClassName).attr("x",f).attr("y",m).attr("height",r._height-m).attr("width",d-f),e.select("rect."+h.slideBoxClassName).attr("y",p).attr("height",m-p)}var v=Math.round(c(f-s))-.5,g=Math.round(c(d-s))+.5;e.select("g."+h.grabberMinClassName).attr("transform","translate("+v+",0.5)"),e.select("g."+h.grabberMaxClassName).attr("transform","translate("+g+",0.5)")}(s,0,n,l,c,_),"bottom"===n.side&&u.draw(e,n._id+"title",{propContainer:n,propName:n._name+".title",placeholder:t._dfltTitle.x,attributes:{x:n._offset+n._length/2,y:L+l._height+l._offsetShift+10+1.5*n.titlefont.size,"text-anchor":"middle"}}),i.autoMargin(e,l._id,{x:E[0],y:A,l:0,r:0,t:0,b:l._height+k.b+M,pad:h.extraPad+2*l._offsetShift})})}},{"../../lib":696,"../../lib/setcursor":716,"../../plots/cartesian":756,"../../plots/cartesian/axes":744,"../../plots/plots":808,"../../registry":827,"../color":570,"../dragelement":592,"../drawing":595,"../titles":661,"./constants":644,d3:148}],647:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("./attributes"),i=e("./oppaxis_attributes");t.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:r.extendFlat({},a,{yaxis:i})}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),calcAutorange:e("./calc_autorange"),draw:e("./draw")}},{"../../lib":696,"./attributes":642,"./calc_autorange":643,"./defaults":645,"./draw":646,"./oppaxis_attributes":648}],648:[function(e,t,n){"use strict";t.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},{}],649:[function(e,t,n){"use strict";var r=e("../annotations/attributes"),a=e("../../traces/scatter/attributes").line,i=e("../drawing/attributes").dash,o=e("../../lib/extend").extendFlat,s=e("../../plot_api/plot_template").templatedArray;t.exports=s("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:o({},r.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:o({},r.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:o({},a.color,{editType:"arraydraw"}),width:o({},a.width,{editType:"calc+arraydraw"}),dash:o({},i,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},editType:"arraydraw"})},{"../../lib/extend":685,"../../plot_api/plot_template":734,"../../traces/scatter/attributes":1043,"../annotations/attributes":553,"../drawing/attributes":594}],650:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("../../plots/cartesian/axes"),i=e("./constants"),o=e("./helpers");function s(e){return u(e.line.width,e.xsizemode,e.x0,e.x1,e.path,!1)}function l(e){return u(e.line.width,e.ysizemode,e.y0,e.y1,e.path,!0)}function u(e,t,n,a,s,l){var u=e/2,c=l;if("pixel"===t){var f=s?o.extractPathCoords(s,l?i.paramIsY:i.paramIsX):[n,a],d=r.aggNums(Math.max,null,f),p=r.aggNums(Math.min,null,f),h=p<0?Math.abs(p)+u:u,m=d>0?d+u:u;return{ppad:u,ppadplus:c?h:m,ppadminus:c?m:h}}return{ppad:u}}function c(e,t,n,r,a){var s="category"===e.type?e.r2c:e.d2c;if(void 0!==t)return[s(t),s(n)];if(r){var l,u,c,f,d,p=1/0,h=-1/0,m=r.match(i.segmentRE);for("date"===e.type&&(s=o.decodeDate(s)),l=0;l<m.length;l++)u=m[l],void 0!==(c=a[u.charAt(0)].drawn)&&(!(f=m[l].substr(1).match(i.paramRE))||f.length<c||((d=s(f[c]))<p&&(p=d),d>h&&(h=d)));return h>=p?[p,h]:void 0}}t.exports=function(e){var t=e._fullLayout,n=r.filterVisible(t.shapes);if(n.length&&e._fullData.length)for(var o=0;o<n.length;o++){var u,f,d=n[o];if(d._extremes={},"paper"!==d.xref){var p="pixel"===d.xsizemode?d.xanchor:d.x0,h="pixel"===d.xsizemode?d.xanchor:d.x1;u=a.getFromId(e,d.xref),(f=c(u,p,h,d.path,i.paramIsX))&&(d._extremes[u._id]=a.findExtremes(u,f,s(d)))}if("paper"!==d.yref){var m="pixel"===d.ysizemode?d.yanchor:d.y0,v="pixel"===d.ysizemode?d.yanchor:d.y1;u=a.getFromId(e,d.yref),(f=c(u,m,v,d.path,i.paramIsY))&&(d._extremes[u._id]=a.findExtremes(u,f,l(d)))}}}},{"../../lib":696,"../../plots/cartesian/axes":744,"./constants":651,"./helpers":654}],651:[function(e,t,n){"use strict";t.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],652:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("../../plots/cartesian/axes"),i=e("../../plots/array_container_defaults"),o=e("./attributes"),s=e("./helpers");function l(e,t,n){function i(n,a){return r.coerce(e,t,o,n,a)}var l=i("visible");if(l){i("layer"),i("opacity"),i("fillcolor"),i("line.color"),i("line.width"),i("line.dash");for(var u=e.path?"path":"rect",c=i("type",u),f=i("xsizemode"),d=i("ysizemode"),p=["x","y"],h=0;h<2;h++){var m,v,g,y=p[h],b=y+"anchor",x="x"===y?f:d,_={_fullLayout:n},w=a.coerceRef(e,t,_,y,"","paper");if("paper"!==w?((m=a.getFromId(_,w))._shapeIndices.push(t._index),g=s.rangeToShapePosition(m),v=s.shapePositionToRange(m)):v=g=r.identity,"path"!==c){var T=y+"0",k=y+"1",C=e[T],E=e[k];e[T]=v(e[T],!0),e[k]=v(e[k],!0),"pixel"===x?(i(T,0),i(k,10)):(a.coercePosition(t,_,i,w,T,.25),a.coercePosition(t,_,i,w,k,.75)),t[T]=g(t[T]),t[k]=g(t[k]),e[T]=C,e[k]=E}if("pixel"===x){var M=e[b];e[b]=v(e[b],!0),a.coercePosition(t,_,i,w,b,.25),t[b]=g(t[b]),e[b]=M}}"path"===c?i("path"):r.noneOrAll(e,t,["x0","x1","y0","y1"])}}t.exports=function(e,t){i(e,t,{name:"shapes",handleItemDefaults:l})}},{"../../lib":696,"../../plots/array_container_defaults":740,"../../plots/cartesian/axes":744,"./attributes":649,"./helpers":654}],653:[function(e,t,n){"use strict";var r=e("../../registry"),a=e("../../lib"),i=e("../../plots/cartesian/axes"),o=e("../color"),s=e("../drawing"),l=e("../../plot_api/plot_template").arrayEditor,u=e("../dragelement"),c=e("../../lib/setcursor"),f=e("./constants"),d=e("./helpers");function p(e,t){e._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+t+'"]').remove();var n=e._fullLayout.shapes[t]||{};if(n._input&&!1!==n.visible)if("below"!==n.layer)y(e._fullLayout._shapeUpperLayer);else if("paper"===n.xref||"paper"===n.yref)y(e._fullLayout._shapeLowerLayer);else{var p=e._fullLayout._plots[n.xref+n.yref];if(p){var g=p.mainplotinfo||p;y(g.shapelayer)}else y(e._fullLayout._shapeLowerLayer)}function y(p){var g={"data-index":t,"fill-rule":"evenodd",d:m(e,n)},y=n.line.width?n.line.color:"rgba(0,0,0,0)",b=p.append("path").attr(g).style("opacity",n.opacity).call(o.stroke,y).call(o.fill,n.fillcolor).call(s.dashLine,n.line.dash,n.line.width);h(b,e,n),e._context.edits.shapePosition&&function(e,t,n,o,p){var g,y,b,x,_,w,T,k,C,E,M,A,S,O,P,R,L=10,D=10,I="pixel"===n.xsizemode,z="pixel"===n.ysizemode,j="line"===n.type,N="path"===n.type,F=l(e.layout,"shapes",n),B=F.modifyItem,V=i.getFromId(e,n.xref),U=i.getFromId(e,n.yref),G=d.getDataToPixel(e,V),H=d.getDataToPixel(e,U,!0),W=d.getPixelToData(e,V),q=d.getPixelToData(e,U,!0),Y=j?function(){var e=Math.max(n.line.width,10),r=p.append("g").attr("data-index",o);r.append("path").attr("d",t.attr("d")).style({cursor:"move","stroke-width":e,"stroke-opacity":"0"});var a={"fill-opacity":"0"},i=e/2>10?e/2:10;return r.append("circle").attr({"data-line-point":"start-point",cx:I?G(n.xanchor)+n.x0:G(n.x0),cy:z?H(n.yanchor)-n.y0:H(n.y0),r:i}).style(a).classed("cursor-grab",!0),r.append("circle").attr({"data-line-point":"end-point",cx:I?G(n.xanchor)+n.x1:G(n.x1),cy:z?H(n.yanchor)-n.y1:H(n.y1),r:i}).style(a).classed("cursor-grab",!0),r}():t,X={element:Y.node(),gd:e,prepFn:function(r){I&&(_=G(n.xanchor)),z&&(w=H(n.yanchor)),"path"===n.type?P=n.path:(g=I?n.x0:G(n.x0),y=z?n.y0:H(n.y0),b=I?n.x1:G(n.x1),x=z?n.y1:H(n.y1)),g<b?(C=g,S="x0",E=b,O="x1"):(C=b,S="x1",E=g,O="x0"),!z&&y<x||z&&y>x?(T=y,M="y0",k=x,A="y1"):(T=x,M="y1",k=y,A="y0"),Z(r),J(p,n),function(e,t,n){var r=t.xref,a=t.yref,o=i.getFromId(n,r),l=i.getFromId(n,a),u="";"paper"===r||o.autorange||(u+=r),"paper"===a||l.autorange||(u+=a),e.call(s.setClipUrl,u?"clip"+n._fullLayout._uid+u:null)}(t,n,e),X.moveFn="move"===R?$:K},doneFn:function(){c(t),Q(p),h(t,e,n),r.call("relayout",e,F.getUpdateObj())},clickFn:function(){Q(p)}};function Z(e){if(j)R="path"===e.target.tagName?"move":"start-point"===e.target.attributes["data-line-point"].value?"resize-over-start-point":"resize-over-end-point";else{var n=X.element.getBoundingClientRect(),r=n.right-n.left,a=n.bottom-n.top,i=e.clientX-n.left,o=e.clientY-n.top,s=!N&&r>L&&a>D&&!e.shiftKey?u.getCursor(i/r,1-o/a):"move";c(t,s),R=s.split("-")[0]}}function $(r,a){if("path"===n.type){var i=function(e){return e},o=i,s=i;I?B("xanchor",n.xanchor=W(_+r)):(o=function(e){return W(G(e)+r)},V&&"date"===V.type&&(o=d.encodeDate(o))),z?B("yanchor",n.yanchor=q(w+a)):(s=function(e){return q(H(e)+a)},U&&"date"===U.type&&(s=d.encodeDate(s))),B("path",n.path=v(P,o,s))}else I?B("xanchor",n.xanchor=W(_+r)):(B("x0",n.x0=W(g+r)),B("x1",n.x1=W(b+r))),z?B("yanchor",n.yanchor=q(w+a)):(B("y0",n.y0=q(y+a)),B("y1",n.y1=q(x+a)));t.attr("d",m(e,n)),J(p,n)}function K(r,a){if(N){var i=function(e){return e},o=i,s=i;I?B("xanchor",n.xanchor=W(_+r)):(o=function(e){return W(G(e)+r)},V&&"date"===V.type&&(o=d.encodeDate(o))),z?B("yanchor",n.yanchor=q(w+a)):(s=function(e){return q(H(e)+a)},U&&"date"===U.type&&(s=d.encodeDate(s))),B("path",n.path=v(P,o,s))}else if(j){if("resize-over-start-point"===R){var l=g+r,u=z?y-a:y+a;B("x0",n.x0=I?l:W(l)),B("y0",n.y0=z?u:q(u))}else if("resize-over-end-point"===R){var c=b+r,f=z?x-a:x+a;B("x1",n.x1=I?c:W(c)),B("y1",n.y1=z?f:q(f))}}else{var h=~R.indexOf("n")?T+a:T,F=~R.indexOf("s")?k+a:k,Y=~R.indexOf("w")?C+r:C,X=~R.indexOf("e")?E+r:E;~R.indexOf("n")&&z&&(h=T-a),~R.indexOf("s")&&z&&(F=k-a),(!z&&F-h>D||z&&h-F>D)&&(B(M,n[M]=z?h:q(h)),B(A,n[A]=z?F:q(F))),X-Y>L&&(B(S,n[S]=I?Y:W(Y)),B(O,n[O]=I?X:W(X)))}t.attr("d",m(e,n)),J(p,n)}function J(e,t){(I||z)&&function(){var n="path"!==t.type,r=e.selectAll(".visual-cue").data([0]);r.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0);var i=G(I?t.xanchor:a.midRange(n?[t.x0,t.x1]:d.extractPathCoords(t.path,f.paramIsX))),o=H(z?t.yanchor:a.midRange(n?[t.y0,t.y1]:d.extractPathCoords(t.path,f.paramIsY)));if(i=d.roundPositionForSharpStrokeRendering(i,1),o=d.roundPositionForSharpStrokeRendering(o,1),I&&z){var s="M"+(i-1-1)+","+(o-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";r.attr("d",s)}else if(I){var l="M"+(i-1-1)+","+(o-9-1)+"v18 h2 v-18 Z";r.attr("d",l)}else{var u="M"+(i-9-1)+","+(o-1-1)+"h18 v2 h-18 Z";r.attr("d",u)}}()}function Q(e){e.selectAll(".visual-cue").remove()}u.init(X),Y.node().onmousemove=Z}(e,b,n,t,p)}}function h(e,t,n){var r=(n.xref+n.yref).replace(/paper/g,"");e.call(s.setClipUrl,r?"clip"+t._fullLayout._uid+r:null)}function m(e,t){var n,r,o,s,l,u,c,p,h=t.type,m=i.getFromId(e,t.xref),v=i.getFromId(e,t.yref),g=e._fullLayout._size;if(m?(n=d.shapePositionToRange(m),r=function(e){return m._offset+m.r2p(n(e,!0))}):r=function(e){return g.l+g.w*e},v?(o=d.shapePositionToRange(v),s=function(e){return v._offset+v.r2p(o(e,!0))}):s=function(e){return g.t+g.h*(1-e)},"path"===h)return m&&"date"===m.type&&(r=d.decodeDate(r)),v&&"date"===v.type&&(s=d.decodeDate(s)),function(e,t,n){var r=e.path,i=e.xsizemode,o=e.ysizemode,s=e.xanchor,l=e.yanchor;return r.replace(f.segmentRE,function(e){var r=0,u=e.charAt(0),c=f.paramIsX[u],d=f.paramIsY[u],p=f.numParams[u],h=e.substr(1).replace(f.paramRE,function(e){return c[r]?e="pixel"===i?t(s)+Number(e):t(e):d[r]&&(e="pixel"===o?n(l)-Number(e):n(e)),++r>p&&(e="X"),e});return r>p&&(h=h.replace(/[\s,]*X.*/,""),a.log("Ignoring extra params in segment "+e)),u+h})}(t,r,s);if("pixel"===t.xsizemode){var y=r(t.xanchor);l=y+t.x0,u=y+t.x1}else l=r(t.x0),u=r(t.x1);if("pixel"===t.ysizemode){var b=s(t.yanchor);c=b-t.y0,p=b-t.y1}else c=s(t.y0),p=s(t.y1);if("line"===h)return"M"+l+","+c+"L"+u+","+p;if("rect"===h)return"M"+l+","+c+"H"+u+"V"+p+"H"+l+"Z";var x=(l+u)/2,_=(c+p)/2,w=Math.abs(x-l),T=Math.abs(_-c),k="A"+w+","+T,C=x+w+","+_,E=x+","+(_-T);return"M"+C+k+" 0 1,1 "+E+k+" 0 0,1 "+C+"Z"}function v(e,t,n){return e.replace(f.segmentRE,function(e){var r=0,a=e.charAt(0),i=f.paramIsX[a],o=f.paramIsY[a],s=f.numParams[a],l=e.substr(1).replace(f.paramRE,function(e){return r>=s?e:(i[r]?e=t(e):o[r]&&(e=n(e)),r++,e)});return a+l})}t.exports={draw:function(e){var t=e._fullLayout;for(var n in t._shapeUpperLayer.selectAll("path").remove(),t._shapeLowerLayer.selectAll("path").remove(),t._plots){var r=t._plots[n].shapelayer;r&&r.selectAll("path").remove()}for(var a=0;a<t.shapes.length;a++)t.shapes[a].visible&&p(e,a)},drawOne:p}},{"../../lib":696,"../../lib/setcursor":716,"../../plot_api/plot_template":734,"../../plots/cartesian/axes":744,"../../registry":827,"../color":570,"../dragelement":592,"../drawing":595,"./constants":651,"./helpers":654}],654:[function(e,t,n){"use strict";var r=e("./constants"),a=e("../../lib");n.rangeToShapePosition=function(e){return"log"===e.type?e.r2d:function(e){return e}},n.shapePositionToRange=function(e){return"log"===e.type?e.d2r:function(e){return e}},n.decodeDate=function(e){return function(t){return t.replace&&(t=t.replace("_"," ")),e(t)}},n.encodeDate=function(e){return function(t){return e(t).replace(" ","_")}},n.extractPathCoords=function(e,t){var n=[],i=e.match(r.segmentRE);return i.forEach(function(e){var i=t[e.charAt(0)].drawn;if(void 0!==i){var o=e.substr(1).match(r.paramRE);!o||o.length<i||n.push(a.cleanNumber(o[i]))}}),n},n.getDataToPixel=function(e,t,r){var a,i=e._fullLayout._size;if(t){var o=n.shapePositionToRange(t);a=function(e){return t._offset+t.r2p(o(e,!0))},"date"===t.type&&(a=n.decodeDate(a))}else a=r?function(e){return i.t+i.h*(1-e)}:function(e){return i.l+i.w*e};return a},n.getPixelToData=function(e,t,r){var a,i=e._fullLayout._size;if(t){var o=n.rangeToShapePosition(t);a=function(e){return o(t.p2r(e-t._offset))}}else a=r?function(e){return 1-(e-i.t)/i.h}:function(e){return(e-i.l)/i.w};return a},n.roundPositionForSharpStrokeRendering=function(e,t){var n=1===Math.round(t%2),r=Math.round(e);return n?r+.5:r}},{"../../lib":696,"./constants":651}],655:[function(e,t,n){"use strict";var r=e("./draw");t.exports={moduleType:"component",name:"shapes",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("shapes"),calcAutorange:e("./calc_autorange"),draw:r.draw,drawOne:r.drawOne}},{"../../plots/cartesian/include_components":755,"./attributes":649,"./calc_autorange":650,"./defaults":652,"./draw":653}],656:[function(e,t,n){"use strict";var r=e("../../plots/font_attributes"),a=e("../../plots/pad_attributes"),i=e("../../lib/extend").extendDeepAll,o=e("../../plot_api/edit_types").overrideAll,s=e("../../plots/animation_attributes"),l=e("../../plot_api/plot_template").templatedArray,u=e("./constants"),c=l("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});t.exports=o(l("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:c,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:i({},a,{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:s.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:r({})},font:r({}),activebgcolor:{valType:"color",dflt:u.gripBgActiveColor},bgcolor:{valType:"color",dflt:u.railBgColor},bordercolor:{valType:"color",dflt:u.railBorderColor},borderwidth:{valType:"number",min:0,dflt:u.railBorderWidth},ticklen:{valType:"number",min:0,dflt:u.tickLength},tickcolor:{valType:"color",dflt:u.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:u.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":685,"../../plot_api/edit_types":727,"../../plot_api/plot_template":734,"../../plots/animation_attributes":739,"../../plots/font_attributes":771,"../../plots/pad_attributes":807,"./constants":657}],657:[function(e,t,n){"use strict";t.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],658:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("../../plots/array_container_defaults"),i=e("./attributes"),o=e("./constants"),s=o.name,l=i.steps;function u(e,t,n){function o(n,a){return r.coerce(e,t,i,n,a)}for(var s=a(e,t,{name:"steps",handleItemDefaults:c}),l=0,u=0;u<s.length;u++)s[u].visible&&l++;if(l<2?t.visible=!1:o("visible")){t._stepCount=l;var f=t._visibleSteps=r.filterVisible(s),d=o("active");(s[d]||{}).visible||(t.active=f[0]._index),o("x"),o("y"),r.noneOrAll(e,t,["x","y"]),o("xanchor"),o("yanchor"),o("len"),o("lenmode"),o("pad.t"),o("pad.r"),o("pad.b"),o("pad.l"),r.coerceFont(o,"font",n.font);var p=o("currentvalue.visible");p&&(o("currentvalue.xanchor"),o("currentvalue.prefix"),o("currentvalue.suffix"),o("currentvalue.offset"),r.coerceFont(o,"currentvalue.font",t.font)),o("transition.duration"),o("transition.easing"),o("bgcolor"),o("activebgcolor"),o("bordercolor"),o("borderwidth"),o("ticklen"),o("tickwidth"),o("tickcolor"),o("minorticklen")}}function c(e,t){function n(n,a){return r.coerce(e,t,l,n,a)}if("skip"===e.method||Array.isArray(e.args)?n("visible"):t.visible=!1){n("method"),n("args");var a=n("label","step-"+t._index);n("value",a),n("execute")}}t.exports=function(e,t){a(e,t,{name:s,handleItemDefaults:u})}},{"../../lib":696,"../../plots/array_container_defaults":740,"./attributes":656,"./constants":657}],659:[function(e,t,n){"use strict";var r=e("d3"),a=e("../../plots/plots"),i=e("../color"),o=e("../drawing"),s=e("../../lib"),l=e("../../lib/svg_text_utils"),u=e("../legend/anchor_utils"),c=e("../../plot_api/plot_template").arrayEditor,f=e("./constants"),d=e("../../constants/alignment"),p=d.LINE_SPACING,h=d.FROM_TL,m=d.FROM_BR;function v(e){return f.autoMarginIdRoot+e._index}function g(e){return e._index}function y(e,t){var n=o.tester.selectAll("g."+f.labelGroupClass).data(t._visibleSteps);n.enter().append("g").classed(f.labelGroupClass,!0);var i=0,s=0;n.each(function(e){var n=r.select(this),a=_(n,{step:e},t),l=a.node();if(l){var u=o.bBox(l);s=Math.max(s,u.height),i=Math.max(i,u.width)}}),n.remove();var c=t._dims={};c.inputAreaWidth=Math.max(f.railWidth,f.gripHeight);var d=e._fullLayout._size;c.lx=d.l+d.w*t.x,c.ly=d.t+d.h*(1-t.y),"fraction"===t.lenmode?c.outerLength=Math.round(d.w*t.len):c.outerLength=t.len,c.inputAreaStart=0,c.inputAreaLength=Math.round(c.outerLength-t.pad.l-t.pad.r);var p=c.inputAreaLength-2*f.stepInset,g=p/(t._stepCount-1),y=i+f.labelPadding;if(c.labelStride=Math.max(1,Math.ceil(y/g)),c.labelHeight=s,c.currentValueMaxWidth=0,c.currentValueHeight=0,c.currentValueTotalHeight=0,c.currentValueMaxLines=1,t.currentvalue.visible){var x=o.tester.append("g");n.each(function(e){var n=b(x,t,e.label),r=n.node()&&o.bBox(n.node())||{width:0,height:0},a=l.lineCount(n);c.currentValueMaxWidth=Math.max(c.currentValueMaxWidth,Math.ceil(r.width)),c.currentValueHeight=Math.max(c.currentValueHeight,Math.ceil(r.height)),c.currentValueMaxLines=Math.max(c.currentValueMaxLines,a)}),c.currentValueTotalHeight=c.currentValueHeight+t.currentvalue.offset,x.remove()}c.height=c.currentValueTotalHeight+f.tickOffset+t.ticklen+f.labelOffset+c.labelHeight+t.pad.t+t.pad.b;var w="left";u.isRightAnchor(t)&&(c.lx-=c.outerLength,w="right"),u.isCenterAnchor(t)&&(c.lx-=c.outerLength/2,w="center");var T="top";u.isBottomAnchor(t)&&(c.ly-=c.height,T="bottom"),u.isMiddleAnchor(t)&&(c.ly-=c.height/2,T="middle"),c.outerLength=Math.ceil(c.outerLength),c.height=Math.ceil(c.height),c.lx=Math.round(c.lx),c.ly=Math.round(c.ly);var k={y:t.y,b:c.height*m[T],t:c.height*h[T]};"fraction"===t.lenmode?(k.l=0,k.xl=t.x-t.len*h[w],k.r=0,k.xr=t.x+t.len*m[w]):(k.x=t.x,k.l=c.outerLength*h[w],k.r=c.outerLength*m[w]),a.autoMargin(e,v(t),k)}function b(e,t,n){if(t.currentvalue.visible){var r,a,i=t._dims;switch(t.currentvalue.xanchor){case"right":r=i.inputAreaLength-f.currentValueInset-i.currentValueMaxWidth,a="left";break;case"center":r=.5*i.inputAreaLength,a="middle";break;default:r=f.currentValueInset,a="left"}var u=s.ensureSingle(e,"text",f.labelClass,function(e){e.classed("user-select-none",!0).attr({"text-anchor":a,"data-notex":1})}),c=t.currentvalue.prefix?t.currentvalue.prefix:"";if("string"==typeof n)c+=n;else{var d=t.steps[t.active].label;c+=d}t.currentvalue.suffix&&(c+=t.currentvalue.suffix),u.call(o.font,t.currentvalue.font).text(c).call(l.convertToTspans,t._gd);var h=l.lineCount(u),m=(i.currentValueMaxLines+1-h)*t.currentvalue.font.size*p;return l.positionText(u,r,m),u}}function x(e,t,n){var r=s.ensureSingle(e,"rect",f.gripRectClass,function(r){r.call(C,t,e,n).style("pointer-events","all")});r.attr({width:f.gripWidth,height:f.gripHeight,rx:f.gripRadius,ry:f.gripRadius}).call(i.stroke,n.bordercolor).call(i.fill,n.bgcolor).style("stroke-width",n.borderwidth+"px")}function _(e,t,n){var r=s.ensureSingle(e,"text",f.labelClass,function(e){e.classed("user-select-none",!0).attr({"text-anchor":"middle","data-notex":1})});return r.call(o.font,n.font).text(t.step.label).call(l.convertToTspans,n._gd),r}function w(e,t){var n=s.ensureSingle(e,"g",f.labelsClass),a=t._dims,i=n.selectAll("g."+f.labelGroupClass).data(a.labelSteps);i.enter().append("g").classed(f.labelGroupClass,!0),i.exit().remove(),i.each(function(e){var n=r.select(this);n.call(_,e,t),o.setTranslate(n,A(t,e.fraction),f.tickOffset+t.ticklen+t.font.size*p+f.labelOffset+a.currentValueTotalHeight)})}function T(e,t,n,r,a){var i=Math.round(r*(n._stepCount-1)),o=n._visibleSteps[i]._index;o!==n.active&&k(e,t,n,o,!0,a)}function k(e,t,n,r,i,o){var s=n.active;n.active=r,c(e.layout,f.name,n).applyUpdate("active",r);var l=n.steps[n.active];t.call(M,n,o),t.call(b,n),e.emit("plotly_sliderchange",{slider:n,step:n.steps[n.active],interaction:i,previousActive:s}),l&&l.method&&i&&(t._nextMethod?(t._nextMethod.step=l,t._nextMethod.doCallback=i,t._nextMethod.doTransition=o):(t._nextMethod={step:l,doCallback:i,doTransition:o},t._nextMethodRaf=window.requestAnimationFrame(function(){var n=t._nextMethod.step;n.method&&(n.execute&&a.executeAPICommand(e,n.method,n.args),t._nextMethod=null,t._nextMethodRaf=null)})))}function C(e,t,n){var a=n.node(),o=r.select(t);function s(){return n.data()[0]}e.on("mousedown",function(){var e=s();t.emit("plotly_sliderstart",{slider:e});var l=n.select("."+f.gripRectClass);r.event.stopPropagation(),r.event.preventDefault(),l.call(i.fill,e.activebgcolor);var u=S(e,r.mouse(a)[0]);T(t,n,e,u,!0),e._dragging=!0,o.on("mousemove",function(){var e=s(),i=S(e,r.mouse(a)[0]);T(t,n,e,i,!1)}),o.on("mouseup",function(){var e=s();e._dragging=!1,l.call(i.fill,e.bgcolor),o.on("mouseup",null),o.on("mousemove",null),t.emit("plotly_sliderend",{slider:e,step:e.steps[e.active]})})})}function E(e,t){var n=e.selectAll("rect."+f.tickRectClass).data(t._visibleSteps),a=t._dims;n.enter().append("rect").classed(f.tickRectClass,!0),n.exit().remove(),n.attr({width:t.tickwidth+"px","shape-rendering":"crispEdges"}),n.each(function(e,n){var s=n%a.labelStride==0,l=r.select(this);l.attr({height:s?t.ticklen:t.minorticklen}).call(i.fill,t.tickcolor),o.setTranslate(l,A(t,n/(t._stepCount-1))-.5*t.tickwidth,(s?f.tickOffset:f.minorTickOffset)+a.currentValueTotalHeight)})}function M(e,t,n){for(var r=e.select("rect."+f.gripRectClass),a=0,i=0;i<t._stepCount;i++)if(t._visibleSteps[i]._index===t.active){a=i;break}var o=A(t,a/(t._stepCount-1));if(!t._invokingCommand){var s=r;n&&t.transition.duration>0&&(s=s.transition().duration(t.transition.duration).ease(t.transition.easing)),s.attr("transform","translate("+(o-.5*f.gripWidth)+","+t._dims.currentValueTotalHeight+")")}}function A(e,t){var n=e._dims;return n.inputAreaStart+f.stepInset+(n.inputAreaLength-2*f.stepInset)*Math.min(1,Math.max(0,t))}function S(e,t){var n=e._dims;return Math.min(1,Math.max(0,(t-f.stepInset-n.inputAreaStart)/(n.inputAreaLength-2*f.stepInset-2*n.inputAreaStart)))}function O(e,t,n){var r=n._dims,a=s.ensureSingle(e,"rect",f.railTouchRectClass,function(r){r.call(C,t,e,n).style("pointer-events","all")});a.attr({width:r.inputAreaLength,height:Math.max(r.inputAreaWidth,f.tickOffset+n.ticklen+r.labelHeight)}).call(i.fill,n.bgcolor).attr("opacity",0),o.setTranslate(a,0,r.currentValueTotalHeight)}function P(e,t){var n=t._dims,r=n.inputAreaLength-2*f.railInset,a=s.ensureSingle(e,"rect",f.railRectClass);a.attr({width:r,height:f.railWidth,rx:f.railRadius,ry:f.railRadius,"shape-rendering":"crispEdges"}).call(i.stroke,t.bordercolor).call(i.fill,t.bgcolor).style("stroke-width",t.borderwidth+"px"),o.setTranslate(a,f.railInset,.5*(n.inputAreaWidth-f.railWidth)+n.currentValueTotalHeight)}t.exports=function(e){var t=e._fullLayout,n=function(e,t){for(var n=e[f.name],r=[],a=0;a<n.length;a++){var i=n[a];i.visible&&(i._gd=t,r.push(i))}return r}(t,e),i=t._infolayer.selectAll("g."+f.containerClassName).data(n.length>0?[0]:[]);function s(t){t._commandObserver&&(t._commandObserver.remove(),delete t._commandObserver),a.autoMargin(e,v(t))}if(i.enter().append("g").classed(f.containerClassName,!0).style("cursor","ew-resize"),i.exit().each(function(){r.select(this).selectAll("g."+f.groupClassName).each(s)}).remove(),0!==n.length){var l=i.selectAll("g."+f.groupClassName).data(n,g);l.enter().append("g").classed(f.groupClassName,!0),l.exit().each(s).remove();for(var u=0;u<n.length;u++){var c=n[u];y(e,c)}l.each(function(t){var n=r.select(this);!function(e){var t=e._dims;t.labelSteps=[];for(var n=e._stepCount,r=0;r<n;r+=t.labelStride)t.labelSteps.push({fraction:r/(n-1),step:e._visibleSteps[r]})}(t),a.manageCommandObserver(e,t,t._visibleSteps,function(t){var r=n.data()[0];r.active!==t.index&&(r._dragging||k(e,n,r,t.index,!1,!0))}),function(e,t,n){(n.steps[n.active]||{}).visible||(n.active=n._visibleSteps[0]._index),t.call(b,n).call(P,n).call(w,n).call(E,n).call(O,e,n).call(x,e,n);var r=n._dims;o.setTranslate(t,r.lx+n.pad.l,r.ly+n.pad.t),t.call(M,n,!1),t.call(b,n)}(e,r.select(this),t)})}}},{"../../constants/alignment":668,"../../lib":696,"../../lib/svg_text_utils":720,"../../plot_api/plot_template":734,"../../plots/plots":808,"../color":570,"../drawing":595,"../legend/anchor_utils":622,"./constants":657,d3:148}],660:[function(e,t,n){"use strict";var r=e("./constants");t.exports={moduleType:"component",name:r.name,layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),draw:e("./draw")}},{"./attributes":656,"./constants":657,"./defaults":658,"./draw":659}],661:[function(e,t,n){"use strict";var r=e("d3"),a=e("fast-isnumeric"),i=e("../../plots/plots"),o=e("../../registry"),s=e("../../lib"),l=e("../drawing"),u=e("../color"),c=e("../../lib/svg_text_utils"),f=e("../../constants/interactions");t.exports={draw:function(e,t,n){var p,h=n.propContainer,m=n.propName,v=n.placeholder,g=n.traceIndex,y=n.avoid||{},b=n.attributes,x=n.transform,_=n.containerGroup,w=e._fullLayout,T=h.titlefont||{},k=T.family,C=T.size,E=T.color,M=1,A=!1,S=(h.title||"").trim();"title"===m?p="titleText":-1!==m.indexOf("axis")?p="axisTitleText":m.indexOf(!0)&&(p="colorbarTitleText");var O=e._context.edits[p];""===S?M=0:S.replace(d," % ")===v.replace(d," % ")&&(M=.2,A=!0,O||(S=""));var P=S||O;_||(_=s.ensureSingle(w._infolayer,"g","g-"+t));var R=_.selectAll("text").data(P?[0]:[]);if(R.enter().append("text"),R.text(S).attr("class",t),R.exit().remove(),!P)return _;function L(e){s.syncOrAsync([D,I],e)}function D(t){var n;return x?(n="",x.rotate&&(n+="rotate("+[x.rotate,b.x,b.y]+")"),x.offset&&(n+="translate(0, "+x.offset+")")):n=null,t.attr("transform",n),t.style({"font-family":k,"font-size":r.round(C,2)+"px",fill:u.rgb(E),opacity:M*u.opacity(E),"font-weight":i.fontWeight}).attr(b).call(c.convertToTspans,e),i.previousPromises(e)}function I(e){var t=r.select(e.node().parentNode);if(y&&y.selection&&y.side&&S){t.attr("transform",null);var n=0,i={left:"right",right:"left",top:"bottom",bottom:"top"}[y.side],o=-1!==["left","top"].indexOf(y.side)?-1:1,u=a(y.pad)?y.pad:2,c=l.bBox(t.node()),f={left:0,top:0,right:w.width,bottom:w.height},d=y.maxShift||(f[y.side]-c[y.side])*("left"===y.side||"top"===y.side?-1:1);if(d<0)n=d;else{var p=y.offsetLeft||0,h=y.offsetTop||0;c.left-=p,c.right-=p,c.top-=h,c.bottom-=h,y.selection.each(function(){var e=l.bBox(this);s.bBoxIntersect(c,e,u)&&(n=Math.max(n,o*(e[y.side]-c[i])+u))}),n=Math.min(d,n)}if(n>0||d<0){var m={left:[-n,0],right:[n,0],top:[0,-n],bottom:[0,n]}[y.side];t.attr("transform","translate("+m+")")}}}return R.call(L),O&&(S?R.on(".opacity",null):(M=0,A=!0,R.text(v).on("mouseover.opacity",function(){r.select(this).transition().duration(f.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){r.select(this).transition().duration(f.HIDE_PLACEHOLDER).style("opacity",0)})),R.call(c.makeEditable,{gd:e}).on("edit",function(t){void 0!==g?o.call("restyle",e,m,t,g):o.call("relayout",e,m,t)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(L)}).on("input",function(e){this.text(e||" ").call(c.positionText,b.x,b.y)})),R.classed("js-placeholder",A),_}};var d=/ [XY][0-9]* /},{"../../constants/interactions":672,"../../lib":696,"../../lib/svg_text_utils":720,"../../plots/plots":808,"../../registry":827,"../color":570,"../drawing":595,d3:148,"fast-isnumeric":214}],662:[function(e,t,n){"use strict";var r=e("../../plots/font_attributes"),a=e("../color/attributes"),i=e("../../lib/extend").extendFlat,o=e("../../plot_api/edit_types").overrideAll,s=e("../../plots/pad_attributes"),l=e("../../plot_api/plot_template").templatedArray,u=l("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});t.exports=o(l("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:u,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:i({},s,{}),font:r({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:a.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":685,"../../plot_api/edit_types":727,"../../plot_api/plot_template":734,"../../plots/font_attributes":771,"../../plots/pad_attributes":807,"../color/attributes":569}],663:[function(e,t,n){"use strict";t.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"",right:"",up:"",down:""}}},{}],664:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("../../plots/array_container_defaults"),i=e("./attributes"),o=e("./constants"),s=o.name,l=i.buttons;function u(e,t,n){function o(n,a){return r.coerce(e,t,i,n,a)}var s=a(e,t,{name:"buttons",handleItemDefaults:c}),l=o("visible",s.length>0);l&&(o("active"),o("direction"),o("type"),o("showactive"),o("x"),o("y"),r.noneOrAll(e,t,["x","y"]),o("xanchor"),o("yanchor"),o("pad.t"),o("pad.r"),o("pad.b"),o("pad.l"),r.coerceFont(o,"font",n.font),o("bgcolor",n.paper_bgcolor),o("bordercolor"),o("borderwidth"))}function c(e,t){function n(n,a){return r.coerce(e,t,l,n,a)}var a=n("visible","skip"===e.method||Array.isArray(e.args));a&&(n("method"),n("args"),n("label"),n("execute"))}t.exports=function(e,t){var n={name:s,handleItemDefaults:u};a(e,t,n)}},{"../../lib":696,"../../plots/array_container_defaults":740,"./attributes":662,"./constants":663}],665:[function(e,t,n){"use strict";var r=e("d3"),a=e("../../plots/plots"),i=e("../color"),o=e("../drawing"),s=e("../../lib"),l=e("../../lib/svg_text_utils"),u=e("../legend/anchor_utils"),c=e("../../plot_api/plot_template").arrayEditor,f=e("../../constants/alignment").LINE_SPACING,d=e("./constants"),p=e("./scrollbox");function h(e){return e._index}function m(e,t){return+e.attr(d.menuIndexAttrName)===t._index}function v(e,t,n,r,a,i,o,s){t.active=o,c(e.layout,d.name,t).applyUpdate("active",o),"buttons"===t.type?y(e,r,null,null,t):"dropdown"===t.type&&(a.attr(d.menuIndexAttrName,"-1"),g(e,r,a,i,t),s||y(e,r,a,i,t))}function g(e,t,n,r,a){var i=s.ensureSingle(t,"g",d.headerClassName,function(e){e.style("pointer-events","all")}),l=a._dims,u=a.active,c=a.buttons[u]||d.blankHeaderOpts,f={y:a.pad.t,yPad:0,x:a.pad.l,xPad:0,index:0},p={width:l.headerWidth,height:l.headerHeight};i.call(b,a,c,e).call(M,a,f,p);var h=s.ensureSingle(t,"text",d.headerArrowClassName,function(e){e.classed("user-select-none",!0).attr("text-anchor","end").call(o.font,a.font).text(d.arrowSymbol[a.direction])});h.attr({x:l.headerWidth-d.arrowOffsetX+a.pad.l,y:l.headerHeight/2+d.textOffsetY+a.pad.t}),i.on("click",function(){n.call(A,String(m(n,a)?-1:a._index)),y(e,t,n,r,a)}),i.on("mouseover",function(){i.call(T)}),i.on("mouseout",function(){i.call(k,a)}),o.setTranslate(t,l.lx,l.ly)}function y(e,t,n,i,o){n||(n=t).attr("pointer-events","all");var l=function(e){return-1==+e.attr(d.menuIndexAttrName)}(n)&&"buttons"!==o.type?[]:o.buttons,u="dropdown"===o.type?d.dropdownButtonClassName:d.buttonClassName,c=n.selectAll("g."+u).data(s.filterVisible(l)),f=c.enter().append("g").classed(u,!0),p=c.exit();"dropdown"===o.type?(f.attr("opacity","0").transition().attr("opacity","1"),p.transition().attr("opacity","0").remove()):p.remove();var h=0,m=0,g=o._dims,y=-1!==["up","down"].indexOf(o.direction);"dropdown"===o.type&&(y?m=g.headerHeight+d.gapButtonHeader:h=g.headerWidth+d.gapButtonHeader),"dropdown"===o.type&&"up"===o.direction&&(m=-d.gapButtonHeader+d.gapButton-g.openHeight),"dropdown"===o.type&&"left"===o.direction&&(h=-d.gapButtonHeader+d.gapButton-g.openWidth);var x={x:g.lx+h+o.pad.l,y:g.ly+m+o.pad.t,yPad:d.gapButton,xPad:d.gapButton,index:0},_={l:x.x+o.borderwidth,t:x.y+o.borderwidth};c.each(function(s,l){var u=r.select(this);u.call(b,o,s,e).call(M,o,x),u.on("click",function(){r.event.defaultPrevented||(v(e,o,0,t,n,i,l),s.execute&&a.executeAPICommand(e,s.method,s.args),e.emit("plotly_buttonclicked",{menu:o,button:s,active:o.active}))}),u.on("mouseover",function(){u.call(T)}),u.on("mouseout",function(){u.call(k,o),c.call(w,o)})}),c.call(w,o),y?(_.w=Math.max(g.openWidth,g.headerWidth),_.h=x.y-_.t):(_.w=x.x-_.l,_.h=Math.max(g.openHeight,g.headerHeight)),_.direction=o.direction,i&&(c.size()?function(e,t,n,r,a,i){var o,s,l,u=a.direction,c="up"===u||"down"===u,f=a._dims,p=a.active;if(c)for(s=0,l=0;l<p;l++)s+=f.heights[l]+d.gapButton;else for(o=0,l=0;l<p;l++)o+=f.widths[l]+d.gapButton;r.enable(i,o,s),r.hbar&&r.hbar.attr("opacity","0").transition().attr("opacity","1"),r.vbar&&r.vbar.attr("opacity","0").transition().attr("opacity","1")}(0,0,0,i,o,_):function(e){var t=!!e.hbar,n=!!e.vbar;t&&e.hbar.transition().attr("opacity","0").each("end",function(){t=!1,n||e.disable()}),n&&e.vbar.transition().attr("opacity","0").each("end",function(){n=!1,t||e.disable()})}(i))}function b(e,t,n,r){e.call(x,t).call(_,t,n,r)}function x(e,t){var n=s.ensureSingle(e,"rect",d.itemRectClassName,function(e){e.attr({rx:d.rx,ry:d.ry,"shape-rendering":"crispEdges"})});n.call(i.stroke,t.bordercolor).call(i.fill,t.bgcolor).style("stroke-width",t.borderwidth+"px")}function _(e,t,n,r){var a=s.ensureSingle(e,"text",d.itemTextClassName,function(e){e.classed("user-select-none",!0).attr({"text-anchor":"start","data-notex":1})});a.call(o.font,t.font).text(n.label).call(l.convertToTspans,r)}function w(e,t){var n=t.active;e.each(function(e,a){var o=r.select(this);a===n&&t.showactive&&o.select("rect."+d.itemRectClassName).call(i.fill,d.activeColor)})}function T(e){e.select("rect."+d.itemRectClassName).call(i.fill,d.hoverColor)}function k(e,t){e.select("rect."+d.itemRectClassName).call(i.fill,t.bgcolor)}function C(e,t){var n=t._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},i=o.tester.selectAll("g."+d.dropdownButtonClassName).data(s.filterVisible(t.buttons));i.enter().append("g").classed(d.dropdownButtonClassName,!0);var c=-1!==["up","down"].indexOf(t.direction);i.each(function(a,i){var s=r.select(this);s.call(b,t,a,e);var u=s.select("."+d.itemTextClassName),p=u.node()&&o.bBox(u.node()).width,h=Math.max(p+d.textPadX,d.minWidth),m=t.font.size*f,v=l.lineCount(u),g=Math.max(m*v,d.minHeight)+d.textOffsetY;g=Math.ceil(g),h=Math.ceil(h),n.widths[i]=h,n.heights[i]=g,n.height1=Math.max(n.height1,g),n.width1=Math.max(n.width1,h),c?(n.totalWidth=Math.max(n.totalWidth,h),n.openWidth=n.totalWidth,n.totalHeight+=g+d.gapButton,n.openHeight+=g+d.gapButton):(n.totalWidth+=h+d.gapButton,n.openWidth+=h+d.gapButton,n.totalHeight=Math.max(n.totalHeight,g),n.openHeight=n.totalHeight)}),c?n.totalHeight-=d.gapButton:n.totalWidth-=d.gapButton,n.headerWidth=n.width1+d.arrowPadX,n.headerHeight=n.height1,"dropdown"===t.type&&(c?(n.width1+=d.arrowPadX,n.totalHeight=n.height1):n.totalWidth=n.width1,n.totalWidth+=d.arrowPadX),i.remove();var p=n.totalWidth+t.pad.l+t.pad.r,h=n.totalHeight+t.pad.t+t.pad.b,m=e._fullLayout._size;n.lx=m.l+m.w*t.x,n.ly=m.t+m.h*(1-t.y);var v="left";u.isRightAnchor(t)&&(n.lx-=p,v="right"),u.isCenterAnchor(t)&&(n.lx-=p/2,v="center");var g="top";u.isBottomAnchor(t)&&(n.ly-=h,g="bottom"),u.isMiddleAnchor(t)&&(n.ly-=h/2,g="middle"),n.totalWidth=Math.ceil(n.totalWidth),n.totalHeight=Math.ceil(n.totalHeight),n.lx=Math.round(n.lx),n.ly=Math.round(n.ly),a.autoMargin(e,E(t),{x:t.x,y:t.y,l:p*({right:1,center:.5}[v]||0),r:p*({left:1,center:.5}[v]||0),b:h*({top:1,middle:.5}[g]||0),t:h*({bottom:1,middle:.5}[g]||0)})}function E(e){return d.autoMarginIdRoot+e._index}function M(e,t,n,r){r=r||{};var a=e.select("."+d.itemRectClassName),i=e.select("."+d.itemTextClassName),s=t.borderwidth,u=n.index,c=t._dims;o.setTranslate(e,s+n.x,s+n.y);var p=-1!==["up","down"].indexOf(t.direction),h=r.height||(p?c.heights[u]:c.height1);a.attr({x:0,y:0,width:r.width||(p?c.width1:c.widths[u]),height:h});var m=t.font.size*f,v=l.lineCount(i),g=(v-1)*m/2;l.positionText(i,d.textOffsetX,h/2-g+d.textOffsetY),p?n.y+=c.heights[u]+n.yPad:n.x+=c.widths[u]+n.xPad,n.index++}function A(e,t){e.attr(d.menuIndexAttrName,t||"-1").selectAll("g."+d.dropdownButtonClassName).remove()}t.exports=function(e){var t=e._fullLayout,n=s.filterVisible(t[d.name]);function i(t){a.autoMargin(e,E(t))}var o=t._menulayer.selectAll("g."+d.containerClassName).data(n.length>0?[0]:[]);if(o.enter().append("g").classed(d.containerClassName,!0).style("cursor","pointer"),o.exit().each(function(){r.select(this).selectAll("g."+d.headerGroupClassName).each(i)}).remove(),0!==n.length){var l=o.selectAll("g."+d.headerGroupClassName).data(n,h);l.enter().append("g").classed(d.headerGroupClassName,!0);for(var u=s.ensureSingle(o,"g",d.dropdownButtonGroupClassName,function(e){e.style("pointer-events","all")}),c=0;c<n.length;c++){var f=n[c];C(e,f)}var b="updatemenus"+t._uid,x=new p(e,u,b);l.enter().size()&&(u.node().parentNode.appendChild(u.node()),u.call(A)),l.exit().each(function(e){u.call(A),i(e)}).remove(),l.each(function(t){var n=r.select(this),i="dropdown"===t.type?u:null;a.manageCommandObserver(e,t,t.buttons,function(r){v(e,t,t.buttons[r.index],n,i,x,r.index,!0)}),"dropdown"===t.type?(g(e,n,u,x,t),m(u,t)&&y(e,n,u,x,t)):y(e,n,null,null,t)})}}},{"../../constants/alignment":668,"../../lib":696,"../../lib/svg_text_utils":720,"../../plot_api/plot_template":734,"../../plots/plots":808,"../color":570,"../drawing":595,"../legend/anchor_utils":622,"./constants":663,"./scrollbox":667,d3:148}],666:[function(e,t,n){arguments[4][660][0].apply(n,arguments)},{"./attributes":662,"./constants":663,"./defaults":664,"./draw":665,dup:660}],667:[function(e,t,n){"use strict";t.exports=s;var r=e("d3"),a=e("../color"),i=e("../drawing"),o=e("../../lib");function s(e,t,n){this.gd=e,this.container=t,this.id=n,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}s.barWidth=2,s.barLength=20,s.barRadius=2,s.barPad=1,s.barColor="#808BA4",s.prototype.enable=function(e,t,n){var o=this.gd._fullLayout,l=o.width,u=o.height;this.position=e;var c,f,d,p,h=this.position.l,m=this.position.w,v=this.position.t,g=this.position.h,y=this.position.direction,b="down"===y,x="left"===y,_="right"===y,w="up"===y,T=m,k=g;b||x||_||w||(this.position.direction="down",b=!0);var C=b||w;C?(f=(c=h)+T,b?(d=v,p=Math.min(d+k,u),k=p-d):(p=v+k,d=Math.max(p-k,0),k=p-d)):(p=(d=v)+k,x?(f=h+T,c=Math.max(f-T,0),T=f-c):(c=h,f=Math.min(c+T,l),T=f-c)),this._box={l:c,t:d,w:T,h:k};var E=m>T,M=s.barLength+2*s.barPad,A=s.barWidth+2*s.barPad,S=h,O=v+g;O+A>u&&(O=u-A);var P=this.container.selectAll("rect.scrollbar-horizontal").data(E?[0]:[]);P.exit().on(".drag",null).remove(),P.enter().append("rect").classed("scrollbar-horizontal",!0).call(a.fill,s.barColor),E?(this.hbar=P.attr({rx:s.barRadius,ry:s.barRadius,x:S,y:O,width:M,height:A}),this._hbarXMin=S+M/2,this._hbarTranslateMax=T-M):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var R=g>k,L=s.barWidth+2*s.barPad,D=s.barLength+2*s.barPad,I=h+m,z=v;I+L>l&&(I=l-L);var j=this.container.selectAll("rect.scrollbar-vertical").data(R?[0]:[]);j.exit().on(".drag",null).remove(),j.enter().append("rect").classed("scrollbar-vertical",!0).call(a.fill,s.barColor),R?(this.vbar=j.attr({rx:s.barRadius,ry:s.barRadius,x:I,y:z,width:L,height:D}),this._vbarYMin=z+D/2,this._vbarTranslateMax=k-D):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var N=this.id,F=c-.5,B=R?f+L+.5:f+.5,V=d-.5,U=E?p+A+.5:p+.5,G=o._topdefs.selectAll("#"+N).data(E||R?[0]:[]);if(G.exit().remove(),G.enter().append("clipPath").attr("id",N).append("rect"),E||R?(this._clipRect=G.select("rect").attr({x:Math.floor(F),y:Math.floor(V),width:Math.ceil(B)-Math.floor(F),height:Math.ceil(U)-Math.floor(V)}),this.container.call(i.setClipUrl,N),this.bg.attr({x:h,y:v,width:m,height:g})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(i.setClipUrl,null),delete this._clipRect),E||R){var H=r.behavior.drag().on("dragstart",function(){r.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(H);var W=r.behavior.drag().on("dragstart",function(){r.event.sourceEvent.preventDefault(),r.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));E&&this.hbar.on(".drag",null).call(W),R&&this.vbar.on(".drag",null).call(W)}this.setTranslate(t,n)},s.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(i.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},s.prototype._onBoxDrag=function(){var e=this.translateX,t=this.translateY;this.hbar&&(e-=r.event.dx),this.vbar&&(t-=r.event.dy),this.setTranslate(e,t)},s.prototype._onBoxWheel=function(){var e=this.translateX,t=this.translateY;this.hbar&&(e+=r.event.deltaY),this.vbar&&(t+=r.event.deltaY),this.setTranslate(e,t)},s.prototype._onBarDrag=function(){var e=this.translateX,t=this.translateY;if(this.hbar){var n=e+this._hbarXMin,a=n+this._hbarTranslateMax,i=o.constrain(r.event.x,n,a),s=(i-n)/(a-n),l=this.position.w-this._box.w;e=s*l}if(this.vbar){var u=t+this._vbarYMin,c=u+this._vbarTranslateMax,f=o.constrain(r.event.y,u,c),d=(f-u)/(c-u),p=this.position.h-this._box.h;t=d*p}this.setTranslate(e,t)},s.prototype.setTranslate=function(e,t){var n=this.position.w-this._box.w,r=this.position.h-this._box.h;if(e=o.constrain(e||0,0,n),t=o.constrain(t||0,0,r),this.translateX=e,this.translateY=t,this.container.call(i.setTranslate,this._box.l-this.position.l-e,this._box.t-this.position.t-t),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+e-.5),y:Math.floor(this.position.t+t-.5)}),this.hbar){var a=e/n;this.hbar.call(i.setTranslate,e+a*this._hbarTranslateMax,t)}if(this.vbar){var s=t/r;this.vbar.call(i.setTranslate,e,t+s*this._vbarTranslateMax)}}},{"../../lib":696,"../color":570,"../drawing":595,d3:148}],668:[function(e,t,n){"use strict";t.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],669:[function(e,t,n){"use strict";t.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},{}],670:[function(e,t,n){"use strict";t.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},{}],671:[function(e,t,n){"use strict";t.exports={circle:"","circle-open":"",square:"","square-open":"",diamond:"","diamond-open":"",cross:"+",x:""}},{}],672:[function(e,t,n){"use strict";t.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DBLCLICKDELAY:300,DESELECTDIM:.2}},{}],673:[function(e,t,n){"use strict";t.exports={BADNUM:void 0,FP_SAFE:Number.MAX_VALUE/1e4,ONEAVGYEAR:315576e5,ONEAVGMONTH:26298e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:2440587.5,ALMOST_EQUAL:1-1e-6,LOG_CLIP:10,MINUS_SIGN:""}},{}],674:[function(e,t,n){"use strict";n.xmlns="http://www.w3.org/2000/xmlns/",n.svg="http://www.w3.org/2000/svg",n.xlink="http://www.w3.org/1999/xlink",n.svgAttrs={xmlns:n.svg,"xmlns:xlink":n.xlink}},{}],675:[function(e,t,n){"use strict";n.version="1.42.5",e("es6-promise").polyfill(),e("../build/plotcss"),e("./fonts/mathjax_config");for(var r=e("./registry"),a=n.register=r.register,i=e("./plot_api"),o=Object.keys(i),s=0;s<o.length;s++){var l=o[s];n[l]=i[l],a({moduleType:"apiMethod",name:l,fn:i[l]})}a(e("./traces/scatter")),a([e("./components/fx"),e("./components/legend"),e("./components/annotations"),e("./components/annotations3d"),e("./components/shapes"),e("./components/images"),e("./components/updatemenus"),e("./components/sliders"),e("./components/rangeslider"),e("./components/rangeselector"),e("./components/grid"),e("./components/errorbars")]),a([e("./locale-en"),e("./locale-en-us")]),n.Icons=e("../build/ploticon"),n.Plots=e("./plots/plots"),n.Fx=e("./components/fx"),n.Snapshot=e("./snapshot"),n.PlotSchema=e("./plot_api/plot_schema"),n.Queue=e("./lib/queue"),n.d3=e("d3")},{"../build/plotcss":1,"../build/ploticon":2,"./components/annotations":561,"./components/annotations3d":566,"./components/errorbars":601,"./components/fx":612,"./components/grid":616,"./components/images":621,"./components/legend":630,"./components/rangeselector":641,"./components/rangeslider":647,"./components/shapes":655,"./components/sliders":660,"./components/updatemenus":666,"./fonts/mathjax_config":676,"./lib/queue":711,"./locale-en":725,"./locale-en-us":724,"./plot_api":729,"./plot_api/plot_schema":733,"./plots/plots":808,"./registry":827,"./snapshot":832,"./traces/scatter":1055,d3:148,"es6-promise":203}],676:[function(e,t,n){"use strict";if("undefined"!=typeof MathJax){n.MathJax=!0;var r="local"!==(window.PlotlyConfig||{}).MathJaxConfig;r&&(MathJax.Hub.Config({messageStyle:"none",skipStartupTypeset:!0,displayAlign:"left",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]}}),MathJax.Hub.Configured())}else n.MathJax=!1},{}],677:[function(e,t,n){"use strict";var r=e("./mod"),a=r.mod,i=r.modHalf,o=Math.PI,s=2*o;function l(e){return Math.abs(e[1]-e[0])>s-1e-15}function u(e,t){return i(t-e,s)}function c(e,t){if(l(t))return!0;var n,r;t[0]<t[1]?(n=t[0],r=t[1]):(n=t[1],r=t[0]),n=a(n,s),r=a(r,s),n>r&&(r+=s);var i=a(e,s),o=i+s;return i>=n&&i<=r||o>=n&&o<=r}function f(e,t,n,r,a,i,u){a=a||0,i=i||0;var c,f,d,p,h,m=l([n,r]);function v(e,t){return[e*Math.cos(t)+a,i-e*Math.sin(t)]}m?(c=0,f=o,d=s):n<r?(c=n,d=r):(c=r,d=n),e<t?(p=e,h=t):(p=t,h=e);var g,y=Math.abs(d-c)<=o?0:1;function b(e,t,n){return"A"+[e,e]+" "+[0,y,n]+" "+v(e,t)}return m?g=null===p?"M"+v(h,c)+b(h,f,0)+b(h,d,0)+"Z":"M"+v(p,c)+b(p,f,0)+b(p,d,0)+"ZM"+v(h,c)+b(h,f,1)+b(h,d,1)+"Z":null===p?(g="M"+v(h,c)+b(h,d,0),u&&(g+="L0,0Z")):g="M"+v(p,c)+"L"+v(h,c)+b(h,d,0)+"L"+v(p,d)+b(p,c,1)+"Z",g}t.exports={deg2rad:function(e){return e/180*o},rad2deg:function(e){return e/o*180},angleDelta:u,angleDist:function(e,t){return Math.abs(u(e,t))},isFullCircle:l,isAngleInsideSector:c,isPtInsideSector:function(e,t,n,r){return!!c(t,r)&&(n[0]<n[1]?(a=n[0],i=n[1]):(a=n[1],i=n[0]),e>=a&&e<=i);var a,i},pathArc:function(e,t,n,r,a){return f(null,e,t,n,r,a,0)},pathSector:function(e,t,n,r,a){return f(null,e,t,n,r,a,1)},pathAnnulus:function(e,t,n,r,a,i){return f(e,t,n,r,a,i,1)}}},{"./mod":703}],678:[function(e,t,n){"use strict";var r=Array.isArray,a="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer:{isView:function(){return!1}},i="undefined"==typeof DataView?function(){}:DataView;function o(e){return a.isView(e)&&!(e instanceof i)}function s(e){return r(e)||o(e)}n.isTypedArray=o,n.isArrayOrTypedArray=s,n.isArray1D=function(e){return!s(e[0])},n.ensureArray=function(e,t){return r(e)||(e=[]),e.length=t,e},n.concat=function(){var e,t,n,a,i,o,s,l,u=[],c=!0,f=0;for(n=0;n<arguments.length;n++)a=arguments[n],(o=a.length)&&(t?u.push(a):(t=a,i=o),r(a)?e=!1:(c=!1,f?e!==a.constructor&&(e=!1):e=a.constructor),f+=o);if(!f)return[];if(!u.length)return t;if(c)return t.concat.apply(t,u);if(e){for((s=new e(f)).set(t),n=0;n<u.length;n++)a=u[n],s.set(a,i),i+=a.length;return s}for(s=new Array(f),l=0;l<t.length;l++)s[l]=t[l];for(n=0;n<u.length;n++){for(a=u[n],l=0;l<a.length;l++)s[i+l]=a[l];i+=l}return s}},{}],679:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),a=e("../constants/numerical").BADNUM,i=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;t.exports=function(e){return"string"==typeof e&&(e=e.replace(i,"")),r(e)?Number(e):a}},{"../constants/numerical":673,"fast-isnumeric":214}],680:[function(e,t,n){"use strict";t.exports=function(e){var t=e._fullLayout;t._glcanvas&&t._glcanvas.size()&&t._glcanvas.each(function(e){e.regl&&e.regl.clear({color:!0,depth:!0})})}},{}],681:[function(e,t,n){"use strict";t.exports=function(e){e._responsiveChartHandler&&(window.removeEventListener("resize",e._responsiveChartHandler),delete e._responsiveChartHandler)}},{}],682:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),a=e("tinycolor2"),i=e("../plots/attributes"),o=e("../components/colorscale/get_scale"),s=(Object.keys(e("../components/colorscale/scales")),e("./nested_property")),l=e("./regex").counter,u=e("../constants/interactions").DESELECTDIM,c=e("./mod").modHalf,f=e("./array").isArrayOrTypedArray;function d(e,t){var r=n.valObjectMeta[t.valType];if(t.arrayOk&&f(e))return!0;if(r.validateFunction)return r.validateFunction(e,t);var a={},i=a,o={set:function(e){i=e}};return r.coerceFunction(e,o,a,t),i!==a}n.valObjectMeta={data_array:{coerceFunction:function(e,t,n){f(e)?t.set(e):void 0!==n&&t.set(n)}},enumerated:{coerceFunction:function(e,t,n,r){r.coerceNumber&&(e=+e),-1===r.values.indexOf(e)?t.set(n):t.set(e)},validateFunction:function(e,t){t.coerceNumber&&(e=+e);for(var n=t.values,r=0;r<n.length;r++){var a=String(n[r]);if("/"===a.charAt(0)&&"/"===a.charAt(a.length-1)){var i=new RegExp(a.substr(1,a.length-2));if(i.test(e))return!0}else if(e===n[r])return!0}return!1}},boolean:{coerceFunction:function(e,t,n){!0===e||!1===e?t.set(e):t.set(n)}},number:{coerceFunction:function(e,t,n,a){!r(e)||void 0!==a.min&&e<a.min||void 0!==a.max&&e>a.max?t.set(n):t.set(+e)}},integer:{coerceFunction:function(e,t,n,a){e%1||!r(e)||void 0!==a.min&&e<a.min||void 0!==a.max&&e>a.max?t.set(n):t.set(+e)}},string:{coerceFunction:function(e,t,n,r){if("string"!=typeof e){var a="number"==typeof e;!0!==r.strict&&a?t.set(String(e)):t.set(n)}else r.noBlank&&!e?t.set(n):t.set(e)}},color:{coerceFunction:function(e,t,n){a(e).isValid()?t.set(e):t.set(n)}},colorlist:{coerceFunction:function(e,t,n){Array.isArray(e)&&e.length&&e.every(function(e){return a(e).isValid()})?t.set(e):t.set(n)}},colorscale:{coerceFunction:function(e,t,n){t.set(o(e,n))}},angle:{coerceFunction:function(e,t,n){"auto"===e?t.set("auto"):r(e)?t.set(c(+e,360)):t.set(n)}},subplotid:{coerceFunction:function(e,t,n,r){var a=r.regex||l(n);"string"==typeof e&&a.test(e)?t.set(e):t.set(n)},validateFunction:function(e,t){var n=t.dflt;return e===n||"string"==typeof e&&!!l(n).test(e)}},flaglist:{coerceFunction:function(e,t,n,r){if("string"==typeof e)if(-1===(r.extras||[]).indexOf(e)){for(var a=e.split("+"),i=0;i<a.length;){var o=a[i];-1===r.flags.indexOf(o)||a.indexOf(o)<i?a.splice(i,1):i++}a.length?t.set(a.join("+")):t.set(n)}else t.set(e);else t.set(n)}},any:{coerceFunction:function(e,t,n){void 0===e?t.set(n):t.set(e)}},info_array:{coerceFunction:function(e,t,r,a){function i(e,t,r){var a,i={set:function(e){a=e}};return void 0===r&&(r=t.dflt),n.valObjectMeta[t.valType].coerceFunction(e,i,r,t),a}var o=2===a.dimensions||"1-2"===a.dimensions&&Array.isArray(e)&&Array.isArray(e[0]);if(Array.isArray(e)){var s,l,u,c,f,d,p=a.items,h=[],m=Array.isArray(p),v=m&&o&&Array.isArray(p[0]),g=o&&m&&!v,y=m&&!g?p.length:e.length;if(r=Array.isArray(r)?r:[],o)for(s=0;s<y;s++)for(h[s]=[],u=Array.isArray(e[s])?e[s]:[],f=g?p.length:m?p[s].length:u.length,l=0;l<f;l++)c=g?p[l]:m?p[s][l]:p,void 0!==(d=i(u[l],c,(r[s]||[])[l]))&&(h[s][l]=d);else for(s=0;s<y;s++)void 0!==(d=i(e[s],m?p[s]:p,r[s]))&&(h[s]=d);t.set(h)}else t.set(r)},validateFunction:function(e,t){if(!Array.isArray(e))return!1;var n=t.items,r=Array.isArray(n),a=2===t.dimensions;if(!t.freeLength&&e.length!==n.length)return!1;for(var i=0;i<e.length;i++)if(a){if(!Array.isArray(e[i])||!t.freeLength&&e[i].length!==n[i].length)return!1;for(var o=0;o<e[i].length;o++)if(!d(e[i][o],r?n[i][o]:n))return!1}else if(!d(e[i],r?n[i]:n))return!1;return!0}}},n.coerce=function(e,t,r,a,i){var o=s(r,a).get(),l=s(e,a),u=s(t,a),c=l.get(),p=t._template;if(void 0===c&&p&&(c=s(p,a).get(),p=0),void 0===i&&(i=o.dflt),o.arrayOk&&f(c))return u.set(c),c;var h=n.valObjectMeta[o.valType].coerceFunction;h(c,u,i,o);var m=u.get();return p&&m===i&&!d(c,o)&&(c=s(p,a).get(),h(c,u,i,o),m=u.get()),m},n.coerce2=function(e,t,r,a,i){var o=s(e,a),l=n.coerce(e,t,r,a,i),u=o.get();return void 0!==u&&null!==u&&l},n.coerceFont=function(e,t,n){var r={};return n=n||{},r.family=e(t+".family",n.family),r.size=e(t+".size",n.size),r.color=e(t+".color",n.color),r},n.coerceHoverinfo=function(e,t,r){var a,o=t._module.attributes,s=o.hoverinfo?o:i,l=s.hoverinfo;if(1===r._dataLength){var u="all"===l.dflt?l.flags.slice():l.dflt.split("+");u.splice(u.indexOf("name"),1),a=u.join("+")}return n.coerce(e,t,s,"hoverinfo",a)},n.coerceSelectionMarkerOpacity=function(e,t){if(e.marker){var n,r,a=e.marker.opacity;void 0!==a&&(f(a)||e.selected||e.unselected||(n=a,r=u*a),t("selected.marker.opacity",n),t("unselected.marker.opacity",r))}},n.validate=d},{"../components/colorscale/get_scale":583,"../components/colorscale/scales":589,"../constants/interactions":672,"../plots/attributes":741,"./array":678,"./mod":703,"./nested_property":704,"./regex":712,"fast-isnumeric":214,tinycolor2:514}],683:[function(e,t,n){"use strict";var r,a,i=e("d3"),o=e("fast-isnumeric"),s=e("./loggers"),l=e("./mod").mod,u=e("../constants/numerical"),c=u.BADNUM,f=u.ONEDAY,d=u.ONEHOUR,p=u.ONEMIN,h=u.ONESEC,m=u.EPOCHJD,v=e("../registry"),g=i.time.format.utc,y=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d:?\d\d)?)?)?)?)?\s*$/m,b=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d:?\d\d)?)?)?)?)?\s*$/m,x=(new Date).getFullYear()-70;function _(e){return e&&v.componentsRegistry.calendars&&"string"==typeof e&&"gregorian"!==e}function w(e,t){return String(e+Math.pow(10,t)).substr(1)}n.dateTick0=function(e,t){return _(e)?t?v.getComponentMethod("calendars","CANONICAL_SUNDAY")[e]:v.getComponentMethod("calendars","CANONICAL_TICK")[e]:t?"2000-01-02":"2000-01-01"},n.dfltRange=function(e){return _(e)?v.getComponentMethod("calendars","DFLTRANGE")[e]:["2000-01-01","2001-01-01"]},n.isJSDate=function(e){return"object"==typeof e&&null!==e&&"function"==typeof e.getTime},n.dateTime2ms=function(e,t){if(n.isJSDate(e)){var i=e.getTimezoneOffset()*p,o=(e.getUTCMinutes()-e.getMinutes())*p+(e.getUTCSeconds()-e.getSeconds())*h+(e.getUTCMilliseconds()-e.getMilliseconds());if(o){var s=3*p;i=i-s/2+l(o-i+s/2,s)}return(e=Number(e)-i)>=r&&e<=a?e:c}if("string"!=typeof e&&"number"!=typeof e)return c;e=String(e);var u=_(t),g=e.charAt(0);!u||"G"!==g&&"g"!==g||(e=e.substr(1),t="");var w=u&&"chinese"===t.substr(0,7),T=e.match(w?b:y);if(!T)return c;var k=T[1],C=T[3]||"1",E=Number(T[5]||1),M=Number(T[7]||0),A=Number(T[9]||0),S=Number(T[11]||0);if(u){if(2===k.length)return c;var O;k=Number(k);try{var P=v.getComponentMethod("calendars","getCal")(t);if(w){var R="i"===C.charAt(C.length-1);C=parseInt(C,10),O=P.newDate(k,P.toMonthIndex(k,C,R),E)}else O=P.newDate(k,Number(C),E)}catch(e){return c}return O?(O.toJD()-m)*f+M*d+A*p+S*h:c}k=2===k.length?(Number(k)+2e3-x)%100+x:Number(k),C-=1;var L=new Date(Date.UTC(2e3,C,E,M,A));return L.setUTCFullYear(k),L.getUTCMonth()!==C?c:L.getUTCDate()!==E?c:L.getTime()+S*h},r=n.MIN_MS=n.dateTime2ms("-9999"),a=n.MAX_MS=n.dateTime2ms("9999-12-31 23:59:59.9999"),n.isDateTime=function(e,t){return n.dateTime2ms(e,t)!==c};var T=90*f,k=3*d,C=5*p;function E(e,t,n,r,a){if((t||n||r||a)&&(e+=" "+w(t,2)+":"+w(n,2),(r||a)&&(e+=":"+w(r,2),a))){for(var i=4;a%10==0;)i-=1,a/=10;e+="."+w(a,i)}return e}n.ms2DateTime=function(e,t,n){if("number"!=typeof e||!(e>=r&&e<=a))return c;t||(t=0);var i,o,s,u,y,b,x=Math.floor(10*l(e+.05,1)),w=Math.round(e-x/10);if(_(n)){var M=Math.floor(w/f)+m,A=Math.floor(l(e,f));try{i=v.getComponentMethod("calendars","getCal")(n).fromJD(M).formatDate("yyyy-mm-dd")}catch(e){i=g("G%Y-%m-%d")(new Date(w))}if("-"===i.charAt(0))for(;i.length<11;)i="-0"+i.substr(1);else for(;i.length<10;)i="0"+i;o=t<T?Math.floor(A/d):0,s=t<T?Math.floor(A%d/p):0,u=t<k?Math.floor(A%p/h):0,y=t<C?A%h*10+x:0}else b=new Date(w),i=g("%Y-%m-%d")(b),o=t<T?b.getUTCHours():0,s=t<T?b.getUTCMinutes():0,u=t<k?b.getUTCSeconds():0,y=t<C?10*b.getUTCMilliseconds()+x:0;return E(i,o,s,u,y)},n.ms2DateTimeLocal=function(e){if(!(e>=r+f&&e<=a-f))return c;var t=Math.floor(10*l(e+.05,1)),n=new Date(Math.round(e-t/10)),o=i.time.format("%Y-%m-%d")(n),s=n.getHours(),u=n.getMinutes(),d=n.getSeconds(),p=10*n.getUTCMilliseconds()+t;return E(o,s,u,d,p)},n.cleanDate=function(e,t,r){if(e===c)return t;if(n.isJSDate(e)||"number"==typeof e&&isFinite(e)){if(_(r))return s.error("JS Dates and milliseconds are incompatible with world calendars",e),t;if(!(e=n.ms2DateTimeLocal(+e))&&void 0!==t)return t}else if(!n.isDateTime(e,r))return s.error("unrecognized date",e),t;return e};var M=/%\d?f/g;function A(e,t,n,r){e=e.replace(M,function(e){var n=Math.min(+e.charAt(1)||6,6),r=(t/1e3%1+2).toFixed(n).substr(2).replace(/0+$/,"")||"0";return r});var a=new Date(Math.floor(t+.05));if(_(r))try{e=v.getComponentMethod("calendars","worldCalFmt")(e,t,r)}catch(e){return"Invalid"}return n(e)(a)}var S=[59,59.9,59.99,59.999,59.9999];n.formatDate=function(e,t,n,r,a,i){if(a=_(a)&&a,!t)if("y"===n)t=i.year;else if("m"===n)t=i.month;else{if("d"!==n)return function(e,t){var n=l(e+.05,f),r=w(Math.floor(n/d),2)+":"+w(l(Math.floor(n/p),60),2);if("M"!==t){o(t)||(t=0);var a=Math.min(l(e/h,60),S[t]),i=(100+a).toFixed(t).substr(1);t>0&&(i=i.replace(/0+$/,"").replace(/[\.]$/,"")),r+=":"+i}return r}(e,n)+"\n"+A(i.dayMonthYear,e,r,a);t=i.dayMonth+"\n"+i.year}return A(t,e,r,a)};var O=3*f;n.incrementMonth=function(e,t,n){n=_(n)&&n;var r=l(e,f);if(e=Math.round(e-r),n)try{var a=Math.round(e/f)+m,i=v.getComponentMethod("calendars","getCal")(n),o=i.fromJD(a);return t%12?i.add(o,t,"m"):i.add(o,t/12,"y"),(o.toJD()-m)*f+r}catch(t){s.error("invalid ms "+e+" in calendar "+n)}var u=new Date(e+O);return u.setUTCMonth(u.getUTCMonth()+t)+r-O},n.findExactDates=function(e,t){for(var n,r,a=0,i=0,s=0,l=0,u=_(t)&&v.getComponentMethod("calendars","getCal")(t),c=0;c<e.length;c++)if(r=e[c],o(r)){if(!(r%f))if(u)try{1===(n=u.fromJD(r/f+m)).day()?1===n.month()?a++:i++:s++}catch(e){}else 1===(n=new Date(r)).getUTCDate()?0===n.getUTCMonth()?a++:i++:s++}else l++;s+=i+=a;var d=e.length-l;return{exactYears:a/d,exactMonths:i/d,exactDays:s/d}}},{"../constants/numerical":673,"../registry":827,"./loggers":700,"./mod":703,d3:148,"fast-isnumeric":214}],684:[function(e,t,n){"use strict";var r=e("events").EventEmitter,a={init:function(e){if(e._ev instanceof r)return e;var t=new r,n=new r;return e._ev=t,e._internalEv=n,e.on=t.on.bind(t),e.once=t.once.bind(t),e.removeListener=t.removeListener.bind(t),e.removeAllListeners=t.removeAllListeners.bind(t),e._internalOn=n.on.bind(n),e._internalOnce=n.once.bind(n),e._removeInternalListener=n.removeListener.bind(n),e._removeAllInternalListeners=n.removeAllListeners.bind(n),e.emit=function(r,a){"undefined"!=typeof jQuery&&jQuery(e).trigger(r,a),t.emit(r,a),n.emit(r,a)},e},triggerHandler:function(e,t,n){var r,a;"undefined"!=typeof jQuery&&(r=jQuery(e).triggerHandler(t,n));var i=e._ev;if(!i)return r;var o,s=i._events[t];if(!s)return r;function l(e){return e.listener?(i.removeListener(t,e.listener),e.fired?void 0:(e.fired=!0,e.listener.apply(i,[n]))):e.apply(i,[n])}for(s=Array.isArray(s)?s:[s],o=0;o<s.length-1;o++)l(s[o]);return a=l(s[o]),void 0!==r?r:a},purge:function(e){return delete e._ev,delete e.on,delete e.once,delete e.removeListener,delete e.removeAllListeners,delete e.emit,delete e._ev,delete e._internalEv,delete e._internalOn,delete e._internalOnce,delete e._removeInternalListener,delete e._removeAllInternalListeners,e}};t.exports=a},{events:92}],685:[function(e,t,n){"use strict";var r=e("./is_plain_object.js"),a=Array.isArray;function i(e,t,n,o){var s,l,u,c,f,d,p=e[0],h=e.length;if(2===h&&a(p)&&a(e[1])&&0===p.length){if(function(e,t){var n,r;for(n=0;n<e.length;n++){if(null!==(r=e[n])&&"object"==typeof r)return!1;void 0!==r&&(t[n]=r)}return!0}(e[1],p))return p;p.splice(0,p.length)}for(var m=1;m<h;m++)for(l in s=e[m])u=p[l],c=s[l],o&&a(c)?p[l]=c:t&&c&&(r(c)||(f=a(c)))?(f?(f=!1,d=u&&a(u)?u:[]):d=u&&r(u)?u:{},p[l]=i([d,c],t,n,o)):(void 0!==c||n)&&(p[l]=c);return p}n.extendFlat=function(){return i(arguments,!1,!1,!1)},n.extendDeep=function(){return i(arguments,!0,!1,!1)},n.extendDeepAll=function(){return i(arguments,!0,!0,!1)},n.extendDeepNoArrays=function(){return i(arguments,!0,!1,!0)}},{"./is_plain_object.js":697}],686:[function(e,t,n){"use strict";t.exports=function(e){for(var t={},n=[],r=0,a=0;a<e.length;a++){var i=e[a];1!==t[i]&&(t[i]=1,n[r++]=i)}return n}},{}],687:[function(e,t,n){"use strict";function r(e){return!0===e.visible}function a(e){return!0===e[0].trace.visible}t.exports=function(e){for(var t=function(e){return Array.isArray(e)&&Array.isArray(e[0])&&e[0][0]&&e[0][0].trace}(e)?a:r,n=[],i=0;i<e.length;i++){var o=e[i];t(o)&&n.push(o)}return n}},{}],688:[function(e,t,n){"use strict";var r=e("country-regex"),a=e("../lib"),i=Object.keys(r),o={"ISO-3":a.identity,"USA-states":a.identity,"country names":function(e){for(var t=0;t<i.length;t++){var n=i[t],o=new RegExp(r[n]);if(o.test(e.trim().toLowerCase()))return n}return a.log("Unrecognized country name: "+e+"."),!1}};n.locationToFeature=function(e,t,n){if(!t||"string"!=typeof t)return!1;var r=function(e,t){return(0,o[e])(t)}(e,t);if(r){for(var i=0;i<n.length;i++){var s=n[i];if(s.id===r)return s}a.log(["Location with id",r,"does not have a matching topojson feature at this resolution."].join(" "))}return!1}},{"../lib":696,"country-regex":122}],689:[function(e,t,n){"use strict";var r=e("../constants/numerical").BADNUM;n.calcTraceToLineCoords=function(e){for(var t=e[0].trace,n=t.connectgaps,a=[],i=[],o=0;o<e.length;o++){var s=e[o],l=s.lonlat;l[0]!==r?i.push(l):!n&&i.length>0&&(a.push(i),i=[])}return i.length>0&&a.push(i),a},n.makeLine=function(e){return 1===e.length?{type:"LineString",coordinates:e[0]}:{type:"MultiLineString",coordinates:e}},n.makePolygon=function(e){if(1===e.length)return{type:"Polygon",coordinates:e};for(var t=new Array(e.length),n=0;n<e.length;n++)t[n]=[e[n]];return{type:"MultiPolygon",coordinates:t}},n.makeBlank=function(){return{type:"Point",coordinates:[]}}},{"../constants/numerical":673}],690:[function(e,t,n){"use strict";var r,a,i,o=e("./mod").mod;function s(e,t,n,r,a,i,o,s){var l=n-e,u=a-e,c=o-a,f=r-t,d=i-t,p=s-i,h=l*p-c*f;if(0===h)return null;var m=(u*p-c*d)/h,v=(u*f-l*d)/h;return v<0||v>1||m<0||m>1?null:{x:e+l*m,y:t+f*m}}function l(e,t,n,r,a){var i=r*e+a*t;if(i<0)return r*r+a*a;if(i>n){var o=r-e,s=a-t;return o*o+s*s}var l=r*t-a*e;return l*l/n}n.segmentsIntersect=s,n.segmentDistance=function(e,t,n,r,a,i,o,u){if(s(e,t,n,r,a,i,o,u))return 0;var c=n-e,f=r-t,d=o-a,p=u-i,h=c*c+f*f,m=d*d+p*p,v=Math.min(l(c,f,h,a-e,i-t),l(c,f,h,o-e,u-t),l(d,p,m,e-a,t-i),l(d,p,m,n-a,r-i));return Math.sqrt(v)},n.getTextLocation=function(e,t,n,s){if(e===a&&s===i||(r={},a=e,i=s),r[n])return r[n];var l=e.getPointAtLength(o(n-s/2,t)),u=e.getPointAtLength(o(n+s/2,t)),c=Math.atan((u.y-l.y)/(u.x-l.x)),f=e.getPointAtLength(o(n,t)),d=(4*f.x+l.x+u.x)/6,p=(4*f.y+l.y+u.y)/6,h={x:d,y:p,theta:c};return r[n]=h,h},n.clearLocationCache=function(){a=null},n.getVisibleSegment=function(e,t,n){var r,a,i=t.left,o=t.right,s=t.top,l=t.bottom,u=0,c=e.getTotalLength(),f=c;function d(t){var n=e.getPointAtLength(t);0===t?r=n:t===c&&(a=n);var u=n.x<i?i-n.x:n.x>o?n.x-o:0,f=n.y<s?s-n.y:n.y>l?n.y-l:0;return Math.sqrt(u*u+f*f)}for(var p=d(u);p;){if((u+=p+n)>f)return;p=d(u)}for(p=d(f);p;){if(u>(f-=p+n))return;p=d(f)}return{min:u,max:f,len:f-u,total:c,isClosed:0===u&&f===c&&Math.abs(r.x-a.x)<.1&&Math.abs(r.y-a.y)<.1}},n.findPointOnPath=function(e,t,n,r){for(var a,i,o,s=(r=r||{}).pathLength||e.getTotalLength(),l=r.tolerance||.001,u=r.iterationLimit||30,c=e.getPointAtLength(0)[n]>e.getPointAtLength(s)[n]?-1:1,f=0,d=0,p=s;f<u;){if(a=(d+p)/2,i=e.getPointAtLength(a),o=i[n]-t,Math.abs(o)<l)return i;c*o>0?p=a:d=a,f++}return i}},{"./mod":703}],691:[function(e,t,n){"use strict";t.exports=function(e){var t;if("string"==typeof e){if(null===(t=document.getElementById(e)))throw new Error("No DOM element with id '"+e+"' exists on the page.");return t}if(null===e||void 0===e)throw new Error("DOM element provided is null or undefined");return e}},{}],692:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),a=e("tinycolor2"),i=e("color-normalize"),o=e("../components/colorscale"),s=e("../components/color/attributes").defaultLine,l=e("./array").isArrayOrTypedArray,u=i(s),c=1;function f(e,t){var n=e;return n[3]*=t,n}function d(e){if(r(e))return u;var t=i(e);return t.length?t:u}function p(e){return r(e)?e:c}t.exports={formatColor:function(e,t,n){var r,a,s,h,m,v=e.color,g=l(v),y=l(t),b=[];if(r=void 0!==e.colorscale?o.makeColorScaleFunc(o.extractScale(e.colorscale,e.cmin,e.cmax)):d,a=g?function(e,t){return void 0===e[t]?u:i(r(e[t]))}:d,s=y?function(e,t){return void 0===e[t]?c:p(e[t])}:p,g||y)for(var x=0;x<n;x++)h=a(v,x),m=s(t,x),b[x]=f(h,m);else b=f(i(v),t);return b},parseColorScale:function(e,t){return void 0===t&&(t=1),e.map(function(e){var n=e[0],r=a(e[1]),i=r.toRgb();return{index:n,rgb:[i.r,i.g,i.b,t]}})}}},{"../components/color/attributes":569,"../components/colorscale":585,"./array":678,"color-normalize":108,"fast-isnumeric":214,tinycolor2:514}],693:[function(e,t,n){"use strict";var r=e("./identity");function a(e){return[e]}t.exports={keyFun:function(e){return e.key},repeat:a,descend:r,wrap:a,unwrap:function(e){return e[0]}}},{"./identity":695}],694:[function(e,t,n){"use strict";var r=e("superscript-text"),a=e("./svg_text_utils").convertEntities;t.exports=function(e){return""+a(function(e){return e.replace(/\<.*\>/g,"")}(function(e){for(var t=0;(t=e.indexOf("<sup>",t))>=0;){var n=e.indexOf("</sup>",t);if(n<t)break;e=e.slice(0,t)+r(e.slice(t+5,n))+e.slice(n+6)}return e}(function(e){return e.replace(/\<br\>/g,"\n")}(e))))}},{"./svg_text_utils":720,"superscript-text":507}],695:[function(e,t,n){"use strict";t.exports=function(e){return e}},{}],696:[function(e,t,n){"use strict";var r=e("d3"),a=e("fast-isnumeric"),i=e("../constants/numerical"),o=i.FP_SAFE,s=i.BADNUM,l=t.exports={};l.nestedProperty=e("./nested_property"),l.keyedContainer=e("./keyed_container"),l.relativeAttr=e("./relative_attr"),l.isPlainObject=e("./is_plain_object"),l.toLogRange=e("./to_log_range"),l.relinkPrivateKeys=e("./relink_private");var u=e("./array");l.isTypedArray=u.isTypedArray,l.isArrayOrTypedArray=u.isArrayOrTypedArray,l.isArray1D=u.isArray1D,l.ensureArray=u.ensureArray,l.concat=u.concat;var c=e("./mod");l.mod=c.mod,l.modHalf=c.modHalf;var f=e("./coerce");l.valObjectMeta=f.valObjectMeta,l.coerce=f.coerce,l.coerce2=f.coerce2,l.coerceFont=f.coerceFont,l.coerceHoverinfo=f.coerceHoverinfo,l.coerceSelectionMarkerOpacity=f.coerceSelectionMarkerOpacity,l.validate=f.validate;var d=e("./dates");l.dateTime2ms=d.dateTime2ms,l.isDateTime=d.isDateTime,l.ms2DateTime=d.ms2DateTime,l.ms2DateTimeLocal=d.ms2DateTimeLocal,l.cleanDate=d.cleanDate,l.isJSDate=d.isJSDate,l.formatDate=d.formatDate,l.incrementMonth=d.incrementMonth,l.dateTick0=d.dateTick0,l.dfltRange=d.dfltRange,l.findExactDates=d.findExactDates,l.MIN_MS=d.MIN_MS,l.MAX_MS=d.MAX_MS;var p=e("./search");l.findBin=p.findBin,l.sorterAsc=p.sorterAsc,l.sorterDes=p.sorterDes,l.distinctVals=p.distinctVals,l.roundUp=p.roundUp,l.sort=p.sort,l.findIndexOfMin=p.findIndexOfMin;var h=e("./stats");l.aggNums=h.aggNums,l.len=h.len,l.mean=h.mean,l.midRange=h.midRange,l.variance=h.variance,l.stdev=h.stdev,l.interp=h.interp;var m=e("./matrix");l.init2dArray=m.init2dArray,l.transposeRagged=m.transposeRagged,l.dot=m.dot,l.translationMatrix=m.translationMatrix,l.rotationMatrix=m.rotationMatrix,l.rotationXYMatrix=m.rotationXYMatrix,l.apply2DTransform=m.apply2DTransform,l.apply2DTransform2=m.apply2DTransform2;var v=e("./angles");l.deg2rad=v.deg2rad,l.rad2deg=v.rad2deg,l.angleDelta=v.angleDelta,l.angleDist=v.angleDist,l.isFullCircle=v.isFullCircle,l.isAngleInsideSector=v.isAngleInsideSector,l.isPtInsideSector=v.isPtInsideSector,l.pathArc=v.pathArc,l.pathSector=v.pathSector,l.pathAnnulus=v.pathAnnulus;var g=e("./geometry2d");l.segmentsIntersect=g.segmentsIntersect,l.segmentDistance=g.segmentDistance,l.getTextLocation=g.getTextLocation,l.clearLocationCache=g.clearLocationCache,l.getVisibleSegment=g.getVisibleSegment,l.findPointOnPath=g.findPointOnPath;var y=e("./extend");l.extendFlat=y.extendFlat,l.extendDeep=y.extendDeep,l.extendDeepAll=y.extendDeepAll,l.extendDeepNoArrays=y.extendDeepNoArrays;var b=e("./loggers");l.log=b.log,l.warn=b.warn,l.error=b.error;var x=e("./regex");l.counterRegex=x.counter;var _=e("./throttle");function w(e){var t={};for(var n in e)for(var r=e[n],a=0;a<r.length;a++)t[r[a]]=+n;return t}l.throttle=_.throttle,l.throttleDone=_.done,l.clearThrottle=_.clear,l.getGraphDiv=e("./get_graph_div"),l.clearResponsive=e("./clear_responsive"),l.makeTraceGroups=e("./make_trace_groups"),l._=e("./localize"),l.notifier=e("./notifier"),l.filterUnique=e("./filter_unique"),l.filterVisible=e("./filter_visible"),l.pushUnique=e("./push_unique"),l.cleanNumber=e("./clean_number"),l.ensureNumber=function(e){return a(e)?(e=Number(e))<-o||e>o?s:a(e)?Number(e):s:s},l.isIndex=function(e,t){return!(void 0!==t&&e>=t)&&a(e)&&e>=0&&e%1==0},l.noop=e("./noop"),l.identity=e("./identity"),l.repeat=function(e,t){for(var n=new Array(t),r=0;r<t;r++)n[r]=e;return n},l.swapAttrs=function(e,t,n,r){n||(n="x"),r||(r="y");for(var a=0;a<t.length;a++){var i=t[a],o=l.nestedProperty(e,i.replace("?",n)),s=l.nestedProperty(e,i.replace("?",r)),u=o.get();o.set(s.get()),s.set(u)}},l.raiseToTop=function(e){e.parentNode.appendChild(e)},l.cancelTransition=function(e){return e.transition().duration(0)},l.constrain=function(e,t,n){return t>n?Math.max(n,Math.min(t,e)):Math.max(t,Math.min(n,e))},l.bBoxIntersect=function(e,t,n){return n=n||0,e.left<=t.right+n&&t.left<=e.right+n&&e.top<=t.bottom+n&&t.top<=e.bottom+n},l.simpleMap=function(e,t,n,r){for(var a=e.length,i=new Array(a),o=0;o<a;o++)i[o]=t(e[o],n,r);return i},l.randstr=function e(t,n,r,a){if(r||(r=16),void 0===n&&(n=24),n<=0)return"0";var i,o,s,u=Math.log(Math.pow(2,n))/Math.log(r),c="";for(i=2;u===1/0;i*=2)u=Math.log(Math.pow(2,n/i))/Math.log(r)*i;var f=u-Math.floor(u);for(i=0;i<Math.floor(u);i++)s=Math.floor(Math.random()*r).toString(r),c=s+c;f&&(o=Math.pow(r,f),s=Math.floor(Math.random()*o).toString(r),c=s+c);var d=parseInt(c,r);return t&&t[c]||d!==1/0&&d>=Math.pow(2,n)?a>10?(l.warn("randstr failed uniqueness"),c):e(t,n,r,(a||0)+1):c},l.OptionControl=function(e,t){e||(e={}),t||(t="opt");var n={optionList:[],_newoption:function(r){r[t]=e,n[r.name]=r,n.optionList.push(r)}};return n["_"+t]=e,n},l.smooth=function(e,t){if((t=Math.round(t)||0)<2)return e;var n,r,a,i,o=e.length,s=2*o,l=2*t-1,u=new Array(l),c=new Array(o);for(n=0;n<l;n++)u[n]=(1-Math.cos(Math.PI*(n+1)/t))/(2*t);for(n=0;n<o;n++){for(i=0,r=0;r<l;r++)(a=n+r+1-t)<-o?a-=s*Math.round(a/s):a>=s&&(a-=s*Math.floor(a/s)),a<0?a=-1-a:a>=o&&(a=s-1-a),i+=e[a]*u[r];c[n]=i}return c},l.syncOrAsync=function(e,t,n){var r,a;function i(){return l.syncOrAsync(e,t,n)}for(;e.length;)if(a=e.splice(0,1)[0],(r=a(t))&&r.then)return r.then(i).then(void 0,l.promiseError);return n&&n(t)},l.stripTrailingSlash=function(e){return"/"===e.substr(-1)?e.substr(0,e.length-1):e},l.noneOrAll=function(e,t,n){if(e){var r,a,i=!1,o=!0;for(r=0;r<n.length;r++)void 0!==(a=e[n[r]])&&null!==a?i=!0:o=!1;if(i&&!o)for(r=0;r<n.length;r++)e[n[r]]=t[n[r]]}},l.mergeArray=function(e,t,n){if(l.isArrayOrTypedArray(e))for(var r=Math.min(e.length,t.length),a=0;a<r;a++)t[a][n]=e[a]},l.fillArray=function(e,t,n,r){if(r=r||l.identity,l.isArrayOrTypedArray(e))for(var a=0;a<t.length;a++)t[a][n]=r(e[a])},l.castOption=function(e,t,n,r){r=r||l.identity;var a=l.nestedProperty(e,n).get();return l.isArrayOrTypedArray(a)?Array.isArray(t)&&l.isArrayOrTypedArray(a[t[0]])?r(a[t[0]][t[1]]):r(a[t]):a},l.extractOption=function(e,t,n,r){if(n in e)return e[n];var a=l.nestedProperty(t,r).get();return Array.isArray(a)?void 0:a},l.tagSelected=function(e,t,n){var r,a=t.selectedpoints,i=t._indexToPoints;function o(t){return void 0!==t&&t<e.length}i&&(r=w(i));for(var s=0;s<a.length;s++){var u=a[s];if(l.isIndex(u)){var c=r?r[u]:u,f=n?n[c]:c;o(f)&&(e[f].selected=1)}}},l.selIndices2selPoints=function(e){var t=e.selectedpoints,n=e._indexToPoints;if(n){for(var r=w(n),a=[],i=0;i<t.length;i++){var o=t[i];if(l.isIndex(o)){var s=r[o];l.isIndex(s)&&a.push(s)}}return a}return t},l.getTargetArray=function(e,t){var n=t.target;if("string"==typeof n&&n){var r=l.nestedProperty(e,n).get();return!!Array.isArray(r)&&r}return!!Array.isArray(n)&&n},l.minExtend=function(e,t){var n={};"object"!=typeof t&&(t={});var r,a,i,o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],i=e[a],"_"!==a.charAt(0)&&"function"!=typeof i&&("module"===a?n[a]=i:Array.isArray(i)?n[a]=i.slice(0,3):n[a]=i&&"object"==typeof i?l.minExtend(e[a],t[a]):i);for(o=Object.keys(t),r=0;r<o.length;r++)a=o[r],"object"==typeof(i=t[a])&&a in n&&"object"==typeof n[a]||(n[a]=i);return n},l.titleCase=function(e){return e.charAt(0).toUpperCase()+e.substr(1)},l.containsAny=function(e,t){for(var n=0;n<t.length;n++)if(-1!==e.indexOf(t[n]))return!0;return!1},l.isPlotDiv=function(e){var t=r.select(e);return t.node()instanceof HTMLElement&&t.size()&&t.classed("js-plotly-plot")},l.removeElement=function(e){var t=e&&e.parentNode;t&&t.removeChild(e)},l.addStyleRule=function(e,t){l.addRelatedStyleRule("global",e,t)},l.addRelatedStyleRule=function(e,t,n){var r="plotly.js-style-"+e,a=document.getElementById(r);a||((a=document.createElement("style")).setAttribute("id",r),a.appendChild(document.createTextNode("")),document.head.appendChild(a));var i=a.sheet;i.insertRule?i.insertRule(t+"{"+n+"}",0):i.addRule?i.addRule(t,n,0):l.warn("addStyleRule failed")},l.deleteRelatedStyleRule=function(e){var t="plotly.js-style-"+e,n=document.getElementById(t);n&&l.removeElement(n)},l.isIE=function(){return void 0!==window.navigator.msSaveBlob},l.isD3Selection=function(e){return e&&"function"==typeof e.classed},l.ensureSingle=function(e,t,n,r){var a=e.select(t+(n?"."+n:""));if(a.size())return a;var i=e.append(t);return n&&i.classed(n,!0),r&&i.call(r),i},l.ensureSingleById=function(e,t,n,r){var a=e.select(t+"#"+n);if(a.size())return a;var i=e.append(t).attr("id",n);return r&&i.call(r),i},l.objectFromPath=function(e,t){for(var n,r=e.split("."),a=n={},i=0;i<r.length;i++){var o=r[i],s=null,l=r[i].match(/(.*)\[([0-9]+)\]/);l?(o=l[1],s=l[2],n=n[o]=[],i===r.length-1?n[s]=t:n[s]={},n=n[s]):(i===r.length-1?n[o]=t:n[o]={},n=n[o])}return a};var T=/^([^\[\.]+)\.(.+)?/,k=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;l.expandObjectPaths=function(e){var t,n,r,a,i,o,s;if("object"==typeof e&&!Array.isArray(e))for(n in e)e.hasOwnProperty(n)&&((t=n.match(T))?(a=e[n],r=t[1],delete e[n],e[r]=l.extendDeepNoArrays(e[r]||{},l.objectFromPath(n,l.expandObjectPaths(a))[r])):(t=n.match(k))?(a=e[n],r=t[1],i=parseInt(t[2]),delete e[n],e[r]=e[r]||[],"."===t[3]?(s=t[4],o=e[r][i]=e[r][i]||{},l.extendDeepNoArrays(o,l.objectFromPath(s,l.expandObjectPaths(a)))):e[r][i]=l.expandObjectPaths(a)):e[n]=l.expandObjectPaths(e[n]));return e},l.numSeparate=function(e,t,n){if(n||(n=!1),"string"!=typeof t||0===t.length)throw new Error("Separator string required for formatting!");"number"==typeof e&&(e=String(e));var r=/(\d+)(\d{3})/,a=t.charAt(0),i=t.charAt(1),o=e.split("."),s=o[0],l=o.length>1?a+o[1]:"";if(i&&(o.length>1||s.length>4||n))for(;r.test(s);)s=s.replace(r,"$1"+i+"$2");return s+l};var C=/%{([^\s%{}]*)}/g,E=/^\w*$/;l.templateString=function(e,t){var n={};return e.replace(C,function(e,r){return E.test(r)?t[r]||"":(n[r]=n[r]||l.nestedProperty(t,r).get,n[r]()||"")})},l.subplotSort=function(e,t){for(var n=Math.min(e.length,t.length)+1,r=0,a=0,i=0;i<n;i++){var o=e.charCodeAt(i)||0,s=t.charCodeAt(i)||0,l=o>=48&&o<=57,u=s>=48&&s<=57;if(l&&(r=10*r+o-48),u&&(a=10*a+s-48),!l||!u){if(r!==a)return r-a;if(o!==s)return o-s}}return a-r};var M=2e9;l.seedPseudoRandom=function(){M=2e9},l.pseudoRandom=function(){var e=M;return M=(69069*M+1)%4294967296,Math.abs(M-e)<429496729?l.pseudoRandom():M/4294967296}},{"../constants/numerical":673,"./angles":677,"./array":678,"./clean_number":679,"./clear_responsive":681,"./coerce":682,"./dates":683,"./extend":685,"./filter_unique":686,"./filter_visible":687,"./geometry2d":690,"./get_graph_div":691,"./identity":695,"./is_plain_object":697,"./keyed_container":698,"./localize":699,"./loggers":700,"./make_trace_groups":701,"./matrix":702,"./mod":703,"./nested_property":704,"./noop":705,"./notifier":706,"./push_unique":710,"./regex":712,"./relative_attr":713,"./relink_private":714,"./search":715,"./stats":718,"./throttle":721,"./to_log_range":722,d3:148,"fast-isnumeric":214}],697:[function(e,t,n){"use strict";t.exports=function(e){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(e):"[object Object]"===Object.prototype.toString.call(e)&&Object.getPrototypeOf(e)===Object.prototype}},{}],698:[function(e,t,n){"use strict";var r=e("./nested_property"),a=/^\w*$/;t.exports=function(e,t,n,i){var o,s,l;n=n||"name",i=i||"value";var u={};t&&t.length?(l=r(e,t),s=l.get()):s=e,t=t||"";var c={};if(s)for(o=0;o<s.length;o++)c[s[o][n]]=o;var f=a.test(i),d={set:function(e,t){var a=null===t?4:0;if(!s){if(!l||4===a)return;s=[],l.set(s)}var o=c[e];if(void 0===o){if(4===a)return;a|=3,o=s.length,c[e]=o}else t!==(f?s[o][i]:r(s[o],i).get())&&(a|=2);var p=s[o]=s[o]||{};return p[n]=e,f?p[i]=t:r(p,i).set(t),null!==t&&(a&=-5),u[o]=u[o]|a,d},get:function(e){if(s){var t=c[e];return void 0===t?void 0:f?s[t][i]:r(s[t],i).get()}},rename:function(e,t){var r=c[e];return void 0===r?d:(u[r]=1|u[r],c[t]=r,delete c[e],s[r][n]=t,d)},remove:function(e){var t=c[e];if(void 0===t)return d;var a=s[t];if(Object.keys(a).length>2)return u[t]=2|u[t],d.set(e,null);if(f){for(o=t;o<s.length;o++)u[o]=3|u[o];for(o=t;o<s.length;o++)c[s[o][n]]--;s.splice(t,1),delete c[e]}else r(a,i).set(null),u[t]=6|u[t];return d},constructUpdate:function(){for(var e,a,o={},l=Object.keys(u),c=0;c<l.length;c++)a=l[c],e=t+"["+a+"]",s[a]?(1&u[a]&&(o[e+"."+n]=s[a][n]),2&u[a]&&(o[e+"."+i]=f?4&u[a]?null:s[a][i]:4&u[a]?null:r(s[a],i).get())):o[e]=null;return o}};return d}},{"./nested_property":704}],699:[function(e,t,n){"use strict";var r=e("../registry");t.exports=function(e,t){for(var n=e._context.locale,a=0;a<2;a++){for(var i=e._context.locales,o=0;o<2;o++){var s=(i[n]||{}).dictionary;if(s){var l=s[t];if(l)return l}i=r.localeRegistry}var u=n.split("-")[0];if(u===n)break;n=u}return t}},{"../registry":827}],700:[function(e,t,n){"use strict";var r=e("../plot_api/plot_config"),a=t.exports={};function i(e,t){if(e&&e.apply)try{return void e.apply(console,t)}catch(e){}for(var n=0;n<t.length;n++)try{e(t[n])}catch(e){console.log(t[n])}}a.log=function(){if(r.logging>1){for(var e=["LOG:"],t=0;t<arguments.length;t++)e.push(arguments[t]);i(console.trace||console.log,e)}},a.warn=function(){if(r.logging>0){for(var e=["WARN:"],t=0;t<arguments.length;t++)e.push(arguments[t]);i(console.trace||console.log,e)}},a.error=function(){if(r.logging>0){for(var e=["ERROR:"],t=0;t<arguments.length;t++)e.push(arguments[t]);i(console.error,e)}}},{"../plot_api/plot_config":732}],701:[function(e,t,n){"use strict";t.exports=function(e,t,n){var r=e.selectAll("g."+n.replace(/\s/g,".")).data(t,function(e){return e[0].trace.uid});return r.exit().remove(),r.enter().append("g").attr("class",n),r.order(),r}},{}],702:[function(e,t,n){"use strict";n.init2dArray=function(e,t){for(var n=new Array(e),r=0;r<e;r++)n[r]=new Array(t);return n},n.transposeRagged=function(e){var t,n,r=0,a=e.length;for(t=0;t<a;t++)r=Math.max(r,e[t].length);var i=new Array(r);for(t=0;t<r;t++)for(i[t]=new Array(a),n=0;n<a;n++)i[t][n]=e[n][t];return i},n.dot=function(e,t){if(!e.length||!t.length||e.length!==t.length)return null;var r,a,i=e.length;if(e[0].length)for(r=new Array(i),a=0;a<i;a++)r[a]=n.dot(e[a],t);else if(t[0].length){var o=n.transposeRagged(t);for(r=new Array(o.length),a=0;a<o.length;a++)r[a]=n.dot(e,o[a])}else for(r=0,a=0;a<i;a++)r+=e[a]*t[a];return r},n.translationMatrix=function(e,t){return[[1,0,e],[0,1,t],[0,0,1]]},n.rotationMatrix=function(e){var t=e*Math.PI/180;return[[Math.cos(t),-Math.sin(t),0],[Math.sin(t),Math.cos(t),0],[0,0,1]]},n.rotationXYMatrix=function(e,t,r){return n.dot(n.dot(n.translationMatrix(t,r),n.rotationMatrix(e)),n.translationMatrix(-t,-r))},n.apply2DTransform=function(e){return function(){var t=arguments;3===t.length&&(t=t[0]);var r=1===arguments.length?t[0]:[t[0],t[1]];return n.dot(e,[r[0],r[1],1]).slice(0,2)}},n.apply2DTransform2=function(e){var t=n.apply2DTransform(e);return function(e){return t(e.slice(0,2)).concat(t(e.slice(2,4)))}}},{}],703:[function(e,t,n){"use strict";t.exports={mod:function(e,t){var n=e%t;return n<0?n+t:n},modHalf:function(e,t){return Math.abs(e)>t/2?e-Math.round(e/t)*t:e}}},{}],704:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),a=e("./array").isArrayOrTypedArray;t.exports=function(e,t){if(r(t))t=String(t);else if("string"!=typeof t||"[-1]"===t.substr(t.length-4))throw"bad property string";for(var n,i,o,l=0,u=t.split(".");l<u.length;){if(n=String(u[l]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(n[1])u[l]=n[1];else{if(0!==l)throw"bad property string";u.splice(0,1)}for(i=n[2].substr(1,n[2].length-2).split("]["),o=0;o<i.length;o++)l++,u.splice(l,0,Number(i[o]))}l++}return"object"!=typeof e?function(e,t,n){return{set:function(){throw"bad container"},get:function(){},astr:t,parts:n,obj:e}}(e,t,u):{set:s(e,u,t),get:function e(t,n){return function(){var r,i,o,s,l,u=t;for(s=0;s<n.length-1;s++){if(-1===(r=n[s])){for(i=!0,o=[],l=0;l<u.length;l++)o[l]=e(u[l],n.slice(s+1))(),o[l]!==o[0]&&(i=!1);return i?o[0]:o}if("number"==typeof r&&!a(u))return;if("object"!=typeof(u=u[r])||null===u)return}if("object"==typeof u&&null!==u&&null!==(o=u[n[s]]))return o}}(e,u),astr:t,parts:u,obj:e}};var i=/(^|\.)args\[/;function o(e,t){return void 0===e||null===e&&!t.match(i)}function s(e,t,n){return function(r){var i,s,f=e,d="",p=[[e,d]],h=o(r,n);for(s=0;s<t.length-1;s++){if("number"==typeof(i=t[s])&&!a(f))throw"array index but container is not an array";if(-1===i){if(h=!u(f,t.slice(s+1),r,n))break;return}if(!c(f,i,t[s+1],h))break;if("object"!=typeof(f=f[i])||null===f)throw"container is not an object";d=l(d,i),p.push([f,d])}if(h){if(s===t.length-1&&(delete f[t[s]],Array.isArray(f)&&+t[s]==f.length-1))for(;f.length&&void 0===f[f.length-1];)f.pop()}else f[t[s]]=r}}function l(e,t){var n=t;return r(t)?n="["+t+"]":e&&(n="."+t),e+n}function u(e,t,n,r){var i,l=a(n),u=!0,f=n,d=r.replace("-1",0),p=!l&&o(n,d),h=t[0];for(i=0;i<e.length;i++)d=r.replace("-1",i),l&&(f=n[i%n.length],p=o(f,d)),p&&(u=!1),c(e,i,h,p)&&s(e[i],t,r.replace("-1",i))(f);return u}function c(e,t,n,r){if(void 0===e[t]){if(r)return!1;e[t]="number"==typeof n?[]:{}}return!0}},{"./array":678,"fast-isnumeric":214}],705:[function(e,t,n){"use strict";t.exports=function(){}},{}],706:[function(e,t,n){"use strict";var r=e("d3"),a=e("fast-isnumeric"),i=[];t.exports=function(e,t){if(-1===i.indexOf(e)){i.push(e);var n=1e3;a(t)?n=t:"long"===t&&(n=3e3);var o=r.select("body").selectAll(".plotly-notifier").data([0]);o.enter().append("div").classed("plotly-notifier",!0);var s=o.selectAll(".notifier-note").data(i);s.enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(e){var t=r.select(this);t.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){t.transition().call(l)});for(var a=t.append("p"),i=e.split(/<br\s*\/?>/g),o=0;o<i.length;o++)o&&a.append("br"),a.append("span").text(i[o]);t.transition().duration(700).style("opacity",1).transition().delay(n).call(l)})}function l(e){e.duration(700).style("opacity",0).each("end",function(e){var t=i.indexOf(e);-1!==t&&i.splice(t,1),r.select(this).remove()})}}},{d3:148,"fast-isnumeric":214}],707:[function(e,t,n){"use strict";var r=e("./setcursor"),a="data-savedcursor";t.exports=function(e,t){var n=e.attr(a);if(t){if(!n){for(var i=(e.attr("class")||"").split(" "),o=0;o<i.length;o++){var s=i[o];0===s.indexOf("cursor-")&&e.attr(a,s.substr(7)).classed(s,!1)}e.attr(a)||e.attr(a,"!!")}r(e,t)}else n&&(e.attr(a,null),"!!"===n?r(e):r(e,n))}},{"./setcursor":716}],708:[function(e,t,n){"use strict";var r=e("./matrix").dot,a=e("../constants/numerical").BADNUM,i=t.exports={};i.tester=function(e){var t,n=e.slice(),r=n[0][0],i=r,o=n[0][1],s=o;for(n.push(n[0]),t=1;t<n.length;t++)r=Math.min(r,n[t][0]),i=Math.max(i,n[t][0]),o=Math.min(o,n[t][1]),s=Math.max(s,n[t][1]);var l,u=!1;5===n.length&&(n[0][0]===n[1][0]?n[2][0]===n[3][0]&&n[0][1]===n[3][1]&&n[1][1]===n[2][1]&&(u=!0,l=function(e){return e[0]===n[0][0]}):n[0][1]===n[1][1]&&n[2][1]===n[3][1]&&n[0][0]===n[3][0]&&n[1][0]===n[2][0]&&(u=!0,l=function(e){return e[1]===n[0][1]}));var c=!0,f=n[0];for(t=1;t<n.length;t++)if(f[0]!==n[t][0]||f[1]!==n[t][1]){c=!1;break}return{xmin:r,xmax:i,ymin:o,ymax:s,pts:n,contains:u?function(e,t){var n=e[0],u=e[1];return!(n===a||n<r||n>i||u===a||u<o||u>s||t&&l(e))}:function(e,t){var l=e[0],u=e[1];if(l===a||l<r||l>i||u===a||u<o||u>s)return!1;var c,f,d,p,h,m=n.length,v=n[0][0],g=n[0][1],y=0;for(c=1;c<m;c++)if(f=v,d=g,v=n[c][0],g=n[c][1],p=Math.min(f,v),!(l<p||l>Math.max(f,v)||u>Math.max(d,g)))if(u<Math.min(d,g))l!==p&&y++;else{if(u===(h=v===f?u:d+(l-f)*(g-d)/(v-f)))return 1!==c||!t;u<=h&&l!==p&&y++}return y%2==1},isRect:u,degenerate:c}};var o=i.isSegmentBent=function(e,t,n,a){var i,o,s,l=e[t],u=[e[n][0]-l[0],e[n][1]-l[1]],c=r(u,u),f=Math.sqrt(c),d=[-u[1]/f,u[0]/f];for(i=t+1;i<n;i++)if(o=[e[i][0]-l[0],e[i][1]-l[1]],(s=r(o,u))<0||s>c||Math.abs(r(o,d))>a)return!0;return!1};i.filter=function(e,t){var n=[e[0]],r=0,a=0;function i(i){e.push(i);var s=n.length,l=r;n.splice(a+1);for(var u=l+1;u<e.length;u++)(u===e.length-1||o(e,l,u+1,t))&&(n.push(e[u]),n.length<s-2&&(r=u,a=n.length-1),l=u)}if(e.length>1){var s=e.pop();i(s)}return{addPt:i,raw:e,filtered:n}}},{"../constants/numerical":673,"./matrix":702}],709:[function(e,n,r){(function(t){"use strict";var r=e("./show_no_webgl_msg"),a=e("regl");n.exports=function(e,n){var i=e._fullLayout,o=!0;return i._glcanvas.each(function(r){if(!r.regl&&(!r.pick||i._has("parcoords"))){try{r.regl=a({canvas:this,attributes:{antialias:!r.pick,preserveDrawingBuffer:!0},pixelRatio:e._context.plotGlPixelRatio||t.devicePixelRatio,extensions:n||[]})}catch(e){o=!1}o&&this.addEventListener("webglcontextlost",function(t){e&&e.emit&&e.emit("plotly_webglcontextlost",{event:t,layer:r.key})},!1)}}),o||r({container:i._glcontainer.node()}),o}}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./show_no_webgl_msg":717,regl:478}],710:[function(e,t,n){"use strict";t.exports=function(e,t){if(t instanceof RegExp){var n,r=t.toString();for(n=0;n<e.length;n++)if(e[n]instanceof RegExp&&e[n].toString()===r)return e;e.push(t)}else!t&&0!==t||-1!==e.indexOf(t)||e.push(t);return e}},{}],711:[function(e,t,n){"use strict";var r=e("../lib"),a=e("../plot_api/plot_config"),i={add:function(e,t,n,r,i){var o,s;e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},s=e.undoQueue.index,e.autoplay?e.undoQueue.inSequence||(e.autoplay=!1):(!e.undoQueue.sequence||e.undoQueue.beginSequence?(o={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},e.undoQueue.queue.splice(s,e.undoQueue.queue.length-s,o),e.undoQueue.index+=1):o=e.undoQueue.queue[s-1],e.undoQueue.beginSequence=!1,o&&(o.undo.calls.unshift(t),o.undo.args.unshift(n),o.redo.calls.push(r),o.redo.args.push(i)),e.undoQueue.queue.length>a.queueLength&&(e.undoQueue.queue.shift(),e.undoQueue.index--))},startSequence:function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!0,e.undoQueue.beginSequence=!0},stopSequence:function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!1,e.undoQueue.beginSequence=!1},undo:function(e){var t,n;if(e.framework&&e.framework.isPolar)e.framework.undo();else if(!(void 0===e.undoQueue||isNaN(e.undoQueue.index)||e.undoQueue.index<=0)){for(e.undoQueue.index--,t=e.undoQueue.queue[e.undoQueue.index],e.undoQueue.inSequence=!0,n=0;n<t.undo.calls.length;n++)i.plotDo(e,t.undo.calls[n],t.undo.args[n]);e.undoQueue.inSequence=!1,e.autoplay=!1}},redo:function(e){var t,n;if(e.framework&&e.framework.isPolar)e.framework.redo();else if(!(void 0===e.undoQueue||isNaN(e.undoQueue.index)||e.undoQueue.index>=e.undoQueue.queue.length)){for(t=e.undoQueue.queue[e.undoQueue.index],e.undoQueue.inSequence=!0,n=0;n<t.redo.calls.length;n++)i.plotDo(e,t.redo.calls[n],t.redo.args[n]);e.undoQueue.inSequence=!1,e.autoplay=!1,e.undoQueue.index++}},plotDo:function(e,t,n){e.autoplay=!0,n=function(e,t){for(var n,a=[],i=0;i<t.length;i++)n=t[i],a[i]=n===e?n:"object"==typeof n?Array.isArray(n)?r.extendDeep([],n):r.extendDeepAll({},n):n;return a}(e,n),t.apply(null,n)}};t.exports=i},{"../lib":696,"../plot_api/plot_config":732}],712:[function(e,t,n){"use strict";n.counter=function(e,t,n){var r=(t||"")+(n?"":"$");return"xy"===e?new RegExp("^x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+r):new RegExp("^"+e+"([2-9]|[1-9][0-9]+)?"+r)}},{}],713:[function(e,t,n){"use strict";var r=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,a=/^[^\.\[\]]+$/;t.exports=function(e,t){for(;t;){var n=e.match(r);if(n)e=n[1];else{if(!e.match(a))throw new Error("bad relativeAttr call:"+[e,t]);e=""}if("^"!==t.charAt(0))break;t=t.slice(1)}return e&&"["!==t.charAt(0)?e+"."+t:e+t}},{}],714:[function(e,t,n){"use strict";var r=e("./array").isArrayOrTypedArray,a=e("./is_plain_object");t.exports=function e(t,n){for(var i in n){var o=n[i],s=t[i];if(s!==o)if("_"===i.charAt(0)||"function"==typeof o){if(i in t)continue;t[i]=o}else if(r(o)&&r(s)&&a(o[0])){if("customdata"===i||"ids"===i)continue;for(var l=Math.min(o.length,s.length),u=0;u<l;u++)s[u]!==o[u]&&a(o[u])&&a(s[u])&&e(s[u],o[u])}else a(o)&&a(s)&&(e(s,o),Object.keys(s).length||delete t[i])}}},{"./array":678,"./is_plain_object":697}],715:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),a=e("./loggers"),i=e("./identity");function o(e,t){return e<t}function s(e,t){return e<=t}function l(e,t){return e>t}function u(e,t){return e>=t}n.findBin=function(e,t,n){if(r(t.start))return n?Math.ceil((e-t.start)/t.size-1e-9)-1:Math.floor((e-t.start)/t.size+1e-9);var i,c,f=0,d=t.length,p=0,h=d>1?(t[d-1]-t[0])/(d-1):1;for(c=h>=0?n?o:s:n?u:l,e+=1e-9*h*(n?-1:1)*(h>=0?1:-1);f<d&&p++<100;)i=Math.floor((f+d)/2),c(t[i],e)?f=i+1:d=i;return p>90&&a.log("Long binary search..."),f-1},n.sorterAsc=function(e,t){return e-t},n.sorterDes=function(e,t){return t-e},n.distinctVals=function(e){var t=e.slice();t.sort(n.sorterAsc);for(var r=t.length-1,a=t[r]-t[0]||1,i=a/(r||1)/1e4,o=[t[0]],s=0;s<r;s++)t[s+1]>t[s]+i&&(a=Math.min(a,t[s+1]-t[s]),o.push(t[s+1]));return{vals:o,minDiff:a}},n.roundUp=function(e,t,n){for(var r,a=0,i=t.length-1,o=0,s=n?0:1,l=n?1:0,u=n?Math.ceil:Math.floor;a<i&&o++<100;)r=u((a+i)/2),t[r]<=e?a=r+s:i=r-l;return t[a]},n.sort=function(e,t){for(var n=0,r=0,a=1;a<e.length;a++){var i=t(e[a],e[a-1]);if(i<0?n=1:i>0&&(r=1),n&&r)return e.sort(t)}return r?e:e.reverse()},n.findIndexOfMin=function(e,t){t=t||i;for(var n,r=1/0,a=0;a<e.length;a++){var o=t(e[a]);o<r&&(r=o,n=a)}return n}},{"./identity":695,"./loggers":700,"fast-isnumeric":214}],716:[function(e,t,n){"use strict";t.exports=function(e,t){(e.attr("class")||"").split(" ").forEach(function(t){0===t.indexOf("cursor-")&&e.classed(t,!1)}),t&&e.classed("cursor-"+t,!0)}},{}],717:[function(e,t,n){"use strict";var r=e("../components/color"),a=function(){};t.exports=function(e){for(var t in e)"function"==typeof e[t]&&(e[t]=a);e.destroy=function(){e.container.parentNode.removeChild(e.container)};var n=document.createElement("div");n.className="no-webgl",n.style.cursor="pointer",n.style.fontSize="24px",n.style.color=r.defaults[0],n.style.position="absolute",n.style.left=n.style.top="0px",n.style.width=n.style.height="100%",n.style["background-color"]=r.lightLine,n.style["z-index"]=30;var i=document.createElement("p");return i.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",i.style.position="relative",i.style.top="50%",i.style.left="50%",i.style.height="30%",i.style.width="50%",i.style.margin="-15% 0 0 -25%",n.appendChild(i),e.container.appendChild(n),e.container.style.background="#FFFFFF",e.container.onclick=function(){window.open("https://get.webgl.org")},!1}},{"../components/color":570}],718:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),a=e("./array").isArrayOrTypedArray;n.aggNums=function(e,t,i,o){var s,l;if((!o||o>i.length)&&(o=i.length),r(t)||(t=!1),a(i[0])){for(l=new Array(o),s=0;s<o;s++)l[s]=n.aggNums(e,t,i[s]);i=l}for(s=0;s<o;s++)r(t)?r(i[s])&&(t=e(+t,+i[s])):t=i[s];return t},n.len=function(e){return n.aggNums(function(e){return e+1},0,e)},n.mean=function(e,t){return t||(t=n.len(e)),n.aggNums(function(e,t){return e+t},0,e)/t},n.midRange=function(e){if(void 0!==e&&0!==e.length)return(n.aggNums(Math.max,null,e)+n.aggNums(Math.min,null,e))/2},n.variance=function(e,t,a){return t||(t=n.len(e)),r(a)||(a=n.mean(e,t)),n.aggNums(function(e,t){return e+Math.pow(t-a,2)},0,e)/t},n.stdev=function(e,t,r){return Math.sqrt(n.variance(e,t,r))},n.interp=function(e,t){if(!r(t))throw"n should be a finite number";if((t=t*e.length-.5)<0)return e[0];if(t>e.length-1)return e[e.length-1];var n=t%1;return n*e[Math.ceil(t)]+(1-n)*e[Math.floor(t)]}},{"./array":678,"fast-isnumeric":214}],719:[function(e,t,n){"use strict";var r=e("color-normalize");t.exports=function(e){return e?r(e):[0,0,0,1]}},{"color-normalize":108}],720:[function(e,t,n){"use strict";var r=e("d3"),a=e("../lib"),i=e("../constants/xmlns_namespaces"),o=e("../constants/alignment").LINE_SPACING;function s(e,t){return e.node().getBoundingClientRect()[t]}var l=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;n.convertToTspans=function(e,t,v){var M=e.text(),A=!e.attr("data-notex")&&"undefined"!=typeof MathJax&&M.match(l),O=r.select(e.node().parentNode);if(!O.empty()){var P=e.attr("class")?e.attr("class").split(" ")[0]:"text";return P+="-math",O.selectAll("svg."+P).remove(),O.selectAll("g."+P+"-group").remove(),e.style("display",null).attr({"data-unformatted":M,"data-math":"N"}),A?(t&&t._promises||[]).push(new Promise(function(t){e.style("display","none");var n=parseInt(e.node().style.fontSize,10),i={fontSize:n};!function(e,t,n){var i,o,s,l;MathJax.Hub.Queue(function(){return o=a.extendDeepAll({},MathJax.Hub.config),s=MathJax.Hub.processSectionDelay,void 0!==MathJax.Hub.processSectionDelay&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]},displayAlign:"left"})},function(){if("SVG"!==(i=MathJax.Hub.config.menuSettings.renderer))return MathJax.Hub.setRenderer("SVG")},function(){var n="math-output-"+a.randstr({},64);return l=r.select("body").append("div").attr({id:n}).style({visibility:"hidden",position:"absolute"}).style({"font-size":t.fontSize+"px"}).text(function(e){return e.replace(u,"\\lt ").replace(c,"\\gt ")}(e)),MathJax.Hub.Typeset(l.node())},function(){var t=r.select("body").select("#MathJax_SVG_glyphs");if(l.select(".MathJax_SVG").empty()||!l.select("svg").node())a.log("There was an error in the tex syntax.",e),n();else{var o=l.select("svg").node().getBoundingClientRect();n(l.select(".MathJax_SVG"),t,o)}if(l.remove(),"SVG"!==i)return MathJax.Hub.setRenderer(i)},function(){return void 0!==s&&(MathJax.Hub.processSectionDelay=s),MathJax.Hub.Config(o)})}(A[2],i,function(r,a,i){O.selectAll("svg."+P).remove(),O.selectAll("g."+P+"-group").remove();var o=r&&r.select("svg");if(!o||!o.node())return R(),void t();var l=O.append("g").classed(P+"-group",!0).attr({"pointer-events":"none","data-unformatted":M,"data-math":"Y"});l.node().appendChild(o.node()),a&&a.node()&&o.node().insertBefore(a.node().cloneNode(!0),o.node().firstChild),o.attr({class:P,height:i.height,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var u=e.node().style.fill||"black";o.select("g").attr({fill:u,stroke:u});var c=s(o,"width"),f=s(o,"height"),d=+e.attr("x")-c*{start:0,middle:.5,end:1}[e.attr("text-anchor")||"start"],p=n||s(e,"height"),h=-p/4;"y"===P[0]?(l.attr({transform:"rotate("+[-90,+e.attr("x"),+e.attr("y")]+") translate("+[-c/2,h-f/2]+")"}),o.attr({x:+e.attr("x"),y:+e.attr("y")})):"l"===P[0]?o.attr({x:e.attr("x"),y:h-f/2}):"a"===P[0]?o.attr({x:0,y:h}):o.attr({x:d,y:+e.attr("y")+h-f/2}),v&&v.call(e,l),t(l)})})):R(),e}function R(){O.empty()||(P=e.attr("class")+"-math",O.select("svg."+P).remove()),e.text("").style("white-space","pre");var t=function(e,t){t=t.replace(g," ");var n,s=!1,l=[],u=-1;function c(){u++;var t=document.createElementNS(i.svg,"tspan");r.select(t).attr({class:"line",dy:u*o+"em"}),e.appendChild(t),n=t;var a=l;if(l=[{node:t}],a.length>1)for(var s=1;s<a.length;s++)v(a[s])}function v(e){var t,a=e.type,o={};if("a"===a){t="a";var s=e.target,u=e.href,c=e.popup;u&&(o={"xlink:xlink:show":"_blank"===s||"_"!==s.charAt(0)?"new":"replace",target:s,"xlink:xlink:href":u},c&&(o.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+c+'");return false;'))}else t="tspan";e.style&&(o.style=e.style);var f=document.createElementNS(i.svg,t);if("sup"===a||"sub"===a){M(n,h),n.appendChild(f);var m=document.createElementNS(i.svg,"tspan");M(m,h),r.select(m).attr("dy",p[a]),o.dy=d[a],n.appendChild(f),n.appendChild(m)}else n.appendChild(f);r.select(f).attr(o),n=e.node=f,l.push(e)}function M(e,t){e.appendChild(document.createTextNode(t))}function A(e){if(1!==l.length){var r=l.pop();e!==r.type&&a.log("Start tag <"+r.type+"> doesnt match end tag <"+e+">. Pretending it did match.",t),n=l[l.length-1].node}else a.log("Ignoring unexpected end tag </"+e+">.",t)}x.test(t)?c():(n=e,l=[{node:e}]);for(var O=t.split(y),P=0;P<O.length;P++){var R=O[P],L=R.match(b),D=L&&L[2].toLowerCase(),I=f[D];if("br"===D)c();else if(void 0===I)M(n,S(R));else if(L[1])A(D);else{var z=L[4],j={type:D},N=C(z,_);if(N?(N=N.replace(E,"$1 fill:"),I&&(N+=";"+I)):I&&(N=I),N&&(j.style=N),"a"===D){s=!0;var F=C(z,w);if(F){var B=document.createElement("a");B.href=F,-1!==m.indexOf(B.protocol)&&(j.href=encodeURI(decodeURI(F)),j.target=C(z,T)||"_blank",j.popup=C(z,k))}}v(j)}}return s}(e.node(),M);t&&e.style("pointer-events","all"),n.positionText(e),v&&v.call(e)}};var u=/(<|&lt;|&#60;)/g,c=/(>|&gt;|&#62;)/g,f={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},d={sub:"0.3em",sup:"-0.6em"},p={sub:"-0.21em",sup:"0.42em"},h="",m=["http:","https:","mailto:","",void 0,":"],v=new RegExp("</?("+Object.keys(f).join("|")+")( [^>]*)?/?>","g"),g=/(\r\n?|\n)/g,y=/(<[^<>]*>)/,b=/<(\/?)([^ >]*)(\s+(.*))?>/i,x=/<br(\s+.*)?>/i,_=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,w=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,T=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,k=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function C(e,t){if(!e)return null;var n=e.match(t),r=n&&(n[3]||n[4]);return r&&S(r)}var E=/(^|;)\s*color:/;n.plainText=function(e){return(e||"").replace(v," ")};var M={mu:"",amp:"&",lt:"<",gt:">",nbsp:"",times:"",plusmn:"",deg:""},A=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function S(e){return e.replace(A,function(e,t){return("#"===t.charAt(0)?function(e){if(!(e>1114111)){var t=String.fromCodePoint;if(t)return t(e);var n=String.fromCharCode;return e<=65535?n(e):n(55232+(e>>10),e%1024+56320)}}("x"===t.charAt(1)?parseInt(t.substr(2),16):parseInt(t.substr(1),10)):M[t])||e})}function O(e,t,n){var r,a,i,o=n.horizontalAlign,s=n.verticalAlign||"top",l=e.node().getBoundingClientRect(),u=t.node().getBoundingClientRect();return a="bottom"===s?function(){return l.bottom-r.height}:"middle"===s?function(){return l.top+(l.height-r.height)/2}:function(){return l.top},i="right"===o?function(){return l.right-r.width}:"center"===o?function(){return l.left+(l.width-r.width)/2}:function(){return l.left},function(){return r=this.node().getBoundingClientRect(),this.style({top:a()-u.top+"px",left:i()-u.left+"px","z-index":1e3}),this}}n.convertEntities=S,n.lineCount=function(e){return e.selectAll("tspan.line").size()||1},n.positionText=function(e,t,n){return e.each(function(){var e=r.select(this);function a(t,n){return void 0===n?null===(n=e.attr(t))&&(e.attr(t,0),n=0):e.attr(t,n),n}var i=a("x",t),o=a("y",n);"text"===this.nodeName&&e.selectAll("tspan.line").attr({x:i,y:o})})},n.makeEditable=function(e,t){var n=t.gd,a=t.delegate,i=r.dispatch("edit","input","cancel"),o=a||e;if(e.style({"pointer-events":a?"none":"all"}),1!==e.size())throw new Error("boo");function s(){!function(){var a=r.select(n).select(".svg-container"),o=a.append("div"),s=e.node().style,u=parseFloat(s.fontSize||12),c=t.text;void 0===c&&(c=e.attr("data-unformatted")),o.classed("plugin-editable editable",!0).style({position:"absolute","font-family":s.fontFamily||"Arial","font-size":u,color:t.fill||s.fill||"black",opacity:1,"background-color":t.background||"transparent",outline:"#ffffff33 1px solid",margin:[-u/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(c).call(O(e,a,t)).on("blur",function(){n._editing=!1,e.text(this.textContent).style({opacity:1});var t,a=r.select(this).attr("class");(t=a?"."+a.split(" ")[0]+"-math-group":"[class*=-math-group]")&&r.select(e.node().parentNode).select(t).style({opacity:0});var o=this.textContent;r.select(this).transition().duration(0).remove(),r.select(document).on("mouseup",null),i.edit.call(e,o)}).on("focus",function(){var e=this;n._editing=!0,r.select(document).on("mouseup",function(){if(r.event.target===e)return!1;document.activeElement===o.node()&&o.node().blur()})}).on("keyup",function(){27===r.event.which?(n._editing=!1,e.style({opacity:1}),r.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),i.cancel.call(e,this.textContent)):(i.input.call(e,this.textContent),r.select(this).call(O(e,a,t)))}).on("keydown",function(){13===r.event.which&&this.blur()}).call(l)}(),e.style({opacity:0});var a,s=o.attr("class");(a=s?"."+s.split(" ")[0]+"-math-group":"[class*=-math-group]")&&r.select(e.node().parentNode).select(a).style({opacity:0})}function l(e){var t=e.node(),n=document.createRange();n.selectNodeContents(t);var r=window.getSelection();r.removeAllRanges(),r.addRange(n),t.focus()}return t.immediate?s():o.on("click",s),r.rebind(e,i,"on")}},{"../constants/alignment":668,"../constants/xmlns_namespaces":674,"../lib":696,d3:148}],721:[function(e,t,n){"use strict";var r={};function a(e){e&&null!==e.timer&&(clearTimeout(e.timer),e.timer=null)}n.throttle=function(e,t,n){var i=r[e],o=Date.now();if(!i){for(var s in r)r[s].ts<o-6e4&&delete r[s];i=r[e]={ts:0,timer:null}}function l(){n(),i.ts=Date.now(),i.onDone&&(i.onDone(),i.onDone=null)}a(i),o>i.ts+t?l():i.timer=setTimeout(function(){l(),i.timer=null},t)},n.done=function(e){var t=r[e];return t&&t.timer?new Promise(function(e){var n=t.onDone;t.onDone=function(){n&&n(),e(),t.onDone=null}}):Promise.resolve()},n.clear=function(e){if(e)a(r[e]),delete r[e];else for(var t in r)n.clear(t)}},{}],722:[function(e,t,n){"use strict";var r=e("fast-isnumeric");t.exports=function(e,t){if(e>0)return Math.log(e)/Math.LN10;var n=Math.log(Math.min(t[0],t[1]))/Math.LN10;return r(n)||(n=Math.log(Math.max(t[0],t[1]))/Math.LN10-6),n}},{"fast-isnumeric":214}],723:[function(e,t,n){"use strict";var r=t.exports={},a=e("../plots/geo/constants").locationmodeToLayer,i=e("topojson-client").feature;r.getTopojsonName=function(e){return[e.scope.replace(/ /g,"-"),"_",e.resolution.toString(),"m"].join("")},r.getTopojsonPath=function(e,t){return e+t+".json"},r.getTopojsonFeatures=function(e,t){var n=a[e.locationmode],r=t.objects[n];return i(t,r).features}},{"../plots/geo/constants":773,"topojson-client":517}],724:[function(e,t,n){"use strict";t.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],725:[function(e,t,n){"use strict";t.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],726:[function(e,t,n){"use strict";var r=e("../registry");t.exports=function(e){for(var t,n,a=r.layoutArrayContainers,i=r.layoutArrayRegexes,o=e.split("[")[0],s=0;s<i.length;s++)if((n=e.match(i[s]))&&0===n.index){t=n[0];break}if(t||(t=a[a.indexOf(o)]),!t)return!1;var l=e.substr(t.length);return l?!!(n=l.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:t,index:Number(n[1]),property:n[3]||""}:{array:t,index:"",property:""}}},{"../registry":827}],727:[function(e,t,n){"use strict";var r=e("../lib"),a=r.extendFlat,i=r.isPlainObject,o={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},s={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw"]},l=o.flags.slice().concat(["fullReplot"]),u=s.flags.slice().concat("layoutReplot");function c(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=!1;return t}function f(e,t,n){var r=a({},e);for(var o in r){var s=r[o];i(s)&&(r[o]=d(s,t,0,o))}return"from-root"===n&&(r.editType=t),r}function d(e,t,n,r){if(e.valType){var i=a({},e);if(i.editType=t,Array.isArray(e.items)){i.items=new Array(e.items.length);for(var o=0;o<e.items.length;o++)i.items[o]=d(e.items[o],t)}return i}return f(e,t,"_"===r.charAt(0)?"nested":"from-root")}t.exports={traces:o,layout:s,traceFlags:function(){return c(l)},layoutFlags:function(){return c(u)},update:function(e,t){var n=t.editType;if(n&&"none"!==n)for(var r=n.split("+"),a=0;a<r.length;a++)e[r[a]]=!0},overrideAll:f}},{"../lib":696}],728:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),a=e("gl-mat4/fromQuat"),i=e("../registry"),o=e("../lib"),s=e("../plots/plots"),l=e("../plots/cartesian/axis_ids"),u=l.cleanId,c=l.getFromTrace,f=e("../components/color");function d(e,t){var n=e[t],r=t.charAt(0);n&&"paper"!==n&&(e[t]=u(n,r))}function p(e){if(!o.isPlainObject(e))return!1;var t=e.name;return delete e.name,delete e.showlegend,("string"==typeof t||"number"==typeof t)&&String(t)}function h(e,t,n,r){if(n&&!r)return e;if(r&&!n)return t;if(!e.trim())return t;if(!t.trim())return e;var a,i=Math.min(e.length,t.length);for(a=0;a<i&&e.charAt(a)===t.charAt(a);a++);var o=e.substr(0,a);return o.trim()}function m(e){var t="middle",n="center";return-1!==e.indexOf("top")?t="top":-1!==e.indexOf("bottom")&&(t="bottom"),-1!==e.indexOf("left")?n="left":-1!==e.indexOf("right")&&(n="right"),t+" "+n}function v(e,t){return t in e&&"object"==typeof e[t]&&0===Object.keys(e[t]).length}n.clearPromiseQueue=function(e){Array.isArray(e._promises)&&e._promises.length>0&&o.log("Clearing previous rejected promises from queue."),e._promises=[]},n.cleanLayout=function(e){var t,n;e||(e={}),e.xaxis1&&(e.xaxis||(e.xaxis=e.xaxis1),delete e.xaxis1),e.yaxis1&&(e.yaxis||(e.yaxis=e.yaxis1),delete e.yaxis1),e.scene1&&(e.scene||(e.scene=e.scene1),delete e.scene1);var r=(s.subplotsRegistry.cartesian||{}).attrRegex,i=(s.subplotsRegistry.gl3d||{}).attrRegex,l=Object.keys(e);for(t=0;t<l.length;t++){var c=l[t];if(r&&r.test(c)){var p=e[c];p.anchor&&"free"!==p.anchor&&(p.anchor=u(p.anchor)),p.overlaying&&(p.overlaying=u(p.overlaying)),p.type||(p.isdate?p.type="date":p.islog?p.type="log":!1===p.isdate&&!1===p.islog&&(p.type="linear")),"withzero"!==p.autorange&&"tozero"!==p.autorange||(p.autorange=!0,p.rangemode="tozero"),delete p.islog,delete p.isdate,delete p.categories,v(p,"domain")&&delete p.domain,void 0!==p.autotick&&(void 0===p.tickmode&&(p.tickmode=p.autotick?"auto":"linear"),delete p.autotick)}else if(i&&i.test(c)){var h=e[c],m=h.cameraposition;if(Array.isArray(m)&&4===m[0].length){var g=m[0],y=m[1],b=m[2],x=a([],g),_=[];for(n=0;n<3;++n)_[n]=y[n]+b*x[2+4*n];h.camera={eye:{x:_[0],y:_[1],z:_[2]},center:{x:y[0],y:y[1],z:y[2]},up:{x:x[1],y:x[5],z:x[9]}},delete h.cameraposition}}}var w=Array.isArray(e.annotations)?e.annotations.length:0;for(t=0;t<w;t++){var T=e.annotations[t];o.isPlainObject(T)&&(T.ref&&("paper"===T.ref?(T.xref="paper",T.yref="paper"):"data"===T.ref&&(T.xref="x",T.yref="y"),delete T.ref),d(T,"xref"),d(T,"yref"))}var k=Array.isArray(e.shapes)?e.shapes.length:0;for(t=0;t<k;t++){var C=e.shapes[t];o.isPlainObject(C)&&(d(C,"xref"),d(C,"yref"))}var E=e.legend;return E&&(E.x>3?(E.x=1.02,E.xanchor="left"):E.x<-2&&(E.x=-.02,E.xanchor="right"),E.y>3?(E.y=1.02,E.yanchor="bottom"):E.y<-2&&(E.y=-.02,E.yanchor="top")),"rotate"===e.dragmode&&(e.dragmode="orbit"),f.clean(e),e},n.cleanData=function(e){for(var t=0;t<e.length;t++){var r,a=e[t];if("histogramy"===a.type&&"xbins"in a&&!("ybins"in a)&&(a.ybins=a.xbins,delete a.xbins),a.error_y&&"opacity"in a.error_y){var l=f.defaults,c=a.error_y.color||(i.traceIs(a,"bar")?f.defaultLine:l[t%l.length]);a.error_y.color=f.addOpacity(f.rgb(c),f.opacity(c)*a.error_y.opacity),delete a.error_y.opacity}if("bardir"in a&&("h"!==a.bardir||!i.traceIs(a,"bar")&&"histogram"!==a.type.substr(0,9)||(a.orientation="h",n.swapXYData(a)),delete a.bardir),"histogramy"===a.type&&n.swapXYData(a),"histogramx"!==a.type&&"histogramy"!==a.type||(a.type="histogram"),"scl"in a&&(a.colorscale=a.scl,delete a.scl),"reversescl"in a&&(a.reversescale=a.reversescl,delete a.reversescl),a.xaxis&&(a.xaxis=u(a.xaxis,"x")),a.yaxis&&(a.yaxis=u(a.yaxis,"y")),i.traceIs(a,"gl3d")&&a.scene&&(a.scene=s.subplotsRegistry.gl3d.cleanId(a.scene)),!i.traceIs(a,"pie")&&!i.traceIs(a,"bar"))if(Array.isArray(a.textposition))for(r=0;r<a.textposition.length;r++)a.textposition[r]=m(a.textposition[r]);else a.textposition&&(a.textposition=m(a.textposition));var d=i.getModule(a);if(d&&d.colorbar){var g=d.colorbar.container,y=g?a[g]:a;y&&y.colorscale&&("YIGnBu"===y.colorscale&&(y.colorscale="YlGnBu"),"YIOrRd"===y.colorscale&&(y.colorscale="YlOrRd"))}if("surface"===a.type&&o.isPlainObject(a.contours)){var b=["x","y","z"];for(r=0;r<b.length;r++){var x=a.contours[b[r]];o.isPlainObject(x)&&(x.highlightColor&&(x.highlightcolor=x.highlightColor,delete x.highlightColor),x.highlightWidth&&(x.highlightwidth=x.highlightWidth,delete x.highlightWidth))}}if("candlestick"===a.type||"ohlc"===a.type){var _=!1!==(a.increasing||{}).showlegend,w=!1!==(a.decreasing||{}).showlegend,T=p(a.increasing),k=p(a.decreasing);if(!1!==T&&!1!==k){var C=h(T,k,_,w);C&&(a.name=C)}else!T&&!k||a.name||(a.name=T||k)}if(Array.isArray(a.transforms)){var E=a.transforms;for(r=0;r<E.length;r++){var M=E[r];if(o.isPlainObject(M))switch(M.type){case"filter":M.filtersrc&&(M.target=M.filtersrc,delete M.filtersrc),M.calendar&&(M.valuecalendar||(M.valuecalendar=M.calendar),delete M.calendar);break;case"groupby":if(M.styles=M.styles||M.style,M.styles&&!Array.isArray(M.styles)){var A=M.styles,S=Object.keys(A);M.styles=[];for(var O=0;O<S.length;O++)M.styles.push({target:S[O],value:A[S[O]]})}}}}v(a,"line")&&delete a.line,"marker"in a&&(v(a.marker,"line")&&delete a.marker.line,v(a,"marker")&&delete a.marker),f.clean(a),a.autobinx&&(delete a.autobinx,delete a.xbins),a.autobiny&&(delete a.autobiny,delete a.ybins)}},n.swapXYData=function(e){var t;if(o.swapAttrs(e,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(e.z)&&Array.isArray(e.z[0])&&(e.transpose?delete e.transpose:e.transpose=!0),e.error_x&&e.error_y){var n=e.error_y,r="copy_ystyle"in n?n.copy_ystyle:!(n.color||n.thickness||n.width);o.swapAttrs(e,["error_?.copy_ystyle"]),r&&o.swapAttrs(e,["error_?.color","error_?.thickness","error_?.width"])}if("string"==typeof e.hoverinfo){var a=e.hoverinfo.split("+");for(t=0;t<a.length;t++)"x"===a[t]?a[t]="y":"y"===a[t]&&(a[t]="x");e.hoverinfo=a.join("+")}},n.coerceTraceIndices=function(e,t){if(r(t))return[t];if(!Array.isArray(t)||!t.length)return e.data.map(function(e,t){return t});if(Array.isArray(t)){for(var n=[],a=0;a<t.length;a++)o.isIndex(t[a],e.data.length)?n.push(t[a]):o.warn("trace index (",t[a],") is not a number or is out of bounds");return n}return t},n.manageArrayContainers=function(e,t,n){var a=e.obj,i=e.parts,s=i.length,l=i[s-1],u=r(l);if(u&&null===t){var c=i.slice(0,s-1).join("."),f=o.nestedProperty(a,c).get();f.splice(l,1)}else u&&void 0===e.get()?(void 0===e.get()&&(n[e.astr]=null),e.set(t)):e.set(t)};var g=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function y(e){var t=e.search(g);if(t>0)return e.substr(0,t)}n.hasParent=function(e,t){for(var n=y(t);n;){if(n in e)return!0;n=y(n)}return!1};var b=["x","y","z"];n.clearAxisTypes=function(e,t,n){for(var r=0;r<t.length;r++)for(var a=e._fullData[r],i=0;i<3;i++){var s=c(e,a,b[i]);if(s&&"log"!==s.type){var l=s._name,u=s._id.substr(1);if("scene"===u.substr(0,5)){if(void 0!==n[u])continue;l=u+"."+l}var f=l+".type";void 0===n[l]&&void 0===n[f]&&o.nestedProperty(e.layout,f).set(null)}}}},{"../components/color":570,"../lib":696,"../plots/cartesian/axis_ids":747,"../plots/plots":808,"../registry":827,"fast-isnumeric":214,"gl-mat4/fromQuat":251}],729:[function(e,t,n){"use strict";var r=e("./plot_api");n.plot=r.plot,n.newPlot=r.newPlot,n.restyle=r.restyle,n.relayout=r.relayout,n.redraw=r.redraw,n.update=r.update,n.react=r.react,n.extendTraces=r.extendTraces,n.prependTraces=r.prependTraces,n.addTraces=r.addTraces,n.deleteTraces=r.deleteTraces,n.moveTraces=r.moveTraces,n.purge=r.purge,n.addFrames=r.addFrames,n.deleteFrames=r.deleteFrames,n.animate=r.animate,n.setPlotConfig=r.setPlotConfig,n.toImage=e("./to_image"),n.validate=e("./validate"),n.downloadImage=e("../snapshot/download");var a=e("./template_api");n.makeTemplate=a.makeTemplate,n.validateTemplate=a.validateTemplate},{"../snapshot/download":829,"./plot_api":731,"./template_api":736,"./to_image":737,"./validate":738}],730:[function(e,t,n){"use strict";var r=e("../lib/nested_property"),a=e("../lib/is_plain_object"),i=e("../lib/noop"),o=e("../lib/loggers"),s=e("../lib/search").sorterAsc,l=e("../registry");n.containerArrayMatch=e("./container_array_match");var u=n.isAddVal=function(e){return"add"===e||a(e)},c=n.isRemoveVal=function(e){return null===e||"remove"===e};n.applyContainerArrayChanges=function(e,t,n,a){var f=t.astr,d=l.getComponentMethod(f,"supplyLayoutDefaults"),p=l.getComponentMethod(f,"draw"),h=l.getComponentMethod(f,"drawOne"),m=a.replot||a.recalc||d===i||p===i,v=e.layout,g=e._fullLayout;if(n[""]){Object.keys(n).length>1&&o.warn("Full array edits are incompatible with other edits",f);var y=n[""][""];if(c(y))t.set(null);else{if(!Array.isArray(y))return o.warn("Unrecognized full array edit value",f,y),!0;t.set(y)}return!m&&(d(v,g),p(e),!0)}var b,x,_,w,T,k,C,E=Object.keys(n).map(Number).sort(s),M=t.get(),A=M||[],S=r(g,f).get(),O=[],P=-1,R=A.length;for(b=0;b<E.length;b++)if(_=E[b],w=n[_],T=Object.keys(w),k=w[""],C=u(k),_<0||_>A.length-(C?0:1))o.warn("index out of range",f,_);else if(void 0!==k)T.length>1&&o.warn("Insertion & removal are incompatible with edits to the same index.",f,_),c(k)?O.push(_):C?("add"===k&&(k={}),A.splice(_,0,k),S&&S.splice(_,0,{})):o.warn("Unrecognized full object edit value",f,_,k),-1===P&&(P=_);else for(x=0;x<T.length;x++)r(A[_],T[x]).set(w[T[x]]);for(b=O.length-1;b>=0;b--)A.splice(O[b],1),S&&S.splice(O[b],1);if(A.length?M||t.set(A):t.set(null),m)return!1;if(d(v,g),h!==i){var L;if(-1===P)L=E;else{for(R=Math.max(A.length,R),L=[],b=0;b<E.length&&!((_=E[b])>=P);b++)L.push(_);for(b=P;b<R;b++)L.push(b)}for(b=0;b<L.length;b++)h(e,L[b])}else p(e);return!0}},{"../lib/is_plain_object":697,"../lib/loggers":700,"../lib/nested_property":704,"../lib/noop":705,"../lib/search":715,"../registry":827,"./container_array_match":726}],731:[function(e,t,n){"use strict";var r=e("d3"),a=e("fast-isnumeric"),i=e("has-hover"),o=e("../lib"),s=e("../lib/events"),l=e("../lib/queue"),u=e("../registry"),c=e("./plot_schema"),f=e("../plots/plots"),d=e("../plots/polar/legacy"),p=e("../plots/cartesian/axes"),h=e("../components/drawing"),m=e("../components/color"),v=e("../components/colorbar/connect"),g=e("../plots/cartesian/graph_interact").initInteractions,y=e("../constants/xmlns_namespaces"),b=e("../lib/svg_text_utils"),x=e("./plot_config"),_=e("./manage_arrays"),w=e("./helpers"),T=e("./subroutines"),k=e("./edit_types"),C=e("../plots/cartesian/constants").AX_NAME_PATTERN,E=0;function M(e){var t=e._fullLayout;t._redrawFromAutoMarginCount?t._redrawFromAutoMarginCount--:e.emit("plotly_afterplot")}function A(e,t){try{e._fullLayout._paper.style("background",t)}catch(e){o.error(e)}}function S(e,t){var n=m.combine(t,"white");A(e,n)}function O(e,t){e._context||(e._context=o.extendDeep({},x));var n,r,a,s=e._context;if(t){for(r=Object.keys(t),n=0;n<r.length;n++)"editable"!==(a=r[n])&&"edits"!==a&&a in s&&("setBackground"===a&&"opaque"===t[a]?s[a]=S:s[a]=t[a]);t.plot3dPixelRatio&&!s.plotGlPixelRatio&&(s.plotGlPixelRatio=s.plot3dPixelRatio);var l=t.editable;if(void 0!==l)for(s.editable=l,r=Object.keys(s.edits),n=0;n<r.length;n++)s.edits[r[n]]=l;if(t.edits)for(r=Object.keys(t.edits),n=0;n<r.length;n++)(a=r[n])in s.edits&&(s.edits[a]=t.edits[a])}s.staticPlot&&(s.editable=!1,s.edits={},s.autosizable=!1,s.scrollZoom=!1,s.doubleClick=!1,s.showTips=!1,s.showLink=!1,s.displayModeBar=!1),"hover"!==s.displayModeBar||i||(s.displayModeBar=!0),"transparent"!==s.setBackground&&"function"==typeof s.setBackground||(s.setBackground=A),s._hasZeroHeight=s._hasZeroHeight||0===e.clientHeight,s._hasZeroWidth=s._hasZeroWidth||0===e.clientWidth}function P(e,t){var n,r,a=t+1,i=[];for(n=0;n<e.length;n++)(r=e[n])<0?i.push(a+r):i.push(r);return i}function R(e,t,n){var r,a;for(r=0;r<t.length;r++){if((a=t[r])!==parseInt(a,10))throw new Error("all values in "+n+" must be integers");if(a>=e.data.length||a<-e.data.length)throw new Error(n+" must be valid indices for gd.data.");if(t.indexOf(a,r+1)>-1||a>=0&&t.indexOf(-e.data.length+a)>-1||a<0&&t.indexOf(e.data.length+a)>-1)throw new Error("each index in "+n+" must be unique.")}}function L(e,t,n){if(!Array.isArray(e.data))throw new Error("gd.data must be an array.");if(void 0===t)throw new Error("currentIndices is a required argument.");if(Array.isArray(t)||(t=[t]),R(e,t,"currentIndices"),void 0===n||Array.isArray(n)||(n=[n]),void 0!==n&&R(e,n,"newIndices"),void 0!==n&&t.length!==n.length)throw new Error("current and new indices must be of equal length.")}function D(e,t,n,r,i){!function(e,t,n,r){var a=o.isPlainObject(r);if(!Array.isArray(e.data))throw new Error("gd.data must be an array");if(!o.isPlainObject(t))throw new Error("update must be a key:value object");if(void 0===n)throw new Error("indices must be an integer or array of integers");for(var i in R(e,n,"indices"),t){if(!Array.isArray(t[i])||t[i].length!==n.length)throw new Error("attribute "+i+" must be an array of length equal to indices array length");if(a&&(!(i in r)||!Array.isArray(r[i])||r[i].length!==t[i].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}(e,t,n,r);for(var s=function(e,t,n,r){var i,s,l,u,c,f=o.isPlainObject(r),d=[];for(var p in Array.isArray(n)||(n=[n]),n=P(n,e.data.length-1),t)for(var h=0;h<n.length;h++){if(i=e.data[n[h]],l=o.nestedProperty(i,p),s=l.get(),u=t[p][h],!o.isArrayOrTypedArray(u))throw new Error("attribute: "+p+" index: "+h+" must be an array");if(!o.isArrayOrTypedArray(s))throw new Error("cannot extend missing or non-array attribute: "+p);if(s.constructor!==u.constructor)throw new Error("cannot extend array with an array of a different type: "+p);c=f?r[p][h]:r,a(c)||(c=-1),d.push({prop:l,target:s,insert:u,maxp:Math.floor(c)})}return d}(e,t,n,r),l={},u={},c=0;c<s.length;c++){var f=s[c].prop,d=s[c].maxp,p=i(s[c].target,s[c].insert,d);f.set(p[0]),Array.isArray(l[f.astr])||(l[f.astr]=[]),l[f.astr].push(p[1]),Array.isArray(u[f.astr])||(u[f.astr]=[]),u[f.astr].push(s[c].target.length)}return{update:l,maxPoints:u}}function I(e,t){var n=new e.constructor(e.length+t.length);return n.set(e),n.set(t,e.length),n}function z(e){return void 0===e?null:e}function j(e,t,n){var r,a,i=e._fullLayout,s=e._fullData,l=e.data,d=k.traceFlags(),h={},m={};function v(){return n.map(function(){})}function g(e){var t=p.id2name(e);-1===a.indexOf(t)&&a.push(t)}function y(e){return"LAYOUT"+e+".autorange"}function b(e){return"LAYOUT"+e+".range"}function x(r,a,i){var s;Array.isArray(r)?r.forEach(function(e){x(e,a,i)}):r in t||w.hasParent(t,r)||(s="LAYOUT"===r.substr(0,6)?o.nestedProperty(e.layout,r.replace("LAYOUT","")):o.nestedProperty(l[n[i]],r),r in m||(m[r]=v()),void 0===m[r][i]&&(m[r][i]=z(s.get())),void 0!==a&&s.set(a))}function _(e){return function(t){return s[t][e]}}function T(e){return function(t,r){return!1===t?s[n[r]][e]:null}}for(var C in t){if(w.hasParent(t,C))throw new Error("cannot set "+C+"and a parent attribute simultaneously");var E,M,A,S,O,P,R=t[C];if("autobinx"!==C&&"autobiny"!==C||(C=C.charAt(C.length-1)+"bins",R=Array.isArray(R)?R.map(T(C)):!1===R?n.map(_(C)):null),h[C]=R,"LAYOUT"!==C.substr(0,6)){for(m[C]=v(),r=0;r<n.length;r++)if(E=l[n[r]],M=s[n[r]],A=o.nestedProperty(E,C),S=A.get(),void 0!==(O=Array.isArray(R)?R[r%R.length]:R)){var L=A.parts[A.parts.length-1],D=C.substr(0,C.length-L.length-1),I=D?D+".":"",j=D?o.nestedProperty(M,D).get():M;if((P=c.getTraceValObject(M,A.parts))&&P.impliedEdits&&null!==O)for(var N in P.impliedEdits)x(o.relativeAttr(C,N),P.impliedEdits[N],r);else if("thicknessmode"!==L&&"lenmode"!==L||S===O||"fraction"!==O&&"pixels"!==O||!j){if("type"===C&&"pie"===O!=("pie"===S)){var F="x",B="y";"bar"!==O&&"bar"!==S||"h"!==E.orientation||(F="y",B="x"),o.swapAttrs(E,["?","?src"],"labels",F),o.swapAttrs(E,["d?","?0"],"label",F),o.swapAttrs(E,["?","?src"],"values",B),"pie"===S?(o.nestedProperty(E,"marker.color").set(o.nestedProperty(E,"marker.colors").get()),i._pielayer.selectAll("g.trace").remove()):u.traceIs(E,"cartesian")&&o.nestedProperty(E,"marker.colors").set(o.nestedProperty(E,"marker.color").get())}}else{var V=i._size,U=j.orient,G="top"===U||"bottom"===U;if("thicknessmode"===L){var H=G?V.h:V.w;x(I+"thickness",j.thickness*("fraction"===O?1/H:H),r)}else{var W=G?V.w:V.h;x(I+"len",j.len*("fraction"===O?1/W:W),r)}}if(m[C][r]=z(S),-1!==["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(C)){if("orientation"===C){A.set(O);var q=E.x&&!E.y?"h":"v";if((A.get()||q)===M.orientation)continue}else"orientationaxes"===C&&(E.orientation={v:"h",h:"v"}[M.orientation]);w.swapXYData(E),d.calc=d.clearAxisTypes=!0}else-1!==f.dataArrayContainers.indexOf(A.parts[0])?(w.manageArrayContainers(A,O,m),d.calc=!0):(P?P.arrayOk&&!u.traceIs(M,"regl")&&(o.isArrayOrTypedArray(O)||o.isArrayOrTypedArray(S))?d.calc=!0:k.update(d,P):d.calc=!0,A.set(O))}if(-1!==["swapxyaxes","orientationaxes"].indexOf(C)&&p.swap(e,n),"orientationaxes"===C){var Y=o.nestedProperty(e.layout,"hovermode");"x"===Y.get()?Y.set("y"):"y"===Y.get()&&Y.set("x")}if(-1!==["orientation","type"].indexOf(C)){for(a=[],r=0;r<n.length;r++){var X=l[n[r]];u.traceIs(X,"cartesian")&&(g(X.xaxis||"x"),g(X.yaxis||"y"))}x(a.map(y),!0,0),x(a.map(b),[0,1],0)}}else A=o.nestedProperty(e.layout,C.replace("LAYOUT","")),m[C]=[z(A.get())],A.set(Array.isArray(R)?R[0]:R),d.calc=!0}return(d.calc||d.plot)&&(d.fullReplot=!0),{flags:d,undoit:m,redoit:h,traces:n,eventData:o.extendDeepNoArrays([],[h,n])}}function N(e,t,n){var r;if(!t.axrange)return!1;for(r in t)if("axrange"!==r&&t[r])return!1;for(r in n.rangesAltered){var a=p.id2name(r),i=e.layout[a],o=e._fullLayout[a];o.autorange=i.autorange,o.range=i.range.slice(),o.cleanRange()}return!0}function F(e,t){var n=t?function(e){return p.doTicks(e,Object.keys(t),!0)}:function(e){return p.doTicks(e,"redraw")};e.push(T.doAutoRangeAndConstraints,n,T.drawData,T.finalDraw)}n.plot=function(e,t,a,i){var l;if(e=o.getGraphDiv(e),s.init(e),o.isPlainObject(t)){var c=t;t=c.data,a=c.layout,i=c.config,l=c.frames}var m=s.triggerHandler(e,"plotly_beforeplot",[t,a,i]);if(!1===m)return Promise.reject();t||a||o.isPlotDiv(e)||o.warn("Calling Plotly.plot as if redrawing but this container doesn't yet have a plot.",e),O(e,i),a||(a={}),r.select(e).classed("js-plotly-plot",!0),h.makeTester(),delete h.baseUrl,Array.isArray(e._promises)||(e._promises=[]);var y=0===(e.data||[]).length&&Array.isArray(t);if(Array.isArray(t)&&(w.cleanData(t),y?e.data=t:e.data.push.apply(e.data,t),e.empty=!1),e.layout&&!y||(e.layout=w.cleanLayout(a)),e._dragging&&!e._transitioning)return e._replotPending=!0,Promise.reject();e._replotPending=!1,f.supplyDefaults(e);var x=e._fullLayout,_=x._has("cartesian");if(!x._has("polar")&&t&&t[0]&&t[0].r)return o.log("Legacy polar charts are deprecated!"),function(e,t,n){var a=r.select(e).selectAll(".plot-container").data([0]);a.enter().insert("div",":first-child").classed("plot-container plotly",!0);var i=a.selectAll(".svg-container").data([0]);i.enter().append("div").classed("svg-container",!0).style("position","relative"),i.html(""),t&&(e.data=t),n&&(e.layout=n),d.manager.fillLayout(e),i.style({width:e._fullLayout.width+"px",height:e._fullLayout.height+"px"}),e.framework=d.manager.framework(e),e.framework({data:e.data,layout:e.layout},i.node()),e.framework.setUndoPoint();var s=e.framework.svg(),l=1,u=e._fullLayout.title;""!==u&&u||(l=0);var c=function(){this.call(b.convertToTspans,e)},p=s.select(".title-group text").call(c);if(e._context.edits.titleText){var h=o._(e,"Click to enter Plot title");u&&u!==h||(l=.2,p.attr({"data-unformatted":h}).text(h).style({opacity:l}).on("mouseover.opacity",function(){r.select(this).transition().duration(100).style("opacity",1)}).on("mouseout.opacity",function(){r.select(this).transition().duration(1e3).style("opacity",0)}));var m=function(){this.call(b.makeEditable,{gd:e}).on("edit",function(t){e.framework({layout:{title:t}}),this.text(t).call(c),this.call(m)}).on("cancel",function(){var e=this.attr("data-unformatted");this.text(e).call(c)})};p.call(m)}return e._context.setBackground(e,e._fullLayout.paper_bgcolor),f.addLinks(e),Promise.resolve()}(e,t,a);x._replotting=!0,y&&q(e),e.framework!==q&&(e.framework=q,q(e)),h.initGradients(e),y&&p.saveShowSpikeInitial(e);var k=!e.calcdata||e.calcdata.length!==(e._fullData||[]).length;k&&f.doCalcdata(e);for(var C=0;C<e.calcdata.length;C++)e.calcdata[C][0].trace=e._fullData[C];e._context.responsive?e._responsiveChartHandler||(e._responsiveChartHandler=function(){f.resize(e)},window.addEventListener("resize",e._responsiveChartHandler)):o.clearResponsive(e);var E=JSON.stringify(x._size),A=0;function S(){var t,n,r,a=e.calcdata;for(f.clearAutoMarginIds(e),T.drawMarginPushers(e),p.allowAutoMargin(e),t=0;t<a.length;t++){n=a[t];var i=(r=n[0].trace)._module.colorbar;!0===r.visible&&i?v(e,n,i):f.autoMargin(e,"cb"+r.uid)}return f.doAutoMargin(e),f.previousPromises(e)}function P(){e._transitioning||(T.doAutoRangeAndConstraints(e),y&&p.saveRangeInitial(e))}var R=[f.previousPromises,function(){if(l)return n.addFrames(e,l)},function t(){for(var n=x._basePlotModules,r=0;r<n.length;r++)n[r].drawFramework&&n[r].drawFramework(e);if(!x._glcanvas&&x._has("gl")&&(x._glcanvas=x._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(e){return e.key}),x._glcanvas.enter().append("canvas").attr("class",function(e){return"gl-canvas gl-canvas-"+e.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"visible","pointer-events":"none"})),x._glcanvas){x._glcanvas.attr("width",x.width).attr("height",x.height);var a=x._glcanvas.data()[0].regl;if(a&&(Math.floor(x.width)!==a._gl.drawingBufferWidth||Math.floor(x.height)!==a._gl.drawingBufferHeight)){var i="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(!A)return o.log(i+" Clearing graph and plotting again."),f.cleanPlot([],{},e._fullData,x),f.supplyDefaults(e),x=e._fullLayout,f.doCalcdata(e),A++,t();o.error(i)}}return f.previousPromises(e)},S,function(){if(JSON.stringify(x._size)!==E)return o.syncOrAsync([S,T.layoutStyles],e)}];_&&R.push(function(){if(k)return o.syncOrAsync([u.getComponentMethod("shapes","calcAutorange"),u.getComponentMethod("annotations","calcAutorange"),P,u.getComponentMethod("rangeslider","calcAutorange")],e);P()}),R.push(T.layoutStyles),_&&R.push(function(){return p.doTicks(e,y?"":"redraw")}),R.push(T.drawData,T.finalDraw,g,f.addLinks,f.rehover,f.doAutoMargin,f.previousPromises);var L=o.syncOrAsync(R,e);return L&&L.then||(L=Promise.resolve()),L.then(function(){return M(e),e})},n.setPlotConfig=function(e){return o.extendFlat(x,e)},n.redraw=function(e){if(e=o.getGraphDiv(e),!o.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e);return w.cleanData(e.data),w.cleanLayout(e.layout),e.calcdata=void 0,n.plot(e).then(function(){return e.emit("plotly_redraw"),e})},n.newPlot=function(e,t,r,a){return e=o.getGraphDiv(e),f.cleanPlot([],{},e._fullData||[],e._fullLayout||{}),f.purge(e),n.plot(e,t,r,a)},n.extendTraces=function e(t,r,a,i){var s=D(t=o.getGraphDiv(t),r,a,i,function(e,t,n){var r,a;if(o.isTypedArray(e))if(n<0){var i=new e.constructor(0),s=I(e,t);n<0?(r=s,a=i):(r=i,a=s)}else if(r=new e.constructor(n),a=new e.constructor(e.length+t.length-n),n===t.length)r.set(t),a.set(e);else if(n<t.length){var l=t.length-n;r.set(t.subarray(l)),a.set(e),a.set(t.subarray(0,l),e.length)}else{var u=n-t.length,c=e.length-u;r.set(e.subarray(c)),r.set(t,u),a.set(e.subarray(0,c))}else r=e.concat(t),a=n>=0&&n<r.length?r.splice(0,r.length-n):[];return[r,a]}),u=n.redraw(t),c=[t,s.update,a,s.maxPoints];return l.add(t,n.prependTraces,c,e,arguments),u},n.prependTraces=function e(t,r,a,i){var s=D(t=o.getGraphDiv(t),r,a,i,function(e,t,n){var r,a;if(o.isTypedArray(e))if(n<=0){var i=new e.constructor(0),s=I(t,e);n<0?(r=s,a=i):(r=i,a=s)}else if(r=new e.constructor(n),a=new e.constructor(e.length+t.length-n),n===t.length)r.set(t),a.set(e);else if(n<t.length){var l=t.length-n;r.set(t.subarray(0,l)),a.set(t.subarray(l)),a.set(e,l)}else{var u=n-t.length;r.set(t),r.set(e.subarray(0,u),t.length),a.set(e.subarray(u))}else r=t.concat(e),a=n>=0&&n<r.length?r.splice(n,r.length):[];return[r,a]}),u=n.redraw(t),c=[t,s.update,a,s.maxPoints];return l.add(t,n.extendTraces,c,e,arguments),u},n.addTraces=function e(t,r,a){t=o.getGraphDiv(t);var i,s,u=[],c=n.deleteTraces,f=e,d=[t,u],p=[t,r];for(function(e,t,n){var r,a;if(!Array.isArray(e.data))throw new Error("gd.data must be an array.");if(void 0===t)throw new Error("traces must be defined.");for(Array.isArray(t)||(t=[t]),r=0;r<t.length;r++)if("object"!=typeof(a=t[r])||Array.isArray(a)||null===a)throw new Error("all values in traces array must be non-array objects");if(void 0===n||Array.isArray(n)||(n=[n]),void 0!==n&&n.length!==t.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(t,r,a),Array.isArray(r)||(r=[r]),r=r.map(function(e){return o.extendFlat({},e)}),w.cleanData(r),i=0;i<r.length;i++)t.data.push(r[i]);for(i=0;i<r.length;i++)u.push(-r.length+i);if(void 0===a)return s=n.redraw(t),l.add(t,c,d,f,p),s;Array.isArray(a)||(a=[a]);try{L(t,u,a)}catch(e){throw t.data.splice(t.data.length-r.length,r.length),e}return l.startSequence(t),l.add(t,c,d,f,p),s=n.moveTraces(t,u,a),l.stopSequence(t),s},n.deleteTraces=function e(t,r){t=o.getGraphDiv(t);var a,i,s=[],u=n.addTraces,c=e,f=[t,s,r],d=[t,r];if(void 0===r)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(r)||(r=[r]),R(t,r,"indices"),(r=P(r,t.data.length-1)).sort(o.sorterDes),a=0;a<r.length;a+=1)i=t.data.splice(r[a],1)[0],s.push(i);var p=n.redraw(t);return l.add(t,u,f,c,d),p},n.moveTraces=function e(t,r,a){t=o.getGraphDiv(t);var i,s=[],u=[],c=e,f=e,d=[t,a,r],p=[t,r,a];if(L(t,r,a),r=Array.isArray(r)?r:[r],void 0===a)for(a=[],i=0;i<r.length;i++)a.push(-r.length+i);for(a=Array.isArray(a)?a:[a],r=P(r,t.data.length-1),a=P(a,t.data.length-1),i=0;i<t.data.length;i++)-1===r.indexOf(i)&&s.push(t.data[i]);for(i=0;i<r.length;i++)u.push({newIndex:a[i],trace:t.data[r[i]]});for(u.sort(function(e,t){return e.newIndex-t.newIndex}),i=0;i<u.length;i+=1)s.splice(u[i].newIndex,0,u[i].trace);t.data=s;var h=n.redraw(t);return l.add(t,c,d,f,p),h},n.restyle=function e(t,r,a,i){t=o.getGraphDiv(t),w.clearPromiseQueue(t);var s={};if("string"==typeof r)s[r]=a;else{if(!o.isPlainObject(r))return o.warn("Restyle fail.",r,a,i),Promise.reject();s=o.extendFlat({},r),void 0===i&&(i=a)}Object.keys(s).length&&(t.changed=!0);var u=w.coerceTraceIndices(t,i),c=j(t,s,u),d=c.flags;d.calc&&(t.calcdata=void 0),d.clearAxisTypes&&w.clearAxisTypes(t,u,{});var p=[];d.fullReplot?p.push(n.plot):(p.push(f.previousPromises),f.supplyDefaults(t),d.markerSize&&(f.doCalcdata(t),F(p)),d.style&&p.push(T.doTraceStyle),d.colorbars&&p.push(T.doColorBars),p.push(M)),p.push(f.rehover),l.add(t,e,[t,c.undoit,c.traces],e,[t,c.redoit,c.traces]);var h=o.syncOrAsync(p,t);return h&&h.then||(h=Promise.resolve()),h.then(function(){return t.emit("plotly_restyle",c.eventData),t})},n.relayout=function e(t,n,r){if(t=o.getGraphDiv(t),w.clearPromiseQueue(t),t.framework&&t.framework.isPolar)return Promise.resolve(t);var a={};if("string"==typeof n)a[n]=r;else{if(!o.isPlainObject(n))return o.warn("Relayout fail.",n,r),Promise.reject();a=o.extendFlat({},n)}Object.keys(a).length&&(t.changed=!0);var i=G(t,a),s=i.flags;s.calc&&(t.calcdata=void 0);var u=[f.previousPromises];s.layoutReplot?u.push(T.layoutReplot):Object.keys(a).length&&(N(t,s,i)||f.supplyDefaults(t),s.legend&&u.push(T.doLegend),s.layoutstyle&&u.push(T.layoutStyles),s.axrange&&F(u,i.rangesAltered),s.ticks&&u.push(T.doTicksRelayout),s.modebar&&u.push(T.doModeBar),s.camera&&u.push(T.doCamera),u.push(M)),u.push(f.rehover),l.add(t,e,[t,i.undoit],e,[t,i.redoit]);var c=o.syncOrAsync(u,t);return c&&c.then||(c=Promise.resolve(t)),c.then(function(){return t.emit("plotly_relayout",i.eventData),t})};var B=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,V=/^[xyz]axis[0-9]*\.autorange$/,U=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function G(e,t){var n,r,a,i=e.layout,s=e._fullLayout,l=Object.keys(t),f=p.list(e),d={};for(r=0;r<l.length;r++)if(0===l[r].indexOf("allaxes")){for(a=0;a<f.length;a++){var h=f[a]._id.substr(1),m=-1!==h.indexOf("scene")?h+".":"",v=l[r].replace("allaxes",m+f[a]._name);t[v]||(t[v]=t[l[r]])}delete t[l[r]]}var g=k.layoutFlags(),y={},b={};function x(e,n){if(Array.isArray(e))e.forEach(function(e){x(e,n)});else if(!(e in t||w.hasParent(t,e))){var r=o.nestedProperty(i,e);e in b||(b[e]=z(r.get())),void 0!==n&&r.set(n)}}var T,E={};function M(e){var t=p.name2id(e.split(".")[0]);return E[t]=1,t}for(var A in t){if(w.hasParent(t,A))throw new Error("cannot set "+A+"and a parent attribute simultaneously");for(var S=o.nestedProperty(i,A),O=t[A],P=S.parts.length,R=P-1;R>0&&"string"!=typeof S.parts[R];)R--;var L=S.parts[R],D=S.parts[R-1]+"."+L,I=S.parts.slice(0,R).join("."),j=o.nestedProperty(e.layout,I).get(),N=o.nestedProperty(s,I).get(),F=S.get();if(void 0!==O){y[A]=O,b[A]="reverse"===L?O:z(F);var G=c.getLayoutValObject(s,S.parts);if(G&&G.impliedEdits&&null!==O)for(var W in G.impliedEdits)x(o.relativeAttr(A,W),G.impliedEdits[W]);if(-1!==["width","height"].indexOf(A))if(O){x("autosize",null);var q="height"===A?"width":"height";x(q,s[q])}else s[A]=e._initialAutoSize[A];else if("autosize"===A)x("width",O?null:s.width),x("height",O?null:s.height);else if(D.match(B))M(D),o.nestedProperty(s,I+"._inputRange").set(null);else if(D.match(V)){M(D),o.nestedProperty(s,I+"._inputRange").set(null);var Y=o.nestedProperty(s,I).get();Y._inputDomain&&(Y._input.domain=Y._inputDomain.slice())}else D.match(U)&&o.nestedProperty(s,I+"._inputDomain").set(null);if("type"===L){var X=j,Z="linear"===N.type&&"log"===O,$="log"===N.type&&"linear"===O;if(Z||$){if(X&&X.range)if(N.autorange)Z&&(X.range=X.range[1]>X.range[0]?[1,2]:[2,1]);else{var K=X.range[0],J=X.range[1];Z?(K<=0&&J<=0&&x(I+".autorange",!0),K<=0?K=J/1e6:J<=0&&(J=K/1e6),x(I+".range[0]",Math.log(K)/Math.LN10),x(I+".range[1]",Math.log(J)/Math.LN10)):(x(I+".range[0]",Math.pow(10,K)),x(I+".range[1]",Math.pow(10,J)))}else x(I+".autorange",!0);Array.isArray(s._subplots.polar)&&s._subplots.polar.length&&s[S.parts[0]]&&"radialaxis"===S.parts[1]&&delete s[S.parts[0]]._subplot.viewInitial["radialaxis.range"],u.getComponentMethod("annotations","convertCoords")(e,N,O,x),u.getComponentMethod("images","convertCoords")(e,N,O,x)}else x(I+".autorange",!0),x(I+".range",null);o.nestedProperty(s,I+"._inputRange").set(null)}else if(L.match(C)){var Q=o.nestedProperty(s,A).get(),ee=(O||{}).type;ee&&"-"!==ee||(ee="linear"),u.getComponentMethod("annotations","convertCoords")(e,Q,ee,x),u.getComponentMethod("images","convertCoords")(e,Q,ee,x)}var te=_.containerArrayMatch(A);if(te){n=te.array,r=te.index;var ne=te.property,re=o.nestedProperty(i,n),ae=(re||[])[r]||{},ie=G||{editType:"calc"};""!==r&&""===ne&&(_.isAddVal(O)?b[A]=null:_.isRemoveVal(O)?b[A]=ae:o.warn("unrecognized full object value",t)),k.update(g,ie),d[n]||(d[n]={});var oe=d[n][r];oe||(oe=d[n][r]={}),oe[ne]=O,delete t[A]}else"reverse"===L?(j.range?j.range.reverse():(x(I+".autorange",!0),j.range=[1,0]),N.autorange?g.calc=!0:g.plot=!0):(s._has("scatter-like")&&s._has("regl")&&"dragmode"===A&&("lasso"===O||"select"===O)&&"lasso"!==F&&"select"!==F?g.plot=!0:G?k.update(g,G):g.calc=!0,S.set(O))}}for(n in d){var se=_.applyContainerArrayChanges(e,o.nestedProperty(i,n),d[n],g);se||(g.plot=!0)}var le=s._axisConstraintGroups||[];for(T in E)for(r=0;r<le.length;r++){var ue=le[r];if(ue[T])for(var ce in g.calc=!0,ue)E[ce]||(p.getFromId(e,ce)._constraintShrinkable=!0)}return(H(e)||t.height||t.width)&&(g.plot=!0),(g.plot||g.calc)&&(g.layoutReplot=!0),{flags:g,rangesAltered:E,undoit:b,redoit:y,eventData:o.extendDeep({},y)}}function H(e){var t=e._fullLayout,n=t.width,r=t.height;return e.layout.autosize&&f.plotAutoSize(e,e.layout,t),t.width!==n||t.height!==r}function W(e,t,n,r){var a,i,s=r.getValObject,l=r.flags,u=r.immutable,c=r.inArray,f=r.arrayIndex;function d(){var e=a.editType;c&&-1!==e.indexOf("arraydraw")?o.pushUnique(l.arrays[c],f):k.update(l,a)}function p(e){return"data_array"===e.valType||e.arrayOk}for(i in e){if(l.calc)return;var h=e[i],m=t[i];if("_"!==i.charAt(0)&&"function"!=typeof h&&h!==m){if(("tick0"===i||"dtick"===i)&&"geo"!==n[0]){var v=t.tickmode;if("auto"===v||"array"===v||!v)continue}if(("range"!==i||!t.autorange)&&("zmin"!==i&&"zmax"!==i||"contourcarpet"!==t.type)){var g=n.concat(i);if((a=s(g))&&(!a._compareAsJSON||JSON.stringify(h)!==JSON.stringify(m))){var y,b=a.valType,x=p(a),_=Array.isArray(h),w=Array.isArray(m);if(_&&w){var T="_input_"+i,C=e[T],E=t[T];if(Array.isArray(C)&&C===E)continue}if(void 0===m)x&&_?l.calc=!0:d();else if(a._isLinkedToArray){var M=[],A=!1;c||(l.arrays[i]=M);var S=Math.min(h.length,m.length),O=Math.max(h.length,m.length);if(S!==O){if("arraydraw"!==a.editType){d();continue}A=!0}for(y=0;y<S;y++)W(h[y],m[y],g.concat(y),o.extendFlat({inArray:i,arrayIndex:y},r));if(A)for(y=S;y<O;y++)M.push(y)}else!b&&o.isPlainObject(h)?W(h,m,g,r):x?_&&w?u&&(l.calc=!0):_!==w?l.calc=!0:d():_&&w&&h.length===m.length&&String(h)===String(m)||d()}}}}for(i in t)if(!(i in e||"_"===i.charAt(0)||"function"==typeof t[i])){if(p(a=s(n.concat(i)))&&Array.isArray(t[i]))return void(l.calc=!0);d()}}function q(e){var t=r.select(e),n=e._fullLayout;if(n._container=t.selectAll(".plot-container").data([0]),n._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),n._paperdiv=n._container.selectAll(".svg-container").data([0]),n._paperdiv.enter().append("div").classed("svg-container",!0).style("position","relative"),n._glcontainer=n._paperdiv.selectAll(".gl-container").data([{}]),n._glcontainer.enter().append("div").classed("gl-container",!0),n._paperdiv.selectAll(".main-svg").remove(),n._paper=n._paperdiv.insert("svg",":first-child").classed("main-svg",!0),n._toppaper=n._paperdiv.append("svg").classed("main-svg",!0),!n._uid){var a={};r.selectAll("defs").each(function(){this.id&&(a[this.id.split("-")[1]]=1)}),n._uid=o.randstr(a)}n._paperdiv.selectAll(".main-svg").attr(y.svgAttrs),n._defs=n._paper.append("defs").attr("id","defs-"+n._uid),n._clips=n._defs.append("g").classed("clips",!0),n._topdefs=n._toppaper.append("defs").attr("id","topdefs-"+n._uid),n._topclips=n._topdefs.append("g").classed("clips",!0),n._bgLayer=n._paper.append("g").classed("bglayer",!0),n._draggers=n._paper.append("g").classed("draglayer",!0);var i=n._paper.append("g").classed("layer-below",!0);n._imageLowerLayer=i.append("g").classed("imagelayer",!0),n._shapeLowerLayer=i.append("g").classed("shapelayer",!0),n._cartesianlayer=n._paper.append("g").classed("cartesianlayer",!0),n._polarlayer=n._paper.append("g").classed("polarlayer",!0),n._ternarylayer=n._paper.append("g").classed("ternarylayer",!0),n._geolayer=n._paper.append("g").classed("geolayer",!0),n._pielayer=n._paper.append("g").classed("pielayer",!0),n._glimages=n._paper.append("g").classed("glimages",!0);var s=n._toppaper.append("g").classed("layer-above",!0);n._imageUpperLayer=s.append("g").classed("imagelayer",!0),n._shapeUpperLayer=s.append("g").classed("shapelayer",!0),n._infolayer=n._toppaper.append("g").classed("infolayer",!0),n._menulayer=n._toppaper.append("g").classed("menulayer",!0),n._zoomlayer=n._toppaper.append("g").classed("zoomlayer",!0),n._hoverlayer=n._toppaper.append("g").classed("hoverlayer",!0),e.emit("plotly_framework")}n.update=function e(t,r,a,i){if(t=o.getGraphDiv(t),w.clearPromiseQueue(t),t.framework&&t.framework.isPolar)return Promise.resolve(t);o.isPlainObject(r)||(r={}),o.isPlainObject(a)||(a={}),Object.keys(r).length&&(t.changed=!0),Object.keys(a).length&&(t.changed=!0);var s=w.coerceTraceIndices(t,i),u=j(t,o.extendFlat({},r),s),c=u.flags,d=G(t,o.extendFlat({},a)),p=d.flags;(c.calc||p.calc)&&(t.calcdata=void 0),c.clearAxisTypes&&w.clearAxisTypes(t,s,a);var h=[];if(c.fullReplot&&p.layoutReplot){var m=t.data,v=t.layout;t.data=void 0,t.layout=void 0,h.push(function(){return n.plot(t,m,v)})}else c.fullReplot?h.push(n.plot):p.layoutReplot?h.push(T.layoutReplot):(h.push(f.previousPromises),N(t,p,d)||f.supplyDefaults(t),c.style&&h.push(T.doTraceStyle),c.colorbars&&h.push(T.doColorBars),p.legend&&h.push(T.doLegend),p.layoutstyle&&h.push(T.layoutStyles),p.axrange&&F(h,d.rangesAltered),p.ticks&&h.push(T.doTicksRelayout),p.modebar&&h.push(T.doModeBar),p.camera&&h.push(T.doCamera),h.push(M));h.push(f.rehover),l.add(t,e,[t,u.undoit,d.undoit,u.traces],e,[t,u.redoit,d.redoit,u.traces]);var g=o.syncOrAsync(h,t);return g&&g.then||(g=Promise.resolve(t)),g.then(function(){return t.emit("plotly_update",{data:u.eventData,layout:d.eventData}),t})},n.react=function(e,t,r,a){var i,s,l=(e=o.getGraphDiv(e))._fullData,d=e._fullLayout;if(o.isPlotDiv(e)&&l&&d){if(o.isPlainObject(t)){var p=t;t=p.data,r=p.layout,a=p.config,i=p.frames}var h=!1;if(a){var m=o.extendDeep({},e._context);e._context=void 0,O(e,a),h=function e(t,n){var r;for(r in t)if("_"!==r.charAt(0)){var a=t[r],i=n[r];if(a!==i)if(o.isPlainObject(a)&&o.isPlainObject(i)){if(e(a,i))return!0}else{if(!Array.isArray(a)||!Array.isArray(i))return!0;if(a.length!==i.length)return!0;for(var s=0;s<a.length;s++)if(a[s]!==i[s]){if(!o.isPlainObject(a[s])||!o.isPlainObject(i[s]))return!0;if(e(a[s],i[s]))return!0}}}}(m,e._context)}e.data=t||[],w.cleanData(e.data),e.layout=r||{},w.cleanLayout(e.layout),f.supplyDefaults(e,{skipUpdateCalc:!0});var v=e._fullData,g=e._fullLayout,y=void 0===g.datarevision,b=function(e,t,n,r){if(t.length!==n.length)return{fullReplot:!0,calc:!0};var a,i,o=k.traceFlags();o.arrays={};var s={getValObject:function(e){return c.getTraceValObject(i,e)},flags:o,immutable:r,gd:e},l={};for(a=0;a<t.length;a++)i=n[a]._fullInput,f.hasMakesDataTransform(i)&&(i=n[a]),l[i.uid]||(l[i.uid]=1,W(t[a]._fullInput,i,[],s));return(o.calc||o.plot)&&(o.fullReplot=!0),o}(e,l,v,y),x=function(e,t,n,r){var a=k.layoutFlags();return a.arrays={},W(t,n,[],{getValObject:function(e){return c.getLayoutValObject(n,e)},flags:a,immutable:r,gd:e}),(a.plot||a.calc)&&(a.layoutReplot=!0),a}(e,d,g,y);H(e)&&(x.layoutReplot=!0),b.calc||x.calc?e.calcdata=void 0:f.supplyDefaultsUpdateCalc(e.calcdata,v);var _=[];if(i&&(e._transitionData={},f.createTransitionData(e),_.push(function(){return n.addFrames(e,i)})),b.fullReplot||x.layoutReplot||h)e._fullLayout._skipDefaults=!0,_.push(n.plot);else{for(var C in x.arrays){var E=x.arrays[C];if(E.length){var A=u.getComponentMethod(C,"drawOne");if(A!==o.noop)for(var S=0;S<E.length;S++)A(e,E[S]);else{var P=u.getComponentMethod(C,"draw");if(P===o.noop)throw new Error("cannot draw components: "+C);P(e)}}}_.push(f.previousPromises),b.style&&_.push(T.doTraceStyle),b.colorbars&&_.push(T.doColorBars),x.legend&&_.push(T.doLegend),x.layoutstyle&&_.push(T.layoutStyles),x.axrange&&F(_),x.ticks&&_.push(T.doTicksRelayout),x.modebar&&_.push(T.doModeBar),x.camera&&_.push(T.doCamera),_.push(M)}_.push(f.rehover),(s=o.syncOrAsync(_,e))&&s.then||(s=Promise.resolve(e))}else s=n.newPlot(e,t,r,a);return s.then(function(){return e.emit("plotly_react",{data:t,layout:r}),e})},n.animate=function(e,t,n){if(e=o.getGraphDiv(e),!o.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e+". It's likely that you've failed to create a plot before animating it. For more details, see https://plot.ly/javascript/animations/");var r=e._transitionData;r._frameQueue||(r._frameQueue=[]);var a=(n=f.supplyAnimationDefaults(n)).transition,i=n.frame;function s(e){return Array.isArray(a)?e>=a.length?a[0]:a[e]:a}function l(e){return Array.isArray(i)?e>=i.length?i[0]:i[e]:i}function u(e,t){var n=0;return function(){if(e&&++n===t)return e()}}return void 0===r._frameWaitingCnt&&(r._frameWaitingCnt=0),new Promise(function(i,c){function d(){r._currentFrame&&r._currentFrame.onComplete&&r._currentFrame.onComplete();var t=r._currentFrame=r._frameQueue.shift();if(t){var n=t.name?t.name.toString():null;e._fullLayout._currentFrame=n,r._lastFrameAt=Date.now(),r._timeToNext=t.frameOpts.duration,f.transition(e,t.frame.data,t.frame.layout,w.coerceTraceIndices(e,t.frame.traces),t.frameOpts,t.transitionOpts).then(function(){t.onComplete&&t.onComplete()}),e.emit("plotly_animatingframe",{name:n,frame:t.frame,animation:{frame:t.frameOpts,transition:t.transitionOpts}})}else e.emit("plotly_animated"),window.cancelAnimationFrame(r._animationRaf),r._animationRaf=null}function p(){e.emit("plotly_animating"),r._lastFrameAt=-1/0,r._timeToNext=0,r._runningTransitions=0,r._currentFrame=null;var t=function(){r._animationRaf=window.requestAnimationFrame(t),Date.now()-r._lastFrameAt>r._timeToNext&&d()};t()}var h,m,v=0;function g(e){return Array.isArray(a)?v>=a.length?e.transitionOpts=a[v]:e.transitionOpts=a[0]:e.transitionOpts=a,v++,e}var y=[],b=void 0===t||null===t,x=Array.isArray(t),_=!b&&!x&&o.isPlainObject(t);if(_)y.push({type:"object",data:g(o.extendFlat({},t))});else if(b||-1!==["string","number"].indexOf(typeof t))for(h=0;h<r._frames.length;h++)(m=r._frames[h])&&(b||String(m.group)===String(t))&&y.push({type:"byname",name:String(m.name),data:g({name:m.name})});else if(x)for(h=0;h<t.length;h++){var T=t[h];-1!==["number","string"].indexOf(typeof T)?(T=String(T),y.push({type:"byname",name:T,data:g({name:T})})):o.isPlainObject(T)&&y.push({type:"object",data:g(o.extendFlat({},T))})}for(h=0;h<y.length;h++)if("byname"===(m=y[h]).type&&!r._frameHash[m.data.name])return o.warn('animate failure: frame not found: "'+m.data.name+'"'),void c();-1!==["next","immediate"].indexOf(n.mode)&&function(){if(0!==r._frameQueue.length){for(;r._frameQueue.length;){var t=r._frameQueue.pop();t.onInterrupt&&t.onInterrupt()}e.emit("plotly_animationinterrupted",[])}}(),"reverse"===n.direction&&y.reverse();var k=e._fullLayout._currentFrame;if(k&&n.fromcurrent){var C=-1;for(h=0;h<y.length;h++)if("byname"===(m=y[h]).type&&m.name===k){C=h;break}if(C>0&&C<y.length-1){var E=[];for(h=0;h<y.length;h++)m=y[h],("byname"!==y[h].type||h>C)&&E.push(m);y=E}}y.length>0?function(t){if(0!==t.length){for(var a=0;a<t.length;a++){var o;o="byname"===t[a].type?f.computeFrame(e,t[a].name):t[a].data;var d=l(a),h=s(a);h.duration=Math.min(h.duration,d.duration);var m={frame:o,name:t[a].name,frameOpts:d,transitionOpts:h};a===t.length-1&&(m.onComplete=u(i,2),m.onInterrupt=c),r._frameQueue.push(m)}"immediate"===n.mode&&(r._lastFrameAt=-1/0),r._animationRaf||p()}}(y):(e.emit("plotly_animated"),i())})},n.addFrames=function(e,t,n){if(e=o.getGraphDiv(e),null===t||void 0===t)return Promise.resolve();if(!o.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plot.ly/javascript/animations/");var r,a,i,s,u=e._transitionData._frames,c=e._transitionData._frameHash;if(!Array.isArray(t))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+t);var d=u.length+2*t.length,p=[],h={};for(r=t.length-1;r>=0;r--)if(o.isPlainObject(t[r])){var m=t[r].name,v=(c[m]||h[m]||{}).name,g=t[r].name,y=c[v]||h[v];v&&g&&"number"==typeof g&&y&&E<5&&(E++,o.warn('addFrames: overwriting frame "'+(c[v]||h[v]).name+'" with a frame whose name of type "number" also equates to "'+v+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),5===E&&o.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),h[m]={name:m},p.push({frame:f.supplyFrameDefaults(t[r]),index:n&&void 0!==n[r]&&null!==n[r]?n[r]:d+r})}p.sort(function(e,t){return e.index>t.index?-1:e.index<t.index?1:0});var b=[],x=[],_=u.length;for(r=p.length-1;r>=0;r--){if("number"==typeof(a=p[r].frame).name&&o.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!a.name)for(;c[a.name="frame "+e._transitionData._counter++];);if(c[a.name]){for(i=0;i<u.length&&(u[i]||{}).name!==a.name;i++);b.push({type:"replace",index:i,value:a}),x.unshift({type:"replace",index:i,value:u[i]})}else s=Math.max(0,Math.min(p[r].index,_)),b.push({type:"insert",index:s,value:a}),x.unshift({type:"delete",index:s}),_++}var w=f.modifyFrames,T=f.modifyFrames,k=[e,x],C=[e,b];return l&&l.add(e,w,k,T,C),f.modifyFrames(e,b)},n.deleteFrames=function(e,t){if(e=o.getGraphDiv(e),!o.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e);var n,r,a=e._transitionData._frames,i=[],s=[];if(!t)for(t=[],n=0;n<a.length;n++)t.push(n);for((t=t.slice(0)).sort(),n=t.length-1;n>=0;n--)r=t[n],i.push({type:"delete",index:r}),s.unshift({type:"insert",index:r,value:a[r]});var u=f.modifyFrames,c=f.modifyFrames,d=[e,s],p=[e,i];return l&&l.add(e,u,d,c,p),f.modifyFrames(e,i)},n.purge=function(e){var t=(e=o.getGraphDiv(e))._fullLayout||{},n=e._fullData||[];return f.cleanPlot([],{},n,t),f.purge(e),s.purge(e),t._container&&t._container.remove(),delete e._context,e}},{"../components/color":570,"../components/colorbar/connect":572,"../components/drawing":595,"../constants/xmlns_namespaces":674,"../lib":696,"../lib/events":684,"../lib/queue":711,"../lib/svg_text_utils":720,"../plots/cartesian/axes":744,"../plots/cartesian/constants":750,"../plots/cartesian/graph_interact":754,"../plots/plots":808,"../plots/polar/legacy":816,"../registry":827,"./edit_types":727,"./helpers":728,"./manage_arrays":730,"./plot_config":732,"./plot_schema":733,"./subroutines":735,d3:148,"fast-isnumeric":214,"has-hover":393}],732:[function(e,t,n){"use strict";t.exports={staticPlot:!1,plotlyServerURL:"https://plot.ly",editable:!1,edits:{annotationPosition:!1,annotationTail:!1,annotationText:!1,axisTitleText:!1,colorbarPosition:!1,colorbarTitleText:!1,legendPosition:!1,legendText:!1,shapePosition:!1,titleText:!1},autosizable:!1,responsive:!1,queueLength:0,fillFrame:!1,frameMargins:0,scrollZoom:!1,doubleClick:"reset+autosize",showTips:!0,showAxisDragHandles:!0,showAxisRangeEntryBoxes:!0,showLink:!1,sendData:!0,linkText:"Edit chart",showSources:!1,displayModeBar:"hover",modeBarButtonsToRemove:[],modeBarButtonsToAdd:[],modeBarButtons:!1,toImageButtonOptions:{},displaylogo:!0,plotGlPixelRatio:2,setBackground:"transparent",topojsonURL:"https://cdn.plot.ly/",mapboxAccessToken:null,logging:1,globalTransforms:[],locale:"en-US",locales:{}}},{}],733:[function(e,t,n){"use strict";var r=e("../registry"),a=e("../lib"),i=e("../plots/attributes"),o=e("../plots/layout_attributes"),s=e("../plots/frame_attributes"),l=e("../plots/animation_attributes"),u=e("../plots/polar/legacy/area_attributes"),c=e("../plots/polar/legacy/axis_attributes"),f=e("./edit_types"),d=a.extendFlat,p=a.extendDeepAll,h=a.isPlainObject,m="_isSubplotObj",v="_isLinkedToArray",g=[m,v,"_arrayAttrRegexps","_deprecated"];function y(e,t,n){if(!e)return!1;if(e._isLinkedToArray)if(b(t[n]))n++;else if(n<t.length)return!1;for(;n<t.length;n++){var r=e[t[n]];if(!h(r))break;if(e=r,n===t.length-1)break;if(e._isLinkedToArray){if(!b(t[++n]))return!1}else if("info_array"===e.valType){var a=t[++n];if(!b(a))return!1;var i=e.items;if(Array.isArray(i)){if(a>=i.length)return!1;if(2===e.dimensions){if(n++,t.length===n)return e;var o=t[n];if(!b(o))return!1;e=i[a][o]}else e=i[a]}else e=i}}return e}function b(e){return e===Math.round(e)&&e>=0}function x(e){return function(e){n.crawl(e,function(e,t,r){n.isValObject(e)?"data_array"===e.valType?(e.role="data",r[t+"src"]={valType:"string",editType:"none"}):!0===e.arrayOk&&(r[t+"src"]={valType:"string",editType:"none"}):h(e)&&(e.role="object")})}(e),function(e){n.crawl(e,function(e,t,n){if(e){var r=e[v];r&&(delete e[v],n[t]={items:{}},n[t].items[r]=e,n[t].role="object")}})}(e),function(e){!function e(t){for(var n in t)if(h(t[n]))e(t[n]);else if(Array.isArray(t[n]))for(var r=0;r<t[n].length;r++)e(t[n][r]);else t[n]instanceof RegExp&&(t[n]=t[n].toString())}(e)}(e),e}function _(e,t,n){var r=a.nestedProperty(e,n),i=p({},t.layoutAttributes);i[m]=!0,r.set(i)}function w(e,t,n){var r=a.nestedProperty(e,n);r.set(p(r.get()||{},t))}n.IS_SUBPLOT_OBJ=m,n.IS_LINKED_TO_ARRAY=v,n.DEPRECATED="_deprecated",n.UNDERSCORE_ATTRS=g,n.get=function(){var e={};r.allTypes.concat("area").forEach(function(t){e[t]=function(e){var t,o;"area"===e?(t={attributes:u},o={}):(t=r.modules[e]._module,o=t.basePlotModule);var s={type:null},l=p({},i),c=p({},t.attributes);n.crawl(c,function(e,t,n,r,i){a.nestedProperty(l,i).set(void 0),void 0===e&&a.nestedProperty(c,i).set(void 0)}),p(s,l),p(s,c),o.attributes&&p(s,o.attributes),s.type=e;var f={meta:t.meta||{},attributes:x(s)};if(t.layoutAttributes){var d={};p(d,t.layoutAttributes),f.layoutAttributes=x(d)}return f}(t)});var t={};return Object.keys(r.transformsRegistry).forEach(function(e){t[e]=function(e){var t=r.transformsRegistry[e],n=p({},t.attributes);return Object.keys(r.componentsRegistry).forEach(function(t){var a=r.componentsRegistry[t];a.schema&&a.schema.transforms&&a.schema.transforms[e]&&Object.keys(a.schema.transforms[e]).forEach(function(t){w(n,a.schema.transforms[e][t],t)})}),{attributes:x(n)}}(e)}),{defs:{valObjects:a.valObjectMeta,metaKeys:g.concat(["description","role","editType","impliedEdits"]),editType:{traces:f.traces,layout:f.layout},impliedEdits:{}},traces:e,layout:function(){var e,t,n={};for(e in p(n,o),r.subplotsRegistry)if((t=r.subplotsRegistry[e]).layoutAttributes)if(Array.isArray(t.attr))for(var a=0;a<t.attr.length;a++)_(n,t,t.attr[a]);else{var i="subplot"===t.attr?t.name:t.attr;_(n,t,i)}for(e in n=function(e){return d(e,{radialaxis:c.radialaxis,angularaxis:c.angularaxis}),d(e,c.layout),e}(n),r.componentsRegistry){var s=(t=r.componentsRegistry[e]).schema;if(s&&(s.subplots||s.layout)){var l=s.subplots;if(l&&l.xaxis&&!l.yaxis)for(var u in l.xaxis)delete n.yaxis[u]}else t.layoutAttributes&&w(n,t.layoutAttributes,t.name)}return{layoutAttributes:x(n)}}(),transforms:t,frames:function(){var e={frames:a.extendDeepAll({},s)};return x(e),e.frames}(),animation:x(l)}},n.crawl=function(e,t,r,a){var i=r||0;a=a||"",Object.keys(e).forEach(function(r){var o=e[r];if(-1===g.indexOf(r)){var s=(a?a+".":"")+r;t(o,r,e,i,s),n.isValObject(o)||h(o)&&"impliedEdits"!==r&&n.crawl(o,t,i+1,s)}})},n.isValObject=function(e){return e&&void 0!==e.valType},n.findArrayAttributes=function(e){var t,r,o=[],s=[],l=[];function u(e,n,i,u){s=s.slice(0,u).concat([n]),l=l.slice(0,u).concat([e&&e._isLinkedToArray]);var c=e&&("data_array"===e.valType||!0===e.arrayOk)&&!("colorbar"===s[u-1]&&("ticktext"===n||"tickvals"===n));c&&function e(t,n,i){var u=t[s[n]],c=i+s[n];if(n===s.length-1)a.isArrayOrTypedArray(u)&&o.push(r+c);else if(l[n]){if(Array.isArray(u))for(var f=0;f<u.length;f++)a.isPlainObject(u[f])&&e(u[f],n+1,c+"["+f+"].")}else a.isPlainObject(u)&&e(u,n+1,c+".")}(t,0,"")}t=e,r="",n.crawl(i,u),e._module&&e._module.attributes&&n.crawl(e._module.attributes,u);var c=e.transforms;if(c)for(var f=0;f<c.length;f++){var d=c[f],p=d._module;p&&(r="transforms["+f+"].",t=d,n.crawl(p.attributes,u))}return o},n.getTraceValObject=function(e,t){var n,a,o=t[0],s=1;if("transforms"===o){if(1===t.length)return i.transforms;var l=e.transforms;if(!Array.isArray(l)||!l.length)return!1;var c=t[1];if(!b(c)||c>=l.length)return!1;n=(r.transformsRegistry[l[c].type]||{}).attributes,a=n&&n[t[2]],s=3}else if("area"===e.type)a=u[o];else{var f=e._module;if(f||(f=(r.modules[e.type||i.type.dflt]||{})._module),!f)return!1;if(n=f.attributes,!(a=n&&n[o])){var d=f.basePlotModule;d&&d.attributes&&(a=d.attributes[o])}a||(a=i[o])}return y(a,t,s)},n.getLayoutValObject=function(e,t){var n=function(e,t){var n,a,i,s,l=e._basePlotModules;if(l){var u;for(n=0;n<l.length;n++){if((i=l[n]).attrRegex&&i.attrRegex.test(t)){if(i.layoutAttrOverrides)return i.layoutAttrOverrides;!u&&i.layoutAttributes&&(u=i.layoutAttributes)}var f=i.baseLayoutAttrOverrides;if(f&&t in f)return f[t]}if(u)return u}var d=e._modules;if(d)for(n=0;n<d.length;n++)if((s=d[n].layoutAttributes)&&t in s)return s[t];for(a in r.componentsRegistry)if(!(i=r.componentsRegistry[a]).schema&&t===i.name)return i.layoutAttributes;return t in o?o[t]:"radialaxis"===t||"angularaxis"===t?c[t]:c.layout[t]||!1}(e,t[0]);return y(n,t,1)}},{"../lib":696,"../plots/animation_attributes":739,"../plots/attributes":741,"../plots/frame_attributes":772,"../plots/layout_attributes":799,"../plots/polar/legacy/area_attributes":814,"../plots/polar/legacy/axis_attributes":815,"../registry":827,"./edit_types":727}],734:[function(e,t,n){"use strict";var r=e("../lib"),a=e("../plots/attributes"),i="templateitemname",o={name:{valType:"string",editType:"none"}};function s(e){return e&&"string"==typeof e}function l(e){var t=e.length-1;return"s"!==e.charAt(t)&&r.warn("bad argument to arrayDefaultKey: "+e),e.substr(0,e.length-1)+"defaults"}o[i]={valType:"string",editType:"calc"},n.templatedArray=function(e,t){return t._isLinkedToArray=e,t.name=o.name,t[i]=o[i],t},n.traceTemplater=function(e){var t,n,i={};for(t in e)n=e[t],Array.isArray(n)&&n.length&&(i[t]=0);return{newTrace:function(o){var s={type:t=r.coerce(o,{},a,"type"),_template:null};if(t in i){n=e[t];var l=i[t]%n.length;i[t]++,s._template=n[l]}return s}}},n.newContainer=function(e,t,n){var a=e._template,i=a&&(a[t]||n&&a[n]);r.isPlainObject(i)||(i=null);var o=e[t]={_template:i};return o},n.arrayTemplater=function(e,t,n){var r=e._template,a=r&&r[l(t)],o=r&&r[t];Array.isArray(o)&&o.length||(o=[]);var u={};return{newItem:function(e){var t={name:e.name,_input:e},r=t[i]=e[i];if(!s(r))return t._template=a,t;for(var l=0;l<o.length;l++){var c=o[l];if(c.name===r)return u[r]=1,t._template=c,t}return t[n]=e[n]||!1,t._template=!1,t},defaultItems:function(){for(var e=[],t=0;t<o.length;t++){var n=o[t],r=n.name;if(s(r)&&!u[r]){var a={_template:n,name:r,_input:{_templateitemname:r}};a[i]=n[i],e.push(a),u[r]=1}}return e}}},n.arrayDefaultKey=l,n.arrayEditor=function(e,t,n){var a=(r.nestedProperty(e,t).get()||[]).length,o=n._index,s=o>=a&&(n._input||{})._templateitemname;s&&(o=a);var l,u=t+"["+o+"]";function c(){l={},s&&(l[u]={},l[u][i]=s)}function f(e,t){s?r.nestedProperty(l[u],e).set(t):l[u+"."+e]=t}function d(){var e=l;return c(),e}return c(),{modifyBase:function(e,t){l[e]=t},modifyItem:f,getUpdateObj:d,applyUpdate:function(t,n){t&&f(t,n);var a=d();for(var i in a)r.nestedProperty(e,i).set(a[i])}}}},{"../lib":696,"../plots/attributes":741}],735:[function(e,t,n){"use strict";var r=e("d3"),a=e("../registry"),i=e("../plots/plots"),o=e("../lib"),s=e("../lib/clear_gl_canvases"),l=e("../components/color"),u=e("../components/drawing"),c=e("../components/titles"),f=e("../components/modebar"),d=e("../plots/cartesian/axes"),p=e("../constants/alignment"),h=e("../plots/cartesian/constraints"),m=h.enforce,v=h.clean,g=e("../plots/cartesian/autorange").doAutoRange;function y(e,t,n){for(var r=0;r<n.length;r++){var a=n[r][0],i=n[r][1];if(!(a[0]>=e[1]||a[1]<=e[0])&&i[0]<t[1]&&i[1]>t[0])return!0}return!1}function b(e){var t,a,i,s,c,h=e._fullLayout,m=h._size,v=m.p,g=d.list(e,"",!0);if(h._paperdiv.style({width:e._context.responsive&&h.autosize&&!e._context._hasZeroWidth&&!e.layout.width?"100%":h.width+"px",height:e._context.responsive&&h.autosize&&!e._context._hasZeroHeight&&!e.layout.height?"100%":h.height+"px"}).selectAll(".main-svg").call(u.setSize,h.width,h.height),e._context.setBackground(e,h.paper_bgcolor),n.drawMainTitle(e),f.manage(e),!h._has("cartesian"))return e._promises.length&&Promise.all(e._promises);function b(e,t,n){var r=e._lw/2;return"x"===e._id.charAt(0)?t?"top"===n?t._offset-v-r:t._offset+t._length+v+r:m.t+m.h*(1-(e.position||0))+r%1:t?"right"===n?t._offset+t._length+v+r:t._offset-v-r:m.l+m.w*(e.position||0)+r%1}for(t=0;t<g.length;t++){var w=g[t];w.setScale();var k=w._anchorAxis;w._linepositions={},w._lw=u.crispRound(e,w.linewidth,1),w._mainLinePosition=b(w,k,w.side),w._mainMirrorPosition=w.mirror&&k?b(w,k,p.OPPOSITE_SIDE[w.side]):null,w._mainSubplot=x(w,h)}var C=[],E=[],M=[],A=1===l.opacity(h.paper_bgcolor)&&1===l.opacity(h.plot_bgcolor)&&h.paper_bgcolor===h.plot_bgcolor;for(a in h._plots)if((i=h._plots[a]).mainplot)i.bg&&i.bg.remove(),i.bg=void 0;else{var S=i.xaxis.domain,O=i.yaxis.domain,P=i.plotgroup;if(y(S,O,M)){var R=P.node(),L=i.bg=o.ensureSingle(P,"rect","bg");R.insertBefore(L.node(),R.childNodes[0]),E.push(a)}else P.select("rect.bg").remove(),M.push([S,O]),A||(C.push(a),E.push(a))}var D,I,z,j,N,F,B,V,U,G,H,W,q,Y=h._bgLayer.selectAll(".bg").data(C);for(Y.enter().append("rect").classed("bg",!0),Y.exit().remove(),Y.each(function(e){h._plots[e].bg=r.select(this)}),t=0;t<E.length;t++)i=h._plots[E[t]],s=i.xaxis,c=i.yaxis,i.bg&&i.bg.call(u.setRect,s._offset-v,c._offset-v,s._length+2*v,c._length+2*v).call(l.fill,h.plot_bgcolor).style("stroke-width",0);if(!h._hasOnlyLargeSploms)for(a in h._plots){i=h._plots[a],s=i.xaxis,c=i.yaxis;var X,Z,$=i.clipId="clip"+h._uid+a+"plot",K=o.ensureSingleById(h._clips,"clipPath",$,function(e){e.classed("plotclip",!0).append("rect")});i.clipRect=K.select("rect").attr({width:s._length,height:c._length}),u.setTranslate(i.plot,s._offset,c._offset),i._hasClipOnAxisFalse?(X=null,Z=$):(X=$,Z=null),u.setClipUrl(i.plot,X),i.layerClipId=Z}function J(e){return"M"+D+","+e+"H"+I}function Q(e){return"M"+s._offset+","+e+"h"+s._length}function ee(e){return"M"+e+","+V+"V"+B}function te(e){return"M"+e+","+c._offset+"v"+c._length}function ne(e,t,n){if(!e.showline||a!==e._mainSubplot)return"";if(!e._anchorAxis)return n(e._mainLinePosition);var r=t(e._mainLinePosition);return e.mirror&&(r+=t(e._mainMirrorPosition)),r}for(a in h._plots){i=h._plots[a],s=i.xaxis,c=i.yaxis;var re="M0,0";_(s,a)&&(N=T(s,"left",c,g),D=s._offset-(N?v+N:0),F=T(s,"right",c,g),I=s._offset+s._length+(F?v+F:0),z=b(s,c,"bottom"),j=b(s,c,"top"),!(q=!s._anchorAxis||a!==s._mainSubplot)||"allticks"!==s.mirror&&"all"!==s.mirror||(s._linepositions[a]=[z,j]),re=ne(s,J,Q),q&&s.showline&&("all"===s.mirror||"allticks"===s.mirror)&&(re+=J(z)+J(j)),i.xlines.style("stroke-width",s._lw+"px").call(l.stroke,s.showline?s.linecolor:"rgba(0,0,0,0)")),i.xlines.attr("d",re);var ae="M0,0";_(c,a)&&(H=T(c,"bottom",s,g),B=c._offset+c._length+(H?v:0),W=T(c,"top",s,g),V=c._offset-(W?v:0),U=b(c,s,"left"),G=b(c,s,"right"),!(q=!c._anchorAxis||a!==c._mainSubplot)||"allticks"!==c.mirror&&"all"!==c.mirror||(c._linepositions[a]=[U,G]),ae=ne(c,ee,te),q&&c.showline&&("all"===c.mirror||"allticks"===c.mirror)&&(ae+=ee(U)+ee(G)),i.ylines.style("stroke-width",c._lw+"px").call(l.stroke,c.showline?c.linecolor:"rgba(0,0,0,0)")),i.ylines.attr("d",ae)}return d.makeClipPaths(e),e._promises.length&&Promise.all(e._promises)}function x(e,t){var n=t._subplots,r=n.cartesian.concat(n.gl2d||[]),a={_fullLayout:t},i="x"===e._id.charAt(0),o=e._mainAxis._anchorAxis,s="",l="",u="";if(o&&(u=o._mainAxis._id,s=i?e._id+u:u+e._id),!s||!t._plots[s]){s="";for(var c=0;c<r.length;c++){var f=r[c],p=f.indexOf("y"),h=i?f.substr(0,p):f.substr(p),m=i?f.substr(p):f.substr(0,p);if(h===e._id){l||(l=f);var v=d.getFromId(a,m);if(u&&v.overlaying===u){s=f;break}}}}return s||l}function _(e,t){return(e.ticks||e.showline)&&(t===e._mainSubplot||"all"===e.mirror||"allticks"===e.mirror)}function w(e,t,n){if(!n.showline||!n._lw)return!1;if("all"===n.mirror||"allticks"===n.mirror)return!0;var r=n._anchorAxis;if(!r)return!1;var a=p.FROM_BL[t];return n.side===t?r.domain[a]===e.domain[a]:n.mirror&&r.domain[1-a]===e.domain[1-a]}function T(e,t,n,r){if(w(e,t,n))return n._lw;for(var a=0;a<r.length;a++){var i=r[a];if(i._mainAxis===n._mainAxis&&w(e,t,i))return i._lw}return 0}n.layoutStyles=function(e){return o.syncOrAsync([i.doAutoMargin,b],e)},n.drawMainTitle=function(e){var t=e._fullLayout;c.draw(e,"gtitle",{propContainer:t,propName:"title",placeholder:t._dfltTitle.plot,attributes:{x:t.width/2,y:t._size.t/2,"text-anchor":"middle"}})},n.doTraceStyle=function(e){var t,r=e.calcdata,o=[];for(t=0;t<r.length;t++){var l=r[t],u=l[0]||{},c=u.trace||{},f=c._module||{},d=f.arraysToCalcdata;d&&d(l,c);var p=f.editStyle;p&&o.push({fn:p,cd0:u})}if(o.length){for(t=0;t<o.length;t++){var h=o[t];h.fn(e,h.cd0)}s(e),n.redrawReglTraces(e)}return i.style(e),a.getComponentMethod("legend","draw")(e),i.previousPromises(e)},n.doColorBars=function(e){for(var t=0;t<e.calcdata.length;t++){var n=e.calcdata[t][0];if((n.t||{}).cb){var r=n.trace,o=n.t.cb;a.traceIs(r,"contour")&&o.line({width:!1!==r.contours.showlines?r.line.width:0,dash:r.line.dash,color:"line"===r.contours.coloring?o._opts.line.color:r.line.color});var s=r._module.colorbar,l=s.container,u=(l?r[l]:r).colorbar;o.options(u)()}}return i.previousPromises(e)},n.layoutReplot=function(e){var t=e.layout;return e.layout=void 0,a.call("plot",e,"",t)},n.doLegend=function(e){return a.getComponentMethod("legend","draw")(e),i.previousPromises(e)},n.doTicksRelayout=function(e){return d.doTicks(e,"redraw"),e._fullLayout._hasOnlyLargeSploms&&(a.subplotsRegistry.splom.updateGrid(e),s(e),n.redrawReglTraces(e)),n.drawMainTitle(e),i.previousPromises(e)},n.doModeBar=function(e){var t=e._fullLayout;f.manage(e);for(var n=0;n<t._basePlotModules.length;n++){var r=t._basePlotModules[n].updateFx;r&&r(e)}return i.previousPromises(e)},n.doCamera=function(e){for(var t=e._fullLayout,n=t._subplots.gl3d,r=0;r<n.length;r++){var a=t[n[r]],i=a._scene;i.setCamera(a.camera)}},n.drawData=function(e){var t,r=e._fullLayout,o=e.calcdata;for(t=0;t<o.length;t++){var l=o[t][0].trace;!0===l.visible&&l._module.colorbar||r._infolayer.select(".cb"+l.uid).remove()}s(e);var u=r._basePlotModules;for(t=0;t<u.length;t++)u[t].plot(e);return n.redrawReglTraces(e),i.style(e),a.getComponentMethod("shapes","draw")(e),a.getComponentMethod("annotations","draw")(e),r._replotting=!1,i.previousPromises(e)},n.redrawReglTraces=function(e){var t=e._fullLayout;if(t._has("regl")){var n,r,a=e._fullData,i=[],s=[];for(t._hasOnlyLargeSploms&&t._splomGrid.draw(),n=0;n<a.length;n++){var l=a[n];!0===l.visible&&("splom"===l.type?t._splomScenes[l.uid].draw():"scattergl"===l.type?o.pushUnique(i,l.xaxis+l.yaxis):"scatterpolargl"===l.type&&o.pushUnique(s,l.subplot))}for(n=0;n<i.length;n++)(r=t._plots[i[n]])._scene&&r._scene.draw();for(n=0;n<s.length;n++)(r=t[s[n]]._subplot)._scene&&r._scene.draw()}},n.doAutoRangeAndConstraints=function(e){for(var t=d.list(e,"",!0),n=0;n<t.length;n++){var r=t[n];v(e,r),g(e,r)}m(e)},n.finalDraw=function(e){a.getComponentMethod("shapes","draw")(e),a.getComponentMethod("images","draw")(e),a.getComponentMethod("annotations","draw")(e),a.getComponentMethod("rangeslider","draw")(e),a.getComponentMethod("rangeselector","draw")(e)},n.drawMarginPushers=function(e){a.getComponentMethod("legend","draw")(e),a.getComponentMethod("rangeselector","draw")(e),a.getComponentMethod("sliders","draw")(e),a.getComponentMethod("updatemenus","draw")(e)}},{"../components/color":570,"../components/drawing":595,"../components/modebar":633,"../components/titles":661,"../constants/alignment":668,"../lib":696,"../lib/clear_gl_canvases":680,"../plots/cartesian/autorange":743,"../plots/cartesian/axes":744,"../plots/cartesian/constraints":752,"../plots/plots":808,"../registry":827,d3:148}],736:[function(e,t,n){"use strict";var r=e("../lib"),a=r.isPlainObject,i=e("./plot_schema"),o=e("../plots/plots"),s=e("../plots/attributes"),l=e("./plot_template"),u=e("./plot_config");function c(e,t){e=r.extendDeep({},e);var n,i,o=Object.keys(e).sort();function s(t,n,r){if(a(n)&&a(t))c(t,n);else if(Array.isArray(n)&&Array.isArray(t)){var o=l.arrayTemplater({_template:e},r);for(i=0;i<n.length;i++){var s=n[i],u=o.newItem(s)._template;u&&c(u,s)}var f=o.defaultItems();for(i=0;i<f.length;i++)n.push(f[i]._template);for(i=0;i<n.length;i++)delete n[i].templateitemname}}for(n=0;n<o.length;n++){var u=o[n],d=e[u];if(u in t?s(d,t[u],u):t[u]=d,f(u)===u)for(var p in t){var h=f(p);p===h||h!==u||p in e||s(d,t[p],u)}}}function f(e){return e.replace(/[0-9]+$/,"")}function d(e,t,n,i,o){var s=o&&n(o);for(var u in e){var c=e[u],h=p(e,u,i),m=p(e,u,o),v=n(m);if(!v){var g=f(u);g!==u&&(m=p(e,g,o),v=n(m))}if(!(s&&s===v||!v||v._noTemplating||"data_array"===v.valType||v.arrayOk&&Array.isArray(c)))if(!v.valType&&a(c))d(c,t,n,h,m);else if(v._isLinkedToArray&&Array.isArray(c))for(var y=!1,b=0,x={},_=0;_<c.length;_++){var w=c[_];if(a(w)){var T=w.name;if(T)x[T]||(d(w,t,n,p(c,b,h),p(c,b,m)),b++,x[T]=1);else if(!y){var k=l.arrayDefaultKey(u),C=p(e,k,i),E=p(c,b,h);d(w,t,n,E,p(c,b,m));var M=r.nestedProperty(t,E),A=r.nestedProperty(t,C);A.set(M.get()),M.set(null),y=!0}}}else{var S=r.nestedProperty(t,h);S.set(c)}}}function p(e,t,n){return n?Array.isArray(e)?n+"["+t+"]":n+"."+t:t}function h(e){for(var t=0;t<e.length;t++)if(a(e[t]))return!0}function m(e){var t;switch(e.code){case"data":t="The template has no key data.";break;case"layout":t="The template has no key layout.";break;case"missing":t=e.path?"There are no templates for item "+e.path+" with name "+e.templateitemname:"There are no templates for trace "+e.index+", of type "+e.traceType+".";break;case"unused":t=e.path?"The template item at "+e.path+" was not used in constructing the plot.":e.dataCount?"Some of the templates of type "+e.traceType+" were not used. The template has "+e.templateCount+" traces, the data only has "+e.dataCount+" of this type.":"The template has "+e.templateCount+" traces of type "+e.traceType+" but there are none in the data.";break;case"reused":t="Some of the templates of type "+e.traceType+" were used more than once. The template has "+e.templateCount+" traces, the data has "+e.dataCount+" of this type."}return e.msg=t,e}n.makeTemplate=function(e){e=r.extendDeep({_context:u},{data:e.data,layout:e.layout}),o.supplyDefaults(e);var t=e.data||[],n=e.layout||{};n._basePlotModules=e._fullLayout._basePlotModules,n._modules=e._fullLayout._modules;var l={data:{},layout:{}};t.forEach(function(e){var t={};d(e,t,function(e,t){return i.getTraceValObject(e,r.nestedProperty({},t).parts)}.bind(null,e));var n=r.coerce(e,{},s,"type"),a=l.data[n];a||(a=l.data[n]=[]),a.push(t)}),d(n,l.layout,function(e,t){return i.getLayoutValObject(e,r.nestedProperty({},t).parts)}.bind(null,n)),delete l.layout.template;var f=n.template;if(a(f)){var p,h,m,v,g,y,b=f.layout;a(b)&&c(b,l.layout);var x=f.data;if(a(x)){for(h in l.data)if(m=x[h],Array.isArray(m)){for(g=l.data[h],y=g.length,v=m.length,p=0;p<y;p++)c(m[p%v],g[p]);for(p=y;p<v;p++)g.push(r.extendDeep({},m[p]))}for(h in x)h in l.data||(l.data[h]=r.extendDeep([],x[h]))}}return l},n.validateTemplate=function(e,t){var n=r.extendDeep({},{_context:u,data:e.data,layout:e.layout}),i=n.layout||{};a(t)||(t=i.template||{});var s=t.layout,l=t.data,c=[];n.layout=i,n.layout.template=t,o.supplyDefaults(n);var d=n._fullLayout,v=n._fullData,g={};if(a(s)?(function e(t,n){for(var r in t)if("_"!==r.charAt(0)&&a(t[r])){var i,o=f(r),s=[];for(i=0;i<n.length;i++)s.push(p(t,r,n[i])),o!==r&&s.push(p(t,o,n[i]));for(i=0;i<s.length;i++)g[s[i]]=1;e(t[r],s)}}(d,["layout"]),function e(t,n){for(var r in t)if(-1===r.indexOf("defaults")&&a(t[r])){var i=p(t,r,n);g[i]?e(t[r],i):c.push({code:"unused",path:i})}}(s,"layout")):c.push({code:"layout"}),a(l)){for(var y,b={},x=0;x<v.length;x++){var _=v[x];y=_.type,b[y]=(b[y]||0)+1,_._fullInput._template||c.push({code:"missing",index:_._fullInput.index,traceType:y})}for(y in l){var w=l[y].length,T=b[y]||0;w>T?c.push({code:"unused",traceType:y,templateCount:w,dataCount:T}):T>w&&c.push({code:"reused",traceType:y,templateCount:w,dataCount:T})}}else c.push({code:"data"});if(function e(t,n){for(var r in t)if("_"!==r.charAt(0)){var i=t[r],o=p(t,r,n);a(i)?(Array.isArray(t)&&!1===i._template&&i.templateitemname&&c.push({code:"missing",path:o,templateitemname:i.templateitemname}),e(i,o)):Array.isArray(i)&&h(i)&&e(i,o)}}({data:v,layout:d},""),c.length)return c.map(m)}},{"../lib":696,"../plots/attributes":741,"../plots/plots":808,"./plot_config":732,"./plot_schema":733,"./plot_template":734}],737:[function(e,t,n){"use strict";var r=e("./plot_api"),a=e("../lib"),i=e("../snapshot/helpers"),o=e("../snapshot/tosvg"),s=e("../snapshot/svgtoimg"),l={format:{valType:"enumerated",values:["png","jpeg","webp","svg"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}},u=/^data:image\/\w+;base64,/;t.exports=function(e,t){var n,c,f;function d(e){return!(e in t)||a.validate(t[e],l[e])}if(t=t||{},a.isPlainObject(e)?(n=e.data||[],c=e.layout||{},f=e.config||{}):(e=a.getGraphDiv(e),n=a.extendDeep([],e.data),c=a.extendDeep({},e.layout),f=e._context),!d("width")||!d("height"))throw new Error("Height and width should be pixel values.");if(!d("format"))throw new Error("Image format is not jpeg, png, svg or webp.");var p={};function h(e,n){return a.coerce(t,p,l,e,n)}var m=h("format"),v=h("width"),g=h("height"),y=h("scale"),b=h("setBackground"),x=h("imageDataOnly"),_=document.createElement("div");_.style.position="absolute",_.style.left="-5000px",document.body.appendChild(_);var w=a.extendFlat({},c);v&&(w.width=v),g&&(w.height=g);var T=a.extendFlat({},f,{staticPlot:!0,setBackground:b}),k=i.getRedrawFunc(_);function C(){return new Promise(function(e){setTimeout(e,i.getDelay(_._fullLayout))})}function E(){return new Promise(function(e,t){var n=o(_,m,y),i=_._fullLayout.width,l=_._fullLayout.height;if(r.purge(_),document.body.removeChild(_),"svg"===m)return e(x?n:"data:image/svg+xml,"+encodeURIComponent(n));var u=document.createElement("canvas");u.id=a.randstr(),s({format:m,width:i,height:l,scale:y,canvas:u,svg:n,promise:!0}).then(e).catch(t)})}return new Promise(function(e,t){r.plot(_,n,w,T).then(k).then(C).then(E).then(function(t){e(function(e){return x?e.replace(u,""):e}(t))}).catch(function(e){t(e)})})}},{"../lib":696,"../snapshot/helpers":831,"../snapshot/svgtoimg":833,"../snapshot/tosvg":835,"./plot_api":731}],738:[function(e,t,n){"use strict";var r=e("../lib"),a=e("../plots/plots"),i=e("./plot_schema"),o=e("./plot_config"),s=r.isPlainObject,l=Array.isArray,u=r.isArrayOrTypedArray;function c(e,t,n,a,i,o){o=o||[];for(var f=Object.keys(e),d=0;d<f.length;d++){var v=f[d];if("transforms"!==v){var g=o.slice();g.push(v);var y=e[v],b=t[v],x=m(n,v),_="info_array"===(x||{}).valType,w="colorscale"===(x||{}).valType,T=(x||{}).items;if(h(n,v))if(s(y)&&s(b))c(y,b,x,a,i,g);else if(_&&l(y)){y.length>b.length&&a.push(p("unused",i,g.concat(b.length)));var k,C,E,M,A,S=b.length,O=Array.isArray(T);if(O&&(S=Math.min(S,T.length)),2===x.dimensions)for(C=0;C<S;C++)if(l(y[C])){y[C].length>b[C].length&&a.push(p("unused",i,g.concat(C,b[C].length)));var P=b[C].length;for(k=0;k<(O?Math.min(P,T[C].length):P);k++)E=O?T[C][k]:T,M=y[C][k],A=b[C][k],r.validate(M,E)?A!==M&&A!==+M&&a.push(p("dynamic",i,g.concat(C,k),M,A)):a.push(p("value",i,g.concat(C,k),M))}else a.push(p("array",i,g.concat(C),y[C]));else for(C=0;C<S;C++)E=O?T[C]:T,M=y[C],A=b[C],r.validate(M,E)?A!==M&&A!==+M&&a.push(p("dynamic",i,g.concat(C),M,A)):a.push(p("value",i,g.concat(C),M))}else if(x.items&&!_&&l(y)){var R,L,D=T[Object.keys(T)[0]],I=[];for(R=0;R<b.length;R++){var z=b[R]._index||R;if((L=g.slice()).push(z),s(y[z])&&s(b[R])){I.push(z);var j=y[z],N=b[R];s(j)&&!1!==j.visible&&!1===N.visible?a.push(p("invisible",i,L)):c(j,N,D,a,i,L)}}for(R=0;R<y.length;R++)(L=g.slice()).push(R),s(y[R])?-1===I.indexOf(R)&&a.push(p("unused",i,L)):a.push(p("object",i,L,y[R]))}else!s(y)&&s(b)?a.push(p("object",i,g,y)):u(y)||!u(b)||_||w?v in t?r.validate(y,x)?"enumerated"===x.valType&&(x.coerceNumber&&y!==+b||y!==b)&&a.push(p("dynamic",i,g,y,b)):a.push(p("value",i,g,y)):a.push(p("unused",i,g,y)):a.push(p("array",i,g,y));else a.push(p("schema",i,g))}}return a}t.exports=function(e,t){var n,u,f=i.get(),d=[],h={_context:r.extendFlat({},o)};l(e)?(h.data=r.extendDeep([],e),n=e):(h.data=[],n=[],d.push(p("array","data"))),s(t)?(h.layout=r.extendDeep({},t),u=t):(h.layout={},u={},arguments.length>1&&d.push(p("object","layout"))),a.supplyDefaults(h);for(var m=h._fullData,v=n.length,g=0;g<v;g++){var y=n[g],b=["data",g];if(s(y)){var x=m[g],_=x.type,w=f.traces[_].attributes;w.type={valType:"enumerated",values:[_]},!1===x.visible&&!1!==y.visible&&d.push(p("invisible",b)),c(y,x,w,d,b);var T=y.transforms,k=x.transforms;if(T){l(T)||d.push(p("array",b,["transforms"])),b.push("transforms");for(var C=0;C<T.length;C++){var E=["transforms",C],M=T[C].type;if(s(T[C])){var A=f.transforms[M]?f.transforms[M].attributes:{};A.type={valType:"enumerated",values:Object.keys(f.transforms)},c(T[C],k[C],A,d,b,E)}else d.push(p("object",b,E))}}}else d.push(p("object",b))}var S=h._fullLayout,O=function(e,t){for(var n=e.layout.layoutAttributes,a=0;a<t.length;a++){var i=t[a],o=e.traces[i.type],s=o.layoutAttributes;s&&(i.subplot?r.extendFlat(n[o.attributes.subplot.dflt],s):r.extendFlat(n,s))}return n}(f,m);return c(u,S,O,d,"layout"),0===d.length?void 0:d};var f={object:function(e,t){return("layout"===e&&""===t?"The layout argument":"data"===e[0]&&""===t?"Trace "+e[1]+" in the data argument":d(e)+"key "+t)+" must be linked to an object container"},array:function(e,t){return("data"===e?"The data argument":d(e)+"key "+t)+" must be linked to an array container"},schema:function(e,t){return d(e)+"key "+t+" is not part of the schema"},unused:function(e,t,n){var r=s(n)?"container":"key";return d(e)+r+" "+t+" did not get coerced"},dynamic:function(e,t,n,r){return[d(e)+"key",t,"(set to '"+n+"')","got reset to","'"+r+"'","during defaults."].join(" ")},invisible:function(e,t){return(t?d(e)+"item "+t:"Trace "+e[1])+" got defaulted to be not visible"},value:function(e,t,n){return[d(e)+"key "+t,"is set to an invalid value ("+n+")"].join(" ")}};function d(e){return l(e)?"In data trace "+e[1]+", ":"In "+e+", "}function p(e,t,n,a,i){var o,s;n=n||"",l(t)?(o=t[0],s=t[1]):(o=t,s=null);var u=function(e){if(!l(e))return String(e);for(var t="",n=0;n<e.length;n++){var r=e[n];"number"==typeof r?t=t.substr(0,t.length-1)+"["+r+"]":t+=r,n<e.length-1&&(t+=".")}return t}(n),c=f[e](t,u,a,i);return r.log(c),{code:e,container:o,trace:s,path:n,astr:u,msg:c}}function h(e,t){var n=g(t),r=n.keyMinusId,a=n.id;return!!(r in e&&e[r]._isSubplotObj&&a)||t in e}function m(e,t){if(t in e)return e[t];var n=g(t);return e[n.keyMinusId]}var v=r.counterRegex("([a-z]+)");function g(e){var t=e.match(v);return{keyMinusId:t&&t[1],id:t&&t[2]}}},{"../lib":696,"../plots/plots":808,"./plot_config":732,"./plot_schema":733}],739:[function(e,t,n){"use strict";t.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"]}}}},{}],740:[function(e,t,n){"use strict";var r=e("../lib"),a=e("../plot_api/plot_template");t.exports=function(e,t,n){var i,o,s=n.name,l=n.inclusionAttr||"visible",u=t[s],c=r.isArrayOrTypedArray(e[s])?e[s]:[],f=t[s]=[],d=a.arrayTemplater(t,s,l);for(i=0;i<c.length;i++){var p=c[i];r.isPlainObject(p)?o=d.newItem(p):(o=d.newItem({}))[l]=!1,o._index=i,!1!==o[l]&&n.handleItemDefaults(p,o,t,n),f.push(o)}var h=d.defaultItems();for(i=0;i<h.length;i++)(o=h[i])._index=f.length,n.handleItemDefaults({},o,t,n,{}),f.push(o);if(r.isArrayOrTypedArray(u)){var m=Math.min(u.length,f.length);for(i=0;i<m;i++)r.relinkPrivateKeys(f[i],u[i])}return f}},{"../lib":696,"../plot_api/plot_template":734}],741:[function(e,t,n){"use strict";var r=e("../components/fx/attributes");t.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot"},ids:{valType:"data_array",editType:"calc"},customdata:{valType:"data_array",editType:"calc"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:r.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"}}},{"../components/fx/attributes":604}],742:[function(e,t,n){"use strict";t.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],743:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),a=e("../../lib"),i=e("../../constants/numerical").FP_SAFE;function o(e,t){var n,r,i=[],o=s(t),u=l(e,t),c=u.min,f=u.max;if(0===c.length||0===f.length)return a.simpleMap(t.range,t.r2l);var d=c[0].val,p=f[0].val;for(n=1;n<c.length&&d===p;n++)d=Math.min(d,c[n].val);for(n=1;n<f.length&&d===p;n++)p=Math.max(p,f[n].val);var h=!1;if(t.range){var m=a.simpleMap(t.range,t.r2l);h=m[1]<m[0]}"reversed"===t.autorange&&(h=!0,t.autorange=!0);var v,g,y,b,x,_,w=t.rangemode,T="tozero"===w,k="nonnegative"===w,C=t._length,E=C/10,M=0;for(n=0;n<c.length;n++)for(v=c[n],r=0;r<f.length;r++)g=f[r],(_=g.val-v.val)>0&&((x=C-o(v)-o(g))>E?_/x>M&&(y=v,b=g,M=_/x):_/C>M&&(y={val:v.val,pad:0},b={val:g.val,pad:0},M=_/C));if(d===p){var A=d-1,S=d+1;if(T)if(0===d)i=[0,1];else{var O=(d>0?f:c).reduce(function(e,t){return Math.max(e,o(t))},0),P=d/(1-Math.min(.5,O/C));i=d>0?[0,P]:[P,0]}else i=k?[Math.max(0,A),Math.max(1,S)]:[A,S]}else T?(y.val>=0&&(y={val:0,pad:0}),b.val<=0&&(b={val:0,pad:0})):k&&(y.val-M*o(y)<0&&(y={val:0,pad:0}),b.val<=0&&(b={val:1,pad:0})),M=(b.val-y.val)/(C-o(y)-o(b)),i=[y.val-M*o(y),b.val+M*o(b)];return h&&i.reverse(),a.simpleMap(i,t.l2r||Number)}function s(e){var t=e._length/20;return"domain"===e.constrain&&e._inputDomain&&(t*=(e._inputDomain[1]-e._inputDomain[0])/(e.domain[1]-e.domain[0])),function(e){return e.pad+(e.extrapad?t:0)}}function l(e,t){var n,r,a,i=t._id,o=e._fullData,s=e._fullLayout,l=[],f=[];function d(e,t){for(n=0;n<t.length;n++){var o=e[t[n]],s=(o._extremes||{})[i];if(!0===o.visible&&s){for(r=0;r<s.min.length;r++)a=s.min[r],u(l,a.val,a.pad,{extrapad:a.extrapad});for(r=0;r<s.max.length;r++)a=s.max[r],c(f,a.val,a.pad,{extrapad:a.extrapad})}}}return d(o,t._traceIndices),d(s.annotations||[],t._annIndices||[]),d(s.shapes||[],t._shapeIndices||[]),{min:l,max:f}}function u(e,t,n,r){f(e,t,n,r,p)}function c(e,t,n,r){f(e,t,n,r,h)}function f(e,t,n,r,a){for(var i=r.tozero,o=r.extrapad,s=!0,l=0;l<e.length&&s;l++){var u=e[l];if(a(u.val,t)&&u.pad>=n&&(u.extrapad||!o)){s=!1;break}a(t,u.val)&&u.pad<=n&&(o||!u.extrapad)&&(e.splice(l,1),l--)}if(s){var c=i&&0===t;e.push({val:t,pad:c?0:n,extrapad:!c&&o})}}function d(e){return r(e)&&Math.abs(e)<i}function p(e,t){return e<=t}function h(e,t){return e>=t}t.exports={getAutoRange:o,makePadFn:s,doAutoRange:function(e,t){var n;if(t._length||t.setScale(),t.autorange&&(t.range=o(e,t),t._r=t.range.slice(),t._rl=a.simpleMap(t._r,t.r2l),(n=t._input).range=t.range.slice(),n.autorange=t.autorange),t._anchorAxis&&t._anchorAxis.rangeslider){var r=t._anchorAxis.rangeslider[t._name];r&&"auto"===r.rangemode&&(r.range=o(e,t)),(n=t._anchorAxis._input).rangeslider[t._name]=a.extendFlat({},r)}},findExtremes:function(e,t,n){n||(n={}),e._m||e.setScale();var a,o,s,l,f,p,h,m,v,g=[],y=[],b=t.length,x=n.padded||!1,_=n.tozero&&("linear"===e.type||"-"===e.type),w="log"===e.type,T=!1;function k(e){if(Array.isArray(e))return T=!0,function(t){return Math.max(Number(e[t]||0),0)};var t=Math.max(Number(e||0),0);return function(){return t}}var C=k((e._m>0?n.ppadplus:n.ppadminus)||n.ppad||0),E=k((e._m>0?n.ppadminus:n.ppadplus)||n.ppad||0),M=k(n.vpadplus||n.vpad),A=k(n.vpadminus||n.vpad);if(!T){if(m=1/0,v=-1/0,w)for(a=0;a<b;a++)(o=t[a])<m&&o>0&&(m=o),o>v&&o<i&&(v=o);else for(a=0;a<b;a++)(o=t[a])<m&&o>-i&&(m=o),o>v&&o<i&&(v=o);t=[m,v],b=2}var S={tozero:_,extrapad:x};function O(n){s=t[n],r(s)&&(p=C(n),h=E(n),m=s-A(n),v=s+M(n),w&&m<v/10&&(m=v/10),l=e.c2l(m),f=e.c2l(v),_&&(l=Math.min(0,l),f=Math.max(0,f)),d(l)&&u(g,l,h,S),d(f)&&c(y,f,p,S))}var P=Math.min(6,b);for(a=0;a<P;a++)O(a);for(a=b-1;a>=P;a--)O(a);return{min:g,max:y}},concatExtremes:l}},{"../../constants/numerical":673,"../../lib":696,"fast-isnumeric":214}],744:[function(e,t,n){"use strict";var r=e("d3"),a=e("fast-isnumeric"),i=e("../../plots/plots"),o=e("../../registry"),s=e("../../lib"),l=e("../../lib/svg_text_utils"),u=e("../../components/titles"),c=e("../../components/color"),f=e("../../components/drawing"),d=e("./layout_attributes"),p=e("./clean_ticks"),h=e("../../constants/numerical"),m=h.ONEAVGYEAR,v=h.ONEAVGMONTH,g=h.ONEDAY,y=h.ONEHOUR,b=h.ONEMIN,x=h.ONESEC,_=h.MINUS_SIGN,w=h.BADNUM,T=e("../../constants/alignment").MID_SHIFT,k=e("../../constants/alignment").LINE_SPACING,C=t.exports={};C.setConvert=e("./set_convert");var E=e("./axis_autotype"),M=e("./axis_ids");C.id2name=M.id2name,C.name2id=M.name2id,C.cleanId=M.cleanId,C.list=M.list,C.listIds=M.listIds,C.getFromId=M.getFromId,C.getFromTrace=M.getFromTrace;var A=e("./autorange");C.getAutoRange=A.getAutoRange,C.findExtremes=A.findExtremes,C.coerceRef=function(e,t,n,r,a,i){var o=r.charAt(r.length-1),l=n._fullLayout._subplots[o+"axis"],u=r+"ref",c={};return a||(a=l[0]||i),i||(i=a),c[u]={valType:"enumerated",values:l.concat(i?[i]:[]),dflt:a},s.coerce(e,t,c,u)},C.coercePosition=function(e,t,n,r,a,i){var o,l;if("paper"===r||"pixel"===r)o=s.ensureNumber,l=n(a,i);else{var u=C.getFromId(t,r);i=u.fraction2r(i),l=n(a,i),o=u.cleanPos}e[a]=o(l)},C.cleanPosition=function(e,t,n){var r="paper"===n||"pixel"===n?s.ensureNumber:C.getFromId(t,n).cleanPos;return r(e)};var S=C.getDataConversions=function(e,t,n,r){var a,i="x"===n||"y"===n||"z"===n?n:r;if(Array.isArray(i)){if(a={type:E(r),_categories:[]},C.setConvert(a),"category"===a.type)for(var o=0;o<r.length;o++)a.d2c(r[o])}else a=C.getFromTrace(e,t,i);return a?{d2c:a.d2c,c2d:a.c2d}:"ids"===i?{d2c:P,c2d:P}:{d2c:O,c2d:O}};function O(e){return+e}function P(e){return String(e)}C.getDataToCoordFunc=function(e,t,n,r){return S(e,t,n,r).d2c},C.counterLetter=function(e){var t=e.charAt(0);return"x"===t?"y":"y"===t?"x":void 0},C.minDtick=function(e,t,n,r){-1===["log","category"].indexOf(e.type)&&r?void 0===e._minDtick?(e._minDtick=t,e._forceTick0=n):e._minDtick&&((e._minDtick/t+1e-6)%1<2e-6&&((n-e._forceTick0)/t%1+1.000001)%1<2e-6?(e._minDtick=t,e._forceTick0=n):((t/e._minDtick+1e-6)%1>2e-6||((n-e._forceTick0)/e._minDtick%1+1.000001)%1>2e-6)&&(e._minDtick=0)):e._minDtick=0},C.saveRangeInitial=function(e,t){for(var n=C.list(e,"",!0),r=!1,a=0;a<n.length;a++){var i=n[a],o=void 0===i._rangeInitial,s=o||!(i.range[0]===i._rangeInitial[0]&&i.range[1]===i._rangeInitial[1]);(o&&!1===i.autorange||t&&s)&&(i._rangeInitial=i.range.slice(),r=!0)}return r},C.saveShowSpikeInitial=function(e,t){for(var n=C.list(e,"",!0),r=!1,a="on",i=0;i<n.length;i++){var o=n[i],s=void 0===o._showSpikeInitial,l=s||!(o.showspikes===o._showspikes);(s||t&&l)&&(o._showSpikeInitial=o.showspikes,r=!0),"on"!==a||o.showspikes||(a="off")}return e._fullLayout._cartesianSpikesEnabled=a,r},C.autoBin=function(e,t,n,r,i,o){var l,u=s.aggNums(Math.min,null,e),c=s.aggNums(Math.max,null,e);if("category"===t.type)return{start:u-.5,end:c+.5,size:Math.max(1,Math.round(o)||1),_dataSpan:c-u};if(i||(i=t.calendar),l="log"===t.type?{type:"linear",range:[u,c]}:{type:t.type,range:s.simpleMap([u,c],t.c2r,0,i),calendar:i},C.setConvert(l),o=o&&p.dtick(o,l.type))l.dtick=o,l.tick0=p.tick0(void 0,l.type,i);else{var f;if(n)f=(c-u)/n;else{var d=s.distinctVals(e),h=Math.pow(10,Math.floor(Math.log(d.minDiff)/Math.LN10)),m=h*s.roundUp(d.minDiff/h,[.9,1.9,4.9,9.9],!0);f=Math.max(m,2*s.stdev(e)/Math.pow(e.length,r?.25:.4)),a(f)||(f=1)}C.autoTicks(l,f)}var v,y,b=l.dtick,x=C.tickIncrement(C.tickFirst(l),b,"reverse",i);if("number"==typeof b)x=function(e,t,n,r,i){var o=0,s=0,l=0,u=0;function c(t){return(1+100*(t-e)/n.dtick)%100<2}for(var f=0;f<t.length;f++)t[f]%1==0?l++:a(t[f])||u++,c(t[f])&&o++,c(t[f]+n.dtick/2)&&s++;var d=t.length-u;if(l===d&&"date"!==n.type)n.dtick<1?e=r-.5*n.dtick:(e-=.5)+n.dtick<r&&(e+=n.dtick);else if(s<.1*d&&(o>.3*d||c(r)||c(i))){var p=n.dtick/2;e+=e+p<r?p:-p}return e}(x,e,l,u,c),y=1+Math.floor((c-x)/b),v=x+y*b;else for("M"===l.dtick.charAt(0)&&(x=function(e,t,n,r,a){var i=s.findExactDates(t,a);if(i.exactDays>.8){var o=Number(n.substr(1));i.exactYears>.8&&o%12==0?e=C.tickIncrement(e,"M6","reverse")+1.5*g:i.exactMonths>.8?e=C.tickIncrement(e,"M1","reverse")+15.5*g:e-=g/2;var l=C.tickIncrement(e,n);if(l<=r)return l}return e}(x,e,b,u,i)),v=x,y=0;v<=c;)v=C.tickIncrement(v,b,!1,i),y++;return{start:t.c2r(x,0,i),end:t.c2r(v,0,i),size:b,_dataSpan:c-u}},C.prepTicks=function(e){var t=s.simpleMap(e.range,e.r2l);if("auto"===e.tickmode||!e.dtick){var n,r=e.nticks;r||("category"===e.type?(n=e.tickfont?1.2*(e.tickfont.size||12):15,r=e._length/n):(n="y"===e._id.charAt(0)?40:80,r=s.constrain(e._length/n,4,9)+1),"radialaxis"===e._name&&(r*=2)),"array"===e.tickmode&&(r*=100),C.autoTicks(e,Math.abs(t[1]-t[0])/r),e._minDtick>0&&e.dtick<2*e._minDtick&&(e.dtick=e._minDtick,e.tick0=e.l2r(e._forceTick0))}e.tick0||(e.tick0="date"===e.type?"2000-01-01":0),"date"===e.type&&e.dtick<.1&&(e.dtick=.1),B(e)},C.calcTicks=function(e){C.prepTicks(e);var t=s.simpleMap(e.range,e.r2l);if("array"===e.tickmode)return function(e){var t,n,r=e.tickvals,a=e.ticktext,i=new Array(r.length),o=s.simpleMap(e.range,e.r2l),l=1.0001*o[0]-1e-4*o[1],u=1.0001*o[1]-1e-4*o[0],c=Math.min(l,u),f=Math.max(l,u),d=0;Array.isArray(a)||(a=[]);var p="category"===e.type?e.d2l_noadd:e.d2l;for("log"===e.type&&"L"!==String(e.dtick).charAt(0)&&(e.dtick="L"+Math.pow(10,Math.floor(Math.min(e.range[0],e.range[1]))-1)),n=0;n<r.length;n++)(t=p(r[n]))>c&&t<f&&(void 0===a[n]?i[d]=C.tickText(e,t):i[d]=V(e,t,String(a[n])),d++);return d<r.length&&i.splice(d,r.length-d),i}(e);e._tmin=C.tickFirst(e);var n=1.0001*t[0]-1e-4*t[1],r=1.0001*t[1]-1e-4*t[0],a=t[1]<t[0];if(e._tmin<n!==a)return[];var i=[];"category"===e.type&&(r=a?Math.max(-.5,r):Math.min(e._categories.length-.5,r));for(var o=null,l=Math.max(1e3,e._length||0),u=e._tmin;(a?u>=r:u<=r)&&!(i.length>l||u===o);u=C.tickIncrement(u,e.dtick,a,e.calendar))o=u,i.push(u);$(e)&&360===Math.abs(t[1]-t[0])&&i.pop(),e._tmax=i[i.length-1],e._prevDateHead="",e._inCalcTicks=!0;for(var c=new Array(i.length),f=0;f<i.length;f++)c[f]=C.tickText(e,i[f]);return e._inCalcTicks=!1,c};var R=[2,5,10],L=[1,2,3,6,12],D=[1,2,5,10,15,30],I=[1,2,3,7,14],z=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],j=[-.301,0,.301,.699,1],N=[15,30,45,90,180];function F(e,t,n){return t*s.roundUp(e/t,n)}function B(e){var t=e.dtick;if(e._tickexponent=0,a(t)||"string"==typeof t||(t=1),"category"===e.type&&(e._tickround=null),"date"===e.type){var n=e.r2l(e.tick0),r=e.l2r(n).replace(/(^-|i)/g,""),i=r.length;if("M"===String(t).charAt(0))i>10||"01-01"!==r.substr(5)?e._tickround="d":e._tickround=+t.substr(1)%12==0?"y":"m";else if(t>=g&&i<=10||t>=15*g)e._tickround="d";else if(t>=b&&i<=16||t>=y)e._tickround="M";else if(t>=x&&i<=19||t>=b)e._tickround="S";else{var o=e.l2r(n+t).replace(/^-/,"").length;e._tickround=Math.max(i,o)-20,e._tickround<0&&(e._tickround=4)}}else if(a(t)||"L"===t.charAt(0)){var s=e.range.map(e.r2d||Number);a(t)||(t=Number(t.substr(1))),e._tickround=2-Math.floor(Math.log(t)/Math.LN10+.01);var l=Math.max(Math.abs(s[0]),Math.abs(s[1])),u=Math.floor(Math.log(l)/Math.LN10+.01);Math.abs(u)>3&&(G(e.exponentformat)&&!H(u)?e._tickexponent=3*Math.round((u-1)/3):e._tickexponent=u)}else e._tickround=null}function V(e,t,n){var r=e.tickfont||{};return{x:t,dx:0,dy:0,text:n||"",fontSize:r.size,font:r.family,fontColor:r.color}}C.autoTicks=function(e,t){var n;function r(e){return Math.pow(e,Math.floor(Math.log(t)/Math.LN10))}if("date"===e.type){e.tick0=s.dateTick0(e.calendar);var i=2*t;i>m?(t/=m,n=r(10),e.dtick="M"+12*F(t,n,R)):i>v?(t/=v,e.dtick="M"+F(t,1,L)):i>g?(e.dtick=F(t,g,I),e.tick0=s.dateTick0(e.calendar,!0)):i>y?e.dtick=F(t,y,L):i>b?e.dtick=F(t,b,D):i>x?e.dtick=F(t,x,D):(n=r(10),e.dtick=F(t,n,R))}else if("log"===e.type){e.tick0=0;var o=s.simpleMap(e.range,e.r2l);if(t>.7)e.dtick=Math.ceil(t);else if(Math.abs(o[1]-o[0])<1){var l=1.5*Math.abs((o[1]-o[0])/t);t=Math.abs(Math.pow(10,o[1])-Math.pow(10,o[0]))/l,n=r(10),e.dtick="L"+F(t,n,R)}else e.dtick=t>.3?"D2":"D1"}else"category"===e.type?(e.tick0=0,e.dtick=Math.ceil(Math.max(t,1))):$(e)?(e.tick0=0,n=1,e.dtick=F(t,n,N)):(e.tick0=0,n=r(10),e.dtick=F(t,n,R));if(0===e.dtick&&(e.dtick=1),!a(e.dtick)&&"string"!=typeof e.dtick){var u=e.dtick;throw e.dtick=1,"ax.dtick error: "+String(u)}},C.tickIncrement=function(e,t,n,i){var o=n?-1:1;if(a(t))return e+o*t;var l=t.charAt(0),u=o*Number(t.substr(1));if("M"===l)return s.incrementMonth(e,u,i);if("L"===l)return Math.log(Math.pow(10,e)+u)/Math.LN10;if("D"===l){var c="D2"===t?j:z,f=e+.01*o,d=s.roundUp(s.mod(f,1),c,n);return Math.floor(f)+Math.log(r.round(Math.pow(10,d),1))/Math.LN10}throw"unrecognized dtick "+String(t)},C.tickFirst=function(e){var t=e.r2l||Number,n=s.simpleMap(e.range,t),i=n[1]<n[0],o=i?Math.floor:Math.ceil,l=1.0001*n[0]-1e-4*n[1],u=e.dtick,c=t(e.tick0);if(a(u)){var f=o((l-c)/u)*u+c;return"category"===e.type&&(f=s.constrain(f,0,e._categories.length-1)),f}var d=u.charAt(0),p=Number(u.substr(1));if("M"===d){for(var h,m,v,g=0,y=c;g<10;){if(((h=C.tickIncrement(y,u,i,e.calendar))-l)*(y-l)<=0)return i?Math.min(y,h):Math.max(y,h);m=(l-(y+h)/2)/(h-y),v=d+(Math.abs(Math.round(m))||1)*p,y=C.tickIncrement(y,v,m<0?!i:i,e.calendar),g++}return s.error("tickFirst did not converge",e),y}if("L"===d)return Math.log(o((Math.pow(10,l)-c)/p)*p+c)/Math.LN10;if("D"===d){var b="D2"===u?j:z,x=s.roundUp(s.mod(l,1),b,i);return Math.floor(l)+Math.log(r.round(Math.pow(10,x),1))/Math.LN10}throw"unrecognized dtick "+String(u)},C.tickText=function(e,t,n){var r,i,o=V(e,t),l="array"===e.tickmode,u=n||l,c="category"===e.type?e.d2l_noadd:e.d2l;if(l&&Array.isArray(e.ticktext)){var f=s.simpleMap(e.range,e.r2l),d=Math.abs(f[1]-f[0])/1e4;for(i=0;i<e.ticktext.length&&!(Math.abs(t-c(e.tickvals[i]))<d);i++);if(i<e.ticktext.length)return o.text=String(e.ticktext[i]),o}function p(r){var a;return void 0===r||(n?"none"===r:(a={first:e._tmin,last:e._tmax}[r],"all"!==r&&t!==a))}return r=n?"never":"none"!==e.exponentformat&&p(e.showexponent)?"hide":"","date"===e.type?function(e,t,n,r){var i=e._tickround,o=n&&e.hoverformat||C.getTickFormat(e);r&&(i=a(i)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[i]);var l,u=s.formatDate(t.x,o,i,e._dateFormat,e.calendar,e._extraFormat),c=u.indexOf("\n");-1!==c&&(l=u.substr(c+1),u=u.substr(0,c)),r&&("00:00:00"===u||"00:00"===u?(u=l,l=""):8===u.length&&(u=u.replace(/:00$/,""))),l&&(n?"d"===i?u+=", "+l:u=l+(u?", "+u:""):e._inCalcTicks&&l===e._prevDateHead||(u+="<br>"+l,e._prevDateHead=l)),t.text=u}(e,o,n,u):"log"===e.type?function(e,t,n,r,i){var o=e.dtick,l=t.x,u=e.tickformat,c="string"==typeof o&&o.charAt(0);if("never"===i&&(i=""),r&&"L"!==c&&(o="L3",c="L"),u||"L"===c)t.text=W(Math.pow(10,l),e,i,r);else if(a(o)||"D"===c&&s.mod(l+.01,1)<.1){var f=Math.round(l),d=Math.abs(f),p=e.exponentformat;"power"===p||G(p)&&H(f)?(t.text=0===f?1:1===f?"10":"10<sup>"+(f>1?"":_)+d+"</sup>",t.fontSize*=1.25):("e"===p||"E"===p)&&d>2?t.text="1"+p+(f>0?"+":_)+d:(t.text=W(Math.pow(10,l),e,"","fakehover"),"D1"===o&&"y"===e._id.charAt(0)&&(t.dy-=t.fontSize/6))}else{if("D"!==c)throw"unrecognized dtick "+String(o);t.text=String(Math.round(Math.pow(10,s.mod(l,1)))),t.fontSize*=.75}if("D1"===e.dtick){var h=String(t.text).charAt(0);"0"!==h&&"1"!==h||("y"===e._id.charAt(0)?t.dx-=t.fontSize/4:(t.dy+=t.fontSize/2,t.dx+=(e.range[1]>e.range[0]?1:-1)*t.fontSize*(l<0?.5:.25)))}}(e,o,0,u,r):"category"===e.type?function(e,t){var n=e._categories[Math.round(t.x)];void 0===n&&(n=""),t.text=String(n)}(e,o):$(e)?function(e,t,n,r,a){if("radians"!==e.thetaunit||n)t.text=W(t.x,e,a,r);else{var i=t.x/180;if(0===i)t.text="0";else{var o=function(e){function t(e,t){return Math.abs(e-t)<=1e-6}var n=function(e){for(var n=1;!t(Math.round(e*n)/n,e);)n*=10;return n}(e),r=e*n,a=Math.abs(function e(n,r){return t(r,0)?n:e(r,n%r)}(r,n));return[Math.round(r/a),Math.round(n/a)]}(i);if(o[1]>=100)t.text=W(s.deg2rad(t.x),e,a,r);else{var l=t.x<0;1===o[1]?1===o[0]?t.text="":t.text=o[0]+"":t.text=["<sup>",o[0],"</sup>","","<sub>",o[1],"</sub>",""].join(""),l&&(t.text=_+t.text)}}}}(e,o,n,u,r):function(e,t,n,r,a){"never"===a?a="":"all"===e.showexponent&&Math.abs(t.x/e.dtick)<1e-6&&(a="hide"),t.text=W(t.x,e,a,r)}(e,o,0,u,r),e.tickprefix&&!p(e.showtickprefix)&&(o.text=e.tickprefix+o.text),e.ticksuffix&&!p(e.showticksuffix)&&(o.text+=e.ticksuffix),o},C.hoverLabelText=function(e,t,n){if(n!==w&&n!==t)return C.hoverLabelText(e,t)+" - "+C.hoverLabelText(e,n);var r="log"===e.type&&t<=0,a=C.tickText(e,e.c2l(r?-t:t),"hover").text;return r?0===t?"0":_+a:a};var U=["f","p","n","","m","","k","M","G","T"];function G(e){return"SI"===e||"B"===e}function H(e){return e>14||e<-15}function W(e,t,n,r){var i=e<0,o=t._tickround,l=n||t.exponentformat||"B",u=t._tickexponent,c=C.getTickFormat(t),f=t.separatethousands;if(r){var d={exponentformat:l,dtick:"none"===t.showexponent?t.dtick:a(e)&&Math.abs(e)||1,range:"none"===t.showexponent?t.range.map(t.r2d):[0,e||1]};B(d),o=(Number(d._tickround)||0)+4,u=d._tickexponent,t.hoverformat&&(c=t.hoverformat)}if(c)return t._numFormat(c)(e).replace(/-/g,_);var p,h=Math.pow(10,-o)/2;if("none"===l&&(u=0),(e=Math.abs(e))<h)e="0",i=!1;else{if(e+=h,u&&(e*=Math.pow(10,-u),o+=u),0===o)e=String(Math.floor(e));else if(o<0){e=(e=String(Math.round(e))).substr(0,e.length+o);for(var m=o;m<0;m++)e+="0"}else{var v=(e=String(e)).indexOf(".")+1;v&&(e=e.substr(0,v+o).replace(/\.?0+$/,""))}e=s.numSeparate(e,t._separators,f)}return u&&"hide"!==l&&(G(l)&&H(u)&&(l="power"),p=u<0?_+-u:"power"!==l?"+"+u:String(u),"e"===l||"E"===l?e+=l+p:"power"===l?e+="10<sup>"+p+"</sup>":"B"===l&&9===u?e+="B":G(l)&&(e+=U[u/3+5])),i?_+e:e}function q(e,t){var n=e.l2p(t);return n>1&&n<e._length-1}function Y(e,t){for(var n=0;n<t.length;n++)-1===e.indexOf(t[n])&&e.push(t[n])}function X(e,t,n){var r,a,i=[],o=[],l=e.layout;for(r=0;r<t.length;r++)i.push(C.getFromId(e,t[r]));for(r=0;r<n.length;r++)o.push(C.getFromId(e,n[r]));var u=Object.keys(d),c=["anchor","domain","overlaying","position","side","tickangle","editType"],f=["linear","log"];for(r=0;r<u.length;r++){var p=u[r],h=i[0][p],m=o[0][p],v=!0,g=!1,y=!1;if("_"!==p.charAt(0)&&"function"!=typeof h&&-1===c.indexOf(p)){for(a=1;a<i.length&&v;a++){var b=i[a][p];"type"===p&&-1!==f.indexOf(h)&&-1!==f.indexOf(b)&&h!==b?g=!0:b!==h&&(v=!1)}for(a=1;a<o.length&&v;a++){var x=o[a][p];"type"===p&&-1!==f.indexOf(m)&&-1!==f.indexOf(x)&&m!==x?y=!0:o[a][p]!==m&&(v=!1)}v&&(g&&(l[i[0]._name].type="linear"),y&&(l[o[0]._name].type="linear"),Z(l,p,i,o,e._fullLayout._dfltTitle))}}for(r=0;r<e._fullLayout.annotations.length;r++){var _=e._fullLayout.annotations[r];-1!==t.indexOf(_.xref)&&-1!==n.indexOf(_.yref)&&s.swapAttrs(l.annotations[r],["?"])}}function Z(e,t,n,r,a){var i,o=s.nestedProperty,l=o(e[n[0]._name],t).get(),u=o(e[r[0]._name],t).get();for("title"===t&&(l===a.x&&(l=a.y),u===a.y&&(u=a.x)),i=0;i<n.length;i++)o(e,n[i]._name+"."+t).set(u);for(i=0;i<r.length;i++)o(e,r[i]._name+"."+t).set(l)}function $(e){return"angularaxis"===e._id}C.getTickFormat=function(e){var t,n,r;function a(e){return"string"!=typeof e?e:Number(e.replace("M",""))*v}function i(e,t){var n=["L","D"];if(typeof e==typeof t){if("number"==typeof e)return e-t;var r=n.indexOf(e.charAt(0)),a=n.indexOf(t.charAt(0));return r===a?Number(e.replace(/(L|D)/g,""))-Number(t.replace(/(L|D)/g,"")):r-a}return"number"==typeof e?1:-1}function o(e,t,n){var r=n||function(e){return e},a=t[0],i=t[1];return(!a&&"number"!=typeof a||r(a)<=r(e))&&(!i&&"number"!=typeof i||r(i)>=r(e))}function s(e,t){var n=null===t[0],r=null===t[1],a=i(e,t[0])>=0,o=i(e,t[1])<=0;return(n||a)&&(r||o)}if(e.tickformatstops&&e.tickformatstops.length>0)switch(e.type){case"date":case"linear":for(t=0;t<e.tickformatstops.length;t++)if((r=e.tickformatstops[t]).enabled&&o(e.dtick,r.dtickrange,a)){n=r;break}break;case"log":for(t=0;t<e.tickformatstops.length;t++)if((r=e.tickformatstops[t]).enabled&&s(e.dtick,r.dtickrange)){n=r;break}}return n?n.value:e.tickformat},C.getSubplots=function(e,t){var n=e._fullLayout._subplots,r=n.cartesian.concat(n.gl2d||[]),a=t?C.findSubplotsWithAxis(r,t):r;return a.sort(function(e,t){var n=e.substr(1).split("y"),r=t.substr(1).split("y");return n[0]===r[0]?+n[1]-+r[1]:+n[0]-+r[0]}),a},C.findSubplotsWithAxis=function(e,t){for(var n=new RegExp("x"===t._id.charAt(0)?"^"+t._id+"y":t._id+"$"),r=[],a=0;a<e.length;a++){var i=e[a];n.test(i)&&r.push(i)}return r},C.makeClipPaths=function(e){var t=e._fullLayout;if(!t._hasOnlyLargeSploms){var n,a,i={_offset:0,_length:t.width,_id:""},o={_offset:0,_length:t.height,_id:""},s=C.list(e,"x",!0),l=C.list(e,"y",!0),u=[];for(n=0;n<s.length;n++)for(u.push({x:s[n],y:o}),a=0;a<l.length;a++)0===n&&u.push({x:i,y:l[a]}),u.push({x:s[n],y:l[a]});var c=t._clips.selectAll(".axesclip").data(u,function(e){return e.x._id+e.y._id});c.enter().append("clipPath").classed("axesclip",!0).attr("id",function(e){return"clip"+t._uid+e.x._id+e.y._id}).append("rect"),c.exit().remove(),c.each(function(e){r.select(this).select("rect").attr({x:e.x._offset||0,y:e.y._offset||0,width:e.x._length||1,height:e.y._length||1})})}},C.doTicks=function(e,t,n){var r=e._fullLayout;"redraw"===t&&r._paper.selectAll("g.subplot").each(function(e){var t=e[0],n=r._plots[t],a=n.xaxis,i=n.yaxis;n.xaxislayer.selectAll("."+a._id+"tick").remove(),n.yaxislayer.selectAll("."+i._id+"tick").remove(),n.gridlayer&&n.gridlayer.selectAll("path").remove(),n.zerolinelayer&&n.zerolinelayer.selectAll("path").remove(),r._infolayer.select(".g-"+a._id+"title").remove(),r._infolayer.select(".g-"+i._id+"title").remove()});var a=t&&"redraw"!==t?t:C.listIds(e);s.syncOrAsync(a.map(function(t){return function(){if(t){var r=C.doTicksSingle(e,t,n),a=C.getFromId(e,t);return a._r=a.range.slice(),a._rl=s.simpleMap(a._r,a.r2l),r}}}))},C.doTicksSingle=function(e,t,n){var o,d=e._fullLayout,p=!1;s.isPlainObject(t)?(o=t,p=!0):o=C.getFromId(e,t),o.setScale();var h,m,v,g,y,b,x=o._id,_=x.charAt(0),w=C.counterLetter(x),E=o._vals=C.calcTicks(o),A=function(e){return[e.text,e.x,o.mirror,e.font,e.fontSize,e.fontColor].join("_")},S=x+"tick",O=x+"grid",P=x+"zl",R=(o.linewidth||1)/2,L="outside"===o.ticks?o.ticklen:0,D=0,I=f.crispRound(e,o.gridwidth,1),z=f.crispRound(e,o.zerolinewidth,I),j=f.crispRound(e,o.tickwidth,1);if(o._counterangle&&"outside"===o.ticks){var N=o._counterangle*Math.PI/180;L=o.ticklen*Math.cos(N)+1,D=o.ticklen*Math.sin(N)}if(o.showticklabels&&("outside"===o.ticks||o.showline)&&(L+=.2*o.tickfont.size),"x"===_)h=["bottom","top"],m=o._transfn||function(e){return"translate("+(o._offset+o.l2p(e.x))+",0)"},v=function(e,t){if(o._counterangle){var n=o._counterangle*Math.PI/180;return"M0,"+e+"l"+Math.sin(n)*t+","+Math.cos(n)*t}return"M0,"+e+"v"+t};else if("y"===_)h=["left","right"],m=o._transfn||function(e){return"translate(0,"+(o._offset+o.l2p(e.x))+")"},v=function(e,t){if(o._counterangle){var n=o._counterangle*Math.PI/180;return"M"+e+",0l"+Math.cos(n)*t+","+-Math.sin(n)*t}return"M"+e+",0h"+t};else{if(!$(o))return void s.warn("Unrecognized doTicks axis:",x);h=["left","right"],m=o._transfn,v=function(e,t){return"M"+e+",0h"+t}}var F=o.side||h[0],B=[-1,1,F===h[1]?1:-1];if("inside"!==o.ticks==("x"===_)&&(B=B.map(function(e){return-e})),o.visible){o._tickFilter&&(E=E.filter(o._tickFilter));var V=o._valsClipped=$(o)?E:E.filter(function(e){return q(o,e.x)});if(p){if(J(o._axislayer,v(o._pos+R*B[2],B[2]*o.ticklen)),o._counteraxis){var U={gridlayer:o._gridlayer,zerolinelayer:o._zerolinelayer};te(U,o._counteraxis)}return Q(o._axislayer,o._pos)}if(d._has("cartesian")){var G={};(g=C.getSubplots(e,o)).map(function(e){var t=d._plots[e],n=t[w+"axis"],r=n._mainAxis._id;G[r]||(G[r]=1,te(t,n))});var H=o._mainSubplot,W=d._plots[H],Y=[];if(o.ticks){var X=B[2],Z=v(o._mainLinePosition+R*X,X*o.ticklen);o._anchorAxis&&o.mirror&&!0!==o.mirror&&(Z+=v(o._mainMirrorPosition-R*X,-X*o.ticklen)),J(W[_+"axislayer"],Z),Y=Object.keys(o._linepositions||{})}Y.map(function(e){var t=d._plots[e],n=t[_+"axislayer"],r=o._linepositions[e]||[];function a(e){var t=B[e];return v(r[e]+R*t,t*o.ticklen)}J(n,a(0)+a(1))});var K=W[_+"axislayer"];return Q(K,o._mainLinePosition)}}function J(e,t){var n=e.selectAll("path."+S).data("inside"===o.ticks?V:E,A);t&&o.ticks?(n.enter().append("path").classed(S,1).classed("ticks",1).classed("crisp",1).call(c.stroke,o.tickcolor).style("stroke-width",j+"px").attr("d",t),n.attr("transform",m),n.exit().remove()):n.remove()}function Q(t,n){if(y=t.selectAll("g."+S).data(E,A),!a(n))return y.remove(),void ee();if(!o.showticklabels)return y.remove(),ee(),void P();var u,c,p,h,v;"x"===_?(u=function(e){return e.dx+D*v},h=n+(L+R)*(v="bottom"===F?1:-1),c=function(e){return e.dy+h+e.fontSize*("bottom"===F?1:-.2)},p=function(e){return a(e)&&0!==e&&180!==e?e*v<0?"end":"start":"middle"}):"y"===_?(v="right"===F?1:-1,c=function(e){return e.dy+e.fontSize*T-D*v},u=function(e){return e.dx+n+(L+R+(90===Math.abs(o.tickangle)?e.fontSize/2:0))*v},p=function(e){return a(e)&&90===Math.abs(e)?"middle":"right"===F?"start":"end"}):$(o)&&(o._labelShift=D,o._labelStandoff=L,o._pad=R,u=o._labelx,c=o._labely,p=o._labelanchor);var w=0,C=0,M=[];function O(e,t){e.each(function(e){var n=p(t,e),i=r.select(this),o=i.select(".text-math-group"),s=m.call(i.node(),e)+(a(t)&&0!=+t?" rotate("+t+","+u(e)+","+(c(e)-e.fontSize/2)+")":""),d=function(e,t,n){var r=(e-1)*t;if("x"===_){if(n<-60||60<n)return-.5*r;if("top"===F)return-r}else{if((n*="left"===F?1:-1)<-30)return-r;if(n<30)return-.5*r}return 0}(l.lineCount(i),k*e.fontSize,a(t)?+t:0);if(d&&(s+=" translate(0, "+d+")"),o.empty())i.select("text").attr({transform:s,"text-anchor":n});else{var h=f.bBox(o.node()).width*{end:-.5,start:.5}[n];o.attr("transform",s+(h?"translate("+h+",0)":""))}})}function P(){if(o.showticklabels){var n=e.getBoundingClientRect(),r=t.node().getBoundingClientRect();o._boundingBox={width:r.width,height:r.height,left:r.left-n.left,right:r.right-n.left,top:r.top-n.top,bottom:r.bottom-n.top}}else{var a,i=d._size;"x"===_?(a="free"===o.anchor?i.t+i.h*(1-o.position):i.t+i.h*(1-o._anchorAxis.domain[{bottom:0,top:1}[o.side]]),o._boundingBox={top:a,bottom:a,left:o._offset,right:o._offset+o._length,width:o._length,height:0}):(a="free"===o.anchor?i.l+i.w*o.position:i.l+i.w*o._anchorAxis.domain[{left:0,right:1}[o.side]],o._boundingBox={left:a,right:a,bottom:o._offset+o._length,top:o._offset,height:o._length,width:0})}if(g){var s=o._counterSpan=[1/0,-1/0];for(b=0;b<g.length;b++){var l=d._plots[g[b]],u=l["x"===_?"yaxis":"xaxis"];c(s,[u._offset,u._offset+u._length])}"free"===o.anchor&&c(s,"x"===_?[o._boundingBox.bottom,o._boundingBox.top]:[o._boundingBox.right,o._boundingBox.left])}function c(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.max(e[1],t[1])}}y.enter().append("g").classed(S,1).append("text").attr("text-anchor","middle").each(function(t){var n=r.select(this),a=e._promises.length;n.call(l.positionText,u(t),c(t)).call(f.font,t.font,t.fontSize,t.fontColor).text(t.text).call(l.convertToTspans,e),(a=e._promises[a])?M.push(e._promises.pop().then(function(){O(n,o.tickangle)})):O(n,o.tickangle)}),y.exit().remove(),y.each(function(e){w=Math.max(w,e.fontSize)}),$(o)&&y.each(function(e){r.select(this).select("text").call(l.positionText,u(e),c(e))}),O(y,o._lastangle||o.tickangle);var I=s.syncOrAsync([function(){return M.length&&Promise.all(M)},function(){if(O(y,o.tickangle),"x"===_&&!a(o.tickangle)&&("log"!==o.type||"D"!==String(o.dtick).charAt(0))){var e=[];for(y.each(function(t){var n=r.select(this),a=n.select(".text-math-group"),i=o.l2p(t.x);a.empty()&&(a=n.select("text"));var s=f.bBox(a.node());e.push({top:0,bottom:10,height:10,left:i-s.width/2,right:i+s.width/2+2,width:s.width+2})}),b=0;b<e.length-1;b++)if(s.bBoxIntersect(e[b],e[b+1])){C=30;break}if(C){var t=Math.abs((E[E.length-1].x-E[0].x)*o._m)/(E.length-1);t<2.5*w&&(C=90),O(y,C)}o._lastangle=C}return ee(),x+" done"},P,function(){var t=o._name+".automargin";if("x"===_||"y"===_)if(o.automargin){var n=o.side[0],r={x:0,y:0,r:0,l:0,t:0,b:0};"x"===_?(r.y="free"===o.anchor?o.position:o._anchorAxis.domain["t"===n?1:0],r[n]+=o._boundingBox.height):(r.x="free"===o.anchor?o.position:o._anchorAxis.domain["r"===n?1:0],r[n]+=o._boundingBox.width),o.title!==d._dfltTitle[_]&&(r[n]+=o.titlefont.size),i.autoMargin(e,t,r)}else i.autoMargin(e,t)}]);return I&&I.then&&e._promises.push(I),I}function ee(){if(!(n||o.rangeslider&&o.rangeslider.visible&&o._boundingBox&&"bottom"===o.side)){var t,r,a,i,s={selection:y,side:o.side},l=x.charAt(0),c=e._fullLayout._size,p=o.titlefont.size;if(y.size()){var h=f.getTranslate(y.node().parentNode);s.offsetLeft=h.x,s.offsetTop=h.y}var m=10+1.5*p+(o.linewidth?o.linewidth-1:0);"x"===l?(r="free"===o.anchor?{_offset:c.t+(1-(o.position||0))*c.h,_length:0}:M.getFromId(e,o.anchor),a=o._offset+o._length/2,i="top"===o.side?-m-p*(o.showticklabels?1:0):r._length+m+p*(o.showticklabels?1.5:.5),i+=r._offset,s.side||(s.side="bottom")):(r="free"===o.anchor?{_offset:c.l+(o.position||0)*c.w,_length:0}:M.getFromId(e,o.anchor),i=o._offset+o._length/2,a="right"===o.side?r._length+m+p*(o.showticklabels?1:.5):-m-p*(o.showticklabels?.5:0),a+=r._offset,t={rotate:"-90",offset:0},s.side||(s.side="left")),u.draw(e,x+"title",{propContainer:o,propName:o._name+".title",placeholder:d._dfltTitle[l],avoid:s,transform:t,attributes:{x:a,y:i,"text-anchor":"middle"}})}}function te(t,n){if(!d._hasOnlyLargeSploms){var a=t.gridlayer.selectAll("."+x),i=t.zerolinelayer,s=o._gridpath||("x"===_?"M0,"+n._offset+"v":"M"+n._offset+",0h")+n._length,l=a.selectAll("path."+O).data(!1===o.showgrid?[]:V,A);if(l.enter().append("path").classed(O,1).classed("crisp",1).attr("d",s).each(function(e){o.zeroline&&("linear"===o.type||"-"===o.type)&&Math.abs(e.x)<o.dtick/100&&r.select(this).remove()}),l.attr("transform",m).call(c.stroke,o.gridcolor||"#ddd").style("stroke-width",I+"px"),"function"==typeof s&&l.attr("d",s),l.exit().remove(),i){var u={x:0,id:x},f=C.shouldShowZeroLine(e,o,n),p=i.selectAll("path."+P).data(f?[u]:[]);p.enter().append("path").classed(P,1).classed("zl",1).classed("crisp",1).attr("d",s).each(function(){i.selectAll("path").sort(function(e,t){return M.idSort(e.id,t.id)})}),p.attr("transform",m).call(c.stroke,o.zerolinecolor||c.defaultLine).style("stroke-width",z+"px"),p.exit().remove()}}}},C.shouldShowZeroLine=function(e,t,n){var r=s.simpleMap(t.range,t.r2l);return r[0]*r[1]<=0&&t.zeroline&&("linear"===t.type||"-"===t.type)&&t._valsClipped.length&&(q(t,0)||!function(e,t,n,r){var a=n._mainAxis;if(a){var i=e._fullLayout,o=t._id.charAt(0),s=C.counterLetter(t._id),l=t._offset+(Math.abs(r[0])<Math.abs(r[1])==("x"===o)?0:t._length),u=i._plots[n._mainSubplot];if(!(u.mainplotinfo||u).overlays.length)return p(n);for(var c=C.list(e,s),f=0;f<c.length;f++){var d=c[f];if(d._mainAxis===a&&p(d))return!0}}function p(e){if(!e.showline||!e.linewidth)return!1;var n=Math.max((e.linewidth+t.zerolinewidth)/2,1);function r(e){return"number"==typeof e&&Math.abs(e-l)<n}if(r(e._mainLinePosition)||r(e._mainMirrorPosition))return!0;var a=e._linepositions||{};for(var i in a)if(r(a[i][0])||r(a[i][1]))return!0}}(e,t,n,r)||function(e,t){for(var n=e._fullData,r=t._mainSubplot,a=t._id.charAt(0),i=0;i<n.length;i++){var s=n[i];if(!0===s.visible&&s.xaxis+s.yaxis===r&&(o.traceIs(s,"bar")&&s.orientation==={x:"h",y:"v"}[a]||s.fill&&s.fill.charAt(s.fill.length-1)===a))return!0}return!1}(e,t))},C.allowAutoMargin=function(e){for(var t=C.list(e,"",!0),n=0;n<t.length;n++){var r=t[n];r.automargin&&i.allowAutoMargin(e,r._name+".automargin"),r.rangeslider&&r.rangeslider.visible&&i.allowAutoMargin(e,"rangeslider"+r._id)}},C.swap=function(e,t){for(var n=function(e,t){var n,r,a=[];for(n=0;n<t.length;n++){var i=[],o=e._fullData[t[n]].xaxis,s=e._fullData[t[n]].yaxis;if(o&&s){for(r=0;r<a.length;r++)-1===a[r].x.indexOf(o)&&-1===a[r].y.indexOf(s)||i.push(r);if(i.length){var l,u=a[i[0]];if(i.length>1)for(r=1;r<i.length;r++)l=a[i[r]],Y(u.x,l.x),Y(u.y,l.y);Y(u.x,[o]),Y(u.y,[s])}else a.push({x:[o],y:[s]})}}return a}(e,t),r=0;r<n.length;r++)X(e,n[r].x,n[r].y)}},{"../../components/color":570,"../../components/drawing":595,"../../components/titles":661,"../../constants/alignment":668,"../../constants/numerical":673,"../../lib":696,"../../lib/svg_text_utils":720,"../../plots/plots":808,"../../registry":827,"./autorange":743,"./axis_autotype":745,"./axis_ids":747,"./clean_ticks":749,"./layout_attributes":757,"./set_convert":763,d3:148,"fast-isnumeric":214}],745:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),a=e("../../lib"),i=e("../../constants/numerical").BADNUM;t.exports=function(e,t){return function(e,t){for(var n=Math.max(1,(e.length-1)/1e3),i=0,o=0,s={},l=0;l<e.length;l+=n){var u=e[Math.round(l)],c=String(u);s[c]||(s[c]=1,a.isDateTime(u,t)&&(i+=1),r(u)&&(o+=1))}return i>2*o}(e,t)?"date":function(e){for(var t=Math.max(1,(e.length-1)/1e3),n=0,r=0,o={},s=0;s<e.length;s+=t){var l=e[Math.round(s)],u=String(l);o[u]||(o[u]=1,"boolean"==typeof l?r++:a.cleanNumber(l)!==i?n++:"string"==typeof l&&r++)}return r>2*n}(e)?"category":function(e){if(!e)return!1;for(var t=0;t<e.length;t++)if(r(e[t]))return!0;return!1}(e)?"linear":"-"}},{"../../constants/numerical":673,"../../lib":696,"fast-isnumeric":214}],746:[function(e,t,n){"use strict";var r=e("../../registry"),a=e("../../lib"),i=e("./layout_attributes"),o=e("./tick_value_defaults"),s=e("./tick_mark_defaults"),l=e("./tick_label_defaults"),u=e("./category_order_defaults"),c=e("./line_grid_defaults"),f=e("./set_convert");t.exports=function(e,t,n,d,p){var h=d.letter,m=d.font||{},v=d.splomStash||{},g=n("visible",!d.cheateronly),y=t.type;if("date"===y){var b=r.getComponentMethod("calendars","handleDefaults");b(e,t,"calendar",d.calendar)}f(t,p);var x=n("autorange",!t.isValidRange(e.range));if(!x||"linear"!==y&&"-"!==y||n("rangemode"),n("range"),t.cleanRange(),u(e,t,n,d),"category"===y||d.noHover||n("hoverformat"),!g)return t;var _=n("color"),w=_!==i.color.dflt?_:m.color,T=v.label||p._dfltTitle[h];return n("title",T),a.coerceFont(n,"titlefont",{family:m.family,size:Math.round(1.2*m.size),color:w}),o(e,t,n,y),l(e,t,n,y,d),s(e,t,n,d),c(e,t,n,{dfltColor:_,bgColor:d.bgColor,showGrid:d.showGrid,attributes:i}),(t.showline||t.ticks)&&n("mirror"),d.automargin&&n("automargin"),t}},{"../../lib":696,"../../registry":827,"./category_order_defaults":748,"./layout_attributes":757,"./line_grid_defaults":759,"./set_convert":763,"./tick_label_defaults":764,"./tick_mark_defaults":765,"./tick_value_defaults":766}],747:[function(e,t,n){"use strict";var r=e("../../registry"),a=e("./constants");n.id2name=function(e){if("string"==typeof e&&e.match(a.AX_ID_PATTERN)){var t=e.substr(1);return"1"===t&&(t=""),e.charAt(0)+"axis"+t}},n.name2id=function(e){if(e.match(a.AX_NAME_PATTERN)){var t=e.substr(5);return"1"===t&&(t=""),e.charAt(0)+t}},n.cleanId=function(e,t){if(e.match(a.AX_ID_PATTERN)&&(!t||e.charAt(0)===t)){var n=e.substr(1).replace(/^0+/,"");return"1"===n&&(n=""),e.charAt(0)+n}},n.list=function(e,t,r){var a=e._fullLayout;if(!a)return[];var i,o=n.listIds(e,t),s=new Array(o.length);for(i=0;i<o.length;i++){var l=o[i];s[i]=a[l.charAt(0)+"axis"+l.substr(1)]}if(!r){var u=a._subplots.gl3d||[];for(i=0;i<u.length;i++){var c=a[u[i]];t?s.push(c[t+"axis"]):s.push(c.xaxis,c.yaxis,c.zaxis)}}return s},n.listIds=function(e,t){var n=e._fullLayout;if(!n)return[];var r=n._subplots;return t?r[t+"axis"]:r.xaxis.concat(r.yaxis)},n.getFromId=function(e,t,r){var a=e._fullLayout;return"x"===r?t=t.replace(/y[0-9]*/,""):"y"===r&&(t=t.replace(/x[0-9]*/,"")),a[n.id2name(t)]},n.getFromTrace=function(e,t,a){var i=e._fullLayout,o=null;if(r.traceIs(t,"gl3d")){var s=t.scene;"scene"===s.substr(0,5)&&(o=i[s][a+"axis"])}else o=n.getFromId(e,t[a+"axis"]||a);return o},n.idSort=function(e,t){var n=e.charAt(0),r=t.charAt(0);return n!==r?n>r?1:-1:+(e.substr(1)||1)-+(t.substr(1)||1)}},{"../../registry":827,"./constants":750}],748:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){if("category"===t.type){var a,i=e.categoryarray,o=Array.isArray(i)&&i.length>0;o&&(a="array");var s,l=n("categoryorder",a);"array"===l&&(s=n("categoryarray")),o||"array"!==l||(l=t.categoryorder="trace"),"trace"===l?t._initialCategories=[]:"array"===l?t._initialCategories=s.slice():(s=function(e,t){var n,r,a,i=t.dataAttr||e._id.charAt(0),o={};if(t.axData)n=t.axData;else for(n=[],r=0;r<t.data.length;r++){var s=t.data[r];s[i+"axis"]===e._id&&n.push(s)}for(r=0;r<n.length;r++){var l=n[r][i];for(a=0;a<l.length;a++){var u=l[a];null!==u&&void 0!==u&&(o[u]=1)}}return Object.keys(o)}(t,r).sort(),"category ascending"===l?t._initialCategories=s:"category descending"===l&&(t._initialCategories=s.reverse()))}}},{}],749:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),a=e("../../lib"),i=e("../../constants/numerical").ONEDAY;n.dtick=function(e,t){var n="log"===t,a="date"===t,o="category"===t,s=a?i:1;if(!e)return s;if(r(e))return(e=Number(e))<=0?s:o?Math.max(1,Math.round(e)):a?Math.max(.1,e):e;if("string"!=typeof e||!a&&!n)return s;var l=e.charAt(0),u=e.substr(1);return(u=r(u)?Number(u):0)<=0||!(a&&"M"===l&&u===Math.round(u)||n&&"L"===l||n&&"D"===l&&(1===u||2===u))?s:e},n.tick0=function(e,t,n,i){return"date"===t?a.cleanDate(e,a.dateTick0(n)):"D1"!==i&&"D2"!==i?r(e)?Number(e):0:void 0}},{"../../constants/numerical":673,"../../lib":696,"fast-isnumeric":214}],750:[function(e,t,n){"use strict";var r=e("../../lib/regex").counter;t.exports={idRegex:{x:r("x"),y:r("y")},attrRegex:r("[xy]axis"),xAxisMatch:r("xaxis"),yAxisMatch:r("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,BENDPX:1.5,REDRAWDELAY:50,SELECTDELAY:100,SELECTID:"-select",DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["heatmaplayer","contourcarpetlayer","contourlayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":712}],751:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("./axis_ids").id2name;t.exports=function(e,t,n,i,o){var s=o._axisConstraintGroups,l=t._id,u=l.charAt(0);if(!t.fixedrange&&(n("constrain"),r.coerce(e,t,{constraintoward:{valType:"enumerated",values:"x"===u?["left","center","right"]:["bottom","middle","top"],dflt:"x"===u?"center":"middle"}},"constraintoward"),e.scaleanchor)){var c=function(e,t,n,r){var i,o,s,l,u=r[a(t)].type,c=[];for(o=0;o<n.length;o++)(s=n[o])!==t&&((l=r[a(s)]).type!==u||l.fixedrange||c.push(s));for(i=0;i<e.length;i++)if(e[i][t]){var f=e[i],d=[];for(o=0;o<c.length;o++)s=c[o],f[s]||d.push(s);return{linkableAxes:d,thisGroup:f}}return{linkableAxes:c,thisGroup:null}}(s,l,i,o),f=r.coerce(e,t,{scaleanchor:{valType:"enumerated",values:c.linkableAxes}},"scaleanchor");if(f){var d=n("scaleratio");d||(d=t.scaleratio=1),function(e,t,n,r,a){var i,o,s,l,u;null===t?((t={})[n]=1,u=e.length,e.push(t)):u=e.indexOf(t);var c=Object.keys(t);for(i=0;i<e.length;i++)if(s=e[i],i!==u&&s[r]){var f=s[r];for(o=0;o<c.length;o++)l=c[o],s[l]=f*a*t[l];return void e.splice(u,1)}if(1!==a)for(o=0;o<c.length;o++)t[c[o]]*=a;t[r]=1}(s,c.thisGroup,l,f,d)}else-1!==i.indexOf(e.scaleanchor)&&r.warn("ignored "+t._name+'.scaleanchor: "'+e.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because the targetaxis has fixed range.')}}},{"../../lib":696,"./axis_ids":747}],752:[function(e,t,n){"use strict";var r=e("./axis_ids").id2name,a=e("./scale_zoom"),i=e("./autorange").makePadFn,o=e("./autorange").concatExtremes,s=e("../../constants/numerical").ALMOST_EQUAL,l=e("../../constants/alignment").FROM_BL;function u(e,t){var n=e._inputDomain,r=l[e.constraintoward],a=n[0]+(n[1]-n[0])*r;e.domain=e._input.domain=[a+(n[0]-a)/t,a+(n[1]-a)/t]}n.enforce=function(e){var t,n,l,c,f,d,p,h=e._fullLayout,m=h._axisConstraintGroups||[];for(t=0;t<m.length;t++){var v=m[t],g=Object.keys(v),y=1/0,b=0,x=1/0,_={},w={},T=!1;for(n=0;n<g.length;n++)l=g[n],w[l]=c=h[r(l)],c._inputDomain?c.domain=c._inputDomain.slice():c._inputDomain=c.domain.slice(),c._inputRange||(c._inputRange=c.range.slice()),c.setScale(),_[l]=f=Math.abs(c._m)/v[l],y=Math.min(y,f),"domain"!==c.constrain&&c._constraintShrinkable||(x=Math.min(x,f)),delete c._constraintShrinkable,b=Math.max(b,f),"domain"===c.constrain&&(T=!0);if(!(y>s*b)||T)for(n=0;n<g.length;n++)if(l=g[n],f=_[l],c=w[l],d=c.constrain,f!==x||"domain"===d)if(p=f/x,"range"===d)a(c,p);else{var k=c._inputDomain,C=(c.domain[1]-c.domain[0])/(k[1]-k[0]),E=(c.r2l(c.range[1])-c.r2l(c.range[0]))/(c.r2l(c._inputRange[1])-c.r2l(c._inputRange[0]));if((p/=C)*E<1){c.domain=c._input.domain=k.slice(),a(c,p);continue}if(E<1&&(c.range=c._input.range=c._inputRange.slice(),p*=E),c.autorange){var M=c.r2l(c.range[0]),A=c.r2l(c.range[1]),S=(M+A)/2,O=S,P=S,R=Math.abs(A-S),L=S-R*p*1.0001,D=S+R*p*1.0001,I=i(c);u(c,p),c.setScale();var z,j,N=Math.abs(c._m),F=o(e,c),B=F.min,V=F.max;for(j=0;j<B.length;j++)(z=B[j].val-I(B[j])/N)>L&&z<O&&(O=z);for(j=0;j<V.length;j++)(z=V[j].val+I(V[j])/N)<D&&z>P&&(P=z);var U=(P-O)/(2*R);p/=U,O=c.l2r(O),P=c.l2r(P),c.range=c._input.range=M<A?[O,P]:[P,O]}u(c,p)}}},n.clean=function(e,t){if(t._inputDomain){for(var n=!1,r=t._id,a=e._fullLayout._axisConstraintGroups,i=0;i<a.length;i++)if(a[i][r]){n=!0;break}n&&"domain"===t.constrain||(t._input.domain=t.domain=t._inputDomain,delete t._inputDomain)}}},{"../../constants/alignment":668,"../../constants/numerical":673,"./autorange":743,"./axis_ids":747,"./scale_zoom":761}],753:[function(e,t,n){"use strict";var r=e("d3"),a=e("tinycolor2"),i=e("has-passive-events"),o=e("../../registry"),s=e("../../lib"),l=e("../../lib/svg_text_utils"),u=e("../../components/color"),c=e("../../components/drawing"),f=e("../../components/fx"),d=e("../../lib/setcursor"),p=e("../../components/dragelement"),h=e("../../constants/alignment").FROM_TL,m=e("../../lib/clear_gl_canvases"),v=e("../../plot_api/subroutines").redrawReglTraces,g=e("../plots"),y=e("./axes").doTicksSingle,b=e("./axis_ids").getFromId,x=e("./select").prepSelect,_=e("./select").clearSelect,w=e("./select").selectOnClick,T=e("./scale_zoom"),k=e("./constants"),C=k.MINDRAG,E=k.MINZOOM,M=!0;function A(e,t,n,r){var a=s.ensureSingle(e.draglayer,t,n,function(t){t.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",e.id)});return a.call(d,r),a.node()}function S(e,t,n,a,i,o,s){var l=A(e,"rect",t,n);return r.select(l).call(c.setRect,a,i,o,s),l}function O(e,t){for(var n=0;n<e.length;n++)if(!e[n].fixedrange)return t;return""}function P(e,t,n,r,a){var i,o,s,l;for(i=0;i<e.length;i++)(o=e[i]).fixedrange||(s=o._rl[0],l=o._rl[1]-s,o.range=[o.l2r(s+l*t),o.l2r(s+l*n)],r[o._name+".range[0]"]=o.range[0],r[o._name+".range[1]"]=o.range[1]);if(a&&a.length){var u=(t+(1-n))/2;P(a,u,1-u,r)}}function R(e,t){for(var n=0;n<e.length;n++){var r=e[n];r.fixedrange||(r.range=[r.l2r(r._rl[0]-t/r._m),r.l2r(r._rl[1]-t/r._m)])}}function L(e){return 1-(e>=0?Math.min(e,.9):1/(1/Math.max(e,-.3)+3.222))}function D(e,t,n,r,a){return e.append("path").attr("class","zoombox").style({fill:t>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform","translate("+n+", "+r+")").attr("d",a+"Z")}function I(e,t,n){return e.append("path").attr("class","zoombox-corners").style({fill:u.background,stroke:u.defaultLine,"stroke-width":1,opacity:0}).attr("transform","translate("+t+", "+n+")").attr("d","M0,0Z")}function z(e,t,n,r,a,i){e.attr("d",r+"M"+n.l+","+n.t+"v"+n.h+"h"+n.w+"v-"+n.h+"h-"+n.w+"Z"),j(e,t,a,i)}function j(e,t,n,r){n||(e.transition().style("fill",r>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),t.transition().style("opacity",1).duration(200))}function N(e){r.select(e).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function F(e){M&&e.data&&e._context.showTips&&(s.notifier(s._(e,"Double-click to zoom back out"),"long"),M=!1)}function B(e){return"lasso"===e||"select"===e}function V(e){var t=Math.floor(Math.min(e.b-e.t,e.r-e.l,E)/2);return"M"+(e.l-3.5)+","+(e.t-.5+t)+"h3v"+-t+"h"+t+"v-3h-"+(t+3)+"ZM"+(e.r+3.5)+","+(e.t-.5+t)+"h-3v"+-t+"h"+-t+"v-3h"+(t+3)+"ZM"+(e.r+3.5)+","+(e.b+.5-t)+"h-3v"+t+"h"+-t+"v3h"+(t+3)+"ZM"+(e.l-3.5)+","+(e.b+.5-t)+"h3v"+t+"h"+t+"v3h-"+(t+3)+"Z"}function U(e,t){if(i){var n=void 0!==e.onwheel?"wheel":"mousewheel";e._onwheel&&e.removeEventListener(n,e._onwheel),e._onwheel=t,e.addEventListener(n,t,{passive:!1})}else void 0!==e.onwheel?e.onwheel=t:void 0!==e.onmousewheel&&(e.onmousewheel=t)}function G(e){var t=[];for(var n in e)t.push(e[n]);return t}t.exports={makeDragBox:function(e,t,n,i,u,d,M,A){var j,H,W,q,Y,X,Z,$,K,J,Q,ee,te,ne,re,ae,ie,oe,se,le,ue,ce=e._fullLayout._zoomlayer,fe=M+A==="nsew",de=1===(M+A).length;function pe(){if(j=t.xaxis,H=t.yaxis,K=j._length,J=H._length,Z=j._offset,$=H._offset,(W={})[j._id]=j,(q={})[H._id]=H,M&&A)for(var n=t.overlays,r=0;r<n.length;r++){var a=n[r].xaxis;W[a._id]=a;var i=n[r].yaxis;q[i._id]=i}Y=G(W),X=G(q),ee=O(Y,A),te=O(X,M),ne=!te&&!ee,Q=function(e,t,n){for(var r,a,i,o,l=e._fullLayout._axisConstraintGroups,u=!1,c={},f={},d=0;d<l.length;d++){var p=l[d];for(r in t)if(p[r]){for(i in p)("x"===i.charAt(0)?t:n)[i]||(c[i]=1);for(a in n)p[a]&&(u=!0)}for(a in n)if(p[a])for(o in p)("x"===o.charAt(0)?t:n)[o]||(f[o]=1)}u&&(s.extendFlat(c,f),f={});var h={},m=[];for(i in c){var v=b(e,i);m.push(v),h[v._id]=v}var g={},y=[];for(o in f){var x=b(e,o);y.push(x),g[x._id]=x}return{xaHash:h,yaHash:g,xaxes:m,yaxes:y,isSubplotConstrained:u}}(e,W,q),re=Q.isSubplotConstrained,ae=A||re,ie=M||re;var o=e._fullLayout;oe=o._has("scattergl"),se=o._has("splom"),le=o._has("svg")}pe();var he=function(e,t,n){return e?"nsew"===e?n?"":"pan"===t?"move":"crosshair":e.toLowerCase()+"-resize":"pointer"}(te+ee,e._fullLayout.dragmode,fe),me=S(t,M+A+"drag",he,n,i,u,d);if(ne&&!fe)return me.onmousedown=null,me.style.pointerEvents="none",me;var ve,ge,ye,be,xe,_e,we,Te,ke,Ce,Ee={element:me,gd:e,plotinfo:t};function Me(){Ee.plotinfo.selection=!1,_(ce)}function Ae(n,a){var i=e._fullLayout.clickmode;if(N(e),2!==n||de||function(){if(!e._transitioningWithDuration){var t,n,r,a=e._context.doubleClick,i=(ee?Y:[]).concat(te?X:[]),s={};if("reset+autosize"===a)for(a="autosize",n=0;n<i.length;n++)if((t=i[n])._rangeInitial&&(t.range[0]!==t._rangeInitial[0]||t.range[1]!==t._rangeInitial[1])||!t._rangeInitial&&!t.autorange){a="reset";break}if("autosize"===a)for(n=0;n<i.length;n++)(t=i[n]).fixedrange||(s[t._name+".autorange"]=!0);else if("reset"===a)for((ee||re)&&(i=i.concat(Q.xaxes)),te&&!re&&(i=i.concat(Q.yaxes)),re&&(ee?te||(i=i.concat(X)):i=i.concat(Y)),n=0;n<i.length;n++)(t=i[n])._rangeInitial?(r=t._rangeInitial,s[t._name+".range[0]"]=r[0],s[t._name+".range[1]"]=r[1]):s[t._name+".autorange"]=!0;e.emit("plotly_doubleclick",null),o.call("relayout",e,s)}}(),fe)i.indexOf("select")>-1&&w(a,e,Y,X,t.id,Ee),i.indexOf("event")>-1&&f.click(e,a,t.id);else if(1===n&&de){var s=M?H:j,u="s"===M||"w"===A?0:1,c=s._name+".range["+u+"]",d=function(e,t){var n,a=e.range[t],i=Math.abs(a-e.range[1-t]);return"date"===e.type?a:"log"===e.type?(n=Math.ceil(Math.max(0,-Math.log(i)/Math.LN10))+3,r.format("."+n+"g")(Math.pow(10,a))):(n=Math.floor(Math.log(Math.abs(a))/Math.LN10)-Math.floor(Math.log(i)/Math.LN10)+4,r.format("."+String(n)+"g")(a))}(s,u),p="left",h="middle";if(s.fixedrange)return;M?(h="n"===M?"top":"bottom","right"===s.side&&(p="right")):"e"===A&&(p="right"),e._context.showAxisRangeEntryBoxes&&r.select(me).call(l.makeEditable,{gd:e,immediate:!0,background:e._fullLayout.paper_bgcolor,text:String(d),fill:s.tickfont?s.tickfont.color:"#444",horizontalAlign:p,verticalAlign:h}).on("edit",function(t){var n=s.d2r(t);void 0!==n&&o.call("relayout",e,c,n)})}}function Se(t,n){if(e._transitioningWithDuration)return!1;var r=Math.max(0,Math.min(K,t+ve)),a=Math.max(0,Math.min(J,n+ge)),i=Math.abs(r-ve),o=Math.abs(a-ge);function s(){we="",ye.r=ye.l,ye.t=ye.b,ke.attr("d","M0,0Z")}ye.l=Math.min(ve,r),ye.r=Math.max(ve,r),ye.t=Math.min(ge,a),ye.b=Math.max(ge,a),re?i>E||o>E?(we="xy",i/K>o/J?(o=i*J/K,ge>a?ye.t=ge-o:ye.b=ge+o):(i=o*K/J,ve>r?ye.l=ve-i:ye.r=ve+i),ke.attr("d",V(ye))):s():!te||o<Math.min(Math.max(.6*i,C),E)?i<C||!ee?s():(ye.t=0,ye.b=J,we="x",ke.attr("d",function(e,t){return"M"+(e.l-.5)+","+(t-E-.5)+"h-3v"+(2*E+1)+"h3ZM"+(e.r+.5)+","+(t-E-.5)+"h3v"+(2*E+1)+"h-3Z"}(ye,ge))):!ee||i<Math.min(.6*o,E)?(ye.l=0,ye.r=K,we="y",ke.attr("d",function(e,t){return"M"+(t-E-.5)+","+(e.t-.5)+"v-3h"+(2*E+1)+"v3ZM"+(t-E-.5)+","+(e.b+.5)+"v3h"+(2*E+1)+"v-3Z"}(ye,ve))):(we="xy",ke.attr("d",V(ye))),ye.w=ye.r-ye.l,ye.h=ye.b-ye.t,we&&(Ce=!0),e._dragged=Ce,z(Te,ke,ye,xe,_e,be),_e=!0}function Oe(){if(ue={},Math.min(ye.h,ye.w)<2*C)return N(e);"xy"!==we&&"x"!==we||P(Y,ye.l/K,ye.r/K,ue,Q.xaxes),"xy"!==we&&"y"!==we||P(X,(J-ye.b)/J,(J-ye.t)/J,ue,Q.yaxes),N(e),Fe(),F(e)}Ee.prepFn=function(t,n,r){var i=Ee.dragmode,o=e._fullLayout.dragmode;o!==i&&(Ee.dragmode=o),pe(),ne||(fe?t.shiftKey?"pan"===o?o="zoom":B(o)||(o="pan"):t.ctrlKey&&(o="pan"):o="pan"),Ee.minDrag="lasso"===o?1:void 0,B(o)?(Ee.xaxes=Y,Ee.yaxes=X,x(t,n,r,Ee,o)):(Ee.clickFn=Ae,B(i)&&Me(),ne||("zoom"===o?(Ee.moveFn=Se,Ee.doneFn=Oe,Ee.minDrag=1,function(t,n,r){var i=me.getBoundingClientRect();ve=n-i.left,ge=r-i.top,ye={l:ve,r:ve,w:0,t:ge,b:ge,h:0},be=e._hmpixcount?e._hmlumcount/e._hmpixcount:a(e._fullLayout.plot_bgcolor).getLuminance(),_e=!1,we="xy",Ce=!1,Te=D(ce,be,Z,$,xe="M0,0H"+K+"V"+J+"H0V0"),ke=I(ce,Z,$)}(0,n,r)):"pan"===o&&(Ee.moveFn=je,Ee.doneFn=Fe)))},p.init(Ee);var Pe,Re,Le=[0,0,K,J],De=null,Ie=k.REDRAWDELAY,ze=t.mainplot?e._fullLayout._plots[t.mainplot]:t;function je(t,n){if(!e._transitioningWithDuration){if("ew"===ee||"ns"===te)return ee&&R(Y,t),te&&R(X,n),Be([ee?-t:0,te?-n:0,K,J]),void Ne(te,ee);if(re&&ee&&te){var r="w"===ee==("n"===te)?1:-1,a=(t/K+r*n/J)/2;t=a*K,n=r*a*J}"w"===ee?t=l(Y,0,t):"e"===ee?t=l(Y,1,-t):ee||(t=0),"n"===te?n=l(X,1,n):"s"===te?n=l(X,0,-n):te||(n=0);var i="w"===ee?t:0,o="n"===te?n:0;if(re){var s;if(!ee&&1===te.length){for(s=0;s<Y.length;s++)Y[s].range=Y[s]._r.slice(),T(Y[s],1-n/J);i=(t=n*K/J)/2}if(!te&&1===ee.length){for(s=0;s<X.length;s++)X[s].range=X[s]._r.slice(),T(X[s],1-t/K);o=(n=t*J/K)/2}}Be([i,o,K-t,J-n]),Ne(te,ee)}function l(e,t,n){for(var r,a,i=1-t,o=0;o<e.length;o++){var s=e[o];if(!s.fixedrange){r=s,a=s._rl[i]+(s._rl[t]-s._rl[i])/L(n/s._length);var l=s.l2r(a);!1!==l&&void 0!==l&&(s.range[t]=l)}}return r._length*(r._rl[t]-a)/(r._rl[t]-r._rl[i])}}function Ne(t,n){var r,a=[];function i(e){for(r=0;r<e.length;r++)e[r].fixedrange||a.push(e[r]._id)}for(ae&&(i(Y),i(Q.xaxes)),ie&&(i(X),i(Q.yaxes)),ue={},r=0;r<a.length;r++){var s=a[r];y(e,s,!0);var l=b(e,s);ue[l._name+".range[0]"]=l.range[0],ue[l._name+".range[1]"]=l.range[1]}function u(i,o,s){for(r=0;r<i.length;r++){var l=i[r];if((n&&-1!==a.indexOf(l.xref)||t&&-1!==a.indexOf(l.yref))&&(o(e,r),s))return}}u(e._fullLayout.annotations||[],o.getComponentMethod("annotations","drawOne")),u(e._fullLayout.shapes||[],o.getComponentMethod("shapes","drawOne")),u(e._fullLayout.images||[],o.getComponentMethod("images","draw"),!0)}function Fe(){Be([0,0,K,J]),s.syncOrAsync([g.previousPromises,function(){o.call("relayout",e,ue)}],e)}function Be(t){var n,r,a,i,l=e._fullLayout,u=l._plots,f=l._subplots.cartesian;if(se&&o.subplotsRegistry.splom.drag(e),oe)for(n=0;n<f.length;n++)if(r=u[f[n]],a=r.xaxis,i=r.yaxis,r._scene){var d=s.simpleMap(a.range,a.r2l),p=s.simpleMap(i.range,i.r2l);r._scene.update({range:[d[0],p[0],d[1],p[1]]})}if((se||oe)&&(m(e),v(e)),le){var h=t[2]/j._length,g=t[3]/H._length;for(n=0;n<f.length;n++){r=u[f[n]],a=r.xaxis,i=r.yaxis;var y,b,x,_,w=ae&&!a.fixedrange&&W[a._id],T=ie&&!i.fixedrange&&q[i._id];if(w?(y=h,x=A?t[0]:Ge(a,y)):(y=Ve(a,h,g),x=Ue(a,y)),T?(b=g,_=M?t[1]:Ge(i,b)):(b=Ve(i,h,g),_=Ue(i,b)),y||b){y||(y=1),b||(b=1);var k=a._offset-x/y,C=i._offset-_/b;r.clipRect.call(c.setTranslate,x,_).call(c.setScale,y,b),r.plot.call(c.setTranslate,k,C).call(c.setScale,1/y,1/b),y===Pe&&b===Re||(c.setPointGroupScale(r.zoomScalePts,y,b),c.setTextPointsScale(r.zoomScaleTxt,y,b)),c.hideOutsideRangePoints(r.clipOnAxisFalseTraces,r),Pe=y,Re=b}}}}function Ve(e,t,n){return e.fixedrange?0:ae&&Q.xaHash[e._id]?t:ie&&(re?Q.xaHash:Q.yaHash)[e._id]?n:0}function Ue(e,t){return t?(e.range=e._r.slice(),T(e,t),Ge(e,t)):0}function Ge(e,t){return e._length*(1-t)*h[e.constraintoward||"middle"]}return M.length*A.length!=1&&U(me,function(t){if(e._context.scrollZoom||e._fullLayout._enablescrollzoom){if(Me(),e._transitioningWithDuration)return t.preventDefault(),void t.stopPropagation();var n=e.querySelector(".plotly");if(pe(),!(n.scrollHeight-n.clientHeight>10||n.scrollWidth-n.clientWidth>10)){clearTimeout(De);var r=-t.deltaY;if(isFinite(r)||(r=t.wheelDelta/10),isFinite(r)){var a,i=Math.exp(-Math.min(Math.max(r,-20),20)/200),o=ze.draglayer.select(".nsewdrag").node().getBoundingClientRect(),l=(t.clientX-o.left)/o.width,u=(o.bottom-t.clientY)/o.height;if(ae){for(A||(l=.5),a=0;a<Y.length;a++)c(Y[a],l,i);Le[2]*=i,Le[0]+=Le[2]*l*(1/i-1)}if(ie){for(M||(u=.5),a=0;a<X.length;a++)c(X[a],u,i);Le[3]*=i,Le[1]+=Le[3]*(1-u)*(1/i-1)}return Be(Le),Ne(M,A),De=setTimeout(function(){Le=[0,0,K,J],Fe()},Ie),void t.preventDefault()}s.log("Did not find wheel motion attributes: ",t)}}function c(e,t,n){if(!e.fixedrange){var r=s.simpleMap(e.range,e.r2l),a=r[0]+(r[1]-r[0])*t;e.range=r.map(function(t){return e.l2r(a+(t-a)*n)})}}}),me},makeDragger:A,makeRectDragger:S,makeZoombox:D,makeCorners:I,updateZoombox:z,xyCorners:V,transitionZoombox:j,removeZoombox:N,showDoubleClickNotifier:F,attachWheelEventHandler:U}},{"../../components/color":570,"../../components/dragelement":592,"../../components/drawing":595,"../../components/fx":612,"../../constants/alignment":668,"../../lib":696,"../../lib/clear_gl_canvases":680,"../../lib/setcursor":716,"../../lib/svg_text_utils":720,"../../plot_api/subroutines":735,"../../registry":827,"../plots":808,"./axes":744,"./axis_ids":747,"./constants":750,"./scale_zoom":761,"./select":762,d3:148,"has-passive-events":394,tinycolor2:514}],754:[function(e,t,n){"use strict";var r=e("d3"),a=e("../../components/fx"),i=e("../../components/dragelement"),o=e("../../lib/setcursor"),s=e("./dragbox").makeDragBox,l=e("./constants").DRAGGERSIZE;n.initInteractions=function(e){var t=e._fullLayout;if(e._context.staticPlot)r.select(e).selectAll(".drag").remove();else if(t._has("cartesian")||t._has("splom")){var o=Object.keys(t._plots||{}).sort(function(e,n){if((t._plots[e].mainplot&&!0)===(t._plots[n].mainplot&&!0)){var r=e.split("y"),a=n.split("y");return r[0]===a[0]?Number(r[1]||1)-Number(a[1]||1):Number(r[0]||1)-Number(a[0]||1)}return t._plots[e].mainplot?1:-1});o.forEach(function(n){var r=t._plots[n],o=r.xaxis,u=r.yaxis;if(!r.mainplot){var c=s(e,r,o._offset,u._offset,o._length,u._length,"ns","ew");c.onmousemove=function(t){e._fullLayout._rehover=function(){e._fullLayout._hoversubplot===n&&a.hover(e,t,n)},a.hover(e,t,n),e._fullLayout._lasthover=c,e._fullLayout._hoversubplot=n},c.onmouseout=function(t){e._dragging||(e._fullLayout._hoversubplot=null,i.unhover(e,t))},e._context.showAxisDragHandles&&(s(e,r,o._offset-l,u._offset-l,l,l,"n","w"),s(e,r,o._offset+o._length,u._offset-l,l,l,"n","e"),s(e,r,o._offset-l,u._offset+u._length,l,l,"s","w"),s(e,r,o._offset+o._length,u._offset+u._length,l,l,"s","e"))}if(e._context.showAxisDragHandles){if(n===o._mainSubplot){var f=o._mainLinePosition;"top"===o.side&&(f-=l),s(e,r,o._offset+.1*o._length,f,.8*o._length,l,"","ew"),s(e,r,o._offset,f,.1*o._length,l,"","w"),s(e,r,o._offset+.9*o._length,f,.1*o._length,l,"","e")}if(n===u._mainSubplot){var d=u._mainLinePosition;"right"!==u.side&&(d-=l),s(e,r,d,u._offset+.1*u._length,l,.8*u._length,"ns",""),s(e,r,d,u._offset+.9*u._length,l,.1*u._length,"s",""),s(e,r,d,u._offset,l,.1*u._length,"n","")}}});var u=t._hoverlayer.node();u.onmousemove=function(n){n.target=e._fullLayout._lasthover,a.hover(e,n,t._hoversubplot)},u.onclick=function(t){t.target=e._fullLayout._lasthover,a.click(e,t)},u.onmousedown=function(t){e._fullLayout._lasthover.onmousedown(t)},n.updateFx(e)}},n.updateFx=function(e){var t=e._fullLayout,n="pan"===t.dragmode?"move":"crosshair";o(t._draggers,n)}},{"../../components/dragelement":592,"../../components/fx":612,"../../lib/setcursor":716,"./constants":750,"./dragbox":753,d3:148}],755:[function(e,t,n){"use strict";var r=e("../../registry"),a=e("../../lib");t.exports=function(e){return function(t,n){var i=t[e];if(Array.isArray(i))for(var o=r.subplotsRegistry.cartesian,s=o.idRegex,l=n._subplots,u=l.xaxis,c=l.yaxis,f=l.cartesian,d=n._has("cartesian")||n._has("gl2d"),p=0;p<i.length;p++){var h=i[p];if(a.isPlainObject(h)){var m=h.xref,v=h.yref,g=s.x.test(m),y=s.y.test(v);if(g||y){d||a.pushUnique(n._basePlotModules,o);var b=!1;g&&-1===u.indexOf(m)&&(u.push(m),b=!0),y&&-1===c.indexOf(v)&&(c.push(v),b=!0),b&&g&&y&&f.push(m+v)}}}}}},{"../../lib":696,"../../registry":827}],756:[function(e,t,n){"use strict";var r=e("d3"),a=e("../../registry"),i=e("../../lib"),o=e("../plots"),s=e("../../components/drawing"),l=e("../get_data").getModuleCalcData,u=e("./axis_ids"),c=e("./constants"),f=e("../../constants/xmlns_namespaces"),d=i.ensureSingle;function p(e,t,n){return i.ensureSingle(e,t,n,function(e){e.datum(n)})}function h(e,t,n,i,o){for(var u,f,d,p=c.traceLayerClasses,h=e._fullLayout,m=h._modules,v=[],g=[],y=0;y<m.length;y++){var b=(u=m[y]).name,x=a.modules[b].categories;if(x.svg){var _=u.layerName||b+"layer",w=u.plot;f=l(n,w),d=f[0],n=f[1],d.length&&v.push({i:p.indexOf(_),className:_,plotMethod:w,cdModule:d}),x.zoomScale&&g.push("."+_)}}v.sort(function(e,t){return e.i-t.i});var T=t.plot.selectAll("g.mlayer").data(v,function(e){return e.className});if(T.enter().append("g").attr("class",function(e){return e.className}).classed("mlayer",!0),T.exit().remove(),T.order(),T.each(function(n){var a=r.select(this),l=n.className;n.plotMethod(e,t,n.cdModule,a,i,o),"scatterlayer"!==l&&"barlayer"!==l&&s.setClipUrl(a,t.layerClipId)}),h._has("scattergl")&&(u=a.getModule("scattergl"),d=l(n,u)[0],u.plot(e,t,d)),!e._context.staticPlot&&(t._hasClipOnAxisFalse&&(t.clipOnAxisFalseTraces=t.plot.selectAll(".scatterlayer, .barlayer").selectAll(".trace")),g.length)){var k=t.plot.selectAll(g.join(",")).selectAll(".trace");t.zoomScalePts=k.selectAll("path.point"),t.zoomScaleTxt=k.selectAll(".textpoint")}}function m(e,t){var n=t.plotgroup,r=t.id,a=c.layerValue2layerClass[t.xaxis.layer],i=c.layerValue2layerClass[t.yaxis.layer],o=e._fullLayout._hasOnlyLargeSploms;if(t.mainplot){var s=t.mainplotinfo,l=s.plotgroup,f=r+"-x",h=r+"-y";t.gridlayer=s.gridlayer,t.zerolinelayer=s.zerolinelayer,d(s.overlinesBelow,"path",f),d(s.overlinesBelow,"path",h),d(s.overaxesBelow,"g",f),d(s.overaxesBelow,"g",h),t.plot=d(s.overplot,"g",r),d(s.overlinesAbove,"path",f),d(s.overlinesAbove,"path",h),d(s.overaxesAbove,"g",f),d(s.overaxesAbove,"g",h),t.xlines=l.select(".overlines-"+a).select("."+f),t.ylines=l.select(".overlines-"+i).select("."+h),t.xaxislayer=l.select(".overaxes-"+a).select("."+f),t.yaxislayer=l.select(".overaxes-"+i).select("."+h)}else if(o)t.xlines=d(n,"path","xlines-above"),t.ylines=d(n,"path","ylines-above"),t.xaxislayer=d(n,"g","xaxislayer-above"),t.yaxislayer=d(n,"g","yaxislayer-above");else{var m=d(n,"g","layer-subplot");t.shapelayer=d(m,"g","shapelayer"),t.imagelayer=d(m,"g","imagelayer"),t.gridlayer=d(n,"g","gridlayer"),t.zerolinelayer=d(n,"g","zerolinelayer"),d(n,"path","xlines-below"),d(n,"path","ylines-below"),t.overlinesBelow=d(n,"g","overlines-below"),d(n,"g","xaxislayer-below"),d(n,"g","yaxislayer-below"),t.overaxesBelow=d(n,"g","overaxes-below"),t.plot=d(n,"g","plot"),t.overplot=d(n,"g","overplot"),t.xlines=d(n,"path","xlines-above"),t.ylines=d(n,"path","ylines-above"),t.overlinesAbove=d(n,"g","overlines-above"),d(n,"g","xaxislayer-above"),d(n,"g","yaxislayer-above"),t.overaxesAbove=d(n,"g","overaxes-above"),t.xlines=n.select(".xlines-"+a),t.ylines=n.select(".ylines-"+i),t.xaxislayer=n.select(".xaxislayer-"+a),t.yaxislayer=n.select(".yaxislayer-"+i)}o||(p(t.gridlayer,"g",t.xaxis._id),p(t.gridlayer,"g",t.yaxis._id),t.gridlayer.selectAll("g").map(function(e){return e[0]}).sort(u.idSort)),t.xlines.style("fill","none").classed("crisp",!0),t.ylines.style("fill","none").classed("crisp",!0)}function v(e,t){if(e){var n={};for(var a in e.each(function(e){var a=e[0],i=r.select(this);i.remove(),g(a,t),n[a]=!0}),t._plots)for(var i=t._plots[a],o=i.overlays||[],s=0;s<o.length;s++){var l=o[s];n[l.id]&&l.plot.selectAll(".trace").remove()}}}function g(e,t){t._draggers.selectAll("g."+e).remove(),t._defs.select("#clip"+t._uid+e+"plot").remove()}n.name="cartesian",n.attr=["xaxis","yaxis"],n.idRoot=["x","y"],n.idRegex=c.idRegex,n.attrRegex=c.attrRegex,n.attributes=e("./attributes"),n.layoutAttributes=e("./layout_attributes"),n.supplyLayoutDefaults=e("./layout_defaults"),n.transitionAxes=e("./transition_axes"),n.finalizeSubplots=function(e,t){var n,r,a,o=t._subplots,s=o.xaxis,l=o.yaxis,f=o.cartesian,d=f.concat(o.gl2d||[]),p={},h={};for(n=0;n<d.length;n++){var m=d[n].split("y");p[m[0]]=1,h["y"+m[1]]=1}for(n=0;n<s.length;n++)r=s[n],p[r]||(a=(e[u.id2name(r)]||{}).anchor,c.idRegex.y.test(a)||(a="y"),f.push(r+a),d.push(r+a),h[a]||(h[a]=1,i.pushUnique(l,a)));for(n=0;n<l.length;n++)a=l[n],h[a]||(r=(e[u.id2name(a)]||{}).anchor,c.idRegex.x.test(r)||(r="x"),f.push(r+a),d.push(r+a),p[r]||(p[r]=1,i.pushUnique(s,r)));if(!d.length){for(var v in r="",a="",e)if(c.attrRegex.test(v)){var g=v.charAt(0);"x"===g?(!r||+v.substr(5)<+r.substr(5))&&(r=v):(!a||+v.substr(5)<+a.substr(5))&&(a=v)}r=r?u.name2id(r):"x",a=a?u.name2id(a):"y",s.push(r),l.push(a),f.push(r+a)}},n.plot=function(e,t,n,r){var a,i=e._fullLayout,o=i._subplots.cartesian,s=e.calcdata;if(null!==t){if(!Array.isArray(t))for(t=[],a=0;a<s.length;a++)t.push(a);for(a=0;a<o.length;a++){for(var l,u=o[a],c=i._plots[u],f=[],d=0;d<s.length;d++){var p=s[d],m=p[0].trace;m.xaxis+m.yaxis===u&&((-1!==t.indexOf(m.index)||m.carpet)&&(l&&l[0].trace.xaxis+l[0].trace.yaxis===u&&-1!==["tonextx","tonexty","tonext"].indexOf(m.fill)&&-1===f.indexOf(l)&&f.push(l),f.push(p)),l=p)}h(e,c,f,n,r)}}},n.clean=function(e,t,n,r){var a,i,o,s=r._plots||{},l=t._plots||{},c=r._subplots||{};if(r._hasOnlyLargeSploms&&!t._hasOnlyLargeSploms)for(o in s)(a=s[o]).plotgroup&&a.plotgroup.remove();var f=r._has&&r._has("gl"),d=t._has&&t._has("gl");if(f&&!d)for(o in s)(a=s[o])._scene&&a._scene.destroy();if(c.xaxis&&c.yaxis){var p=u.listIds({_fullLayout:r});for(i=0;i<p.length;i++){var h=p[i];t[u.id2name(h)]||r._infolayer.selectAll(".g-"+h+"title").remove()}}var m=r._has&&r._has("cartesian"),y=t._has&&t._has("cartesian");if(m&&!y)v(r._cartesianlayer.selectAll(".subplot"),r),r._defs.selectAll(".axesclip").remove(),delete r._axisConstraintGroups;else if(c.cartesian)for(i=0;i<c.cartesian.length;i++){var b=c.cartesian[i];if(!l[b]){var x="."+b+",."+b+"-x,."+b+"-y";r._cartesianlayer.selectAll(x).remove(),g(b,r)}}},n.drawFramework=function(e){var t=e._fullLayout,n=function(e){var t,n,r,a,i,o,s=e._fullLayout,l=s._subplots.cartesian,u=l.length,c=[],f=[];for(t=0;t<u;t++){r=l[t],a=s._plots[r],i=a.xaxis,o=a.yaxis;var d=i._mainAxis,p=o._mainAxis,h=d._id+p._id,m=s._plots[h];a.overlays=[],h!==r&&m?(a.mainplot=h,a.mainplotinfo=m,f.push(r)):(a.mainplot=void 0,a.mainPlotinfo=void 0,c.push(r))}for(t=0;t<f.length;t++)r=f[t],(a=s._plots[r]).mainplotinfo.overlays.push(a);var v=c.concat(f),g=new Array(u);for(t=0;t<u;t++){r=v[t],a=s._plots[r],i=a.xaxis,o=a.yaxis;var y=[r,i.layer,o.layer,i.overlaying||"",o.overlaying||""];for(n=0;n<a.overlays.length;n++)y.push(a.overlays[n].id);g[t]=y}return g}(e),a=t._cartesianlayer.selectAll(".subplot").data(n,String);a.enter().append("g").attr("class",function(e){return"subplot "+e[0]}),a.order(),a.exit().call(v,t),a.each(function(n){var a=n[0],i=t._plots[a];i.plotgroup=r.select(this),m(e,i),i.draglayer=d(t._draggers,"g",a)})},n.rangePlot=function(e,t,n){m(e,t),h(e,t,n),o.style(e)},n.toSVG=function(e){var t=e._fullLayout._glimages,n=r.select(e).selectAll(".svg-container"),a=n.filter(function(e,t){return t===n.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");a.each(function(){var e=this.toDataURL("image/png");t.append("svg:image").attr({xmlns:f.svg,"xlink:href":e,preserveAspectRatio:"none",x:0,y:0,width:this.width,height:this.height})})},n.updateFx=e("./graph_interact").updateFx},{"../../components/drawing":595,"../../constants/xmlns_namespaces":674,"../../lib":696,"../../registry":827,"../get_data":781,"../plots":808,"./attributes":742,"./axis_ids":747,"./constants":750,"./graph_interact":754,"./layout_attributes":757,"./layout_defaults":758,"./transition_axes":767,d3:148}],757:[function(e,t,n){"use strict";var r=e("../font_attributes"),a=e("../../components/color/attributes"),i=e("../../components/drawing/attributes").dash,o=e("../../lib/extend").extendFlat,s=e("../../plot_api/plot_template").templatedArray,l=e("./constants");t.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:a.defaultLine,editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:r({editType:"ticks"}),type:{valType:"enumerated",values:["-","linear","log","date","category"],dflt:"-",editType:"calc",_noTemplating:!0},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1}}],editType:"axrange",impliedEdits:{autorange:!1}},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[l.idRegex.x.toString(),l.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],dflt:"range",editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},tickmode:{valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},nticks:{valType:"integer",min:0,dflt:0,editType:"ticks"},tick0:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},dtick:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},tickvals:{valType:"data_array",editType:"ticks"},ticktext:{valType:"data_array",editType:"ticks"},ticks:{valType:"enumerated",values:["outside","inside",""],editType:"ticks"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:{valType:"number",min:0,dflt:5,editType:"ticks"},tickwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},tickcolor:{valType:"color",dflt:a.defaultLine,editType:"ticks"},showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},automargin:{valType:"boolean",dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:o({},i,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor"],dflt:"data",editType:"none"},tickfont:r({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks"},tickformatstops:s("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none"},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:a.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:{valType:"boolean",editType:"ticks"},gridcolor:{valType:"color",dflt:a.lightLine,editType:"ticks"},gridwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:a.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",l.idRegex.x.toString(),l.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",l.idRegex.x.toString(),l.idRegex.y.toString()],editType:"plot"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"}}}},{"../../components/color/attributes":569,"../../components/drawing/attributes":594,"../../lib/extend":685,"../../plot_api/plot_template":734,"../font_attributes":771,"./constants":750}],758:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("../../components/color"),i=e("../../plot_api/plot_template"),o=e("../layout_attributes"),s=e("./layout_attributes"),l=e("./type_defaults"),u=e("./axis_defaults"),c=e("./constraint_defaults"),f=e("./position_defaults"),d=e("./axis_ids"),p=d.id2name,h=d.name2id,m=e("../../registry"),v=m.traceIs,g=m.getComponentMethod;function y(e,t,n){Array.isArray(e[t])?e[t].push(n):e[t]=[n]}t.exports=function(e,t,n){var d,m,b={},x={},_={},w={},T={};for(d=0;d<n.length;d++){var k=n[d];if(v(k,"cartesian")||v(k,"gl2d")){var C,E;if(k.xaxis)C=p(k.xaxis),y(b,C,k);else if(k.xaxes)for(m=0;m<k.xaxes.length;m++)y(b,p(k.xaxes[m]),k);if(k.yaxis)E=p(k.yaxis),y(b,E,k);else if(k.yaxes)for(m=0;m<k.yaxes.length;m++)y(b,p(k.yaxes[m]),k);if(v(k,"carpet")&&("carpet"!==k.type||k._cheater)||C&&(_[C]=1),"carpet"===k.type&&k._cheater&&C&&(x[C]=1),v(k,"2dMap")&&(w[C]=1,w[E]=1),v(k,"oriented")){var M="h"===k.orientation?E:C;T[M]=1}}}var A=t._subplots,S=A.xaxis,O=A.yaxis,P=r.simpleMap(S,p),R=r.simpleMap(O,p),L=P.concat(R),D=a.background;S.length&&O.length&&(D=r.coerce(e,t,o,"plot_bgcolor"));var I,z,j,N,F=a.combine(D,t.paper_bgcolor);function B(e,t){return r.coerce(j,N,s,e,t)}function V(e,t){return r.coerce2(j,N,s,e,t)}function U(e){return"x"===e?O:S}var G={x:U("x"),y:U("y")};function H(t,n){for(var r="x"===t?P:R,a=[],i=0;i<r.length;i++){var o=r[i];o===n||(e[o]||{}).overlaying||a.push(h(o))}return a}for(d=0;d<L.length;d++){I=L[d],z=I.charAt(0),r.isPlainObject(e[I])||(e[I]={}),j=e[I],N=i.newContainer(t,I,z+"axis");var W=b[I]||[];N._traceIndices=W.map(function(e){return e._expandedIndex}),N._annIndices=[],N._shapeIndices=[],N._name=I;var q=N._id=h(I),Y=H(z,I),X={letter:z,font:t.font,outerTicks:w[I],showGrid:!T[I],data:W,bgColor:F,calendar:t.calendar,automargin:!0,cheateronly:"x"===z&&x[I]&&!_[I],splomStash:((t._splomAxes||{})[z]||{})[q]};l(j,N,B,X),u(j,N,B,X,t);var Z=V("spikecolor"),$=V("spikethickness"),K=V("spikedash"),J=V("spikemode"),Q=V("spikesnap"),ee=B("showspikes",!!(Z||$||K||J||Q));ee||(delete N.spikecolor,delete N.spikethickness,delete N.spikedash,delete N.spikemode,delete N.spikesnap);var te={letter:z,counterAxes:G[z],overlayableAxes:Y,grid:t.grid};f(j,N,B,te),N._input=j}var ne=g("rangeslider","handleDefaults"),re=g("rangeselector","handleDefaults");for(d=0;d<P.length;d++)I=P[d],j=e[I],N=t[I],ne(e,t,I),"date"===N.type&&re(j,N,t,R,N.calendar),B("fixedrange");for(d=0;d<R.length;d++){I=R[d],j=e[I],N=t[I];var ae=t[p(N.anchor)],ie=ae&&ae.rangeslider&&ae.rangeslider.visible;B("fixedrange",ie)}t._axisConstraintGroups=[];var oe=G.x.concat(G.y);for(d=0;d<L.length;d++)I=L[d],z=I.charAt(0),j=e[I],N=t[I],c(j,N,B,oe,t)}},{"../../components/color":570,"../../lib":696,"../../plot_api/plot_template":734,"../../registry":827,"../layout_attributes":799,"./axis_defaults":746,"./axis_ids":747,"./constraint_defaults":751,"./layout_attributes":757,"./position_defaults":760,"./type_defaults":768}],759:[function(e,t,n){"use strict";var r=e("tinycolor2").mix,a=e("../../components/color/attributes").lightFraction,i=e("../../lib");t.exports=function(e,t,n,o){var s=(o=o||{}).dfltColor;function l(n,r){return i.coerce2(e,t,o.attributes,n,r)}var u=l("linecolor",s),c=l("linewidth"),f=n("showline",o.showLine||!!u||!!c);f||(delete t.linecolor,delete t.linewidth);var d=r(s,o.bgColor,o.blend||a).toRgbString(),p=l("gridcolor",d),h=l("gridwidth"),m=n("showgrid",o.showGrid||!!p||!!h);if(m||(delete t.gridcolor,delete t.gridwidth),!o.noZeroLine){var v=l("zerolinecolor",s),g=l("zerolinewidth"),y=n("zeroline",o.showGrid||!!v||!!g);y||(delete t.zerolinecolor,delete t.zerolinewidth)}}},{"../../components/color/attributes":569,"../../lib":696,tinycolor2:514}],760:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),a=e("../../lib");t.exports=function(e,t,n,i){var o,s,l,u,c=i.counterAxes||[],f=i.overlayableAxes||[],d=i.letter,p=i.grid;p&&(s=p._domains[d][p._axisMap[t._id]],o=p._anchors[t._id],s&&(l=p[d+"side"].split(" ")[0],u=p.domain[d]["right"===l||"top"===l?1:0])),s=s||[0,1],o=o||(r(e.position)?"free":c[0]||"free"),l=l||("x"===d?"bottom":"left"),u=u||0;var h=a.coerce(e,t,{anchor:{valType:"enumerated",values:["free"].concat(c),dflt:o}},"anchor");"free"===h&&n("position",u),a.coerce(e,t,{side:{valType:"enumerated",values:"x"===d?["bottom","top"]:["left","right"],dflt:l}},"side");var m=!1;if(f.length&&(m=a.coerce(e,t,{overlaying:{valType:"enumerated",values:[!1].concat(f),dflt:!1}},"overlaying")),!m){var v=n("domain",s);v[0]>v[1]-.01&&(t.domain=s),a.noneOrAll(e.domain,t.domain,s)}return n("layer"),t}},{"../../lib":696,"fast-isnumeric":214}],761:[function(e,t,n){"use strict";var r=e("../../constants/alignment").FROM_BL;t.exports=function(e,t,n){void 0===n&&(n=r[e.constraintoward||"center"]);var a=[e.r2l(e.range[0]),e.r2l(e.range[1])],i=a[0]+(a[1]-a[0])*n;e.range=e._input.range=[e.l2r(i+(a[0]-i)*t),e.l2r(i+(a[1]-i)*t)]}},{"../../constants/alignment":668}],762:[function(e,t,n){"use strict";var r=e("polybooljs"),a=e("../../registry"),i=e("../../components/color"),o=e("../../components/fx"),s=e("../../lib/polygon"),l=e("../../lib/throttle"),u=e("../../components/fx/helpers").makeEventData,c=e("./axis_ids").getFromId,f=e("../../lib/clear_gl_canvases"),d=e("../../plot_api/subroutines").redrawReglTraces,p=e("./constants"),h=p.MINSELECT,m=s.filter,v=s.tester;function g(e){return e._id}function y(e,t,n,r,a,i,o){var s,l,u,c,f,d,p,h,m,v,g=t._hoverdata,y=t._fullLayout.clickmode,b=y.indexOf("event")>-1,x=[];if(function(e){return e&&Array.isArray(e)&&!0!==e[0].hoverOnBox}(g)){w(e,t,i),s=k(t,n,r,a);var S=function(e,t){var n,r,a=e[0],i=-1,o=[];for(r=0;r<t.length;r++)if(n=t[r],a.fullData._expandedIndex===n.cd[0].trace._expandedIndex){if(!0===a.hoverOnBox)break;void 0!==a.pointNumber?i=a.pointNumber:void 0!==a.binNumber&&(i=a.binNumber,o=a.pointNumbers);break}return{pointNumber:i,pointNumbers:o,searchInfo:n}}(g,s),O=S.pointNumbers.length>0;if(O?function(e,t){var n,r,a,i=[];for(a=0;a<e.length;a++)(n=e[a]).cd[0].trace.selectedpoints&&n.cd[0].trace.selectedpoints.length>0&&i.push(n);if(1===i.length&&i[0]===t.searchInfo&&(r=t.searchInfo.cd[0].trace).selectedpoints.length===t.pointNumbers.length){for(a=0;a<t.pointNumbers.length;a++)if(r.selectedpoints.indexOf(t.pointNumbers[a])<0)return!1;return!0}return!1}(s,S):function(e){var t,n,r,a=0;for(r=0;r<e.length;r++)if(t=e[r],(n=t.cd[0].trace).selectedpoints){if(n.selectedpoints.length>1)return!1;if((a+=n.selectedpoints.length)>1)return!1}return 1===a}(s)&&(p=E(S))){for(o&&o.remove(),v=0;v<s.length;v++)(l=s[v])._module.selectPoints(l,!1);M(t,s),T(i),b&&t.emit("plotly_deselect",null)}else{h=e.shiftKey&&(void 0!==p?p:E(S)),u=function(e,t,n){return{pointNumber:e,searchInfo:t,subtract:n}}(S.pointNumber,S.searchInfo,h);var P=i.selectionDefs.concat([u]);for(c=_(P),v=0;v<s.length;v++)if(f=s[v]._module.selectPoints(s[v],c),d=A(f,s[v]),x.length)for(var R=0;R<d.length;R++)x.push(d[R]);else x=d;M(t,s,m={points:x}),u&&i&&i.selectionDefs.push(u),o&&C(i.mergedPolygons,o),b&&t.emit("plotly_selected",m)}}}function b(e){return"pointNumber"in e&&"searchInfo"in e}function x(e){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(t,n,r,a){var i=e.searchInfo.cd[0].trace._expandedIndex,o=a.cd[0].trace._expandedIndex;return o===i&&r===e.pointNumber},isRect:!1,degenerate:!1,subtract:e.subtract}}function _(e){for(var t=[],n=b(e[0])?0:e[0][0][0],r=n,a=b(e[0])?0:e[0][0][1],i=a,o=0;o<e.length;o++)if(b(e[o]))t.push(x(e[o]));else{var l=s.tester(e[o]);l.subtract=e[o].subtract,t.push(l),n=Math.min(n,l.xmin),r=Math.max(r,l.xmax),a=Math.min(a,l.ymin),i=Math.max(i,l.ymax)}return{xmin:n,xmax:r,ymin:a,ymax:i,pts:[],contains:function(e,n,r,a){for(var i=!1,o=0;o<t.length;o++)t[o].contains(e,n,r,a)&&(i=!1===t[o].subtract);return i},isRect:!1,degenerate:!1}}function w(e,t,n){var r=t._fullLayout,a=r._zoomlayer,i=n.plotinfo,o=r._lastSelectedSubplot&&r._lastSelectedSubplot===i.id,s=e.shiftKey||e.altKey;o&&s&&i.selection&&i.selection.selectionDefs&&!n.selectionDefs?(n.selectionDefs=i.selection.selectionDefs,n.mergedPolygons=i.selection.mergedPolygons):s&&i.selection||T(n),o||(S(a),r._lastSelectedSubplot=i.id)}function T(e){var t=e.plotinfo;t.selection={},t.selection.selectionDefs=e.selectionDefs=[],t.selection.mergedPolygons=e.mergedPolygons=[]}function k(e,t,n,r){var a,i,o,s=[],l=t.map(g),u=n.map(g);for(o=0;o<e.calcdata.length;o++)if(a=e.calcdata[o],!0===(i=a[0].trace).visible&&i._module&&i._module.selectPoints)if(!r||i.subplot!==r&&i.geo!==r)if("splom"===i.type&&i._xaxes[l[0]]&&i._yaxes[u[0]]){var f=d(i._module,a,t[0],n[0]);f.scene=e._fullLayout._splomScenes[i.uid],s.push(f)}else{if(-1===l.indexOf(i.xaxis))continue;if(-1===u.indexOf(i.yaxis))continue;s.push(d(i._module,a,c(e,i.xaxis),c(e,i.yaxis)))}else s.push(d(i._module,a,t[0],n[0]));return s;function d(e,t,n,r){return{_module:e,cd:t,xaxis:n,yaxis:r}}}function C(e,t){var n,r,a=[];for(n=0;n<e.length;n++){var i=e[n];a.push(i.join("L")+"L"+i[0])}r=e.length>0?"M"+a.join("M")+"Z":"M0,0Z",t.attr("d",r)}function E(e){var t=e.searchInfo.cd[0].trace,n=e.pointNumber,r=e.pointNumbers,a=r.length>0,i=a?r[0]:n;return!!t.selectedpoints&&t.selectedpoints.indexOf(i)>-1}function M(e,t,n){var r,i,o,s;if(n){var l=n.points||[];for(r=0;r<t.length;r++)(s=t[r].cd[0].trace).selectedpoints=[],s._input.selectedpoints=[];for(r=0;r<l.length;r++){var u=l[r],c=u.data,p=u.fullData;u.pointIndices?([].push.apply(c.selectedpoints,u.pointIndices),[].push.apply(p.selectedpoints,u.pointIndices)):(c.selectedpoints.push(u.pointIndex),p.selectedpoints.push(u.pointIndex))}}else for(r=0;r<t.length;r++)delete(s=t[r].cd[0].trace).selectedpoints,delete s._input.selectedpoints;var h=!1;for(r=0;r<t.length;r++){i=t[r],o=i.cd,s=o[0].trace,a.traceIs(s,"regl")&&(h=!0);var m=i._module,v=m.styleOnSelect||m.style;v&&v(e,o)}h&&(f(e),d(e))}function A(e,t){if(Array.isArray(e))for(var n=t.cd,r=t.cd[0].trace,a=0;a<e.length;a++)e[a]=u(e[a],r,n);return e}function S(e){e.selectAll(".select-outline").remove()}t.exports={prepSelect:function(e,t,n,a,s){var u,c,f,d,g,b,x,E=a.gd,S=E._fullLayout,O=S._zoomlayer,P=a.element.getBoundingClientRect(),R=a.plotinfo,L=R.xaxis._offset,D=R.yaxis._offset,I=t-P.left,z=n-P.top,j=I,N=z,F="M"+I+","+z,B=a.xaxes[0]._length,V=a.yaxes[0]._length,U=a.xaxes.concat(a.yaxes),G=e.altKey;w(e,E,a),"lasso"===s&&(u=m([[I,z]],p.BENDPX));var H=O.selectAll("path.select-outline-"+R.id).data([1,2]);H.enter().append("path").attr("class",function(e){return"select-outline select-outline-"+e+" select-outline-"+R.id}).attr("transform","translate("+L+", "+D+")").attr("d",F+"Z");var W,q=O.append("path").attr("class","zoombox-corners").style({fill:i.background,stroke:i.defaultLine,"stroke-width":1}).attr("transform","translate("+L+", "+D+")").attr("d","M0,0Z"),Y=S._uid+p.SELECTID,X=[],Z=k(E,a.xaxes,a.yaxes,a.subplot);function $(e){var t="y"===e._id.charAt(0)?1:0;return function(n){return e.p2d(n[t])}}function K(e,t){return e-t}W=R.fillRangeItems?R.fillRangeItems:"select"===s?function(e,t){var n=e.range={};for(g=0;g<U.length;g++){var r=U[g],a=r._id.charAt(0);n[r._id]=[r.p2d(t[a+"min"]),r.p2d(t[a+"max"])].sort(K)}}:function(e,t,n){var r=e.lassoPoints={};for(g=0;g<U.length;g++){var a=U[g];r[a._id]=n.filtered.map($(a))}},a.moveFn=function(e,t){j=Math.max(0,Math.min(B,e+I)),N=Math.max(0,Math.min(V,t+z));var n=Math.abs(j-I),i=Math.abs(N-z);if("select"===s){var o=S.selectdirection;"h"===(o="any"===S.selectdirection?i<Math.min(.6*n,h)?"h":n<Math.min(.6*i,h)?"v":"d":S.selectdirection)?((d=[[I,0],[I,V],[j,V],[j,0]]).xmin=Math.min(I,j),d.xmax=Math.max(I,j),d.ymin=Math.min(0,V),d.ymax=Math.max(0,V),q.attr("d","M"+d.xmin+","+(z-h)+"h-4v"+2*h+"h4ZM"+(d.xmax-1)+","+(z-h)+"h4v"+2*h+"h-4Z")):"v"===o?((d=[[0,z],[0,N],[B,N],[B,z]]).xmin=Math.min(0,B),d.xmax=Math.max(0,B),d.ymin=Math.min(z,N),d.ymax=Math.max(z,N),q.attr("d","M"+(I-h)+","+d.ymin+"v-4h"+2*h+"v4ZM"+(I-h)+","+(d.ymax-1)+"v4h"+2*h+"v-4Z")):"d"===o&&((d=[[I,z],[I,N],[j,N],[j,z]]).xmin=Math.min(I,j),d.xmax=Math.max(I,j),d.ymin=Math.min(z,N),d.ymax=Math.max(z,N),q.attr("d","M0,0Z"))}else"lasso"===s&&(u.addPt([j,N]),d=u.filtered);a.selectionDefs&&a.selectionDefs.length?(f=function(e,t,n){return n?r.difference({regions:e,inverted:!1},{regions:[t],inverted:!1}).regions:r.union({regions:e,inverted:!1},{regions:[t],inverted:!1}).regions}(a.mergedPolygons,d,G),d.subtract=G,c=_(a.selectionDefs.concat([d]))):(f=[d],c=v(d)),C(f,H),l.throttle(Y,p.SELECTDELAY,function(){X=[];var e,t,n=[];for(g=0;g<Z.length;g++)if(b=Z[g],t=b._module.selectPoints(b,c),n.push(t),e=A(t,b),X.length)for(var r=0;r<e.length;r++)X.push(e[r]);else X=e;M(E,Z,x={points:X}),W(x,d,u),a.gd.emit("plotly_selecting",x)})},a.clickFn=function(e,t){var n=S.clickmode;q.remove(),l.done(Y).then(function(){if(l.clear(Y),2===e){for(H.remove(),g=0;g<Z.length;g++)(b=Z[g])._module.selectPoints(b,!1);M(E,Z),T(a),E.emit("plotly_deselect",null)}else n.indexOf("select")>-1&&y(t,E,a.xaxes,a.yaxes,a.subplot,a,H),"event"===n&&E.emit("plotly_selected",void 0);o.click(E,t)})},a.doneFn=function(){q.remove(),l.done(Y).then(function(){l.clear(Y),a.gd.emit("plotly_selected",x),d&&a.selectionDefs&&(d.subtract=G,a.selectionDefs.push(d),a.mergedPolygons.length=0,[].push.apply(a.mergedPolygons,f))})}},clearSelect:S,selectOnClick:y}},{"../../components/color":570,"../../components/fx":612,"../../components/fx/helpers":609,"../../lib/clear_gl_canvases":680,"../../lib/polygon":708,"../../lib/throttle":721,"../../plot_api/subroutines":735,"../../registry":827,"./axis_ids":747,"./constants":750,polybooljs:456}],763:[function(e,t,n){"use strict";var r=e("d3"),a=e("fast-isnumeric"),i=e("../../lib"),o=i.cleanNumber,s=i.ms2DateTime,l=i.dateTime2ms,u=i.ensureNumber,c=e("../../constants/numerical"),f=c.FP_SAFE,d=c.BADNUM,p=c.LOG_CLIP,h=e("./constants"),m=e("./axis_ids");function v(e){return Math.pow(10,e)}t.exports=function(e,t){t=t||{};var n=(e._id||"x").charAt(0);function c(t,n){if(t>0)return Math.log(t)/Math.LN10;if(t<=0&&n&&e.range&&2===e.range.length){var r=e.range[0],a=e.range[1];return.5*(r+a-2*p*Math.abs(r-a))}return d}function g(t,n,r){var o=l(t,r||e.calendar);if(o===d){if(!a(t))return d;t=+t;var s=Math.floor(10*i.mod(t+.05,1)),u=Math.round(t-s/10);o=l(new Date(u))+s/10}return o}function y(t,n,r){return s(t,n,r||e.calendar)}function b(t){return e._categories[Math.round(t)]}function x(t){if(e._categoriesMap){var n=e._categoriesMap[t];if(void 0!==n)return n}if(a(t))return+t}function _(t){return a(t)?r.round(e._b+e._m*t,2):d}function w(t){return(t-e._b)/e._m}e.c2l="log"===e.type?c:u,e.l2c="log"===e.type?v:u,e.l2p=_,e.p2l=w,e.c2p="log"===e.type?function(e,t){return _(c(e,t))}:_,e.p2c="log"===e.type?function(e){return v(w(e))}:w,-1!==["linear","-"].indexOf(e.type)?(e.d2r=e.r2d=e.d2c=e.r2c=e.d2l=e.r2l=o,e.c2d=e.c2r=e.l2d=e.l2r=u,e.d2p=e.r2p=function(t){return e.l2p(o(t))},e.p2d=e.p2r=w,e.cleanPos=u):"log"===e.type?(e.d2r=e.d2l=function(e,t){return c(o(e),t)},e.r2d=e.r2c=function(e){return v(o(e))},e.d2c=e.r2l=o,e.c2d=e.l2r=u,e.c2r=c,e.l2d=v,e.d2p=function(t,n){return e.l2p(e.d2r(t,n))},e.p2d=function(e){return v(w(e))},e.r2p=function(t){return e.l2p(o(t))},e.p2r=w,e.cleanPos=u):"date"===e.type?(e.d2r=e.r2d=i.identity,e.d2c=e.r2c=e.d2l=e.r2l=g,e.c2d=e.c2r=e.l2d=e.l2r=y,e.d2p=e.r2p=function(t,n,r){return e.l2p(g(t,0,r))},e.p2d=e.p2r=function(e,t,n){return y(w(e),t,n)},e.cleanPos=function(t){return i.cleanDate(t,d,e.calendar)}):"category"===e.type&&(e.d2c=e.d2l=function(t){if(null!==t&&void 0!==t){if(void 0===e._categoriesMap&&(e._categoriesMap={}),void 0!==e._categoriesMap[t])return e._categoriesMap[t];e._categories.push(t);var n=e._categories.length-1;return e._categoriesMap[t]=n,n}return d},e.r2d=e.c2d=e.l2d=b,e.d2r=e.d2l_noadd=x,e.r2c=function(t){var n=x(t);return void 0!==n?n:e.fraction2r(.5)},e.l2r=e.c2r=u,e.r2l=x,e.d2p=function(t){return e.l2p(e.r2c(t))},e.p2d=function(e){return b(w(e))},e.r2p=e.d2p,e.p2r=w,e.cleanPos=function(e){return"string"==typeof e&&""!==e?e:u(e)}),e.fraction2r=function(t){var n=e.r2l(e.range[0]),r=e.r2l(e.range[1]);return e.l2r(n+t*(r-n))},e.r2fraction=function(t){var n=e.r2l(e.range[0]),r=e.r2l(e.range[1]);return(e.r2l(t)-n)/(r-n)},e.cleanRange=function(t,r){r||(r={}),t||(t="range");var o,s,l=i.nestedProperty(e,t).get();if(s=(s="date"===e.type?i.dfltRange(e.calendar):"y"===n?h.DFLTRANGEY:r.dfltRange||h.DFLTRANGEX).slice(),l&&2===l.length)for("date"===e.type&&(l[0]=i.cleanDate(l[0],d,e.calendar),l[1]=i.cleanDate(l[1],d,e.calendar)),o=0;o<2;o++)if("date"===e.type){if(!i.isDateTime(l[o],e.calendar)){e[t]=s;break}if(e.r2l(l[0])===e.r2l(l[1])){var u=i.constrain(e.r2l(l[0]),i.MIN_MS+1e3,i.MAX_MS-1e3);l[0]=e.l2r(u-1e3),l[1]=e.l2r(u+1e3);break}}else{if(!a(l[o])){if(!a(l[1-o])){e[t]=s;break}l[o]=l[1-o]*(o?10:.1)}if(l[o]<-f?l[o]=-f:l[o]>f&&(l[o]=f),l[0]===l[1]){var c=Math.max(1,Math.abs(1e-6*l[0]));l[0]-=c,l[1]+=c}}else i.nestedProperty(e,t).set(s)},e.setScale=function(r){var a=t._size;if(e._categories||(e._categories=[]),e._categoriesMap||(e._categoriesMap={}),e.overlaying){var i=m.getFromId({_fullLayout:t},e.overlaying);e.domain=i.domain}var o=r&&e._r?"_r":"range",s=e.calendar;e.cleanRange(o);var l=e.r2l(e[o][0],s),u=e.r2l(e[o][1],s);if("y"===n?(e._offset=a.t+(1-e.domain[1])*a.h,e._length=a.h*(e.domain[1]-e.domain[0]),e._m=e._length/(l-u),e._b=-e._m*u):(e._offset=a.l+e.domain[0]*a.w,e._length=a.w*(e.domain[1]-e.domain[0]),e._m=e._length/(u-l),e._b=-e._m*l),!isFinite(e._m)||!isFinite(e._b))throw t._replotting=!1,new Error("Something went wrong with axis scaling")},e.makeCalcdata=function(t,n){var r,a,o,s,l=e.type,u="date"===l&&t[n+"calendar"];if(n in t){if(r=t[n],s=t._length||r.length,i.isTypedArray(r)&&("linear"===l||"log"===l)){if(s===r.length)return r;if(r.subarray)return r.subarray(0,s)}for(a=new Array(s),o=0;o<s;o++)a[o]=e.d2c(r[o],0,u)}else{var c=n+"0"in t?e.d2c(t[n+"0"],0,u):0,f=t["d"+n]?Number(t["d"+n]):1;for(r=t[{x:"y",y:"x"}[n]],s=t._length||r.length,a=new Array(s),o=0;o<s;o++)a[o]=c+o*f}return a},e.isValidRange=function(t){return Array.isArray(t)&&2===t.length&&a(e.r2l(t[0]))&&a(e.r2l(t[1]))},e.isPtWithinRange=function(t,r){var a=e.c2l(t[n],null,r),i=e.r2l(e.range[0]),o=e.r2l(e.range[1]);return i<o?i<=a&&a<=o:o<=a&&a<=i},e.clearCalc=function(){e._categories=(e._initialCategories||[]).slice(),e._categoriesMap={};for(var t=0;t<e._categories.length;t++)e._categoriesMap[e._categories[t]]=t};var T=t._d3locale;"date"===e.type&&(e._dateFormat=T?T.timeFormat.utc:r.time.format.utc,e._extraFormat=t._extraFormat),e._separators=t.separators,e._numFormat=T?T.numberFormat:r.format,delete e._minDtick,delete e._forceTick0}},{"../../constants/numerical":673,"../../lib":696,"./axis_ids":747,"./constants":750,d3:148,"fast-isnumeric":214}],764:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("./layout_attributes"),i=e("../array_container_defaults");function o(e,t){function n(n,i){return r.coerce(e,t,a.tickformatstops,n,i)}var i=n("enabled");i&&(n("dtickrange"),n("value"))}t.exports=function(e,t,n,s,l){var u=function(e){var t=["showexponent","showtickprefix","showticksuffix"].filter(function(t){return void 0!==e[t]});if(t.every(function(n){return e[n]===e[t[0]]})||1===t.length)return e[t[0]]}(e),c=n("tickprefix");c&&n("showtickprefix",u);var f=n("ticksuffix",l.tickSuffixDflt);f&&n("showticksuffix",u);var d=n("showticklabels");if(d){var p=l.font||{},h=t.color,m=h&&h!==a.color.dflt?h:p.color;if(r.coerceFont(n,"tickfont",{family:p.family,size:p.size,color:m}),n("tickangle"),"category"!==s){var v=n("tickformat"),g=e.tickformatstops;Array.isArray(g)&&g.length&&i(e,t,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:o}),v||"date"===s||(n("showexponent",u),n("exponentformat"),n("separatethousands"))}}}},{"../../lib":696,"../array_container_defaults":740,"./layout_attributes":757}],765:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("./layout_attributes");t.exports=function(e,t,n,i){var o=r.coerce2(e,t,a,"ticklen"),s=r.coerce2(e,t,a,"tickwidth"),l=r.coerce2(e,t,a,"tickcolor",t.color),u=n("ticks",i.outerTicks||o||s||l?"outside":"");u||(delete t.ticklen,delete t.tickwidth,delete t.tickcolor)}},{"../../lib":696,"./layout_attributes":757}],766:[function(e,t,n){"use strict";var r=e("./clean_ticks");t.exports=function(e,t,n,a){var i;if("array"!==e.tickmode||"log"!==a&&"date"!==a){var o=Array.isArray(e.tickvals)?"array":e.dtick?"linear":"auto";i=n("tickmode",o)}else i=t.tickmode="auto";if("auto"===i)n("nticks");else if("linear"===i){var s=t.dtick=r.dtick(e.dtick,a);t.tick0=r.tick0(e.tick0,a,t.calendar,s)}else{var l=n("tickvals");void 0===l?t.tickmode="auto":n("ticktext")}}},{"./clean_ticks":749}],767:[function(e,t,n){"use strict";var r=e("d3"),a=e("../../registry"),i=e("../../components/drawing"),o=e("./axes"),s=e("./constants").attrRegex;t.exports=function(e,t,n,l){var u,c,f,d,p=e._fullLayout,h=[],m=function(e){var t,n,r,a,i={};for(t in e)if((n=t.split("."))[0].match(s)){var o=t.charAt(0),l=n[0];if(r=p[l],a={},Array.isArray(e[t])?a.to=e[t].slice(0):Array.isArray(e[t].range)&&(a.to=e[t].range.slice(0)),!a.to)continue;a.axisName=l,a.length=r._length,h.push(o),i[o]=a}return i}(t),v=Object.keys(m),g=function(e,t,n){var r,a,i,o=e._plots,s=[];for(r in o){var l=o[r];if(-1===s.indexOf(l)){var u=l.xaxis._id,c=l.yaxis._id,f=l.xaxis.range,d=l.yaxis.range;l.xaxis._r=l.xaxis.range.slice(),l.yaxis._r=l.yaxis.range.slice(),a=n[u]?n[u].to:f,i=n[c]?n[c].to:d,f[0]===a[0]&&f[1]===a[1]&&d[0]===i[0]&&d[1]===i[1]||-1===t.indexOf(u)&&-1===t.indexOf(c)||s.push(l)}}return s}(p,v,m);if(!g.length)return function(){function t(t,n,r){for(var a=0;a<t.length;a++)if(n(e,a),r)return}t(p.annotations||[],a.getComponentMethod("annotations","drawOne")),t(p.shapes||[],a.getComponentMethod("shapes","drawOne")),t(p.images||[],a.getComponentMethod("images","draw"),!0)}(),!1;function y(e){var t=e.xaxis,n=e.yaxis;p._defs.select("#"+e.clipId+"> rect").call(i.setTranslate,0,0).call(i.setScale,1,1),e.plot.call(i.setTranslate,t._offset,n._offset).call(i.setScale,1,1);var r=e.plot.selectAll(".scatterlayer .trace");r.selectAll(".point").call(i.setPointGroupScale,1,1),r.selectAll(".textpoint").call(i.setTextPointsScale,1,1),r.call(i.hideOutsideRangePoints,e)}function b(t,n){var r,s,l,u=m[t.xaxis._id],c=m[t.yaxis._id],f=[];if(u){r=e._fullLayout[u.axisName],s=r._r,l=u.to,f[0]=(s[0]*(1-n)+n*l[0]-s[0])/(s[1]-s[0])*t.xaxis._length;var d=s[1]-s[0],h=l[1]-l[0];r.range[0]=s[0]*(1-n)+n*l[0],r.range[1]=s[1]*(1-n)+n*l[1],f[2]=t.xaxis._length*(1-n+n*h/d)}else f[0]=0,f[2]=t.xaxis._length;if(c){r=e._fullLayout[c.axisName],s=r._r,l=c.to,f[1]=(s[1]*(1-n)+n*l[1]-s[1])/(s[0]-s[1])*t.yaxis._length;var v=s[1]-s[0],g=l[1]-l[0];r.range[0]=s[0]*(1-n)+n*l[0],r.range[1]=s[1]*(1-n)+n*l[1],f[3]=t.yaxis._length*(1-n+n*g/v)}else f[1]=0,f[3]=t.yaxis._length;!function(t,n){var r,i=[];for(i=[t._id,n._id],r=0;r<i.length;r++)o.doTicksSingle(e,i[r],!0);function s(t,n,a){for(r=0;r<t.length;r++){var o=t[r];if(-1===i.indexOf(o.xref)&&-1===i.indexOf(o.yref)||n(e,r),a)return}}s(p.annotations||[],a.getComponentMethod("annotations","drawOne")),s(p.shapes||[],a.getComponentMethod("shapes","drawOne")),s(p.images||[],a.getComponentMethod("images","draw"),!0)}(t.xaxis,t.yaxis);var y=t.xaxis,b=t.yaxis,x=!!u,_=!!c,w=x?y._length/f[2]:1,T=_?b._length/f[3]:1,k=x?f[0]:0,C=_?f[1]:0,E=x?f[0]/f[2]*y._length:0,M=_?f[1]/f[3]*b._length:0,A=y._offset-E,S=b._offset-M;t.clipRect.call(i.setTranslate,k,C).call(i.setScale,1/w,1/T),t.plot.call(i.setTranslate,A,S).call(i.setScale,w,T),i.setPointGroupScale(t.zoomScalePts,1/w,1/T),i.setTextPointsScale(t.zoomScaleTxt,1/w,1/T)}l&&(u=l());var x=r.ease(n.easing);return e._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(d),d=null,function(){for(var t={},n=0;n<v.length;n++){var r=e._fullLayout[v[n]+"axis"];t[r._name+".range[0]"]=r.range[0],t[r._name+".range[1]"]=r.range[1],r.range=r._r.slice()}return a.call("relayout",e,t).then(function(){for(var e=0;e<g.length;e++)y(g[e])})}()}),c=Date.now(),d=window.requestAnimationFrame(function t(){f=Date.now();for(var r=Math.min(1,(f-c)/n.duration),i=x(r),o=0;o<g.length;o++)b(g[o],i);f-c>n.duration?(function(){for(var t={},n=0;n<v.length;n++){var r=e._fullLayout[m[v[n]].axisName],i=m[v[n]].to;t[r._name+".range[0]"]=i[0],t[r._name+".range[1]"]=i[1],r.range=i.slice()}u&&u(),a.call("relayout",e,t).then(function(){for(var e=0;e<g.length;e++)y(g[e])})}(),d=window.cancelAnimationFrame(t)):d=window.requestAnimationFrame(t)}),Promise.resolve()}},{"../../components/drawing":595,"../../registry":827,"./axes":744,"./constants":750,d3:148}],768:[function(e,t,n){"use strict";var r=e("../../registry"),a=e("./axis_autotype");function i(e){return{v:"x",h:"y"}[e.orientation||"v"]}function o(e,t){var n=i(e),a=r.traceIs(e,"box-violin"),o=r.traceIs(e._fullInput||{},"candlestick");return a&&!o&&t===n&&void 0===e[n]&&void 0===e[n+"0"]}t.exports=function(e,t,n,s){var l=n("type",(s.splomStash||{}).type);"-"===l&&(function(e,t){if("-"===e.type){var n=e._id,s=n.charAt(0);-1!==n.indexOf("scene")&&(n=s);var l=function(e,t,n){for(var r=0;r<e.length;r++){var a=e[r];if("splom"===a.type&&a._length>0&&(a["_"+n+"axes"]||{})[t])return a;if((a[n+"axis"]||n)===t){if(o(a,n))return a;if((a[n]||[]).length||a[n+"0"])return a}}}(t,n,s);if(l)if("histogram"!==l.type||s!=={v:"y",h:"x"}[l.orientation||"v"]){var u,c=s+"calendar",f=l[c];if(o(l,s)){var d=i(l),p=[];for(u=0;u<t.length;u++){var h=t[u];r.traceIs(h,"box-violin")&&(h[s+"axis"]||s)===n&&(void 0!==h[d]?p.push(h[d][0]):void 0!==h.name?p.push(h.name):p.push("text"),h[c]!==f&&(f=void 0))}e.type=a(p,f)}else if("splom"===l.type){var m=l.dimensions,v=l._diag;for(u=0;u<m.length;u++){var g=m[u];if(g.visible&&(v[u][0]===n||v[u][1]===n)){e.type=a(g.values,f);break}}}else e.type=a(l[s]||[l[s+"0"]],f)}else e.type="linear"}}(t,s.data),"-"===t.type?t.type="linear":e.type=t.type)}},{"../../registry":827,"./axis_autotype":745}],769:[function(e,t,n){"use strict";var r=e("../registry"),a=e("../lib");function i(e,t,n){var r,i,o,s=!1;if("data"===t.type)r=e._fullData[null!==t.traces?t.traces[0]:0];else{if("layout"!==t.type)return!1;r=e._fullLayout}return i=a.nestedProperty(r,t.prop).get(),(o=n[t.type]=n[t.type]||{}).hasOwnProperty(t.prop)&&o[t.prop]!==i&&(s=!0),o[t.prop]=i,{changed:s,value:i}}function o(e,t){var n=[],r=t[0],i={};if("string"==typeof r)i[r]=t[1];else{if(!a.isPlainObject(r))return n;i=r}return l(i,function(e,t,r){n.push({type:"layout",prop:e,value:r})},"",0),n}function s(e,t){var n,r,i,o,s=[];if(r=t[0],i=t[1],n=t[2],o={},"string"==typeof r)o[r]=i;else{if(!a.isPlainObject(r))return s;o=r,void 0===n&&(n=i)}return void 0===n&&(n=null),l(o,function(t,r,a){var i;if(Array.isArray(a)){var o=Math.min(a.length,e.data.length);n&&(o=Math.min(o,n.length)),i=[];for(var l=0;l<o;l++)i[l]=n?n[l]:l}else i=n?n.slice(0):null;if(null===i)Array.isArray(a)&&(a=a[0]);else if(Array.isArray(i)){if(!Array.isArray(a)){var u=a;a=[];for(var c=0;c<i.length;c++)a[c]=u}a.length=Math.min(i.length,a.length)}s.push({type:"data",prop:t,traces:i,value:a})},"",0),s}function l(e,t,n,r){Object.keys(e).forEach(function(i){var o=e[i];if("_"!==i[0]){var s=n+(r>0?".":"")+i;a.isPlainObject(o)?l(o,t,s,r+1):t(s,i,o)}})}n.manageCommandObserver=function(e,t,r,o){var s={},l=!0;t&&t._commandObserver&&(s=t._commandObserver),s.cache||(s.cache={}),s.lookupTable={};var u=n.hasSimpleAPICommandBindings(e,r,s.lookupTable);if(t&&t._commandObserver){if(u)return s;if(t._commandObserver.remove)return t._commandObserver.remove(),t._commandObserver=null,s}if(u){i(e,u,s.cache),s.check=function(){if(l){var t=i(e,u,s.cache);return t.changed&&o&&void 0!==s.lookupTable[t.value]&&(s.disable(),Promise.resolve(o({value:t.value,type:u.type,prop:u.prop,traces:u.traces,index:s.lookupTable[t.value]})).then(s.enable,s.enable)),t.changed}};for(var c=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],f=0;f<c.length;f++)e._internalOn(c[f],s.check);s.remove=function(){for(var t=0;t<c.length;t++)e._removeInternalListener(c[t],s.check)}}else a.log("Unable to automatically bind plot updates to API command"),s.lookupTable={},s.remove=function(){};return s.disable=function(){l=!1},s.enable=function(){l=!0},t&&(t._commandObserver=s),s},n.hasSimpleAPICommandBindings=function(e,t,r){var a,i,o=t.length;for(a=0;a<o;a++){var s,l=t[a],u=l.method,c=l.args;if(Array.isArray(c)||(c=[]),!u)return!1;var f=n.computeAPICommandBindings(e,u,c);if(1!==f.length)return!1;if(i){if((s=f[0]).type!==i.type)return!1;if(s.prop!==i.prop)return!1;if(Array.isArray(i.traces)){if(!Array.isArray(s.traces))return!1;s.traces.sort();for(var d=0;d<i.traces.length;d++)if(i.traces[d]!==s.traces[d])return!1}else if(s.prop!==i.prop)return!1}else i=f[0],Array.isArray(i.traces)&&i.traces.sort();var p=(s=f[0]).value;if(Array.isArray(p)){if(1!==p.length)return!1;p=p[0]}r&&(r[p]=a)}return i},n.executeAPICommand=function(e,t,n){if("skip"===t)return Promise.resolve();var i=r.apiMethodRegistry[t],o=[e];Array.isArray(n)||(n=[]);for(var s=0;s<n.length;s++)o.push(n[s]);return i.apply(null,o).catch(function(e){return a.warn("API call to Plotly."+t+" rejected.",e),Promise.reject(e)})},n.computeAPICommandBindings=function(e,t,n){var r;switch(Array.isArray(n)||(n=[]),t){case"restyle":r=s(e,n);break;case"relayout":r=o(0,n);break;case"update":r=s(e,[n[0],n[2]]).concat(o(0,[n[1]]));break;case"animate":r=function(e,t){return Array.isArray(t[0])&&1===t[0].length&&-1!==["string","number"].indexOf(typeof t[0][0])?[{type:"layout",prop:"_currentFrame",value:t[0][0].toString()}]:[]}(0,n);break;default:r=[]}return r}},{"../lib":696,"../registry":827}],770:[function(e,t,n){"use strict";var r=e("../lib/extend").extendFlat;n.attributes=function(e,t){e=e||{},t=t||{};var n={valType:"info_array",editType:e.editType,items:[{valType:"number",min:0,max:1,editType:e.editType},{valType:"number",min:0,max:1,editType:e.editType}],dflt:[0,1]},a=(e.name&&e.name,e.trace,t.description&&t.description,{x:r({},n,{}),y:r({},n,{}),editType:e.editType});return e.noGridCell||(a.row={valType:"integer",min:0,dflt:0,editType:e.editType},a.column={valType:"integer",min:0,dflt:0,editType:e.editType}),a},n.defaults=function(e,t,n,r){var a=r&&r.x||[0,1],i=r&&r.y||[0,1],o=t.grid;if(o){var s=n("domain.column");void 0!==s&&(s<o.columns?a=o._domains.x[s]:delete e.domain.column);var l=n("domain.row");void 0!==l&&(l<o.rows?i=o._domains.y[l]:delete e.domain.row)}n("domain.x",a),n("domain.y",i)}},{"../lib/extend":685}],771:[function(e,t,n){"use strict";t.exports=function(e){var t=e.editType,n=e.colorEditType;void 0===n&&(n=t);var r={family:{valType:"string",noBlank:!0,strict:!0,editType:t},size:{valType:"number",min:1,editType:t},color:{valType:"color",editType:n},editType:t};return e.arrayOk&&(r.family.arrayOk=!0,r.size.arrayOk=!0,r.color.arrayOk=!0),r}},{}],772:[function(e,t,n){"use strict";t.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],773:[function(e,t,n){"use strict";n.projNames={equirectangular:"equirectangular",mercator:"mercator",orthographic:"orthographic","natural earth":"naturalEarth",kavrayskiy7:"kavrayskiy7",miller:"miller",robinson:"robinson",eckert4:"eckert4","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant","conic equal area":"conicEqualArea","conic conformal":"conicConformal","conic equidistant":"conicEquidistant",gnomonic:"gnomonic",stereographic:"stereographic",mollweide:"mollweide",hammer:"hammer","transverse mercator":"transverseMercator","albers usa":"albersUsa","winkel tripel":"winkel3",aitoff:"aitoff",sinusoidal:"sinusoidal"},n.axesNames=["lonaxis","lataxis"],n.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},n.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},n.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},n.clipPad=.001,n.precision=.1,n.landColor="#F0DC82",n.waterColor="#3399FF",n.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},n.sphereSVG={type:"Sphere"},n.fillLayers={ocean:1,land:1,lakes:1},n.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},n.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],n.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],n.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},{}],774:[function(e,t,n){"use strict";var r=e("d3"),a=e("../../registry"),i=e("../../lib"),o=e("../../components/color"),s=e("../../components/drawing"),l=e("../../components/fx"),u=e("../plots"),c=e("../cartesian/axes"),f=e("../../components/dragelement"),d=e("../cartesian/select").prepSelect,p=e("../cartesian/select").selectOnClick,h=e("./zoom"),m=e("./constants"),v=e("../../lib/topojson_utils"),g=e("topojson-client").feature;function y(e){this.id=e.id,this.graphDiv=e.graphDiv,this.container=e.container,this.topojsonURL=e.topojsonURL,this.isStatic=e.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}e("./projections")(r);var b=y.prototype;t.exports=function(e){return new y(e)},b.plot=function(e,t,n){var r=this,a=t[this.id],i=v.getTopojsonName(a);null===r.topojson||i!==r.topojsonName?(r.topojsonName=i,void 0===PlotlyGeoAssets.topojson[r.topojsonName]?n.push(r.fetchTopojson().then(function(n){PlotlyGeoAssets.topojson[r.topojsonName]=n,r.topojson=n,r.update(e,t)})):(r.topojson=PlotlyGeoAssets.topojson[r.topojsonName],r.update(e,t))):r.update(e,t)},b.fetchTopojson=function(){var e=v.getTopojsonPath(this.topojsonURL,this.topojsonName);return new Promise(function(t,n){r.json(e,function(r,a){if(r)return 404===r.status?n(new Error(["plotly.js could not find topojson file at",e,".","Make sure the *topojsonURL* plot config option","is set properly."].join(" "))):n(new Error(["unexpected error while fetching topojson file at",e].join(" ")));t(a)})})},b.update=function(e,t){var n=t[this.id],r=this.updateProjection(t,n);if(!r){this.hasChoropleth=!1;for(var a=0;a<e.length;a++)if("choropleth"===e[a][0].trace.type){this.hasChoropleth=!0;break}this.viewInitial||this.saveViewInitial(n),this.updateBaseLayers(t,n),this.updateDims(t,n),this.updateFx(t,n),u.generalUpdatePerTraceModule(this.graphDiv,this,e,n);var i=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=i.selectAll(".point"),this.dataPoints.text=i.selectAll("text"),this.dataPaths.line=i.selectAll(".js-line");var o=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=o.selectAll("path"),this.render()}},b.updateProjection=function(e,t){var n=e._size,o=t.domain,s=t.projection,l=s.rotation||{},u=t.center||{},c=this.projection=function(e){for(var t=e.projection.type,n=r.geo[m.projNames[t]](),a=e._isClipped?m.lonaxisSpan[t]/2:null,i=["center","rotate","parallels","clipExtent"],o=function(e){return e?n:[]},s=0;s<i.length;s++){var l=i[s];"function"!=typeof n[l]&&(n[l]=o)}return n.isLonLatOverEdges=function(e){if(null===n(e))return!0;if(a){var t=n.rotate();return r.geo.distance(e,[-t[0],-t[1]])>a*Math.PI/180}return!1},n.getPath=function(){return r.geo.path().projection(n)},n.getBounds=function(e){return n.getPath().bounds(e)},n.fitExtent=function(e,t){var r=e[1][0]-e[0][0],a=e[1][1]-e[0][1],i=n.clipExtent&&n.clipExtent();n.scale(150).translate([0,0]),i&&n.clipExtent(null);var o=n.getBounds(t),s=Math.min(r/(o[1][0]-o[0][0]),a/(o[1][1]-o[0][1])),l=+e[0][0]+(r-s*(o[1][0]+o[0][0]))/2,u=+e[0][1]+(a-s*(o[1][1]+o[0][1]))/2;return i&&n.clipExtent(i),n.scale(150*s).translate([l,u])},n.precision(m.precision),a&&n.clipAngle(a-m.clipPad),n}(t);c.center([u.lon-l.lon,u.lat-l.lat]).rotate([-l.lon,-l.lat,l.roll]).parallels(s.parallels);var f=[[n.l+n.w*o.x[0],n.t+n.h*(1-o.y[1])],[n.l+n.w*o.x[1],n.t+n.h*(1-o.y[0])]],d=t.lonaxis,p=t.lataxis,h=function(e,t){var n=m.clipPad,r=e[0]+n,a=e[1]-n,i=t[0]+n,o=t[1]-n;r>0&&a<0&&(a+=360);var s=(a-r)/4;return{type:"Polygon",coordinates:[[[r,i],[r,o],[r+s,o],[r+2*s,o],[r+3*s,o],[a,o],[a,i],[a-s,i],[a-2*s,i],[a-3*s,i],[r,i]]]}}(d.range,p.range);c.fitExtent(f,h);var v=this.bounds=c.getBounds(h),g=this.fitScale=c.scale(),y=c.translate();if(!isFinite(v[0][0])||!isFinite(v[0][1])||!isFinite(v[1][0])||!isFinite(v[1][1])||isNaN(y[0])||isNaN(y[0])){for(var b=this.graphDiv,x=["projection.rotation","center","lonaxis.range","lataxis.range"],_="Invalid geo settings, relayout'ing to default view.",w={},T=0;T<x.length;T++)w[this.id+"."+x[T]]=null;return this.viewInitial=null,i.warn(_),b._promises.push(a.call("relayout",b,w)),_}var k=this.midPt=[(v[0][0]+v[1][0])/2,(v[0][1]+v[1][1])/2];if(c.scale(s.scale*g).translate([y[0]+(k[0]-y[0]),y[1]+(k[1]-y[1])]).clipExtent(v),t._isAlbersUsa){var C=c([u.lon,u.lat]),E=c.translate();c.translate([E[0]-(C[0]-E[0]),E[1]-(C[1]-E[1])])}},b.updateBaseLayers=function(e,t){var n=this,a=n.topojson,i=n.layers,l=n.basePaths;function u(e){return"lonaxis"===e||"lataxis"===e}function c(e){return Boolean(m.lineLayers[e])}function f(e){return Boolean(m.fillLayers[e])}var d=this.hasChoropleth?m.layersForChoropleth:m.layers,p=d.filter(function(e){return c(e)||f(e)?t["show"+e]:!u(e)||t[e].showgrid}),h=n.framework.selectAll(".layer").data(p,String);h.exit().each(function(e){delete i[e],delete l[e],r.select(this).remove()}),h.enter().append("g").attr("class",function(e){return"layer "+e}).each(function(e){var t=i[e]=r.select(this);"bg"===e?n.bgRect=t.append("rect").style("pointer-events","all"):u(e)?l[e]=t.append("path").style("fill","none"):"backplot"===e?t.append("g").classed("choroplethlayer",!0):"frontplot"===e?t.append("g").classed("scatterlayer",!0):c(e)?l[e]=t.append("path").style("fill","none").style("stroke-miterlimit",2):f(e)&&(l[e]=t.append("path").style("stroke","none"))}),h.order(),h.each(function(e){var n=l[e],i=m.layerNameToAdjective[e];"frame"===e?n.datum(m.sphereSVG):c(e)||f(e)?n.datum(g(a,a.objects[e])):u(e)&&n.datum(function(e,t){var n=t[e].dtick,a=m.scopeDefaults[t.scope],i=a.lonaxisRange,o=a.lataxisRange,s="lonaxis"===e?[n]:[0,n];return r.geo.graticule().extent([[i[0],o[0]],[i[1],o[1]]]).step(s)}(e,t)).call(o.stroke,t[e].gridcolor).call(s.dashLine,"",t[e].gridwidth),c(e)?n.call(o.stroke,t[i+"color"]).call(s.dashLine,"",t[i+"width"]):f(e)&&n.call(o.fill,t[i+"color"])})},b.updateDims=function(e,t){var n=this.bounds,r=(t.framewidth||0)/2,a=n[0][0]-r,i=n[0][1]-r,l=n[1][0]-a+r,u=n[1][1]-i+r;s.setRect(this.clipRect,a,i,l,u),this.bgRect.call(s.setRect,a,i,l,u).call(o.fill,t.bgcolor),this.xaxis._offset=a,this.xaxis._length=l,this.yaxis._offset=i,this.yaxis._length=u},b.updateFx=function(e,t){var n=this,i=n.graphDiv,o=n.bgRect,s=e.dragmode,u=e.clickmode;if(!n.isStatic){var c;"select"===s?c=function(e,t){var r=e.range={};r[n.id]=[v([t.xmin,t.ymin]),v([t.xmax,t.ymax])]}:"lasso"===s&&(c=function(e,t,r){var a=e.lassoPoints={};a[n.id]=r.filtered.map(v)});var m={element:n.bgRect.node(),gd:i,plotinfo:{id:n.id,xaxis:n.xaxis,yaxis:n.yaxis,fillRangeItems:c},xaxes:[n.xaxis],yaxes:[n.yaxis],subplot:n.id,clickFn:function(t){2===t&&e._zoomlayer.selectAll(".select-outline").remove()}};"pan"===s?(o.node().onmousedown=null,o.call(h(n,t)),o.on("dblclick.zoom",function(){var e=n.viewInitial,t={};for(var r in e)t[n.id+"."+r]=e[r];a.call("relayout",i,t),i.emit("plotly_doubleclick",null)})):"select"!==s&&"lasso"!==s||(o.on(".zoom",null),m.prepFn=function(e,t,n){d(e,t,n,m,s)},f.init(m)),o.on("mousemove",function(){var e=n.projection.invert(r.mouse(this));if(!e||isNaN(e[0])||isNaN(e[1]))return f.unhover(i,r.event);n.xaxis.p2c=function(){return e[0]},n.yaxis.p2c=function(){return e[1]},l.hover(i,r.event,n.id)}),o.on("mouseout",function(){i._dragging||f.unhover(i,r.event)}),o.on("click",function(){"select"!==s&&"lasso"!==s&&(u.indexOf("select")>-1&&p(r.event,i,[n.xaxis],[n.yaxis],n.id,m),u.indexOf("event")>-1&&l.click(i,r.event))})}function v(e){return n.projection.invert([e[0]+n.xaxis._offset,e[1]+n.yaxis._offset])}},b.makeFramework=function(){var e=this,t=e.graphDiv._fullLayout,n="clip"+t._uid+e.id;e.clipDef=t._clips.append("clipPath").attr("id",n),e.clipRect=e.clipDef.append("rect"),e.framework=r.select(e.container).append("g").attr("class","geo "+e.id).call(s.setClipUrl,n),e.project=function(t){var n=e.projection(t);return n?[n[0]-e.xaxis._offset,n[1]-e.yaxis._offset]:[null,null]},e.xaxis={_id:"x",c2p:function(t){return e.project(t)[0]}},e.yaxis={_id:"y",c2p:function(t){return e.project(t)[1]}},e.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},c.setConvert(e.mockAxis,t)},b.saveViewInitial=function(e){var t=e.center||{},n=e.projection,r=n.rotation||{};e._isScoped?this.viewInitial={"center.lon":t.lon,"center.lat":t.lat,"projection.scale":n.scale}:e._isClipped?this.viewInitial={"projection.scale":n.scale,"projection.rotation.lon":r.lon,"projection.rotation.lat":r.lat}:this.viewInitial={"center.lon":t.lon,"center.lat":t.lat,"projection.scale":n.scale,"projection.rotation.lon":r.lon}},b.render=function(){var e,t=this.projection,n=t.getPath();function r(e){var n=t(e.lonlat);return n?"translate("+n[0]+","+n[1]+")":null}function a(e){return t.isLonLatOverEdges(e.lonlat)?"none":null}for(e in this.basePaths)this.basePaths[e].attr("d",n);for(e in this.dataPaths)this.dataPaths[e].attr("d",function(e){return n(e.geojson)});for(e in this.dataPoints)this.dataPoints[e].attr("display",a).attr("transform",r)}},{"../../components/color":570,"../../components/dragelement":592,"../../components/drawing":595,"../../components/fx":612,"../../lib":696,"../../lib/topojson_utils":723,"../../registry":827,"../cartesian/axes":744,"../cartesian/select":762,"../plots":808,"./constants":773,"./projections":779,"./zoom":780,d3:148,"topojson-client":517}],775:[function(e,t,n){"use strict";var r=e("./geo"),a=e("../../plots/get_data").getSubplotCalcData,i=e("../../lib").counterRegex,o="geo";n.name=o,n.attr=o,n.idRoot=o,n.idRegex=n.attrRegex=i(o),n.attributes=e("./layout/attributes"),n.layoutAttributes=e("./layout/layout_attributes"),n.supplyLayoutDefaults=e("./layout/defaults"),n.plot=function(e){var t=e._fullLayout,n=e.calcdata,i=t._subplots.geo;void 0===window.PlotlyGeoAssets&&(window.PlotlyGeoAssets={topojson:{}});for(var s=0;s<i.length;s++){var l=i[s],u=a(n,o,l),c=t[l],f=c._subplot;f||(f=r({id:l,graphDiv:e,container:t._geolayer.node(),topojsonURL:e._context.topojsonURL,staticPlot:e._context.staticPlot}),t[l]._subplot=f),f.plot(u,t,e._promises)}},n.clean=function(e,t,n,r){for(var a=r._subplots.geo||[],i=0;i<a.length;i++){var o=a[i],s=r[o]._subplot;!t[o]&&s&&(s.framework.remove(),s.clipDef.remove())}},n.updateFx=function(e){for(var t=e._fullLayout,n=t._subplots.geo,r=0;r<n.length;r++){var a=t[n[r]],i=a._subplot;i.updateFx(t,a)}}},{"../../lib":696,"../../plots/get_data":781,"./geo":774,"./layout/attributes":776,"./layout/defaults":777,"./layout/layout_attributes":778}],776:[function(e,t,n){"use strict";t.exports={geo:{valType:"subplotid",dflt:"geo",editType:"calc"}}},{}],777:[function(e,t,n){"use strict";var r=e("../../subplot_defaults"),a=e("../constants"),i=e("./layout_attributes"),o=a.axesNames;function s(e,t,n){var r=n("resolution"),i=n("scope"),s=a.scopeDefaults[i],l=n("projection.type",s.projType),u=t._isAlbersUsa="albers usa"===l;u&&(i=t.scope="usa");var c=t._isScoped="world"!==i,f=t._isConic=-1!==l.indexOf("conic");t._isClipped=!!a.lonaxisSpan[l];for(var d=0;d<o.length;d++){var p,h=o[d],m=[30,10][d];if(c)p=s[h+"Range"];else{var v=a[h+"Span"],g=(v[l]||v["*"])/2,y=n("projection.rotation."+h.substr(0,3),s.projRotate[d]);p=[y-g,y+g]}var b=n(h+".range",p);n(h+".tick0",b[0]),n(h+".dtick",m),n(h+".showgrid")&&(n(h+".gridcolor"),n(h+".gridwidth"))}var x=t.lonaxis.range,_=t.lataxis.range,w=x[0],T=x[1];w>0&&T<0&&(T+=360);var k,C,E,M=(w+T)/2;if(!u){var A=c?s.projRotate:[M,0,0];k=n("projection.rotation.lon",A[0]),n("projection.rotation.lat",A[1]),n("projection.rotation.roll",A[2]),n("showcoastlines",!c)&&(n("coastlinecolor"),n("coastlinewidth")),n("showocean")&&n("oceancolor")}if(u?(C=-96.6,E=38.7):(C=c?M:k,E=(_[0]+_[1])/2),n("center.lon",C),n("center.lat",E),f){var S=s.projParallels||[0,60];n("projection.parallels",S)}n("projection.scale"),n("showland")&&n("landcolor"),n("showlakes")&&n("lakecolor"),n("showrivers")&&(n("rivercolor"),n("riverwidth")),n("showcountries",c&&"usa"!==i)&&(n("countrycolor"),n("countrywidth")),("usa"===i||"north america"===i&&50===r)&&(n("showsubunits",!0),n("subunitcolor"),n("subunitwidth")),c||n("showframe",!0)&&(n("framecolor"),n("framewidth")),n("bgcolor")}t.exports=function(e,t,n){r(e,t,n,{type:"geo",attributes:i,handleDefaults:s,partition:"y"})}},{"../../subplot_defaults":822,"../constants":773,"./layout_attributes":778}],778:[function(e,t,n){"use strict";var r=e("../../../components/color/attributes"),a=e("../../domain").attributes,i=e("../constants"),o=e("../../../plot_api/edit_types").overrideAll,s={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number"},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:r.lightLine},gridwidth:{valType:"number",min:0,dflt:1}};t.exports=o({domain:a({name:"geo"},{}),resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:Object.keys(i.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:Object.keys(i.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:r.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:i.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:i.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:i.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:i.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:r.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:r.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:r.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:r.background},lonaxis:s,lataxis:s},"plot","from-root")},{"../../../components/color/attributes":569,"../../../plot_api/edit_types":727,"../../domain":770,"../constants":773}],779:[function(e,t,n){"use strict";t.exports=function(e){function t(e,t){return{type:"Feature",id:e.id,properties:e.properties,geometry:n(e.geometry,t)}}function n(t,r){if(!t)return null;if("GeometryCollection"===t.type)return{type:"GeometryCollection",geometries:object.geometries.map(function(e){return n(e,r)})};if(!u.hasOwnProperty(t.type))return null;var a=u[t.type];return e.geo.stream(t,r(a)),a.result()}e.geo.project=function(e,t){var a=t.stream;if(!a)throw new Error("not yet supported");return(e&&r.hasOwnProperty(e.type)?r[e.type]:n)(e,a)};var r={Feature:t,FeatureCollection:function(e,n){return{type:"FeatureCollection",features:e.features.map(function(e){return t(e,n)})}}},a=[],i=[],o={point:function(e,t){a.push([e,t])},result:function(){var e=a.length?a.length<2?{type:"Point",coordinates:a[0]}:{type:"MultiPoint",coordinates:a}:null;return a=[],e}},s={lineStart:c,point:function(e,t){a.push([e,t])},lineEnd:function(){a.length&&(i.push(a),a=[])},result:function(){var e=i.length?i.length<2?{type:"LineString",coordinates:i[0]}:{type:"MultiLineString",coordinates:i}:null;return i=[],e}},l={polygonStart:c,lineStart:c,point:function(e,t){a.push([e,t])},lineEnd:function(){var e=a.length;if(e){do{a.push(a[0].slice())}while(++e<4);i.push(a),a=[]}},polygonEnd:c,result:function(){if(!i.length)return null;var e=[],t=[];return i.forEach(function(n){!function(e){if((t=e.length)<4)return!1;for(var t,n=0,r=e[t-1][1]*e[0][0]-e[t-1][0]*e[0][1];++n<t;)r+=e[n-1][1]*e[n][0]-e[n-1][0]*e[n][1];return r<=0}(n)?t.push(n):e.push([n])}),t.forEach(function(t){var n=t[0];e.some(function(e){if(function(e,t){for(var n=t[0],r=t[1],a=!1,i=0,o=e.length,s=o-1;i<o;s=i++){var l=e[i],u=l[0],c=l[1],f=e[s],d=f[0],p=f[1];c>r^p>r&&n<(d-u)*(r-c)/(p-c)+u&&(a=!a)}return a}(e[0],n))return e.push(t),!0})||e.push([t])}),i=[],e.length?e.length>1?{type:"MultiPolygon",coordinates:e}:{type:"Polygon",coordinates:e[0]}:null}},u={Point:o,MultiPoint:o,LineString:s,MultiLineString:s,Polygon:l,MultiPolygon:l,Sphere:l};function c(){}var f=1e-6,d=f*f,p=Math.PI,h=p/2,m=(Math.sqrt(p),p/180),v=180/p;function g(e){return e>1?h:e<-1?-h:Math.asin(e)}function y(e){return e>1?0:e<-1?p:Math.acos(e)}var b=e.geo.projection,x=e.geo.projectionMutator;function _(e,t){var n=(2+h)*Math.sin(t);t/=2;for(var r=0,a=1/0;r<10&&Math.abs(a)>f;r++){var i=Math.cos(t);t-=a=(t+Math.sin(t)*(i+2)-n)/(2*i*(1+i))}return[2/Math.sqrt(p*(4+p))*e*(1+Math.cos(t)),2*Math.sqrt(p/(4+p))*Math.sin(t)]}e.geo.interrupt=function(t){var n,r=[[[[-p,0],[0,h],[p,0]]],[[[-p,0],[0,-h],[p,0]]]];function a(e,n){for(var a=n<0?-1:1,i=r[+(n<0)],o=0,s=i.length-1;o<s&&e>i[o][2][0];++o);var l=t(e-i[o][1][0],n);return l[0]+=t(i[o][1][0],a*n>a*i[o][0][1]?i[o][0][1]:n)[0],l}t.invert&&(a.invert=function(e,i){for(var o=n[+(i<0)],s=r[+(i<0)],u=0,c=o.length;u<c;++u){var f=o[u];if(f[0][0]<=e&&e<f[1][0]&&f[0][1]<=i&&i<f[1][1]){var d=t.invert(e-t(s[u][1][0],0)[0],i);return d[0]+=s[u][1][0],l(a(d[0],d[1]),[e,i])?d:null}}});var i=e.geo.projection(a),o=i.stream;function s(e,t){for(var n,r,a,i=-1,o=e.length,s=e[0],l=[];++i<o;){n=e[i],r=(n[0]-s[0])/t,a=(n[1]-s[1])/t;for(var u=0;u<t;++u)l.push([s[0]+u*r,s[1]+u*a]);s=n}return l.push(n),l}function l(e,t){return Math.abs(e[0]-t[0])<f&&Math.abs(e[1]-t[1])<f}return i.stream=function(t){var n=i.rotate(),a=o(t),l=(i.rotate([0,0]),o(t));return i.rotate(n),a.sphere=function(){e.geo.stream(function(){for(var t=1e-6,n=[],a=0,i=r[0].length;a<i;++a){var o=r[0][a],l=180*o[0][0]/p,u=180*o[0][1]/p,c=180*o[1][1]/p,f=180*o[2][0]/p,d=180*o[2][1]/p;n.push(s([[l+t,u+t],[l+t,c-t],[f-t,c-t],[f-t,d+t]],30))}for(var a=r[1].length-1;a>=0;--a){var o=r[1][a],l=180*o[0][0]/p,u=180*o[0][1]/p,c=180*o[1][1]/p,f=180*o[2][0]/p,d=180*o[2][1]/p;n.push(s([[f-t,d-t],[f-t,c+t],[l+t,c+t],[l+t,u-t]],30))}return{type:"Polygon",coordinates:[e.merge(n)]}}(),l)},a},i.lobes=function(e){return arguments.length?(r=e.map(function(e){return e.map(function(e){return[[e[0][0]*p/180,e[0][1]*p/180],[e[1][0]*p/180,e[1][1]*p/180],[e[2][0]*p/180,e[2][1]*p/180]]})}),n=r.map(function(e){return e.map(function(e){var n,r=t(e[0][0],e[0][1])[0],a=t(e[2][0],e[2][1])[0],i=t(e[1][0],e[0][1])[1],o=t(e[1][0],e[1][1])[1];return i>o&&(n=i,i=o,o=n),[[r,i],[a,o]]})}),i):r.map(function(e){return e.map(function(e){return[[180*e[0][0]/p,180*e[0][1]/p],[180*e[1][0]/p,180*e[1][1]/p],[180*e[2][0]/p,180*e[2][1]/p]]})})},i},_.invert=function(e,t){var n=.5*t*Math.sqrt((4+p)/p),r=g(n),a=Math.cos(r);return[e/(2/Math.sqrt(p*(4+p))*(1+a)),g((r+n*(a+2))/(2+h))]},(e.geo.eckert4=function(){return b(_)}).raw=_;var w=e.geo.azimuthalEqualArea.raw;function T(e,t){if(arguments.length<2&&(t=e),1===t)return w;if(t===1/0)return k;function n(n,r){var a=w(n/t,r);return a[0]*=e,a}return n.invert=function(n,r){var a=w.invert(n/e,r);return a[0]*=t,a},n}function k(e,t){return[e*Math.cos(t)/Math.cos(t/=2),2*Math.sin(t)]}function C(e,t){return[3*e/(2*p)*Math.sqrt(p*p/3-t*t),t]}function E(e,t){return[e,1.25*Math.log(Math.tan(p/4+.4*t))]}function M(e){return function(t){var n,r=e*Math.sin(t),a=30;do{t-=n=(t+Math.sin(t)-r)/(1+Math.cos(t))}while(Math.abs(n)>f&&--a>0);return t/2}}k.invert=function(e,t){var n=2*g(t/2);return[e*Math.cos(n/2)/Math.cos(n),n]},(e.geo.hammer=function(){var e=2,t=x(T),n=t(e);return n.coefficient=function(n){return arguments.length?t(e=+n):e},n}).raw=T,C.invert=function(e,t){return[2/3*p*e/Math.sqrt(p*p/3-t*t),t]},(e.geo.kavrayskiy7=function(){return b(C)}).raw=C,E.invert=function(e,t){return[e,2.5*Math.atan(Math.exp(.8*t))-.625*p]},(e.geo.miller=function(){return b(E)}).raw=E,M(p);var A=function(e,t,n){var r=M(n);function a(n,a){return[e*n*Math.cos(a=r(a)),t*Math.sin(a)]}return a.invert=function(r,a){var i=g(a/t);return[r/(e*Math.cos(i)),g((2*i+Math.sin(2*i))/n)]},a}(Math.SQRT2/h,Math.SQRT2,p);function S(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),t*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}(e.geo.mollweide=function(){return b(A)}).raw=A,S.invert=function(e,t){var n,r=t,a=25;do{var i=r*r,o=i*i;r-=n=(r*(1.007226+i*(.015085+o*(.028874*i-.044475-.005916*o)))-t)/(1.007226+i*(.045255+o*(.259866*i-.311325-.005916*11*o)))}while(Math.abs(n)>f&&--a>0);return[e/(.8707+(i=r*r)*(i*(i*i*i*(.003971-.001529*i)-.013791)-.131979)),r]},(e.geo.naturalEarth=function(){return b(S)}).raw=S;var O=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];function P(e,t){var n,r=Math.min(18,36*Math.abs(t)/p),a=Math.floor(r),i=r-a,o=(n=O[a])[0],s=n[1],l=(n=O[++a])[0],u=n[1],c=(n=O[Math.min(19,++a)])[0],f=n[1];return[e*(l+i*(c-o)/2+i*i*(c-2*l+o)/2),(t>0?h:-h)*(u+i*(f-s)/2+i*i*(f-2*u+s)/2)]}function R(e,t){return[e*Math.cos(t),t]}function L(e,t){var n=Math.cos(t),r=function(e){return e?e/Math.sin(e):1}(y(n*Math.cos(e/=2)));return[2*n*Math.sin(e)*r,Math.sin(t)*r]}function D(e,t){var n=L(e,t);return[(n[0]+e/h)/2,(n[1]+t)/2]}O.forEach(function(e){e[1]*=1.0144}),P.invert=function(e,t){var n=t/h,r=90*n,a=Math.min(18,Math.abs(r/5)),i=Math.max(0,Math.floor(a));do{var o=O[i][1],s=O[i+1][1],l=O[Math.min(19,i+2)][1],u=l-o,c=l-2*s+o,f=2*(Math.abs(n)-s)/u,p=c/u,g=f*(1-p*f*(1-2*p*f));if(g>=0||1===i){r=(t>=0?5:-5)*(g+a);var y,b=50;do{a=Math.min(18,Math.abs(r)/5),i=Math.floor(a),g=a-i,o=O[i][1],s=O[i+1][1],l=O[Math.min(19,i+2)][1],r-=(y=(t>=0?h:-h)*(s+g*(l-o)/2+g*g*(l-2*s+o)/2)-t)*v}while(Math.abs(y)>d&&--b>0);break}}while(--i>=0);var x=O[i][0],_=O[i+1][0],w=O[Math.min(19,i+2)][0];return[e/(_+g*(w-x)/2+g*g*(w-2*_+x)/2),r*m]},(e.geo.robinson=function(){return b(P)}).raw=P,R.invert=function(e,t){return[e/Math.cos(t),t]},(e.geo.sinusoidal=function(){return b(R)}).raw=R,L.invert=function(e,t){if(!(e*e+4*t*t>p*p+f)){var n=e,r=t,a=25;do{var i,o=Math.sin(n),s=Math.sin(n/2),l=Math.cos(n/2),u=Math.sin(r),c=Math.cos(r),d=Math.sin(2*r),h=u*u,m=c*c,v=s*s,g=1-m*l*l,b=g?y(c*l)*Math.sqrt(i=1/g):i=0,x=2*b*c*s-e,_=b*u-t,w=i*(m*v+b*c*l*h),T=i*(.5*o*d-2*b*u*s),k=.25*i*(d*s-b*u*m*o),C=i*(h*l+b*v*c),E=T*k-C*w;if(!E)break;var M=(_*T-x*C)/E,A=(x*k-_*w)/E;n-=M,r-=A}while((Math.abs(M)>f||Math.abs(A)>f)&&--a>0);return[n,r]}},(e.geo.aitoff=function(){return b(L)}).raw=L,D.invert=function(e,t){var n=e,r=t,a=25;do{var i,o=Math.cos(r),s=Math.sin(r),l=Math.sin(2*r),u=s*s,c=o*o,d=Math.sin(n),p=Math.cos(n/2),m=Math.sin(n/2),v=m*m,g=1-c*p*p,b=g?y(o*p)*Math.sqrt(i=1/g):i=0,x=.5*(2*b*o*m+n/h)-e,_=.5*(b*s+r)-t,w=.5*i*(c*v+b*o*p*u)+.5/h,T=i*(d*l/4-b*s*m),k=.125*i*(l*m-b*s*c*d),C=.5*i*(u*p+b*v*o)+.5,E=T*k-C*w,M=(_*T-x*C)/E,A=(x*k-_*w)/E;n-=M,r-=A}while((Math.abs(M)>f||Math.abs(A)>f)&&--a>0);return[n,r]},(e.geo.winkel3=function(){return b(D)}).raw=D}},{}],780:[function(e,t,n){"use strict";var r=e("d3"),a=e("../../lib"),i=Math.PI/180,o=180/Math.PI,s={cursor:"pointer"},l={cursor:"auto"};function u(e,t){return r.behavior.zoom().translate(t.translate()).scale(t.scale())}function c(e,t,n){var r=e.id,i=e.graphDiv,o=i.layout[r],s=i._fullLayout[r],l={};function u(e,t){var n=a.nestedProperty(s,e);n.get()!==t&&(n.set(t),a.nestedProperty(o,e).set(t),l[r+"."+e]=t)}n(u),u("projection.scale",t.scale()/e.fitScale),i.emit("plotly_relayout",l)}function f(e,t){var n=u(0,t);function a(n){var r=t.invert(e.midPt);n("center.lon",r[0]),n("center.lat",r[1])}return n.on("zoomstart",function(){r.select(this).style(s)}).on("zoom",function(){t.scale(r.event.scale).translate(r.event.translate),e.render()}).on("zoomend",function(){r.select(this).style(l),c(e,t,a)}),n}function d(e,t){var n,a,i,o,f,d,p,h,m,v=u(0,t),g=2;function y(e){return t.invert(e)}function b(n){var r=t.rotate(),a=t.invert(e.midPt);n("projection.rotation.lon",-r[0]),n("center.lon",a[0]),n("center.lat",a[1])}return v.on("zoomstart",function(){r.select(this).style(s),n=r.mouse(this),a=t.rotate(),i=t.translate(),o=a,f=y(n)}).on("zoom",function(){if(d=r.mouse(this),function(e){var n=y(e);if(!n)return!0;var r=t(n);return Math.abs(r[0]-e[0])>g||Math.abs(r[1]-e[1])>g}(n))return v.scale(t.scale()),void v.translate(t.translate());t.scale(r.event.scale),t.translate([i[0],r.event.translate[1]]),f?y(d)&&(h=y(d),p=[o[0]+(h[0]-f[0]),a[1],a[2]],t.rotate(p),o=p):f=y(n=d),m=!0,e.render()}).on("zoomend",function(){r.select(this).style(l),m&&c(e,t,b)}),v}function p(e,t){var n,a={r:t.rotate(),k:t.scale()},f=u(0,t),d=function(e){for(var t=0,n=arguments.length,a=[];++t<n;)a.push(arguments[t]);var i=r.dispatch.apply(null,a);return i.of=function(t,n){return function(a){var o;try{o=a.sourceEvent=r.event,a.target=e,r.event=a,i[a.type].apply(t,n)}finally{r.event=o}}},i}(f,"zoomstart","zoom","zoomend"),p=0,v=f.on;function b(e){var n=t.rotate();e("projection.rotation.lon",-n[0]),e("projection.rotation.lat",-n[1])}return f.on("zoomstart",function(){r.select(this).style(s);var e=r.mouse(this),l=t.rotate(),u=l,c=t.translate(),b=function(e){var t=.5*e[0]*i,n=.5*e[1]*i,r=.5*e[2]*i,a=Math.sin(t),o=Math.cos(t),s=Math.sin(n),l=Math.cos(n),u=Math.sin(r),c=Math.cos(r);return[o*l*c+a*s*u,a*l*c-o*s*u,o*s*c+a*l*u,o*l*u-a*s*c]}(l);n=h(t,e),v.call(f,"zoom",function(){var i=r.mouse(this);if(t.scale(a.k=r.event.scale),n){if(h(t,i)){t.rotate(l).translate(c);var s=h(t,i),f=function(e,t){if(e&&t){var n=function(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}(e,t),r=Math.sqrt(y(n,n)),a=.5*Math.acos(Math.max(-1,Math.min(1,y(e,t)))),i=Math.sin(a)/r;return r&&[Math.cos(a),n[2]*i,-n[1]*i,n[0]*i]}}(n,s),p=function(e){return[Math.atan2(2*(e[0]*e[1]+e[2]*e[3]),1-2*(e[1]*e[1]+e[2]*e[2]))*o,Math.asin(Math.max(-1,Math.min(1,2*(e[0]*e[2]-e[3]*e[1]))))*o,Math.atan2(2*(e[0]*e[3]+e[1]*e[2]),1-2*(e[2]*e[2]+e[3]*e[3]))*o]}(function(e,t){var n=e[0],r=e[1],a=e[2],i=e[3],o=t[0],s=t[1],l=t[2],u=t[3];return[n*o-r*s-a*l-i*u,n*s+r*o+a*u-i*l,n*l-r*u+a*o+i*s,n*u+r*l-a*s+i*o]}(b,f)),v=a.r=function(e,t,n){var r=g(t,2,e[0]);r=g(r=g(r,1,e[1]),0,e[2]-n[2]);var a,i,s=t[0],l=t[1],u=t[2],c=r[0],f=r[1],d=r[2],p=Math.atan2(l,s)*o,h=Math.sqrt(s*s+l*l);Math.abs(f)>h?(i=(f>0?90:-90)-p,a=0):(i=Math.asin(f/h)*o-p,a=Math.sqrt(h*h-f*f));var v=180-i-2*p,y=(Math.atan2(d,c)-Math.atan2(u,a))*o,b=(Math.atan2(d,c)-Math.atan2(u,-a))*o,x=m(n[0],n[1],i,y),_=m(n[0],n[1],v,b);return x<=_?[i,y,n[2]]:[v,b,n[2]]}(p,n,u);isFinite(v[0])&&isFinite(v[1])&&isFinite(v[2])||(v=u),t.rotate(v),u=v}}else n=h(t,e=i);!function(e){e({type:"zoom"})}(d.of(this,arguments))}),function(e){p++||e({type:"zoomstart"})}(d.of(this,arguments))}).on("zoomend",function(){r.select(this).style(l),v.call(f,"zoom",null),function(e){--p||e({type:"zoomend"})}(d.of(this,arguments)),c(e,t,b)}).on("zoom.redraw",function(){e.render()}),r.rebind(f,d,"on")}function h(e,t){var n=e.invert(t);return n&&isFinite(n[0])&&isFinite(n[1])&&function(e){var t=e[0]*i,n=e[1]*i,r=Math.cos(n);return[r*Math.cos(t),r*Math.sin(t),Math.sin(n)]}(n)}function m(e,t,n,r){var a=v(n-e),i=v(r-t);return Math.sqrt(a*a+i*i)}function v(e){return(e%360+540)%360-180}function g(e,t,n){var r=n*i,a=e.slice(),o=0===t?1:0,s=2===t?1:2,l=Math.cos(r),u=Math.sin(r);return a[o]=e[o]*l-e[s]*u,a[s]=e[s]*l+e[o]*u,a}function y(e,t){for(var n=0,r=0,a=e.length;r<a;++r)n+=e[r]*t[r];return n}t.exports=function(e,t){var n=e.projection;return(t._isScoped?f:t._isClipped?p:d)(e,n)}},{"../../lib":696,d3:148}],781:[function(e,t,n){"use strict";var r=e("../registry"),a=e("./cartesian/constants").SUBPLOT_PATTERN;n.getSubplotCalcData=function(e,t,n){var a=r.subplotsRegistry[t];if(!a)return[];for(var i=a.attr,o=[],s=0;s<e.length;s++){var l=e[s],u=l[0].trace;u[i]===n&&o.push(l)}return o},n.getModuleCalcData=function(e,t){var n,a=[],i=[];if(!(n="string"==typeof t?r.getModule(t).plot:"function"==typeof t?t:t.plot))return[a,e];for(var o=0;o<e.length;o++){var s=e[o],l=s[0].trace;!0===l.visible&&(l._module.plot===n?a.push(s):i.push(s))}return[a,i]},n.getSubplotData=function(e,t,n){if(!r.subplotsRegistry[t])return[];var i,o,s,l=r.subplotsRegistry[t].attr,u=[];if("gl2d"===t){var c=n.match(a);o="x"+c[1],s="y"+c[2]}for(var f=0;f<e.length;f++)i=e[f],"gl2d"===t&&r.traceIs(i,"gl2d")?i[l[0]]===o&&i[l[1]]===s&&u.push(i):i[l]===n&&u.push(i);return u}},{"../registry":827,"./cartesian/constants":750}],782:[function(e,t,n){"use strict";var r=e("mouse-change"),a=e("mouse-wheel"),i=e("mouse-event-offset"),o=e("../cartesian/constants"),s=e("has-passive-events");t.exports=function(e){var t=e.mouseContainer,n=e.glplot,l=new function(e,t){this.element=e,this.plot=t,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}(t,n);function u(){e.xaxis.autorange=!1,e.yaxis.autorange=!1}function c(t,r,a){var i,s,c=e.calcDataBox(),f=n.viewBox,d=l.lastPos[0],p=l.lastPos[1],h=o.MINDRAG*n.pixelRatio,m=o.MINZOOM*n.pixelRatio;function v(t,n,r){var a=Math.min(n,r),i=Math.max(n,r);a!==i?(c[t]=a,c[t+2]=i,l.dataBox=c,e.setRanges(c)):(e.selectBox.selectBox=[0,0,1,1],e.glplot.setDirty())}switch(r*=n.pixelRatio,a*=n.pixelRatio,a=f[3]-f[1]-a,e.fullLayout.dragmode){case"zoom":if(t){var g=r/(f[2]-f[0])*(c[2]-c[0])+c[0],y=a/(f[3]-f[1])*(c[3]-c[1])+c[1];l.boxInited||(l.boxStart[0]=g,l.boxStart[1]=y,l.dragStart[0]=r,l.dragStart[1]=a),l.boxEnd[0]=g,l.boxEnd[1]=y,l.boxInited=!0,l.boxEnabled||l.boxStart[0]===l.boxEnd[0]&&l.boxStart[1]===l.boxEnd[1]||(l.boxEnabled=!0);var b=Math.abs(l.dragStart[0]-r)<m,x=Math.abs(l.dragStart[1]-a)<m;if(!function(){for(var t=e.graphDiv._fullLayout._axisConstraintGroups,n=e.xaxis._id,r=e.yaxis._id,a=0;a<t.length;a++)if(-1!==t[a][n]){if(-1!==t[a][r])return!0;break}return!1}()||b&&x)b&&(l.boxEnd[0]=l.boxStart[0]),x&&(l.boxEnd[1]=l.boxStart[1]);else{i=l.boxEnd[0]-l.boxStart[0],s=l.boxEnd[1]-l.boxStart[1];var _=(c[3]-c[1])/(c[2]-c[0]);Math.abs(i*_)>Math.abs(s)?(l.boxEnd[1]=l.boxStart[1]+Math.abs(i)*_*(s>=0?1:-1),l.boxEnd[1]<c[1]?(l.boxEnd[1]=c[1],l.boxEnd[0]=l.boxStart[0]+(c[1]-l.boxStart[1])/Math.abs(_)):l.boxEnd[1]>c[3]&&(l.boxEnd[1]=c[3],l.boxEnd[0]=l.boxStart[0]+(c[3]-l.boxStart[1])/Math.abs(_))):(l.boxEnd[0]=l.boxStart[0]+Math.abs(s)/_*(i>=0?1:-1),l.boxEnd[0]<c[0]?(l.boxEnd[0]=c[0],l.boxEnd[1]=l.boxStart[1]+(c[0]-l.boxStart[0])*Math.abs(_)):l.boxEnd[0]>c[2]&&(l.boxEnd[0]=c[2],l.boxEnd[1]=l.boxStart[1]+(c[2]-l.boxStart[0])*Math.abs(_)))}}else l.boxEnabled?(i=l.boxStart[0]!==l.boxEnd[0],s=l.boxStart[1]!==l.boxEnd[1],i||s?(i&&(v(0,l.boxStart[0],l.boxEnd[0]),e.xaxis.autorange=!1),s&&(v(1,l.boxStart[1],l.boxEnd[1]),e.yaxis.autorange=!1),e.relayoutCallback()):e.glplot.setDirty(),l.boxEnabled=!1,l.boxInited=!1):l.boxInited&&(l.boxInited=!1);break;case"pan":l.boxEnabled=!1,l.boxInited=!1,t?(l.panning||(l.dragStart[0]=r,l.dragStart[1]=a),Math.abs(l.dragStart[0]-r)<h&&(r=l.dragStart[0]),Math.abs(l.dragStart[1]-a)<h&&(a=l.dragStart[1]),i=(d-r)*(c[2]-c[0])/(n.viewBox[2]-n.viewBox[0]),s=(p-a)*(c[3]-c[1])/(n.viewBox[3]-n.viewBox[1]),c[0]+=i,c[2]+=i,c[1]+=s,c[3]+=s,e.setRanges(c),l.panning=!0,l.lastInputTime=Date.now(),u(),e.cameraChanged(),e.handleAnnotations()):l.panning&&(l.panning=!1,e.relayoutCallback())}l.lastPos[0]=r,l.lastPos[1]=a}return l.mouseListener=r(t,c),t.addEventListener("touchstart",function(e){var n=i(e.changedTouches[0],t);c(0,n[0],n[1]),c(1,n[0],n[1]),e.preventDefault()},!!s&&{passive:!1}),t.addEventListener("touchmove",function(e){e.preventDefault();var n=i(e.changedTouches[0],t);c(1,n[0],n[1]),e.preventDefault()},!!s&&{passive:!1}),t.addEventListener("touchend",function(e){c(0,l.lastPos[0],l.lastPos[1]),e.preventDefault()},!!s&&{passive:!1}),l.wheelListener=a(t,function(t,r){if(!e.scrollZoom)return!1;var a=e.calcDataBox(),i=n.viewBox,o=l.lastPos[0],s=l.lastPos[1],c=Math.exp(5*r/(i[3]-i[1])),f=o/(i[2]-i[0])*(a[2]-a[0])+a[0],d=s/(i[3]-i[1])*(a[3]-a[1])+a[1];return a[0]=(a[0]-f)*c+f,a[2]=(a[2]-f)*c+f,a[1]=(a[1]-d)*c+d,a[3]=(a[3]-d)*c+d,e.setRanges(a),l.lastInputTime=Date.now(),u(),e.cameraChanged(),e.handleAnnotations(),e.relayoutCallback(),!0},!0),l}},{"../cartesian/constants":750,"has-passive-events":394,"mouse-change":418,"mouse-event-offset":419,"mouse-wheel":421}],783:[function(e,t,n){"use strict";var r=e("../cartesian/axes"),a=e("../../lib/html2unicode"),i=e("../../lib/str2rgbarray");function o(e){this.scene=e,this.gl=e.gl,this.pixelRatio=e.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=!1,this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var s=o.prototype,l=["xaxis","yaxis"];s.merge=function(e){var t,n,r,o,s,u,c,f,d,p,h;for(this.titleEnable=!1,this.backgroundColor=i(e.plot_bgcolor),p=0;p<2;++p){var m=(t=l[p]).charAt(0);for(n=e[this.scene[t]._name],r=n.title===this.scene.fullLayout._dfltTitle[m]?"":n.title,h=0;h<=2;h+=2)this.labelEnable[p+h]=!1,this.labels[p+h]=a(r),this.labelColor[p+h]=i(n.titlefont.color),this.labelFont[p+h]=n.titlefont.family,this.labelSize[p+h]=n.titlefont.size,this.labelPad[p+h]=this.getLabelPad(t,n),this.tickEnable[p+h]=!1,this.tickColor[p+h]=i((n.tickfont||{}).color),this.tickAngle[p+h]="auto"===n.tickangle?0:Math.PI*-n.tickangle/180,this.tickPad[p+h]=this.getTickPad(n),this.tickMarkLength[p+h]=0,this.tickMarkWidth[p+h]=n.tickwidth||0,this.tickMarkColor[p+h]=i(n.tickcolor),this.borderLineEnable[p+h]=!1,this.borderLineColor[p+h]=i(n.linecolor),this.borderLineWidth[p+h]=n.linewidth||0;c=this.hasSharedAxis(n),s=this.hasAxisInDfltPos(t,n)&&!c,u=this.hasAxisInAltrPos(t,n)&&!c,o=n.mirror||!1,f=c?-1!==String(o).indexOf("all"):!!o,d=c?"allticks"===o:-1!==String(o).indexOf("ticks"),s?this.labelEnable[p]=!0:u&&(this.labelEnable[p+2]=!0),s?this.tickEnable[p]=n.showticklabels:u&&(this.tickEnable[p+2]=n.showticklabels),(s||f)&&(this.borderLineEnable[p]=n.showline),(u||f)&&(this.borderLineEnable[p+2]=n.showline),(s||d)&&(this.tickMarkLength[p]=this.getTickMarkLength(n)),(u||d)&&(this.tickMarkLength[p+2]=this.getTickMarkLength(n)),this.gridLineEnable[p]=n.showgrid,this.gridLineColor[p]=i(n.gridcolor),this.gridLineWidth[p]=n.gridwidth,this.zeroLineEnable[p]=n.zeroline,this.zeroLineColor[p]=i(n.zerolinecolor),this.zeroLineWidth[p]=n.zerolinewidth}},s.hasSharedAxis=function(e){var t=this.scene,n=t.fullLayout._subplots.gl2d,a=r.findSubplotsWithAxis(n,e);return 0!==a.indexOf(t.id)},s.hasAxisInDfltPos=function(e,t){var n=t.side;return"xaxis"===e?"bottom"===n:"yaxis"===e?"left"===n:void 0},s.hasAxisInAltrPos=function(e,t){var n=t.side;return"xaxis"===e?"top"===n:"yaxis"===e?"right"===n:void 0},s.getLabelPad=function(e,t){var n=t.titlefont.size,r=t.showticklabels;return"xaxis"===e?"top"===t.side?n*(1.5+(r?1:0))-10:n*(1.5+(r?.5:0))-10:"yaxis"===e?"right"===t.side?10+n*(1.5+(r?1:.5)):10+n*(1.5+(r?.5:0)):void 0},s.getTickPad=function(e){return"outside"===e.ticks?10+e.ticklen:15},s.getTickMarkLength=function(e){if(!e.ticks)return 0;var t=e.ticklen;return"inside"===e.ticks?-t:t},t.exports=function(e){return new o(e)}},{"../../lib/html2unicode":694,"../../lib/str2rgbarray":719,"../cartesian/axes":744}],784:[function(e,t,n){"use strict";var r=e("../../plot_api/edit_types").overrideAll,a=e("./scene2d"),i=e("../layout_attributes"),o=e("../../constants/xmlns_namespaces"),s=e("../cartesian/constants"),l=e("../cartesian"),u=e("../../components/fx/layout_attributes"),c=e("../get_data").getSubplotData;n.name="gl2d",n.attr=["xaxis","yaxis"],n.idRoot=["x","y"],n.idRegex=s.idRegex,n.attrRegex=s.attrRegex,n.attributes=e("../cartesian/attributes"),n.supplyLayoutDefaults=function(e,t,n){t._has("cartesian")||l.supplyLayoutDefaults(e,t,n)},n.layoutAttrOverrides=r(l.layoutAttributes,"plot","from-root"),n.baseLayoutAttrOverrides=r({plot_bgcolor:i.plot_bgcolor,hoverlabel:u.hoverlabel},"plot","nested"),n.plot=function(e){for(var t=e._fullLayout,n=e._fullData,r=t._subplots.gl2d,i=0;i<r.length;i++){var o=r[i],s=t._plots[o],l=c(n,"gl2d",o),u=s._scene2d;void 0===u&&(u=new a({id:o,graphDiv:e,container:e.querySelector(".gl-container"),staticPlot:e._context.staticPlot,plotGlPixelRatio:e._context.plotGlPixelRatio},t),s._scene2d=u),u.plot(l,e.calcdata,t,e.layout)}},n.clean=function(e,t,n,r){for(var a=r._subplots.gl2d||[],i=0;i<a.length;i++){var o=a[i],s=r._plots[o];if(s._scene2d){var u=c(e,"gl2d",o);0===u.length&&(s._scene2d.destroy(),delete r._plots[o])}}l.clean.apply(this,arguments)},n.drawFramework=function(e){e._context.staticPlot||l.drawFramework(e)},n.toSVG=function(e){for(var t=e._fullLayout,n=t._subplots.gl2d,r=0;r<n.length;r++){var a=t._plots[n[r]],i=a._scene2d,s=i.toImage("png"),l=t._glimages.append("svg:image");l.attr({xmlns:o.svg,"xlink:href":s,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),i.destroy()}},n.updateFx=function(e){for(var t=e._fullLayout,n=t._subplots.gl2d,r=0;r<n.length;r++){var a=t._plots[n[r]]._scene2d;a.updateFx(t.dragmode)}}},{"../../components/fx/layout_attributes":613,"../../constants/xmlns_namespaces":674,"../../plot_api/edit_types":727,"../cartesian":756,"../cartesian/attributes":742,"../cartesian/constants":750,"../get_data":781,"../layout_attributes":799,"./scene2d":785}],785:[function(e,t,n){"use strict";var r,a,i=e("../../registry"),o=e("../../plots/cartesian/axes"),s=e("../../components/fx"),l=e("gl-plot2d"),u=e("gl-spikes2d"),c=e("gl-select-box"),f=e("webgl-context"),d=e("./convert"),p=e("./camera"),h=e("../../lib/html2unicode"),m=e("../../lib/show_no_webgl_msg"),v=e("../cartesian/constraints"),g=v.enforce,y=v.clean,b=e("../cartesian/autorange").doAutoRange,x=["xaxis","yaxis"],_=e("../cartesian/constants").SUBPLOT_PATTERN;function w(e,t){this.container=e.container,this.graphDiv=e.graphDiv,this.pixelRatio=e.plotGlPixelRatio||window.devicePixelRatio,this.id=e.id,this.staticPlot=!!e.staticPlot,this.scrollZoom=this.graphDiv._context.scrollZoom,this.fullData=null,this.updateRefs(t),this.makeFramework(),this.stopped||(this.glplotOptions=d(this),this.glplotOptions.merge(t),this.glplot=l(this.glplotOptions),this.camera=p(this),this.traces={},this.spikes=u(this.glplot),this.selectBox=c(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}t.exports=w;var T=w.prototype;T.makeFramework=function(){if(this.staticPlot){if(!(a||(r=document.createElement("canvas"),a=f({canvas:r,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}))))throw new Error("Error creating static canvas/context for image server");this.canvas=r,this.gl=a}else{var e=this.container.querySelector(".gl-canvas-focus"),t=f({canvas:e,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!t)return m(this),void(this.stopped=!0);this.canvas=e,this.gl=t}var n=this.canvas;n.style.width="100%",n.style.height="100%",n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.style["pointer-events"]="none",this.updateSize(n),n.className+=" user-select-none";var i=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");i.style.position="absolute",i.style.top=i.style.left="0px",i.style.width=i.style.height="100%",i.style["z-index"]=20,i.style["pointer-events"]="none";var o=this.mouseContainer=document.createElement("div");o.style.position="absolute",o.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var s=this.container;s.appendChild(i),s.appendChild(o);var l=this;o.addEventListener("mouseout",function(){l.isMouseOver=!1,l.unhover()}),o.addEventListener("mouseover",function(){l.isMouseOver=!0})},T.toImage=function(e){e||(e="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(r),this.updateSize(this.canvas);var t=this.glplot.gl,n=t.drawingBufferWidth,a=t.drawingBufferHeight;t.clearColor(1,1,1,0),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),t.bindFramebuffer(t.FRAMEBUFFER,null);var i=new Uint8Array(n*a*4);t.readPixels(0,0,n,a,t.RGBA,t.UNSIGNED_BYTE,i);for(var o=0,s=a-1;o<s;++o,--s)for(var l=0;l<n;++l)for(var u=0;u<4;++u){var c=i[4*(n*o+l)+u];i[4*(n*o+l)+u]=i[4*(n*s+l)+u],i[4*(n*s+l)+u]=c}var f=document.createElement("canvas");f.width=n,f.height=a;var d,p=f.getContext("2d"),h=p.createImageData(n,a);switch(h.data.set(i),p.putImageData(h,0,0),e){case"jpeg":d=f.toDataURL("image/jpeg");break;case"webp":d=f.toDataURL("image/webp");break;default:d=f.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(r),d},T.updateSize=function(e){e||(e=this.canvas);var t=this.pixelRatio,n=this.fullLayout,r=n.width,a=n.height,i=0|Math.ceil(t*r),o=0|Math.ceil(t*a);return e.width===i&&e.height===o||(e.width=i,e.height=o),e},T.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var e=[o.calcTicks(this.xaxis),o.calcTicks(this.yaxis)],t=0;t<2;++t)for(var n=0;n<e[t].length;++n)e[t][n].text=h(e[t][n].text+"");return e},T.updateRefs=function(e){this.fullLayout=e;var t=this.id.match(_),n="xaxis"+t[1],r="yaxis"+t[2];this.xaxis=this.fullLayout[n],this.yaxis=this.fullLayout[r]},T.relayoutCallback=function(){var e=this.graphDiv,t=this.xaxis,n=this.yaxis,r=e.layout;r.xaxis.autorange=t.autorange,r.xaxis.range=t.range.slice(0),r.yaxis.autorange=n.autorange,r.yaxis.range=n.range.slice(0);var a={lastInputTime:this.camera.lastInputTime};a[t._name]=t.range.slice(0),a[n._name]=n.range.slice(0),e.emit("plotly_relayout",a)},T.cameraChanged=function(){var e=this.camera;this.glplot.setDataBox(this.calcDataBox());var t=this.computeTickMarks(),n=this.glplotOptions.ticks;(function(e,t){for(var n=0;n<2;++n){var r=e[n],a=t[n];if(r.length!==a.length)return!0;for(var i=0;i<r.length;++i)if(r[i].x!==a[i].x)return!0}return!1})(t,n)&&(this.glplotOptions.ticks=t,this.glplotOptions.dataBox=e.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},T.handleAnnotations=function(){for(var e=this.graphDiv,t=this.fullLayout.annotations,n=0;n<t.length;n++){var r=t[n];r.xref===this.xaxis._id&&r.yref===this.yaxis._id&&i.getComponentMethod("annotations","drawOne")(e,n)}},T.destroy=function(){if(this.glplot){var e=this.traces;e&&Object.keys(e).map(function(t){e[t].dispose(),delete e[t]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},T.plot=function(e,t,n){var r=this.glplot;this.updateRefs(n),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(e,t),this.updateFx(n.dragmode);var a=n.width,i=n.height;this.updateSize(this.canvas);var o=this.glplotOptions;o.merge(n),o.screenBox=[0,0,a,i];var s={_fullLayout:{_axisConstraintGroups:this.graphDiv._fullLayout._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis}};y(s,this.xaxis),y(s,this.yaxis);var l,u,c=n._size,f=this.xaxis.domain,d=this.yaxis.domain;for(o.viewBox=[c.l+f[0]*c.w,c.b+d[0]*c.h,a-c.r-(1-f[1])*c.w,i-c.t-(1-d[1])*c.h],this.mouseContainer.style.width=c.w*(f[1]-f[0])+"px",this.mouseContainer.style.height=c.h*(d[1]-d[0])+"px",this.mouseContainer.height=c.h*(d[1]-d[0]),this.mouseContainer.style.left=c.l+f[0]*c.w+"px",this.mouseContainer.style.top=c.t+(1-d[1])*c.h+"px",u=0;u<2;++u)(l=this[x[u]])._length=o.viewBox[u+2]-o.viewBox[u],b(this.graphDiv,l),l.setScale();g(s),o.ticks=this.computeTickMarks(),o.dataBox=this.calcDataBox(),o.merge(n),r.update(o),this.glplot.draw()},T.calcDataBox=function(){var e=this.xaxis,t=this.yaxis,n=e.range,r=t.range,a=e.r2l,i=t.r2l;return[a(n[0]),i(r[0]),a(n[1]),i(r[1])]},T.setRanges=function(e){var t=this.xaxis,n=this.yaxis,r=t.l2r,a=n.l2r;t.range=[r(e[0]),r(e[2])],n.range=[a(e[1]),a(e[3])]},T.updateTraces=function(e,t){var n,r,a,i=Object.keys(this.traces);this.fullData=e;e:for(n=0;n<i.length;n++){var o=i[n],s=this.traces[o];for(r=0;r<e.length;r++)if((a=e[r]).uid===o&&a.type===s.type)continue e;s.dispose(),delete this.traces[o]}for(n=0;n<e.length;n++){a=e[n];var l=t[n],u=this.traces[a.uid];u?u.update(a,l):(u=a._module.plot(this,a,l),this.traces[a.uid]=u)}this.glplot.objects.sort(function(e,t){return e._trace.index-t._trace.index})},T.updateFx=function(e){"lasso"===e||"select"===e?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),this.mouseContainer.style.cursor="pan"===e?"move":"zoom"===e?"crosshair":null},T.emitPointAction=function(e,t){for(var n,r=e.trace.uid,a=e.pointIndex,i=0;i<this.fullData.length;i++)this.fullData[i].uid===r&&(n=this.fullData[i]);var o={x:e.traceCoord[0],y:e.traceCoord[1],curveNumber:n.index,pointNumber:a,data:n._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};s.appendArrayPointValue(o,n,a),this.graphDiv.emit(t,{points:[o]})},T.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var e=this.glplot,t=this.camera,n=t.mouseListener,r=1===this.lastButtonState&&0===n.buttons,a=this.fullLayout;this.lastButtonState=n.buttons,this.cameraChanged();var i,o=n.x*e.pixelRatio,l=this.canvas.height-e.pixelRatio*n.y;if(t.boxEnabled&&"zoom"===a.dragmode){this.selectBox.enabled=!0;for(var u=this.selectBox.selectBox=[Math.min(t.boxStart[0],t.boxEnd[0]),Math.min(t.boxStart[1],t.boxEnd[1]),Math.max(t.boxStart[0],t.boxEnd[0]),Math.max(t.boxStart[1],t.boxEnd[1])],c=0;c<2;c++)t.boxStart[c]===t.boxEnd[c]&&(u[c]=e.dataBox[c],u[c+2]=e.dataBox[c+2]);e.setDirty()}else if(!t.panning&&this.isMouseOver){this.selectBox.enabled=!1;var f=a._size,d=this.xaxis.domain,p=this.yaxis.domain,h=(i=e.pick(o/e.pixelRatio+f.l+d[0]*f.w,l/e.pixelRatio-(f.t+(1-p[1])*f.h)))&&i.object._trace.handlePick(i);if(h&&r&&this.emitPointAction(h,"plotly_click"),i&&"skip"!==i.object._trace.hoverinfo&&a.hovermode&&h&&(!this.lastPickResult||this.lastPickResult.traceUid!==h.trace.uid||this.lastPickResult.dataCoord[0]!==h.dataCoord[0]||this.lastPickResult.dataCoord[1]!==h.dataCoord[1])){var m=h;this.lastPickResult={traceUid:h.trace?h.trace.uid:null,dataCoord:h.dataCoord.slice()},this.spikes.update({center:i.dataCoord}),m.screenCoord=[((e.viewBox[2]-e.viewBox[0])*(i.dataCoord[0]-e.dataBox[0])/(e.dataBox[2]-e.dataBox[0])+e.viewBox[0])/e.pixelRatio,(this.canvas.height-(e.viewBox[3]-e.viewBox[1])*(i.dataCoord[1]-e.dataBox[1])/(e.dataBox[3]-e.dataBox[1])-e.viewBox[1])/e.pixelRatio],this.emitPointAction(h,"plotly_hover");var v=this.fullData[m.trace.index]||{},g=m.pointIndex,y=s.castHoverinfo(v,a,g);if(y&&"all"!==y){var b=y.split("+");-1===b.indexOf("x")&&(m.traceCoord[0]=void 0),-1===b.indexOf("y")&&(m.traceCoord[1]=void 0),-1===b.indexOf("z")&&(m.traceCoord[2]=void 0),-1===b.indexOf("text")&&(m.textLabel=void 0),-1===b.indexOf("name")&&(m.name=void 0)}s.loneHover({x:m.screenCoord[0],y:m.screenCoord[1],xLabel:this.hoverFormatter("xaxis",m.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",m.traceCoord[1]),zLabel:m.traceCoord[2],text:m.textLabel,name:m.name,color:s.castHoverOption(v,g,"bgcolor")||m.color,borderColor:s.castHoverOption(v,g,"bordercolor"),fontFamily:s.castHoverOption(v,g,"font.family"),fontSize:s.castHoverOption(v,g,"font.size"),fontColor:s.castHoverOption(v,g,"font.color")},{container:this.svgContainer,gd:this.graphDiv})}}i||this.unhover(),e.draw()}},T.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),s.loneUnhover(this.svgContainer))},T.hoverFormatter=function(e,t){if(void 0!==t){var n=this[e];return o.tickText(n,n.c2l(t),"hover").text}}},{"../../components/fx":612,"../../lib/html2unicode":694,"../../lib/show_no_webgl_msg":717,"../../plots/cartesian/axes":744,"../../registry":827,"../cartesian/autorange":743,"../cartesian/constants":750,"../cartesian/constraints":752,"./camera":782,"./convert":783,"gl-plot2d":275,"gl-select-box":286,"gl-spikes2d":295,"webgl-context":533}],786:[function(e,t,n){"use strict";t.exports=function(e,t){e=e||document.body;var n=[.01,1/0];"distanceLimits"in(t=t||{})&&(n[0]=t.distanceLimits[0],n[1]=t.distanceLimits[1]),"zoomMin"in t&&(n[0]=t.zoomMin),"zoomMax"in t&&(n[1]=t.zoomMax);var u=a({center:t.center||[0,0,0],up:t.up||[0,1,0],eye:t.eye||[0,0,10],mode:t.mode||"orbit",distanceLimits:n}),c=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],f=0,d=e.clientWidth,p=e.clientHeight,h={keyBindingMode:"rotate",view:u,element:e,delay:t.delay||16,rotateSpeed:t.rotateSpeed||1,zoomSpeed:t.zoomSpeed||1,translateSpeed:t.translateSpeed||1,flipX:!!t.flipX,flipY:!!t.flipY,modes:u.modes,tick:function(){var t=r(),n=this.delay,a=t-2*n;u.idle(t-n),u.recalcMatrix(a),u.flush(t-(100+2*n));for(var i=!0,o=u.computedMatrix,s=0;s<16;++s)i=i&&c[s]===o[s],c[s]=o[s];var l=e.clientWidth===d&&e.clientHeight===p;return d=e.clientWidth,p=e.clientHeight,i?!l:(f=Math.exp(u.computedRadius[0]),!0)},lookAt:function(e,t,n){u.lookAt(u.lastT(),e,t,n)},rotate:function(e,t,n){u.rotate(u.lastT(),e,t,n)},pan:function(e,t,n){u.pan(u.lastT(),e,t,n)},translate:function(e,t,n){u.translate(u.lastT(),e,t,n)}};Object.defineProperties(h,{matrix:{get:function(){return u.computedMatrix},set:function(e){return u.setMatrix(u.lastT(),e),u.computedMatrix},enumerable:!0},mode:{get:function(){return u.getMode()},set:function(e){var t=u.computedUp.slice(),n=u.computedEye.slice(),a=u.computedCenter.slice();if(u.setMode(e),"turntable"===e){var i=r();u._active.lookAt(i,n,a,t),u._active.lookAt(i+500,n,a,[0,0,1]),u._active.flush(i)}return u.getMode()},enumerable:!0},center:{get:function(){return u.computedCenter},set:function(e){return u.lookAt(u.lastT(),null,e),u.computedCenter},enumerable:!0},eye:{get:function(){return u.computedEye},set:function(e){return u.lookAt(u.lastT(),e),u.computedEye},enumerable:!0},up:{get:function(){return u.computedUp},set:function(e){return u.lookAt(u.lastT(),null,null,e),u.computedUp},enumerable:!0},distance:{get:function(){return f},set:function(e){return u.setDistance(u.lastT(),e),e},enumerable:!0},distanceLimits:{get:function(){return u.getDistanceLimits(n)},set:function(e){return u.setDistanceLimits(e),e},enumerable:!0}}),e.addEventListener("contextmenu",function(e){return e.preventDefault(),!1});var m=0,v=0,g={shift:!1,control:!1,alt:!1,meta:!1};function y(t,n,a,i){var o=h.keyBindingMode;if(!1!==o){var s="rotate"===o,l="pan"===o,c="zoom"===o,d=!!i.control,p=!!i.alt,y=!!i.shift,b=!!(1&t),x=!!(2&t),_=!!(4&t),w=1/e.clientHeight,T=w*(n-m),k=w*(a-v),C=h.flipX?1:-1,E=h.flipY?1:-1,M=r(),A=Math.PI*h.rotateSpeed;if((s&&b&&!d&&!p&&!y||b&&!d&&!p&&y)&&u.rotate(M,C*A*T,-E*A*k,0),(l&&b&&!d&&!p&&!y||x||b&&d&&!p&&!y)&&u.pan(M,-h.translateSpeed*T*f,h.translateSpeed*k*f,0),c&&b&&!d&&!p&&!y||_||b&&!d&&p&&!y){var S=-h.zoomSpeed*k/window.innerHeight*(M-u.lastT())*100;u.pan(M,0,0,f*(Math.exp(S)-1))}return m=n,v=a,g=i,!0}}return h.mouseListener=i(e,y),e.addEventListener("touchstart",function(t){var n=s(t.changedTouches[0],e);y(0,n[0],n[1],g),y(1,n[0],n[1],g),t.preventDefault()},!!l&&{passive:!1}),e.addEventListener("touchmove",function(t){var n=s(t.changedTouches[0],e);y(1,n[0],n[1],g),t.preventDefault()},!!l&&{passive:!1}),e.addEventListener("touchend",function(e){y(0,m,v,g),e.preventDefault()},!!l&&{passive:!1}),h.wheelListener=o(e,function(e,t){if(!1!==h.keyBindingMode){var n=h.flipX?1:-1,a=h.flipY?1:-1,i=r();if(Math.abs(e)>Math.abs(t))u.rotate(i,0,0,-e*n*Math.PI*h.rotateSpeed/window.innerWidth);else{var o=-h.zoomSpeed*a*t/window.innerHeight*(i-u.lastT())/20;u.pan(i,0,0,f*(Math.exp(o)-1))}}},!0),h};var r=e("right-now"),a=e("3d-view"),i=e("mouse-change"),o=e("mouse-wheel"),s=e("mouse-event-offset"),l=e("has-passive-events")},{"3d-view":45,"has-passive-events":394,"mouse-change":418,"mouse-event-offset":419,"mouse-wheel":421,"right-now":480}],787:[function(e,t,n){"use strict";var r=e("../../plot_api/edit_types").overrideAll,a=e("../../components/fx/layout_attributes"),i=e("./scene"),o=e("../get_data").getSubplotData,s=e("../../lib"),l=e("../../constants/xmlns_namespaces");n.name="gl3d",n.attr="scene",n.idRoot="scene",n.idRegex=n.attrRegex=s.counterRegex("scene"),n.attributes=e("./layout/attributes"),n.layoutAttributes=e("./layout/layout_attributes"),n.baseLayoutAttrOverrides=r({hoverlabel:a.hoverlabel},"plot","nested"),n.supplyLayoutDefaults=e("./layout/defaults"),n.plot=function(e){for(var t=e._fullLayout,n=e._fullData,r=t._subplots.gl3d,a=0;a<r.length;a++){var l=r[a],u=o(n,"gl3d",l),c=t[l],f=c._scene;f||(f=new i({id:l,graphDiv:e,container:e.querySelector(".gl-container"),staticPlot:e._context.staticPlot,plotGlPixelRatio:e._context.plotGlPixelRatio},t),c._scene=f),f.cameraInitial||(f.cameraInitial=s.extendDeep({},c.camera)),f.plot(u,t,e.layout)}},n.clean=function(e,t,n,r){for(var a=r._subplots.gl3d||[],i=0;i<a.length;i++){var o=a[i];!t[o]&&r[o]._scene&&(r[o]._scene.destroy(),r._infolayer&&r._infolayer.selectAll(".annotation-"+o).remove())}},n.toSVG=function(e){for(var t=e._fullLayout,n=t._subplots.gl3d,r=t._size,a=0;a<n.length;a++){var i=t[n[a]],o=i.domain,s=i._scene,u=s.toImage("png"),c=t._glimages.append("svg:image");c.attr({xmlns:l.svg,"xlink:href":u,x:r.l+r.w*o.x[0],y:r.t+r.h*(1-o.y[1]),width:r.w*(o.x[1]-o.x[0]),height:r.h*(o.y[1]-o.y[0]),preserveAspectRatio:"none"}),s.destroy()}},n.cleanId=function(e){if(e.match(/^scene[0-9]*$/)){var t=e.substr(5);return"1"===t&&(t=""),"scene"+t}},n.updateFx=function(e){for(var t=e._fullLayout,n=t._subplots.gl3d,r=0;r<n.length;r++){var a=t[n[r]]._scene;a.updateFx(t.dragmode,t.hovermode)}}},{"../../components/fx/layout_attributes":613,"../../constants/xmlns_namespaces":674,"../../lib":696,"../../plot_api/edit_types":727,"../get_data":781,"./layout/attributes":788,"./layout/defaults":792,"./layout/layout_attributes":793,"./scene":797}],788:[function(e,t,n){"use strict";t.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},{}],789:[function(e,t,n){"use strict";var r=e("../../../components/color"),a=e("../../cartesian/layout_attributes"),i=e("../../../lib/extend").extendFlat,o=e("../../../plot_api/edit_types").overrideAll;t.exports=o({visible:a.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:r.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:a.color,categoryorder:a.categoryorder,categoryarray:a.categoryarray,title:a.title,titlefont:a.titlefont,type:a.type,autorange:a.autorange,rangemode:a.rangemode,range:a.range,tickmode:a.tickmode,nticks:a.nticks,tick0:a.tick0,dtick:a.dtick,tickvals:a.tickvals,ticktext:a.ticktext,ticks:a.ticks,mirror:a.mirror,ticklen:a.ticklen,tickwidth:a.tickwidth,tickcolor:a.tickcolor,showticklabels:a.showticklabels,tickfont:a.tickfont,tickangle:a.tickangle,tickprefix:a.tickprefix,showtickprefix:a.showtickprefix,ticksuffix:a.ticksuffix,showticksuffix:a.showticksuffix,showexponent:a.showexponent,exponentformat:a.exponentformat,separatethousands:a.separatethousands,tickformat:a.tickformat,tickformatstops:a.tickformatstops,hoverformat:a.hoverformat,showline:a.showline,linecolor:a.linecolor,linewidth:a.linewidth,showgrid:a.showgrid,gridcolor:i({},a.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:a.gridwidth,zeroline:a.zeroline,zerolinecolor:a.zerolinecolor,zerolinewidth:a.zerolinewidth},"plot","from-root")},{"../../../components/color":570,"../../../lib/extend":685,"../../../plot_api/edit_types":727,"../../cartesian/layout_attributes":757}],790:[function(e,t,n){"use strict";var r=e("tinycolor2").mix,a=e("../../../lib"),i=e("../../../plot_api/plot_template"),o=e("./axis_attributes"),s=e("../../cartesian/type_defaults"),l=e("../../cartesian/axis_defaults"),u=["xaxis","yaxis","zaxis"];t.exports=function(e,t,n){var c,f;function d(e,t){return a.coerce(c,f,o,e,t)}for(var p=0;p<u.length;p++){var h=u[p];c=e[h]||{},(f=i.newContainer(t,h))._id=h[0]+n.scene,f._name=h,s(c,f,d,n),l(c,f,d,{font:n.font,letter:h[0],data:n.data,showGrid:!0,bgColor:n.bgColor,calendar:n.calendar},n.fullLayout),d("gridcolor",r(f.color,n.bgColor,72.72727272727273).toRgbString()),d("title",h[0]),f.setScale=a.noop,d("showspikes")&&(d("spikesides"),d("spikethickness"),d("spikecolor",f.color)),d("showaxeslabels"),d("showbackground")&&d("backgroundcolor")}}},{"../../../lib":696,"../../../plot_api/plot_template":734,"../../cartesian/axis_defaults":746,"../../cartesian/type_defaults":768,"./axis_attributes":789,tinycolor2:514}],791:[function(e,t,n){"use strict";var r=e("../../../lib/html2unicode"),a=e("../../../lib/str2rgbarray"),i=["xaxis","yaxis","zaxis"];function o(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}var s=o.prototype;s.merge=function(e){for(var t=0;t<3;++t){var n=e[i[t]];n.visible?(this.labels[t]=r(n.title),"titlefont"in n&&(n.titlefont.color&&(this.labelColor[t]=a(n.titlefont.color)),n.titlefont.family&&(this.labelFont[t]=n.titlefont.family),n.titlefont.size&&(this.labelSize[t]=n.titlefont.size)),"showline"in n&&(this.lineEnable[t]=n.showline),"linecolor"in n&&(this.lineColor[t]=a(n.linecolor)),"linewidth"in n&&(this.lineWidth[t]=n.linewidth),"showgrid"in n&&(this.gridEnable[t]=n.showgrid),"gridcolor"in n&&(this.gridColor[t]=a(n.gridcolor)),"gridwidth"in n&&(this.gridWidth[t]=n.gridwidth),"log"===n.type?this.zeroEnable[t]=!1:"zeroline"in n&&(this.zeroEnable[t]=n.zeroline),"zerolinecolor"in n&&(this.zeroLineColor[t]=a(n.zerolinecolor)),"zerolinewidth"in n&&(this.zeroLineWidth[t]=n.zerolinewidth),"ticks"in n&&n.ticks?this.lineTickEnable[t]=!0:this.lineTickEnable[t]=!1,"ticklen"in n&&(this.lineTickLength[t]=this._defaultLineTickLength[t]=n.ticklen),"tickcolor"in n&&(this.lineTickColor[t]=a(n.tickcolor)),"tickwidth"in n&&(this.lineTickWidth[t]=n.tickwidth),"tickangle"in n&&(this.tickAngle[t]="auto"===n.tickangle?-3600:Math.PI*-n.tickangle/180),"showticklabels"in n&&(this.tickEnable[t]=n.showticklabels),"tickfont"in n&&(n.tickfont.color&&(this.tickColor[t]=a(n.tickfont.color)),n.tickfont.family&&(this.tickFont[t]=n.tickfont.family),n.tickfont.size&&(this.tickSize[t]=n.tickfont.size)),"mirror"in n?-1!==["ticks","all","allticks"].indexOf(n.mirror)?(this.lineTickMirror[t]=!0,this.lineMirror[t]=!0):!0===n.mirror?(this.lineTickMirror[t]=!1,this.lineMirror[t]=!0):(this.lineTickMirror[t]=!1,this.lineMirror[t]=!1):this.lineMirror[t]=!1,"showbackground"in n&&!1!==n.showbackground?(this.backgroundEnable[t]=!0,this.backgroundColor[t]=a(n.backgroundcolor)):this.backgroundEnable[t]=!1):(this.tickEnable[t]=!1,this.labelEnable[t]=!1,this.lineEnable[t]=!1,this.lineTickEnable[t]=!1,this.gridEnable[t]=!1,this.zeroEnable[t]=!1,this.backgroundEnable[t]=!1)}},t.exports=function(e){var t=new o;return t.merge(e),t}},{"../../../lib/html2unicode":694,"../../../lib/str2rgbarray":719}],792:[function(e,t,n){"use strict";var r=e("../../../lib"),a=e("../../../components/color"),i=e("../../../registry"),o=e("../../subplot_defaults"),s=e("./axis_defaults"),l=e("./layout_attributes");function u(e,t,n,r){for(var o=n("bgcolor"),l=a.combine(o,r.paper_bgcolor),u=["up","center","eye"],c=0;c<u.length;c++)n("camera."+u[c]+".x"),n("camera."+u[c]+".y"),n("camera."+u[c]+".z");var f=!!n("aspectratio.x")&&!!n("aspectratio.y")&&!!n("aspectratio.z"),d=f?"manual":"auto",p=n("aspectmode",d);f||(e.aspectratio=t.aspectratio={x:1,y:1,z:1},"manual"===p&&(t.aspectmode="auto"),e.aspectmode=t.aspectmode),s(e,t,{font:r.font,scene:r.id,data:r.fullData,bgColor:l,calendar:r.calendar,fullLayout:r.fullLayout}),i.getComponentMethod("annotations3d","handleDefaults")(e,t,r),n("dragmode",r.getDfltFromLayout("dragmode")),n("hovermode",r.getDfltFromLayout("hovermode"))}t.exports=function(e,t,n){var a=t._basePlotModules.length>1;o(e,t,n,{type:"gl3d",attributes:l,handleDefaults:u,fullLayout:t,font:t.font,fullData:n,getDfltFromLayout:function(t){if(!a)return r.validate(e[t],l[t])?e[t]:void 0},paper_bgcolor:t.paper_bgcolor,calendar:t.calendar})}},{"../../../components/color":570,"../../../lib":696,"../../../registry":827,"../../subplot_defaults":822,"./axis_defaults":790,"./layout_attributes":793}],793:[function(e,t,n){"use strict";var r=e("./axis_attributes"),a=e("../../domain").attributes,i=e("../../../lib/extend").extendFlat,o=e("../../../lib").counterRegex;function s(e,t,n){return{x:{valType:"number",dflt:e,editType:"camera"},y:{valType:"number",dflt:t,editType:"camera"},z:{valType:"number",dflt:n,editType:"camera"},editType:"camera"}}t.exports={_arrayAttrRegexps:[o("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:i(s(0,0,1),{}),center:i(s(0,0,0),{}),eye:i(s(1.25,1.25,1.25),{}),editType:"camera"},domain:a({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:r,yaxis:r,zaxis:r,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],dflt:"turntable",editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},{"../../../lib":696,"../../../lib/extend":685,"../../domain":770,"./axis_attributes":789}],794:[function(e,t,n){"use strict";var r=e("../../../lib/str2rgbarray"),a=["xaxis","yaxis","zaxis"];function i(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}var o=i.prototype;o.merge=function(e){for(var t=0;t<3;++t){var n=e[a[t]];n.visible?(this.enabled[t]=n.showspikes,this.colors[t]=r(n.spikecolor),this.drawSides[t]=n.spikesides,this.lineWidth[t]=n.spikethickness):(this.enabled[t]=!1,this.drawSides[t]=!1)}},t.exports=function(e){var t=new i;return t.merge(e),t}},{"../../../lib/str2rgbarray":719}],795:[function(e,t,n){"use strict";t.exports=function(e){for(var t=e.axesOptions,n=e.glplot.axesPixels,l=e.fullSceneLayout,u=[[],[],[]],c=0;c<3;++c){var f=l[o[c]];if(f._length=(n[c].hi-n[c].lo)*n[c].pixelsPerDataUnit/e.dataScale[c],Math.abs(f._length)===1/0)u[c]=[];else{f._input_range=f.range.slice(),f.range[0]=n[c].lo/e.dataScale[c],f.range[1]=n[c].hi/e.dataScale[c],f._m=1/(e.dataScale[c]*n[c].pixelsPerDataUnit),f.range[0]===f.range[1]&&(f.range[0]-=1,f.range[1]+=1);var d=f.tickmode;if("auto"===f.tickmode){f.tickmode="linear";var p=f.nticks||a.constrain(f._length/40,4,9);r.autoTicks(f,Math.abs(f.range[1]-f.range[0])/p)}for(var h=r.calcTicks(f),m=0;m<h.length;++m)h[m].x=h[m].x*e.dataScale[c],h[m].text=i(h[m].text);u[c]=h,f.tickmode=d}}t.ticks=u;for(var c=0;c<3;++c){s[c]=.5*(e.glplot.bounds[0][c]+e.glplot.bounds[1][c]);for(var m=0;m<2;++m)t.bounds[m][c]=e.glplot.bounds[m][c]}e.contourLevels=function(e){for(var t=new Array(3),n=0;n<3;++n){for(var r=e[n],a=new Array(r.length),i=0;i<r.length;++i)a[i]=r[i].x;t[n]=a}return t}(u)};var r=e("../../cartesian/axes"),a=e("../../../lib"),i=e("../../../lib/html2unicode"),o=["xaxis","yaxis","zaxis"],s=[0,0,0]},{"../../../lib":696,"../../../lib/html2unicode":694,"../../cartesian/axes":744}],796:[function(e,t,n){"use strict";function r(e,t){var n,r,a=[0,0,0,0];for(n=0;n<4;++n)for(r=0;r<4;++r)a[r]+=e[4*n+r]*t[n];return a}t.exports=function(e,t){return r(e.projection,r(e.view,r(e.model,[t[0],t[1],t[2],1])))}},{}],797:[function(e,t,n){"use strict";var r,a,i=e("gl-plot3d"),o=e("webgl-context"),s=e("has-passive-events"),l=e("../../registry"),u=e("../../lib"),c=e("../../plots/cartesian/axes"),f=e("../../components/fx"),d=e("../../lib/str2rgbarray"),p=e("../../lib/show_no_webgl_msg"),h=e("./camera"),m=e("./project"),v=e("./layout/convert"),g=e("./layout/spikes"),y=e("./layout/tick_marks");function b(e,t,n,l){var u=e.graphDiv,d={canvas:n,gl:l,container:e.container,axes:e.axesOptions,spikes:e.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1};if(e.staticMode){if(!(a||(r=document.createElement("canvas"),a=o({canvas:r,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}))))throw new Error("error creating static canvas/context for image server");d.pixelRatio=e.pixelRatio,d.gl=a,d.canvas=r}try{e.glplot=i(d)}catch(t){return p(e)}var v=function(e){if(!1!==e.fullSceneLayout.dragmode){var t={};t[e.id+".camera"]=k(e.camera),e.saveCamera(u.layout),e.graphDiv.emit("plotly_relayout",t)}};if(e.glplot.canvas.addEventListener("mouseup",v.bind(null,e)),e.glplot.canvas.addEventListener("wheel",v.bind(null,e),!!s&&{passive:!1}),e.staticMode||e.glplot.canvas.addEventListener("webglcontextlost",function(t){u&&u.emit&&u.emit("plotly_webglcontextlost",{event:t,layer:e.id})},!1),!e.camera){var g=e.fullSceneLayout.camera;e.camera=h(e.container,{center:[g.center.x,g.center.y,g.center.z],eye:[g.eye.x,g.eye.y,g.eye.z],up:[g.up.x,g.up.y,g.up.z],zoomMin:.1,zoomMax:100,mode:"orbit"})}return e.glplot.camera=e.camera,e.glplot.oncontextloss=function(){e.recoverContext()},e.glplot.onrender=function(e){var t,n=e.svgContainer,r=e.container.getBoundingClientRect(),a=r.width,i=r.height;n.setAttributeNS(null,"viewBox","0 0 "+a+" "+i),n.setAttributeNS(null,"width",a),n.setAttributeNS(null,"height",i),y(e),e.glplot.axes.update(e.axesOptions);for(var o,s=Object.keys(e.traces),l=null,u=e.glplot.selection,d=0;d<s.length;++d)"skip"!==(t=e.traces[s[d]]).data.hoverinfo&&t.handlePick(u)&&(l=t),t.setContourLevels&&t.setContourLevels();function p(t,n){var r=e.fullSceneLayout[t];return c.tickText(r,r.d2l(n),"hover").text}if(null!==l){var h=m(e.glplot.cameraParams,u.dataCoordinate);t=l.data;var v,g=u.index,b=f.castHoverinfo(t,e.fullLayout,g),x=b.split("+"),_="all"===b,w=p("xaxis",u.traceCoordinate[0]),T=p("yaxis",u.traceCoordinate[1]),k=p("zaxis",u.traceCoordinate[2]);if(_||(-1===x.indexOf("x")&&(w=void 0),-1===x.indexOf("y")&&(T=void 0),-1===x.indexOf("z")&&(k=void 0),-1===x.indexOf("text")&&(u.textLabel=void 0),-1===x.indexOf("name")&&(l.name=void 0)),"cone"===t.type||"streamtube"===t.type){var C=[];(_||-1!==x.indexOf("u"))&&C.push("u: "+p("xaxis",u.traceCoordinate[3])),(_||-1!==x.indexOf("v"))&&C.push("v: "+p("yaxis",u.traceCoordinate[4])),(_||-1!==x.indexOf("w"))&&C.push("w: "+p("zaxis",u.traceCoordinate[5])),(_||-1!==x.indexOf("norm"))&&C.push("norm: "+u.traceCoordinate[6].toPrecision(3)),"streamtube"!==t.type||!_&&-1===x.indexOf("divergence")||C.push("divergence: "+u.traceCoordinate[7].toPrecision(3)),u.textLabel&&C.push(u.textLabel),v=C.join("<br>")}else v=u.textLabel;e.fullSceneLayout.hovermode&&f.loneHover({x:(.5+.5*h[0]/h[3])*a,y:(.5-.5*h[1]/h[3])*i,xLabel:w,yLabel:T,zLabel:k,text:v,name:l.name,color:f.castHoverOption(t,g,"bgcolor")||l.color,borderColor:f.castHoverOption(t,g,"bordercolor"),fontFamily:f.castHoverOption(t,g,"font.family"),fontSize:f.castHoverOption(t,g,"font.size"),fontColor:f.castHoverOption(t,g,"font.color")},{container:n,gd:e.graphDiv});var E={x:u.traceCoordinate[0],y:u.traceCoordinate[1],z:u.traceCoordinate[2],data:t._input,fullData:t,curveNumber:t.index,pointNumber:g};t._module.eventData&&(E=t._module.eventData(E,u,t,{},g)),f.appendArrayPointValue(E,t,g);var M={points:[E]};u.buttons&&u.distance<5?e.graphDiv.emit("plotly_click",M):e.graphDiv.emit("plotly_hover",M),o=M}else f.loneUnhover(n),e.graphDiv.emit("plotly_unhover",o);e.drawAnnotations(e)}.bind(null,e),e.traces={},!0}function x(e,t){var n=document.createElement("div"),r=e.container;this.graphDiv=e.graphDiv;var a=document.createElementNS("http://www.w3.org/2000/svg","svg");a.style.position="absolute",a.style.top=a.style.left="0px",a.style.width=a.style.height="100%",a.style["z-index"]=20,a.style["pointer-events"]="none",n.appendChild(a),this.svgContainer=a,n.id=e.id,n.style.position="absolute",n.style.top=n.style.left="0px",n.style.width=n.style.height="100%",r.appendChild(n),this.fullLayout=t,this.id=e.id||"scene",this.fullSceneLayout=t[this.id],this.plotArgs=[[],{},{}],this.axesOptions=v(t[this.id]),this.spikeOptions=g(t[this.id]),this.container=n,this.staticMode=!!e.staticPlot,this.pixelRatio=e.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=l.getComponentMethod("annotations3d","convert"),this.drawAnnotations=l.getComponentMethod("annotations3d","draw"),b(this)}var _=x.prototype;_.recoverContext=function(){var e=this,t=this.glplot.gl,n=this.glplot.canvas;this.glplot.dispose(),requestAnimationFrame(function r(){t.isContextLost()?requestAnimationFrame(r):b(e,e.fullLayout,n,t)?e.plot.apply(e,e.plotArgs):u.error("Catastrophic and unrecoverable WebGL error. Context lost.")})};var w=["xaxis","yaxis","zaxis"];function T(e,t,n){for(var r=e.fullSceneLayout,a=0;a<3;a++){var i=w[a],o=i.charAt(0),s=r[i],l=t[o],c=t[o+"calendar"],f=t["_"+o+"length"];if(u.isArrayOrTypedArray(l))for(var d,p=0;p<(f||l.length);p++)if(u.isArrayOrTypedArray(l[p]))for(var h=0;h<l[p].length;++h)d=s.d2l(l[p][h],0,c),!isNaN(d)&&isFinite(d)&&(n[0][a]=Math.min(n[0][a],d),n[1][a]=Math.max(n[1][a],d));else d=s.d2l(l[p],0,c),!isNaN(d)&&isFinite(d)&&(n[0][a]=Math.min(n[0][a],d),n[1][a]=Math.max(n[1][a],d));else n[0][a]=Math.min(n[0][a],0),n[1][a]=Math.max(n[1][a],f-1)}}function k(e){return{up:{x:e.up[0],y:e.up[1],z:e.up[2]},center:{x:e.center[0],y:e.center[1],z:e.center[2]},eye:{x:e.eye[0],y:e.eye[1],z:e.eye[2]}}}_.plot=function(e,t,n){if(this.plotArgs=[e,t,n],!this.glplot.contextLost){var r,a,i,o,s,l,u=t[this.id],c=n[this.id];u.bgcolor?this.glplot.clearColor=d(u.bgcolor):this.glplot.clearColor=[0,0,0,0],this.glplot.snapToData=!0,this.fullLayout=t,this.fullSceneLayout=u,this.glplotLayout=u,this.axesOptions.merge(u),this.spikeOptions.merge(u),this.setCamera(u.camera),this.updateFx(u.dragmode,u.hovermode),this.glplot.update({}),this.setConvert(s),e?Array.isArray(e)||(e=[e]):e=[];var f=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(i=0;i<e.length;++i)!0===(r=e[i]).visible&&T(this,r,f);var p=[1,1,1];for(o=0;o<3;++o)f[1][o]===f[0][o]?p[o]=1:p[o]=1/(f[1][o]-f[0][o]);for(this.dataScale=p,this.convertAnnotations(this),i=0;i<e.length;++i)!0===(r=e[i]).visible&&((a=this.traces[r.uid])?a.data.type===r.type?a.update(r):(a.dispose(),a=r._module.plot(this,r),this.traces[r.uid]=a):(a=r._module.plot(this,r),this.traces[r.uid]=a),a.name=r.name);var h=Object.keys(this.traces);e:for(i=0;i<h.length;++i){for(o=0;o<e.length;++o)if(e[o].uid===h[i]&&!0===e[o].visible)continue e;(a=this.traces[h[i]]).dispose(),delete this.traces[h[i]]}this.glplot.objects.sort(function(e,t){return e._trace.data.index-t._trace.data.index});var m=[[0,0,0],[0,0,0]],v=[],g={};for(i=0;i<3;++i){if(s=u[w[i]],(l=s.type)in g?(g[l].acc*=p[i],g[l].count+=1):g[l]={acc:p[i],count:1},s.autorange){m[0][i]=1/0,m[1][i]=-1/0;var y=this.glplot.objects,b=this.fullSceneLayout.annotations||[],x=s._name.charAt(0);for(o=0;o<y.length;o++){var _=y[o],k=_.bounds,C=_._trace.data._pad||0;"ErrorBars"===_.constructor.name&&s._lowerLogErrorBound?m[0][i]=Math.min(m[0][i],s._lowerLogErrorBound):m[0][i]=Math.min(m[0][i],k[0][i]/p[i]-C),m[1][i]=Math.max(m[1][i],k[1][i]/p[i]+C)}for(o=0;o<b.length;o++){var E=b[o];if(E.visible){var M=s.r2l(E[x]);m[0][i]=Math.min(m[0][i],M),m[1][i]=Math.max(m[1][i],M)}}if("rangemode"in s&&"tozero"===s.rangemode&&(m[0][i]=Math.min(m[0][i],0),m[1][i]=Math.max(m[1][i],0)),m[0][i]>m[1][i])m[0][i]=-1,m[1][i]=1;else{var A=m[1][i]-m[0][i];m[0][i]-=A/32,m[1][i]+=A/32}if("reversed"===s.autorange){var S=m[0][i];m[0][i]=m[1][i],m[1][i]=S}}else{var O=s.range;m[0][i]=s.r2l(O[0]),m[1][i]=s.r2l(O[1])}m[0][i]===m[1][i]&&(m[0][i]-=1,m[1][i]+=1),v[i]=m[1][i]-m[0][i],this.glplot.bounds[0][i]=m[0][i]*p[i],this.glplot.bounds[1][i]=m[1][i]*p[i]}var P,R=[1,1,1];for(i=0;i<3;++i){s=u[w[i]],l=s.type;var L=g[l];R[i]=Math.pow(L.acc,1/L.count)/p[i]}if("auto"===u.aspectmode)P=Math.max.apply(null,R)/Math.min.apply(null,R)<=4?R:[1,1,1];else if("cube"===u.aspectmode)P=[1,1,1];else if("data"===u.aspectmode)P=R;else{if("manual"!==u.aspectmode)throw new Error("scene.js aspectRatio was not one of the enumerated types");var D=u.aspectratio;P=[D.x,D.y,D.z]}u.aspectratio.x=c.aspectratio.x=P[0],u.aspectratio.y=c.aspectratio.y=P[1],u.aspectratio.z=c.aspectratio.z=P[2],this.glplot.aspect=P;var I=u.domain||null,z=t._size||null;if(I&&z){var j=this.container.style;j.position="absolute",j.left=z.l+I.x[0]*z.w+"px",j.top=z.t+(1-I.y[1])*z.h+"px",j.width=z.w*(I.x[1]-I.x[0])+"px",j.height=z.h*(I.y[1]-I.y[0])+"px"}this.glplot.redraw()}},_.destroy=function(){this.glplot&&(this.camera.mouseListener.enabled=!1,this.container.removeEventListener("wheel",this.camera.wheelListener),this.camera=this.glplot.camera=null,this.glplot.dispose(),this.container.parentNode.removeChild(this.container),this.glplot=null)},_.getCamera=function(){return this.glplot.camera.view.recalcMatrix(this.camera.view.lastT()),k(this.glplot.camera)},_.setCamera=function(e){this.glplot.camera.lookAt.apply(this,function(e){return[[e.eye.x,e.eye.y,e.eye.z],[e.center.x,e.center.y,e.center.z],[e.up.x,e.up.y,e.up.z]]}(e))},_.saveCamera=function(e){var t=this.getCamera(),n=u.nestedProperty(e,this.id+".camera"),r=n.get(),a=!1;function i(e,t,n,r){var a=["up","center","eye"],i=["x","y","z"];return t[a[n]]&&e[a[n]][i[r]]===t[a[n]][i[r]]}if(void 0===r)a=!0;else for(var o=0;o<3;o++)for(var s=0;s<3;s++)if(!i(t,r,o,s)){a=!0;break}return a&&n.set(t),a},_.updateFx=function(e,t){var n=this.camera;n&&("orbit"===e?(n.mode="orbit",n.keyBindingMode="rotate"):"turntable"===e?(n.up=[0,0,1],n.mode="turntable",n.keyBindingMode="rotate"):n.keyBindingMode=e),this.fullSceneLayout.hovermode=t},_.toImage=function(e){e||(e="png"),this.staticMode&&this.container.appendChild(r),this.glplot.redraw();var t=this.glplot.gl,n=t.drawingBufferWidth,a=t.drawingBufferHeight;t.bindFramebuffer(t.FRAMEBUFFER,null);var i=new Uint8Array(n*a*4);t.readPixels(0,0,n,a,t.RGBA,t.UNSIGNED_BYTE,i);for(var o=0,s=a-1;o<s;++o,--s)for(var l=0;l<n;++l)for(var u=0;u<4;++u){var c=i[4*(n*o+l)+u];i[4*(n*o+l)+u]=i[4*(n*s+l)+u],i[4*(n*s+l)+u]=c}var f=document.createElement("canvas");f.width=n,f.height=a;var d,p=f.getContext("2d"),h=p.createImageData(n,a);switch(h.data.set(i),p.putImageData(h,0,0),e){case"jpeg":d=f.toDataURL("image/jpeg");break;case"webp":d=f.toDataURL("image/webp");break;default:d=f.toDataURL("image/png")}return this.staticMode&&this.container.removeChild(r),d},_.setConvert=function(){for(var e=0;e<3;e++){var t=this.fullSceneLayout[w[e]];c.setConvert(t,this.fullLayout),t.setScale=u.noop}},t.exports=x},{"../../components/fx":612,"../../lib":696,"../../lib/show_no_webgl_msg":717,"../../lib/str2rgbarray":719,"../../plots/cartesian/axes":744,"../../registry":827,"./camera":786,"./layout/convert":791,"./layout/spikes":794,"./layout/tick_marks":795,"./project":796,"gl-plot3d":277,"has-passive-events":394,"webgl-context":533}],798:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){r=r||e.length;for(var a=new Array(r),i=0;i<r;i++)a[i]=[e[i],t[i],n[i]];return a}},{}],799:[function(e,t,n){"use strict";var r=e("./font_attributes"),a=e("../components/color/attributes"),i=r({editType:"calc"});i.family.dflt='"Open Sans", verdana, arial, sans-serif',i.size.dflt=12,i.color.dflt=a.defaultLine,t.exports={font:i,title:{valType:"string",editType:"layoutstyle"},titlefont:r({editType:"layoutstyle"}),autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},paper_bgcolor:{valType:"color",dflt:a.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:a.background,editType:"layoutstyle"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:a.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},template:{valType:"any",editType:"calc"},modebar:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},editType:"modebar"}}},{"../components/color/attributes":569,"./font_attributes":771}],800:[function(e,t,n){"use strict";t.exports={requiredVersion:"0.45.0",styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",controlContainerClassName:"mapboxgl-control-container",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install mapbox-gl@0.45.0."].join("\n"),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.plot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join("\n"),mapOnErrorMsg:"Mapbox error.",styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none"}}},{}],801:[function(e,t,n){"use strict";var r=e("../../lib");t.exports=function(e,t){var n=e.split(" "),a=n[0],i=n[1],o=r.isArrayOrTypedArray(t)?r.mean(t):t,s=.5+o/100,l=1.5+o/100,u=["",""],c=[0,0];switch(a){case"top":u[0]="top",c[1]=-l;break;case"bottom":u[0]="bottom",c[1]=l}switch(i){case"left":u[1]="right",c[0]=-s;break;case"right":u[1]="left",c[0]=s}return{anchor:u[0]&&u[1]?u.join("-"):u[0]?u[0]:u[1]?u[1]:"center",offset:c}}},{"../../lib":696}],802:[function(e,t,n){"use strict";var r=e("mapbox-gl"),a=e("../../lib"),i=e("../../plots/get_data").getSubplotCalcData,o=e("../../constants/xmlns_namespaces"),s=e("./mapbox"),l=e("./constants");for(var u in l.styleRules)a.addStyleRule(".mapboxgl-"+u,l.styleRules[u]);n.name="mapbox",n.attr="subplot",n.idRoot="mapbox",n.idRegex=n.attrRegex=a.counterRegex("mapbox"),n.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},n.layoutAttributes=e("./layout_attributes"),n.supplyLayoutDefaults=e("./layout_defaults"),n.plot=function(e){var t=e._fullLayout,n=e.calcdata,o=t._subplots.mapbox;if(r.version!==l.requiredVersion)throw new Error(l.wrongVersionErrorMsg);var u=function(e,t){var n=e._fullLayout;if(""===e._context.mapboxAccessToken)return"";for(var r=0;r<t.length;r++){var a=n[t[r]];if(a.accesstoken)return a.accesstoken}throw new Error(l.noAccessTokenErrorMsg)}(e,o);r.accessToken=u;for(var c=0;c<o.length;c++){var f=o[c],d=i(n,"mapbox",f),p=t[f],h=p._subplot;h||(h=s({gd:e,container:t._glcontainer.node(),id:f,fullLayout:t,staticPlot:e._context.staticPlot}),t[f]._subplot=h),h.viewInitial||(h.viewInitial={center:a.extendFlat({},p.center),zoom:p.zoom,bearing:p.bearing,pitch:p.pitch}),h.plot(d,t,e._promises)}},n.clean=function(e,t,n,r){for(var a=r._subplots.mapbox||[],i=0;i<a.length;i++){var o=a[i];!t[o]&&r[o]._subplot&&r[o]._subplot.destroy()}},n.toSVG=function(e){for(var t=e._fullLayout,n=t._subplots.mapbox,r=t._size,a=0;a<n.length;a++){var i=t[n[a]],s=i.domain,l=i._subplot,u=l.toImage("png"),c=t._glimages.append("svg:image");c.attr({xmlns:o.svg,"xlink:href":u,x:r.l+r.w*s.x[0],y:r.t+r.h*(1-s.y[1]),width:r.w*(s.x[1]-s.x[0]),height:r.h*(s.y[1]-s.y[0]),preserveAspectRatio:"none"}),l.destroy()}},n.updateFx=function(e){for(var t=e._fullLayout,n=t._subplots.mapbox,r=0;r<n.length;r++){var a=t[n[r]]._subplot;a.updateFx(t)}}},{"../../constants/xmlns_namespaces":674,"../../lib":696,"../../plots/get_data":781,"./constants":800,"./layout_attributes":804,"./layout_defaults":805,"./mapbox":806,"mapbox-gl":409}],803:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("./convert_text_opts");function i(e,t){this.mapbox=e,this.map=e.map,this.uid=e.uid+"-layer"+t,this.idSource=this.uid+"-source",this.idLayer=this.uid+"-layer",this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var o=i.prototype;function s(e){var t=e.source;return e.visible&&(r.isPlainObject(t)||"string"==typeof t&&t.length>0)}function l(e){var t={},n={};switch(e.type){case"circle":r.extendFlat(n,{"circle-radius":e.circle.radius,"circle-color":e.color,"circle-opacity":e.opacity});break;case"line":r.extendFlat(n,{"line-width":e.line.width,"line-color":e.color,"line-opacity":e.opacity});break;case"fill":r.extendFlat(n,{"fill-color":e.color,"fill-outline-color":e.fill.outlinecolor,"fill-opacity":e.opacity});break;case"symbol":var i=e.symbol,o=a(i.textposition,i.iconsize);r.extendFlat(t,{"icon-image":i.icon+"-15","icon-size":i.iconsize/10,"text-field":i.text,"text-size":i.textfont.size,"text-anchor":o.anchor,"text-offset":o.offset}),r.extendFlat(n,{"icon-color":e.color,"text-color":i.textfont.color,"text-opacity":e.opacity})}return{layout:t,paint:n}}o.update=function(e){this.visible?this.needsNewSource(e)?(this.removeLayer(),this.updateSource(e),this.updateLayer(e)):this.needsNewLayer(e)?this.updateLayer(e):this.updateStyle(e):(this.updateSource(e),this.updateLayer(e)),this.visible=s(e)},o.needsNewSource=function(e){return this.sourceType!==e.sourcetype||this.source!==e.source||this.layerType!==e.type},o.needsNewLayer=function(e){return this.layerType!==e.type||this.below!==e.below},o.updateSource=function(e){var t=this.map;if(t.getSource(this.idSource)&&t.removeSource(this.idSource),this.sourceType=e.sourcetype,this.source=e.source,s(e)){var n=function(e){var t,n=e.sourcetype,r=e.source,a={type:n};return"geojson"===n?t="data":"vector"===n&&(t="string"==typeof r?"url":"tiles"),a[t]=r,a}(e);t.addSource(this.idSource,n)}},o.updateLayer=function(e){var t=this.map,n=l(e);this.removeLayer(),this.layerType=e.type,s(e)&&t.addLayer({id:this.idLayer,source:this.idSource,"source-layer":e.sourcelayer||"",type:e.type,layout:n.layout,paint:n.paint},e.below)},o.updateStyle=function(e){if(s(e)){var t=l(e);this.mapbox.setOptions(this.idLayer,"setLayoutProperty",t.layout),this.mapbox.setOptions(this.idLayer,"setPaintProperty",t.paint)}},o.removeLayer=function(){var e=this.map;e.getLayer(this.idLayer)&&e.removeLayer(this.idLayer)},o.dispose=function(){var e=this.map;e.removeLayer(this.idLayer),e.removeSource(this.idSource)},t.exports=function(e,t,n){var r=new i(e,t);return r.update(n),r}},{"../../lib":696,"./convert_text_opts":801}],804:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("../../components/color").defaultLine,i=e("../domain").attributes,o=e("../font_attributes"),s=e("../../traces/scatter/attributes").textposition,l=e("../../plot_api/edit_types").overrideAll,u=e("../../plot_api/plot_template").templatedArray,c=o({});c.family.dflt="Open Sans Regular, Arial Unicode MS Regular",t.exports=l({_arrayAttrRegexps:[r.counterRegex("mapbox",".layers",!0)],domain:i({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],dflt:"basic"},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},layers:u("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},type:{valType:"enumerated",values:["circle","line","fill","symbol"],dflt:"circle"},below:{valType:"string",dflt:""},color:{valType:"color",dflt:a},opacity:{valType:"number",min:0,max:1,dflt:1},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2}},fill:{outlinecolor:{valType:"color",dflt:a}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},textfont:c,textposition:r.extendFlat({},s,{arrayOk:!1})}})},"plot","from-root")},{"../../components/color":570,"../../lib":696,"../../plot_api/edit_types":727,"../../plot_api/plot_template":734,"../../traces/scatter/attributes":1043,"../domain":770,"../font_attributes":771}],805:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("../subplot_defaults"),i=e("../array_container_defaults"),o=e("./layout_attributes");function s(e,t,n,r){n("accesstoken",r.accessToken),n("style"),n("center.lon"),n("center.lat"),n("zoom"),n("bearing"),n("pitch"),i(e,t,{name:"layers",handleItemDefaults:l}),t._input=e}function l(e,t){function n(n,a){return r.coerce(e,t,o.layers,n,a)}var a=n("visible");if(a){var i=n("sourcetype");n("source"),"vector"===i&&n("sourcelayer");var s=n("type");n("below"),n("color"),n("opacity"),"circle"===s&&n("circle.radius"),"line"===s&&n("line.width"),"fill"===s&&n("fill.outlinecolor"),"symbol"===s&&(n("symbol.icon"),n("symbol.iconsize"),n("symbol.text"),r.coerceFont(n,"symbol.textfont"),n("symbol.textposition"))}}t.exports=function(e,t,n){a(e,t,n,{type:"mapbox",attributes:o,handleDefaults:s,partition:"y",accessToken:t._mapboxAccessToken})}},{"../../lib":696,"../array_container_defaults":740,"../subplot_defaults":822,"./layout_attributes":804}],806:[function(e,t,n){"use strict";var r=e("mapbox-gl"),a=e("../../components/fx"),i=e("../../lib"),o=e("../../components/dragelement"),s=e("../cartesian/select").prepSelect,l=e("../cartesian/select").selectOnClick,u=e("./constants"),c=e("./layout_attributes"),f=e("./layers");function d(e){this.id=e.id,this.gd=e.gd,this.container=e.container,this.isStatic=e.staticPlot;var t=e.fullLayout;this.uid=t._uid+"-"+this.id,this.opts=t[this.id],this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(t),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[]}var p=d.prototype;function h(e){var t=c.style.values,n=c.style.dflt,r={};return i.isPlainObject(e)?(r.id=e.id,r.style=e):"string"==typeof e?(r.id=e,r.style=-1!==t.indexOf(e)?m(e):e):(r.id=n,r.style=m(n)),r.transition={duration:0,delay:0},r}function m(e){return u.styleUrlPrefix+e+"-"+u.styleUrlSuffix}function v(e){return[e.lon,e.lat]}t.exports=function(e){return new d(e)},p.plot=function(e,t,n){var r,a=this,i=a.opts=t[this.id];a.map&&i.accesstoken!==a.accessToken&&(a.map.remove(),a.map=null,a.styleObj=null,a.traceHash=[],a.layerList={}),r=a.map?new Promise(function(n,r){a.updateMap(e,t,n,r)}):new Promise(function(n,r){a.createMap(e,t,n,r)}),n.push(r)},p.createMap=function(e,t,n,i){var o=this,s=o.gd,c=o.opts,f=o.styleObj=h(c.style);o.accessToken=c.accesstoken;var d=o.map=new r.Map({container:o.div,style:f.style,center:v(c.center),zoom:c.zoom,bearing:c.bearing,pitch:c.pitch,interactive:!o.isStatic,preserveDrawingBuffer:o.isStatic,doubleClickZoom:!1,boxZoom:!1}),p=u.controlContainerClassName,m=o.div.getElementsByClassName(p)[0];if(o.div.removeChild(m),d._canvas.style.left="0px",d._canvas.style.top="0px",o.rejectOnError(i),d.once("load",function(){o.updateData(e),o.updateLayout(t),o.resolveOnRender(n)}),!o.isStatic){var g=!1;d.on("moveend",function(e){if(o.map){var t=o.getView();c._input.center=c.center=t.center,c._input.zoom=c.zoom=t.zoom,c._input.bearing=c.bearing=t.bearing,c._input.pitch=c.pitch=t.pitch,(e.originalEvent||g)&&b(t),g=!1}}),d.on("wheel",function(){g=!0}),d.on("mousemove",function(e){var t=o.div.getBoundingClientRect();e.clientX=e.point.x+t.left,e.clientY=e.point.y+t.top,e.target.getBoundingClientRect=function(){return t},o.xaxis.p2c=function(){return e.lngLat.lng},o.yaxis.p2c=function(){return e.lngLat.lat},a.hover(s,e,o.id)}),d.on("dragstart",y),d.on("zoomstart",y),d.on("dblclick",function(){s.emit("plotly_doubleclick",null);var e=o.viewInitial;d.setCenter(v(e.center)),d.setZoom(e.zoom),d.setBearing(e.bearing),d.setPitch(e.pitch);var t=o.getView();c._input.center=c.center=t.center,c._input.zoom=c.zoom=t.zoom,c._input.bearing=c.bearing=t.bearing,c._input.pitch=c.pitch=t.pitch,b(t)}),o.clearSelect=function(){s._fullLayout._zoomlayer.selectAll(".select-outline").remove()},o.onClickInPanFn=function(e){return function(t){var n=s._fullLayout.clickmode;n.indexOf("select")>-1&&l(t.originalEvent,s,[o.xaxis],[o.yaxis],o.id,e),n.indexOf("event")>-1&&a.click(s,t.originalEvent)}}}function y(){a.loneUnhover(t._toppaper)}function b(e){var t=o.id,n={};for(var r in e)n[t+"."+r]=e[r];s.emit("plotly_relayout",n)}},p.updateMap=function(e,t,n,r){var a=this,i=a.map;a.rejectOnError(r);var o=h(a.opts.style);a.styleObj.id!==o.id?(a.styleObj=o,i.setStyle(o.style),i.once("styledata",function(){a.traceHash={},a.updateData(e),a.updateLayout(t),a.resolveOnRender(n)})):(a.updateData(e),a.updateLayout(t),a.resolveOnRender(n))},p.updateData=function(e){var t,n,r,a,i=this.traceHash;for(r=0;r<e.length;r++){var o=e[r];n=o[0].trace,(t=i[n.uid])?t.update(o):n._module&&(i[n.uid]=n._module.plot(this,o))}var s=Object.keys(i);e:for(r=0;r<s.length;r++){var l=s[r];for(a=0;a<e.length;a++)if(n=e[a][0].trace,l===n.uid)continue e;(t=i[l]).dispose(),delete i[l]}},p.updateLayout=function(e){var t=this.map,n=this.opts;t.setCenter(v(n.center)),t.setZoom(n.zoom),t.setBearing(n.bearing),t.setPitch(n.pitch),this.updateLayers(),this.updateFramework(e),this.updateFx(e),this.map.resize()},p.resolveOnRender=function(e){var t=this.map;t.on("render",function n(){t.loaded()&&(t.off("render",n),setTimeout(e,0))})},p.rejectOnError=function(e){var t=this.map;function n(){e(new Error(u.mapOnErrorMsg))}t.once("error",n),t.once("style.error",n),t.once("source.error",n),t.once("tile.error",n),t.once("layer.error",n)},p.createFramework=function(e){var t=this,n=t.div=document.createElement("div");n.id=t.uid,n.style.position="absolute",t.container.appendChild(n),t.xaxis={_id:"x",c2p:function(e){return t.project(e).x}},t.yaxis={_id:"y",c2p:function(e){return t.project(e).y}},t.updateFramework(e)},p.updateFx=function(e){var t=this,n=t.map,r=t.gd;if(!t.isStatic){var a,l=e.dragmode;a="select"===l?function(e,n){var r=e.range={};r[t.id]=[c([n.xmin,n.ymin]),c([n.xmax,n.ymax])]}:function(e,n,r){var a=e.lassoPoints={};a[t.id]=r.filtered.map(c)};var u=t.dragOptions;t.dragOptions=i.extendDeep(u||{},{element:t.div,gd:r,plotinfo:{id:t.id,xaxis:t.xaxis,yaxis:t.yaxis,fillRangeItems:a},xaxes:[t.xaxis],yaxes:[t.yaxis],subplot:t.id}),n.off("click",t.onClickInPanHandler),"select"===l||"lasso"===l?(n.dragPan.disable(),n.on("zoomstart",t.clearSelect),t.dragOptions.prepFn=function(e,n,r){s(e,n,r,t.dragOptions,l)},o.init(t.dragOptions)):(n.dragPan.enable(),n.off("zoomstart",t.clearSelect),t.div.onmousedown=null,t.onClickInPanHandler=t.onClickInPanFn(t.dragOptions),n.on("click",t.onClickInPanHandler))}function c(e){var n=t.map.unproject(e);return[n.lng,n.lat]}},p.updateFramework=function(e){var t=e[this.id].domain,n=e._size,r=this.div.style;r.width=n.w*(t.x[1]-t.x[0])+"px",r.height=n.h*(t.y[1]-t.y[0])+"px",r.left=n.l+t.x[0]*n.w+"px",r.top=n.t+(1-t.y[1])*n.h+"px",this.xaxis._offset=n.l+t.x[0]*n.w,this.xaxis._length=n.w*(t.x[1]-t.x[0]),this.yaxis._offset=n.t+(1-t.y[1])*n.h,this.yaxis._length=n.h*(t.y[1]-t.y[0])},p.updateLayers=function(){var e,t=this.opts,n=t.layers,r=this.layerList;if(n.length!==r.length){for(e=0;e<r.length;e++)r[e].dispose();for(r=this.layerList=[],e=0;e<n.length;e++)r.push(f(this,e,n[e]))}else for(e=0;e<n.length;e++)r[e].update(n[e])},p.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},p.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},p.setOptions=function(e,t,n){for(var r in n)this.map[t](e,r,n[r])},p.project=function(e){return this.map.project(new r.LngLat(e[0],e[1]))},p.getView=function(){var e=this.map,t=e.getCenter(),n={lon:t.lng,lat:t.lat};return{center:n,zoom:e.getZoom(),bearing:e.getBearing(),pitch:e.getPitch()}}},{"../../components/dragelement":592,"../../components/fx":612,"../../lib":696,"../cartesian/select":762,"./constants":800,"./layers":803,"./layout_attributes":804,"mapbox-gl":409}],807:[function(e,t,n){"use strict";t.exports={t:{valType:"number",dflt:0,editType:"arraydraw"},r:{valType:"number",dflt:0,editType:"arraydraw"},b:{valType:"number",dflt:0,editType:"arraydraw"},l:{valType:"number",dflt:0,editType:"arraydraw"},editType:"arraydraw"}},{}],808:[function(e,t,n){"use strict";var r=e("d3"),a=e("fast-isnumeric"),i=e("../registry"),o=e("../plot_api/plot_schema"),s=e("../plot_api/plot_template"),l=e("../lib"),u=e("../components/color"),c=e("../constants/numerical").BADNUM,f=e("../plots/cartesian/axis_ids"),d=e("./animation_attributes"),p=e("./frame_attributes"),h=l.relinkPrivateKeys,m=l._,v=t.exports={};l.extendFlat(v,i),v.attributes=e("./attributes"),v.attributes.type.values=v.allTypes,v.fontAttrs=e("./font_attributes"),v.layoutAttributes=e("./layout_attributes"),v.fontWeight="normal";var g=v.transformsRegistry,y=e("./command");v.executeAPICommand=y.executeAPICommand,v.computeAPICommandBindings=y.computeAPICommandBindings,v.manageCommandObserver=y.manageCommandObserver,v.hasSimpleAPICommandBindings=y.hasSimpleAPICommandBindings,v.redrawText=function(e){if(!((e=l.getGraphDiv(e)).data&&e.data[0]&&e.data[0].r))return new Promise(function(t){setTimeout(function(){i.getComponentMethod("annotations","draw")(e),i.getComponentMethod("legend","draw")(e),(e.calcdata||[]).forEach(function(e){e[0]&&e[0].t&&e[0].t.cb&&e[0].t.cb()}),t(v.previousPromises(e))},300)})},v.resize=function(e){return e=l.getGraphDiv(e),new Promise(function(t,n){function r(e){var t=window.getComputedStyle(e).display;return!t||"none"===t}e&&!r(e)||n(new Error("Resize must be passed a displayed plot div element.")),e._redrawTimer&&clearTimeout(e._redrawTimer),e._redrawTimer=setTimeout(function(){if(!e.layout||e.layout.width&&e.layout.height||r(e))t(e);else{delete e.layout.width,delete e.layout.height;var n=e.changed;e.autoplay=!0,i.call("relayout",e,{autosize:!0}).then(function(){e.changed=n,t(e)})}},100)})},v.previousPromises=function(e){if((e._promises||[]).length)return Promise.all(e._promises).then(function(){e._promises=[]})},v.addLinks=function(e){if(e._context.showLink||e._context.showSources){var t=e._fullLayout,n=l.ensureSingle(t._paper,"text","js-plot-link-container",function(e){e.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:u.defaultLine,"pointer-events":"all"}).each(function(){var e=r.select(this);e.append("tspan").classed("js-link-to-tool",!0),e.append("tspan").classed("js-link-spacer",!0),e.append("tspan").classed("js-sourcelinks",!0)})}),a=n.node(),i={y:t._paper.attr("height")-9};document.body.contains(a)&&a.getComputedTextLength()>=t.width-20?(i["text-anchor"]="start",i.x=5):(i["text-anchor"]="end",i.x=t._paper.attr("width")-7),n.attr(i);var o=n.select(".js-link-to-tool"),s=n.select(".js-link-spacer"),c=n.select(".js-sourcelinks");e._context.showSources&&e._context.showSources(e),e._context.showLink&&function(e,t){t.text("");var n=t.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(e._context.linkText+" "+String.fromCharCode(187));if(e._context.sendData)n.on("click",function(){v.sendDataToCloud(e)});else{var r=window.location.pathname.split("/"),a=window.location.search;n.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+r[2].split(".")[0]+"/"+r[1]+a})}}(e,o),s.text(o.text()&&c.text()?" - ":"")}},v.sendDataToCloud=function(e){e.emit("plotly_beforeexport");var t=(window.PLOTLYENV||{}).BASE_URL||e._context.plotlyServerURL,n=r.select(e).append("div").attr("id","hiddenform").style("display","none"),a=n.append("form").attr({action:t+"/external",method:"post",target:"_blank"}),i=a.append("input").attr({type:"text",name:"data"});return i.node().value=v.graphJson(e,!1,"keepdata"),a.node().submit(),n.remove(),e.emit("plotly_afterexport"),!1};var b,x=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],_=["year","month","dayMonth","dayMonthYear"];function w(e,t){var n=e._context.locale,r=!1,a={};function o(e){for(var n=!0,i=0;i<t.length;i++){var o=t[i];a[o]||(e[o]?a[o]=e[o]:n=!1)}n&&(r=!0)}for(var s=0;s<2;s++){for(var l=e._context.locales,u=0;u<2;u++){var c=(l[n]||{}).format;if(c&&(o(c),r))break;l=i.localeRegistry}var f=n.split("-")[0];if(r||f===n)break;n=f}return r||o(i.localeRegistry.en.format),a}function T(e){var t=e.transforms;if(Array.isArray(t)&&t.length)for(var n=0;n<t.length;n++){var r=t[n],a=r._module||g[r.type];if(a&&a.makesData)return!0}return!1}function k(e,t,n,r){for(var a=e.transforms,i=[e],o=0;o<a.length;o++){var s=a[o],l=g[s.type];l&&l.transform&&(i=l.transform(i,{transform:s,fullTrace:e,fullData:t,layout:n,fullLayout:r,transformIndex:o}))}return i}function C(e){e._pushmargin||(e._pushmargin={}),e._pushmarginIds||(e._pushmarginIds={})}function E(e){for(var t=0;t<e.length;t++)e[t].clearCalc()}v.supplyDefaults=function(e,t){var n=t&&t.skipUpdateCalc,a=e._fullLayout||{};if(a._skipDefaults)delete a._skipDefaults;else{var o,s=e._fullLayout={},u=e.layout||{},c=e._fullData||[],d=e._fullData=[],p=e.data||[],g=e.calcdata||[],y=e._context||{};e._transitionData||v.createTransitionData(e),s._dfltTitle={plot:m(e,"Click to enter Plot title"),x:m(e,"Click to enter X axis title"),y:m(e,"Click to enter Y axis title"),colorbar:m(e,"Click to enter Colorscale title"),annotation:m(e,"new text")},s._traceWord=m(e,"trace");var T=w(e,x);if(s._mapboxAccessToken=y.mapboxAccessToken,a._initialAutoSizeIsDone){var k=a.width,C=a.height;v.supplyLayoutGlobalDefaults(u,s,T),u.width||(s.width=k),u.height||(s.height=C),v.sanitizeMargins(s)}else{v.supplyLayoutGlobalDefaults(u,s,T);var E=!u.width||!u.height,M=s.autosize,A=y.autosizable,S=E&&(M||A);S?v.plotAutoSize(e,u,s):E&&v.sanitizeMargins(s),!M&&E&&(u.width=s.width,u.height=s.height)}s._d3locale=function(e,t){return e.decimal=t.charAt(0),e.thousands=t.charAt(1),r.locale(e)}(T,s.separators),s._extraFormat=w(e,_),s._initialAutoSizeIsDone=!0,s._dataLength=p.length,s._modules=[],s._visibleModules=[],s._basePlotModules=[];var O=s._subplots=function(){var e,t,n={};if(!b){b=[];var r=i.subplotsRegistry;for(var a in r){var o=r[a],s=o.attr;if(s&&(b.push(a),Array.isArray(s)))for(t=0;t<s.length;t++)l.pushUnique(b,s[t])}}for(e=0;e<b.length;e++)n[b[e]]=[];return n}(),P=s._splomAxes={x:{},y:{}},R=s._splomSubplots={};s._splomGridDflt={},s._scatterStackOpts={},s._firstScatter={},s._requestRangeslider={},s._traceUids=function(e,t){var n,r,a=t.length,i=[];for(n=0;n<e.length;n++){var o=e[n]._fullInput;o!==r&&i.push(o),r=o}var s=i.length,u=new Array(a),c={};function f(e,t){u[t]=e,c[e]=1}function d(e,t){if(e&&"string"==typeof e&&!c[e])return f(e,t),!0}for(n=0;n<a;n++)d(t[n].uid,n)||n<s&&d(i[n].uid,n)||f(l.randstr(c),n);return u}(c,p),s._globalTransforms=(e._context||{}).globalTransforms,v.supplyDataDefaults(p,d,u,s);var L=Object.keys(P.x),D=Object.keys(P.y);if(L.length>1&&D.length>1){for(i.getComponentMethod("grid","sizeDefaults")(u,s),o=0;o<L.length;o++)l.pushUnique(O.xaxis,L[o]);for(o=0;o<D.length;o++)l.pushUnique(O.yaxis,D[o]);for(var I in R)l.pushUnique(O.cartesian,I)}if(s._has=v._hasPlotType.bind(s),c.length===d.length)for(o=0;o<d.length;o++)h(d[o],c[o]);v.supplyLayoutModuleDefaults(u,s,d,e._transitionData);var z=s._visibleModules,j=[];for(o=0;o<z.length;o++){var N=z[o].crossTraceDefaults;N&&l.pushUnique(j,N)}for(o=0;o<j.length;o++)j[o](d,s);s._hasOnlyLargeSploms=1===s._basePlotModules.length&&"splom"===s._basePlotModules[0].name&&L.length>15&&D.length>15&&0===s.shapes.length&&0===s.images.length,s._hasCartesian=s._has("cartesian"),s._hasGeo=s._has("geo"),s._hasGL3D=s._has("gl3d"),s._hasGL2D=s._has("gl2d"),s._hasTernary=s._has("ternary"),s._hasPie=s._has("pie"),v.linkSubplots(d,s,c,a),v.cleanPlot(d,s,c,a),h(s,a),v.doAutoMargin(e);var F=f.list(e);for(o=0;o<F.length;o++){var B=F[o];B.setScale()}n||g.length!==d.length||v.supplyDefaultsUpdateCalc(g,d)}},v.supplyDefaultsUpdateCalc=function(e,t){for(var n=0;n<t.length;n++){var r=t[n],a=e[n][0];if(a&&a.trace){var i=a.trace;if(i._hasCalcTransform){var o,s,u,c=i._arrayAttrs;for(o=0;o<c.length;o++)s=c[o],u=l.nestedProperty(i,s).get().slice(),l.nestedProperty(r,s).set(u)}a.trace=r}}},v.createTransitionData=function(e){e._transitionData||(e._transitionData={}),e._transitionData._frames||(e._transitionData._frames=[]),e._transitionData._frameHash||(e._transitionData._frameHash={}),e._transitionData._counter||(e._transitionData._counter=0),e._transitionData._interruptCallbacks||(e._transitionData._interruptCallbacks=[])},v._hasPlotType=function(e){var t,n=this._basePlotModules||[];for(t=0;t<n.length;t++)if(n[t].name===e)return!0;var r=this._modules||[];for(t=0;t<r.length;t++){var a=r[t].name;if(a===e)return!0;var o=i.modules[a];if(o&&o.categories[e])return!0}return!1},v.cleanPlot=function(e,t,n,r){var a,i,o=r._basePlotModules||[];for(a=0;a<o.length;a++){var s=o[a];s.clean&&s.clean(e,t,n,r)}var l=r._has&&r._has("gl"),u=t._has&&t._has("gl");l&&!u&&void 0!==r._glcontainer&&(r._glcontainer.selectAll(".gl-canvas").remove(),r._glcontainer.selectAll(".no-webgl").remove(),r._glcanvas=null);var c=!!r._infolayer;e:for(a=0;a<n.length;a++){var f=n[a],d=f.uid;for(i=0;i<e.length;i++){var p=e[i];if(d===p.uid)continue e}c&&r._infolayer.select(".cb"+d).remove()}r._zoomlayer&&r._zoomlayer.selectAll(".select-outline").remove()},v.linkSubplots=function(e,t,n,r){var a,i,o=r._plots||{},s=t._plots={},l=t._subplots,u={_fullData:e,_fullLayout:t},c=l.cartesian.concat(l.gl2d||[]);for(a=0;a<c.length;a++){var d,p=c[a],h=o[p],m=f.getFromId(u,p,"x"),v=f.getFromId(u,p,"y");for(h?d=s[p]=h:(d=s[p]={}).id=p,d.xaxis=m,d.yaxis=v,d._hasClipOnAxisFalse=!1,i=0;i<e.length;i++){var g=e[i];if(g.xaxis===d.xaxis._id&&g.yaxis===d.yaxis._id&&!1===g.cliponaxis){d._hasClipOnAxisFalse=!0;break}}}var y=f.list(u,null,!0);for(a=0;a<y.length;a++){var b=y[a],x=null;b.overlaying&&(x=f.getFromId(u,b.overlaying))&&x.overlaying&&(b.overlaying=!1,x=null),b._mainAxis=x||b,x&&(b.domain=x.domain.slice()),b._anchorAxis="free"===b.anchor?null:f.getFromId(u,b.anchor)}},v.clearExpandedTraceDefaultColors=function(e){var t,n,r;for(n=[],(t=e._module._colorAttrs)||(e._module._colorAttrs=t=[],o.crawl(e._module.attributes,function(e,r,a,i){n[i]=r,n.length=i+1,"color"===e.valType&&void 0===e.dflt&&t.push(n.join("."))})),r=0;r<t.length;r++){var a=l.nestedProperty(e,"_input."+t[r]);a.get()||l.nestedProperty(e,t[r]).set(null)}},v.supplyDataDefaults=function(e,t,n,r){var a,o,u,c=r._modules,f=r._visibleModules,d=r._basePlotModules,p=0,m=0;function g(e){t.push(e);var n=e._module;n&&(l.pushUnique(c,n),!0===e.visible&&l.pushUnique(f,n),l.pushUnique(d,e._module.basePlotModule),p++,!1!==e._input.visible&&m++)}r._transformModules=[];var y={},b=[],x=(n.template||{}).data||{},_=s.traceTemplater(x);for(a=0;a<e.length;a++){if(u=e[a],(o=_.newTrace(u)).uid=r._traceUids[a],v.supplyTraceDefaults(u,o,m,r,a),o.index=a,o._input=u,o._expandedIndex=p,o.transforms&&o.transforms.length)for(var w=!1!==u.visible&&!1===o.visible,T=k(o,t,n,r),C=0;C<T.length;C++){var E=T[C],M={_template:o._template,type:o.type,uid:o.uid+C};w&&!1===E.visible&&delete E.visible,v.supplyTraceDefaults(E,M,p,r,a),h(M,E),M.index=a,M._input=u,M._fullInput=o,M._expandedIndex=p,M._expandedInput=E,g(M)}else o._fullInput=o,o._expandedInput=o,g(o);i.traceIs(o,"carpetAxis")&&(y[o.carpet]=o),i.traceIs(o,"carpetDependent")&&b.push(a)}for(a=0;a<b.length;a++)if((o=t[b[a]]).visible){var A=y[o.carpet];o._carpet=A,A&&A.visible?(o.xaxis=A.xaxis,o.yaxis=A.yaxis):o.visible=!1}},v.supplyAnimationDefaults=function(e){var t;e=e||{};var n={};function r(t,r){return l.coerce(e||{},n,d,t,r)}if(r("mode"),r("direction"),r("fromcurrent"),Array.isArray(e.frame))for(n.frame=[],t=0;t<e.frame.length;t++)n.frame[t]=v.supplyAnimationFrameDefaults(e.frame[t]||{});else n.frame=v.supplyAnimationFrameDefaults(e.frame||{});if(Array.isArray(e.transition))for(n.transition=[],t=0;t<e.transition.length;t++)n.transition[t]=v.supplyAnimationTransitionDefaults(e.transition[t]||{});else n.transition=v.supplyAnimationTransitionDefaults(e.transition||{});return n},v.supplyAnimationFrameDefaults=function(e){var t={};function n(n,r){return l.coerce(e||{},t,d.frame,n,r)}return n("duration"),n("redraw"),t},v.supplyAnimationTransitionDefaults=function(e){var t={};function n(n,r){return l.coerce(e||{},t,d.transition,n,r)}return n("duration"),n("easing"),t},v.supplyFrameDefaults=function(e){var t={};function n(n,r){return l.coerce(e,t,p,n,r)}return n("group"),n("name"),n("traces"),n("baseframe"),n("data"),n("layout"),t},v.supplyTraceDefaults=function(e,t,n,r,a){var o,s=r.colorway||u.defaults,c=s[n%s.length];function f(n,r){return l.coerce(e,t,v.attributes,n,r)}var d=f("visible");f("type"),f("name",r._traceWord+" "+a);var p=v.getModule(t);if(t._module=p,p){var h=p.basePlotModule,m=h.attr,g=h.attributes;if(m&&g){var y=r._subplots,b="";if("gl2d"!==h.name||d){if(Array.isArray(m))for(o=0;o<m.length;o++){var x=m[o],_=l.coerce(e,t,g,x);y[x]&&l.pushUnique(y[x],_),b+=_}else b=l.coerce(e,t,g,m);y[h.name]&&l.pushUnique(y[h.name],b)}}}return d&&(f("customdata"),f("ids"),i.traceIs(t,"showLegend")?(t._dfltShowLegend=!0,f("showlegend"),f("legendgroup")):t._dfltShowLegend=!1,function(e,t,n){p&&e in p.attributes&&void 0===p.attributes[e]||(n&&"function"==typeof n?n():f(e,t))}("hoverlabel","",function(){i.getComponentMethod("fx","supplyDefaults")(e,t,c,r)}),p&&(p.supplyDefaults(e,t,c,r),l.coerceHoverinfo(e,t,r)),i.traceIs(t,"noOpacity")||f("opacity"),i.traceIs(t,"notLegendIsolatable")&&(t.visible=!!t.visible),p&&p.selectPoints&&f("selectedpoints"),v.supplyTransformDefaults(e,t,r)),t},v.hasMakesDataTransform=T,v.supplyTransformDefaults=function(e,t,n){if(t._length||T(e)){var r=n._globalTransforms||[],a=n._transformModules||[];if(Array.isArray(e.transforms)||0!==r.length)for(var i=e.transforms||[],o=r.concat(i),s=t.transforms=[],u=0;u<o.length;u++){var c,f=o[u],d=f.type,p=g[d],h=!(f._module&&f._module===p),m=p&&"function"==typeof p.transform;p||l.warn("Unrecognized transform type "+d+"."),p&&p.supplyDefaults&&(h||m)?((c=p.supplyDefaults(f,t,n,e)).type=d,c._module=p,l.pushUnique(a,p)):c=l.extendFlat({},f),s.push(c)}}},v.supplyLayoutGlobalDefaults=function(e,t,n){function r(n,r){return l.coerce(e,t,v.layoutAttributes,n,r)}var a=e.template;l.isPlainObject(a)&&(t.template=a,t._template=a.layout,t._dataTemplate=a.data);var o=l.coerceFont(r,"font");r("title",t._dfltTitle.plot),l.coerceFont(r,"titlefont",{family:o.family,size:Math.round(1.4*o.size),color:o.color}),r("autosize",!(e.width&&e.height)),r("width"),r("height"),r("margin.l"),r("margin.r"),r("margin.t"),r("margin.b"),r("margin.pad"),r("margin.autoexpand"),e.width&&e.height&&v.sanitizeMargins(t),i.getComponentMethod("grid","sizeDefaults")(e,t),r("paper_bgcolor"),r("separators",n.decimal+n.thousands),r("hidesources"),r("colorway"),r("datarevision"),r("modebar.orientation"),r("modebar.bgcolor",u.addOpacity(t.paper_bgcolor,.5));var s=u.contrast(u.rgb(t.modebar.bgcolor));r("modebar.color",u.addOpacity(s,.3)),r("modebar.activecolor",u.addOpacity(s,.7)),i.getComponentMethod("calendars","handleDefaults")(e,t,"calendar"),i.getComponentMethod("fx","supplyLayoutGlobalDefaults")(e,t,r)},v.plotAutoSize=function(e,t,n){var r,i,o=e._context||{},s=o.frameMargins,u=l.isPlotDiv(e);if(u&&e.emit("plotly_autosize"),o.fillFrame)r=window.innerWidth,i=window.innerHeight,document.body.style.overflow="hidden";else{var c=u?window.getComputedStyle(e):{};if(r=parseFloat(c.width)||parseFloat(c.maxWidth)||n.width,i=parseFloat(c.height)||parseFloat(c.maxHeight)||n.height,a(s)&&s>0){var f=1-2*s;r=Math.round(f*r),i=Math.round(f*i)}}var d=v.layoutAttributes.width.min,p=v.layoutAttributes.height.min;r<d&&(r=d),i<p&&(i=p);var h=!t.width&&Math.abs(n.width-r)>1,m=!t.height&&Math.abs(n.height-i)>1;(m||h)&&(h&&(n.width=r),m&&(n.height=i)),e._initialAutoSize||(e._initialAutoSize={width:r,height:i}),v.sanitizeMargins(n)},v.supplyLayoutModuleDefaults=function(e,t,n,r){var a,o,s,u=i.componentsRegistry,c=t._basePlotModules,f=i.subplotsRegistry.cartesian;for(a in u)(s=u[a]).includeBasePlot&&s.includeBasePlot(e,t);for(var d in c.length||c.push(f),t._has("cartesian")&&(i.getComponentMethod("grid","contentDefaults")(e,t),f.finalizeSubplots(e,t)),t._subplots)t._subplots[d].sort(l.subplotSort);for(o=0;o<c.length;o++)(s=c[o]).supplyLayoutDefaults&&s.supplyLayoutDefaults(e,t,n);var p=t._modules;for(o=0;o<p.length;o++)(s=p[o]).supplyLayoutDefaults&&s.supplyLayoutDefaults(e,t,n);var h=t._transformModules;for(o=0;o<h.length;o++)(s=h[o]).supplyLayoutDefaults&&s.supplyLayoutDefaults(e,t,n,r);for(a in u)(s=u[a]).supplyLayoutDefaults&&s.supplyLayoutDefaults(e,t,n)},v.purge=function(e){var t=e._fullLayout||{};void 0!==t._glcontainer&&(t._glcontainer.selectAll(".gl-canvas").remove(),t._glcontainer.remove(),t._glcanvas=null),void 0!==t._geocontainer&&t._geocontainer.remove(),t._modeBar&&t._modeBar.destroy(),e._transitionData&&(e._transitionData._interruptCallbacks&&(e._transitionData._interruptCallbacks.length=0),e._transitionData._animationRaf&&window.cancelAnimationFrame(e._transitionData._animationRaf)),l.clearThrottle(),l.clearResponsive(e),delete e.data,delete e.layout,delete e._fullData,delete e._fullLayout,delete e.calcdata,delete e.framework,delete e.empty,delete e.fid,delete e.undoqueue,delete e.undonum,delete e.autoplay,delete e.changed,delete e._promises,delete e._redrawTimer,delete e._hmlumcount,delete e._hmpixcount,delete e._transitionData,delete e._transitioning,delete e._initialAutoSize,delete e._transitioningWithDuration,delete e._dragging,delete e._dragged,delete e._hoverdata,delete e._snapshotInProgress,delete e._editing,delete e._replotPending,delete e._mouseDownTime,delete e._legendMouseDownTime,e.removeAllListeners&&e.removeAllListeners()},v.style=function(e){var t,n=e._fullLayout._visibleModules,r=[];for(t=0;t<n.length;t++){var a=n[t];a.style&&l.pushUnique(r,a.style)}for(t=0;t<r.length;t++)r[t](e)},v.sanitizeMargins=function(e){if(e&&e.margin){var t,n=e.width,r=e.height,a=e.margin,i=n-(a.l+a.r),o=r-(a.t+a.b);i<0&&(t=(n-1)/(a.l+a.r),a.l=Math.floor(t*a.l),a.r=Math.floor(t*a.r)),o<0&&(t=(r-1)/(a.t+a.b),a.t=Math.floor(t*a.t),a.b=Math.floor(t*a.b))}},v.clearAutoMarginIds=function(e){e._fullLayout._pushmarginIds={}},v.allowAutoMargin=function(e,t){e._fullLayout._pushmarginIds[t]=1},v.autoMargin=function(e,t,n){var r=e._fullLayout;C(r);var a=r._pushmargin,i=r._pushmarginIds;if(!1!==r.margin.autoexpand){if(n){var o=n.pad;if(void 0===o){var s=r.margin;o=Math.min(12,s.l,s.r,s.t,s.b)}n.l+n.r>.5*r.width&&(n.l=n.r=0),n.b+n.t>.5*r.height&&(n.b=n.t=0);var l=void 0!==n.xl?n.xl:n.x,u=void 0!==n.xr?n.xr:n.x,c=void 0!==n.yt?n.yt:n.y,f=void 0!==n.yb?n.yb:n.y;a[t]={l:{val:l,size:n.l+o},r:{val:u,size:n.r+o},b:{val:f,size:n.b+o},t:{val:c,size:n.t+o}},i[t]=1}else delete a[t],delete i[t];r._replotting||v.doAutoMargin(e)}},v.doAutoMargin=function(e){var t=e._fullLayout;t._size||(t._size={}),C(t);var n=t._size,r=JSON.stringify(n),o=Math.max(t.margin.l||0,0),s=Math.max(t.margin.r||0,0),l=Math.max(t.margin.t||0,0),u=Math.max(t.margin.b||0,0),c=t._pushmargin,f=t._pushmarginIds;if(!1!==t.margin.autoexpand){for(var d in c)f[d]||delete c[d];for(var p in c.base={l:{val:0,size:o},r:{val:1,size:s},t:{val:1,size:l},b:{val:0,size:u}},c){var h=c[p].l||{},m=c[p].b||{},v=h.val,g=h.size,y=m.val,b=m.size;for(var x in c){if(a(g)&&c[x].r){var _=c[x].r.val,w=c[x].r.size;if(_>v){var T=(g*_+(w-t.width)*v)/(_-v),k=(w*(1-v)+(g-t.width)*(1-_))/(_-v);T>=0&&k>=0&&T+k>o+s&&(o=T,s=k)}}if(a(b)&&c[x].t){var E=c[x].t.val,M=c[x].t.size;if(E>y){var A=(b*E+(M-t.height)*y)/(E-y),S=(M*(1-y)+(b-t.height)*(1-E))/(E-y);A>=0&&S>=0&&A+S>u+l&&(u=A,l=S)}}}}}if(n.l=Math.round(o),n.r=Math.round(s),n.t=Math.round(l),n.b=Math.round(u),n.p=Math.round(t.margin.pad),n.w=Math.round(t.width)-n.l-n.r,n.h=Math.round(t.height)-n.t-n.b,!t._replotting&&"{}"!==r&&r!==JSON.stringify(t._size))return"_redrawFromAutoMarginCount"in t?t._redrawFromAutoMarginCount++:t._redrawFromAutoMarginCount=1,i.call("plot",e)},v.graphJson=function(e,t,n,r,a){(a&&t&&!e._fullData||a&&!t&&!e._fullLayout)&&v.supplyDefaults(e);var i=a?e._fullData:e.data,o=a?e._fullLayout:e.layout,s=(e._transitionData||{})._frames;function u(e){if("function"==typeof e)return null;if(l.isPlainObject(e)){var t,r,a={};for(t in e)if("function"!=typeof e[t]&&-1===["_","["].indexOf(t.charAt(0))){if("keepdata"===n){if("src"===t.substr(t.length-3))continue}else if("keepstream"===n){if("string"==typeof(r=e[t+"src"])&&r.indexOf(":")>0&&!l.isPlainObject(e.stream))continue}else if("keepall"!==n&&"string"==typeof(r=e[t+"src"])&&r.indexOf(":")>0)continue;a[t]=u(e[t])}return a}return Array.isArray(e)?e.map(u):l.isTypedArray(e)?l.simpleMap(e,l.identity):l.isJSDate(e)?l.ms2DateTimeLocal(+e):e}var c={data:(i||[]).map(function(e){var n=u(e);return t&&delete n.fit,n})};return t||(c.layout=u(o)),e.framework&&e.framework.isPolar&&(c=e.framework.getConfig()),s&&(c.frames=u(s)),"object"===r?c:JSON.stringify(c)},v.modifyFrames=function(e,t){var n,r,a,i=e._transitionData._frames,o=e._transitionData._frameHash;for(n=0;n<t.length;n++)switch((r=t[n]).type){case"replace":a=r.value;var s=(i[r.index]||{}).name,l=a.name;i[r.index]=o[l]=a,l!==s&&(delete o[s],o[l]=a);break;case"insert":a=r.value,o[a.name]=a,i.splice(r.index,0,a);break;case"delete":a=i[r.index],delete o[a.name],i.splice(r.index,1)}return Promise.resolve()},v.computeFrame=function(e,t){var n,r,a,i,o=e._transitionData._frameHash;if(!t)throw new Error("computeFrame must be given a string frame name");var s=o[t.toString()];if(!s)return!1;for(var l=[s],u=[s.name];s.baseframe&&(s=o[s.baseframe.toString()])&&-1===u.indexOf(s.name);)l.push(s),u.push(s.name);for(var c={};s=l.pop();)if(s.layout&&(c.layout=v.extendLayout(c.layout,s.layout)),s.data){if(c.data||(c.data=[]),!(r=s.traces))for(r=[],n=0;n<s.data.length;n++)r[n]=n;for(c.traces||(c.traces=[]),n=0;n<s.data.length;n++)void 0!==(a=r[n])&&null!==a&&(-1===(i=c.traces.indexOf(a))&&(i=c.data.length,c.traces[i]=a),c.data[i]=v.extendTrace(c.data[i],s.data[n]))}return c},v.recomputeFrameHash=function(e){for(var t=e._transitionData._frameHash={},n=e._transitionData._frames,r=0;r<n.length;r++){var a=n[r];a&&a.name&&(t[a.name]=a)}},v.extendObjectWithContainers=function(e,t,n){var r,a,i,o,s,u,c,f,d=l.extendDeepNoArrays({},t||{}),p=l.expandObjectPaths(d),h={};if(n&&n.length)for(i=0;i<n.length;i++)r=l.nestedProperty(p,n[i]),void 0===(a=r.get())?l.nestedProperty(h,n[i]).set(null):(r.set(null),l.nestedProperty(h,n[i]).set(a));if(e=l.extendDeepNoArrays(e||{},p),n&&n.length)for(i=0;i<n.length;i++)if(s=l.nestedProperty(h,n[i]),c=s.get()){for(u=l.nestedProperty(e,n[i]),f=u.get(),Array.isArray(f)||(f=[],u.set(f)),o=0;o<c.length;o++){var m=c[o];f[o]=null===m?null:v.extendObjectWithContainers(f[o],m)}u.set(f)}return e},v.dataArrayContainers=["transforms","dimensions"],v.layoutArrayContainers=i.layoutArrayContainers,v.extendTrace=function(e,t){return v.extendObjectWithContainers(e,t,v.dataArrayContainers)},v.extendLayout=function(e,t){return v.extendObjectWithContainers(e,t,v.layoutArrayContainers)},v.transition=function(e,t,n,r,a,o){var s,u,c=Array.isArray(t)?t.length:0,f=r.slice(0,c),d=[],p=!1;for(s=0;s<f.length;s++){u=f[s];var h=e._fullData[u];h._module}var m=[v.previousPromises,function(){if(e._transitionData)return e._transitioning=!1,function(e){var t=Promise.resolve();if(!e)return t;for(;e.length;)t=t.then(e.shift());return t}(e._transitionData._interruptCallbacks)},function(){var r;for(r=0;r<f.length;r++){var a=f[r],i=e._fullData[a],o=i._module;o&&(o.animatable&&d.push(a),e.data[f[r]]=v.extendTrace(e.data[f[r]],t[r]))}var s=l.expandObjectPaths(l.extendDeepNoArrays({},n)),u=/^[xy]axis[0-9]*$/;for(var c in s)u.test(c)&&delete s[c].range;return v.extendLayout(e.layout,s),delete e.calcdata,v.supplyDefaults(e),v.doCalcdata(e),Promise.resolve()},v.rehover,function(){return e.emit("plotly_transitioning",[]),new Promise(function(t){e._transitioning=!0,o.duration>0&&(e._transitioningWithDuration=!0),e._transitionData._interruptCallbacks.push(function(){p=!0}),a.redraw&&e._transitionData._interruptCallbacks.push(function(){return i.call("redraw",e)}),e._transitionData._interruptCallbacks.push(function(){e.emit("plotly_transitioninterrupted",[])});var r,s,u=0,c=0;function f(){return u++,function(){p||++c!==u||function(t){e._transitionData&&(function(e){if(e)for(;e.length;)e.shift()}(e._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(a.redraw)return i.call("redraw",e)}).then(function(){e._transitioning=!1,e._transitioningWithDuration=!1,e.emit("plotly_transitioned",[])}).then(t))}(t)}}var h=e._fullLayout._basePlotModules,m=!1;if(n)for(s=0;s<h.length;s++)if(h[s].transitionAxes){var v=l.expandObjectPaths(n);m=h[s].transitionAxes(e,v,o,f)||m}for(m?((r=l.extendFlat({},o)).duration=0,d=null):r=o,s=0;s<h.length;s++)h[s].plot(e,d,r,f);setTimeout(f())})}],g=l.syncOrAsync(m,e);return g&&g.then||(g=Promise.resolve()),g.then(function(){return e})},v.doCalcdata=function(e,t){var n,r,a,s,u=f.list(e),d=e._fullData,p=e._fullLayout,h=new Array(d.length),m=(e.calcdata||[]).slice(0);for(e.calcdata=h,p._numBoxes=0,p._numViolins=0,p._violinScaleGroupStats={},e._hmpixcount=0,e._hmlumcount=0,p._piecolormap={},a=0;a<d.length;a++)Array.isArray(t)&&-1===t.indexOf(a)&&(h[a]=m[a]);for(a=0;a<d.length;a++)(n=d[a])._arrayAttrs=o.findArrayAttributes(n),n._extremes={};var v=p._subplots.polar||[];for(a=0;a<v.length;a++)u.push(p[v[a]].radialaxis,p[v[a]].angularaxis);E(u);var y=!1;for(a=0;a<d.length;a++)if(!0===(n=d[a]).visible&&n.transforms){if((r=n._module)&&r.calc){var b=r.calc(e,n);b[0]&&b[0].t&&b[0].t._scene&&delete b[0].t._scene.dirty}for(s=0;s<n.transforms.length;s++){var x=n.transforms[s];(r=g[x.type])&&r.calcTransform&&(n._hasCalcTransform=!0,y=!0,r.calcTransform(e,n,x))}}function _(t,a){if(n=d[t],!!(r=n._module).isContainer===a){var i=[];if(!0===n.visible){delete n._indexToPoints;var o=n.transforms||[];for(s=o.length-1;s>=0;s--)if(o[s].enabled){n._indexToPoints=o[s]._indexToPoints;break}r&&r.calc&&(i=r.calc(e,n))}Array.isArray(i)&&i[0]||(i=[{x:c,y:c}]),i[0].t||(i[0].t={}),i[0].trace=n,h[t]=i}}for(y&&E(u),a=0;a<d.length;a++)_(a,!0);for(a=0;a<d.length;a++)_(a,!1);!function(e){var t,n,r,a=e._fullLayout,i=a._visibleModules,o={};for(n=0;n<i.length;n++){var s=i[n],u=s.crossTraceCalc;if(u){var c=s.basePlotModule.name;o[c]?l.pushUnique(o[c],u):o[c]=[u]}}for(r in o){var f=o[r],d=a._subplots[r];if(Array.isArray(d))for(t=0;t<d.length;t++){var p=d[t],h="cartesian"===r?a._plots[p]:a[p];for(n=0;n<f.length;n++)f[n](e,h,p)}else for(n=0;n<f.length;n++)f[n](e)}}(e),i.getComponentMethod("fx","calc")(e),i.getComponentMethod("errorbars","calc")(e)},v.rehover=function(e){e._fullLayout._rehover&&e._fullLayout._rehover()},v.generalUpdatePerTraceModule=function(e,t,n,r){var a,i=t.traceHash,o={};for(a=0;a<n.length;a++){var s=n[a],u=s[0].trace;u.visible&&(o[u.type]=o[u.type]||[],o[u.type].push(s))}for(var c in i)if(!o[c]){var f=i[c][0],d=f[0].trace;d.visible=!1,o[c]=[f]}for(var p in o){var h=o[p],m=h[0][0].trace._module;m.plot(e,t,l.filterVisible(h),r)}t.traceHash=o}},{"../components/color":570,"../constants/numerical":673,"../lib":696,"../plot_api/plot_schema":733,"../plot_api/plot_template":734,"../plots/cartesian/axis_ids":747,"../registry":827,"./animation_attributes":739,"./attributes":741,"./command":769,"./font_attributes":771,"./frame_attributes":772,"./layout_attributes":799,d3:148,"fast-isnumeric":214}],809:[function(e,t,n){"use strict";t.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},{}],810:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("../../lib/polygon").tester,i=r.findIndexOfMin,o=r.isAngleInsideSector,s=r.angleDelta,l=r.angleDist;function u(e,t,n,r){var a,i,o=r[0],s=r[1],l=f(Math.sin(t)-Math.sin(e)),u=f(Math.cos(t)-Math.cos(e)),c=Math.tan(n),d=f(1/c),p=l/u,h=s-p*o;return d?l&&u?i=c*(a=h/(c-p)):u?(a=s*d,i=s):(a=o,i=o*c):l&&u?(a=0,i=h):u?(a=0,i=s):a=i=NaN,[a,i]}function c(e,t,n,a){return r.isFullCircle([t,n])?function(e,t){var n,r=t.length,a=new Array(r+1);for(n=0;n<r;n++){var i=t[n];a[n]=[e*Math.cos(i),e*Math.sin(i)]}return a[n]=a[0].slice(),a}(e,a):function(e,t,n,a){var s,c,f=a.length,d=[];function p(t){return[e*Math.cos(t),e*Math.sin(t)]}function h(e,t,n){return u(e,t,n,p(e))}function m(e){return r.mod(e,f)}function v(e){return o(e,[t,n])}var g=i(a,function(e){return v(e)?l(e,t):1/0}),y=h(a[g],a[m(g-1)],t);for(d.push(y),s=g,c=0;c<f;s++,c++){var b=a[m(s)];if(!v(b))break;d.push(p(b))}var x=i(a,function(e){return v(e)?l(e,n):1/0}),_=h(a[x],a[m(x+1)],n);return d.push(_),d.push([0,0]),d.push(d[0].slice()),d}(e,t,n,a)}function f(e){return Math.abs(e)>1e-10?e:0}function d(e,t,n){t=t||0,n=n||0;for(var r=e.length,a=new Array(r),i=0;i<r;i++){var o=e[i];a[i]=[t+o[0],n-o[1]]}return a}t.exports={isPtInsidePolygon:function(e,t,n,r,i){if(!o(t,r))return!1;var s,l;n[0]<n[1]?(s=n[0],l=n[1]):(s=n[1],l=n[0]);var u=a(c(s,r[0],r[1],i)),f=a(c(l,r[0],r[1],i)),d=[e*Math.cos(t),e*Math.sin(t)];return f.contains(d)&&!u.contains(d)},findPolygonOffset:function(e,t,n,r){for(var a=1/0,i=1/0,o=c(e,t,n,r),s=0;s<o.length;s++){var l=o[s];a=Math.min(a,l[0]),i=Math.min(i,-l[1])}return[a,i]},findEnclosingVertexAngles:function(e,t){var n=i(t,function(t){var n=s(t,e);return n>0?n:1/0}),a=r.mod(n+1,t.length);return[t[n],t[a]]},findIntersectionXY:u,findXYatLength:function(e,t,n,r){var a=-t*n,i=t*t+1,o=2*(t*a-n),s=a*a+n*n-e*e,l=Math.sqrt(o*o-4*i*s),u=(-o+l)/(2*i),c=(-o-l)/(2*i);return[[u,t*u+a+r],[c,t*c+a+r]]},clampTiny:f,pathPolygon:function(e,t,n,r,a,i){return"M"+d(c(e,t,n,r),a,i).join("L")},pathPolygonAnnulus:function(e,t,n,r,a,i,o){var s,l;e<t?(s=e,l=t):(s=t,l=e);var u=d(c(s,n,r,a),i,o);return"M"+d(c(l,n,r,a),i,o).reverse().join("L")+"M"+u.join("L")}}},{"../../lib":696,"../../lib/polygon":708}],811:[function(e,t,n){"use strict";var r=e("../get_data").getSubplotCalcData,a=e("../../lib").counterRegex,i=e("./polar"),o=e("./constants"),s=o.attr,l=o.name,u=a(l),c={};c[s]={valType:"subplotid",dflt:l,editType:"calc"},t.exports={attr:s,name:l,idRoot:l,idRegex:u,attrRegex:u,attributes:c,layoutAttributes:e("./layout_attributes"),supplyLayoutDefaults:e("./layout_defaults"),plot:function(e){for(var t=e._fullLayout,n=e.calcdata,a=t._subplots[l],o=0;o<a.length;o++){var s=a[o],u=r(n,l,s),c=t[s]._subplot;c||(c=i(e,s),t[s]._subplot=c),c.plot(u,t,e._promises)}},clean:function(e,t,n,r){for(var a=r._subplots[l]||[],i=r._has&&r._has("gl"),o=t._has&&t._has("gl"),s=i&&!o,u=0;u<a.length;u++){var c=a[u],f=r[c]._subplot;if(!t[c]&&f)for(var d in f.framework.remove(),f.layers["radial-axis-title"].remove(),f.clipPaths)f.clipPaths[d].remove();s&&f._scene&&(f._scene.destroy(),f._scene=null)}},toSVG:e("../cartesian").toSVG}},{"../../lib":696,"../cartesian":756,"../get_data":781,"./constants":809,"./layout_attributes":812,"./layout_defaults":813,"./polar":820}],812:[function(e,t,n){"use strict";var r=e("../../components/color/attributes"),a=e("../cartesian/layout_attributes"),i=e("../domain").attributes,o=e("../../lib").extendFlat,s=e("../../plot_api/edit_types").overrideAll,l=s({color:a.color,showline:o({},a.showline,{dflt:!0}),linecolor:a.linecolor,linewidth:a.linewidth,showgrid:o({},a.showgrid,{dflt:!0}),gridcolor:a.gridcolor,gridwidth:a.gridwidth},"plot","from-root"),u=s({tickmode:a.tickmode,nticks:a.nticks,tick0:a.tick0,dtick:a.dtick,tickvals:a.tickvals,ticktext:a.ticktext,ticks:a.ticks,ticklen:a.ticklen,tickwidth:a.tickwidth,tickcolor:a.tickcolor,showticklabels:a.showticklabels,showtickprefix:a.showtickprefix,tickprefix:a.tickprefix,showticksuffix:a.showticksuffix,ticksuffix:a.ticksuffix,showexponent:a.showexponent,exponentformat:a.exponentformat,separatethousands:a.separatethousands,tickfont:a.tickfont,tickangle:a.tickangle,tickformat:a.tickformat,tickformatstops:a.tickformatstops,layer:a.layer},"plot","from-root"),c={visible:o({},a.visible,{dflt:!0}),type:a.type,autorange:o({},a.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},range:o({},a.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:a.categoryorder,categoryarray:a.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:o({},a.title,{editType:"plot",dflt:""}),titlefont:s(a.titlefont,"plot","from-root"),hoverformat:a.hoverformat,editType:"calc"};o(c,l,u);var f={visible:o({},a.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},categoryorder:a.categoryorder,categoryarray:a.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:a.hoverformat,editType:"calc"};o(f,l,u),t.exports={domain:i({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:r.background},radialaxis:c,angularaxis:f,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},editType:"calc"}},{"../../components/color/attributes":569,"../../lib":696,"../../plot_api/edit_types":727,"../cartesian/layout_attributes":757,"../domain":770}],813:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("../../components/color"),i=e("../../plot_api/plot_template"),o=e("../subplot_defaults"),s=e("../get_data").getSubplotData,l=e("../cartesian/tick_value_defaults"),u=e("../cartesian/tick_mark_defaults"),c=e("../cartesian/tick_label_defaults"),f=e("../cartesian/category_order_defaults"),d=e("../cartesian/line_grid_defaults"),p=e("../cartesian/axis_autotype"),h=e("./layout_attributes"),m=e("./set_convert"),v=e("./constants"),g=v.axisNames;function y(e,t,n,o){var p=n("bgcolor");o.bgColor=a.combine(p,o.paper_bgcolor);var y=n("sector");n("hole");var x,_=s(o.fullData,v.name,o.id),w=o.layoutOut;function T(e,t){return n(x+"."+e,t)}for(var k=0;k<g.length;k++){x=g[k],r.isPlainObject(e[x])||(e[x]={});var C=e[x],E=i.newContainer(t,x);E._id=E._name=x,E._traceIndices=_.map(function(e){return e._expandedIndex});var M=v.axisName2dataArray[x],A=b(C,E,T,_,M);f(C,E,T,{axData:_,dataAttr:M});var S,O,P=T("visible");switch(m(E,t,w),P&&(S=T("color"),O=S===C.color?S:o.font.color),E._m=1,x){case"radialaxis":var R=T("autorange",!E.isValidRange(C.range));C.autorange=R,!R||"linear"!==A&&"-"!==A||T("rangemode"),"reversed"===R&&(E._m=-1),T("range"),E.cleanRange("range",{dfltRange:[0,1]}),P&&(T("side"),T("angle",y[0]),T("title"),r.coerceFont(T,"titlefont",{family:o.font.family,size:Math.round(1.2*o.font.size),color:O}));break;case"angularaxis":if("date"===A){r.log("Polar plots do not support date angular axes yet.");for(var L=0;L<_.length;L++)_[L].visible=!1;A=C.type=E.type="linear"}T("linear"===A?"thetaunit":"period");var D=T("direction");T("rotation",{counterclockwise:0,clockwise:90}[D])}if(P){l(C,E,T,E.type),c(C,E,T,E.type,{tickSuffixDflt:"degrees"===E.thetaunit?"":void 0}),u(C,E,T,{outerTicks:!0});var I=T("showticklabels");I&&(r.coerceFont(T,"tickfont",{family:o.font.family,size:o.font.size,color:O}),T("tickangle"),T("tickformat")),d(C,E,T,{dfltColor:S,bgColor:o.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:h[x]}),T("layer")}"category"!==A&&T("hoverformat"),E._input=C}"category"===t.angularaxis.type&&n("gridshape")}function b(e,t,n,r,a){var i=n("type");if("-"===i){for(var o,s=0;s<r.length;s++)if(r[s].visible){o=r[s];break}o&&o[a]&&(t.type=p(o[a],"gregorian")),"-"===t.type?t.type="linear":e.type=t.type}return t.type}t.exports=function(e,t,n){o(e,t,n,{type:v.name,attributes:h,handleDefaults:y,font:t.font,paper_bgcolor:t.paper_bgcolor,fullData:n,layoutOut:t})}},{"../../components/color":570,"../../lib":696,"../../plot_api/plot_template":734,"../cartesian/axis_autotype":745,"../cartesian/category_order_defaults":748,"../cartesian/line_grid_defaults":759,"../cartesian/tick_label_defaults":764,"../cartesian/tick_mark_defaults":765,"../cartesian/tick_value_defaults":766,"../get_data":781,"../subplot_defaults":822,"./constants":809,"./layout_attributes":812,"./set_convert":821}],814:[function(e,t,n){"use strict";var r=e("../../../traces/scatter/attributes"),a=r.marker,i=e("../../../lib/extend").extendFlat;["Area traces are deprecated!","Please switch to the *barpolar* trace type."].join(" "),t.exports={r:i({},r.r,{}),t:i({},r.t,{}),marker:{color:i({},a.color,{}),size:i({},a.size,{}),symbol:i({},a.symbol,{}),opacity:i({},a.opacity,{}),editType:"calc"}}},{"../../../lib/extend":685,"../../../traces/scatter/attributes":1043}],815:[function(e,t,n){"use strict";var r=e("../../cartesian/layout_attributes"),a=e("../../../lib/extend").extendFlat,i=e("../../../plot_api/edit_types").overrideAll,o=["Legacy polar charts are deprecated!","Please switch to *polar* subplots."].join(" "),s=a({},r.domain,{});function l(e,t){var n={showline:{valType:"boolean"},showticklabels:{valType:"boolean"},tickorientation:{valType:"enumerated",values:["horizontal","vertical"]},ticklen:{valType:"number",min:0},tickcolor:{valType:"color"},ticksuffix:{valType:"string"},endpadding:{valType:"number",description:o},visible:{valType:"boolean"}};return a({},t,n)}t.exports=i({radialaxis:l(0,{range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},domain:s,orientation:{valType:"number"}}),angularaxis:l(0,{range:{valType:"info_array",items:[{valType:"number",dflt:0},{valType:"number",dflt:360}]},domain:s}),layout:{direction:{valType:"enumerated",values:["clockwise","counterclockwise"]},orientation:{valType:"angle"}}},"plot","nested")},{"../../../lib/extend":685,"../../../plot_api/edit_types":727,"../../cartesian/layout_attributes":757}],816:[function(e,t,n){"use strict";var r=t.exports=e("./micropolar");r.manager=e("./micropolar_manager")},{"./micropolar":817,"./micropolar_manager":818}],817:[function(e,t,n){var r=e("d3"),a=e("../../../lib"),i=a.extendDeepAll,o=e("../../../constants/alignment").MID_SHIFT,s=t.exports={version:"0.2.2"};s.Axis=function(){var e,t,n,a,l={data:[],layout:{}},u={},c={},f=r.dispatch("hover"),d={render:function(u){return function(u){t=u||t;var f=l.data,d=l.layout;("string"==typeof t||t.nodeName)&&(t=r.select(t)),t.datum(f).each(function(t,l){var u=t.slice();c={data:s.util.cloneJson(u),layout:s.util.cloneJson(d)};var f=0;u.forEach(function(e,t){e.color||(e.color=d.defaultColorRange[f],f=(f+1)%d.defaultColorRange.length),e.strokeColor||(e.strokeColor="LinePlot"===e.geometry?e.color:r.rgb(e.color).darker().toString()),c.data[t].color=e.color,c.data[t].strokeColor=e.strokeColor,c.data[t].strokeDash=e.strokeDash,c.data[t].strokeSize=e.strokeSize});var p=u.filter(function(e,t){var n=e.visible;return void 0===n||!0===n}),h=!1,m=p.map(function(e,t){return h=h||void 0!==e.groupId,e});if(h){var v=[],g=r.nest().key(function(e,t){return void 0!==e.groupId?e.groupId:"unstacked"}).entries(m).map(function(e,t){if("unstacked"===e.key)return e.values;var n=e.values[0].r.map(function(e,t){return 0});return e.values.forEach(function(e,t,r){e.yStack=[n],v.push(n),n=s.util.sumArrays(e.r,n)}),e.values});p=r.merge(g)}p.forEach(function(e,t){e.t=Array.isArray(e.t[0])?e.t:[e.t],e.r=Array.isArray(e.r[0])?e.r:[e.r]});var y=Math.min(d.width-d.margin.left-d.margin.right,d.height-d.margin.top-d.margin.bottom)/2;y=Math.max(10,y);var b,x=[d.margin.left+y,d.margin.top+y];b=h?[0,r.max(s.util.sumArrays(s.util.arrayLast(p).r[0],s.util.arrayLast(v)))]:r.extent(s.util.flattenArray(p.map(function(e,t){return e.r}))),d.radialAxis.domain!=s.DATAEXTENT&&(b[0]=0),n=r.scale.linear().domain(d.radialAxis.domain!=s.DATAEXTENT&&d.radialAxis.domain?d.radialAxis.domain:b).range([0,y]),c.layout.radialAxis.domain=n.domain();var _,w=s.util.flattenArray(p.map(function(e,t){return e.t})),T="string"==typeof w[0];T&&(w=s.util.deduplicate(w),_=w.slice(),w=r.range(w.length),p=p.map(function(e,t){var n=e;return e.t=[w],h&&(n.yStack=e.yStack),n}));var k=p.filter(function(e,t){return"LinePlot"===e.geometry||"DotPlot"===e.geometry}).length===p.length,C=null===d.needsEndSpacing?T||!k:d.needsEndSpacing,E=d.angularAxis.domain&&d.angularAxis.domain!=s.DATAEXTENT&&!T&&d.angularAxis.domain[0]>=0?d.angularAxis.domain:r.extent(w),M=Math.abs(w[1]-w[0]);k&&!T&&(M=0);var A=E.slice();C&&T&&(A[1]+=M);var S=d.angularAxis.ticksCount||4;S>8&&(S=S/(S/8)+S%8),d.angularAxis.ticksStep&&(S=(A[1]-A[0])/S);var O=d.angularAxis.ticksStep||(A[1]-A[0])/(S*(d.minorTicks+1));_&&(O=Math.max(Math.round(O),1)),A[2]||(A[2]=O);var P=r.range.apply(this,A);if(P=P.map(function(e,t){return parseFloat(e.toPrecision(12))}),a=r.scale.linear().domain(A.slice(0,2)).range("clockwise"===d.direction?[0,360]:[360,0]),c.layout.angularAxis.domain=a.domain(),c.layout.angularAxis.endPadding=C?M:0,void 0===(e=r.select(this).select("svg.chart-root"))||e.empty()){var R=(new DOMParser).parseFromString("<svg xmlns='http://www.w3.org/2000/svg' class='chart-root'>' + '<g class='outer-group'>' + '<g class='chart-group'>' + '<circle class='background-circle'></circle>' + '<g class='geometry-group'></g>' + '<g class='radial axis-group'>' + '<circle class='outside-circle'></circle>' + '</g>' + '<g class='angular axis-group'></g>' + '<g class='guides-group'><line></line><circle r='0'></circle></g>' + '</g>' + '<g class='legend-group'></g>' + '<g class='tooltips-group'></g>' + '<g class='title-group'><text></text></g>' + '</g>' + '</svg>","application/xml"),L=this.appendChild(this.ownerDocument.importNode(R.documentElement,!0));e=r.select(L)}e.select(".guides-group").style({"pointer-events":"none"}),e.select(".angular.axis-group").style({"pointer-events":"none"}),e.select(".radial.axis-group").style({"pointer-events":"none"});var D,I=e.select(".chart-group"),z={fill:"none",stroke:d.tickColor},j={"font-size":d.font.size,"font-family":d.font.family,fill:d.font.color,"text-shadow":["-1px 0px","1px -1px","-1px 1px","1px 1px"].map(function(e,t){return" "+e+" 0 "+d.font.outlineColor}).join(",")};if(d.showLegend){D=e.select(".legend-group").attr({transform:"translate("+[y,d.margin.top]+")"}).style({display:"block"});var N=p.map(function(e,t){var n=s.util.cloneJson(e);return n.symbol="DotPlot"===e.geometry?e.dotType||"circle":"LinePlot"!=e.geometry?"square":"line",n.visibleInLegend=void 0===e.visibleInLegend||e.visibleInLegend,n.color="LinePlot"===e.geometry?e.strokeColor:e.color,n});s.Legend().config({data:p.map(function(e,t){return e.name||"Element"+t}),legendConfig:i({},s.Legend.defaultConfig().legendConfig,{container:D,elements:N,reverseOrder:d.legend.reverseOrder})})();var F=D.node().getBBox();y=Math.min(d.width-F.width-d.margin.left-d.margin.right,d.height-d.margin.top-d.margin.bottom)/2,y=Math.max(10,y),x=[d.margin.left+y,d.margin.top+y],n.range([0,y]),c.layout.radialAxis.domain=n.domain(),D.attr("transform","translate("+[x[0]+y,x[1]-y]+")")}else D=e.select(".legend-group").style({display:"none"});e.attr({width:d.width,height:d.height}).style({opacity:d.opacity}),I.attr("transform","translate("+x+")").style({cursor:"crosshair"});var B=[(d.width-(d.margin.left+d.margin.right+2*y+(F?F.width:0)))/2,(d.height-(d.margin.top+d.margin.bottom+2*y))/2];if(B[0]=Math.max(0,B[0]),B[1]=Math.max(0,B[1]),e.select(".outer-group").attr("transform","translate("+B+")"),d.title){var V=e.select("g.title-group text").style(j).text(d.title),U=V.node().getBBox();V.attr({x:x[0]-U.width/2,y:x[1]-y-20})}var G=e.select(".radial.axis-group");if(d.radialAxis.gridLinesVisible){var H=G.selectAll("circle.grid-circle").data(n.ticks(5));H.enter().append("circle").attr({class:"grid-circle"}).style(z),H.attr("r",n),H.exit().remove()}G.select("circle.outside-circle").attr({r:y}).style(z);var W=e.select("circle.background-circle").attr({r:y}).style({fill:d.backgroundColor,stroke:d.stroke});function q(e,t){return a(e)%360+d.orientation}if(d.radialAxis.visible){var Y=r.svg.axis().scale(n).ticks(5).tickSize(5);G.call(Y).attr({transform:"rotate("+d.radialAxis.orientation+")"}),G.selectAll(".domain").style(z),G.selectAll("g>text").text(function(e,t){return this.textContent+d.radialAxis.ticksSuffix}).style(j).style({"text-anchor":"start"}).attr({x:0,y:0,dx:0,dy:0,transform:function(e,t){return"horizontal"===d.radialAxis.tickOrientation?"rotate("+-d.radialAxis.orientation+") translate("+[0,j["font-size"]]+")":"translate("+[0,j["font-size"]]+")"}}),G.selectAll("g>line").style({stroke:"black"})}var X=e.select(".angular.axis-group").selectAll("g.angular-tick").data(P),Z=X.enter().append("g").classed("angular-tick",!0);X.attr({transform:function(e,t){return"rotate("+q(e)+")"}}).style({display:d.angularAxis.visible?"block":"none"}),X.exit().remove(),Z.append("line").classed("grid-line",!0).classed("major",function(e,t){return t%(d.minorTicks+1)==0}).classed("minor",function(e,t){return!(t%(d.minorTicks+1)==0)}).style(z),Z.selectAll(".minor").style({stroke:d.minorTickColor}),X.select("line.grid-line").attr({x1:d.tickLength?y-d.tickLength:0,x2:y}).style({display:d.angularAxis.gridLinesVisible?"block":"none"}),Z.append("text").classed("axis-text",!0).style(j);var $=X.select("text.axis-text").attr({x:y+d.labelOffset,dy:o+"em",transform:function(e,t){var n=q(e),r=y+d.labelOffset,a=d.angularAxis.tickOrientation;return"horizontal"==a?"rotate("+-n+" "+r+" 0)":"radial"==a?n<270&&n>90?"rotate(180 "+r+" 0)":null:"rotate("+(n<=180&&n>0?-90:90)+" "+r+" 0)"}}).style({"text-anchor":"middle",display:d.angularAxis.labelsVisible?"block":"none"}).text(function(e,t){return t%(d.minorTicks+1)!=0?"":_?_[e]+d.angularAxis.ticksSuffix:e+d.angularAxis.ticksSuffix}).style(j);d.angularAxis.rewriteTicks&&$.text(function(e,t){return t%(d.minorTicks+1)!=0?"":d.angularAxis.rewriteTicks(this.textContent,t)});var K=r.max(I.selectAll(".angular-tick text")[0].map(function(e,t){return e.getCTM().e+e.getBBox().width}));D.attr({transform:"translate("+[y+K,d.margin.top]+")"});var J=e.select("g.geometry-group").selectAll("g").size()>0,Q=e.select("g.geometry-group").selectAll("g.geometry").data(p);if(Q.enter().append("g").attr({class:function(e,t){return"geometry geometry"+t}}),Q.exit().remove(),p[0]||J){var ee=[];p.forEach(function(e,t){var r={};r.radialScale=n,r.angularScale=a,r.container=Q.filter(function(e,n){return n==t}),r.geometry=e.geometry,r.orientation=d.orientation,r.direction=d.direction,r.index=t,ee.push({data:e,geometryConfig:r})});var te=[];r.nest().key(function(e,t){return void 0!==e.data.groupId||"unstacked"}).entries(ee).forEach(function(e,t){"unstacked"===e.key?te=te.concat(e.values.map(function(e,t){return[e]})):te.push(e.values)}),te.forEach(function(e,t){var n;n=Array.isArray(e)?e[0].geometryConfig.geometry:e.geometryConfig.geometry;var r=e.map(function(e,t){return i(s[n].defaultConfig(),e)});s[n]().config(r)()})}var ne,re,ae=e.select(".guides-group"),ie=e.select(".tooltips-group"),oe=s.tooltipPanel().config({container:ie,fontSize:8})(),se=s.tooltipPanel().config({container:ie,fontSize:8})(),le=s.tooltipPanel().config({container:ie,hasTick:!0})();if(!T){var ue=ae.select("line").attr({x1:0,y1:0,y2:0}).style({stroke:"grey","pointer-events":"none"});I.on("mousemove.angular-guide",function(e,t){var n=s.util.getMousePos(W).angle;ue.attr({x2:-y,transform:"rotate("+n+")"}).style({opacity:.5});var r=(n+180+360-d.orientation)%360;ne=a.invert(r);var i=s.util.convertToCartesian(y+12,n+180);oe.text(s.util.round(ne)).move([i[0]+x[0],i[1]+x[1]])}).on("mouseout.angular-guide",function(e,t){ae.select("line").style({opacity:0})})}var ce=ae.select("circle").style({stroke:"grey",fill:"none"});I.on("mousemove.radial-guide",function(e,t){var r=s.util.getMousePos(W).radius;ce.attr({r:r}).style({opacity:.5}),re=n.invert(s.util.getMousePos(W).radius);var a=s.util.convertToCartesian(r,d.radialAxis.orientation);se.text(s.util.round(re)).move([a[0]+x[0],a[1]+x[1]])}).on("mouseout.radial-guide",function(e,t){ce.style({opacity:0}),le.hide(),oe.hide(),se.hide()}),e.selectAll(".geometry-group .mark").on("mouseover.tooltip",function(t,n){var a=r.select(this),i=this.style.fill,o="black",l=this.style.opacity||1;if(a.attr({"data-opacity":l}),i&&"none"!==i){a.attr({"data-fill":i}),o=r.hsl(i).darker().toString(),a.style({fill:o,opacity:1});var u={t:s.util.round(t[0]),r:s.util.round(t[1])};T&&(u.t=_[t[0]]);var c="t: "+u.t+", r: "+u.r,f=this.getBoundingClientRect(),d=e.node().getBoundingClientRect(),p=[f.left+f.width/2-B[0]-d.left,f.top+f.height/2-B[1]-d.top];le.config({color:o}).text(c),le.move(p)}else i=this.style.stroke||"black",a.attr({"data-stroke":i}),o=r.hsl(i).darker().toString(),a.style({stroke:o,opacity:1})}).on("mousemove.tooltip",function(e,t){if(0!=r.event.which)return!1;r.select(this).attr("data-fill")&&le.show()}).on("mouseout.tooltip",function(e,t){le.hide();var n=r.select(this),a=n.attr("data-fill");a?n.style({fill:a,opacity:n.attr("data-opacity")}):n.style({stroke:n.attr("data-stroke"),opacity:n.attr("data-opacity")})})})}(u),this},config:function(e){if(!arguments.length)return l;var t=s.util.cloneJson(e);return t.data.forEach(function(e,t){l.data[t]||(l.data[t]={}),i(l.data[t],s.Axis.defaultConfig().data[0]),i(l.data[t],e)}),i(l.layout,s.Axis.defaultConfig().layout),i(l.layout,t.layout),this},getLiveConfig:function(){return c},getinputConfig:function(){return u},radialScale:function(e){return n},angularScale:function(e){return a},svg:function(){return e}};return r.rebind(d,f,"on"),d},s.Axis.defaultConfig=function(e,t){var n={data:[{t:[1,2,3,4],r:[10,11,12,13],name:"Line1",geometry:"LinePlot",color:null,strokeDash:"solid",strokeColor:null,strokeSize:"1",visibleInLegend:!0,opacity:1}],layout:{defaultColorRange:r.scale.category10().range(),title:null,height:450,width:500,margin:{top:40,right:40,bottom:40,left:40},font:{size:12,color:"gray",outlineColor:"white",family:"Tahoma, sans-serif"},direction:"clockwise",orientation:0,labelOffset:10,radialAxis:{domain:null,orientation:-45,ticksSuffix:"",visible:!0,gridLinesVisible:!0,tickOrientation:"horizontal",rewriteTicks:null},angularAxis:{domain:[0,360],ticksSuffix:"",visible:!0,gridLinesVisible:!0,labelsVisible:!0,tickOrientation:"horizontal",rewriteTicks:null,ticksCount:null,ticksStep:null},minorTicks:0,tickLength:null,tickColor:"silver",minorTickColor:"#eee",backgroundColor:"none",needsEndSpacing:null,showLegend:!0,legend:{reverseOrder:!1},opacity:1}};return n},s.util={},s.DATAEXTENT="dataExtent",s.AREA="AreaChart",s.LINE="LinePlot",s.DOT="DotPlot",s.BAR="BarChart",s.util._override=function(e,t){for(var n in e)n in t&&(t[n]=e[n])},s.util._extend=function(e,t){for(var n in e)t[n]=e[n]},s.util._rndSnd=function(){return 2*Math.random()-1+(2*Math.random()-1)+(2*Math.random()-1)},s.util.dataFromEquation2=function(e,t){var n=t||6,a=r.range(0,360+n,n).map(function(t,n){var r=t*Math.PI/180,a=e(r);return[t,a]});return a},s.util.dataFromEquation=function(e,t,n){var a=t||6,i=[],o=[];r.range(0,360+a,a).forEach(function(t,n){var r=t*Math.PI/180,a=e(r);i.push(t),o.push(a)});var s={t:i,r:o};return n&&(s.name=n),s},s.util.ensureArray=function(e,t){if(void 0===e)return null;var n=[].concat(e);return r.range(t).map(function(e,t){return n[t]||n[0]})},s.util.fillArrays=function(e,t,n){return t.forEach(function(t,r){e[t]=s.util.ensureArray(e[t],n)}),e},s.util.cloneJson=function(e){return JSON.parse(JSON.stringify(e))},s.util.validateKeys=function(e,t){"string"==typeof t&&(t=t.split("."));var n=t.shift();return e[n]&&(!t.length||objHasKeys(e[n],t))},s.util.sumArrays=function(e,t){return r.zip(e,t).map(function(e,t){return r.sum(e)})},s.util.arrayLast=function(e){return e[e.length-1]},s.util.arrayEqual=function(e,t){for(var n=Math.max(e.length,t.length,1);n-- >=0&&e[n]===t[n];);return-2===n},s.util.flattenArray=function(e){for(var t=[];!s.util.arrayEqual(t,e);)t=e,e=[].concat.apply([],e);return e},s.util.deduplicate=function(e){return e.filter(function(e,t,n){return n.indexOf(e)==t})},s.util.convertToCartesian=function(e,t){var n=t*Math.PI/180,r=e*Math.cos(n),a=e*Math.sin(n);return[r,a]},s.util.round=function(e,t){var n=t||2,r=Math.pow(10,n);return Math.round(e*r)/r},s.util.getMousePos=function(e){var t=r.mouse(e.node()),n=t[0],a=t[1],i={};return i.x=n,i.y=a,i.pos=t,i.angle=180*(Math.atan2(a,n)+Math.PI)/Math.PI,i.radius=Math.sqrt(n*n+a*a),i},s.util.duplicatesCount=function(e){for(var t,n={},r={},a=0,i=e.length;a<i;a++)(t=e[a])in n?(n[t]++,r[t]=n[t]):n[t]=1;return r},s.util.duplicates=function(e){return Object.keys(s.util.duplicatesCount(e))},s.util.translator=function(e,t,n,r){if(r){var a=n.slice();n=t,t=a}var i=t.reduce(function(e,t){if(void 0!==e)return e[t]},e);void 0!==i&&(t.reduce(function(e,n,r){if(void 0!==e)return r===t.length-1&&delete e[n],e[n]},e),n.reduce(function(e,t,r){return void 0===e[t]&&(e[t]={}),r===n.length-1&&(e[t]=i),e[t]},e))},s.PolyChart=function(){var e=[s.PolyChart.defaultConfig()],t=r.dispatch("hover"),n={solid:"none",dash:[5,2],dot:[2,5]};function a(){var t=e[0].geometryConfig,a=t.container;"string"==typeof a&&(a=r.select(a)),a.datum(e).each(function(e,a){var i=!!e[0].data.yStack,o=e.map(function(e,t){return i?r.zip(e.data.t[0],e.data.r[0],e.data.yStack[0]):r.zip(e.data.t[0],e.data.r[0])}),s=t.angularScale,l=t.radialScale.domain()[0],u={bar:function(n,a,i){var o=e[i].data,l=t.radialScale(n[1])-t.radialScale(0),u=t.radialScale(n[2]||0),c=o.barWidth;r.select(this).attr({class:"mark bar",d:"M"+[[l+u,-c/2],[l+u,c/2],[u,c/2],[u,-c/2]].join("L")+"Z",transform:function(e,n){return"rotate("+(t.orientation+s(e[0]))+")"}})},dot:function(n,a,i){var o=n[2]?[n[0],n[1]+n[2]]:n,s=r.svg.symbol().size(e[i].data.dotSize).type(e[i].data.dotType)(n,a);r.select(this).attr({class:"mark dot",d:s,transform:function(e,n){var r=function(e){var t=e.r*Math.cos(e.t),n=e.r*Math.sin(e.t);return{x:t,y:n}}(function(e,n){var r=t.radialScale(e[1]),a=(t.angularScale(e[0])+t.orientation)*Math.PI/180;return{r:r,t:a}}(o));return"translate("+[r.x,r.y]+")"}})}},c=r.svg.line.radial().interpolate(e[0].data.lineInterpolation).radius(function(e){return t.radialScale(e[1])}).angle(function(e){return t.angularScale(e[0])*Math.PI/180});u.line=function(n,a,i){var s=n[2]?o[i].map(function(e,t){return[e[0],e[1]+e[2]]}):o[i];if(r.select(this).each(u.dot).style({opacity:function(t,n){return+e[i].data.dotVisible},fill:h.stroke(n,a,i)}).attr({class:"mark dot"}),!(a>0)){var l=r.select(this.parentNode).selectAll("path.line").data([0]);l.enter().insert("path"),l.attr({class:"line",d:c(s),transform:function(e,n){return"rotate("+(t.orientation+90)+")"},"pointer-events":"none"}).style({fill:function(e,t){return h.fill(n,a,i)},"fill-opacity":0,stroke:function(e,t){return h.stroke(n,a,i)},"stroke-width":function(e,t){return h["stroke-width"](n,a,i)},"stroke-dasharray":function(e,t){return h["stroke-dasharray"](n,a,i)},opacity:function(e,t){return h.opacity(n,a,i)},display:function(e,t){return h.display(n,a,i)}})}};var f=t.angularScale.range(),d=Math.abs(f[1]-f[0])/o[0].length*Math.PI/180,p=r.svg.arc().startAngle(function(e){return-d/2}).endAngle(function(e){return d/2}).innerRadius(function(e){return t.radialScale(l+(e[2]||0))}).outerRadius(function(e){return t.radialScale(l+(e[2]||0))+t.radialScale(e[1])});u.arc=function(e,n,a){r.select(this).attr({class:"mark arc",d:p,transform:function(e,n){return"rotate("+(t.orientation+s(e[0])+90)+")"}})};var h={fill:function(t,n,r){return e[r].data.color},stroke:function(t,n,r){return e[r].data.strokeColor},"stroke-width":function(t,n,r){return e[r].data.strokeSize+"px"},"stroke-dasharray":function(t,r,a){return n[e[a].data.strokeDash]},opacity:function(t,n,r){return e[r].data.opacity},display:function(t,n,r){return void 0===e[r].data.visible||e[r].data.visible?"block":"none"}},m=r.select(this).selectAll("g.layer").data(o);m.enter().append("g").attr({class:"layer"});var v=m.selectAll("path.mark").data(function(e,t){return e});v.enter().append("path").attr({class:"mark"}),v.style(h).each(u[t.geometryType]),v.exit().remove(),m.exit().remove()})}return a.config=function(t){return arguments.length?(t.forEach(function(t,n){e[n]||(e[n]={}),i(e[n],s.PolyChart.defaultConfig()),i(e[n],t)}),this):e},a.getColorScale=function(){},r.rebind(a,t,"on"),a},s.PolyChart.defaultConfig=function(){var e={data:{name:"geom1",t:[[1,2,3,4]],r:[[1,2,3,4]],dotType:"circle",dotSize:64,dotVisible:!1,barWidth:20,color:"#ffa500",strokeSize:1,strokeColor:"silver",strokeDash:"solid",opacity:1,index:0,visible:!0,visibleInLegend:!0},geometryConfig:{geometry:"LinePlot",geometryType:"arc",direction:"clockwise",orientation:0,container:"body",radialScale:null,angularScale:null,colorScale:r.scale.category20()}};return e},s.BarChart=function(){return s.PolyChart()},s.BarChart.defaultConfig=function(){return{geometryConfig:{geometryType:"bar"}}},s.AreaChart=function(){return s.PolyChart()},s.AreaChart.defaultConfig=function(){return{geometryConfig:{geometryType:"arc"}}},s.DotPlot=function(){return s.PolyChart()},s.DotPlot.defaultConfig=function(){return{geometryConfig:{geometryType:"dot",dotType:"circle"}}},s.LinePlot=function(){return s.PolyChart()},s.LinePlot.defaultConfig=function(){return{geometryConfig:{geometryType:"line"}}},s.Legend=function(){var e=s.Legend.defaultConfig(),t=r.dispatch("hover");function n(){var t=e.legendConfig,a=e.data.map(function(e,n){return[].concat(e).map(function(e,r){var a=i({},t.elements[n]);return a.name=e,a.color=[].concat(t.elements[n].color)[r],a})}),o=r.merge(a);o=o.filter(function(e,n){return t.elements[n]&&(t.elements[n].visibleInLegend||void 0===t.elements[n].visibleInLegend)}),t.reverseOrder&&(o=o.reverse());var s=t.container;("string"==typeof s||s.nodeName)&&(s=r.select(s));var l=o.map(function(e,t){return e.color}),u=t.fontSize,c=null==t.isContinuous?"number"==typeof o[0]:t.isContinuous,f=c?t.height:u*o.length,d=s.classed("legend-group",!0),p=d.selectAll("svg").data([0]),h=p.enter().append("svg").attr({width:300,height:f+u,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"});h.append("g").classed("legend-axis",!0),h.append("g").classed("legend-marks",!0);var m=r.range(o.length),v=r.scale[c?"linear":"ordinal"]().domain(m).range(l),g=r.scale[c?"linear":"ordinal"]().domain(m)[c?"range":"rangePoints"]([0,f]);if(c){var y=p.select(".legend-marks").append("defs").append("linearGradient").attr({id:"grad1",x1:"0%",y1:"0%",x2:"0%",y2:"100%"}).selectAll("stop").data(l);y.enter().append("stop"),y.attr({offset:function(e,t){return t/(l.length-1)*100+"%"}}).style({"stop-color":function(e,t){return e}}),p.append("rect").classed("legend-mark",!0).attr({height:t.height,width:t.colorBandWidth,fill:"url(#grad1)"})}else{var b=p.select(".legend-marks").selectAll("path.legend-mark").data(o);b.enter().append("path").classed("legend-mark",!0),b.attr({transform:function(e,t){return"translate("+[u/2,g(t)+u/2]+")"},d:function(e,t){var n=e.symbol;return function(e,t){var n=3*t;return"line"===e?"M"+[[-t/2,-t/12],[t/2,-t/12],[t/2,t/12],[-t/2,t/12]]+"Z":-1!=r.svg.symbolTypes.indexOf(e)?r.svg.symbol().type(e).size(n)():r.svg.symbol().type("square").size(n)()}(n,u)},fill:function(e,t){return v(t)}}),b.exit().remove()}var x=r.svg.axis().scale(g).orient("right"),_=p.select("g.legend-axis").attr({transform:"translate("+[c?t.colorBandWidth:u,u/2]+")"}).call(x);return _.selectAll(".domain").style({fill:"none",stroke:"none"}),_.selectAll("line").style({fill:"none",stroke:c?t.textColor:"none"}),_.selectAll("text").style({fill:t.textColor,"font-size":t.fontSize}).text(function(e,t){return o[t].name}),n}return n.config=function(t){return arguments.length?(i(e,t),this):e},r.rebind(n,t,"on"),n},s.Legend.defaultConfig=function(e,t){return{data:["a","b","c"],legendConfig:{elements:[{symbol:"line",color:"red"},{symbol:"square",color:"yellow"},{symbol:"diamond",color:"limegreen"}],height:150,colorBandWidth:30,fontSize:12,container:"body",isContinuous:null,textColor:"grey",reverseOrder:!1}}},s.tooltipPanel=function(){var e,t,n,a={container:null,hasTick:!1,fontSize:12,color:"white",padding:5},o="tooltip-"+s.tooltipPanel.uid++,l=10,u=function(){var r=(e=a.container.selectAll("g."+o).data([0])).enter().append("g").classed(o,!0).style({"pointer-events":"none",display:"none"});return n=r.append("path").style({fill:"white","fill-opacity":.9}).attr({d:"M0 0"}),t=r.append("text").attr({dx:a.padding+l,dy:.3*+a.fontSize}),u};return u.text=function(i){var o=r.hsl(a.color).l,s=o>=.5?"#aaa":"white",c=o>=.5?"black":"white",f=i||"";t.style({fill:c,"font-size":a.fontSize+"px"}).text(f);var d=a.padding,p=t.node().getBBox(),h={fill:a.color,stroke:s,"stroke-width":"2px"},m=p.width+2*d+l,v=p.height+2*d;return n.attr({d:"M"+[[l,-v/2],[l,-v/4],[a.hasTick?0:l,0],[l,v/4],[l,v/2],[m,v/2],[m,-v/2]].join("L")+"Z"}).style(h),e.attr({transform:"translate("+[l,-v/2+2*d]+")"}),e.style({display:"block"}),u},u.move=function(t){if(e)return e.attr({transform:"translate("+[t[0],t[1]]+")"}).style({display:"block"}),u},u.hide=function(){if(e)return e.style({display:"none"}),u},u.show=function(){if(e)return e.style({display:"block"}),u},u.config=function(e){return i(a,e),u},u},s.tooltipPanel.uid=1,s.adapter={},s.adapter.plotly=function(){var e={convert:function(e,t){var n={};if(e.data&&(n.data=e.data.map(function(e,n){var r=i({},e),a=[[r,["marker","color"],["color"]],[r,["marker","opacity"],["opacity"]],[r,["marker","line","color"],["strokeColor"]],[r,["marker","line","dash"],["strokeDash"]],[r,["marker","line","width"],["strokeSize"]],[r,["marker","symbol"],["dotType"]],[r,["marker","size"],["dotSize"]],[r,["marker","barWidth"],["barWidth"]],[r,["line","interpolation"],["lineInterpolation"]],[r,["showlegend"],["visibleInLegend"]]];return a.forEach(function(e,n){s.util.translator.apply(null,e.concat(t))}),t||delete r.marker,t&&delete r.groupId,t?("LinePlot"===r.geometry?(r.type="scatter",!0===r.dotVisible?(delete r.dotVisible,r.mode="lines+markers"):r.mode="lines"):"DotPlot"===r.geometry?(r.type="scatter",r.mode="markers"):"AreaChart"===r.geometry?r.type="area":"BarChart"===r.geometry&&(r.type="bar"),delete r.geometry):("scatter"===r.type?"lines"===r.mode?r.geometry="LinePlot":"markers"===r.mode?r.geometry="DotPlot":"lines+markers"===r.mode&&(r.geometry="LinePlot",r.dotVisible=!0):"area"===r.type?r.geometry="AreaChart":"bar"===r.type&&(r.geometry="BarChart"),delete r.mode,delete r.type),r}),!t&&e.layout&&"stack"===e.layout.barmode)){var a=s.util.duplicates(n.data.map(function(e,t){return e.geometry}));n.data.forEach(function(e,t){var r=a.indexOf(e.geometry);-1!=r&&(n.data[t].groupId=r)})}if(e.layout){var o=i({},e.layout),l=[[o,["plot_bgcolor"],["backgroundColor"]],[o,["showlegend"],["showLegend"]],[o,["radialaxis"],["radialAxis"]],[o,["angularaxis"],["angularAxis"]],[o.angularaxis,["showline"],["gridLinesVisible"]],[o.angularaxis,["showticklabels"],["labelsVisible"]],[o.angularaxis,["nticks"],["ticksCount"]],[o.angularaxis,["tickorientation"],["tickOrientation"]],[o.angularaxis,["ticksuffix"],["ticksSuffix"]],[o.angularaxis,["range"],["domain"]],[o.angularaxis,["endpadding"],["endPadding"]],[o.radialaxis,["showline"],["gridLinesVisible"]],[o.radialaxis,["tickorientation"],["tickOrientation"]],[o.radialaxis,["ticksuffix"],["ticksSuffix"]],[o.radialaxis,["range"],["domain"]],[o.angularAxis,["showline"],["gridLinesVisible"]],[o.angularAxis,["showticklabels"],["labelsVisible"]],[o.angularAxis,["nticks"],["ticksCount"]],[o.angularAxis,["tickorientation"],["tickOrientation"]],[o.angularAxis,["ticksuffix"],["ticksSuffix"]],[o.angularAxis,["range"],["domain"]],[o.angularAxis,["endpadding"],["endPadding"]],[o.radialAxis,["showline"],["gridLinesVisible"]],[o.radialAxis,["tickorientation"],["tickOrientation"]],[o.radialAxis,["ticksuffix"],["ticksSuffix"]],[o.radialAxis,["range"],["domain"]],[o.font,["outlinecolor"],["outlineColor"]],[o.legend,["traceorder"],["reverseOrder"]],[o,["labeloffset"],["labelOffset"]],[o,["defaultcolorrange"],["defaultColorRange"]]];if(l.forEach(function(e,n){s.util.translator.apply(null,e.concat(t))}),t?(void 0!==o.tickLength&&(o.angularaxis.ticklen=o.tickLength,delete o.tickLength),o.tickColor&&(o.angularaxis.tickcolor=o.tickColor,delete o.tickColor)):(o.angularAxis&&void 0!==o.angularAxis.ticklen&&(o.tickLength=o.angularAxis.ticklen),o.angularAxis&&void 0!==o.angularAxis.tickcolor&&(o.tickColor=o.angularAxis.tickcolor)),o.legend&&"boolean"!=typeof o.legend.reverseOrder&&(o.legend.reverseOrder="normal"!=o.legend.reverseOrder),o.legend&&"boolean"==typeof o.legend.traceorder&&(o.legend.traceorder=o.legend.traceorder?"reversed":"normal",delete o.legend.reverseOrder),o.margin&&void 0!==o.margin.t){var u=["t","r","b","l","pad"],c=["top","right","bottom","left","pad"],f={};r.entries(o.margin).forEach(function(e,t){f[c[u.indexOf(e.key)]]=e.value}),o.margin=f}t&&(delete o.needsEndSpacing,delete o.minorTickColor,delete o.minorTicks,delete o.angularaxis.ticksCount,delete o.angularaxis.ticksCount,delete o.angularaxis.ticksStep,delete o.angularaxis.rewriteTicks,delete o.angularaxis.nticks,delete o.radialaxis.ticksCount,delete o.radialaxis.ticksCount,delete o.radialaxis.ticksStep,delete o.radialaxis.rewriteTicks,delete o.radialaxis.nticks),n.layout=o}return n}};return e}},{"../../../constants/alignment":668,"../../../lib":696,d3:148}],818:[function(e,t,n){"use strict";var r=e("d3"),a=e("../../../lib"),i=e("../../../components/color"),o=e("./micropolar"),s=e("./undo_manager"),l=a.extendDeepAll,u=t.exports={};u.framework=function(e){var t,n,a,i,c,f=new s;function d(n,s){return s&&(c=s),r.select(r.select(c).node().parentNode).selectAll(".svg-container>*:not(.chart-root)").remove(),t=t?l(t,n):n,a||(a=o.Axis()),i=o.adapter.plotly().convert(t),a.config(i).render(c),e.data=t.data,e.layout=t.layout,u.fillLayout(e),t}return d.isPolar=!0,d.svg=function(){return a.svg()},d.getConfig=function(){return t},d.getLiveConfig=function(){return o.adapter.plotly().convert(a.getLiveConfig(),!0)},d.getLiveScales=function(){return{t:a.angularScale(),r:a.radialScale()}},d.setUndoPoint=function(){var e=this,r=o.util.cloneJson(t);!function(t,n){f.add({undo:function(){n&&e(n)},redo:function(){e(t)}})}(r,n),n=o.util.cloneJson(r)},d.undo=function(){f.undo()},d.redo=function(){f.redo()},d},u.fillLayout=function(e){var t=r.select(e).selectAll(".plot-container"),n=t.selectAll(".svg-container"),a=e.framework&&e.framework.svg&&e.framework.svg(),o={width:800,height:600,paper_bgcolor:i.background,_container:t,_paperdiv:n,_paper:a};e._fullLayout=l(o,e.layout)}},{"../../../components/color":570,"../../../lib":696,"./micropolar":817,"./undo_manager":819,d3:148}],819:[function(e,t,n){"use strict";t.exports=function(){var e,t=[],n=-1,r=!1;function a(e,t){return e?(r=!0,e[t](),r=!1,this):this}return{add:function(e){return r?this:(t.splice(n+1,t.length-n),t.push(e),n=t.length-1,this)},setCallback:function(t){e=t},undo:function(){var r=t[n];return r?(a(r,"undo"),n-=1,e&&e(r.undo),this):this},redo:function(){var r=t[n+1];return r?(a(r,"redo"),n+=1,e&&e(r.redo),this):this},clear:function(){t=[],n=-1},hasUndo:function(){return-1!==n},hasRedo:function(){return n<t.length-1},getCommands:function(){return t},getPreviousCommand:function(){return t[n-1]},getIndex:function(){return n}}}},{}],820:[function(e,t,n){"use strict";var r=e("d3"),a=e("tinycolor2"),i=e("../../registry"),o=e("../../lib"),s=e("../../components/color"),l=e("../../components/drawing"),u=e("../plots"),c=e("../cartesian/set_convert"),f=e("./set_convert"),d=e("../cartesian/autorange").doAutoRange,p=e("../cartesian/axes").doTicksSingle,h=e("../cartesian/dragbox"),m=e("../../components/dragelement"),v=e("../../components/fx"),g=e("../../components/titles"),y=e("../cartesian/select").prepSelect,b=e("../cartesian/select").selectOnClick,x=e("../cartesian/select").clearSelect,_=e("../../lib/setcursor"),w=e("../../lib/clear_gl_canvases"),T=e("../../plot_api/subroutines").redrawReglTraces,k=e("../../constants/alignment").MID_SHIFT,C=e("./constants"),E=e("./helpers"),M=o._,A=o.mod,S=o.deg2rad,O=o.rad2deg;function P(e,t){this.id=t,this.gd=e,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var n=e._fullLayout,r="clip"+n._uid+t;this.clipIds.forTraces=r+"-for-traces",this.clipPaths.forTraces=n._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=n._polarlayer.append("g").attr("class",t),this.radialTickLayout=null,this.angularTickLayout=null}var R=P.prototype;function L(e){var t=e.ticks+String(e.ticklen)+String(e.showticklabels);return"side"in e&&(t+=e.side),t}function D(e,t){var n=o.findIndexOfMin(t,function(t){return o.angleDist(e,t)});return t[n]}function I(e,t,n){return t?(e.attr("display",null),e.attr(n)):e&&e.attr("display","none"),e}function z(e,t){return"translate("+e+","+t+")"}function j(e){return"rotate("+e+")"}function N(e){return Math.abs(e)<1e-10?0:e>0?1:-1}function F(e){return N(Math.cos(e))}function B(e){return N(Math.sin(e))}t.exports=function(e,t){return new P(e,t)},R.plot=function(e,t){var n=t[this.id];this._hasClipOnAxisFalse=!1;for(var r=0;r<e.length;r++){var a=e[r][0].trace;if(!1===a.cliponaxis){this._hasClipOnAxisFalse=!0;break}}this.updateLayers(t,n),this.updateLayout(t,n),u.generalUpdatePerTraceModule(this.gd,this,e,n),this.updateFx(t,n)},R.updateLayers=function(e,t){var n=this.layers,a=t.radialaxis,i=t.angularaxis,o=C.layerNames,s=o.indexOf("frontplot"),l=o.slice(0,s),u="below traces"===i.layer,c="below traces"===a.layer;u&&l.push("angular-line"),c&&l.push("radial-line"),u&&l.push("angular-axis"),c&&l.push("radial-axis"),l.push("frontplot"),u||l.push("angular-line"),c||l.push("radial-line"),u||l.push("angular-axis"),c||l.push("radial-axis");var f=this.framework.selectAll(".polarsublayer").data(l,String);f.enter().append("g").attr("class",function(e){return"polarsublayer "+e}).each(function(e){var t=n[e]=r.select(this);switch(e){case"frontplot":t.append("g").classed("barlayer",!0),t.append("g").classed("scatterlayer",!0);break;case"backplot":t.append("g").classed("maplayer",!0);break;case"plotbg":n.bg=t.append("path");break;case"radial-grid":t.style("fill","none"),t.append("g").classed("x",1);break;case"angular-grid":t.style("fill","none"),t.append("g").classed("angularaxis",1);break;case"radial-line":t.append("line").style("fill","none");break;case"angular-line":t.append("path").style("fill","none")}}),f.order()},R.updateLayout=function(e,t){var n=this.layers,r=e._size,a=t.radialaxis,i=t.angularaxis,o=t.domain.x,u=t.domain.y;this.xOffset=r.l+r.w*o[0],this.yOffset=r.t+r.h*(1-u[1]);var c=this.xLength=r.w*(o[1]-o[0]),f=this.yLength=r.h*(u[1]-u[0]),d=t.sector;this.sectorInRad=d.map(S);var p,h,m,v,g,y=this.sectorBBox=function(e){var t,n,r,a,i=e[0],o=e[1]-i,s=A(i,360),l=s+o,u=Math.cos(S(s)),c=Math.sin(S(s)),f=Math.cos(S(l)),d=Math.sin(S(l));return a=s<=90&&l>=90||s>90&&l>=450?1:c<=0&&d<=0?0:Math.max(c,d),t=s<=180&&l>=180||s>180&&l>=540?-1:u>=0&&f>=0?0:Math.min(u,f),n=s<=270&&l>=270||s>270&&l>=630?-1:c>=0&&d>=0?0:Math.min(c,d),r=l>=360?1:u<=0&&f<=0?0:Math.max(u,f),[t,n,r,a]}(d),b=y[2]-y[0],x=y[3]-y[1],_=f/c,w=Math.abs(x/b);_>w?(p=c,g=(f-(h=c*w))/r.h/2,m=[o[0],o[1]],v=[u[0]+g,u[1]-g]):(h=f,g=(c-(p=f/w))/r.w/2,m=[o[0]+g,o[1]-g],v=[u[0],u[1]]),this.xLength2=p,this.yLength2=h,this.xDomain2=m,this.yDomain2=v;var T=this.xOffset2=r.l+r.w*m[0],k=this.yOffset2=r.t+r.h*(1-v[1]),C=this.radius=p/b,E=this.innerRadius=t.hole*C,M=this.cx=T-C*y[0],O=this.cy=k+C*y[3],P=this.cxx=M-T,R=this.cyy=O-k;this.radialAxis=this.mockAxis(e,t,a,{_axislayer:n["radial-axis"],_gridlayer:n["radial-grid"],_id:"x",side:{counterclockwise:"top",clockwise:"bottom"}[a.side],domain:[E/r.w,C/r.w]}),this.angularAxis=this.mockAxis(e,t,i,{_axislayer:n["angular-axis"],_gridlayer:n["angular-grid"],side:"right",domain:[0,Math.PI],autorange:!1}),this.doAutoRange(e,t),this.updateAngularAxis(e,t),this.updateRadialAxis(e,t),this.updateRadialAxisTitle(e,t),this.xaxis=this.mockCartesianAxis(e,t,{_id:"x",domain:m}),this.yaxis=this.mockCartesianAxis(e,t,{_id:"y",domain:v});var L=this.pathSubplot();this.clipPaths.forTraces.select("path").attr("d",L).attr("transform",z(P,R)),n.frontplot.attr("transform",z(T,k)).call(l.setClipUrl,this._hasClipOnAxisFalse?null:this.clipIds.forTraces),n.bg.attr("d",L).attr("transform",z(M,O)).call(s.fill,t.bgcolor),this.framework.selectAll(".crisp").classed("crisp",0)},R.mockAxis=function(e,t,n,r){var a=o.extendFlat({anchor:"free",position:0,_pos:0,_counteraxis:!0,automargin:!1},n,r);return f(a,t,e),a},R.mockCartesianAxis=function(e,t,n){var r=this,a=n._id,i=o.extendFlat({type:"linear"},n);c(i,e);var s={x:[0,2],y:[1,3]};return i.setRange=function(){var e=r.sectorBBox,n=s[a],o=r.radialAxis._rl,l=(o[1]-o[0])/(1-t.hole);i.range=[e[n[0]]*l,e[n[1]]*l]},i.isPtWithinRange="x"===a?function(e){return r.isPtInside(e)}:function(){return!0},i.setRange(),i.setScale(),i},R.doAutoRange=function(e,t){var n=this.gd,r=this.radialAxis,a=t.radialaxis;r.setScale(),d(n,r);var i=r.range;a.range=i.slice(),a._input.range=i.slice(),r._rl=[r.r2l(i[0],null,"gregorian"),r.r2l(i[1],null,"gregorian")]},R.updateRadialAxis=function(e,t){var n=this,r=n.gd,a=n.layers,i=n.radius,o=n.innerRadius,l=n.cx,u=n.cy,c=t.radialaxis,f=A(t.sector[0],360),d=n.radialAxis,h=o<i;n.fillViewInitialKey("radialaxis.angle",c.angle),n.fillViewInitialKey("radialaxis.range",d.range.slice()),d.setGeometry(),"auto"===d.tickangle&&f>90&&f<=270&&(d.tickangle=180),d._transfn=function(e){return"translate("+(d.l2p(e.x)+o)+",0)"},d._gridpath=function(e){return n.pathArc(d.r2p(e.x)+o)};var m=L(c);n.radialTickLayout!==m&&(a["radial-axis"].selectAll(".xtick").remove(),n.radialTickLayout=m),h&&(d.setScale(),p(r,d,!0));var v=n.radialAxisAngle=n.vangles?O(D(S(c.angle),n.vangles)):c.angle,g=z(l,u)+j(-v);I(a["radial-axis"],h&&(c.showticklabels||c.ticks),{transform:g}),I(a["radial-grid"],h&&c.showgrid,{transform:z(l,u)}).selectAll("path").attr("transform",null),I(a["radial-line"].select("line"),h&&c.showline,{x1:o,y1:0,x2:i,y2:0,transform:g}).attr("stroke-width",c.linewidth).call(s.stroke,c.linecolor)},R.updateRadialAxisTitle=function(e,t,n){var r=this.gd,a=this.radius,i=this.cx,o=this.cy,s=t.radialaxis,u=this.id+"title",c=void 0!==n?n:this.radialAxisAngle,f=S(c),d=Math.cos(f),p=Math.sin(f),h=0;if(s.title){var m=l.bBox(this.layers["radial-axis"].node()).height,v=s.titlefont.size;h="counterclockwise"===s.side?-m-.4*v:m+.8*v}this.layers["radial-axis-title"]=g.draw(r,u,{propContainer:s,propName:this.id+".radialaxis.title",placeholder:M(r,"Click to enter radial axis title"),attributes:{x:i+a/2*d+h*p,y:o-a/2*p+h*d,"text-anchor":"middle"},transform:{rotate:-c}})},R.updateAngularAxis=function(e,t){var n=this,a=n.gd,i=n.layers,l=n.radius,u=n.innerRadius,c=n.cx,f=n.cy,d=t.angularaxis,h=n.angularAxis;n.fillViewInitialKey("angularaxis.rotation",d.rotation),h.setGeometry();var m=function(e){return h.t2g(e.x)};"linear"===h.type&&"radians"===h.thetaunit&&(h.tick0=O(h.tick0),h.dtick=O(h.dtick)),"category"===h.type&&(h._tickFilter=function(e){return o.isAngleInsideSector(m(e),n.sectorInRad)}),h._transfn=function(e){var t=r.select(this),n=t&&t.node();if(n&&t.classed("angularaxisgrid"))return"";var a=m(e),i=z(c+l*Math.cos(a),f-l*Math.sin(a));return n&&t.classed("ticks")&&(i+=j(-O(a))),i},h._gridpath=function(e){var t=m(e),n=Math.cos(t),r=Math.sin(t);return"M"+[c+u*n,f-u*r]+"L"+[c+l*n,f-l*r]};var v="outside"!==d.ticks?.7:.5;h._labelx=function(e){var t=m(e),n=h._labelStandoff,r=h._pad,a=0===B(t)?0:Math.cos(t)*(n+r+v*e.fontSize),i=F(t)*(e.dx+n+r);return a+i},h._labely=function(e){var t=m(e),n=h._labelStandoff,r=h._labelShift,a=h._pad,i=e.dy+e.fontSize*k-r,o=-Math.sin(t)*(n+a+v*e.fontSize);return i+o},h._labelanchor=function(e,t){var n=m(t);return 0===B(n)?F(n)>0?"start":"end":"middle"};var g,y=L(d);n.angularTickLayout!==y&&(i["angular-axis"].selectAll("."+h._id+"tick").remove(),n.angularTickLayout=y),h.setScale(),p(a,h,!0),"linear"===t.gridshape?(g=h._vals.map(m),o.angleDelta(g[0],g[1])<0&&(g=g.slice().reverse())):g=null,n.vangles=g,I(i["angular-line"].select("path"),d.showline,{d:n.pathSubplot(),transform:z(c,f)}).attr("stroke-width",d.linewidth).call(s.stroke,d.linecolor)},R.updateFx=function(e,t){this.gd._context.staticPlot||(this.updateAngularDrag(e),this.updateRadialDrag(e,t,0),this.updateRadialDrag(e,t,1),this.updateMainDrag(e))},R.updateMainDrag=function(e){var t=this,n=t.gd,o=t.layers,s=e._zoomlayer,l=C.MINZOOM,u=C.OFFEDGE,c=t.radius,f=t.innerRadius,d=t.cx,p=t.cy,g=t.cxx,_=t.cyy,w=t.sectorInRad,T=t.vangles,k=t.radialAxis,M=E.clampTiny,A=E.findXYatLength,S=E.findEnclosingVertexAngles,O=C.cornerHalfWidth,P=C.cornerLen/2,R=h.makeDragger(o,"path","maindrag","crosshair");r.select(R).attr("d",t.pathSubplot()).attr("transform",z(d,p));var L,D,I,j,N,F,B,V,U,G={element:R,gd:n,subplot:t.id,plotinfo:{id:t.id,xaxis:t.xaxis,yaxis:t.yaxis},xaxes:[t.xaxis],yaxes:[t.yaxis]};function H(e,t){return Math.sqrt(e*e+t*t)}function W(e,t){return H(e-g,t-_)}function q(e,t){return Math.atan2(_-t,e-g)}function Y(e,t){return[e*Math.cos(t),e*Math.sin(-t)]}function X(e,n){if(0===e)return t.pathSector(2*O);var r=P/e,a=n-r,i=n+r,o=Math.max(0,Math.min(e,c)),s=o-O,l=o+O;return"M"+Y(s,a)+"A"+[s,s]+" 0,0,0 "+Y(s,i)+"L"+Y(l,i)+"A"+[l,l]+" 0,0,1 "+Y(l,a)+"Z"}function Z(e,n,r){if(0===e)return t.pathSector(2*O);var a,i,o=Y(e,n),s=Y(e,r),l=M((o[0]+s[0])/2),u=M((o[1]+s[1])/2);if(l&&u){var c=u/l,f=-1/c,d=A(O,c,l,u);a=A(P,f,d[0][0],d[0][1]),i=A(P,f,d[1][0],d[1][1])}else{var p,h;u?(p=P,h=O):(p=O,h=P),a=[[l-p,u-h],[l+p,u-h]],i=[[l-p,u+h],[l+p,u+h]]}return"M"+a.join("L")+"L"+i.reverse().join("L")+"Z"}function $(e,t){return t=Math.max(Math.min(t,c),f),e<u?e=0:c-e<u?e=c:t<u?t=0:c-t<u&&(t=c),Math.abs(t-e)>l?(e<t?(I=e,j=t):(I=t,j=e),!0):(I=null,j=null,!1)}function K(e,t){e=e||N,t=t||"M0,0Z",V.attr("d",e),U.attr("d",t),h.transitionZoombox(V,U,F,B),F=!0}function J(e,n){var r,a,i=L+e,o=D+n,s=W(L,D),l=Math.min(W(i,o),c),u=q(L,D);$(s,l)&&(r=N+t.pathSector(j),I&&(r+=t.pathSector(I)),a=X(I,u)+X(j,u)),K(r,a)}function Q(e,t,n,r){var a=E.findIntersectionXY(n,r,n,[e-g,_-t]);return H(a[0],a[1])}function ee(e,n){var r,a,i=L+e,o=D+n,s=q(L,D),l=q(i,o),u=S(s,T),f=S(l,T),d=Q(L,D,u[0],u[1]),p=Math.min(Q(i,o,f[0],f[1]),c);$(d,p)&&(r=N+t.pathSector(j),I&&(r+=t.pathSector(I)),a=[Z(I,u[0],u[1]),Z(j,u[0],u[1])].join(" ")),K(r,a)}function te(){if(h.removeZoombox(n),null!==I&&null!==j){h.showDoubleClickNotifier(n);var e=k._rl,r=(e[1]-e[0])/(1-f/c)/c,a=[e[0]+(I-f)*r,e[0]+(j-f)*r];i.call("relayout",n,t.id+".radialaxis.range",a)}}function ne(e,r){var a=n._fullLayout.clickmode;if(h.removeZoombox(n),2===e){var o={};for(var s in t.viewInitial)o[t.id+"."+s]=t.viewInitial[s];n.emit("plotly_doubleclick",null),i.call("relayout",n,o)}a.indexOf("select")>-1&&1===e&&b(r,n,[t.xaxis],[t.yaxis],t.id,G),a.indexOf("event")>-1&&v.click(n,r,t.id)}G.prepFn=function(e,r,i){var o=n._fullLayout.dragmode,l=R.getBoundingClientRect();if(L=r-l.left,D=i-l.top,T){var u=E.findPolygonOffset(c,w[0],w[1],T);L+=g+u[0],D+=_+u[1]}switch(o){case"zoom":G.moveFn=T?ee:J,G.clickFn=ne,G.doneFn=te,function(){I=null,j=null,N=t.pathSubplot(),F=!1;var e=n._fullLayout[t.id];B=a(e.bgcolor).getLuminance(),(V=h.makeZoombox(s,B,d,p,N)).attr("fill-rule","evenodd"),U=h.makeCorners(s,d,p),x(s)}();break;case"select":case"lasso":y(e,r,i,G,o)}},R.onmousemove=function(e){v.hover(n,e,t.id),n._fullLayout._lasthover=R,n._fullLayout._hoversubplot=t.id},R.onmouseout=function(e){n._dragging||m.unhover(n,e)},m.init(G)},R.updateRadialDrag=function(e,t,n){var a=this,s=a.gd,l=a.layers,u=a.radius,c=a.innerRadius,f=a.cx,d=a.cy,v=a.radialAxis,g=C.radialDragBoxSize,y=g/2;if(v.visible){var b,_,k,E=S(a.radialAxisAngle),M=v._rl,A=M[0],P=M[1],R=M[n],L=.75*(M[1]-M[0])/(1-t.hole)/u;n?(b=f+(u+y)*Math.cos(E),_=d-(u+y)*Math.sin(E),k="radialdrag"):(b=f+(c-y)*Math.cos(E),_=d-(c-y)*Math.sin(E),k="radialdrag-inner");var N,F,B,V=h.makeRectDragger(l,k,"crosshair",-y,-y,g,g),U={element:V,gd:s};I(r.select(V),v.visible&&c<u,{transform:z(b,_)}),U.prepFn=function(){N=null,F=null,B=null,U.moveFn=G,U.doneFn=H,x(e._zoomlayer)},U.clampFn=function(e,t){return Math.sqrt(e*e+t*t)<C.MINDRAG&&(e=0,t=0),[e,t]},m.init(U)}function G(e,t){if(N)N(e,t);else{var n=[e,-t],r=[Math.cos(E),Math.sin(E)],a=Math.abs(o.dot(n,r)/Math.sqrt(o.dot(n,n)));isNaN(a)||(N=a<.5?W:q)}}function H(){null!==F?i.call("relayout",s,a.id+".radialaxis.angle",F):null!==B&&i.call("relayout",s,a.id+".radialaxis.range["+n+"]",B)}function W(e,t){if(0!==n){var r=b+e,i=_+t;F=Math.atan2(d-i,r-f),a.vangles&&(F=D(F,a.vangles)),F=O(F);var o=z(f,d)+j(-F);l["radial-axis"].attr("transform",o),l["radial-line"].select("line").attr("transform",o);var s=a.gd._fullLayout,u=s[a.id];a.updateRadialAxisTitle(s,u,F)}}function q(e,t){var r=o.dot([e,-t],[Math.cos(E),Math.sin(E)]);if(B=R-L*r,L>0==(n?B>A:B<P)){v.range[n]=B,v._rl[n]=B,v.setGeometry(),v.setScale(),a.xaxis.setRange(),a.xaxis.setScale(),a.yaxis.setRange(),a.yaxis.setScale(),p(s,v,!0),l["radial-grid"].attr("transform",z(f,d)).selectAll("path").attr("transform",null);var u=!1;for(var c in a.traceHash){var h=a.traceHash[c],m=o.filterVisible(h),g=h[0][0].trace._module,y=s._fullLayout[a.id];g.plot(s,a,m,y),i.traceIs(c,"gl")&&m.length&&(u=!0)}u&&(w(s),T(s))}else B=null}},R.updateAngularDrag=function(e){var t=this,n=t.gd,a=t.layers,s=t.radius,u=t.angularAxis,c=t.cx,f=t.cy,d=t.cxx,v=t.cyy,g=C.angularDragBoxSize,y=h.makeDragger(a,"path","angulardrag","move"),b={element:y,gd:n};function k(e,t){return Math.atan2(v+g-t,e-d-g)}r.select(y).attr("d",t.pathAnnulus(s,s+g)).attr("transform",z(c,f)).call(_,"move");var E,M,A,S,P,R,L=a.frontplot.select(".scatterlayer").selectAll(".trace"),D=L.selectAll(".point"),I=L.selectAll(".textpoint");function N(e,s){var h=t.gd._fullLayout,m=h[t.id],g=E+e,y=M+s,b=k(g,y),x=O(b-R);if(S=A+x,a.frontplot.attr("transform",z(t.xOffset2,t.yOffset2)+j([-x,d,v])),t.vangles){P=t.radialAxisAngle+x;var _=z(c,f)+j(-x),C=z(c,f)+j(-P);a.bg.attr("transform",_),a["radial-grid"].attr("transform",_),a["angular-line"].select("path").attr("transform",_),a["radial-axis"].attr("transform",C),a["radial-line"].select("line").attr("transform",C),t.updateRadialAxisTitle(h,m,P)}else t.clipPaths.forTraces.select("path").attr("transform",z(d,v)+j(x));D.each(function(){var e=r.select(this),t=l.getTranslate(e);e.attr("transform",z(t.x,t.y)+j([x]))}),I.each(function(){var e=r.select(this),t=e.select("text"),n=l.getTranslate(e);e.attr("transform",j([x,t.attr("x"),t.attr("y")])+z(n.x,n.y))}),u.rotation=o.modHalf(S,360),u.setGeometry(),u.setScale(),p(n,u,!0),t._hasClipOnAxisFalse&&!o.isFullCircle(t.sectorInRad)&&L.call(l.hideOutsideRangePoints,t);var N=!1;for(var F in t.traceHash)if(i.traceIs(F,"gl")){var B=t.traceHash[F],V=o.filterVisible(B),U=B[0][0].trace._module;U.plot(n,t,V,m),V.length&&(N=!0)}N&&(w(n),T(n))}function F(){I.select("text").attr("transform",null);var e={};e[t.id+".angularaxis.rotation"]=S,t.vangles&&(e[t.id+".radialaxis.angle"]=P),i.call("relayout",n,e)}b.prepFn=function(n,r,a){var i=e[t.id];A=i.angularaxis.rotation;var o=y.getBoundingClientRect();E=r-o.left,M=a-o.top,R=k(E,M),b.moveFn=N,b.doneFn=F,x(e._zoomlayer)},t.vangles&&!o.isFullCircle(t.sectorInRad)&&(b.prepFn=o.noop,_(r.select(y),null)),m.init(b)},R.isPtInside=function(e){var t=this.sectorInRad,n=this.vangles,r=this.angularAxis.c2g(e.theta),a=this.radialAxis,i=a.c2l(e.r),s=a._rl,l=n?E.isPtInsidePolygon:o.isPtInsideSector;return l(i,r,s,t,n)},R.pathArc=function(e){var t=this.sectorInRad,n=this.vangles,r=n?E.pathPolygon:o.pathArc;return r(e,t[0],t[1],n)},R.pathSector=function(e){var t=this.sectorInRad,n=this.vangles,r=n?E.pathPolygon:o.pathSector;return r(e,t[0],t[1],n)},R.pathAnnulus=function(e,t){var n=this.sectorInRad,r=this.vangles,a=r?E.pathPolygonAnnulus:o.pathAnnulus;return a(e,t,n[0],n[1],r)},R.pathSubplot=function(){var e=this.innerRadius,t=this.radius;return e?this.pathAnnulus(e,t):this.pathSector(t)},R.fillViewInitialKey=function(e,t){e in this.viewInitial||(this.viewInitial[e]=t)}},{"../../components/color":570,"../../components/dragelement":592,"../../components/drawing":595,"../../components/fx":612,"../../components/titles":661,"../../constants/alignment":668,"../../lib":696,"../../lib/clear_gl_canvases":680,"../../lib/setcursor":716,"../../plot_api/subroutines":735,"../../registry":827,"../cartesian/autorange":743,"../cartesian/axes":744,"../cartesian/dragbox":753,"../cartesian/select":762,"../cartesian/set_convert":763,"../plots":808,"./constants":809,"./helpers":810,"./set_convert":821,d3:148,tinycolor2:514}],821:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("../cartesian/set_convert"),i=r.deg2rad,o=r.rad2deg;t.exports=function(e,t,n){switch(a(e,n),e._id){case"x":case"radialaxis":!function(e,t){var n=t._subplot;e.setGeometry=function(){var t=e._rl[0],r=e._rl[1],a=n.innerRadius,i=(n.radius-a)/(r-t),o=a/i,s=t>r?function(e){return e<=0}:function(e){return e>=0};e.c2g=function(n){var r=e.c2l(n)-t;return(s(r)?r:0)+o},e.g2c=function(n){return e.l2c(n+t-o)},e.g2p=function(e){return e*i},e.c2p=function(t){return e.g2p(e.c2g(t))}}}(e,t);break;case"angularaxis":!function(e,t){var n=e.type;if("linear"===n){var a=e.d2c,s=e.c2d;e.d2c=function(e,t){return function(e,t){return"degrees"===t?i(e):e}(a(e),t)},e.c2d=function(e,t){return s(function(e,t){return"degrees"===t?o(e):e}(e,t))}}e.makeCalcdata=function(t,a){var i,o,s=t[a],l=t._length,u=function(n){return e.d2c(n,t.thetaunit)};if(s){if(r.isTypedArray(s)&&"linear"===n){if(l===s.length)return s;if(s.subarray)return s.subarray(0,l)}for(i=new Array(l),o=0;o<l;o++)i[o]=u(s[o])}else{var c=a+"0",f="d"+a,d=c in t?u(t[c]):0,p=t[f]?u(t[f]):(e.period||2*Math.PI)/l;for(i=new Array(l),o=0;o<l;o++)i[o]=d+o*p}return i},e.setGeometry=function(){var a,s,l,u,c=t.sector,f=c.map(i),d={clockwise:-1,counterclockwise:1}[e.direction],p=i(e.rotation),h=function(e){return d*e+p},m=function(e){return(e-p)/d};switch(n){case"linear":s=a=r.identity,u=i,l=o,e.range=r.isFullCircle(f)?[c[0],c[0]+360]:f.map(m).map(o);break;case"category":var v=e._categories.length,g=e.period?Math.max(e.period,v):v;s=u=function(e){return 2*e*Math.PI/g},a=l=function(e){return e*g/Math.PI/2},e.range=[0,g]}e.c2g=function(e){return h(s(e))},e.g2c=function(e){return a(m(e))},e.t2g=function(e){return h(u(e))},e.g2t=function(e){return l(m(e))}}}(e,t)}}},{"../../lib":696,"../cartesian/set_convert":763}],822:[function(e,t,n){"use strict";var r=e("../lib"),a=e("../plot_api/plot_template"),i=e("./domain").defaults;t.exports=function(e,t,n,o){var s,l,u=o.type,c=o.attributes,f=o.handleDefaults,d=o.partition||"x",p=t._subplots[u],h=p.length,m=h&&p[0].replace(/\d+$/,"");function v(e,t){return r.coerce(s,l,c,e,t)}for(var g=0;g<h;g++){var y=p[g];s=e[y]?e[y]:e[y]={},l=a.newContainer(t,y,m);var b={};b[d]=[g/h,(g+1)/h],i(l,t,v,b),o.id=y,f(s,l,v,o)}}},{"../lib":696,"../plot_api/plot_template":734,"./domain":770}],823:[function(e,t,n){"use strict";var r=e("./ternary"),a=e("../../plots/get_data").getSubplotCalcData,i=e("../../lib").counterRegex;n.name="ternary";var o=n.attr="subplot";n.idRoot="ternary",n.idRegex=n.attrRegex=i("ternary");var s=n.attributes={};s[o]={valType:"subplotid",dflt:"ternary",editType:"calc"},n.layoutAttributes=e("./layout_attributes"),n.supplyLayoutDefaults=e("./layout_defaults"),n.plot=function(e){for(var t=e._fullLayout,n=e.calcdata,i=t._subplots.ternary,o=0;o<i.length;o++){var s=i[o],l=a(n,"ternary",s),u=t[s]._subplot;u||(u=new r({id:s,graphDiv:e,container:t._ternarylayer.node()},t),t[s]._subplot=u),u.plot(l,t,e._promises)}},n.clean=function(e,t,n,r){for(var a=r._subplots.ternary||[],i=0;i<a.length;i++){var o=a[i],s=r[o]._subplot;!t[o]&&s&&(s.plotContainer.remove(),s.clipDef.remove(),s.clipDefRelative.remove(),s.layers["a-title"].remove(),s.layers["b-title"].remove(),s.layers["c-title"].remove())}}},{"../../lib":696,"../../plots/get_data":781,"./layout_attributes":824,"./layout_defaults":825,"./ternary":826}],824:[function(e,t,n){"use strict";var r=e("../../components/color/attributes"),a=e("../domain").attributes,i=e("../cartesian/layout_attributes"),o=e("../../plot_api/edit_types").overrideAll,s=e("../../lib/extend").extendFlat,l={title:i.title,titlefont:i.titlefont,color:i.color,tickmode:i.tickmode,nticks:s({},i.nticks,{dflt:6,min:1}),tick0:i.tick0,dtick:i.dtick,tickvals:i.tickvals,ticktext:i.ticktext,ticks:i.ticks,ticklen:i.ticklen,tickwidth:i.tickwidth,tickcolor:i.tickcolor,showticklabels:i.showticklabels,showtickprefix:i.showtickprefix,tickprefix:i.tickprefix,showticksuffix:i.showticksuffix,ticksuffix:i.ticksuffix,showexponent:i.showexponent,exponentformat:i.exponentformat,separatethousands:i.separatethousands,tickfont:i.tickfont,tickangle:i.tickangle,tickformat:i.tickformat,tickformatstops:i.tickformatstops,hoverformat:i.hoverformat,showline:s({},i.showline,{dflt:!0}),linecolor:i.linecolor,linewidth:i.linewidth,showgrid:s({},i.showgrid,{dflt:!0}),gridcolor:i.gridcolor,gridwidth:i.gridwidth,layer:i.layer,min:{valType:"number",dflt:0,min:0}};t.exports=o({domain:a({name:"ternary"}),bgcolor:{valType:"color",dflt:r.background},sum:{valType:"number",dflt:1,min:0},aaxis:l,baxis:l,caxis:l},"plot","from-root")},{"../../components/color/attributes":569,"../../lib/extend":685,"../../plot_api/edit_types":727,"../cartesian/layout_attributes":757,"../domain":770}],825:[function(e,t,n){"use strict";var r=e("../../components/color"),a=e("../../plot_api/plot_template"),i=e("../../lib"),o=e("../subplot_defaults"),s=e("../cartesian/tick_label_defaults"),l=e("../cartesian/tick_mark_defaults"),u=e("../cartesian/tick_value_defaults"),c=e("../cartesian/line_grid_defaults"),f=e("./layout_attributes"),d=["aaxis","baxis","caxis"];function p(e,t,n,i){var o,s,l,u=n("bgcolor"),c=n("sum");i.bgColor=r.combine(u,i.paper_bgcolor);for(var f=0;f<d.length;f++)o=d[f],s=e[o]||{},(l=a.newContainer(t,o))._name=o,h(s,l,i);var p=t.aaxis,m=t.baxis,v=t.caxis;p.min+m.min+v.min>=c&&(p.min=0,m.min=0,v.min=0,e.aaxis&&delete e.aaxis.min,e.baxis&&delete e.baxis.min,e.caxis&&delete e.caxis.min)}function h(e,t,n){var r=f[t._name];function a(n,a){return i.coerce(e,t,r,n,a)}t.type="linear";var o=a("color"),d=o!==r.color.dflt?o:n.font.color,p=t._name,h=p.charAt(0).toUpperCase(),m="Component "+h,v=a("title",m);t._hovertitle=v===m?v:h,i.coerceFont(a,"titlefont",{family:n.font.family,size:Math.round(1.2*n.font.size),color:d}),a("min"),u(e,t,a,"linear"),s(e,t,a,"linear",{}),l(e,t,a,{outerTicks:!0});var g=a("showticklabels");g&&(i.coerceFont(a,"tickfont",{family:n.font.family,size:n.font.size,color:d}),a("tickangle"),a("tickformat")),c(e,t,a,{dfltColor:o,bgColor:n.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:r}),a("hoverformat"),a("layer")}t.exports=function(e,t,n){o(e,t,n,{type:"ternary",attributes:f,handleDefaults:p,font:t.font,paper_bgcolor:t.paper_bgcolor})}},{"../../components/color":570,"../../lib":696,"../../plot_api/plot_template":734,"../cartesian/line_grid_defaults":759,"../cartesian/tick_label_defaults":764,"../cartesian/tick_mark_defaults":765,"../cartesian/tick_value_defaults":766,"../subplot_defaults":822,"./layout_attributes":824}],826:[function(e,t,n){"use strict";var r=e("d3"),a=e("tinycolor2"),i=e("../../registry"),o=e("../../lib"),s=o._,l=e("../../components/color"),u=e("../../components/drawing"),c=e("../cartesian/set_convert"),f=e("../../lib/extend").extendFlat,d=e("../plots"),p=e("../cartesian/axes"),h=e("../../components/dragelement"),m=e("../../components/fx"),v=e("../../components/titles"),g=e("../cartesian/select").prepSelect,y=e("../cartesian/select").selectOnClick,b=e("../cartesian/select").clearSelect,x=e("../cartesian/constants");function _(e,t){this.id=e.id,this.graphDiv=e.graphDiv,this.init(t),this.makeFramework(t),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}t.exports=_;var w=_.prototype;w.init=function(e){this.container=e._ternarylayer,this.defs=e._defs,this.layoutId=e._uid,this.traceHash={},this.layers={}},w.plot=function(e,t){var n=t[this.id],r=t._size;this._hasClipOnAxisFalse=!1;for(var a=0;a<e.length;a++){var i=e[a][0].trace;if(!1===i.cliponaxis){this._hasClipOnAxisFalse=!0;break}}this.updateLayers(n),this.adjustLayout(n,r),d.generalUpdatePerTraceModule(this.graphDiv,this,e,n),this.layers.plotbg.select("path").call(l.fill,n.bgcolor)},w.makeFramework=function(e){var t=e[this.id],n=this.clipId="clip"+this.layoutId+this.id,r=this.clipIdRelative="clip-relative"+this.layoutId+this.id;this.clipDef=o.ensureSingleById(e._clips,"clipPath",n,function(e){e.append("path").attr("d","M0,0Z")}),this.clipDefRelative=o.ensureSingleById(e._clips,"clipPath",r,function(e){e.append("path").attr("d","M0,0Z")}),this.plotContainer=o.ensureSingle(this.container,"g",this.id),this.updateLayers(t),u.setClipUrl(this.layers.backplot,n),u.setClipUrl(this.layers.grids,n)},w.updateLayers=function(e){var t=this.layers,n=["draglayer","plotbg","backplot","grids"];"below traces"===e.aaxis.layer&&n.push("aaxis","aline"),"below traces"===e.baxis.layer&&n.push("baxis","bline"),"below traces"===e.caxis.layer&&n.push("caxis","cline"),n.push("frontplot"),"above traces"===e.aaxis.layer&&n.push("aaxis","aline"),"above traces"===e.baxis.layer&&n.push("baxis","bline"),"above traces"===e.caxis.layer&&n.push("caxis","cline");var a=this.plotContainer.selectAll("g.toplevel").data(n,String),i=["agrid","bgrid","cgrid"];a.enter().append("g").attr("class",function(e){return"toplevel "+e}).each(function(e){var n=r.select(this);t[e]=n,"frontplot"===e?n.append("g").classed("scatterlayer",!0):"backplot"===e?n.append("g").classed("maplayer",!0):"plotbg"===e?n.append("path").attr("d","M0,0Z"):"aline"===e||"bline"===e||"cline"===e?n.append("path"):"grids"===e&&i.forEach(function(e){t[e]=n.append("g").classed("grid "+e,!0);var r="bgrid"===e?"x":"y";t[e].append("g").classed(r,!0)})}),a.order()};var T=Math.sqrt(4/3);function k(e){return e.ticks+String(e.ticklen)+String(e.showticklabels)}w.adjustLayout=function(e,t){var n,r,a,i,o,s,d=this,p=e.domain,h=(p.x[0]+p.x[1])/2,m=(p.y[0]+p.y[1])/2,v=p.x[1]-p.x[0],g=p.y[1]-p.y[0],y=v*t.w,b=g*t.h,x=e.sum,_=e.aaxis.min,w=e.baxis.min,k=e.caxis.min;y>T*b?a=(i=b)*T:i=(a=y)/T,o=v*a/y,s=g*i/b,n=t.l+t.w*h-a/2,r=t.t+t.h*(1-m)-i/2,d.x0=n,d.y0=r,d.w=a,d.h=i,d.sum=x,d.xaxis={type:"linear",range:[_+2*k-x,x-_-2*w],domain:[h-o/2,h+o/2],_id:"x"},c(d.xaxis,d.graphDiv._fullLayout),d.xaxis.setScale(),d.xaxis.isPtWithinRange=function(e){return e.a>=d.aaxis.range[0]&&e.a<=d.aaxis.range[1]&&e.b>=d.baxis.range[1]&&e.b<=d.baxis.range[0]&&e.c>=d.caxis.range[1]&&e.c<=d.caxis.range[0]},d.yaxis={type:"linear",range:[_,x-w-k],domain:[m-s/2,m+s/2],_id:"y"},c(d.yaxis,d.graphDiv._fullLayout),d.yaxis.setScale(),d.yaxis.isPtWithinRange=function(){return!0};var C=d.yaxis.domain[0],E=d.aaxis=f({},e.aaxis,{visible:!0,range:[_,x-w-k],side:"left",_counterangle:30,tickangle:(+e.aaxis.tickangle||0)-30,domain:[C,C+s*T],_axislayer:d.layers.aaxis,_gridlayer:d.layers.agrid,anchor:"free",position:0,_pos:0,_id:"y",_length:a,_gridpath:"M0,0l"+i+",-"+a/2,automargin:!1});c(E,d.graphDiv._fullLayout),E.setScale();var M=d.baxis=f({},e.baxis,{visible:!0,range:[x-_-k,w],side:"bottom",_counterangle:30,domain:d.xaxis.domain,_axislayer:d.layers.baxis,_gridlayer:d.layers.bgrid,_counteraxis:d.aaxis,anchor:"free",position:0,_pos:0,_id:"x",_length:a,_gridpath:"M0,0l-"+a/2+",-"+i,automargin:!1});c(M,d.graphDiv._fullLayout),M.setScale(),E._counteraxis=M;var A=d.caxis=f({},e.caxis,{visible:!0,range:[x-_-w,k],side:"right",_counterangle:30,tickangle:(+e.caxis.tickangle||0)+30,domain:[C,C+s*T],_axislayer:d.layers.caxis,_gridlayer:d.layers.cgrid,_counteraxis:d.baxis,anchor:"free",position:0,_pos:0,_id:"y",_length:a,_gridpath:"M0,0l-"+i+","+a/2,automargin:!1});c(A,d.graphDiv._fullLayout),A.setScale();var S="M"+n+","+(r+i)+"h"+a+"l-"+a/2+",-"+i+"Z";d.clipDef.select("path").attr("d",S),d.layers.plotbg.select("path").attr("d",S);var O="M0,"+i+"h"+a+"l-"+a/2+",-"+i+"Z";d.clipDefRelative.select("path").attr("d",O);var P="translate("+n+","+r+")";d.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",P),d.clipDefRelative.select("path").attr("transform",null);var R="translate("+(n-M._offset)+","+(r+i)+")";d.layers.baxis.attr("transform",R),d.layers.bgrid.attr("transform",R);var L="translate("+(n+a/2)+","+r+")rotate(30)translate(0,"+-E._offset+")";d.layers.aaxis.attr("transform",L),d.layers.agrid.attr("transform",L);var D="translate("+(n+a/2)+","+r+")rotate(-30)translate(0,"+-A._offset+")";d.layers.caxis.attr("transform",D),d.layers.cgrid.attr("transform",D),d.drawAxes(!0),d.plotContainer.selectAll(".crisp").classed("crisp",!1),d.layers.aline.select("path").attr("d",E.showline?"M"+n+","+(r+i)+"l"+a/2+",-"+i:"M0,0").call(l.stroke,E.linecolor||"#000").style("stroke-width",(E.linewidth||0)+"px"),d.layers.bline.select("path").attr("d",M.showline?"M"+n+","+(r+i)+"h"+a:"M0,0").call(l.stroke,M.linecolor||"#000").style("stroke-width",(M.linewidth||0)+"px"),d.layers.cline.select("path").attr("d",A.showline?"M"+(n+a/2)+","+r+"l"+a/2+","+i:"M0,0").call(l.stroke,A.linecolor||"#000").style("stroke-width",(A.linewidth||0)+"px"),d.graphDiv._context.staticPlot||d.initInteractions(),u.setClipUrl(d.layers.frontplot,d._hasClipOnAxisFalse?null:d.clipId)},w.drawAxes=function(e){var t,n=this.graphDiv,r=this.id.substr(7)+"title",a=this.layers,i=this.aaxis,o=this.baxis,l=this.caxis;if(t=k(i),this.aTickLayout!==t&&(a.aaxis.selectAll(".ytick").remove(),this.aTickLayout=t),t=k(o),this.bTickLayout!==t&&(a.baxis.selectAll(".xtick").remove(),this.bTickLayout=t),t=k(l),this.cTickLayout!==t&&(a.caxis.selectAll(".ytick").remove(),this.cTickLayout=t),p.doTicksSingle(n,i,!0),p.doTicksSingle(n,o,!0),p.doTicksSingle(n,l,!0),e){var u=Math.max(i.showticklabels?i.tickfont.size/2:0,(l.showticklabels?.75*l.tickfont.size:0)+("outside"===l.ticks?.87*l.ticklen:0));this.layers["a-title"]=v.draw(n,"a"+r,{propContainer:i,propName:this.id+".aaxis.title",placeholder:s(n,"Click to enter Component A title"),attributes:{x:this.x0+this.w/2,y:this.y0-i.titlefont.size/3-u,"text-anchor":"middle"}});var c=(o.showticklabels?o.tickfont.size:0)+("outside"===o.ticks?o.ticklen:0)+3;this.layers["b-title"]=v.draw(n,"b"+r,{propContainer:o,propName:this.id+".baxis.title",placeholder:s(n,"Click to enter Component B title"),attributes:{x:this.x0-c,y:this.y0+this.h+.83*o.titlefont.size+c,"text-anchor":"middle"}}),this.layers["c-title"]=v.draw(n,"c"+r,{propContainer:l,propName:this.id+".caxis.title",placeholder:s(n,"Click to enter Component C title"),attributes:{x:this.x0+this.w+c,y:this.y0+this.h+.83*l.titlefont.size+c,"text-anchor":"middle"}})}};var C=x.MINZOOM/2+.87,E="m-0.87,.5h"+C+"v3h-"+(C+5.2)+"l"+(C/2+2.6)+",-"+(.87*C+4.5)+"l2.6,1.5l-"+C/2+","+.87*C+"Z",M="m0.87,.5h-"+C+"v3h"+(C+5.2)+"l-"+(C/2+2.6)+",-"+(.87*C+4.5)+"l-2.6,1.5l"+C/2+","+.87*C+"Z",A="m0,1l"+C/2+","+.87*C+"l2.6,-1.5l-"+(C/2+2.6)+",-"+(.87*C+4.5)+"l-"+(C/2+2.6)+","+(.87*C+4.5)+"l2.6,1.5l"+C/2+",-"+.87*C+"Z",S="m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2Z",O=!0;function P(e){r.select(e).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}w.initInteractions=function(){var e,t,n,r,c,f,d,p,v,_,w=this,k=w.layers.plotbg.select("path").node(),C=w.graphDiv,R=C._fullLayout._zoomlayer,L={element:k,gd:C,plotinfo:{id:w.id,xaxis:w.xaxis,yaxis:w.yaxis},subplot:w.id,prepFn:function(i,o,s){L.xaxes=[w.xaxis],L.yaxes=[w.yaxis];var u=C._fullLayout.dragmode;L.minDrag="lasso"===u?1:void 0,"zoom"===u?(L.moveFn=N,L.clickFn=D,L.doneFn=F,function(i,o,s){var u=k.getBoundingClientRect();e=o-u.left,t=s-u.top,n={a:w.aaxis.range[0],b:w.baxis.range[1],c:w.caxis.range[1]},c=n,r=w.aaxis.range[1]-n.a,f=a(w.graphDiv._fullLayout[w.id].bgcolor).getLuminance(),d="M0,"+w.h+"L"+w.w/2+", 0L"+w.w+","+w.h+"Z",p=!1,v=R.append("path").attr("class","zoombox").attr("transform","translate("+w.x0+", "+w.y0+")").style({fill:f>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",d),_=R.append("path").attr("class","zoombox-corners").attr("transform","translate("+w.x0+", "+w.y0+")").style({fill:l.background,stroke:l.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),b(R)}(0,o,s)):"pan"===u?(L.moveFn=B,L.clickFn=D,L.doneFn=V,n={a:w.aaxis.range[0],b:w.baxis.range[1],c:w.caxis.range[1]},c=n,b(R)):"select"!==u&&"lasso"!==u||g(i,o,s,L,u)}};function D(e,t){var n=C._fullLayout.clickmode;if(P(C),2===e){var r={};r[w.id+".aaxis.min"]=0,r[w.id+".baxis.min"]=0,r[w.id+".caxis.min"]=0,C.emit("plotly_doubleclick",null),i.call("relayout",C,r)}n.indexOf("select")>-1&&1===e&&y(t,C,[w.xaxis],[w.yaxis],w.id,L),n.indexOf("event")>-1&&m.click(C,t,w.id)}function I(e,t){return 1-t/w.h}function z(e,t){return 1-(e+(w.h-t)/Math.sqrt(3))/w.w}function j(e,t){return(e-(w.h-t)/Math.sqrt(3))/w.w}function N(a,i){var o=e+a,s=t+i,l=Math.max(0,Math.min(1,I(0,t),I(0,s))),u=Math.max(0,Math.min(1,z(e,t),z(o,s))),h=Math.max(0,Math.min(1,j(e,t),j(o,s))),m=(l/2+h)*w.w,g=(1-l/2-u)*w.w,y=(m+g)/2,b=g-m,k=(1-l)*w.h,C=k-b/T;b<x.MINZOOM?(c=n,v.attr("d",d),_.attr("d","M0,0Z")):(c={a:n.a+l*r,b:n.b+u*r,c:n.c+h*r},v.attr("d",d+"M"+m+","+k+"H"+g+"L"+y+","+C+"L"+m+","+k+"Z"),_.attr("d","M"+e+","+t+S+"M"+m+","+k+E+"M"+g+","+k+M+"M"+y+","+C+A)),p||(v.transition().style("fill",f>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),_.transition().style("opacity",1).duration(200),p=!0)}function F(){if(P(C),c!==n){var e={};e[w.id+".aaxis.min"]=c.a,e[w.id+".baxis.min"]=c.b,e[w.id+".caxis.min"]=c.c,i.call("relayout",C,e),O&&C.data&&C._context.showTips&&(o.notifier(s(C,"Double-click to zoom back out"),"long"),O=!1)}}function B(e,t){var r=e/w.xaxis._m,a=t/w.yaxis._m,i=[(c={a:n.a-a,b:n.b+(r+a)/2,c:n.c-(r-a)/2}).a,c.b,c.c].sort(),o={a:i.indexOf(c.a),b:i.indexOf(c.b),c:i.indexOf(c.c)};i[0]<0&&(i[1]+i[0]/2<0?(i[2]+=i[0]+i[1],i[0]=i[1]=0):(i[2]+=i[0]/2,i[1]+=i[0]/2,i[0]=0),c={a:i[o.a],b:i[o.b],c:i[o.c]},t=(n.a-c.a)*w.yaxis._m,e=(n.c-c.c-n.b+c.b)*w.xaxis._m);var s="translate("+(w.x0+e)+","+(w.y0+t)+")";w.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",s);var l="translate("+-e+","+-t+")";w.clipDefRelative.select("path").attr("transform",l),w.aaxis.range=[c.a,w.sum-c.b-c.c],w.baxis.range=[w.sum-c.a-c.c,c.b],w.caxis.range=[w.sum-c.a-c.b,c.c],w.drawAxes(!1),w.plotContainer.selectAll(".crisp").classed("crisp",!1),w._hasClipOnAxisFalse&&w.plotContainer.select(".scatterlayer").selectAll(".trace").call(u.hideOutsideRangePoints,w)}function V(){var e={};e[w.id+".aaxis.min"]=c.a,e[w.id+".baxis.min"]=c.b,e[w.id+".caxis.min"]=c.c,i.call("relayout",C,e)}k.onmousemove=function(e){m.hover(C,e,w.id),C._fullLayout._lasthover=k,C._fullLayout._hoversubplot=w.id},k.onmouseout=function(e){C._dragging||h.unhover(C,e)},h.init(L)}},{"../../components/color":570,"../../components/dragelement":592,"../../components/drawing":595,"../../components/fx":612,"../../components/titles":661,"../../lib":696,"../../lib/extend":685,"../../registry":827,"../cartesian/axes":744,"../cartesian/constants":750,"../cartesian/select":762,"../cartesian/set_convert":763,"../plots":808,d3:148,tinycolor2:514}],827:[function(e,t,n){"use strict";var r=e("./lib/loggers"),a=e("./lib/noop"),i=e("./lib/push_unique"),o=e("./lib/is_plain_object"),s=e("./lib/extend"),l=e("./plots/attributes"),u=e("./plots/layout_attributes"),c=s.extendFlat,f=s.extendDeepAll;function d(e){var t=e.name,a=e.categories,i=e.meta;if(n.modules[t])r.log("Type "+t+" already registered");else{n.subplotsRegistry[e.basePlotModule.name]||function(e){var t=e.name;if(n.subplotsRegistry[t])r.log("Plot type "+t+" already registered.");else for(var a in v(e),n.subplotsRegistry[t]=e,n.componentsRegistry)b(a,e.name)}(e.basePlotModule);for(var o={},s=0;s<a.length;s++)o[a[s]]=!0,n.allCategories[a[s]]=!0;for(var l in n.modules[t]={_module:e,categories:o},i&&Object.keys(i).length&&(n.modules[t].meta=i),n.allTypes.push(t),n.componentsRegistry)g(l,t);e.layoutAttributes&&c(n.traceLayoutAttributes,e.layoutAttributes)}}function p(e){if("string"!=typeof e.name)throw new Error("Component module *name* must be a string.");var t=e.name;for(var r in n.componentsRegistry[t]=e,e.layoutAttributes&&(e.layoutAttributes._isLinkedToArray&&i(n.layoutArrayContainers,t),v(e)),n.modules)g(t,r);for(var a in n.subplotsRegistry)b(t,a);for(var o in n.transformsRegistry)y(t,o);e.schema&&e.schema.layout&&f(u,e.schema.layout)}function h(e){if("string"!=typeof e.name)throw new Error("Transform module *name* must be a string.");var t="Transform module "+e.name,a="function"==typeof e.transform,i="function"==typeof e.calcTransform;if(!a&&!i)throw new Error(t+" is missing a *transform* or *calcTransform* method.");for(var s in a&&i&&r.log([t+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),o(e.attributes)||r.log(t+" registered without an *attributes* object."),"function"!=typeof e.supplyDefaults&&r.log(t+" registered without a *supplyDefaults* method."),n.transformsRegistry[e.name]=e,n.componentsRegistry)y(s,e.name)}function m(e){var t=e.name,r=t.split("-")[0],a=e.dictionary,i=e.format,o=a&&Object.keys(a).length,s=i&&Object.keys(i).length,l=n.localeRegistry,u=l[t];if(u||(l[t]=u={}),r!==t){var c=l[r];c||(l[r]=c={}),o&&c.dictionary===u.dictionary&&(c.dictionary=a),s&&c.format===u.format&&(c.format=i)}o&&(u.dictionary=a),s&&(u.format=i)}function v(e){if(e.layoutAttributes){var t=e.layoutAttributes._arrayAttrRegexps;if(t)for(var r=0;r<t.length;r++)i(n.layoutArrayRegexes,t[r])}}function g(e,t){var r=n.componentsRegistry[e].schema;if(r&&r.traces){var a=r.traces[t];a&&f(n.modules[t]._module.attributes,a)}}function y(e,t){var r=n.componentsRegistry[e].schema;if(r&&r.transforms){var a=r.transforms[t];a&&f(n.transformsRegistry[t].attributes,a)}}function b(e,t){var r=n.componentsRegistry[e].schema;if(r&&r.subplots){var a=n.subplotsRegistry[t],i=a.layoutAttributes,o="subplot"===a.attr?a.name:a.attr;Array.isArray(o)&&(o=o[0]);var s=r.subplots[o];i&&s&&f(i,s)}}function x(e){return"object"==typeof e&&(e=e.type),e}n.modules={},n.allCategories={},n.allTypes=[],n.subplotsRegistry={},n.transformsRegistry={},n.componentsRegistry={},n.layoutArrayContainers=[],n.layoutArrayRegexes=[],n.traceLayoutAttributes={},n.localeRegistry={},n.apiMethodRegistry={},n.register=function(e){if(!e)throw new Error("No argument passed to Plotly.register.");e&&!Array.isArray(e)&&(e=[e]);for(var t=0;t<e.length;t++){var r=e[t];if(!r)throw new Error("Invalid module was attempted to be registered!");switch(r.moduleType){case"trace":d(r);break;case"transform":h(r);break;case"component":p(r);break;case"locale":m(r);break;case"apiMethod":var a=r.name;n.apiMethodRegistry[a]=r.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},n.getModule=function(e){var t=n.modules[x(e)];return!!t&&t._module},n.traceIs=function(e,t){if("various"===(e=x(e)))return!1;var a=n.modules[e];return a||(e&&"area"!==e&&r.log("Unrecognized trace type "+e+"."),a=n.modules[l.type.dflt]),!!a.categories[t]},n.getTransformIndices=function(e,t){for(var n=[],r=e.transforms||[],a=0;a<r.length;a++)r[a].type===t&&n.push(a);return n},n.hasTransform=function(e,t){for(var n=e.transforms||[],r=0;r<n.length;r++)if(n[r].type===t)return!0;return!1},n.getComponentMethod=function(e,t){var r=n.componentsRegistry[e];return r&&r[t]||a},n.call=function(){var e=arguments[0],t=[].slice.call(arguments,1);return n.apiMethodRegistry[e].apply(null,t)}},{"./lib/extend":685,"./lib/is_plain_object":697,"./lib/loggers":700,"./lib/noop":705,"./lib/push_unique":710,"./plots/attributes":741,"./plots/layout_attributes":799}],828:[function(e,t,n){"use strict";var r=e("../lib"),a=r.extendFlat,i=r.extendDeep;function o(e){var t;switch(e){case"themes__thumb":t={autosize:!0,width:150,height:150,title:"",showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":t={title:"",hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:t={}}return t}function s(e){return["xaxis","yaxis","zaxis"].indexOf(e.slice(0,5))>-1}t.exports=function(e,t){var n;e.framework&&e.framework.isPolar&&(e=e.framework.getConfig());var r=e.data,l=e.layout,u=i([],r),c=i({},l,o(t.tileClass)),f=e._context||{};if(t.width&&(c.width=t.width),t.height&&(c.height=t.height),"thumbnail"===t.tileClass||"themes__thumb"===t.tileClass){c.annotations=[];var d=Object.keys(c);for(n=0;n<d.length;n++)s(d[n])&&(c[d[n]].title="");for(n=0;n<u.length;n++){var p=u[n];p.showscale=!1,p.marker&&(p.marker.showscale=!1),"pie"===p.type&&(p.textposition="none")}}if(Array.isArray(t.annotations))for(n=0;n<t.annotations.length;n++)c.annotations.push(t.annotations[n]);var h=Object.keys(c).filter(function(e){return e.match(/^scene\d*$/)});if(h.length){var m={};for("thumbnail"===t.tileClass&&(m={title:"",showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),n=0;n<h.length;n++){var v=c[h[n]];v.xaxis||(v.xaxis={}),v.yaxis||(v.yaxis={}),v.zaxis||(v.zaxis={}),a(v.xaxis,m),a(v.yaxis,m),a(v.zaxis,m),v._scene=null}}var g=document.createElement("div");t.tileClass&&(g.className=t.tileClass);var y={gd:g,td:g,layout:c,data:u,config:{staticPlot:void 0===t.staticPlot||t.staticPlot,plotGlPixelRatio:void 0===t.plotGlPixelRatio?2:t.plotGlPixelRatio,displaylogo:t.displaylogo||!1,showLink:t.showLink||!1,showTips:t.showTips||!1,mapboxAccessToken:f.mapboxAccessToken}};return"transparent"!==t.setBackground&&(y.config.setBackground=t.setBackground||"opaque"),y.gd.defaultLayout=o(t.tileClass),y}},{"../lib":696}],829:[function(e,t,n){"use strict";var r=e("../plot_api/to_image"),a=e("../lib"),i=e("./filesaver");t.exports=function(e,t){var n;return a.isPlainObject(e)||(n=a.getGraphDiv(e)),(t=t||{}).format=t.format||"png",new Promise(function(o,s){n&&n._snapshotInProgress&&s(new Error("Snapshotting already in progress.")),a.isIE()&&"svg"!==t.format&&s(new Error("Sorry IE does not support downloading from canvas. Try {format:'svg'} instead.")),n&&(n._snapshotInProgress=!0);var l=r(e,t),u=t.filename||e.fn||"newplot";u+="."+t.format,l.then(function(e){return n&&(n._snapshotInProgress=!1),i(e,u)}).then(function(e){o(e)}).catch(function(e){n&&(n._snapshotInProgress=!1),s(e)})})}},{"../lib":696,"../plot_api/to_image":737,"./filesaver":830}],830:[function(e,t,n){"use strict";t.exports=function(e,t){var n=document.createElement("a"),r="download"in n,a=/Version\/[\d\.]+.*Safari/.test(navigator.userAgent);return new Promise(function(i,o){if("undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent)&&o(new Error("IE < 10 unsupported")),a&&(document.location.href="data:application/octet-stream"+e.slice(e.search(/[,;]/)),i(t)),t||(t="download"),r&&(n.href=e,n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n),i(t)),"undefined"!=typeof navigator&&navigator.msSaveBlob){var s=e.split(/^data:image\/svg\+xml,/)[1],l=decodeURIComponent(s);navigator.msSaveBlob(new Blob([l]),t),i(t)}o(new Error("download error"))})}},{}],831:[function(e,t,n){"use strict";n.getDelay=function(e){return e._has&&(e._has("gl3d")||e._has("gl2d")||e._has("mapbox"))?500:0},n.getRedrawFunc=function(e){var t=e._fullLayout||{},n=t._has&&t._has("polar"),r=!n&&e.data&&e.data[0]&&e.data[0].r;if(!r)return function(){(e.calcdata||[]).forEach(function(e){e[0]&&e[0].t&&e[0].t.cb&&e[0].t.cb()})}}},{}],832:[function(e,t,n){"use strict";var r=e("./helpers"),a={getDelay:r.getDelay,getRedrawFunc:r.getRedrawFunc,clone:e("./cloneplot"),toSVG:e("./tosvg"),svgToImg:e("./svgtoimg"),toImage:e("./toimage"),downloadImage:e("./download")};t.exports=a},{"./cloneplot":828,"./download":829,"./helpers":831,"./svgtoimg":833,"./toimage":834,"./tosvg":835}],833:[function(e,t,n){"use strict";var r=e("../lib"),a=e("events").EventEmitter;t.exports=function(e){var t=e.emitter||new a,n=new Promise(function(a,i){var o=window.Image,s=e.svg,l=e.format||"png";if(r.isIE()&&"svg"!==l){var u=new Error("Sorry IE does not support downloading from canvas. Try {format:'svg'} instead.");return i(u),e.promise?n:t.emit("error",u)}var c=e.canvas,f=e.scale||1,d=e.width||300,p=e.height||150,h=f*d,m=f*p,v=c.getContext("2d"),g=new o,y="data:image/svg+xml,"+encodeURIComponent(s);c.width=h,c.height=m,g.onload=function(){var n;switch("svg"!==l&&v.drawImage(g,0,0,h,m),l){case"jpeg":n=c.toDataURL("image/jpeg");break;case"png":n=c.toDataURL("image/png");break;case"webp":n=c.toDataURL("image/webp");break;case"svg":n=y;break;default:var r="Image format is not jpeg, png, svg or webp.";if(i(new Error(r)),!e.promise)return t.emit("error",r)}a(n),e.promise||t.emit("success",n)},g.onerror=function(n){if(i(n),!e.promise)return t.emit("error",n)},g.src=y});return e.promise?n:t}},{"../lib":696,events:92}],834:[function(e,t,n){"use strict";var r=e("events").EventEmitter,a=e("../registry"),i=e("../lib"),o=e("./helpers"),s=e("./cloneplot"),l=e("./tosvg"),u=e("./svgtoimg");t.exports=function(e,t){var n=new r,c=s(e,{format:"png"}),f=c.gd;f.style.position="absolute",f.style.left="-5000px",document.body.appendChild(f);var d=o.getRedrawFunc(f);return a.call("plot",f,c.data,c.layout,c.config).then(d).then(function(){var e=o.getDelay(f._fullLayout);setTimeout(function(){var e=l(f),r=document.createElement("canvas");r.id=i.randstr(),(n=u({format:t.format,width:f._fullLayout.width,height:f._fullLayout.height,canvas:r,emitter:n,svg:e})).clean=function(){f&&document.body.removeChild(f)}},e)}).catch(function(e){n.emit("error",e)}),n}},{"../lib":696,"../registry":827,"./cloneplot":828,"./helpers":831,"./svgtoimg":833,"./tosvg":835,events:92}],835:[function(e,t,n){"use strict";var r=e("d3"),a=e("../lib"),i=e("../components/drawing"),o=e("../components/color"),s=e("../constants/xmlns_namespaces"),l=/"/g,u=new RegExp('("TOBESTRIPPED)|(TOBESTRIPPED")',"g");t.exports=function(e,t,n){var c,f=e._fullLayout,d=f._paper,p=f._toppaper,h=f.width,m=f.height;d.insert("rect",":first-child").call(i.setRect,0,0,h,m).call(o.fill,f.paper_bgcolor);var v=f._basePlotModules||[];for(c=0;c<v.length;c++){var g=v[c];g.toSVG&&g.toSVG(e)}if(p){var y=p.node().childNodes,b=Array.prototype.slice.call(y);for(c=0;c<b.length;c++){var x=b[c];x.childNodes.length&&d.node().appendChild(x)}}f._draggers&&f._draggers.remove(),d.node().style.background="",d.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var e=r.select(this);if("hidden"!==this.style.visibility&&"none"!==this.style.display){e.style({visibility:null,display:null});var t=this.style.fontFamily;t&&-1!==t.indexOf('"')&&e.style("font-family",t.replace(l,"TOBESTRIPPED"))}else e.remove()}),d.selectAll(".point, .scatterpts, .legendfill>path, .legendlines>path, .cbfill").each(function(){var e=r.select(this),t=this.style.fill;t&&-1!==t.indexOf("url(")&&e.style("fill",t.replace(l,"TOBESTRIPPED"));var n=this.style.stroke;n&&-1!==n.indexOf("url(")&&e.style("stroke",n.replace(l,"TOBESTRIPPED"))}),"pdf"!==t&&"eps"!==t||d.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),d.node().setAttributeNS(s.xmlns,"xmlns",s.svg),d.node().setAttributeNS(s.xmlns,"xmlns:xlink",s.xlink),"svg"===t&&n&&(d.attr("width",n*h),d.attr("height",n*m),d.attr("viewBox","0 0 "+h+" "+m));var _=(new window.XMLSerializer).serializeToString(d.node());return _=(_=function(e){return e.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")}(_=function(e){var t=r.select("body").append("div").style({display:"none"}).html(""),n=e.replace(/(&[^;]*;)/gi,function(e){return"&lt;"===e?"&#60;":"&rt;"===e?"&#62;":-1!==e.indexOf("<")||-1!==e.indexOf(">")?"":t.html(e).text()});return t.remove(),n}(_))).replace(u,"'"),a.isIE()&&(_=(_=(_=_.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"')),_}},{"../components/color":570,"../components/drawing":595,"../constants/xmlns_namespaces":674,"../lib":696,d3:148}],836:[function(e,t,n){"use strict";var r=e("../../lib").mergeArray;t.exports=function(e,t){for(var n=0;n<e.length;n++)e[n].i=n;r(t.text,e,"tx"),r(t.hovertext,e,"htx");var a=t.marker;if(a){r(a.opacity,e,"mo"),r(a.color,e,"mc");var i=a.line;i&&(r(i.color,e,"mlc"),r(i.width,e,"mlw"))}}},{"../../lib":696}],837:[function(e,t,n){"use strict";var r=e("../scatter/attributes"),a=e("../../components/colorscale/attributes"),i=e("../../components/colorbar/attributes"),o=e("../../plots/font_attributes"),s=e("../../lib/extend").extendFlat,l=o({editType:"calc",arrayOk:!0,colorEditType:"style"}),u=r.marker,c=u.line,f=s({},c.width,{dflt:0}),d=s({width:f,editType:"calc"},a("marker.line")),p=s({line:d,editType:"calc"},a("marker"),{colorbar:i,opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"}});t.exports={x:r.x,x0:r.x0,dx:r.dx,y:r.y,y0:r.y0,dy:r.dy,text:r.text,hovertext:r.hovertext,textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"none",arrayOk:!0,editType:"calc"},textfont:s({},l,{}),insidetextfont:s({},l,{}),outsidetextfont:s({},l,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:s({},r.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:p,selected:{marker:{opacity:r.selected.marker.opacity,color:r.selected.marker.color,editType:"style"},textfont:r.selected.textfont,editType:"style"},unselected:{marker:{opacity:r.unselected.marker.opacity,color:r.unselected.marker.color,editType:"style"},textfont:r.unselected.textfont,editType:"style"},r:r.r,t:r.t,_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},{"../../components/colorbar/attributes":571,"../../components/colorscale/attributes":577,"../../lib/extend":685,"../../plots/font_attributes":771,"../scatter/attributes":1043}],838:[function(e,t,n){"use strict";var r=e("../../plots/cartesian/axes"),a=e("../../components/colorscale/has_colorscale"),i=e("../../components/colorscale/calc"),o=e("./arrays_to_calcdata"),s=e("../scatter/calc_selection");t.exports=function(e,t){var n,l,u=r.getFromId(e,t.xaxis||"x"),c=r.getFromId(e,t.yaxis||"y");"h"===t.orientation?(n=u.makeCalcdata(t,"x"),l=c.makeCalcdata(t,"y")):(n=c.makeCalcdata(t,"y"),l=u.makeCalcdata(t,"x"));for(var f=Math.min(l.length,n.length),d=new Array(f),p=0;p<f;p++)d[p]={p:l[p],s:n[p]},t.ids&&(d[p].id=String(t.ids[p]));return a(t,"marker")&&i(t,t.marker.color,"marker","c"),a(t,"marker.line")&&i(t,t.marker.line.color,"marker.line","c"),o(d,t),s(d,t),d}},{"../../components/colorscale/calc":578,"../../components/colorscale/has_colorscale":584,"../../plots/cartesian/axes":744,"../scatter/calc_selection":1045,"./arrays_to_calcdata":836}],839:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),a=e("../../lib").isArrayOrTypedArray,i=e("../../constants/numerical").BADNUM,o=e("../../registry"),s=e("../../plots/cartesian/axes"),l=e("./sieve.js");function u(e,t,n,o){if(o.length){var u,_,w,T,k=e._fullLayout.barmode,C="overlay"===k,E="group"===k;if(function(e,t,n,i){var o,s;for(o=0;o<i.length;o++){var l,u=i[o],c=u[0].trace,f=c.base,d="h"===c.orientation?c.xcalendar:c.ycalendar;if(a(f)){for(s=0;s<Math.min(f.length,u.length);s++)l=n.d2c(f[s],0,d),r(l)?(u[s].b=+l,u[s].hasB=1):u[s].b=0;for(;s<u.length;s++)u[s].b=0}else{l=n.d2c(f,0,d);var p=r(l);for(l=p?l:0,s=0;s<u.length;s++)u[s].b=l,p&&(u[s].hasB=1)}}}(0,0,n,o),C)c(e,t,n,o);else if(E){for(u=[],_=[],w=0;w<o.length;w++)void 0===(T=o[w])[0].trace.offset?_.push(T):u.push(T);_.length&&function(e,t,n,r){var a=e._fullLayout.barnorm,i=new l(r,!1,!a);(function(e,t,n){var r,a,i,o,s=e._fullLayout,l=s.bargap,u=s.bargroupgap||0,c=n.positions,f=n.distinctPositions,m=n.minDiff,v=n.traces,g=c.length!==f.length,y=v.length,b=m*(1-l),x=g?b/y:b,_=x*(1-u);for(r=0;r<y;r++){a=v[r],i=a[0];var w=g?((2*r+1-y)*x-_)/2:-_/2;(o=i.t).barwidth=_,o.poffset=w,o.bargroupwidth=b,o.bardelta=m}n.binWidth=v[0][0].t.barwidth/100,d(n),p(0,t,n),h(0,t,n,g)})(e,t,i),a?(g(0,0,i),y(e,n,i)):v(0,n,i)}(e,t,n,_),u.length&&c(e,t,n,u)}else{for(u=[],_=[],w=0;w<o.length;w++)void 0===(T=o[w])[0].trace.base?_.push(T):u.push(T);_.length&&function(e,t,n,a){var o=e._fullLayout.barmode,u="stack"===o,c="relative"===o,d=e._fullLayout.barnorm,p=new l(a,c,!(d||u||c));f(e,t,p),function(e,t,n){var a,o,l,u,c=e._fullLayout.barnorm,f=b(t),d=n.traces,p=[null,null];for(a=0;a<d.length;a++)for(o=d[a],l=0;l<o.length;l++)if((u=o[l]).s!==i){var h=n.put(u.p,u.b+u.s),v=h+u.b+u.s;u.b=h,u[f]=v,c||(r(t.c2l(v))&&m(p,v),u.hasB&&r(t.c2l(h))&&m(p,h))}if(!c){var g=s.findExtremes(t,p,{tozero:!0,padded:!0});x(d,t,g)}}(e,n,p);for(var h=0;h<a.length;h++)for(var v=a[h],g=0;g<v.length;g++){var _=v[g];if(_.s!==i){var w=_.b+_.s===p.get(_.p,_.s);w&&(_._outmost=!0)}}d&&y(e,n,p)}(e,t,n,_),u.length&&c(e,t,n,u)}!function(e,t){var n,a,i,o=t._id.charAt(0),s={},l=1/0,u=-1/0;for(n=0;n<e.length;n++)for(i=e[n],a=0;a<i.length;a++){var c=i[a].p;r(c)&&(l=Math.min(l,c),u=Math.max(u,c))}var f,d,p=1e4/(u-l),h=s.round=function(e){return String(Math.round(p*(e-l)))};for(n=0;n<e.length;n++)for((i=e[n])[0].t.extents=s,f=i[0].t.poffset,d=Array.isArray(f),a=0;a<i.length;a++){var m=i[a],v=m[o]-m.w/2;if(r(v)){var g=m[o]+m.w/2,y=h(m.p);s[y]?s[y]=[Math.min(v,s[y][0]),Math.max(g,s[y][1])]:s[y]=[v,g]}m.p0=m.p+(d?f[a]:f),m.p1=m.p0+m.w,m.s0=m.b,m.s1=m.s0+m.s}}(o,t)}}function c(e,t,n,r){for(var a=e._fullLayout.barnorm,i=!a,o=0;o<r.length;o++){var s=r[o],u=new l([s],!1,i);f(e,t,u),a?(g(0,0,u),y(e,n,u)):v(0,n,u)}}function f(e,t,n){var r,a,i,o,s=e._fullLayout,l=s.bargap,u=s.bargroupgap||0,c=n.minDiff,f=n.traces,m=c*(1-l),v=m,g=v*(1-u),y=-g/2;for(r=0;r<f.length;r++)a=f[r],i=a[0],(o=i.t).barwidth=g,o.poffset=y,o.bargroupwidth=m,o.bardelta=c;n.binWidth=f[0][0].t.barwidth/100,d(n),p(0,t,n),h(0,t,n)}function d(e){var t,n,i,o,s,l,u=e.traces;for(t=0;t<u.length;t++){n=u[t],i=n[0],o=i.trace,l=i.t;var c,f=o._offset||o.offset,d=l.poffset;if(a(f)){for(c=Array.prototype.slice.call(f,0,n.length),s=0;s<c.length;s++)r(c[s])||(c[s]=d);for(s=c.length;s<n.length;s++)c.push(d);l.poffset=c}else void 0!==f&&(l.poffset=f);var p=o._width||o.width,h=l.barwidth;if(a(p)){var m=Array.prototype.slice.call(p,0,n.length);for(s=0;s<m.length;s++)r(m[s])||(m[s]=h);for(s=m.length;s<n.length;s++)m.push(h);if(l.barwidth=m,void 0===f){for(c=[],s=0;s<n.length;s++)c.push(d+(h-m[s])/2);l.poffset=c}}else void 0!==p&&(l.barwidth=p,void 0===f&&(l.poffset=d+(h-p)/2))}}function p(e,t,n){for(var r=n.traces,a=b(t),i=0;i<r.length;i++)for(var o=r[i],s=o[0].t,l=s.poffset,u=Array.isArray(l),c=s.barwidth,f=Array.isArray(c),d=0;d<o.length;d++){var p=o[d],h=p.w=f?c[d]:c;p[a]=p.p+(u?l[d]:l)+h/2}}function h(e,t,n,r){var a=n.traces,i=n.distinctPositions,o=i[0],l=n.minDiff,u=l/2;s.minDtick(t,l,o,r);for(var c=Math.min.apply(Math,i)-u,f=Math.max.apply(Math,i)+u,d=0;d<a.length;d++){var p=a[d],h=p[0],m=h.trace;if(void 0!==m.width||void 0!==m.offset)for(var v=h.t,g=v.poffset,y=v.barwidth,b=Array.isArray(g),_=Array.isArray(y),w=0;w<p.length;w++){var T=p[w],k=b?g[w]:g,C=_?y[w]:y,E=T.p,M=E+k,A=M+C;c=Math.min(c,M),f=Math.max(f,A)}}var S=s.findExtremes(t,[c,f],{padded:!1});x(a,t,S)}function m(e,t){r(e[0])?e[0]=Math.min(e[0],t):e[0]=t,r(e[1])?e[1]=Math.max(e[1],t):e[1]=t}function v(e,t,n){for(var a=n.traces,i=b(t),o=[null,null],l=0;l<a.length;l++)for(var u=a[l],c=0;c<u.length;c++){var f=u[c],d=f.b,p=d+f.s;f[i]=p,r(t.c2l(p))&&m(o,p),f.hasB&&r(t.c2l(d))&&m(o,d)}var h=s.findExtremes(t,o,{tozero:!0,padded:!0});x(a,t,h)}function g(e,t,n){for(var r=n.traces,a=0;a<r.length;a++)for(var o=r[a],s=0;s<o.length;s++){var l=o[s];l.s!==i&&n.put(l.p,l.b+l.s)}}function y(e,t,n){var a=n.traces,o=b(t),l="fraction"===e._fullLayout.barnorm?1:100,u=l/1e9,c=t.l2c(t.c2l(0)),f="stack"===e._fullLayout.barmode?l:c,d=[c,f],p=!1;function h(e){r(t.c2l(e))&&(e<c-u||e>f+u||!r(c))&&(p=!0,m(d,e))}for(var v=0;v<a.length;v++)for(var g=a[v],y=0;y<g.length;y++){var _=g[y];if(_.s!==i){var w=Math.abs(l/n.get(_.p,_.s));_.b*=w,_.s*=w;var T=_.b,k=T+_.s;_[o]=k,h(k),_.hasB&&h(T)}}var C=s.findExtremes(t,d,{tozero:!0,padded:p});x(a,t,C)}function b(e){return e._id.charAt(0)}function x(e,t,n){for(var r=0;r<e.length;r++)e[r][0].trace._extremes[t._id]=n}t.exports={crossTraceCalc:function(e,t){var n,r=t.xaxis,a=t.yaxis,i=e._fullData,s=e.calcdata,l=[],c=[];for(n=0;n<i.length;n++){var f=i[n];!0===f.visible&&o.traceIs(f,"bar")&&f.xaxis===r._id&&f.yaxis===a._id&&("h"===f.orientation?l.push(s[n]):c.push(s[n]))}u(e,r,a,c),u(e,a,r,l)},setGroupPositions:u}},{"../../constants/numerical":673,"../../lib":696,"../../plots/cartesian/axes":744,"../../registry":827,"./sieve.js":848,"fast-isnumeric":214}],840:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("../../components/color"),i=e("../../registry"),o=e("../scatter/xy_defaults"),s=e("../bar/style_defaults"),l=e("./attributes");t.exports=function(e,t,n,u){function c(n,a){return r.coerce(e,t,l,n,a)}var f=r.coerceFont,d=o(e,t,u,c);if(d){c("orientation",t.x&&!t.y?"h":"v"),c("base"),c("offset"),c("width"),c("text"),c("hovertext");var p=c("textposition"),h=Array.isArray(p)||"auto"===p,m=h||"inside"===p,v=h||"outside"===p;if(m||v){var g=f(c,"textfont",u.font),y=r.extendFlat({},g),b=e.textfont&&e.textfont.color,x=!b;x&&delete y.color,f(c,"insidetextfont",y),v&&f(c,"outsidetextfont",g),c("constraintext"),c("selected.textfont.color"),c("unselected.textfont.color"),c("cliponaxis")}s(e,t,c,n,u);var _=i.getComponentMethod("errorbars","supplyDefaults");_(e,t,a.defaultLine,{axis:"y"}),_(e,t,a.defaultLine,{axis:"x",inherit:"y"}),r.coerceSelectionMarkerOpacity(t,c)}else t.visible=!1}},{"../../components/color":570,"../../lib":696,"../../registry":827,"../bar/style_defaults":850,"../scatter/xy_defaults":1069,"./attributes":837}],841:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),a=e("tinycolor2");n.coerceString=function(e,t,n){if("string"==typeof t){if(t||!e.noBlank)return t}else if("number"==typeof t&&!e.strict)return String(t);return void 0!==n?n:e.dflt},n.coerceNumber=function(e,t,n){if(r(t)){t=+t;var a=e.min,i=e.max,o=void 0!==a&&t<a||void 0!==i&&t>i;if(!o)return t}return void 0!==n?n:e.dflt},n.coerceColor=function(e,t,n){return a(t).isValid()?t:void 0!==n?n:e.dflt},n.coerceEnumerated=function(e,t,n){return e.coerceNumber&&(t=+t),-1!==e.values.indexOf(t)?t:void 0!==n?n:e.dflt},n.getValue=function(e,t){var n;return Array.isArray(e)?t<e.length&&(n=e[t]):n=e,n}},{"fast-isnumeric":214,tinycolor2:514}],842:[function(e,t,n){"use strict";var r=e("../../components/fx"),a=e("../../registry"),i=e("../../components/color"),o=e("../scatter/fill_hover_text");function s(e,t){var n=t.mcc||e.marker.color,r=t.mlcc||e.marker.line.color,a=t.mlw||e.marker.line.width;return i.opacity(n)?n:i.opacity(r)&&a?r:void 0}t.exports={hoverPoints:function(e,t,n,i){var l,u,c,f,d,p,h,m=e.cd,v=m[0].trace,g=m[0].t,y="closest"===i,b=e.maxHoverDistance,x=e.maxSpikeDistance;function _(e){return e[c]-e.w/2}function w(e){return e[c]+e.w/2}var T=y?_:function(e){return Math.min(_(e),e.p-g.bardelta/2)},k=y?w:function(e){return Math.max(w(e),e.p+g.bardelta/2)};function C(e,t){return r.inbox(e-l,t-l,b+Math.min(1,Math.abs(t-e)/h)-1)}function E(e){return C(T(e),k(e))}function M(e){return r.inbox(e.b-u,e[f]-u,b+(e[f]-u)/(e[f]-e.b)-1)}"h"===v.orientation?(l=n,u=t,c="y",f="x",d=M,p=E):(l=t,u=n,c="x",f="y",p=M,d=E);var A=e[c+"a"],S=e[f+"a"];h=Math.abs(A.r2c(A.range[1])-A.r2c(A.range[0]));var O=r.getDistanceFunction(i,d,p,function(e){return(d(e)+p(e))/2});if(r.getClosest(m,O,e),!1!==e.index){y||(T=function(e){return Math.min(_(e),e.p-g.bargroupwidth/2)},k=function(e){return Math.max(w(e),e.p+g.bargroupwidth/2)});var P=e.index,R=m[P],L=v.base?R.b+R.s:R.s;e[f+"0"]=e[f+"1"]=S.c2p(R[f],!0),e[f+"LabelVal"]=L;var D=g.extents[g.extents.round(R.p)];return e[c+"0"]=A.c2p(y?T(R):D[0],!0),e[c+"1"]=A.c2p(y?k(R):D[1],!0),e[c+"LabelVal"]=R.p,e.spikeDistance=(M(R)+function(e){return C(_(e),w(e))}(R))/2+x-b,e[c+"Spike"]=A.c2p(R.p,!0),e.color=s(v,R),o(R,v,e),a.getComponentMethod("errorbars","hoverInfo")(R,v,e),[e]}},getTraceColor:s}},{"../../components/color":570,"../../components/fx":612,"../../registry":827,"../scatter/fill_hover_text":1051}],843:[function(e,t,n){"use strict";var r={};r.attributes=e("./attributes"),r.layoutAttributes=e("./layout_attributes"),r.supplyDefaults=e("./defaults"),r.supplyLayoutDefaults=e("./layout_defaults"),r.calc=e("./calc"),r.crossTraceCalc=e("./cross_trace_calc").crossTraceCalc,r.colorbar=e("../scatter/marker_colorbar"),r.arraysToCalcdata=e("./arrays_to_calcdata"),r.plot=e("./plot"),r.style=e("./style").style,r.styleOnSelect=e("./style").styleOnSelect,r.hoverPoints=e("./hover").hoverPoints,r.selectPoints=e("./select"),r.moduleType="trace",r.name="bar",r.basePlotModule=e("../../plots/cartesian"),r.categories=["cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],r.meta={},t.exports=r},{"../../plots/cartesian":756,"../scatter/marker_colorbar":1061,"./arrays_to_calcdata":836,"./attributes":837,"./calc":838,"./cross_trace_calc":839,"./defaults":840,"./hover":842,"./layout_attributes":844,"./layout_defaults":845,"./plot":846,"./select":847,"./style":849}],844:[function(e,t,n){"use strict";t.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],845:[function(e,t,n){"use strict";var r=e("../../registry"),a=e("../../plots/cartesian/axes"),i=e("../../lib"),o=e("./layout_attributes");t.exports=function(e,t,n){function s(n,r){return i.coerce(e,t,o,n,r)}for(var l=!1,u=!1,c=!1,f={},d=0;d<n.length;d++){var p=n[d];if(r.traceIs(p,"bar")&&p.visible){if(l=!0,"overlay"!==e.barmode&&"stack"!==e.barmode){var h=p.xaxis+p.yaxis;f[h]&&(c=!0),f[h]=!0}if(p.visible&&"histogram"===p.type){var m=a.getFromId({_fullLayout:t},p["v"===p.orientation?"xaxis":"yaxis"]);"category"!==m.type&&(u=!0)}}}if(l){var v=s("barmode");"overlay"!==v&&s("barnorm"),s("bargap",u&&!c?0:.2),s("bargroupgap")}}},{"../../lib":696,"../../plots/cartesian/axes":744,"../../registry":827,"./layout_attributes":844}],846:[function(e,t,n){"use strict";var r=e("d3"),a=e("fast-isnumeric"),i=e("../../lib"),o=e("../../lib/svg_text_utils"),s=e("../../components/color"),l=e("../../components/drawing"),u=e("../../registry"),c=e("./attributes"),f=c.text,d=c.textposition,p=e("./helpers"),h=e("./style"),m=3;function v(e,t,n,r,a,i){var o;a<1?o="scale("+a+") ":(a=1,o="");var s=n-a*e,l=r-a*t;return"translate("+s+" "+l+")"+o+(i?"rotate("+i+" "+e+" "+t+") ":"")}t.exports=function(e,t,n,c){var g=t.xaxis,y=t.yaxis,b=e._fullLayout,x=i.makeTraceGroups(c,n,"trace bars").each(function(n){var u=r.select(this),c=n[0],x=c.trace;t.isRangePlot||(c.node3=u);var _=i.ensureSingle(u,"g","points"),w=_.selectAll("g.point").data(i.identity);w.enter().append("g").classed("point",!0),w.exit().remove(),w.each(function(u,c){var _,w,T,k,C=r.select(this);if("h"===x.orientation?(T=y.c2p(u.p0,!0),k=y.c2p(u.p1,!0),_=g.c2p(u.s0,!0),w=g.c2p(u.s1,!0),u.ct=[w,(T+k)/2]):(_=g.c2p(u.p0,!0),w=g.c2p(u.p1,!0),T=y.c2p(u.s0,!0),k=y.c2p(u.s1,!0),u.ct=[(_+w)/2,k]),a(_)&&a(w)&&a(T)&&a(k)&&_!==w&&T!==k){var E=(u.mlw+1||x.marker.line.width+1||(u.trace?u.trace.marker.line.width:0)+1)-1,M=r.round(E/2%1,2);if(!e._context.staticPlot){var A=s.opacity(u.mc||x.marker.color),S=A<1||E>.01?O:function(e,t){return Math.abs(e-t)>=2?O(e):e>t?Math.ceil(e):Math.floor(e)};_=S(_,w),w=S(w,_),T=S(T,k),k=S(k,T)}i.ensureSingle(C,"path").style("vector-effect","non-scaling-stroke").attr("d","M"+_+","+T+"V"+k+"H"+w+"V"+T+"Z").call(l.setClipUrl,t.layerClipId),function(e,t,n,r,a,s,u,c){var g;function y(t,n,r){var a=i.ensureSingle(t,"text").text(n).attr({class:"bartext bartext-"+g,transform:"","text-anchor":"middle","data-notex":1}).call(l.font,r).call(o.convertToTspans,e);return a}var b=n[0].trace,x=b.orientation,_=function(e,t){var n=p.getValue(e.text,t);return p.coerceString(f,n)}(b,r);if(g=function(e,t){var n=p.getValue(e.textposition,t);return p.coerceEnumerated(d,n)}(b,r),_&&"none"!==g){var w,T,k,C,E,M,A=e._fullLayout.font,S=h.getBarColor(n[r],b),O=h.getInsideTextFont(b,r,A,S),P=h.getOutsideTextFont(b,r,A),R=e._fullLayout.barmode,L="stack"===R||"relative"===R,D=n[r],I=!L||D._outmost,z=Math.abs(s-a)-2*m,j=Math.abs(c-u)-2*m;if("outside"===g&&(I||D.hasB||(g="inside")),"auto"===g)if(I){g="inside",w=y(t,_,O),T=l.bBox(w.node()),k=T.width,C=T.height;var N=k>0&&C>0,F=k<=z&&C<=j,B=k<=j&&C<=z,V="h"===x?z>=k*(j/C):j>=C*(z/k);N&&(F||B||V)?g="inside":(g="outside",w.remove(),w=null)}else g="inside";!w&&(w=y(t,_,"outside"===g?P:O),T=l.bBox(w.node()),k=T.width,C=T.height,k<=0||C<=0)?w.remove():("outside"===g?(M="both"===b.constraintext||"outside"===b.constraintext,E=function(e,t,n,r,a,i,o){var s,l="h"===i?Math.abs(r-n):Math.abs(t-e);l>2*m&&(s=m);var u=1;o&&(u="h"===i?Math.min(1,l/a.height):Math.min(1,l/a.width));var c,f,d,p,h=(a.left+a.right)/2,g=(a.top+a.bottom)/2;return c=u*a.width,f=u*a.height,"h"===i?t<e?(d=t-s-c/2,p=(n+r)/2):(d=t+s+c/2,p=(n+r)/2):r>n?(d=(e+t)/2,p=r+s+f/2):(d=(e+t)/2,p=r-s-f/2),v(h,g,d,p,u,!1)}(a,s,u,c,T,x,M)):(M="both"===b.constraintext||"inside"===b.constraintext,E=function(e,t,n,r,a,i,o){var s,l,u,c,f,d,p,h=a.width,g=a.height,y=(a.left+a.right)/2,b=(a.top+a.bottom)/2,x=Math.abs(t-e),_=Math.abs(r-n);return x>2*m&&_>2*m?(x-=2*(f=m),_-=2*f):f=0,h<=x&&g<=_?(d=!1,p=1):h<=_&&g<=x?(d=!0,p=1):h<g==x<_?(d=!1,p=o?Math.min(x/h,_/g):1):(d=!0,p=o?Math.min(_/h,x/g):1),d&&(d=90),d?(s=p*g,l=p*h):(s=p*h,l=p*g),"h"===i?t<e?(u=t+f+s/2,c=(n+r)/2):(u=t-f-s/2,c=(n+r)/2):r>n?(u=(e+t)/2,c=r-f-l/2):(u=(e+t)/2,c=r+f+l/2),v(y,b,u,c,p,d)}(a,s,u,c,T,x,M)),w.attr("transform",E))}else t.select("text").remove()}(e,C,n,c,_,w,T,k),t.layerClipId&&l.hideOutsideRangePoint(u,C.select("text"),g,y,x.xcalendar,x.ycalendar)}else C.remove();function O(e){return 0===b.bargap&&0===b.bargroupgap?r.round(Math.round(e)-M,2):e}});var T=!1===c.trace.cliponaxis;l.setClipUrl(u,T?null:t.layerClipId)});u.getComponentMethod("errorbars","plot")(x,t)}},{"../../components/color":570,"../../components/drawing":595,"../../lib":696,"../../lib/svg_text_utils":720,"../../registry":827,"./attributes":837,"./helpers":841,"./style":849,d3:148,"fast-isnumeric":214}],847:[function(e,t,n){"use strict";t.exports=function(e,t){var n,r=e.cd,a=e.xaxis,i=e.yaxis,o=[];if(!1===t)for(n=0;n<r.length;n++)r[n].selected=0;else for(n=0;n<r.length;n++){var s=r[n];t.contains(s.ct,!1,n,e)?(o.push({pointNumber:n,x:a.c2d(s.x),y:i.c2d(s.y)}),s.selected=1):s.selected=0}return o}},{}],848:[function(e,t,n){"use strict";t.exports=i;var r=e("../../lib"),a=e("../../constants/numerical").BADNUM;function i(e,t,n){this.traces=e,this.separateNegativeValues=t,this.dontMergeOverlappingData=n;for(var i=1/0,o=[],s=0;s<e.length;s++){for(var l=e[s],u=0;u<l.length;u++){var c=l[u];c.p!==a&&o.push(c.p)}l[0]&&l[0].width1&&(i=Math.min(l[0].width1,i))}this.positions=o;var f=r.distinctVals(o);this.distinctPositions=f.vals,1===f.vals.length&&i!==1/0?this.minDiff=i:this.minDiff=Math.min(f.minDiff,i),this.binWidth=this.minDiff,this.bins={}}i.prototype.put=function(e,t){var n=this.getLabel(e,t),r=this.bins[n]||0;return this.bins[n]=r+t,r},i.prototype.get=function(e,t){var n=this.getLabel(e,t);return this.bins[n]||0},i.prototype.getLabel=function(e,t){var n=t<0&&this.separateNegativeValues?"v":"^",r=this.dontMergeOverlappingData?e:Math.round(e/this.binWidth);return n+r}},{"../../constants/numerical":673,"../../lib":696}],849:[function(e,t,n){"use strict";var r=e("d3"),a=e("../../components/color"),i=e("../../components/drawing"),o=e("../../lib"),s=e("../../registry"),l=e("./attributes"),u=l.textfont,c=l.insidetextfont,f=l.outsidetextfont,d=e("./helpers");function p(e,t,n){var a=e.selectAll("path"),o=e.selectAll("text");i.pointStyle(a,t,n),o.each(function(e){var a=r.select(this),o=m(a,e,t,n);i.font(a,o)})}function h(e,t,n){i.selectedPointStyle(e.selectAll("path"),t),function(e,t,n){e.each(function(e){var a,s=r.select(this);if(e.selected){a=o.extendFlat({},m(s,e,t,n));var l=t.selected.textfont&&t.selected.textfont.color;l&&(a.color=l),i.font(s,a)}else i.selectedTextStyle(s,t)})}(e.selectAll("text"),t,n)}function m(e,t,n,r){var a=r._fullLayout.font,i=n.textfont;if(e.classed("bartext-inside")){var o=x(t,n);i=g(n,t.i,a,o)}else e.classed("bartext-outside")&&(i=y(n,t.i,a));return i}function v(e,t,n){return b(u,e.textfont,t,n)}function g(e,t,n,r){var i=v(e,t,n),o=void 0===e._input.textfont||void 0===e._input.textfont.color||Array.isArray(e.textfont.color)&&void 0===e.textfont.color[t];return o&&(i={color:a.contrast(r),family:i.family,size:i.size}),b(c,e.insidetextfont,t,i)}function y(e,t,n){var r=v(e,t,n);return b(f,e.outsidetextfont,t,r)}function b(e,t,n,r){t=t||{};var a=d.getValue(t.family,n),i=d.getValue(t.size,n),o=d.getValue(t.color,n);return{family:d.coerceString(e.family,a,r.family),size:d.coerceNumber(e.size,i,r.size),color:d.coerceColor(e.color,o,r.color)}}function x(e,t){return e.mc||t.marker.color}t.exports={style:function(e,t){var n=t?t[0].node3:r.select(e).selectAll("g.trace.bars"),a=n.size(),i=e._fullLayout;n.style("opacity",function(e){return e[0].trace.opacity}).each(function(e){("stack"===i.barmode&&a>1||0===i.bargap&&0===i.bargroupgap&&!e[0].trace.marker.line.width)&&r.select(this).attr("shape-rendering","crispEdges")}),n.selectAll("g.points").each(function(t){var n=r.select(this),a=t[0].trace;p(n,a,e)}),s.getComponentMethod("errorbars","style")(n)},styleOnSelect:function(e,t){var n=t[0].node3,r=t[0].trace;r.selectedpoints?h(n,r,e):p(n,r,e)},getInsideTextFont:g,getOutsideTextFont:y,getBarColor:x}},{"../../components/color":570,"../../components/drawing":595,"../../lib":696,"../../registry":827,"./attributes":837,"./helpers":841,d3:148}],850:[function(e,t,n){"use strict";var r=e("../../components/color"),a=e("../../components/colorscale/has_colorscale"),i=e("../../components/colorscale/defaults");t.exports=function(e,t,n,o,s){n("marker.color",o),a(e,"marker")&&i(e,t,s,n,{prefix:"marker.",cLetter:"c"}),n("marker.line.color",r.defaultLine),a(e,"marker.line")&&i(e,t,s,n,{prefix:"marker.line.",cLetter:"c"}),n("marker.line.width"),n("marker.opacity"),n("selected.marker.color"),n("unselected.marker.color")}},{"../../components/color":570,"../../components/colorscale/defaults":580,"../../components/colorscale/has_colorscale":584}],851:[function(e,t,n){"use strict";var r=e("../../lib/extend").extendFlat,a=e("../scatterpolar/attributes"),i=e("../bar/attributes");t.exports={r:a.r,theta:a.theta,r0:a.r0,dr:a.dr,theta0:a.theta0,dtheta:a.dtheta,thetaunit:a.thetaunit,base:r({},i.base,{}),offset:r({},i.offset,{}),width:r({},i.width,{}),text:r({},i.text,{}),marker:i.marker,hoverinfo:a.hoverinfo,selected:i.selected,unselected:i.unselected}},{"../../lib/extend":685,"../bar/attributes":837,"../scatterpolar/attributes":1105}],852:[function(e,t,n){"use strict";var r=e("../../components/colorscale/has_colorscale"),a=e("../../components/colorscale/calc"),i=e("../bar/arrays_to_calcdata"),o=e("../bar/cross_trace_calc").setGroupPositions,s=e("../scatter/calc_selection"),l=e("../../registry").traceIs,u=e("../../lib").extendFlat;t.exports={calc:function(e,t){for(var n=e._fullLayout,o=t.subplot,l=n[o].radialaxis,u=n[o].angularaxis,c=l.makeCalcdata(t,"r"),f=u.makeCalcdata(t,"theta"),d=t._length,p=new Array(d),h=c,m=f,v=0;v<d;v++)p[v]={p:m[v],s:h[v]};function g(e){var n=t[e];void 0!==n&&(t["_"+e]=Array.isArray(n)?u.makeCalcdata(t,e):u.d2c(n,t.thetaunit))}return"linear"===u.type&&(g("width"),g("offset")),r(t,"marker")&&a(t,t.marker.color,"marker","c"),r(t,"marker.line")&&a(t,t.marker.line.color,"marker.line","c"),i(p,t),s(p,t),p},crossTraceCalc:function(e,t,n){for(var r=e.calcdata,a=[],i=0;i<r.length;i++){var s=r[i],c=s[0].trace;!0===c.visible&&l(c,"bar")&&c.subplot===n&&a.push(s)}var f=u({},t.radialaxis,{_id:"x"}),d=t.angularaxis;o({_fullLayout:t},d,f,a)}}},{"../../components/colorscale/calc":578,"../../components/colorscale/has_colorscale":584,"../../lib":696,"../../registry":827,"../bar/arrays_to_calcdata":836,"../bar/cross_trace_calc":839,"../scatter/calc_selection":1045}],853:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("../scatterpolar/defaults").handleRThetaDefaults,i=e("../bar/style_defaults"),o=e("./attributes");t.exports=function(e,t,n,s){function l(n,a){return r.coerce(e,t,o,n,a)}var u=a(e,t,s,l);u?(l("thetaunit"),l("base"),l("offset"),l("width"),l("text"),i(e,t,l,n,s),r.coerceSelectionMarkerOpacity(t,l)):t.visible=!1}},{"../../lib":696,"../bar/style_defaults":850,"../scatterpolar/defaults":1107,"./attributes":851}],854:[function(e,t,n){"use strict";var r=e("../../components/fx"),a=e("../../lib"),i=e("../bar/hover").getTraceColor,o=e("../scatter/fill_hover_text"),s=e("../scatterpolar/hover").makeHoverPointText,l=e("../../plots/polar/helpers").isPtInsidePolygon;t.exports=function(e,t,n){var u=e.cd,c=u[0].trace,f=e.subplot,d=f.radialAxis,p=f.angularAxis,h=f.vangles,m=h?l:a.isPtInsideSector,v=e.maxHoverDistance,g=p._period||2*Math.PI,y=Math.abs(d.g2p(Math.sqrt(t*t+n*n))),b=Math.atan2(n,t);if(d.range[0]>d.range[1]&&(b+=Math.PI),r.getClosest(u,function(e){return m(y,b,[e.rp0,e.rp1],[e.thetag0,e.thetag1],h)?v+Math.min(1,Math.abs(e.thetag1-e.thetag0)/g)-1+(e.rp1-y)/(e.rp1-e.rp0)-1:1/0},e),!1!==e.index){var x=e.index,_=u[x];e.x0=e.x1=_.ct[0],e.y0=e.y1=_.ct[1];var w=a.extendFlat({},_,{r:_.s,theta:_.p});return o(_,c,e),s(w,c,f,e),e.color=i(c,_),e.xLabelVal=e.yLabelVal=void 0,_.s<0&&(e.idealAlign="left"),[e]}}},{"../../components/fx":612,"../../lib":696,"../../plots/polar/helpers":810,"../bar/hover":842,"../scatter/fill_hover_text":1051,"../scatterpolar/hover":1108}],855:[function(e,t,n){"use strict";t.exports={moduleType:"trace",name:"barpolar",basePlotModule:e("../../plots/polar"),categories:["polar","bar","showLegend"],attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults"),supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc").calc,crossTraceCalc:e("./calc").crossTraceCalc,plot:e("./plot"),colorbar:e("../scatter/marker_colorbar"),style:e("../bar/style").style,hoverPoints:e("./hover"),selectPoints:e("../bar/select"),meta:{}}},{"../../plots/polar":811,"../bar/select":847,"../bar/style":849,"../scatter/marker_colorbar":1061,"./attributes":851,"./calc":852,"./defaults":853,"./hover":854,"./layout_attributes":856,"./layout_defaults":857,"./plot":858}],856:[function(e,t,n){"use strict";t.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},{}],857:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("./layout_attributes");t.exports=function(e,t,n){var i,o={};function s(n,o){return r.coerce(e[i]||{},t[i],a,n,o)}for(var l=0;l<n.length;l++){var u=n[l];"barpolar"===u.type&&!0===u.visible&&(i=u.subplot,o[i]||(s("barmode"),s("bargap"),o[i]=1))}}},{"../../lib":696,"./layout_attributes":856}],858:[function(e,t,n){"use strict";var r=e("d3"),a=e("fast-isnumeric"),i=e("../../lib"),o=e("../../components/drawing"),s=e("../../plots/polar/helpers");t.exports=function(e,t,n){var l=t.xaxis,u=t.yaxis,c=t.radialAxis,f=t.angularAxis,d=function(e){var t=e.cxx,n=e.cyy;return e.vangles?function(r,a,o,l){var u,c;i.angleDelta(o,l)>0?(u=o,c=l):(u=l,c=o);var f=s.findEnclosingVertexAngles(u,e.vangles)[0],d=s.findEnclosingVertexAngles(c,e.vangles)[1],p=[f,(u+c)/2,d];return s.pathPolygonAnnulus(r,a,u,c,p,t,n)}:function(e,r,a,o){return i.pathAnnulus(e,r,a,o,t,n)}}(t),p=t.layers.frontplot.select("g.barlayer");i.makeTraceGroups(p,n,"trace bars").each(function(e){var n=e[0].node3=r.select(this),s=i.ensureSingle(n,"g","points"),p=s.selectAll("g.point").data(i.identity);p.enter().append("g").style("vector-effect","non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),p.exit().remove(),p.each(function(e){var t,n=r.select(this),o=e.rp0=c.c2p(e.s0),s=e.rp1=c.c2p(e.s1),p=e.thetag0=f.c2g(e.p0),h=e.thetag1=f.c2g(e.p1);if(a(o)&&a(s)&&a(p)&&a(h)&&o!==s&&p!==h){var m=c.c2g(e.s1),v=(p+h)/2;e.ct=[l.c2p(m*Math.cos(v)),u.c2p(m*Math.sin(v))],t=d(o,s,p,h)}else t="M0,0Z";i.ensureSingle(n,"path").attr("d",t)}),o.setClipUrl(n,t._hasClipOnAxisFalse?t.clipIds.forTraces:null)})}},{"../../components/drawing":595,"../../lib":696,"../../plots/polar/helpers":810,d3:148,"fast-isnumeric":214}],859:[function(e,t,n){"use strict";var r=e("../scatter/attributes"),a=e("../../components/color/attributes"),i=e("../../lib/extend").extendFlat,o=r.marker,s=o.line;t.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},name:{valType:"string",editType:"calc+clearAxisTypes"},text:i({},r.text,{}),whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],dflt:"outliers",editType:"calc"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],dflt:!1,editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:i({},o.symbol,{arrayOk:!1,editType:"plot"}),opacity:i({},o.opacity,{arrayOk:!1,dflt:1,editType:"style"}),size:i({},o.size,{arrayOk:!1,editType:"calc"}),color:i({},o.color,{arrayOk:!1,editType:"style"}),line:{color:i({},s.color,{arrayOk:!1,dflt:a.defaultLine,editType:"style"}),width:i({},s.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:r.fillcolor,selected:{marker:r.selected.marker,editType:"style"},unselected:{marker:r.unselected.marker,editType:"style"},hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},{"../../components/color/attributes":569,"../../lib/extend":685,"../scatter/attributes":1043}],860:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),a=e("../../lib"),i=a._,o=e("../../plots/cartesian/axes");function s(e,t,n){var r={text:"tx"};for(var a in r)Array.isArray(t[a])&&(e[r[a]]=t[a][n])}function l(e,t){return e.v-t.v}function u(e){return e.v}t.exports=function(e,t){var n,c,f,d,p,h=e._fullLayout,m=o.getFromId(e,t.xaxis||"x"),v=o.getFromId(e,t.yaxis||"y"),g=[],y="violin"===t.type?"_numViolins":"_numBoxes";"h"===t.orientation?(c=m,f="x",d=v,p="y"):(c=v,f="y",d=m,p="x");var b=c.makeCalcdata(t,f),x=function(e,t,n,i,o){if(t in e)return n.makeCalcdata(e,t);var s;s=t+"0"in e?e[t+"0"]:"name"in e&&("category"===n.type||r(e.name)&&-1!==["linear","log"].indexOf(n.type)||a.isDateTime(e.name)&&"date"===n.type)?e.name:o;var l=n.d2c(s,0,e[t+"calendar"]);return i.map(function(){return l})}(t,p,d,b,h[y]),_=a.distinctVals(x),w=_.vals,T=_.minDiff/2,k=function(e,t){for(var n=e.length,r=new Array(n+1),a=0;a<n;a++)r[a]=e[a]-t;return r[n]=e[n-1]+t,r}(w,T),C=w.length,E=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=[];return t}(C);for(n=0;n<t._length;n++){var M=b[n];if(r(M)){var A=a.findBin(x[n],k);if(A>=0&&A<C){var S={v:M,i:n};s(S,t,n),E[A].push(S)}}}for(n=0;n<C;n++)if(E[n].length>0){var O=E[n].sort(l),P=O.map(u),R=P.length,L={pos:w[n],pts:O};L.min=P[0],L.max=P[R-1],L.mean=a.mean(P,R),L.sd=a.stdev(P,R,L.mean),L.q1=a.interp(P,.25),L.med=a.interp(P,.5),L.q3=a.interp(P,.75),L.lf=Math.min(L.q1,P[Math.min(a.findBin(2.5*L.q1-1.5*L.q3,P,!0)+1,R-1)]),L.uf=Math.max(L.q3,P[Math.max(a.findBin(2.5*L.q3-1.5*L.q1,P),0)]),L.lo=4*L.q1-3*L.q3,L.uo=4*L.q3-3*L.q1;var D=L.q3-L.q1,I=1.57*D/Math.sqrt(R);L.ln=L.med-I,L.un=L.med+I,g.push(L)}!function(e,t){if(a.isArrayOrTypedArray(t.selectedpoints))for(var n=0;n<e.length;n++){for(var r=e[n].pts||[],i={},o=0;o<r.length;o++)i[r[o].i]=o;a.tagSelected(r,t,i)}}(g,t);var z=o.findExtremes(c,b,{padded:!0});return t._extremes[c._id]=z,g.length>0?(g[0].t={num:h[y],dPos:T,posLetter:p,valLetter:f,labels:{med:i(e,"median:"),min:i(e,"min:"),q1:i(e,"q1:"),q3:i(e,"q3:"),max:i(e,"max:"),mean:"sd"===t.boxmean?i(e,"mean  :"):i(e,"mean:"),lf:i(e,"lower fence:"),uf:i(e,"upper fence:")}},h[y]++,g):[{t:{empty:!0}}]}},{"../../lib":696,"../../plots/cartesian/axes":744,"fast-isnumeric":214}],861:[function(e,t,n){"use strict";var r=e("../../plots/cartesian/axes"),a=e("../../lib"),i=["v","h"];function o(e,t,n,i,o){var s,l,u,c=t.calcdata,f=t._fullLayout,d=[],p="violin"===e?"_numViolins":"_numBoxes";for(s=0;s<n.length;s++)for(u=c[n[s]],l=0;l<u.length;l++)d.push(u[l].pos);if(d.length){var h=a.distinctVals(d),m=h.minDiff/2;d.length===h.vals.length&&(f[p]=1),r.minDtick(i,h.minDiff,h.vals[0],!0);var v=f[e+"gap"],g=f[e+"groupgap"],y=(1-v)*(1-g)*m/f[p],b=r.findExtremes(i,h.vals,{vpadminus:m+o[0]*y,vpadplus:m+o[1]*y});for(s=0;s<n.length;s++)(u=c[n[s]])[0].t.dPos=m,u[0].trace._extremes[i._id]=b}}t.exports={crossTraceCalc:function(e,t){for(var n=e.calcdata,r=t.xaxis,a=t.yaxis,s=0;s<i.length;s++){for(var l=i[s],u="h"===l?a:r,c=[],f=0,d=0,p=0;p<n.length;p++){var h=n[p],m=h[0].t,v=h[0].trace;!0!==v.visible||"box"!==v.type&&"candlestick"!==v.type||m.empty||(v.orientation||"v")!==l||v.xaxis!==r._id||v.yaxis!==a._id||(c.push(p),v.boxpoints&&(f=Math.max(f,v.jitter-v.pointpos-1),d=Math.max(d,v.jitter+v.pointpos-1)))}o("box",e,c,u,[f,d])}},setPositionOffset:o}},{"../../lib":696,"../../plots/cartesian/axes":744}],862:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("../../registry"),i=e("../../components/color"),o=e("./attributes");function s(e,t,n,r){var i,o,s=n("y"),l=n("x"),u=l&&l.length;if(s&&s.length)i="v",u?o=Math.min(l.length,s.length):(n("x0"),o=s.length);else{if(!u)return void(t.visible=!1);i="h",n("y0"),o=l.length}t._length=o;var c=a.getComponentMethod("calendars","handleTraceDefaults");c(e,t,["x","y"],r),n("orientation",i)}function l(e,t,n,a){var i=a.prefix,s=r.coerce2(e,t,o,"marker.outliercolor"),l=n("marker.line.outliercolor"),u=n(i+"points",s||l?"suspectedoutliers":void 0);u?(n("jitter","all"===u?.3:0),n("pointpos","all"===u?-1.5:0),n("marker.symbol"),n("marker.opacity"),n("marker.size"),n("marker.color",t.line.color),n("marker.line.color"),n("marker.line.width"),"suspectedoutliers"===u&&(n("marker.line.outliercolor",t.marker.color),n("marker.line.outlierwidth")),n("selected.marker.color"),n("unselected.marker.color"),n("selected.marker.size"),n("unselected.marker.size"),n("text")):delete t.marker,n("hoveron"),r.coerceSelectionMarkerOpacity(t,n)}t.exports={supplyDefaults:function(e,t,n,a){function u(n,a){return r.coerce(e,t,o,n,a)}s(e,t,u,a),!1!==t.visible&&(u("line.color",(e.marker||{}).color||n),u("line.width"),u("fillcolor",i.addOpacity(t.line.color,.5)),u("whiskerwidth"),u("boxmean"),u("notched",void 0!==e.notchwidth)&&u("notchwidth"),l(e,t,u,{prefix:"box"}))},handleSampleDefaults:s,handlePointsDefaults:l}},{"../../components/color":570,"../../lib":696,"../../registry":827,"./attributes":859}],863:[function(e,t,n){"use strict";t.exports=function(e,t){return t.hoverOnBox&&(e.hoverOnBox=t.hoverOnBox),"xVal"in t&&(e.x=t.xVal),"yVal"in t&&(e.y=t.yVal),t.xa&&(e.xaxis=t.xa),t.ya&&(e.yaxis=t.ya),e}},{}],864:[function(e,t,n){"use strict";var r=e("../../plots/cartesian/axes"),a=e("../../lib"),i=e("../../components/fx"),o=e("../../components/color"),s=e("../scatter/fill_hover_text");function l(e,t,n,s){var l,u,c,f,d,p,h,m,v,g,y,b,x=e.cd,_=e.xa,w=e.ya,T=x[0].trace,k=x[0].t,C="violin"===T.type,E=[],M=k.bdPos,A=k.wHover,S=function(e){return e.pos+k.bPos-p};C&&"both"!==T.side?("positive"===T.side&&(v=function(e){var t=S(e);return i.inbox(t,t+A,g)}),"negative"===T.side&&(v=function(e){var t=S(e);return i.inbox(t-A,t,g)})):v=function(e){var t=S(e);return i.inbox(t-A,t+A,g)},b=C?function(e){return i.inbox(e.span[0]-d,e.span[1]-d,g)}:function(e){return i.inbox(e.min-d,e.max-d,g)},"h"===T.orientation?(d=t,p=n,h=b,m=v,l="y",c=w,u="x",f=_):(d=n,p=t,h=v,m=b,l="x",c=_,u="y",f=w);var O=Math.min(1,M/Math.abs(c.r2c(c.range[1])-c.r2c(c.range[0])));function P(e){return(h(e)+m(e))/2}g=e.maxHoverDistance-O,y=e.maxSpikeDistance-O;var R=i.getDistanceFunction(s,h,m,P);if(i.getClosest(x,R,e),!1===e.index)return[];var L=x[e.index],D=T.line.color,I=(T.marker||{}).color;o.opacity(D)&&T.line.width?e.color=D:o.opacity(I)&&T.boxpoints?e.color=I:e.color=T.fillcolor,e[l+"0"]=c.c2p(L.pos+k.bPos-M,!0),e[l+"1"]=c.c2p(L.pos+k.bPos+M,!0),e[l+"LabelVal"]=L.pos;var z=l+"Spike";e.spikeDistance=P(L)*y/g,e[z]=c.c2p(L.pos,!0);var j={},N=["med","min","q1","q3","max"];(T.boxmean||(T.meanline||{}).visible)&&N.push("mean"),(T.boxpoints||T.points)&&N.push("lf","uf");for(var F=0;F<N.length;F++){var B=N[F];if(B in L&&!(L[B]in j)){j[L[B]]=!0;var V=L[B],U=f.c2p(V,!0),G=a.extendFlat({},e);G[u+"0"]=G[u+"1"]=U,G[u+"LabelVal"]=V,G[u+"Label"]=(k.labels?k.labels[B]+" ":"")+r.hoverLabelText(f,V),G.hoverOnBox=!0,"mean"===B&&"sd"in L&&"sd"===T.boxmean&&(G[u+"err"]=L.sd),e.name="",e.spikeDistance=void 0,e[z]=void 0,E.push(G)}}return E}function u(e,t,n){for(var r,o,l,u=e.cd,c=e.xa,f=e.ya,d=u[0].trace,p=c.c2p(t),h=f.c2p(n),m=i.quadrature(function(e){var t=Math.max(3,e.mrc||0);return Math.max(Math.abs(c.c2p(e.x)-p)-t,1-3/t)},function(e){var t=Math.max(3,e.mrc||0);return Math.max(Math.abs(f.c2p(e.y)-h)-t,1-3/t)}),v=!1,g=0;g<u.length;g++){o=u[g];for(var y=0;y<(o.pts||[]).length;y++){l=o.pts[y];var b=m(l);b<=e.distance&&(e.distance=b,v=[g,y])}}if(!v)return!1;o=u[v[0]],l=o.pts[v[1]];var x=c.c2p(l.x,!0),_=f.c2p(l.y,!0),w=l.mrc||1;r=a.extendFlat({},e,{index:l.i,color:(d.marker||{}).color,name:d.name,x0:x-w,x1:x+w,xLabelVal:l.x,y0:_-w,y1:_+w,yLabelVal:l.y,spikeDistance:e.distance});var T="h"===d.orientation?"y":"x",k="h"===d.orientation?f:c;return r[T+"Spike"]=k.c2p(o.pos,!0),s(l,d,r),r}t.exports={hoverPoints:function(e,t,n,r){var a,i=e.cd[0].trace.hoveron,o=[];return-1!==i.indexOf("boxes")&&(o=o.concat(l(e,t,n,r))),-1!==i.indexOf("points")&&(a=u(e,t,n)),"closest"===r?a?[a]:o:a?(o.push(a),o):o},hoverOnBoxes:l,hoverOnPoints:u}},{"../../components/color":570,"../../components/fx":612,"../../lib":696,"../../plots/cartesian/axes":744,"../scatter/fill_hover_text":1051}],865:[function(e,t,n){"use strict";var r={};r.attributes=e("./attributes"),r.layoutAttributes=e("./layout_attributes"),r.supplyDefaults=e("./defaults").supplyDefaults,r.supplyLayoutDefaults=e("./layout_defaults").supplyLayoutDefaults,r.calc=e("./calc"),r.crossTraceCalc=e("./cross_trace_calc").crossTraceCalc,r.plot=e("./plot").plot,r.style=e("./style").style,r.styleOnSelect=e("./style").styleOnSelect,r.hoverPoints=e("./hover").hoverPoints,r.eventData=e("./event_data"),r.selectPoints=e("./select"),r.moduleType="trace",r.name="box",r.basePlotModule=e("../../plots/cartesian"),r.categories=["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],r.meta={},t.exports=r},{"../../plots/cartesian":756,"./attributes":859,"./calc":860,"./cross_trace_calc":861,"./defaults":862,"./event_data":863,"./hover":864,"./layout_attributes":866,"./layout_defaults":867,"./plot":868,"./select":869,"./style":870}],866:[function(e,t,n){"use strict";t.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},{}],867:[function(e,t,n){"use strict";var r=e("../../registry"),a=e("../../lib"),i=e("./layout_attributes");function o(e,t,n,a,i){for(var o,s=i+"Layout",l=0;l<n.length;l++)if(r.traceIs(n[l],s)){o=!0;break}o&&(a(i+"mode"),a(i+"gap"),a(i+"groupgap"))}t.exports={supplyLayoutDefaults:function(e,t,n){o(0,0,n,function(n,r){return a.coerce(e,t,i,n,r)},"box")},_supply:o}},{"../../lib":696,"../../registry":827,"./layout_attributes":866}],868:[function(e,t,n){"use strict";var r=e("d3"),a=e("../../lib"),i=e("../../components/drawing"),o=5,s=.01;function l(e,t,n,i){var o,s,l=t.pos,u=t.val,c=i.bPos,f=i.wdPos||0,d=i.bPosPxOffset||0,p=n.whiskerwidth||0,h=n.notched||!1,m=h?1-2*n.notchwidth:1;Array.isArray(i.bdPos)?(o=i.bdPos[0],s=i.bdPos[1]):(o=i.bdPos,s=i.bdPos);var v=e.selectAll("path.box").data("violin"!==n.type||n.box.visible?a.identity:[]);v.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","box"),v.exit().remove(),v.each(function(e){var t=e.pos,i=l.c2p(t+c,!0)+d,v=l.c2p(t+c-o,!0)+d,g=l.c2p(t+c+s,!0)+d,y=l.c2p(t+c-f,!0)+d,b=l.c2p(t+c+f,!0)+d,x=l.c2p(t+c-o*m,!0)+d,_=l.c2p(t+c+s*m,!0)+d,w=u.c2p(e.q1,!0),T=u.c2p(e.q3,!0),k=a.constrain(u.c2p(e.med,!0),Math.min(w,T)+1,Math.max(w,T)-1),C=void 0===e.lf||!1===n.boxpoints,E=u.c2p(C?e.min:e.lf,!0),M=u.c2p(C?e.max:e.uf,!0),A=u.c2p(e.ln,!0),S=u.c2p(e.un,!0);"h"===n.orientation?r.select(this).attr("d","M"+k+","+x+"V"+_+"M"+w+","+v+"V"+g+(h?"H"+A+"L"+k+","+_+"L"+S+","+g:"")+"H"+T+"V"+v+(h?"H"+S+"L"+k+","+x+"L"+A+","+v:"")+"ZM"+w+","+i+"H"+E+"M"+T+","+i+"H"+M+(0===p?"":"M"+E+","+y+"V"+b+"M"+M+","+y+"V"+b)):r.select(this).attr("d","M"+x+","+k+"H"+_+"M"+v+","+w+"H"+g+(h?"V"+A+"L"+_+","+k+"L"+g+","+S:"")+"V"+T+"H"+v+(h?"V"+S+"L"+x+","+k+"L"+v+","+A:"")+"ZM"+i+","+w+"V"+E+"M"+i+","+T+"V"+M+(0===p?"":"M"+y+","+E+"H"+b+"M"+y+","+M+"H"+b))})}function u(e,t,n,r){var l=t.x,u=t.y,c=r.bdPos,f=r.bPos,d=n.boxpoints||n.points;a.seedPseudoRandom();var p=e.selectAll("g.points").data(d?function(e){return e.forEach(function(e){e.t=r,e.trace=n}),e}:[]);p.enter().append("g").attr("class","points"),p.exit().remove();var h=p.selectAll("path").data(function(e){var t,r,i="all"===d?e.pts:e.pts.filter(function(t){return t.v<e.lf||t.v>e.uf}),l=Math.max((e.max-e.min)/10,e.q3-e.q1),u=1e-9*l,p=l*s,h=[],m=0;if(n.jitter){if(0===l)for(m=1,h=new Array(i.length),t=0;t<i.length;t++)h[t]=1;else for(t=0;t<i.length;t++){var v=Math.max(0,t-o),g=i[v].v,y=Math.min(i.length-1,t+o),b=i[y].v;"all"!==d&&(i[t].v<e.lf?b=Math.min(b,e.lf):g=Math.max(g,e.uf));var x=Math.sqrt(p*(y-v)/(b-g+u))||0;x=a.constrain(Math.abs(x),0,1),h.push(x),m=Math.max(x,m)}r=2*n.jitter/(m||1)}for(t=0;t<i.length;t++){var _=i[t],w=_.v,T=n.jitter?r*h[t]*(a.pseudoRandom()-.5):0,k=e.pos+f+c*(n.pointpos+T);"h"===n.orientation?(_.y=k,_.x=w):(_.x=k,_.y=w),"suspectedoutliers"===d&&w<e.uo&&w>e.lo&&(_.so=!0)}return i});h.enter().append("path").classed("point",!0),h.exit().remove(),h.call(i.translatePoints,l,u)}function c(e,t,n,i){var o,s,l=t.pos,u=t.val,c=i.bPos,f=i.bPosPxOffset||0,d=n.boxmean||(n.meanline||{}).visible;Array.isArray(i.bdPos)?(o=i.bdPos[0],s=i.bdPos[1]):(o=i.bdPos,s=i.bdPos);var p=e.selectAll("path.mean").data("box"===n.type&&n.boxmean||"violin"===n.type&&n.box.visible&&n.meanline.visible?a.identity:[]);p.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),p.exit().remove(),p.each(function(e){var t=l.c2p(e.pos+c,!0)+f,a=l.c2p(e.pos+c-o,!0)+f,i=l.c2p(e.pos+c+s,!0)+f,p=u.c2p(e.mean,!0),h=u.c2p(e.mean-e.sd,!0),m=u.c2p(e.mean+e.sd,!0);"h"===n.orientation?r.select(this).attr("d","M"+p+","+a+"V"+i+("sd"===d?"m0,0L"+h+","+t+"L"+p+","+a+"L"+m+","+t+"Z":"")):r.select(this).attr("d","M"+a+","+p+"H"+i+("sd"===d?"m0,0L"+t+","+h+"L"+a+","+p+"L"+t+","+m+"Z":""))})}t.exports={plot:function(e,t,n,i){var o=e._fullLayout,s=t.xaxis,f=t.yaxis,d=o._numBoxes,p=1-o.boxgap,h="group"===o.boxmode&&d>1;a.makeTraceGroups(i,n,"trace boxes").each(function(e){var n=r.select(this),a=e[0],i=a.t,m=a.trace;t.isRangePlot||(a.node3=n);var v,g,y=i.dPos*p*(1-o.boxgroupgap)/(h?d:1),b=h?2*i.dPos*((i.num+.5)/d-.5)*p:0,x=y*m.whiskerwidth;!0!==m.visible||i.empty?n.remove():("h"===m.orientation?(v=f,g=s):(v=s,g=f),i.bPos=b,i.bdPos=y,i.wdPos=x,i.wHover=i.dPos*(h?p/d:1),l(n,{pos:v,val:g},m,i),u(n,{x:s,y:f},m,i),c(n,{pos:v,val:g},m,i))})},plotBoxAndWhiskers:l,plotPoints:u,plotBoxMean:c}},{"../../components/drawing":595,"../../lib":696,d3:148}],869:[function(e,t,n){"use strict";t.exports=function(e,t){var n,r,a=e.cd,i=e.xaxis,o=e.yaxis,s=[];if(!1===t)for(n=0;n<a.length;n++)for(r=0;r<(a[n].pts||[]).length;r++)a[n].pts[r].selected=0;else for(n=0;n<a.length;n++)for(r=0;r<(a[n].pts||[]).length;r++){var l=a[n].pts[r],u=i.c2p(l.x),c=o.c2p(l.y);t.contains([u,c],null,l.i,e)?(s.push({pointNumber:l.i,x:i.c2d(l.x),y:o.c2d(l.y)}),l.selected=1):l.selected=0}return s}},{}],870:[function(e,t,n){"use strict";var r=e("d3"),a=e("../../components/color"),i=e("../../components/drawing");t.exports={style:function(e,t){var n=t?t[0].node3:r.select(e).selectAll("g.trace.boxes");n.style("opacity",function(e){return e[0].trace.opacity}),n.each(function(t){var n=r.select(this),o=t[0].trace,s=o.line.width;function l(e,t,n,r){e.style("stroke-width",t+"px").call(a.stroke,n).call(a.fill,r)}var u=n.selectAll("path.box");if("candlestick"===o.type)u.each(function(e){var t=r.select(this),n=o[e.dir];l(t,n.line.width,n.line.color,n.fillcolor),t.style("opacity",o.selectedpoints&&!e.selected?.3:1)});else{l(u,s,o.line.color,o.fillcolor),n.selectAll("path.mean").style({"stroke-width":s,"stroke-dasharray":2*s+"px,"+s+"px"}).call(a.stroke,o.line.color);var c=n.selectAll("path.point");i.pointStyle(c,o,e)}})},styleOnSelect:function(e,t){var n=t[0].node3,r=t[0].trace,a=n.selectAll("path.point");r.selectedpoints?i.selectedPointStyle(a,r):i.pointStyle(a,r,e)}}},{"../../components/color":570,"../../components/drawing":595,d3:148}],871:[function(e,t,n){"use strict";var r=e("../../lib").extendFlat,a=e("../ohlc/attributes"),i=e("../box/attributes");function o(e){return{line:{color:r({},i.line.color,{dflt:e}),width:i.line.width,editType:"style"},fillcolor:i.fillcolor,editType:"style"}}t.exports={x:a.x,open:a.open,high:a.high,low:a.low,close:a.close,line:{width:r({},i.line.width,{}),editType:"style"},increasing:o(a.increasing.line.color.dflt),decreasing:o(a.decreasing.line.color.dflt),text:a.text,whiskerwidth:r({},i.whiskerwidth,{dflt:0}),hoverlabel:a.hoverlabel}},{"../../lib":696,"../box/attributes":859,"../ohlc/attributes":991}],872:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("../../plots/cartesian/axes"),i=e("../ohlc/calc").calcCommon;function o(e,t,n,r){return{min:n,q1:Math.min(e,r),med:r,q3:Math.max(e,r),max:t}}t.exports=function(e,t){var n=e._fullLayout,s=a.getFromId(e,t.xaxis),l=a.getFromId(e,t.yaxis),u=s.makeCalcdata(t,"x"),c=i(e,t,u,l,o);return c.length?(r.extendFlat(c[0].t,{num:n._numBoxes,dPos:r.distinctVals(u).minDiff/2,posLetter:"x",valLetter:"y"}),n._numBoxes++,c):[{t:{empty:!0}}]}},{"../../lib":696,"../../plots/cartesian/axes":744,"../ohlc/calc":992}],873:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("../../components/color"),i=e("../ohlc/ohlc_defaults"),o=e("./attributes");function s(e,t,n,r){var i=n(r+".line.color");n(r+".line.width",t.line.width),n(r+".fillcolor",a.addOpacity(i,.5))}t.exports=function(e,t,n,a){function l(n,a){return r.coerce(e,t,o,n,a)}var u=i(e,t,l,a);u?(l("line.width"),s(0,t,l,"increasing"),s(0,t,l,"decreasing"),l("text"),l("whiskerwidth"),a._requestRangeslider[t.xaxis]=!0):t.visible=!1}},{"../../components/color":570,"../../lib":696,"../ohlc/ohlc_defaults":996,"./attributes":871}],874:[function(e,t,n){"use strict";t.exports={moduleType:"trace",name:"candlestick",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:e("./attributes"),layoutAttributes:e("../box/layout_attributes"),supplyLayoutDefaults:e("../box/layout_defaults").supplyLayoutDefaults,crossTraceCalc:e("../box/cross_trace_calc").crossTraceCalc,supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("../box/plot").plot,layerName:"boxlayer",style:e("../box/style").style,hoverPoints:e("../ohlc/hover").hoverPoints,selectPoints:e("../ohlc/select")}},{"../../plots/cartesian":756,"../box/cross_trace_calc":861,"../box/layout_attributes":866,"../box/layout_defaults":867,"../box/plot":868,"../box/style":870,"../ohlc/hover":994,"../ohlc/select":998,"./attributes":871,"./calc":872,"./defaults":873}],875:[function(e,t,n){"use strict";var r=e("./axis_defaults"),a=e("../../plot_api/plot_template");t.exports=function(e,t,n,i,o){var s=i("a");s||(i("da"),i("a0"));var l=i("b");l||(i("db"),i("b0")),function(e,t,n,i){["aaxis","baxis"].forEach(function(o){var s=o.charAt(0),l=e[o]||{},u=a.newContainer(t,o),c={tickfont:"x",id:s+"axis",letter:s,font:t.font,name:o,data:e[s],calendar:t.calendar,dfltColor:i,bgColor:n.paper_bgcolor,fullLayout:n};r(l,u,c),u._categories=u._categories||[],e[o]||"-"===l.type||(e[o]={type:l.type})})}(e,t,n,o)}},{"../../plot_api/plot_template":734,"./axis_defaults":880}],876:[function(e,t,n){"use strict";var r=e("../../lib").isArrayOrTypedArray;t.exports=function(e){return function e(t,n){if(!r(t)||n>=10)return null;for(var a=1/0,i=-1/0,o=t.length,s=0;s<o;s++){var l=t[s];if(r(l)){var u=e(l,n+1);u&&(a=Math.min(u[0],a),i=Math.max(u[1],i))}else a=Math.min(l,a),i=Math.max(l,i)}return[a,i]}(e,0)}},{"../../lib":696}],877:[function(e,t,n){"use strict";var r=e("../../plots/font_attributes"),a=e("./axis_attributes"),i=e("../../components/color/attributes"),o=r({editType:"calc"});o.family.dflt='"Open Sans", verdana, arial, sans-serif',o.size.dflt=12,o.color.dflt=i.defaultLine,t.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:a,baxis:a,font:o,color:{valType:"color",dflt:i.defaultLine,editType:"plot"},transforms:void 0}},{"../../components/color/attributes":569,"../../plots/font_attributes":771,"./axis_attributes":879}],878:[function(e,t,n){"use strict";var r=e("../../lib").isArrayOrTypedArray;t.exports=function(e,t,n,a){var i,o,s,l,u,c,f,d,p,h,m,v,g,y=r(n)?"a":"b",b="a"===y?e.aaxis:e.baxis,x=b.smoothing,_="a"===y?e.a2i:e.b2j,w="a"===y?n:a,T="a"===y?a:n,k="a"===y?t.a.length:t.b.length,C="a"===y?t.b.length:t.a.length,E=Math.floor("a"===y?e.b2j(T):e.a2i(T)),M="a"===y?function(t){return e.evalxy([],t,E)}:function(t){return e.evalxy([],E,t)};x&&(s=Math.max(0,Math.min(C-2,E)),l=E-s,o="a"===y?function(t,n){return e.dxydi([],t,s,n,l)}:function(t,n){return e.dxydj([],s,t,l,n)});var A=_(w[0]),S=_(w[1]),O=A<S?1:-1,P=1e-8*(S-A),R=O>0?Math.floor:Math.ceil,L=O>0?Math.ceil:Math.floor,D=O>0?Math.min:Math.max,I=O>0?Math.max:Math.min,z=R(A+P),j=L(S-P),N=[[f=M(A)]];for(i=z;i*O<j*O;i+=O)u=[],m=I(A,i),v=D(S,i+O),g=v-m,c=Math.max(0,Math.min(k-2,Math.floor(.5*(m+v)))),d=M(v),x&&(p=o(c,m-c),h=o(c,v-c),u.push([f[0]+p[0]/3*g,f[1]+p[1]/3*g]),u.push([d[0]-h[0]/3*g,d[1]-h[1]/3*g])),u.push(d),N.push(u),f=d;return N}},{"../../lib":696}],879:[function(e,t,n){"use strict";var r=e("../../plots/font_attributes"),a=e("../../components/color/attributes"),i=e("../../plots/cartesian/layout_attributes"),o=e("../../plot_api/edit_types").overrideAll;t.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{valType:"string",editType:"calc"},titlefont:r({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},tickfont:r({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc"},tickformatstops:o(i.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:a.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgridcolor:{valType:"color",dflt:a.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},editType:"calc"}},{"../../components/color/attributes":569,"../../plot_api/edit_types":727,"../../plots/cartesian/layout_attributes":757,"../../plots/font_attributes":771}],880:[function(e,t,n){"use strict";var r=e("./attributes"),a=e("../../components/color").addOpacity,i=e("../../registry"),o=e("../../lib"),s=e("../../plots/cartesian/tick_value_defaults"),l=e("../../plots/cartesian/tick_label_defaults"),u=e("../../plots/cartesian/category_order_defaults"),c=e("../../plots/cartesian/set_convert"),f=e("../../plots/cartesian/axis_autotype");t.exports=function(e,t,n){var d=n.letter,p=n.font||{},h=r[d+"axis"];function m(n,r){return o.coerce(e,t,h,n,r)}function v(n,r){return o.coerce2(e,t,h,n,r)}n.name&&(t._name=n.name,t._id=n.name);var g=m("type");if("-"===g&&(n.data&&function(e,t){if("-"===e.type){var n=e._id.charAt(0),r=e[n+"calendar"];e.type=f(t,r)}}(t,n.data),"-"===t.type?t.type="linear":g=e.type=t.type),m("smoothing"),m("cheatertype"),m("showticklabels"),m("labelprefix",d+" = "),m("labelsuffix"),m("showtickprefix"),m("showticksuffix"),m("separatethousands"),m("tickformat"),m("exponentformat"),m("showexponent"),m("categoryorder"),m("tickmode"),m("tickvals"),m("ticktext"),m("tick0"),m("dtick"),"array"===t.tickmode&&(m("arraytick0"),m("arraydtick")),m("labelpadding"),t._hovertitle=d,"date"===g){var y=i.getComponentMethod("calendars","handleDefaults");y(e,t,"calendar",n.calendar)}c(t,n.fullLayout),t.c2p=o.identity;var b=m("color",n.dfltColor),x=b===e.color?b:p.color;m("title"),o.coerceFont(m,"titlefont",{family:p.family,size:Math.round(1.2*p.size),color:x}),m("titleoffset"),m("tickangle");var _=m("autorange",!t.isValidRange(e.range));_&&m("rangemode"),m("range"),t.cleanRange(),m("fixedrange"),s(e,t,m,g),l(e,t,m,g,n),u(e,t,m,{data:n.data,dataAttr:d});var w=v("gridcolor",a(b,.3)),T=v("gridwidth"),k=m("showgrid");k||(delete t.gridcolor,delete t.gridwidth);var C=v("startlinecolor",b),E=v("startlinewidth",T),M=m("startline",t.showgrid||!!C||!!E);M||(delete t.startlinecolor,delete t.startlinewidth);var A=v("endlinecolor",b),S=v("endlinewidth",T),O=m("endline",t.showgrid||!!A||!!S);return O||(delete t.endlinecolor,delete t.endlinewidth),k?(m("minorgridcount"),m("minorgridwidth",T),m("minorgridcolor",a(w,.06)),t.minorgridcount||(delete t.minorgridwidth,delete t.minorgridcolor)):(delete t.gridcolor,delete t.gridWidth),"none"===t.showticklabels&&(delete t.tickfont,delete t.tickangle,delete t.showexponent,delete t.exponentformat,delete t.tickformat,delete t.showticksuffix,delete t.showtickprefix),t.showticksuffix||delete t.ticksuffix,t.showtickprefix||delete t.tickprefix,m("tickmode"),(!t.title||t.title&&0===t.title.length)&&(delete t.titlefont,delete t.titleoffset),t}},{"../../components/color":570,"../../lib":696,"../../plots/cartesian/axis_autotype":745,"../../plots/cartesian/category_order_defaults":748,"../../plots/cartesian/set_convert":763,"../../plots/cartesian/tick_label_defaults":764,"../../plots/cartesian/tick_value_defaults":766,"../../registry":827,"./attributes":877}],881:[function(e,t,n){"use strict";var r=e("../../plots/cartesian/axes"),a=e("../../lib").isArray1D,i=e("./cheater_basis"),o=e("./array_minmax"),s=e("./calc_gridlines"),l=e("./calc_labels"),u=e("./calc_clippath"),c=e("../heatmap/clean_2d_array"),f=e("./smooth_fill_2d_array"),d=e("../heatmap/convert_column_xyz"),p=e("./set_convert");t.exports=function(e,t){var n=r.getFromId(e,t.xaxis),h=r.getFromId(e,t.yaxis),m=t.aaxis,v=t.baxis,g=t.x,y=t.y,b=[];g&&a(g)&&b.push("x"),y&&a(y)&&b.push("y"),b.length&&d(t,m,v,"a","b",b);var x=t._a=t._a||t.a,_=t._b=t._b||t.b;g=t._x||t.x,y=t._y||t.y;var w={};if(t._cheater){var T="index"===m.cheatertype?x.length:x,k="index"===v.cheatertype?_.length:_;g=i(T,k,t.cheaterslope)}t._x=g=c(g),t._y=y=c(y),f(g,x,_),f(y,x,_),p(t),t.setScale();var C=o(g),E=o(y),M=.5*(C[1]-C[0]),A=.5*(C[1]+C[0]),S=.5*(E[1]-E[0]),O=.5*(E[1]+E[0]);return C=[A-1.3*M,A+1.3*M],E=[O-1.3*S,O+1.3*S],t._extremes[n._id]=r.findExtremes(n,C,{padded:!0}),t._extremes[h._id]=r.findExtremes(h,E,{padded:!0}),s(t,"a","b"),s(t,"b","a"),l(t,m),l(t,v),w.clipsegments=u(t._xctrl,t._yctrl,m,v),w.x=g,w.y=y,w.a=x,w.b=_,[w]}},{"../../lib":696,"../../plots/cartesian/axes":744,"../heatmap/clean_2d_array":947,"../heatmap/convert_column_xyz":949,"./array_minmax":876,"./calc_clippath":882,"./calc_gridlines":883,"./calc_labels":884,"./cheater_basis":886,"./set_convert":899,"./smooth_fill_2d_array":900}],882:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){var a,i,o,s=[],l=!!n.smoothing,u=!!r.smoothing,c=e[0].length-1,f=e.length-1;for(a=0,i=[],o=[];a<=c;a++)i[a]=e[0][a],o[a]=t[0][a];for(s.push({x:i,y:o,bicubic:l}),a=0,i=[],o=[];a<=f;a++)i[a]=e[a][c],o[a]=t[a][c];for(s.push({x:i,y:o,bicubic:u}),a=c,i=[],o=[];a>=0;a--)i[c-a]=e[f][a],o[c-a]=t[f][a];for(s.push({x:i,y:o,bicubic:l}),a=f,i=[],o=[];a>=0;a--)i[f-a]=e[a][0],o[f-a]=t[a][0];return s.push({x:i,y:o,bicubic:u}),s}},{}],883:[function(e,t,n){"use strict";var r=e("../../plots/cartesian/axes"),a=e("../../lib/extend").extendFlat;t.exports=function(e,t,n){var i,o,s,l,u,c,f,d,p,h,m,v,g,y,b=e["_"+t],x=e[t+"axis"],_=x._gridlines=[],w=x._minorgridlines=[],T=x._boundarylines=[],k=e["_"+n],C=e[n+"axis"];"array"===x.tickmode&&(x.tickvals=b.slice());var E=e._xctrl,M=e._yctrl,A=E[0].length,S=E.length,O=e._a.length,P=e._b.length;r.prepTicks(x),"array"===x.tickmode&&delete x.tickvals;var R=x.smoothing?3:1;function L(r){var a,i,o,s,l,u,c,f,p,h,m,v,g=[],y=[],b={};if("b"===t)for(i=e.b2j(r),o=Math.floor(Math.max(0,Math.min(P-2,i))),s=i-o,b.length=P,b.crossLength=O,b.xy=function(t){return e.evalxy([],t,i)},b.dxy=function(t,n){return e.dxydi([],t,o,n,s)},a=0;a<O;a++)u=Math.min(O-2,a),c=a-u,f=e.evalxy([],a,i),C.smoothing&&a>0&&(p=e.dxydi([],a-1,o,0,s),g.push(l[0]+p[0]/3),y.push(l[1]+p[1]/3),h=e.dxydi([],a-1,o,1,s),g.push(f[0]-h[0]/3),y.push(f[1]-h[1]/3)),g.push(f[0]),y.push(f[1]),l=f;else for(a=e.a2i(r),u=Math.floor(Math.max(0,Math.min(O-2,a))),c=a-u,b.length=O,b.crossLength=P,b.xy=function(t){return e.evalxy([],a,t)},b.dxy=function(t,n){return e.dxydj([],u,t,c,n)},i=0;i<P;i++)o=Math.min(P-2,i),s=i-o,f=e.evalxy([],a,i),C.smoothing&&i>0&&(m=e.dxydj([],u,i-1,c,0),g.push(l[0]+m[0]/3),y.push(l[1]+m[1]/3),v=e.dxydj([],u,i-1,c,1),g.push(f[0]-v[0]/3),y.push(f[1]-v[1]/3)),g.push(f[0]),y.push(f[1]),l=f;return b.axisLetter=t,b.axis=x,b.crossAxis=C,b.value=r,b.constvar=n,b.index=d,b.x=g,b.y=y,b.smoothing=C.smoothing,b}function D(r){var a,i,o,s,l,u=[],c=[],f={};if(f.length=b.length,f.crossLength=k.length,"b"===t)for(o=Math.max(0,Math.min(P-2,r)),l=Math.min(1,Math.max(0,r-o)),f.xy=function(t){return e.evalxy([],t,r)},f.dxy=function(t,n){return e.dxydi([],t,o,n,l)},a=0;a<A;a++)u[a]=E[r*R][a],c[a]=M[r*R][a];else for(i=Math.max(0,Math.min(O-2,r)),s=Math.min(1,Math.max(0,r-i)),f.xy=function(t){return e.evalxy([],r,t)},f.dxy=function(t,n){return e.dxydj([],i,t,s,n)},a=0;a<S;a++)u[a]=E[a][r*R],c[a]=M[a][r*R];return f.axisLetter=t,f.axis=x,f.crossAxis=C,f.value=b[r],f.constvar=n,f.index=r,f.x=u,f.y=c,f.smoothing=C.smoothing,f}if("array"===x.tickmode){for(l=5e-15,u=[Math.floor((b.length-1-x.arraytick0)/x.arraydtick*(1+l)),Math.ceil(-x.arraytick0/x.arraydtick/(1+l))].sort(function(e,t){return e-t}),c=u[0]-1,f=u[1]+1,d=c;d<f;d++)(o=x.arraytick0+x.arraydtick*d)<0||o>b.length-1||_.push(a(D(o),{color:x.gridcolor,width:x.gridwidth}));for(d=c;d<f;d++)if(s=x.arraytick0+x.arraydtick*d,m=Math.min(s+x.arraydtick,b.length-1),!(s<0||s>b.length-1||m<0||m>b.length-1))for(v=b[s],g=b[m],i=0;i<x.minorgridcount;i++)(y=m-s)<=0||(h=v+(g-v)*(i+1)/(x.minorgridcount+1)*(x.arraydtick/y))<b[0]||h>b[b.length-1]||w.push(a(L(h),{color:x.minorgridcolor,width:x.minorgridwidth}));x.startline&&T.push(a(D(0),{color:x.startlinecolor,width:x.startlinewidth})),x.endline&&T.push(a(D(b.length-1),{color:x.endlinecolor,width:x.endlinewidth}))}else{for(l=5e-15,u=[Math.floor((b[b.length-1]-x.tick0)/x.dtick*(1+l)),Math.ceil((b[0]-x.tick0)/x.dtick/(1+l))].sort(function(e,t){return e-t}),c=u[0],f=u[1],d=c;d<=f;d++)p=x.tick0+x.dtick*d,_.push(a(L(p),{color:x.gridcolor,width:x.gridwidth}));for(d=c-1;d<f+1;d++)for(p=x.tick0+x.dtick*d,i=0;i<x.minorgridcount;i++)(h=p+x.dtick*(i+1)/(x.minorgridcount+1))<b[0]||h>b[b.length-1]||w.push(a(L(h),{color:x.minorgridcolor,width:x.minorgridwidth}));x.startline&&T.push(a(L(b[0]),{color:x.startlinecolor,width:x.startlinewidth})),x.endline&&T.push(a(L(b[b.length-1]),{color:x.endlinecolor,width:x.endlinewidth}))}}},{"../../lib/extend":685,"../../plots/cartesian/axes":744}],884:[function(e,t,n){"use strict";var r=e("../../plots/cartesian/axes"),a=e("../../lib/extend").extendFlat;t.exports=function(e,t){var n,i,o,s=t._labels=[],l=t._gridlines;for(n=0;n<l.length;n++)o=l[n],-1!==["start","both"].indexOf(t.showticklabels)&&(i=r.tickText(t,o.value),a(i,{prefix:void 0,suffix:void 0,endAnchor:!0,xy:o.xy(0),dxy:o.dxy(0,0),axis:o.axis,length:o.crossAxis.length,font:o.axis.tickfont,isFirst:0===n,isLast:n===l.length-1}),s.push(i)),-1!==["end","both"].indexOf(t.showticklabels)&&(i=r.tickText(t,o.value),a(i,{endAnchor:!1,xy:o.xy(o.crossLength-1),dxy:o.dxy(o.crossLength-2,1),axis:o.axis,length:o.crossAxis.length,font:o.axis.tickfont,isFirst:0===n,isLast:n===l.length-1}),s.push(i))}},{"../../lib/extend":685,"../../plots/cartesian/axes":744}],885:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){var a=e[0]-t[0],i=e[1]-t[1],o=n[0]-t[0],s=n[1]-t[1],l=Math.pow(a*a+i*i,.25),u=Math.pow(o*o+s*s,.25),c=(u*u*a-l*l*o)*r,f=(u*u*i-l*l*s)*r,d=u*(l+u)*3,p=l*(l+u)*3;return[[t[0]+(d&&c/d),t[1]+(d&&f/d)],[t[0]-(p&&c/p),t[1]-(p&&f/p)]]}},{}],886:[function(e,t,n){"use strict";var r=e("../../lib").isArrayOrTypedArray;t.exports=function(e,t,n){var a,i,o,s,l,u,c,f=[],d=r(e)?e.length:e,p=r(t)?t.length:t,h=r(e)?e:null,m=r(t)?t:null;h&&(o=(h.length-1)/(h[h.length-1]-h[0])/(d-1)),m&&(s=(m.length-1)/(m[m.length-1]-m[0])/(p-1));var v=1/0,g=-1/0;for(i=0;i<p;i++)for(f[i]=[],u=m?(m[i]-m[0])*s:i/(p-1),a=0;a<d;a++)l=h?(h[a]-h[0])*o:a/(d-1),c=l-u*n,v=Math.min(c,v),g=Math.max(c,g),f[i][a]=c;var y=1/(g-v),b=-v*y;for(i=0;i<p;i++)for(a=0;a<d;a++)f[i][a]=y*f[i][a]+b;return f}},{"../../lib":696}],887:[function(e,t,n){"use strict";var r=e("./catmull_rom"),a=e("../../lib").ensureArray;function i(e,t,n){var r=-.5*n[0]+1.5*t[0],a=-.5*n[1]+1.5*t[1];return[(2*r+e[0])/3,(2*a+e[1])/3]}t.exports=function(e,t,n,o,s,l){var u,c,f,d,p,h,m,v,g,y,b=n[0].length,x=n.length,_=s?3*b-2:b,w=l?3*x-2:x;for(e=a(e,w),t=a(t,w),f=0;f<w;f++)e[f]=a(e[f],_),t[f]=a(t[f],_);for(c=0,d=0;c<x;c++,d+=l?3:1)for(p=e[d],h=t[d],m=n[c],v=o[c],u=0,f=0;u<b;u++,f+=s?3:1)p[f]=m[u],h[f]=v[u];if(s)for(c=0,d=0;c<x;c++,d+=l?3:1){for(u=1,f=3;u<b-1;u++,f+=3)g=r([n[c][u-1],o[c][u-1]],[n[c][u],o[c][u]],[n[c][u+1],o[c][u+1]],s),e[d][f-1]=g[0][0],t[d][f-1]=g[0][1],e[d][f+1]=g[1][0],t[d][f+1]=g[1][1];y=i([e[d][0],t[d][0]],[e[d][2],t[d][2]],[e[d][3],t[d][3]]),e[d][1]=y[0],t[d][1]=y[1],y=i([e[d][_-1],t[d][_-1]],[e[d][_-3],t[d][_-3]],[e[d][_-4],t[d][_-4]]),e[d][_-2]=y[0],t[d][_-2]=y[1]}if(l)for(f=0;f<_;f++){for(d=3;d<w-3;d+=3)g=r([e[d-3][f],t[d-3][f]],[e[d][f],t[d][f]],[e[d+3][f],t[d+3][f]],l),e[d-1][f]=g[0][0],t[d-1][f]=g[0][1],e[d+1][f]=g[1][0],t[d+1][f]=g[1][1];y=i([e[0][f],t[0][f]],[e[2][f],t[2][f]],[e[3][f],t[3][f]]),e[1][f]=y[0],t[1][f]=y[1],y=i([e[w-1][f],t[w-1][f]],[e[w-3][f],t[w-3][f]],[e[w-4][f],t[w-4][f]]),e[w-2][f]=y[0],t[w-2][f]=y[1]}if(s&&l)for(d=1;d<w;d+=(d+1)%3==0?2:1){for(f=3;f<_-3;f+=3)g=r([e[d][f-3],t[d][f-3]],[e[d][f],t[d][f]],[e[d][f+3],t[d][f+3]],s),e[d][f-1]=.5*(e[d][f-1]+g[0][0]),t[d][f-1]=.5*(t[d][f-1]+g[0][1]),e[d][f+1]=.5*(e[d][f+1]+g[1][0]),t[d][f+1]=.5*(t[d][f+1]+g[1][1]);y=i([e[d][0],t[d][0]],[e[d][2],t[d][2]],[e[d][3],t[d][3]]),e[d][1]=.5*(e[d][1]+y[0]),t[d][1]=.5*(t[d][1]+y[1]),y=i([e[d][_-1],t[d][_-1]],[e[d][_-3],t[d][_-3]],[e[d][_-4],t[d][_-4]]),e[d][_-2]=.5*(e[d][_-2]+y[0]),t[d][_-2]=.5*(t[d][_-2]+y[1])}return[e,t]}},{"../../lib":696,"./catmull_rom":885}],888:[function(e,t,n){"use strict";t.exports={RELATIVE_CULL_TOLERANCE:1e-6}},{}],889:[function(e,t,n){"use strict";t.exports=function(e,t,n){return t&&n?function(t,n,r,a,i){var o,s,l,u,c,f;t||(t=[]),n*=3,r*=3;var d=a*a,p=1-a,h=p*p,m=p*a*2,v=-3*h,g=3*(h-m),y=3*(m-d),b=3*d,x=i*i,_=x*i,w=1-i,T=w*w,k=T*w;for(f=0;f<e.length;f++)c=e[f],o=v*c[r][n]+g*c[r][n+1]+y*c[r][n+2]+b*c[r][n+3],s=v*c[r+1][n]+g*c[r+1][n+1]+y*c[r+1][n+2]+b*c[r+1][n+3],l=v*c[r+2][n]+g*c[r+2][n+1]+y*c[r+2][n+2]+b*c[r+2][n+3],u=v*c[r+3][n]+g*c[r+3][n+1]+y*c[r+3][n+2]+b*c[r+3][n+3],t[f]=k*o+3*(T*i*s+w*x*l)+_*u;return t}:t?function(t,n,r,a,i){var o,s,l,u;t||(t=[]),n*=3;var c=a*a,f=1-a,d=f*f,p=f*a*2,h=-3*d,m=3*(d-p),v=3*(p-c),g=3*c,y=1-i;for(l=0;l<e.length;l++)u=e[l],o=h*u[r][n]+m*u[r][n+1]+v*u[r][n+2]+g*u[r][n+3],s=h*u[r+1][n]+m*u[r+1][n+1]+v*u[r+1][n+2]+g*u[r+1][n+3],t[l]=y*o+i*s;return t}:n?function(t,n,r,a,i){var o,s,l,u,c,f;t||(t=[]),r*=3;var d=i*i,p=d*i,h=1-i,m=h*h,v=m*h;for(c=0;c<e.length;c++)f=e[c],o=f[r][n+1]-f[r][n],s=f[r+1][n+1]-f[r+1][n],l=f[r+2][n+1]-f[r+2][n],u=f[r+3][n+1]-f[r+3][n],t[c]=v*o+3*(m*i*s+h*d*l)+p*u;return t}:function(t,n,r,a,i){var o,s,l,u;t||(t=[]);var c=1-i;for(l=0;l<e.length;l++)u=e[l],o=u[r][n+1]-u[r][n],s=u[r+1][n+1]-u[r+1][n],t[l]=c*o+i*s;return t}}},{}],890:[function(e,t,n){"use strict";t.exports=function(e,t,n){return t&&n?function(t,n,r,a,i){var o,s,l,u,c,f;t||(t=[]),n*=3,r*=3;var d=a*a,p=d*a,h=1-a,m=h*h,v=m*h,g=i*i,y=1-i,b=y*y,x=y*i*2,_=-3*b,w=3*(b-x),T=3*(x-g),k=3*g;for(f=0;f<e.length;f++)c=e[f],o=_*c[r][n]+w*c[r+1][n]+T*c[r+2][n]+k*c[r+3][n],s=_*c[r][n+1]+w*c[r+1][n+1]+T*c[r+2][n+1]+k*c[r+3][n+1],l=_*c[r][n+2]+w*c[r+1][n+2]+T*c[r+2][n+2]+k*c[r+3][n+2],u=_*c[r][n+3]+w*c[r+1][n+3]+T*c[r+2][n+3]+k*c[r+3][n+3],t[f]=v*o+3*(m*a*s+h*d*l)+p*u;return t}:t?function(t,n,r,a,i){var o,s,l,u,c,f;t||(t=[]),n*=3;var d=i*i,p=d*i,h=1-i,m=h*h,v=m*h;for(c=0;c<e.length;c++)f=e[c],o=f[r+1][n]-f[r][n],s=f[r+1][n+1]-f[r][n+1],l=f[r+1][n+2]-f[r][n+2],u=f[r+1][n+3]-f[r][n+3],t[c]=v*o+3*(m*i*s+h*d*l)+p*u;return t}:n?function(t,n,r,a,i){var o,s,l,u;t||(t=[]),r*=3;var c=1-a,f=i*i,d=1-i,p=d*d,h=d*i*2,m=-3*p,v=3*(p-h),g=3*(h-f),y=3*f;for(l=0;l<e.length;l++)u=e[l],o=m*u[r][n]+v*u[r+1][n]+g*u[r+2][n]+y*u[r+3][n],s=m*u[r][n+1]+v*u[r+1][n+1]+g*u[r+2][n+1]+y*u[r+3][n+1],t[l]=c*o+a*s;return t}:function(t,n,r,a,i){var o,s,l,u;t||(t=[]);var c=1-a;for(l=0;l<e.length;l++)u=e[l],o=u[r+1][n]-u[r][n],s=u[r+1][n+1]-u[r][n+1],t[l]=c*o+a*s;return t}}},{}],891:[function(e,t,n){"use strict";t.exports=function(e,t,n,r,a){var i=t-2,o=n-2;return r&&a?function(t,n,r){var a,s,l,u,c,f;t||(t=[]);var d=Math.max(0,Math.min(Math.floor(n),i)),p=Math.max(0,Math.min(Math.floor(r),o)),h=Math.max(0,Math.min(1,n-d)),m=Math.max(0,Math.min(1,r-p));d*=3,p*=3;var v=h*h,g=v*h,y=1-h,b=y*y,x=b*y,_=m*m,w=_*m,T=1-m,k=T*T,C=k*T;for(f=0;f<e.length;f++)c=e[f],a=x*c[p][d]+3*(b*h*c[p][d+1]+y*v*c[p][d+2])+g*c[p][d+3],s=x*c[p+1][d]+3*(b*h*c[p+1][d+1]+y*v*c[p+1][d+2])+g*c[p+1][d+3],l=x*c[p+2][d]+3*(b*h*c[p+2][d+1]+y*v*c[p+2][d+2])+g*c[p+2][d+3],u=x*c[p+3][d]+3*(b*h*c[p+3][d+1]+y*v*c[p+3][d+2])+g*c[p+3][d+3],t[f]=C*a+3*(k*m*s+T*_*l)+w*u;return t}:r?function(t,n,r){t||(t=[]);var a,s,l,u,c,f,d=Math.max(0,Math.min(Math.floor(n),i)),p=Math.max(0,Math.min(Math.floor(r),o)),h=Math.max(0,Math.min(1,n-d)),m=Math.max(0,Math.min(1,r-p));d*=3;var v=h*h,g=v*h,y=1-h,b=y*y,x=b*y,_=1-m;for(c=0;c<e.length;c++)f=e[c],a=_*f[p][d]+m*f[p+1][d],s=_*f[p][d+1]+m*f[p+1][d+1],l=_*f[p][d+2]+m*f[p+1][d+1],u=_*f[p][d+3]+m*f[p+1][d+1],t[c]=x*a+3*(b*h*s+y*v*l)+g*u;return t}:a?function(t,n,r){t||(t=[]);var a,s,l,u,c,f,d=Math.max(0,Math.min(Math.floor(n),i)),p=Math.max(0,Math.min(Math.floor(r),o)),h=Math.max(0,Math.min(1,n-d)),m=Math.max(0,Math.min(1,r-p));p*=3;var v=m*m,g=v*m,y=1-m,b=y*y,x=b*y,_=1-h;for(c=0;c<e.length;c++)f=e[c],a=_*f[p][d]+h*f[p][d+1],s=_*f[p+1][d]+h*f[p+1][d+1],l=_*f[p+2][d]+h*f[p+2][d+1],u=_*f[p+3][d]+h*f[p+3][d+1],t[c]=x*a+3*(b*m*s+y*v*l)+g*u;return t}:function(t,n,r){t||(t=[]);var a,s,l,u,c=Math.max(0,Math.min(Math.floor(n),i)),f=Math.max(0,Math.min(Math.floor(r),o)),d=Math.max(0,Math.min(1,n-c)),p=Math.max(0,Math.min(1,r-f)),h=1-p,m=1-d;for(l=0;l<e.length;l++)u=e[l],a=m*u[f][c]+d*u[f][c+1],s=m*u[f+1][c]+d*u[f+1][c+1],t[l]=h*a+p*s;return t}}},{}],892:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("./xy_defaults"),i=e("./ab_defaults"),o=e("./attributes"),s=e("../../components/color/attributes");t.exports=function(e,t,n,l){function u(n,a){return r.coerce(e,t,o,n,a)}t._clipPathId="clip"+t.uid+"carpet";var c=u("color",s.defaultLine);if(r.coerceFont(u,"font"),u("carpet"),i(e,t,l,u,c),t.a&&t.b){t.a.length<3&&(t.aaxis.smoothing=0),t.b.length<3&&(t.baxis.smoothing=0);var f=a(e,t,u);f||(t.visible=!1),t._cheater&&u("cheaterslope")}else t.visible=!1}},{"../../components/color/attributes":569,"../../lib":696,"./ab_defaults":875,"./attributes":877,"./xy_defaults":901}],893:[function(e,t,n){"use strict";var r={};r.attributes=e("./attributes"),r.supplyDefaults=e("./defaults"),r.plot=e("./plot"),r.calc=e("./calc"),r.animatable=!0,r.isContainer=!0,r.moduleType="trace",r.name="carpet",r.basePlotModule=e("../../plots/cartesian"),r.categories=["cartesian","svg","carpet","carpetAxis","notLegendIsolatable"],r.meta={},t.exports=r},{"../../plots/cartesian":756,"./attributes":877,"./calc":881,"./defaults":892,"./plot":898}],894:[function(e,t,n){"use strict";t.exports=function(e,t){for(var n,r=e._fullData.length,a=0;a<r;a++){var i=e._fullData[a];if(i.index!==t.index&&"carpet"===i.type&&(n||(n=i),i.carpet===t.carpet))return i}return n}},{}],895:[function(e,t,n){"use strict";t.exports=function(e,t,n){if(0===e.length)return"";var r,a=[],i=n?3:1;for(r=0;r<e.length;r+=i)a.push(e[r]+","+t[r]),n&&r<e.length-i&&(a.push("C"),a.push([e[r+1]+","+t[r+1],e[r+2]+","+t[r+2]+" "].join(" ")));return a.join(n?"":"L")}},{}],896:[function(e,t,n){"use strict";var r=e("../../lib").isArrayOrTypedArray;t.exports=function(e,t,n){var a;for(r(e)?e.length>t.length&&(e=e.slice(0,t.length)):e=[],a=0;a<t.length;a++)e[a]=n(t[a]);return e}},{"../../lib":696}],897:[function(e,t,n){"use strict";t.exports=function(e,t,n,r,a,i){var o=a[0]*e.dpdx(t),s=a[1]*e.dpdy(n),l=1,u=1;if(i){var c=Math.sqrt(a[0]*a[0]+a[1]*a[1]),f=Math.sqrt(i[0]*i[0]+i[1]*i[1]),d=(a[0]*i[0]+a[1]*i[1])/c/f;u=Math.max(0,d)}var p=180*Math.atan2(s,o)/Math.PI;return p<-90?(p+=180,l=-l):p>90&&(p-=180,l=-l),{angle:p,flip:l,p:e.c2p(r,t,n),offsetMultplier:u}}},{}],898:[function(e,t,n){"use strict";var r=e("d3"),a=e("../../components/drawing"),i=e("./map_1d_array"),o=e("./makepath"),s=e("./orient_text"),l=e("../../lib/svg_text_utils"),u=e("../../lib"),c=e("../../constants/alignment");function f(e,t,n,a,s,l){var u="const-"+s+"-lines",c=n.selectAll("."+u).data(l);c.enter().append("path").classed(u,!0).style("vector-effect","non-scaling-stroke"),c.each(function(n){var a=n,s=a.x,l=a.y,u=i([],s,e.c2p),c=i([],l,t.c2p),f="M"+o(u,c,a.smoothing),d=r.select(this);d.attr("d",f).style("stroke-width",a.width).style("stroke",a.color).style("fill","none")}),c.exit().remove()}function d(e,t,n,i,o,u,c,f){var d=u.selectAll("text."+f).data(c);d.enter().append("text").classed(f,!0);var p=0,h={};return d.each(function(o,u){var c;if("auto"===o.axis.tickangle)c=s(i,t,n,o.xy,o.dxy);else{var f=(o.axis.tickangle+180)*Math.PI/180;c=s(i,t,n,o.xy,[Math.cos(f),Math.sin(f)])}u||(h={angle:c.angle,flip:c.flip});var d=(o.endAnchor?-1:1)*c.flip,m=r.select(this).attr({"text-anchor":d>0?"start":"end","data-notex":1}).call(a.font,o.font).text(o.text).call(l.convertToTspans,e),v=a.bBox(this);m.attr("transform","translate("+c.p[0]+","+c.p[1]+") rotate("+c.angle+")translate("+o.axis.labelpadding*d+","+.3*v.height+")"),p=Math.max(p,v.width+o.axis.labelpadding)}),d.exit().remove(),h.maxExtent=p,h}t.exports=function(e,t,n,a){var l=t.xaxis,c=t.yaxis,p=e._fullLayout,h=p._clips;u.makeTraceGroups(a,n,"trace").each(function(t){var n=r.select(this),a=t[0],p=a.trace,v=p.aaxis,g=p.baxis,y=u.ensureSingle(n,"g","minorlayer"),b=u.ensureSingle(n,"g","majorlayer"),x=u.ensureSingle(n,"g","boundarylayer"),_=u.ensureSingle(n,"g","labellayer");n.style("opacity",p.opacity),f(l,c,b,0,"a",v._gridlines),f(l,c,b,0,"b",g._gridlines),f(l,c,y,0,"a",v._minorgridlines),f(l,c,y,0,"b",g._minorgridlines),f(l,c,x,0,"a-boundary",v._boundarylines),f(l,c,x,0,"b-boundary",g._boundarylines);var w=d(e,l,c,p,0,_,v._labels,"a-label"),T=d(e,l,c,p,0,_,g._labels,"b-label");!function(e,t,n,r,a,i,o,l){var c,f,d,p;c=.5*(n.a[0]+n.a[n.a.length-1]),f=n.b[0],d=n.ab2xy(c,f,!0),p=n.dxyda_rough(c,f),void 0===o.angle&&u.extendFlat(o,s(n,a,i,d,n.dxydb_rough(c,f))),m(e,t,n,0,d,p,n.aaxis,a,i,o,"a-title"),c=n.a[0],f=.5*(n.b[0]+n.b[n.b.length-1]),d=n.ab2xy(c,f,!0),p=n.dxydb_rough(c,f),void 0===l.angle&&u.extendFlat(l,s(n,a,i,d,n.dxyda_rough(c,f))),m(e,t,n,0,d,p,n.baxis,a,i,l,"b-title")}(e,_,p,0,l,c,w,T),function(e,t,n,r,a){var s,l,c,f,d=n.select("#"+e._clipPathId);d.size()||(d=n.append("clipPath").classed("carpetclip",!0));var p=u.ensureSingle(d,"path","carpetboundary"),h=t.clipsegments,m=[];for(f=0;f<h.length;f++)s=h[f],l=i([],s.x,r.c2p),c=i([],s.y,a.c2p),m.push(o(l,c,s.bicubic));var v="M"+m.join("L")+"Z";d.attr("id",e._clipPathId),p.attr("d",v)}(p,a,h,l,c)})};var p=c.LINE_SPACING,h=(1-c.MID_SHIFT)/p+1;function m(e,t,n,i,o,u,c,f,d,m,v){var g=[];c.title&&g.push(c.title);var y=t.selectAll("text."+v).data(g),b=m.maxExtent;y.enter().append("text").classed(v,!0),y.each(function(){var t=s(n,f,d,o,u);-1===["start","both"].indexOf(c.showticklabels)&&(b=0);var i=c.titlefont.size;b+=i+c.titleoffset;var v=m.angle+(m.flip<0?180:0),g=(v-t.angle+450)%360,y=g>90&&g<270,x=r.select(this);x.text(c.title||"").call(l.convertToTspans,e),y&&(b=(-l.lineCount(x)+h)*p*i-b),x.attr("transform","translate("+t.p[0]+","+t.p[1]+") rotate("+t.angle+") translate(0,"+b+")").classed("user-select-none",!0).attr("text-anchor","middle").call(a.font,c.titlefont)}),y.exit().remove()}},{"../../components/drawing":595,"../../constants/alignment":668,"../../lib":696,"../../lib/svg_text_utils":720,"./makepath":895,"./map_1d_array":896,"./orient_text":897,d3:148}],899:[function(e,t,n){"use strict";var r=e("./constants"),a=e("../../lib/search").findBin,i=e("./compute_control_points"),o=e("./create_spline_evaluator"),s=e("./create_i_derivative_evaluator"),l=e("./create_j_derivative_evaluator");t.exports=function(e){var t=e._a,n=e._b,u=t.length,c=n.length,f=e.aaxis,d=e.baxis,p=t[0],h=t[u-1],m=n[0],v=n[c-1],g=t[t.length-1]-t[0],y=n[n.length-1]-n[0],b=g*r.RELATIVE_CULL_TOLERANCE,x=y*r.RELATIVE_CULL_TOLERANCE;p-=b,h+=b,m-=x,v+=x,e.isVisible=function(e,t){return e>p&&e<h&&t>m&&t<v},e.isOccluded=function(e,t){return e<p||e>h||t<m||t>v},e.setScale=function(){var t=e._x,n=e._y,r=i(e._xctrl,e._yctrl,t,n,f.smoothing,d.smoothing);e._xctrl=r[0],e._yctrl=r[1],e.evalxy=o([e._xctrl,e._yctrl],u,c,f.smoothing,d.smoothing),e.dxydi=s([e._xctrl,e._yctrl],f.smoothing,d.smoothing),e.dxydj=l([e._xctrl,e._yctrl],f.smoothing,d.smoothing)},e.i2a=function(e){var n=Math.max(0,Math.floor(e[0]),u-2),r=e[0]-n;return(1-r)*t[n]+r*t[n+1]},e.j2b=function(e){var t=Math.max(0,Math.floor(e[1]),u-2),r=e[1]-t;return(1-r)*n[t]+r*n[t+1]},e.ij2ab=function(t){return[e.i2a(t[0]),e.j2b(t[1])]},e.a2i=function(e){var n=Math.max(0,Math.min(a(e,t),u-2)),r=t[n],i=t[n+1];return Math.max(0,Math.min(u-1,n+(e-r)/(i-r)))},e.b2j=function(e){var t=Math.max(0,Math.min(a(e,n),c-2)),r=n[t],i=n[t+1];return Math.max(0,Math.min(c-1,t+(e-r)/(i-r)))},e.ab2ij=function(t){return[e.a2i(t[0]),e.b2j(t[1])]},e.i2c=function(t,n){return e.evalxy([],t,n)},e.ab2xy=function(r,a,i){if(!i&&(r<t[0]||r>t[u-1]|a<n[0]||a>n[c-1]))return[!1,!1];var o=e.a2i(r),s=e.b2j(a),l=e.evalxy([],o,s);if(i){var f,d,p,h,m=0,v=0,g=[];r<t[0]?(f=0,d=0,m=(r-t[0])/(t[1]-t[0])):r>t[u-1]?(f=u-2,d=1,m=(r-t[u-1])/(t[u-1]-t[u-2])):(f=Math.max(0,Math.min(u-2,Math.floor(o))),d=o-f),a<n[0]?(p=0,h=0,v=(a-n[0])/(n[1]-n[0])):a>n[c-1]?(p=c-2,h=1,v=(a-n[c-1])/(n[c-1]-n[c-2])):(p=Math.max(0,Math.min(c-2,Math.floor(s))),h=s-p),m&&(e.dxydi(g,f,p,d,h),l[0]+=g[0]*m,l[1]+=g[1]*m),v&&(e.dxydj(g,f,p,d,h),l[0]+=g[0]*v,l[1]+=g[1]*v)}return l},e.c2p=function(e,t,n){return[t.c2p(e[0]),n.c2p(e[1])]},e.p2x=function(e,t,n){return[t.p2c(e[0]),n.p2c(e[1])]},e.dadi=function(e){var n=Math.max(0,Math.min(t.length-2,e));return t[n+1]-t[n]},e.dbdj=function(e){var t=Math.max(0,Math.min(n.length-2,e));return n[t+1]-n[t]},e.dxyda=function(t,n,r,a){var i=e.dxydi(null,t,n,r,a),o=e.dadi(t,r);return[i[0]/o,i[1]/o]},e.dxydb=function(t,n,r,a){var i=e.dxydj(null,t,n,r,a),o=e.dbdj(n,a);return[i[0]/o,i[1]/o]},e.dxyda_rough=function(t,n,r){var a=g*(r||.1),i=e.ab2xy(t+a,n,!0),o=e.ab2xy(t-a,n,!0);return[.5*(i[0]-o[0])/a,.5*(i[1]-o[1])/a]},e.dxydb_rough=function(t,n,r){var a=y*(r||.1),i=e.ab2xy(t,n+a,!0),o=e.ab2xy(t,n-a,!0);return[.5*(i[0]-o[0])/a,.5*(i[1]-o[1])/a]},e.dpdx=function(e){return e._m},e.dpdy=function(e){return e._m}}},{"../../lib/search":715,"./compute_control_points":887,"./constants":888,"./create_i_derivative_evaluator":889,"./create_j_derivative_evaluator":890,"./create_spline_evaluator":891}],900:[function(e,t,n){"use strict";var r=e("../../lib");t.exports=function(e,t,n){var a,i,o,s=[],l=[],u=e[0].length,c=e.length;function f(t,n){var r,a=0,i=0;return t>0&&void 0!==(r=e[n][t-1])&&(i++,a+=r),t<u-1&&void 0!==(r=e[n][t+1])&&(i++,a+=r),n>0&&void 0!==(r=e[n-1][t])&&(i++,a+=r),n<c-1&&void 0!==(r=e[n+1][t])&&(i++,a+=r),a/Math.max(1,i)}var d,p,h,m,v,g,y,b,x,_,w,T=0;for(a=0;a<u;a++)for(i=0;i<c;i++)void 0===e[i][a]&&(s.push(a),l.push(i),e[i][a]=f(a,i)),T=Math.max(T,Math.abs(e[i][a]));if(!s.length)return e;var k=0,C=0,E=s.length;do{for(k=0,o=0;o<E;o++){a=s[o],i=l[o];var M,A,S,O,P,R,L=0,D=0;0===a?(P=Math.min(u-1,2),S=t[P],O=t[1],M=e[i][P],A=e[i][1],D+=A+(A-M)*(t[0]-O)/(O-S),L++):a===u-1&&(P=Math.max(0,u-3),S=t[P],O=t[u-2],M=e[i][P],A=e[i][u-2],D+=A+(A-M)*(t[u-1]-O)/(O-S),L++),(0===a||a===u-1)&&i>0&&i<c-1&&(d=n[i+1]-n[i],p=n[i]-n[i-1],D+=(p*e[i+1][a]+d*e[i-1][a])/(p+d),L++),0===i?(R=Math.min(c-1,2),S=n[R],O=n[1],M=e[R][a],A=e[1][a],D+=A+(A-M)*(n[0]-O)/(O-S),L++):i===c-1&&(R=Math.max(0,c-3),S=n[R],O=n[c-2],M=e[R][a],A=e[c-2][a],D+=A+(A-M)*(n[c-1]-O)/(O-S),L++),(0===i||i===c-1)&&a>0&&a<u-1&&(d=t[a+1]-t[a],p=t[a]-t[a-1],D+=(p*e[i][a+1]+d*e[i][a-1])/(p+d),L++),L?D/=L:(h=t[a+1]-t[a],m=t[a]-t[a-1],v=n[i+1]-n[i],g=n[i]-n[i-1],b=v*g*(v+g),D=((y=h*m*(h+m))*(g*e[i+1][a]+v*e[i-1][a])+b*(m*e[i][a+1]+h*e[i][a-1]))/(b*(m+h)+y*(g+v))),x=D-e[i][a],k+=(_=x/T)*_,w=L?0:.85,e[i][a]+=x*(1+w)}k=Math.sqrt(k)}while(C++<100&&k>1e-5);return r.log("Smoother converged to",k,"after",C,"iterations"),e}},{"../../lib":696}],901:[function(e,t,n){"use strict";var r=e("../../lib").isArray1D;t.exports=function(e,t,n){var a=n("x"),i=a&&a.length,o=n("y"),s=o&&o.length;if(!i&&!s)return!1;if(t._cheater=!a,i&&!r(a)||s&&!r(o))t._length=null;else{var l=i?a.length:1/0;s&&(l=Math.min(l,o.length)),t.a&&t.a.length&&(l=Math.min(l,t.a.length)),t.b&&t.b.length&&(l=Math.min(l,t.b.length)),t._length=l}return!0}},{"../../lib":696}],902:[function(e,t,n){"use strict";var r=e("../scattergeo/attributes"),a=e("../../components/colorscale/attributes"),i=e("../../components/colorbar/attributes"),o=e("../../plots/attributes"),s=e("../../lib/extend").extendFlat,l=r.marker.line;t.exports=s({locations:{valType:"data_array",editType:"calc"},locationmode:r.locationmode,z:{valType:"data_array",editType:"calc"},text:s({},r.text,{}),marker:{line:{color:l.color,width:s({},l.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:r.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:r.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:s({},o.hoverinfo,{editType:"calc",flags:["location","z","text","name"]})},a("",{cLetter:"z",editTypeOverride:"calc"}),{colorbar:i})},{"../../components/colorbar/attributes":571,"../../components/colorscale/attributes":577,"../../lib/extend":685,"../../plots/attributes":741,"../scattergeo/attributes":1083}],903:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),a=e("../../constants/numerical").BADNUM,i=e("../../components/colorscale/calc"),o=e("../scatter/arrays_to_calcdata"),s=e("../scatter/calc_selection");t.exports=function(e,t){for(var n=t._length,l=new Array(n),u=0;u<n;u++){var c=l[u]={},f=t.locations[u],d=t.z[u];c.loc="string"==typeof f?f:null,c.z=r(d)?d:a}return o(l,t),i(t,t.z,"","z"),s(l,t),l}},{"../../components/colorscale/calc":578,"../../constants/numerical":673,"../scatter/arrays_to_calcdata":1042,"../scatter/calc_selection":1045,"fast-isnumeric":214}],904:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("../../components/colorscale/defaults"),i=e("./attributes");t.exports=function(e,t,n,o){function s(n,a){return r.coerce(e,t,i,n,a)}var l=s("locations"),u=s("z");l&&l.length&&r.isArrayOrTypedArray(u)&&u.length?(t._length=Math.min(l.length,u.length),s("locationmode"),s("text"),s("marker.line.color"),s("marker.line.width"),s("marker.opacity"),a(e,t,o,s,{prefix:"",cLetter:"z"}),r.coerceSelectionMarkerOpacity(t,s)):t.visible=!1}},{"../../components/colorscale/defaults":580,"../../lib":696,"./attributes":902}],905:[function(e,t,n){"use strict";t.exports=function(e,t){return e.location=t.location,e.z=t.z,e}},{}],906:[function(e,t,n){"use strict";var r=e("../../plots/cartesian/axes"),a=e("./attributes"),i=e("../scatter/fill_hover_text");t.exports=function(e,t,n){var o,s,l,u,c=e.cd,f=c[0].trace,d=e.subplot;for(s=0;s<c.length;s++)if(o=c[s],u=!1,o._polygons){for(l=0;l<o._polygons.length;l++)o._polygons[l].contains([t,n])&&(u=!u),o._polygons[l].contains([t+360,n])&&(u=!u);if(u)break}if(u&&o)return e.x0=e.x1=e.xa.c2p(o.ct),e.y0=e.y1=e.ya.c2p(o.ct),e.index=o.index,e.location=o.loc,e.z=o.z,function(e,t,n,o){var s=n.hi||t.hoverinfo,l="all"===s?a.hoverinfo.flags:s.split("+"),u=-1!==l.indexOf("name"),c=-1!==l.indexOf("location"),f=-1!==l.indexOf("z"),d=-1!==l.indexOf("text"),p=[];!u&&c?e.nameOverride=n.loc:(u&&(e.nameOverride=t.name),c&&p.push(n.loc)),f&&p.push(function(e){return r.tickText(o,o.c2l(e),"hover").text}(n.z)),d&&i(n,t,p),e.extraText=p.join("<br>")}(e,f,o,d.mockAxis),[e]}},{"../../plots/cartesian/axes":744,"../scatter/fill_hover_text":1051,"./attributes":902}],907:[function(e,t,n){"use strict";var r={};r.attributes=e("./attributes"),r.supplyDefaults=e("./defaults"),r.colorbar=e("../heatmap/colorbar"),r.calc=e("./calc"),r.plot=e("./plot"),r.style=e("./style").style,r.styleOnSelect=e("./style").styleOnSelect,r.hoverPoints=e("./hover"),r.eventData=e("./event_data"),r.selectPoints=e("./select"),r.moduleType="trace",r.name="choropleth",r.basePlotModule=e("../../plots/geo"),r.categories=["geo","noOpacity"],r.meta={},t.exports=r},{"../../plots/geo":775,"../heatmap/colorbar":948,"./attributes":902,"./calc":903,"./defaults":904,"./event_data":905,"./hover":906,"./plot":908,"./select":909,"./style":910}],908:[function(e,t,n){"use strict";var r=e("d3"),a=e("../../lib"),i=e("../../lib/polygon"),o=e("../../lib/topojson_utils").getTopojsonFeatures,s=e("../../lib/geo_location_utils").locationToFeature,l=e("./style").style;function u(e,t){for(var n=e[0].trace,r=e.length,a=o(n,t),i=0;i<r;i++){var l=e[i],u=s(n.locationmode,l.loc,a);u?(l.geojson=u,l.ct=u.properties.ct,l.index=i,l._polygons=c(u)):l.geojson=null}}function c(e){var t,n,r,a,o=e.geometry,s=o.coordinates,l=e.id,u=[];function c(e){for(var t=0;t<e.length-1;t++)if(e[t][0]>0&&e[t+1][0]<0)return t;return null}switch(t="RUS"===l||"FJI"===l?function(e){var t;if(null===c(e))t=e;else for(t=new Array(e.length),a=0;a<e.length;a++)t[a]=[e[a][0]<0?e[a][0]+360:e[a][0],e[a][1]];u.push(i.tester(t))}:"ATA"===l?function(e){var t=c(e);if(null===t)return u.push(i.tester(e));var n=new Array(e.length+1),r=0;for(a=0;a<e.length;a++)a>t?n[r++]=[e[a][0]+360,e[a][1]]:a===t?(n[r++]=e[a],n[r++]=[e[a][0],-90]):n[r++]=e[a];var o=i.tester(n);o.pts.pop(),u.push(o)}:function(e){u.push(i.tester(e))},o.type){case"MultiPolygon":for(n=0;n<s.length;n++)for(r=0;r<s[n].length;r++)t(s[n][r]);break;case"Polygon":for(n=0;n<s.length;n++)t(s[n])}return u}t.exports=function(e,t,n){for(var i=0;i<n.length;i++)u(n[i],t.topojson);var o=t.layers.backplot.select(".choroplethlayer");a.makeTraceGroups(o,n,"trace choropleth").each(function(t){var n=t[0].node3=r.select(this),i=n.selectAll("path.choroplethlocation").data(a.identity);i.enter().append("path").classed("choroplethlocation",!0),i.exit().remove(),l(e,t)})}},{"../../lib":696,"../../lib/geo_location_utils":688,"../../lib/polygon":708,"../../lib/topojson_utils":723,"./style":910,d3:148}],909:[function(e,t,n){"use strict";t.exports=function(e,t){var n,r,a,i,o,s=e.cd,l=e.xaxis,u=e.yaxis,c=[];if(!1===t)for(n=0;n<s.length;n++)s[n].selected=0;else for(n=0;n<s.length;n++)r=s[n],(a=r.ct)&&(i=l.c2p(a),o=u.c2p(a),t.contains([i,o],null,n,e)?(c.push({pointNumber:n,lon:a[0],lat:a[1]}),r.selected=1):r.selected=0);return c}},{}],910:[function(e,t,n){"use strict";var r=e("d3"),a=e("../../components/color"),i=e("../../components/drawing"),o=e("../../components/colorscale");function s(e,t){var n=t[0].trace,s=t[0].node3,l=s.selectAll(".choroplethlocation"),u=n.marker||{},c=u.line||{},f=o.makeColorScaleFunc(o.extractScale(n.colorscale,n.zmin,n.zmax));l.each(function(e){r.select(this).attr("fill",f(e.z)).call(a.stroke,e.mlc||c.color).call(i.dashLine,"",e.mlw||c.width||0).style("opacity",u.opacity)}),i.selectedPointStyle(l,n,e)}t.exports={style:function(e,t){t&&s(e,t)},styleOnSelect:function(e,t){var n=t[0].node3,r=t[0].trace;r.selectedpoints?i.selectedPointStyle(n.selectAll(".choroplethlocation"),r,e):s(e,t)}}},{"../../components/color":570,"../../components/colorscale":585,"../../components/drawing":595,d3:148}],911:[function(e,t,n){"use strict";var r=e("../../components/colorscale/attributes"),a=e("../../components/colorbar/attributes"),i=e("../mesh3d/attributes"),o=e("../../plots/attributes"),s=e("../../lib/extend").extendFlat,l={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"}};s(l,r("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:a}),["opacity","lightposition","lighting"].forEach(function(e){l[e]=i[e]}),l.hoverinfo=s({},o.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),l.transforms=void 0,t.exports=l},{"../../components/colorbar/attributes":571,"../../components/colorscale/attributes":577,"../../lib/extend":685,"../../plots/attributes":741,"../mesh3d/attributes":986}],912:[function(e,t,n){"use strict";var r=e("../../components/colorscale/calc");t.exports=function(e,t){for(var n=t.u,a=t.v,i=t.w,o=Math.min(t.x.length,t.y.length,t.z.length,n.length,a.length,i.length),s=-1/0,l=1/0,u=0;u<o;u++){var c=n[u],f=a[u],d=i[u],p=Math.sqrt(c*c+f*f+d*d);s=Math.max(s,p),l=Math.min(l,p)}t._len=o,t._normMax=s,r(t,[l,s],"","c")}},{"../../components/colorscale/calc":578}],913:[function(e,t,n){"use strict";var r=e("gl-cone3d"),a=e("gl-cone3d").createConeMesh,i=e("../../lib").simpleMap,o=e("../../lib/gl_format_color").parseColorScale,s=e("../../plots/gl3d/zip3");function l(e,t){this.scene=e,this.uid=t,this.mesh=null,this.data=null}var u=l.prototype;u.handlePick=function(e){if(e.object===this.mesh){var t=e.index=e.data.index,n=this.data.x[t],r=this.data.y[t],a=this.data.z[t],i=this.data.u[t],o=this.data.v[t],s=this.data.w[t];e.traceCoordinate=[n,r,a,i,o,s,Math.sqrt(i*i+o*o+s*s)];var l=this.data.text;return Array.isArray(l)&&void 0!==l[t]?e.textLabel=l[t]:l&&(e.textLabel=l),!0}};var c={xaxis:0,yaxis:1,zaxis:2},f={tip:1,tail:0,cm:.25,center:.5},d={tip:1,tail:1,cm:.75,center:.5};function p(e,t){var n=e.fullSceneLayout,a=e.dataScale,l={};function u(e,t){var r=n[t],o=a[c[t]];return i(e,function(e){return r.d2l(e)*o})}l.vectors=s(u(t.u,"xaxis"),u(t.v,"yaxis"),u(t.w,"zaxis"),t._len),l.positions=s(u(t.x,"xaxis"),u(t.y,"yaxis"),u(t.z,"zaxis"),t._len),l.colormap=o(t.colorscale),l.vertexIntensityBounds=[t.cmin/t._normMax,t.cmax/t._normMax],l.coneOffset=f[t.anchor],"scaled"===t.sizemode?l.coneSize=t.sizeref||.5:l.coneSize=t.sizeref&&t._normMax?t.sizeref/t._normMax:.5;var p=r(l),h=t.lightposition;return p.lightPosition=[h.x,h.y,h.z],p.ambient=t.lighting.ambient,p.diffuse=t.lighting.diffuse,p.specular=t.lighting.specular,p.roughness=t.lighting.roughness,p.fresnel=t.lighting.fresnel,p.opacity=t.opacity,t._pad=d[t.anchor]*p.vectorScale*p.coneScale*t._normMax,p}u.update=function(e){this.data=e;var t=p(this.scene,e);this.mesh.update(t)},u.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},t.exports=function(e,t){var n=e.glplot.gl,r=p(e,t),i=a(n,r),o=new l(e,t.uid);return o.mesh=i,o.data=t,i._trace=o,e.glplot.add(i),o}},{"../../lib":696,"../../lib/gl_format_color":692,"../../plots/gl3d/zip3":798,"gl-cone3d":231}],914:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("../../components/colorscale/defaults"),i=e("./attributes");t.exports=function(e,t,n,o){function s(n,a){return r.coerce(e,t,i,n,a)}var l=s("u"),u=s("v"),c=s("w"),f=s("x"),d=s("y"),p=s("z");l&&l.length&&u&&u.length&&c&&c.length&&f&&f.length&&d&&d.length&&p&&p.length?(s("sizeref"),s("sizemode"),s("anchor"),s("lighting.ambient"),s("lighting.diffuse"),s("lighting.specular"),s("lighting.roughness"),s("lighting.fresnel"),s("lightposition.x"),s("lightposition.y"),s("lightposition.z"),a(e,t,o,s,{prefix:"",cLetter:"c"}),s("text"),t._length=null):t.visible=!1}},{"../../components/colorscale/defaults":580,"../../lib":696,"./attributes":911}],915:[function(e,t,n){"use strict";t.exports={moduleType:"trace",name:"cone",basePlotModule:e("../../plots/gl3d"),categories:["gl3d"],attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:e("./calc"),plot:e("./convert"),meta:{}}},{"../../plots/gl3d":787,"./attributes":911,"./calc":912,"./convert":913,"./defaults":914}],916:[function(e,t,n){"use strict";var r=e("../heatmap/attributes"),a=e("../scatter/attributes"),i=e("../../components/colorscale/attributes"),o=e("../../components/colorbar/attributes"),s=e("../../components/drawing/attributes").dash,l=e("../../plots/font_attributes"),u=e("../../lib/extend").extendFlat,c=e("../../constants/filter_ops"),f=c.COMPARISON_OPS2,d=c.INTERVAL_OPS,p=a.line;t.exports=u({z:r.z,x:r.x,x0:r.x0,dx:r.dx,y:r.y,y0:r.y0,dy:r.dy,text:r.text,transpose:r.transpose,xtype:r.xtype,ytype:r.ytype,zhoverformat:r.zhoverformat,connectgaps:r.connectgaps,fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:l({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot"},operation:{valType:"enumerated",values:[].concat(f).concat(d),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:u({},p.color,{editType:"style+colorbars"}),width:u({},p.width,{editType:"style+colorbars"}),dash:s,smoothing:u({},p.smoothing,{}),editType:"plot"}},i("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}),{colorbar:o})},{"../../components/colorbar/attributes":571,"../../components/colorscale/attributes":577,"../../components/drawing/attributes":594,"../../constants/filter_ops":669,"../../lib/extend":685,"../../plots/font_attributes":771,"../heatmap/attributes":945,"../scatter/attributes":1043}],917:[function(e,t,n){"use strict";var r=e("../heatmap/calc"),a=e("./set_contours");t.exports=function(e,t){var n=r(e,t);return a(t),n}},{"../heatmap/calc":946,"./set_contours":935}],918:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){var a,i,o,s=e[0],l=s.x.length,u=s.y.length,c=s.z,f=r.contours,d=-1/0,p=1/0;for(a=0;a<u;a++)p=Math.min(p,c[a][0]),p=Math.min(p,c[a][l-1]),d=Math.max(d,c[a][0]),d=Math.max(d,c[a][l-1]);for(a=1;a<l-1;a++)p=Math.min(p,c[0][a]),p=Math.min(p,c[u-1][a]),d=Math.max(d,c[0][a]),d=Math.max(d,c[u-1][a]);switch(s.prefixBoundary=!1,t){case">":f.value>d&&(s.prefixBoundary=!0);break;case"<":f.value<p&&(s.prefixBoundary=!0);break;case"[]":i=Math.min.apply(null,f.value),((o=Math.max.apply(null,f.value))<p||i>d)&&(s.prefixBoundary=!0);break;case"][":i=Math.min.apply(null,f.value),o=Math.max.apply(null,f.value),i<p&&o>d&&(s.prefixBoundary=!0)}}},{}],919:[function(e,t,n){"use strict";var r=e("../../components/colorbar/draw"),a=e("./make_color_map"),i=e("./end_plus");t.exports=function(e,t){var n=t[0].trace,o="cb"+n.uid;if(e._fullLayout._infolayer.selectAll("."+o).remove(),n.showscale){var s=t[0].t.cb=r(e,o),l=n.contours,u=n.line,c=l.size||1,f=l.coloring,d=a(n,{isColorbar:!0});s.fillgradient("heatmap"===f?n.colorscale:"").zrange("heatmap"===f?[n.zmin,n.zmax]:"").fillcolor("fill"===f?d:"").line({color:"lines"===f?d:u.color,width:!1!==l.showlines?u.width:0,dash:u.dash}).levels({start:l.start,end:i(l),size:c}).options(n.colorbar)()}}},{"../../components/colorbar/draw":575,"./end_plus":927,"./make_color_map":932}],920:[function(e,t,n){"use strict";t.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},{}],921:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),a=e("./label_defaults"),i=e("../../components/color"),o=i.addOpacity,s=i.opacity,l=e("../../constants/filter_ops"),u=l.CONSTRAINT_REDUCTION,c=l.COMPARISON_OPS2;t.exports=function(e,t,n,i,l,f){var d,p,h,m=t.contours,v=n("contours.operation");if(m._operation=u[v],function(e,t){var n;-1===c.indexOf(t.operation)?(e("contours.value",[0,1]),Array.isArray(t.value)?t.value.length>2?t.value=t.value.slice(2):0===t.length?t.value=[0,1]:t.length<2?(n=parseFloat(t.value[0]),t.value=[n,n+1]):t.value=[parseFloat(t.value[0]),parseFloat(t.value[1])]:r(t.value)&&(n=parseFloat(t.value),t.value=[n,n+1])):(e("contours.value",0),r(t.value)||(Array.isArray(t.value)?t.value=parseFloat(t.value[0]):t.value=0))}(n,m),"="===v?d=m.showlines=!0:(d=n("contours.showlines"),h=n("fillcolor",o((e.line||{}).color||l,.5))),d){var g=h&&s(h)?o(t.fillcolor,1):l;p=n("line.color",g),n("line.width",2),n("line.dash")}n("line.smoothing"),a(n,i,p,f)}},{"../../components/color":570,"../../constants/filter_ops":669,"./label_defaults":931,"fast-isnumeric":214}],922:[function(e,t,n){"use strict";var r=e("../../constants/filter_ops"),a=e("fast-isnumeric");function i(e,t){var n,i=Array.isArray(t);function o(e){return a(e)?+e:null}return-1!==r.COMPARISON_OPS2.indexOf(e)?n=o(i?t[0]:t):-1!==r.INTERVAL_OPS.indexOf(e)?n=i?[o(t[0]),o(t[1])]:[o(t),o(t)]:-1!==r.SET_OPS.indexOf(e)&&(n=i?t.map(o):[o(t)]),n}function o(e){return function(t){t=i(e,t);var n=Math.min(t[0],t[1]),r=Math.max(t[0],t[1]);return{start:n,end:r,size:r-n}}}function s(e){return function(t){return{start:t=i(e,t),end:1/0,size:1/0}}}t.exports={"[]":o("[]"),"][":o("]["),">":s(">"),"<":s("<"),"=":s("=")}},{"../../constants/filter_ops":669,"fast-isnumeric":214}],923:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){var a=r("contours.start"),i=r("contours.end"),o=!1===a||!1===i,s=n("contours.size");!(o?t.autocontour=!0:n("autocontour",!1))&&s||n("ncontours")}},{}],924:[function(e,t,n){"use strict";var r=e("../../lib");function a(e){return r.extendFlat({},e,{edgepaths:r.extendDeep([],e.edgepaths),paths:r.extendDeep([],e.paths)})}t.exports=function(e,t){var n,i,o,s=function(e){return e.reverse()},l=function(e){return e};switch(t){case"=":case"<":return e;case">":for(1!==e.length&&r.warn("Contour data invalid for the specified inequality operation."),i=e[0],n=0;n<i.edgepaths.length;n++)i.edgepaths[n]=s(i.edgepaths[n]);for(n=0;n<i.paths.length;n++)i.paths[n]=s(i.paths[n]);return e;case"][":var u=s;s=l,l=u;case"[]":for(2!==e.length&&r.warn("Contour data invalid for the specified inequality range operation."),i=a(e[0]),o=a(e[1]),n=0;n<i.edgepaths.length;n++)i.edgepaths[n]=s(i.edgepaths[n]);for(n=0;n<i.paths.length;n++)i.paths[n]=s(i.paths[n]);for(;o.edgepaths.length;)i.edgepaths.push(l(o.edgepaths.shift()));for(;o.paths.length;)i.paths.push(l(o.paths.shift()));return[i]}}},{"../../lib":696}],925:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("../heatmap/xyz_defaults"),i=e("./constraint_defaults"),o=e("./contours_defaults"),s=e("./style_defaults"),l=e("./attributes");t.exports=function(e,t,n,u){function c(n,a){return r.coerce(e,t,l,n,a)}var f=a(e,t,c,u);if(f){c("text");var d="constraint"===c("contours.type");c("connectgaps",r.isArray1D(t.z)),d?i(e,t,c,u,n):(o(e,t,c,function(n){return r.coerce2(e,t,l,n)}),s(e,t,c,u))}else t.visible=!1}},{"../../lib":696,"../heatmap/xyz_defaults":960,"./attributes":916,"./constraint_defaults":921,"./contours_defaults":923,"./style_defaults":937}],926:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("./constraint_mapping"),i=e("./end_plus");t.exports=function(e,t,n){for(var o="constraint"===e.type?a[e._operation](e.value):e,s=o.size,l=[],u=i(o),c=n.trace._carpetTrace,f=c?{xaxis:c.aaxis,yaxis:c.baxis,x:n.a,y:n.b}:{xaxis:t.xaxis,yaxis:t.yaxis,x:n.x,y:n.y},d=o.start;d<u;d+=s)if(l.push(r.extendFlat({level:d,crossings:{},starts:[],edgepaths:[],paths:[],z:n.z,smoothing:n.trace.line.smoothing},f)),l.length>1e3){r.warn("Too many contours, clipping at 1000",e);break}return l}},{"../../lib":696,"./constraint_mapping":922,"./end_plus":927}],927:[function(e,t,n){"use strict";t.exports=function(e){return e.end+e.size/1e6}},{}],928:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("./constants");function i(e,t,n,r){return Math.abs(e[0]-t[0])<n&&Math.abs(e[1]-t[1])<r}function o(e,t){var n=e[2]-t[2],r=e[3]-t[3];return Math.sqrt(n*n+r*r)}function s(e,t,n,s,u){var c,f=t.join(","),d=f,p=e.crossings[d],h=function(e,t,n){var r=0,i=0;return e>20&&t?208===e||1114===e?r=0===n[0]?1:-1:i=0===n[1]?1:-1:-1!==a.BOTTOMSTART.indexOf(e)?i=1:-1!==a.LEFTSTART.indexOf(e)?r=1:-1!==a.TOPSTART.indexOf(e)?i=-1:r=-1,[r,i]}(p,n,t),m=[l(e,t,[-h[0],-h[1]])],v=h.join(","),g=e.z.length,y=e.z[0].length;for(c=0;c<1e4;c++){if(p>20?(p=a.CHOOSESADDLE[p][(h[0]||h[1])<0?0:1],e.crossings[d]=a.SADDLEREMAINDER[p]):delete e.crossings[d],!(h=a.NEWDELTA[p])){r.log("Found bad marching index:",p,t,e.level);break}m.push(l(e,t,h)),t[0]+=h[0],t[1]+=h[1],i(m[m.length-1],m[m.length-2],s,u)&&m.pop(),d=t.join(",");var b=h[0]&&(t[0]<0||t[0]>y-2)||h[1]&&(t[1]<0||t[1]>g-2),x=d===f&&h.join(",")===v;if(x||n&&b)break;p=e.crossings[d]}1e4===c&&r.log("Infinite loop in contour?");var _,w,T,k,C,E,M,A,S,O,P,R=i(m[0],m[m.length-1],s,u),L=0,D=.2*e.smoothing,I=[],z=0;for(c=1;c<m.length;c++)M=o(m[c],m[c-1]),L+=M,I.push(M);var j=L/I.length*D;function N(e){return m[e%m.length]}for(c=m.length-2;c>=z;c--)if((_=I[c])<j){for(T=0,w=c-1;w>=z&&_+I[w]<j;w--)_+=I[w];if(R&&c===m.length-2)for(T=0;T<w&&_+I[T]<j;T++)_+=I[T];C=c-w+T+1,E=Math.floor((c+w+T+2)/2),k=R||c!==m.length-2?R||-1!==w?C%2?N(E):[(N(E)[0]+N(E+1)[0])/2,(N(E)[1]+N(E+1)[1])/2]:m[0]:m[m.length-1],m.splice(w+1,c-w+1,k),c=w+1,T&&(z=T),R&&(c===m.length-2?m[T]=m[m.length-1]:0===c&&(m[m.length-1]=m[0]))}for(m.splice(0,z),c=0;c<m.length;c++)m[c].length=2;if(!(m.length<2))if(R)m.pop(),e.paths.push(m);else{n||r.log("Unclosed interior contour?",e.level,f,m.join("L"));var F=!1;for(A=0;A<e.edgepaths.length;A++)if(O=e.edgepaths[A],!F&&i(O[0],m[m.length-1],s,u)){m.pop(),F=!0;var B=!1;for(S=0;S<e.edgepaths.length;S++)if(i((P=e.edgepaths[S])[P.length-1],m[0],s,u)){B=!0,m.shift(),e.edgepaths.splice(A,1),S===A?e.paths.push(m.concat(P)):(S>A&&S--,e.edgepaths[S]=P.concat(m,O));break}B||(e.edgepaths[A]=m.concat(O))}for(A=0;A<e.edgepaths.length&&!F;A++)i((O=e.edgepaths[A])[O.length-1],m[0],s,u)&&(m.shift(),e.edgepaths[A]=O.concat(m),F=!0);F||e.edgepaths.push(m)}}function l(e,t,n){var r=t[0]+Math.max(n[0],0),a=t[1]+Math.max(n[1],0),i=e.z[a][r],o=e.xaxis,s=e.yaxis;if(n[1]){var l=(e.level-i)/(e.z[a][r+1]-i);return[o.c2p((1-l)*e.x[r]+l*e.x[r+1],!0),s.c2p(e.y[a],!0),r+l,a]}var u=(e.level-i)/(e.z[a+1][r]-i);return[o.c2p(e.x[r],!0),s.c2p((1-u)*e.y[a]+u*e.y[a+1],!0),r,a+u]}t.exports=function(e,t,n){var a,i,o,l,u;for(t=t||.01,n=n||.01,o=0;o<e.length;o++){for(l=e[o],u=0;u<l.starts.length;u++)i=l.starts[u],s(l,i,"edge",t,n);for(a=0;Object.keys(l.crossings).length&&a<1e4;)a++,i=Object.keys(l.crossings)[0].split(",").map(Number),s(l,i,void 0,t,n);1e4===a&&r.log("Infinite loop in contour?")}}},{"../../lib":696,"./constants":920}],929:[function(e,t,n){"use strict";var r=e("../../components/color"),a=e("../heatmap/hover");t.exports=function(e,t,n,i,o){var s=a(e,t,n,i,o,!0);return s&&s.forEach(function(e){var t=e.trace;"constraint"===t.contours.type&&(t.fillcolor&&r.opacity(t.fillcolor)?e.color=r.addOpacity(t.fillcolor,1):t.contours.showlines&&r.opacity(t.line.color)&&(e.color=r.addOpacity(t.line.color,1)))}),s}},{"../../components/color":570,"../heatmap/hover":952}],930:[function(e,t,n){"use strict";var r={};r.attributes=e("./attributes"),r.supplyDefaults=e("./defaults"),r.calc=e("./calc"),r.plot=e("./plot").plot,r.style=e("./style"),r.colorbar=e("./colorbar"),r.hoverPoints=e("./hover"),r.moduleType="trace",r.name="contour",r.basePlotModule=e("../../plots/cartesian"),r.categories=["cartesian","svg","2dMap","contour","showLegend"],r.meta={},t.exports=r},{"../../plots/cartesian":756,"./attributes":916,"./calc":917,"./colorbar":919,"./defaults":925,"./hover":929,"./plot":934,"./style":936}],931:[function(e,t,n){"use strict";var r=e("../../lib");t.exports=function(e,t,n,a){a||(a={});var i=e("contours.showlabels");if(i){var o=t.font;r.coerceFont(e,"contours.labelfont",{family:o.family,size:o.size,color:n}),e("contours.labelformat")}!1!==a.hasHover&&e("zhoverformat")}},{"../../lib":696}],932:[function(e,t,n){"use strict";var r=e("d3"),a=e("../../components/colorscale"),i=e("./end_plus");t.exports=function(e){var t=e.contours,n=t.start,o=i(t),s=t.size||1,l=Math.floor((o-n)/s)+1,u="lines"===t.coloring?0:1;isFinite(s)||(s=1,l=1);var c,f,d=e.colorscale,p=d.length,h=new Array(p),m=new Array(p);if("heatmap"===t.coloring){for(e.zauto&&!1===e.autocontour&&(e.zmin=n-s/2,e.zmax=e.zmin+l*s),f=0;f<p;f++)c=d[f],h[f]=c[0]*(e.zmax-e.zmin)+e.zmin,m[f]=c[1];var v=r.extent([e.zmin,e.zmax,t.start,t.start+s*(l-1)]),g=v[e.zmin<e.zmax?0:1],y=v[e.zmin<e.zmax?1:0];g!==e.zmin&&(h.splice(0,0,g),m.splice(0,0,Range[0])),y!==e.zmax&&(h.push(y),m.push(m[m.length-1]))}else for(f=0;f<p;f++)c=d[f],h[f]=(c[0]*(l+u-1)-u/2)*s+n,m[f]=c[1];return a.makeColorScaleFunc({domain:h,range:m},{noNumericCheck:!0})}},{"../../components/colorscale":585,"./end_plus":927,d3:148}],933:[function(e,t,n){"use strict";var r=e("./constants");function a(e,t){var n=(t[0][0]>e?0:1)+(t[0][1]>e?0:2)+(t[1][1]>e?0:4)+(t[1][0]>e?0:8);if(5===n||10===n){var r=(t[0][0]+t[0][1]+t[1][0]+t[1][1])/4;return e>r?5===n?713:1114:5===n?104:208}return 15===n?0:n}t.exports=function(e){var t,n,i,o,s,l,u,c,f,d=e[0].z,p=d.length,h=d[0].length,m=2===p||2===h;for(n=0;n<p-1;n++)for(o=[],0===n&&(o=o.concat(r.BOTTOMSTART)),n===p-2&&(o=o.concat(r.TOPSTART)),t=0;t<h-1;t++)for(i=o.slice(),0===t&&(i=i.concat(r.LEFTSTART)),t===h-2&&(i=i.concat(r.RIGHTSTART)),s=t+","+n,l=[[d[n][t],d[n][t+1]],[d[n+1][t],d[n+1][t+1]]],f=0;f<e.length;f++)c=e[f],(u=a(c.level,l))&&(c.crossings[s]=u,-1!==i.indexOf(u)&&(c.starts.push([t,n]),m&&-1!==i.indexOf(u,i.indexOf(u)+1)&&c.starts.push([t,n])))}},{"./constants":920}],934:[function(e,t,n){"use strict";var r=e("d3"),a=e("../../lib"),i=e("../../components/drawing"),o=e("../../lib/svg_text_utils"),s=e("../../plots/cartesian/axes"),l=e("../../plots/cartesian/set_convert"),u=e("../heatmap/plot"),c=e("./make_crossings"),f=e("./find_all_paths"),d=e("./empty_pathinfo"),p=e("./convert_to_constraints"),h=e("./close_boundaries"),m=e("./constants"),v=m.LABELOPTIMIZER;function g(e,t){var n,r,o,s,l,u,c=function(e,t){var n=e.prefixBoundary;if(void 0===n){var r=Math.min(e.z[0][0],e.z[0][1]);n=!e.edgepaths.length&&r>e.level}return n?"M"+t.join("L")+"Z":""}(e,t),f=0,d=e.edgepaths.map(function(e,t){return t}),p=!0;function h(e){return Math.abs(e[1]-t[0][1])<.01}function m(e){return Math.abs(e[1]-t[2][1])<.01}function v(e){return Math.abs(e[0]-t[0][0])<.01}function g(e){return Math.abs(e[0]-t[2][0])<.01}for(;d.length;){for(u=i.smoothopen(e.edgepaths[f],e.smoothing),c+=p?u:u.replace(/^M/,"L"),d.splice(d.indexOf(f),1),n=e.edgepaths[f][e.edgepaths[f].length-1],s=-1,o=0;o<4;o++){if(!n){a.log("Missing end?",f,e);break}for(h(n)&&!g(n)?r=t[1]:v(n)?r=t[0]:m(n)?r=t[3]:g(n)&&(r=t[2]),l=0;l<e.edgepaths.length;l++){var y=e.edgepaths[l][0];Math.abs(n[0]-r[0])<.01?Math.abs(n[0]-y[0])<.01&&(y[1]-n[1])*(r[1]-y[1])>=0&&(r=y,s=l):Math.abs(n[1]-r[1])<.01?Math.abs(n[1]-y[1])<.01&&(y[0]-n[0])*(r[0]-y[0])>=0&&(r=y,s=l):a.log("endpt to newendpt is not vert. or horz.",n,r,y)}if(n=r,s>=0)break;c+="L"+r}if(s===e.edgepaths.length){a.log("unclosed perimeter path");break}f=s,(p=-1===d.indexOf(f))&&(f=d[0],c+="Z")}for(f=0;f<e.paths.length;f++)c+=i.smoothclosed(e.paths[f],e.smoothing);return c}function y(e,t,n,r){var i=t.width/2,o=t.height/2,s=e.x,l=e.y,u=e.theta,c=Math.cos(u)*i,f=Math.sin(u)*i,d=(s>r.center?r.right-s:s-r.left)/(c+Math.abs(Math.sin(u)*o)),p=(l>r.middle?r.bottom-l:l-r.top)/(Math.abs(f)+Math.cos(u)*o);if(d<1||p<1)return 1/0;var h=v.EDGECOST*(1/(d-1)+1/(p-1));h+=v.ANGLECOST*u*u;for(var m=s-c,g=l-f,y=s+c,b=l+f,x=0;x<n.length;x++){var _=n[x],w=Math.cos(_.theta)*_.width/2,T=Math.sin(_.theta)*_.width/2,k=2*a.segmentDistance(m,g,y,b,_.x-w,_.y-T,_.x+w,_.y+T)/(t.height+_.height),C=_.level===t.level,E=C?v.SAMELEVELDISTANCE:1;if(k<=E)return 1/0;var M=v.NEIGHBORCOST*(C?v.SAMELEVELFACTOR:1);h+=M/(k-E)}return h}n.plot=function(e,t,o,s){var l=t.xaxis,v=t.yaxis,y=e._fullLayout;a.makeTraceGroups(s,o,"contour").each(function(o){var s=r.select(this),b=o[0],x=b.trace,_=b.x,w=b.y,T=x.contours,k=d(T,t,b),C=a.ensureSingle(s,"g","heatmapcoloring"),E=[];"heatmap"===T.coloring&&(x.zauto&&!1===x.autocontour&&(x._input.zmin=x.zmin=T.start-T.size/2,x._input.zmax=x.zmax=x.zmin+k.length*T.size),E=[o]),u(e,t,E,C),c(k),f(k);var M=l.c2p(_[0],!0),A=l.c2p(_[_.length-1],!0),S=v.c2p(w[0],!0),O=v.c2p(w[w.length-1],!0),P=[[M,O],[A,O],[A,S],[M,S]],R=k;"constraint"===T.type&&(R=p(k,T._operation),h(R,T._operation,P,x)),function(e,t,n){var r=a.ensureSingle(e,"g","contourbg").selectAll("path").data("fill"===n.coloring?[0]:[]);r.enter().append("path"),r.exit().remove(),r.attr("d","M"+t.join("L")+"Z").style("stroke","none")}(s,P,T),function(e,t,n,i){var o=a.ensureSingle(e,"g","contourfill").selectAll("path").data("fill"===i.coloring||"constraint"===i.type&&"="!==i._operation?t:[]);o.enter().append("path"),o.exit().remove(),o.each(function(e){var t=g(e,n);t?r.select(this).attr("d",t).style("stroke","none"):r.select(this).remove()})}(s,R,P,T),function(e,t,o,s,l,u){var c=a.ensureSingle(e,"g","contourlines"),f=!1!==l.showlines,d=l.showlabels,p=f&&d,h=n.createLines(c,f||d,t),v=n.createLineClip(c,p,o._fullLayout._clips,s.trace.uid),g=e.selectAll("g.contourlabels").data(d?[0]:[]);if(g.exit().remove(),g.enter().append("g").classed("contourlabels",!0),d){var y=[u],b=[];a.clearLocationCache();var x=n.labelFormatter(l,s.t.cb,o._fullLayout),_=i.tester.append("text").attr("data-notex",1).call(i.font,l.labelfont),w=t[0].xaxis._length,T=t[0].yaxis._length,k={left:Math.max(u[0][0],0),right:Math.min(u[2][0],w),top:Math.max(u[0][1],0),bottom:Math.min(u[2][1],T)};k.middle=(k.top+k.bottom)/2,k.center=(k.left+k.right)/2;var C=Math.sqrt(w*w+T*T),E=m.LABELDISTANCE*C/Math.max(1,t.length/m.LABELINCREASE);h.each(function(e){var t=n.calcTextOpts(e.level,x,_,o);r.select(this).selectAll("path").each(function(){var e=a.getVisibleSegment(this,k,t.height/2);if(e&&!(e.len<(t.width+t.height)*m.LABELMIN))for(var r=Math.min(Math.ceil(e.len/E),m.LABELMAX),i=0;i<r;i++){var o=n.findBestTextLocation(this,e,t,b,k);if(!o)break;n.addLabelData(o,t,b,y)}})}),_.remove(),n.drawLabels(g,b,o,v,p?y:null)}d&&!f&&h.remove()}(s,k,e,b,T,P),function(e,t,n,r,o){var s="clip"+r.trace.uid,l=n.selectAll("#"+s).data(r.trace.connectgaps?[]:[0]);if(l.enter().append("clipPath").classed("contourclip",!0).attr("id",s),l.exit().remove(),!1===r.trace.connectgaps){var u={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:t.xaxis,yaxis:t.yaxis,x:r.x,y:r.y,z:function(e){var t,n,r=e.trace._emptypoints,a=[],i=e.z.length,o=e.z[0].length,s=[];for(t=0;t<o;t++)s.push(1);for(t=0;t<i;t++)a.push(s.slice());for(t=0;t<r.length;t++)n=r[t],a[n[0]][n[1]]=0;return e.zmask=a,a}(r),smoothing:0};c([u]),f([u]);var d=g(u,o),p=a.ensureSingle(l,"path","");p.attr("d",d)}else s=null;e.call(i.setClipUrl,s)}(s,t,y._clips,b,P)})},n.createLines=function(e,t,n){var r=n[0].smoothing,a=e.selectAll("g.contourlevel").data(t?n:[]);if(a.exit().remove(),a.enter().append("g").classed("contourlevel",!0),t){var o=a.selectAll("path.openline").data(function(e){return e.pedgepaths||e.edgepaths});o.exit().remove(),o.enter().append("path").classed("openline",!0),o.attr("d",function(e){return i.smoothopen(e,r)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke");var s=a.selectAll("path.closedline").data(function(e){return e.ppaths||e.paths});s.exit().remove(),s.enter().append("path").classed("closedline",!0),s.attr("d",function(e){return i.smoothclosed(e,r)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke")}return a},n.createLineClip=function(e,t,n,r){var a=t?"clipline"+r:null,o=n.selectAll("#"+a).data(t?[0]:[]);return o.exit().remove(),o.enter().append("clipPath").classed("contourlineclip",!0).attr("id",a),i.setClipUrl(e,a),o},n.labelFormatter=function(e,t,n){if(e.labelformat)return n._d3locale.numberFormat(e.labelformat);var r;if(t)r=t.axis;else{if(r={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"},"constraint"===e.type){var a=e.value;Array.isArray(a)?r.range=[a[0],a[a.length-1]]:r.range=[a,a]}else r.range=[e.start,e.end],r.nticks=(e.end-e.start)/e.size;r.range[0]===r.range[1]&&(r.range[1]+=r.range[0]||1),r.nticks||(r.nticks=1e3),l(r,n),s.prepTicks(r),r._tmin=null,r._tmax=null}return function(e){return s.tickText(r,e).text}},n.calcTextOpts=function(e,t,n,r){var a=t(e);n.text(a).call(o.convertToTspans,r);var s=i.bBox(n.node(),!0);return{text:a,width:s.width,height:s.height,level:e,dy:(s.top+s.bottom)/2}},n.findBestTextLocation=function(e,t,n,r,i){var o,s,l,u,c,f=n.width;t.isClosed?(s=t.len/v.INITIALSEARCHPOINTS,o=t.min+s/2,l=t.max):(s=(t.len-f)/(v.INITIALSEARCHPOINTS+1),o=t.min+s+f/2,l=t.max-(s+f)/2);for(var d=1/0,p=0;p<v.ITERATIONS;p++){for(var h=o;h<l;h+=s){var m=a.getTextLocation(e,t.total,h,f),g=y(m,n,r,i);g<d&&(d=g,c=m,u=h)}if(d>2*v.MAXCOST)break;p&&(s/=2),l=(o=u-s/2)+1.5*s}if(d<=v.MAXCOST)return c},n.addLabelData=function(e,t,n,r){var a=t.width/2,i=t.height/2,o=e.x,s=e.y,l=e.theta,u=Math.sin(l),c=Math.cos(l),f=a*c,d=i*u,p=a*u,h=-i*c,m=[[o-f-d,s-p-h],[o+f-d,s+p-h],[o+f+d,s+p+h],[o-f+d,s-p+h]];n.push({text:t.text,x:o,y:s,dy:t.dy,theta:l,level:t.level,width:t.width,height:t.height}),r.push(m)},n.drawLabels=function(e,t,n,i,s){var l=e.selectAll("text").data(t,function(e){return e.text+","+e.x+","+e.y+","+e.theta});if(l.exit().remove(),l.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(e){var t=e.x+Math.sin(e.theta)*e.dy,a=e.y-Math.cos(e.theta)*e.dy;r.select(this).text(e.text).attr({x:t,y:a,transform:"rotate("+180*e.theta/Math.PI+" "+t+" "+a+")"}).call(o.convertToTspans,n)}),s){for(var u="",c=0;c<s.length;c++)u+="M"+s[c].join("L")+"Z";var f=a.ensureSingle(i,"path","");f.attr("d",u)}}},{"../../components/drawing":595,"../../lib":696,"../../lib/svg_text_utils":720,"../../plots/cartesian/axes":744,"../../plots/cartesian/set_convert":763,"../heatmap/plot":957,"./close_boundaries":918,"./constants":920,"./convert_to_constraints":924,"./empty_pathinfo":926,"./find_all_paths":928,"./make_crossings":933,d3:148}],935:[function(e,t,n){"use strict";var r=e("../../plots/cartesian/axes"),a=e("../../lib");function i(e,t,n){var a={type:"linear",range:[e,t]};return r.autoTicks(a,(t-e)/(n||15)),a}t.exports=function(e){var t=e.contours;if(e.autocontour){var n=e.zmin,o=e.zmax;void 0!==n&&void 0!==o||(n=a.aggNums(Math.min,null,e._z),o=a.aggNums(Math.max,null,e._z));var s=i(n,o,e.ncontours);t.size=s.dtick,t.start=r.tickFirst(s),s.range.reverse(),t.end=r.tickFirst(s),t.start===n&&(t.start+=t.size),t.end===o&&(t.end-=t.size),t.start>t.end&&(t.start=t.end=(t.start+t.end)/2),e._input.contours||(e._input.contours={}),a.extendFlat(e._input.contours,{start:t.start,end:t.end,size:t.size}),e._input.autocontour=!0}else if("constraint"!==t.type){var l,u=t.start,c=t.end,f=e._input.contours;u>c&&(t.start=f.start=c,c=t.end=f.end=u,u=t.start),t.size>0||(l=u===c?1:i(u,c,e.ncontours).dtick,f.size=t.size=l)}}},{"../../lib":696,"../../plots/cartesian/axes":744}],936:[function(e,t,n){"use strict";var r=e("d3"),a=e("../../components/drawing"),i=e("../heatmap/style"),o=e("./make_color_map");t.exports=function(e){var t=r.select(e).selectAll("g.contour");t.style("opacity",function(e){return e[0].trace.opacity}),t.each(function(e){var t=r.select(this),n=e[0].trace,i=n.contours,s=n.line,l=i.size||1,u=i.start,c="constraint"===i.type,f=!c&&"lines"===i.coloring,d=!c&&"fill"===i.coloring,p=f||d?o(n):null;t.selectAll("g.contourlevel").each(function(e){r.select(this).selectAll("path").call(a.lineGroupStyle,s.width,f?p(e.level):s.color,s.dash)});var h=i.labelfont;if(t.selectAll("g.contourlabels text").each(function(e){a.font(r.select(this),{family:h.family,size:h.size,color:h.color||(f?p(e.level):s.color)})}),c)t.selectAll("g.contourfill path").style("fill",n.fillcolor);else if(d){var m;t.selectAll("g.contourfill path").style("fill",function(e){return void 0===m&&(m=e.level),p(e.level+.5*l)}),void 0===m&&(m=u),t.selectAll("g.contourbg path").style("fill",p(m-.5*l))}}),i(e)}},{"../../components/drawing":595,"../heatmap/style":958,"./make_color_map":932,d3:148}],937:[function(e,t,n){"use strict";var r=e("../../components/colorscale/defaults"),a=e("./label_defaults");t.exports=function(e,t,n,i,o){var s,l=n("contours.coloring"),u="";"fill"===l&&(s=n("contours.showlines")),!1!==s&&("lines"!==l&&(u=n("line.color","#000")),n("line.width",.5),n("line.dash")),"none"!==l&&(!0!==e.showlegend&&(t.showlegend=!1),t._dfltShowLegend=!1,r(e,t,i,n,{prefix:"",cLetter:"z"})),n("line.smoothing"),a(n,i,u,o)}},{"../../components/colorscale/defaults":580,"./label_defaults":931}],938:[function(e,t,n){"use strict";var r=e("../heatmap/attributes"),a=e("../contour/attributes"),i=a.contours,o=e("../scatter/attributes"),s=e("../../components/colorscale/attributes"),l=e("../../components/colorbar/attributes"),u=e("../../lib/extend").extendFlat,c=o.line;t.exports=u({carpet:{valType:"string",editType:"calc"},z:r.z,a:r.x,a0:r.x0,da:r.dx,b:r.y,b0:r.y0,db:r.dy,text:r.text,transpose:r.transpose,atype:r.xtype,btype:r.ytype,fillcolor:a.fillcolor,autocontour:a.autocontour,ncontours:a.ncontours,contours:{type:i.type,start:i.start,end:i.end,size:i.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:i.showlines,showlabels:i.showlabels,labelfont:i.labelfont,labelformat:i.labelformat,operation:i.operation,value:i.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:u({},c.color,{}),width:c.width,dash:c.dash,smoothing:u({},c.smoothing,{}),editType:"plot"},transforms:void 0},s("",{cLetter:"z",autoColorDflt:!1}),{colorbar:l})},{"../../components/colorbar/attributes":571,"../../components/colorscale/attributes":577,"../../lib/extend":685,"../contour/attributes":916,"../heatmap/attributes":945,"../scatter/attributes":1043}],939:[function(e,t,n){"use strict";var r=e("../../components/colorscale/calc"),a=e("../../lib").isArray1D,i=e("../heatmap/convert_column_xyz"),o=e("../heatmap/clean_2d_array"),s=e("../heatmap/max_row_length"),l=e("../heatmap/interp2d"),u=e("../heatmap/find_empties"),c=e("../heatmap/make_bound_array"),f=e("./defaults"),d=e("../carpet/lookup_carpetid"),p=e("../contour/set_contours");t.exports=function(e,t){var n=t._carpetTrace=d(e,t);if(n&&n.visible&&"legendonly"!==n.visible){if(!t.a||!t.b){var h=e.data[n.index],m=e.data[t.index];m.a||(m.a=h.a),m.b||(m.b=h.b),f(m,t,t._defaultColor,e._fullLayout)}var v=function(e,t){var n,f,d,p,h,m,v,g=t._carpetTrace,y=g.aaxis,b=g.baxis;y._minDtick=0,b._minDtick=0,a(t.z)&&i(t,y,b,"a","b",["z"]),n=t._a=t._a||t.a,p=t._b=t._b||t.b,n=n?y.makeCalcdata(t,"_a"):[],p=p?b.makeCalcdata(t,"_b"):[],f=t.a0||0,d=t.da||1,h=t.b0||0,m=t.db||1,v=t._z=o(t._z||t.z,t.transpose),t._emptypoints=u(v),l(v,t._emptypoints);var x=s(v),_="scaled"===t.xtype?"":n,w=c(t,_,f,d,x,y),T="scaled"===t.ytype?"":p,k=c(t,T,h,m,v.length,b),C={a:w,b:k,z:v};return"levels"===t.contours.type&&"none"!==t.contours.coloring&&r(t,v,"","z"),[C]}(0,t);return p(t),v}}},{"../../components/colorscale/calc":578,"../../lib":696,"../carpet/lookup_carpetid":894,"../contour/set_contours":935,"../heatmap/clean_2d_array":947,"../heatmap/convert_column_xyz":949,"../heatmap/find_empties":951,"../heatmap/interp2d":954,"../heatmap/make_bound_array":955,"../heatmap/max_row_length":956,"./defaults":940}],940:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("../heatmap/xyz_defaults"),i=e("./attributes"),o=e("../contour/constraint_defaults"),s=e("../contour/contours_defaults"),l=e("../contour/style_defaults");t.exports=function(e,t,n,u){function c(n,a){return r.coerce(e,t,i,n,a)}if(c("carpet"),e.a&&e.b){var f=a(e,t,c,u,"a","b");if(!f)return void(t.visible=!1);c("text");var d="constraint"===c("contours.type");d?o(e,t,c,u,n,{hasHover:!1}):(s(e,t,c,function(n){return r.coerce2(e,t,i,n)}),l(e,t,c,u,{hasHover:!1}))}else t._defaultColor=n,t._length=null}},{"../../lib":696,"../contour/constraint_defaults":921,"../contour/contours_defaults":923,"../contour/style_defaults":937,"../heatmap/xyz_defaults":960,"./attributes":938}],941:[function(e,t,n){"use strict";var r={};r.attributes=e("./attributes"),r.supplyDefaults=e("./defaults"),r.colorbar=e("../contour/colorbar"),r.calc=e("./calc"),r.plot=e("./plot"),r.style=e("../contour/style"),r.moduleType="trace",r.name="contourcarpet",r.basePlotModule=e("../../plots/cartesian"),r.categories=["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent"],r.meta={},t.exports=r},{"../../plots/cartesian":756,"../contour/colorbar":919,"../contour/style":936,"./attributes":938,"./calc":939,"./defaults":940,"./plot":944}],942:[function(e,t,n){"use strict";var r=e("../../components/drawing"),a=e("../carpet/axis_aligned_line"),i=e("../../lib");t.exports=function(e,t,n,o,s,l,u,c){var f,d,p,h,m,v,g,y="",b=t.edgepaths.map(function(e,t){return t}),x=!0,_=1e-4*Math.abs(n[0][0]-n[2][0]),w=1e-4*Math.abs(n[0][1]-n[2][1]);function T(e){return Math.abs(e[1]-n[0][1])<w}function k(e){return Math.abs(e[1]-n[2][1])<w}function C(e){return Math.abs(e[0]-n[0][0])<_}function E(e){return Math.abs(e[0]-n[2][0])<_}function M(e,t){var n,r,i,o,f="";for(T(e)&&!E(e)||k(e)&&!C(e)?(o=s.aaxis,i=a(s,l,[e[0],t[0]],.5*(e[1]+t[1]))):(o=s.baxis,i=a(s,l,.5*(e[0]+t[0]),[e[1],t[1]])),n=1;n<i.length;n++)for(f+=o.smoothing?"C":"L",r=0;r<i[n].length;r++){var d=i[n][r];f+=[u.c2p(d[0]),c.c2p(d[1])]+" "}return f}for(f=0,d=null;b.length;){var A=t.edgepaths[f][0];for(d&&(y+=M(d,A)),g=r.smoothopen(t.edgepaths[f].map(o),t.smoothing),y+=x?g:g.replace(/^M/,"L"),b.splice(b.indexOf(f),1),d=t.edgepaths[f][t.edgepaths[f].length-1],m=-1,h=0;h<4;h++){if(!d){i.log("Missing end?",f,t);break}for(T(d)&&!E(d)?p=n[1]:C(d)?p=n[0]:k(d)?p=n[3]:E(d)&&(p=n[2]),v=0;v<t.edgepaths.length;v++){var S=t.edgepaths[v][0];Math.abs(d[0]-p[0])<_?Math.abs(d[0]-S[0])<_&&(S[1]-d[1])*(p[1]-S[1])>=0&&(p=S,m=v):Math.abs(d[1]-p[1])<w?Math.abs(d[1]-S[1])<w&&(S[0]-d[0])*(p[0]-S[0])>=0&&(p=S,m=v):i.log("endpt to newendpt is not vert. or horz.",d,p,S)}if(m>=0)break;y+=M(d,p),d=p}if(m===t.edgepaths.length){i.log("unclosed perimeter path");break}f=m,(x=-1===b.indexOf(f))&&(f=b[0],y+=M(d,p)+"Z",d=null)}for(f=0;f<t.paths.length;f++)y+=r.smoothclosed(t.paths[f].map(o),t.smoothing);return y}},{"../../components/drawing":595,"../../lib":696,"../carpet/axis_aligned_line":878}],943:[function(e,t,n){"use strict";t.exports=function(e,t){var n,r,a,i,o,s,l,u,c;for(n=0;n<e.length;n++){for(i=e[n],o=i.pedgepaths=[],s=i.ppaths=[],r=0;r<i.edgepaths.length;r++){for(c=i.edgepaths[r],l=[],a=0;a<c.length;a++)l[a]=t(c[a]);o.push(l)}for(r=0;r<i.paths.length;r++){for(c=i.paths[r],u=[],a=0;a<c.length;a++)u[a]=t(c[a]);s.push(u)}}}},{}],944:[function(e,t,n){"use strict";var r=e("d3"),a=e("../carpet/map_1d_array"),i=e("../carpet/makepath"),o=e("../../components/drawing"),s=e("../../lib"),l=e("../contour/make_crossings"),u=e("../contour/find_all_paths"),c=e("../contour/plot"),f=e("../contour/constants"),d=e("../contour/convert_to_constraints"),p=e("./join_all_paths"),h=e("../contour/empty_pathinfo"),m=e("./map_pathinfo"),v=e("../carpet/lookup_carpetid"),g=e("../contour/close_boundaries");function y(e,t,n){var r=e.getPointAtLength(t),a=e.getPointAtLength(n),i=a.x-r.x,o=a.y-r.y,s=Math.sqrt(i*i+o*o);return[i/s,o/s]}function b(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]);return[e[0]/t,e[1]/t]}function x(e,t){var n=Math.abs(e[0]*t[0]+e[1]*t[1]),r=Math.sqrt(1-n*n);return r/n}t.exports=function(e,t,n,_){var w=t.xaxis,T=t.yaxis;s.makeTraceGroups(_,n,"contour").each(function(n){var _=r.select(this),k=n[0],C=k.trace,E=C._carpetTrace=v(e,C),M=e.calcdata[E.index][0];if(E.visible&&"legendonly"!==E.visible){var A=k.a,S=k.b,O=C.contours,P=h(O,t,k),R="constraint"===O.type,L=O._operation,D=R?"="===L?"lines":"fill":O.coloring,I=[[A[0],S[S.length-1]],[A[A.length-1],S[S.length-1]],[A[A.length-1],S[0]],[A[0],S[0]]];l(P);var z=1e-8*(A[A.length-1]-A[0]),j=1e-8*(S[S.length-1]-S[0]);u(P,z,j);var N,F,B,V,U=P;"constraint"===O.type&&(U=d(P,L),g(U,L,I,C)),m(P,W);var G=[];for(V=M.clipsegments.length-1;V>=0;V--)N=M.clipsegments[V],F=a([],N.x,w.c2p),B=a([],N.y,T.c2p),F.reverse(),B.reverse(),G.push(i(F,B,N.bicubic));var H="M"+G.join("L")+"Z";!function(e,t,n,r,o,l){var u,c,f,d,p=s.ensureSingle(e,"g","contourbg").selectAll("path").data("fill"!==l||o?[]:[0]);p.enter().append("path"),p.exit().remove();var h=[];for(d=0;d<t.length;d++)u=t[d],c=a([],u.x,n.c2p),f=a([],u.y,r.c2p),h.push(i(c,f,u.bicubic));p.attr("d","M"+h.join("L")+"Z").style("stroke","none")}(_,M.clipsegments,w,T,R,D),function(e,t,n,a,i,o,l,u,c,f,d){var h=s.ensureSingle(t,"g","contourfill").selectAll("path").data("fill"===f?i:[]);h.enter().append("path"),h.exit().remove(),h.each(function(t){var i=p(e,t,o,l,u,c,n,a);t.prefixBoundary&&(i=d+i),i?r.select(this).attr("d",i).style("stroke","none"):r.select(this).remove()})}(C,_,w,T,U,I,W,E,M,D,H),function(e,t,n,a,i,l,u){var d=s.ensureSingle(e,"g","contourlines"),p=!1!==i.showlines,h=i.showlabels,m=p&&h,v=c.createLines(d,p||h,t),g=c.createLineClip(d,m,n._fullLayout._defs,a.trace.uid),_=e.selectAll("g.contourlabels").data(h?[0]:[]);if(_.exit().remove(),_.enter().append("g").classed("contourlabels",!0),h){var w=l.xaxis,T=l.yaxis,k=w._length,C=T._length,E=[[[0,0],[k,0],[k,C],[0,C]]],M=[];s.clearLocationCache();var A=c.labelFormatter(i,a.t.cb,n._fullLayout),S=o.tester.append("text").attr("data-notex",1).call(o.font,i.labelfont),O={left:0,right:k,center:k/2,top:0,bottom:C,middle:C/2},P=Math.sqrt(k*k+C*C),R=f.LABELDISTANCE*P/Math.max(1,t.length/f.LABELINCREASE);v.each(function(e){var t=c.calcTextOpts(e.level,A,S,n);r.select(this).selectAll("path").each(function(n){var r=s.getVisibleSegment(this,O,t.height/2);if(r&&(function(e,t,n,r,a,i){for(var o,s=0;s<n.pedgepaths.length;s++)t===n.pedgepaths[s]&&(o=n.edgepaths[s]);if(o){var l=a.a[0],u=a.a[a.a.length-1],c=a.b[0],f=a.b[a.b.length-1],d=y(e,0,1),p=y(e,r.total,r.total-1),h=v(o[0],d),m=r.total-v(o[o.length-1],p);r.min<h&&(r.min=h),r.max>m&&(r.max=m),r.len=r.max-r.min}function v(e,t){var n,r=0;return(Math.abs(e[0]-l)<.1||Math.abs(e[0]-u)<.1)&&(n=b(a.dxydb_rough(e[0],e[1],.1)),r=Math.max(r,i*x(t,n)/2)),(Math.abs(e[1]-c)<.1||Math.abs(e[1]-f)<.1)&&(n=b(a.dxyda_rough(e[0],e[1],.1)),r=Math.max(r,i*x(t,n)/2)),r}}(this,n,e,r,u,t.height),!(r.len<(t.width+t.height)*f.LABELMIN)))for(var a=Math.min(Math.ceil(r.len/R),f.LABELMAX),i=0;i<a;i++){var o=c.findBestTextLocation(this,r,t,M,O);if(!o)break;c.addLabelData(o,t,M,E)}})}),S.remove(),c.drawLabels(_,M,n,g,m?E:null)}h&&!p&&v.remove()}(_,P,e,k,O,t,E),o.setClipUrl(_,E._clipPathId)}function W(e){var t=E.ab2xy(e[0],e[1],!0);return[w.c2p(t[0]),T.c2p(t[1])]}})}},{"../../components/drawing":595,"../../lib":696,"../carpet/lookup_carpetid":894,"../carpet/makepath":895,"../carpet/map_1d_array":896,"../contour/close_boundaries":918,"../contour/constants":920,"../contour/convert_to_constraints":924,"../contour/empty_pathinfo":926,"../contour/find_all_paths":928,"../contour/make_crossings":933,"../contour/plot":934,"./join_all_paths":942,"./map_pathinfo":943,d3:148}],945:[function(e,t,n){"use strict";var r=e("../scatter/attributes"),a=e("../../components/colorscale/attributes"),i=e("../../components/colorbar/attributes"),o=e("../../lib/extend").extendFlat;t.exports=o({z:{valType:"data_array",editType:"calc"},x:o({},r.x,{impliedEdits:{xtype:"array"}}),x0:o({},r.x0,{impliedEdits:{xtype:"scaled"}}),dx:o({},r.dx,{impliedEdits:{xtype:"scaled"}}),y:o({},r.y,{impliedEdits:{ytype:"array"}}),y0:o({},r.y0,{impliedEdits:{ytype:"scaled"}}),dy:o({},r.dy,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},zhoverformat:{valType:"string",dflt:"",editType:"none"},transforms:void 0},a("",{cLetter:"z",autoColorDflt:!1}),{colorbar:i})},{"../../components/colorbar/attributes":571,"../../components/colorscale/attributes":577,"../../lib/extend":685,"../scatter/attributes":1043}],946:[function(e,t,n){"use strict";var r=e("../../registry"),a=e("../../lib"),i=e("../../plots/cartesian/axes"),o=e("../histogram2d/calc"),s=e("../../components/colorscale/calc"),l=e("./convert_column_xyz"),u=e("./max_row_length"),c=e("./clean_2d_array"),f=e("./interp2d"),d=e("./find_empties"),p=e("./make_bound_array");t.exports=function(e,t){var n,h,m,v,g,y,b,x,_,w=i.getFromId(e,t.xaxis||"x"),T=i.getFromId(e,t.yaxis||"y"),k=r.traceIs(t,"contour"),C=r.traceIs(t,"histogram"),E=r.traceIs(t,"gl2d"),M=k?"best":t.zsmooth;if(w._minDtick=0,T._minDtick=0,C)_=o(e,t),n=_.x,h=_.x0,m=_.dx,v=_.y,g=_.y0,y=_.dy,b=_.z;else{var A=t.z;a.isArray1D(A)?(l(t,w,T,"x","y",["z"]),n=t._x,v=t._y,A=t._z):(n=t.x?w.makeCalcdata(t,"x"):[],v=t.y?T.makeCalcdata(t,"y"):[]),h=t.x0||0,m=t.dx||1,g=t.y0||0,y=t.dy||1,b=c(A,t.transpose),(k||t.connectgaps)&&(t._emptypoints=d(b),f(b,t._emptypoints))}function S(e){M=t._input.zsmooth=t.zsmooth=!1,a.warn('cannot use zsmooth: "fast": '+e)}if("fast"===M)if("log"===w.type||"log"===T.type)S("log axis found");else if(!C){if(n.length){var O=(n[n.length-1]-n[0])/(n.length-1),P=Math.abs(O/100);for(x=0;x<n.length-1;x++)if(Math.abs(n[x+1]-n[x]-O)>P){S("x scale is not linear");break}}if(v.length&&"fast"===M){var R=(v[v.length-1]-v[0])/(v.length-1),L=Math.abs(R/100);for(x=0;x<v.length-1;x++)if(Math.abs(v[x+1]-v[x]-R)>L){S("y scale is not linear");break}}}var D=u(b),I="scaled"===t.xtype?"":n,z=p(t,I,h,m,D,w),j="scaled"===t.ytype?"":v,N=p(t,j,g,y,b.length,T);E||(t._extremes[w._id]=i.findExtremes(w,z),t._extremes[T._id]=i.findExtremes(T,N));var F={x:z,y:N,z:b,text:t._text||t.text};if(I&&I.length===z.length-1&&(F.xCenter=I),j&&j.length===N.length-1&&(F.yCenter=j),C&&(F.xRanges=_.xRanges,F.yRanges=_.yRanges,F.pts=_.pts),k&&"constraint"===t.contours.type||s(t,b,"","z"),k&&t.contours&&"heatmap"===t.contours.coloring){var B={type:"contour"===t.type?"heatmap":"histogram2d",xcalendar:t.xcalendar,ycalendar:t.ycalendar};F.xfill=p(B,I,h,m,D,w),F.yfill=p(B,j,g,y,b.length,T)}return[F]}},{"../../components/colorscale/calc":578,"../../lib":696,"../../plots/cartesian/axes":744,"../../registry":827,"../histogram2d/calc":977,"./clean_2d_array":947,"./convert_column_xyz":949,"./find_empties":951,"./interp2d":954,"./make_bound_array":955,"./max_row_length":956}],947:[function(e,t,n){"use strict";var r=e("fast-isnumeric");t.exports=function(e,t){var n,a,i,o,s,l;function u(e){if(r(e))return+e}if(t){for(n=0,s=0;s<e.length;s++)n=Math.max(n,e[s].length);if(0===n)return!1;i=function(e){return e.length},o=function(e,t,n){return e[n][t]}}else n=e.length,i=function(e,t){return e[t].length},o=function(e,t,n){return e[t][n]};var c=new Array(n);for(s=0;s<n;s++)for(a=i(e,s),c[s]=new Array(a),l=0;l<a;l++)c[s][l]=u(o(e,s,l));return c}},{"fast-isnumeric":214}],948:[function(e,t,n){"use strict";t.exports={min:"zmin",max:"zmax"}},{}],949:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("../../constants/numerical").BADNUM;t.exports=function(e,t,n,i,o,s){var l,u,c,f,d=e._length,p=e[i].slice(0,d),h=e[o].slice(0,d),m=e.text,v=void 0!==m&&r.isArray1D(m),g=e[i+"calendar"],y=e[o+"calendar"];for(l=0;l<d;l++)p[l]=t.d2c(p[l],0,g),h[l]=n.d2c(h[l],0,y);var b,x,_,w=r.distinctVals(p),T=w.vals,k=r.distinctVals(h),C=k.vals,E=[];for(l=0;l<s.length;l++)E[l]=r.init2dArray(C.length,T.length);for(v&&(_=r.init2dArray(C.length,T.length)),l=0;l<d;l++)if(p[l]!==a&&h[l]!==a){for(b=r.findBin(p[l]+w.minDiff/2,T),x=r.findBin(h[l]+k.minDiff/2,C),u=0;u<s.length;u++)f=s[u],c=e[f],E[u][x][b]=c[l];v&&(_[x][b]=m[l])}for(e["_"+i]=T,e["_"+o]=C,u=0;u<s.length;u++)e["_"+s[u]]=E[u];v&&(e._text=_)}},{"../../constants/numerical":673,"../../lib":696}],950:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("./xyz_defaults"),i=e("./style_defaults"),o=e("../../components/colorscale/defaults"),s=e("./attributes");t.exports=function(e,t,n,l){function u(n,a){return r.coerce(e,t,s,n,a)}var c=a(e,t,u,l);c?(u("text"),i(e,t,u,l),u("connectgaps",r.isArray1D(t.z)&&!1!==t.zsmooth),o(e,t,l,u,{prefix:"",cLetter:"z"})):t.visible=!1}},{"../../components/colorscale/defaults":580,"../../lib":696,"./attributes":945,"./style_defaults":959,"./xyz_defaults":960}],951:[function(e,t,n){"use strict";var r=e("./max_row_length");t.exports=function(e){var t,n,a,i,o,s,l,u,c=[],f={},d=[],p=e[0],h=[],m=[0,0,0],v=r(e);for(n=0;n<e.length;n++)for(t=h,h=p,p=e[n+1]||[],a=0;a<v;a++)void 0===h[a]&&((s=(void 0!==h[a-1]?1:0)+(void 0!==h[a+1]?1:0)+(void 0!==t[a]?1:0)+(void 0!==p[a]?1:0))?(0===n&&s++,0===a&&s++,n===e.length-1&&s++,a===h.length-1&&s++,s<4&&(f[[n,a]]=[n,a,s]),c.push([n,a,s])):d.push([n,a]));for(;d.length;){for(l={},u=!1,o=d.length-1;o>=0;o--)i=d[o],n=i[0],a=i[1],(s=((f[[n-1,a]]||m)[2]+(f[[n+1,a]]||m)[2]+(f[[n,a-1]]||m)[2]+(f[[n,a+1]]||m)[2])/20)&&(l[i]=[n,a,s],d.splice(o,1),u=!0);if(!u)throw"findEmpties iterated with no new neighbors";for(i in l)f[i]=l[i],c.push(l[i])}return c.sort(function(e,t){return t[2]-e[2]})}},{"./max_row_length":956}],952:[function(e,t,n){"use strict";var r=e("../../components/fx"),a=e("../../lib"),i=e("../../plots/cartesian/axes");t.exports=function(e,t,n,o,s,l){var u,c,f,d,p=e.cd[0],h=p.trace,m=e.xa,v=e.ya,g=p.x,y=p.y,b=p.z,x=p.xCenter,_=p.yCenter,w=p.zmask,T=[h.zmin,h.zmax],k=h.zhoverformat,C=g,E=y;if(!1!==e.index){try{f=Math.round(e.index[1]),d=Math.round(e.index[0])}catch(t){return void a.error("Error hovering on heatmap, pointNumber must be [row,col], found:",e.index)}if(f<0||f>=b[0].length||d<0||d>b.length)return}else{if(r.inbox(t-g[0],t-g[g.length-1],0)>0||r.inbox(n-y[0],n-y[y.length-1],0)>0)return;if(l){var M;for(C=[2*g[0]-g[1]],M=1;M<g.length;M++)C.push((g[M]+g[M-1])/2);for(C.push([2*g[g.length-1]-g[g.length-2]]),E=[2*y[0]-y[1]],M=1;M<y.length;M++)E.push((y[M]+y[M-1])/2);E.push([2*y[y.length-1]-y[y.length-2]])}f=Math.max(0,Math.min(C.length-2,a.findBin(t,C))),d=Math.max(0,Math.min(E.length-2,a.findBin(n,E)))}var A=m.c2p(g[f]),S=m.c2p(g[f+1]),O=v.c2p(y[d]),P=v.c2p(y[d+1]);l?(S=A,u=g[f],P=O,c=y[d]):(u=x?x[f]:(g[f]+g[f+1])/2,c=_?_[d]:(y[d]+y[d+1])/2,h.zsmooth&&(A=S=m.c2p(u),O=P=v.c2p(c)));var R,L,D=b[d][f];w&&!w[d][f]&&(D=void 0),Array.isArray(p.text)&&Array.isArray(p.text[d])&&(R=p.text[d][f]);var I={type:"linear",range:T,hoverformat:k,_separators:m._separators,_numFormat:m._numFormat},z=i.tickText(I,D,"hover");return L=z.text,[a.extendFlat(e,{index:[d,f],distance:e.maxHoverDistance,spikeDistance:e.maxSpikeDistance,x0:A,x1:S,y0:O,y1:P,xLabelVal:u,yLabelVal:c,zLabelVal:D,zLabel:L,text:R})]}},{"../../components/fx":612,"../../lib":696,"../../plots/cartesian/axes":744}],953:[function(e,t,n){"use strict";var r={};r.attributes=e("./attributes"),r.supplyDefaults=e("./defaults"),r.calc=e("./calc"),r.plot=e("./plot"),r.colorbar=e("./colorbar"),r.style=e("./style"),r.hoverPoints=e("./hover"),r.moduleType="trace",r.name="heatmap",r.basePlotModule=e("../../plots/cartesian"),r.categories=["cartesian","svg","2dMap"],r.meta={},t.exports=r},{"../../plots/cartesian":756,"./attributes":945,"./calc":946,"./colorbar":948,"./defaults":950,"./hover":952,"./plot":957,"./style":958}],954:[function(e,t,n){"use strict";var r=e("../../lib"),a=[[-1,0],[1,0],[0,-1],[0,1]];function i(e){return.5-.25*Math.min(1,.5*e)}function o(e,t,n){var r,i,o,s,l,u,c,f,d,p,h,m,v,g=0;for(s=0;s<t.length;s++){for(r=t[s],i=r[0],o=r[1],h=e[i][o],p=0,d=0,l=0;l<4;l++)u=a[l],(c=e[i+u[0]])&&void 0!==(f=c[o+u[1]])&&(0===p?m=v=f:(m=Math.min(m,f),v=Math.max(v,f)),d++,p+=f);if(0===d)throw"iterateInterp2d order is wrong: no defined neighbors";e[i][o]=p/d,void 0===h?d<4&&(g=1):(e[i][o]=(1+n)*e[i][o]-n*h,v>m&&(g=Math.max(g,Math.abs(e[i][o]-h)/(v-m))))}return g}t.exports=function(e,t){var n,a=1;for(o(e,t),n=0;n<t.length&&!(t[n][2]<4);n++);for(t=t.slice(n),n=0;n<100&&a>.01;n++)a=o(e,t,i(a));return a>.01&&r.log("interp2d didn't converge quickly",a),e}},{"../../lib":696}],955:[function(e,t,n){"use strict";var r=e("../../registry"),a=e("../../lib").isArrayOrTypedArray;t.exports=function(e,t,n,i,o,s){var l,u,c,f=[],d=r.traceIs(e,"contour"),p=r.traceIs(e,"histogram"),h=r.traceIs(e,"gl2d"),m=a(t)&&t.length>1;if(m&&!p&&"category"!==s.type){var v=t.length;if(!(v<=o))return d?t.slice(0,o):t.slice(0,o+1);if(d||h)f=t.slice(0,o);else if(1===o)f=[t[0]-.5,t[0]+.5];else{for(f=[1.5*t[0]-.5*t[1]],c=1;c<v;c++)f.push(.5*(t[c-1]+t[c]));f.push(1.5*t[v-1]-.5*t[v-2])}if(v<o){var g=f[f.length-1],y=g-f[f.length-2];for(c=v;c<o;c++)g+=y,f.push(g)}}else{u=i||1;var b=e[s._id.charAt(0)+"calendar"];for(l=p||"category"===s.type?s.r2c(n,0,b)||0:a(t)&&1===t.length?t[0]:void 0===n?0:s.d2c(n,0,b),c=d||h?0:-.5;c<o;c++)f.push(l+u*c)}return f}},{"../../lib":696,"../../registry":827}],956:[function(e,t,n){"use strict";t.exports=function(e){for(var t=0,n=0;n<e.length;n++)t=Math.max(t,e[n].length);return t}},{}],957:[function(e,t,n){"use strict";var r=e("d3"),a=e("tinycolor2"),i=e("../../registry"),o=e("../../lib"),s=e("../../components/colorscale"),l=e("../../constants/xmlns_namespaces"),u=e("./max_row_length");function c(e,t){var n=t.length-2,r=o.constrain(o.findBin(e,t),0,n),a=t[r],i=t[r+1],s=o.constrain(r+(e-a)/(i-a)-.5,0,n),l=Math.round(s),u=Math.abs(s-l);return s&&s!==n&&u?{bin0:l,frac:u,bin1:Math.round(l+u/(s-l))}:{bin0:l,bin1:l,frac:0}}function f(e,t){var n=t.length-1,r=o.constrain(o.findBin(e,t),0,n),a=t[r],i=t[r+1],s=(e-a)/(i-a)||0;return s<=0?{bin0:r,bin1:r,frac:0}:s<.5?{bin0:r,bin1:r+1,frac:s}:{bin0:r+1,bin1:r,frac:1-s}}function d(e,t,n){e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=Math.round(255*n[3])}t.exports=function(e,t,n,p){var h=t.xaxis,m=t.yaxis;o.makeTraceGroups(p,n,"hm").each(function(t){var n,p,v,g,y,b,x=r.select(this),_=t[0],w=_.trace,T=_.z,k=_.x,C=_.y,E=_.xCenter,M=_.yCenter,A=i.traceIs(w,"contour"),S=A?"best":w.zsmooth,O=T.length,P=u(T),R=!1,L=!1;for(b=0;void 0===n&&b<k.length-1;)n=h.c2p(k[b]),b++;for(b=k.length-1;void 0===p&&b>0;)p=h.c2p(k[b]),b--;for(p<n&&(v=p,p=n,n=v,R=!0),b=0;void 0===g&&b<C.length-1;)g=m.c2p(C[b]),b++;for(b=C.length-1;void 0===y&&b>0;)y=m.c2p(C[b]),b--;if(y<g&&(v=g,g=y,y=v,L=!0),A&&(E=k,M=C,k=_.xfill,C=_.yfill),"fast"!==S){var D="best"===S?0:.5;n=Math.max(-D*h._length,n),p=Math.min((1+D)*h._length,p),g=Math.max(-D*m._length,g),y=Math.min((1+D)*m._length,y)}var I=Math.round(p-n),z=Math.round(y-g),j=I<=0||z<=0;if(j){var N=x.selectAll("image").data([]);N.exit().remove()}else{var F,B;"fast"===S?(F=P,B=O):(F=I,B=z);var V=document.createElement("canvas");V.width=F,V.height=B;var U,G,H=V.getContext("2d"),W=s.makeColorScaleFunc(s.extractScale(w.colorscale,w.zmin,w.zmax),{noNumericCheck:!0,returnArray:!0});"fast"===S?(U=R?function(e){return P-1-e}:o.identity,G=L?function(e){return O-1-e}:o.identity):(U=function(e){return o.constrain(Math.round(h.c2p(k[e])-n),0,I)},G=function(e){return o.constrain(Math.round(m.c2p(C[e])-g),0,z)});var q,Y,X,Z,$,K,J=G(0),Q=[J,J],ee=R?0:1,te=L?0:1,ne=0,re=0,ae=0,ie=0;if(S){var oe,se=0;try{oe=new Uint8Array(I*z*4)}catch(e){oe=new Array(I*z*4)}if("best"===S){var le,ue,ce,fe=E||k,de=M||C,pe=new Array(fe.length),he=new Array(de.length),me=new Array(I),ve=E?f:c,ge=M?f:c;for(b=0;b<fe.length;b++)pe[b]=Math.round(h.c2p(fe[b])-n);for(b=0;b<de.length;b++)he[b]=Math.round(m.c2p(de[b])-g);for(b=0;b<I;b++)me[b]=ve(b,pe);for(Y=0;Y<z;Y++)for(le=ge(Y,he),ue=T[le.bin0],ce=T[le.bin1],b=0;b<I;b++,se+=4)K=Ae(ue,ce,me[b],le),d(oe,se,K)}else for(Y=0;Y<O;Y++)for($=T[Y],Q=G(Y),b=0;b<I;b++)K=Me($[b],1),se=4*(Q*I+U(b)),d(oe,se,K);var ye=H.createImageData(I,z);try{ye.data.set(oe)}catch(e){var be=ye.data,xe=be.length;for(Y=0;Y<xe;Y++)be[Y]=oe[Y]}H.putImageData(ye,0,0)}else{var _e=w.xgap,we=w.ygap,Te=Math.floor(_e/2),ke=Math.floor(we/2);for(Y=0;Y<O;Y++)if($=T[Y],Q.reverse(),Q[te]=G(Y+1),Q[0]!==Q[1]&&void 0!==Q[0]&&void 0!==Q[1])for(X=U(0),q=[X,X],b=0;b<P;b++)q.reverse(),q[ee]=U(b+1),q[0]!==q[1]&&void 0!==q[0]&&void 0!==q[1]&&(Z=$[b],K=Me(Z,(q[1]-q[0])*(Q[1]-Q[0])),H.fillStyle="rgba("+K.join(",")+")",H.fillRect(q[0]+Te,Q[0]+ke,q[1]-q[0]-_e,Q[1]-Q[0]-we))}re=Math.round(re/ne),ae=Math.round(ae/ne),ie=Math.round(ie/ne);var Ce=a("rgb("+re+","+ae+","+ie+")");e._hmpixcount=(e._hmpixcount||0)+ne,e._hmlumcount=(e._hmlumcount||0)+ne*Ce.getLuminance();var Ee=x.selectAll("image").data(t);Ee.enter().append("svg:image").attr({xmlns:l.svg,preserveAspectRatio:"none"}),Ee.attr({height:z,width:I,x:n,y:g,"xlink:href":V.toDataURL("image/png")})}function Me(e,t){if(void 0!==e){var n=W(e);return n[0]=Math.round(n[0]),n[1]=Math.round(n[1]),n[2]=Math.round(n[2]),ne+=t,re+=n[0]*t,ae+=n[1]*t,ie+=n[2]*t,n}return[0,0,0,0]}function Ae(e,t,n,r){var a=e[n.bin0];if(void 0===a)return Me(void 0,1);var i,o=e[n.bin1],s=t[n.bin0],l=t[n.bin1],u=o-a||0,c=s-a||0;return i=void 0===o?void 0===l?0:void 0===s?2*(l-a):2*(2*l-s-a)/3:void 0===l?void 0===s?0:2*(2*a-o-s)/3:void 0===s?2*(2*l-o-a)/3:l+a-o-s,Me(a+n.frac*u+r.frac*(c+n.frac*i))}})}},{"../../components/colorscale":585,"../../constants/xmlns_namespaces":674,"../../lib":696,"../../registry":827,"./max_row_length":956,d3:148,tinycolor2:514}],958:[function(e,t,n){"use strict";var r=e("d3");t.exports=function(e){r.select(e).selectAll(".hm image").style("opacity",function(e){return e.trace.opacity})}},{d3:148}],959:[function(e,t,n){"use strict";t.exports=function(e,t,n){var r=n("zsmooth");!1===r&&(n("xgap"),n("ygap")),n("zhoverformat")}},{}],960:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),a=e("../../lib"),i=e("../../registry");function o(e,t){var n=t(e),r=n?t(e+"type","array"):"scaled";return"scaled"===r&&(t(e+"0"),t("d"+e)),n}t.exports=function(e,t,n,s,l,u){var c,f,d=n("z");if(l=l||"x",u=u||"y",void 0===d||!d.length)return 0;if(a.isArray1D(e.z)){if(c=n(l),f=n(u),!(c&&c.length&&f&&f.length))return 0;t._length=Math.min(c.length,f.length,d.length)}else{if(c=o(l,n),f=o(u,n),!function(e){for(var t,n=!0,i=!1,o=!1,s=0;s<e.length;s++){if(t=e[s],!a.isArrayOrTypedArray(t)){n=!1;break}t.length>0&&(i=!0);for(var l=0;l<t.length;l++)if(r(t[l])){o=!0;break}}return n&&i&&o}(d))return 0;n("transpose"),t._length=null}var p=i.getComponentMethod("calendars","handleTraceDefaults");return p(e,t,[l,u],s),!0}},{"../../lib":696,"../../registry":827,"fast-isnumeric":214}],961:[function(e,t,n){"use strict";for(var r=e("../heatmap/attributes"),a=e("../../components/colorscale/attributes"),i=e("../../components/colorbar/attributes"),o=e("../../lib/extend").extendFlat,s=e("../../plot_api/edit_types").overrideAll,l=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],u={},c=0;c<l.length;c++){var f=l[c];u[f]=r[f]}o(u,a("",{cLetter:"z",autoColorDflt:!1}),{colorbar:i}),t.exports=s(u,"calc","nested")},{"../../components/colorbar/attributes":571,"../../components/colorscale/attributes":577,"../../lib/extend":685,"../../plot_api/edit_types":727,"../heatmap/attributes":945}],962:[function(e,t,n){"use strict";var r=e("gl-heatmap2d"),a=e("../../plots/cartesian/axes"),i=e("../../lib/str2rgbarray");function o(e,t){this.scene=e,this.uid=t,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=r(e.glplot,this.options),this.heatmap._trace=this}var s=o.prototype;s.handlePick=function(e){var t=this.options,n=t.shape,r=e.pointId,a=r%n[0],i=Math.floor(r/n[0]),o=r;return{trace:this,dataCoord:e.dataCoord,traceCoord:[t.x[a],t.y[i],t.z[o]],textLabel:this.textLabels[r],name:this.name,pointIndex:[i,a],hoverinfo:this.hoverinfo}},s.update=function(e,t){var n=t[0];this.index=e.index,this.name=e.name,this.hoverinfo=e.hoverinfo;var r=n.z;this.options.z=[].concat.apply([],r);var o=r[0].length,s=r.length;this.options.shape=[o,s],this.options.x=n.x,this.options.y=n.y;var l=function(e){for(var t=e.colorscale,n=e.zmin,r=e.zmax,a=t.length,o=new Array(a),s=new Array(4*a),l=0;l<a;l++){var u=t[l],c=i(u[1]);o[l]=n+u[0]*(r-n);for(var f=0;f<4;f++)s[4*l+f]=c[f]}return{colorLevels:o,colorValues:s}}(e);this.options.colorLevels=l.colorLevels,this.options.colorValues=l.colorValues,this.textLabels=[].concat.apply([],e.text),this.heatmap.update(this.options);var u=this.scene.xaxis,c=this.scene.yaxis;e._extremes[u._id]=a.findExtremes(u,n.x),e._extremes[c._id]=a.findExtremes(c,n.y)},s.dispose=function(){this.heatmap.dispose()},t.exports=function(e,t,n){var r=new o(e,t.uid);return r.update(t,n),r}},{"../../lib/str2rgbarray":719,"../../plots/cartesian/axes":744,"gl-heatmap2d":241}],963:[function(e,t,n){"use strict";var r={};r.attributes=e("./attributes"),r.supplyDefaults=e("../heatmap/defaults"),r.colorbar=e("../heatmap/colorbar"),r.calc=e("../heatmap/calc"),r.plot=e("./convert"),r.moduleType="trace",r.name="heatmapgl",r.basePlotModule=e("../../plots/gl2d"),r.categories=["gl","gl2d","2dMap"],r.meta={},t.exports=r},{"../../plots/gl2d":784,"../heatmap/calc":946,"../heatmap/colorbar":948,"../heatmap/defaults":950,"./attributes":961,"./convert":962}],964:[function(e,t,n){"use strict";var r=e("../bar/attributes"),a=e("./bin_attributes");t.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},text:r.text,orientation:r.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:a("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:a("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc",impliedEdits:{"ybins.start":void 0,"ybins.end":void 0,"ybins.size":void 0}},marker:r.marker,selected:r.selected,unselected:r.unselected,_deprecated:{bardir:r._deprecated.bardir}}},{"../bar/attributes":837,"./bin_attributes":966}],965:[function(e,t,n){"use strict";t.exports=function(e,t){for(var n=e.length,r=0,a=0;a<n;a++)t[a]?(e[a]/=t[a],r+=e[a]):e[a]=null;return r}},{}],966:[function(e,t,n){"use strict";t.exports=function(e,t){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},{}],967:[function(e,t,n){"use strict";var r=e("fast-isnumeric");t.exports={count:function(e,t,n){return n[e]++,1},sum:function(e,t,n,a){var i=a[t];return r(i)?(i=Number(i),n[e]+=i,i):0},avg:function(e,t,n,a,i){var o=a[t];return r(o)&&(o=Number(o),n[e]+=o,i[e]++),0},min:function(e,t,n,a){var i=a[t];if(r(i)){if(i=Number(i),!r(n[e]))return n[e]=i,i;if(n[e]>i){var o=i-n[e];return n[e]=i,o}}return 0},max:function(e,t,n,a){var i=a[t];if(r(i)){if(i=Number(i),!r(n[e]))return n[e]=i,i;if(n[e]<i){var o=i-n[e];return n[e]=i,o}}return 0}}},{"fast-isnumeric":214}],968:[function(e,t,n){"use strict";var r=e("../../constants/numerical"),a=r.ONEAVGYEAR,i=r.ONEAVGMONTH,o=r.ONEDAY,s=r.ONEHOUR,l=r.ONEMIN,u=r.ONESEC,c=e("../../plots/cartesian/axes").tickIncrement;function f(e,t,n,r){if(e*t<=0)return 1/0;for(var a=Math.abs(t-e),i="date"===n.type,o=d(a,i),s=0;s<10;s++){var l=d(80*o,i);if(o===l)break;if(!p(l,e,t,i,n,r))break;o=l}return o}function d(e,t){return t&&e>u?e>o?e>1.1*a?a:e>1.1*i?i:o:e>s?s:e>l?l:u:Math.pow(10,Math.floor(Math.log(e)/Math.LN10))}function p(e,t,n,r,i,s){if(r&&e>o){var l=h(t,i,s),u=h(n,i,s),c=e===a?0:1;return l[c]!==u[c]}return Math.floor(n/e)-Math.floor(t/e)>.1}function h(e,t,n){var r=t.c2d(e,a,n).split("-");return""===r[0]&&(r.unshift(),r[0]="-"+r[0]),r}t.exports=function(e,t,n,r,i){var s,l,u=-1.1*t,d=-.1*t,p=e-d,h=n[0],m=n[1],v=Math.min(f(h+d,h+p,r,i),f(m+d,m+p,r,i)),g=Math.min(f(h+u,h+d,r,i),f(m+u,m+d,r,i));if(v>g&&g<Math.abs(m-h)/4e3?(s=v,l=!1):(s=Math.min(v,g),l=!0),"date"===r.type&&s>o){var y=s===a?1:6,b=s===a?"M12":"M1";return function(t,n){var o=r.c2d(t,a,i),s=o.indexOf("-",y);s>0&&(o=o.substr(0,s));var u=r.d2c(o,0,i);if(u<t){var f=c(u,b,!1,i);(u+f)/2<t+e&&(u=f)}return n&&l?c(u,b,!0,i):u}}return function(t,n){var r=s*Math.round(t/s);return r+s/10<t&&r+.9*s<t+e&&(r+=s),n&&l&&(r-=s),r}}},{"../../constants/numerical":673,"../../plots/cartesian/axes":744}],969:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),a=e("../../lib"),i=e("../../plots/cartesian/axes"),o=e("../bar/arrays_to_calcdata"),s=e("./bin_functions"),l=e("./norm_functions"),u=e("./average"),c=e("./bin_label_vals");function f(e,t,n,o,s){var l,u,c,d,p,h,m,v=o+"bins",g=e._fullLayout,y="overlay"===g.barmode,b="date"===n.type?function(e){return e||0===e?a.cleanDate(e,null,n.calendar):null}:function(e){return r(e)?Number(e):null};function x(e,t,n){t[e+"Found"]?(t[e]=b(t[e]),null===t[e]&&(t[e]=n[e])):(h[e]=t[e]=n[e],a.nestedProperty(u[0],v+"."+e).set(n[e]))}var _=g._histogramBinOpts[t._groupName];if(t._autoBinFinished)delete t._autoBinFinished;else{u=_.traces;var w=_.sizeFound,T=[];h=u[0]._autoBin={};var k=!0;for(l=0;l<u.length;l++)c=u[l],p=c._pos0=n.makeCalcdata(c,o),T=a.concat(T,p),delete c._autoBinFinished,!0===t.visible&&(k?k=!1:(delete c._autoBin,c._autoBinFinished=1));d=u[0][o+"calendar"];var C=i.autoBin(T,n,_.nbins,!1,d,w&&_.size);if(y&&0===C._dataSpan&&"category"!==n.type){if(s)return[C,p,!0];C=function(e,t,n,r,i){var o,s,l=function(e,t){for(var n=t.xaxis,r=t.yaxis,a=t.orientation,i=[],o=e._fullData,s=0;s<o.length;s++){var l=o[s];"histogram"===l.type&&!0===l.visible&&l.orientation===a&&l.xaxis===n&&l.yaxis===r&&i.push(l)}return i}(e,t),u=!1,c=1/0,d=[t];for(o=0;o<l.length;o++)if((s=l[o])===t)u=!0;else if(u){var p=f(e,s,n,r,!0),h=p[0],m=p[2];s._autoBinFinished=1,s._pos0=p[1],m?d.push(s):c=Math.min(c,h.size)}else c=Math.min(c,s[i].size);var v=new Array(d.length);for(o=0;o<d.length;o++)for(var g=d[o]._pos0,y=0;y<g.length;y++)if(void 0!==g[y]){v[o]=g[y];break}for(isFinite(c)||(c=a.distinctVals(v).minDiff),o=0;o<d.length;o++){var b=(s=d[o])[r+"calendar"];s._input[i]=s[i]={start:n.c2r(v[o]-c/2,0,b),end:n.c2r(v[o]+c/2,0,b),size:c}}return t[i]}(e,t,n,o,v)}(m=c.cumulative).enabled&&"include"!==m.currentbin&&("decreasing"===m.direction?C.start=n.c2r(i.tickIncrement(n.r2c(C.start,0,d),C.size,!0,d)):C.end=n.c2r(i.tickIncrement(n.r2c(C.end,0,d),C.size,!1,d))),_.size=C.size,w||(h.size=C.size,a.nestedProperty(u[0],v+".size").set(C.size)),x("start",_,C),x("end",_,C)}p=t._pos0,delete t._pos0;var E=t._input[v]||{},M=a.extendFlat({},_),A=_.start,S=n.r2l(E.start),O=void 0!==S;if((_.startFound||O)&&S!==n.r2l(A)){var P=O?S:a.aggNums(Math.min,null,p),R={type:"category"===n.type?"linear":n.type,r2l:n.r2l,dtick:_.size,tick0:A,calendar:d,range:[P,i.tickIncrement(P,_.size,!1,d)].map(n.l2r)},L=i.tickFirst(R);L>n.r2l(P)&&(L=i.tickIncrement(L,_.size,!0,d)),M.start=n.l2r(L),O||a.nestedProperty(t,v+".start").set(M.start)}var D=_.end,I=n.r2l(E.end),z=void 0!==I;if((_.endFound||z)&&I!==n.r2l(D)){var j=z?I:a.aggNums(Math.max,null,p);M.end=n.l2r(j),z||a.nestedProperty(t,v+".start").set(M.end)}var N="autobin"+o;return!1===t._input[N]&&(t._input[v]=a.extendFlat({},t[v]||{}),delete t._input[N],delete t[N]),[M,p]}t.exports=function(e,t){if(!0===t.visible){var n,d,p,h,m=[],v=[],g=i.getFromId(e,"h"===t.orientation?t.yaxis||"y":t.xaxis||"x"),y="h"===t.orientation?"y":"x",b={x:"y",y:"x"}[y],x=t[y+"calendar"],_=t.cumulative,w=f(e,t,g,y),T=w[0],k=w[1],C="string"==typeof T.size,E=[],M=C?E:T,A=[],S=[],O=[],P=0,R=t.histnorm,L=t.histfunc,D=-1!==R.indexOf("density");_.enabled&&D&&(R=R.replace(/ ?density$/,""),D=!1);var I,z="max"===L||"min"===L,j=z?null:0,N=s.count,F=l[R],B=!1,V=function(e){return g.r2c(e,0,x)};for(a.isArrayOrTypedArray(t[b])&&"count"!==L&&(I=t[b],B="avg"===L,N=s[L]),n=V(T.start),p=V(T.end)+(n-i.tickIncrement(n,T.size,!1,x))/1e6;n<p&&m.length<1e6&&(d=i.tickIncrement(n,T.size,!1,x),m.push((n+d)/2),v.push(j),O.push([]),E.push(n),D&&A.push(1/(d-n)),B&&S.push(0),!(d<=n));)n=d;E.push(n),C||"date"!==g.type||(M={start:V(M.start),end:V(M.end),size:M.size});var U,G=v.length,H=!0,W=1/0,q=1/0,Y={};for(n=0;n<k.length;n++){var X=k[n];(h=a.findBin(X,M))>=0&&h<G&&(P+=N(h,n,v,I,S),H&&O[h].length&&X!==k[O[h][0]]&&(H=!1),O[h].push(n),Y[n]=h,W=Math.min(W,X-E[h]),q=Math.min(q,E[h+1]-X))}H||(U=c(W,q,E,g,x)),B&&(P=u(v,S)),F&&F(v,P,A),_.enabled&&function(e,t,n){var r,a,i;function o(t){i=e[t],e[t]/=2}function s(t){a=e[t],e[t]=i+a/2,i+=a}if("half"===n)if("increasing"===t)for(o(0),r=1;r<e.length;r++)s(r);else for(o(e.length-1),r=e.length-2;r>=0;r--)s(r);else if("increasing"===t){for(r=1;r<e.length;r++)e[r]+=e[r-1];"exclude"===n&&(e.unshift(0),e.pop())}else{for(r=e.length-2;r>=0;r--)e[r]+=e[r+1];"exclude"===n&&(e.push(0),e.shift())}}(v,_.direction,_.currentbin);var Z=Math.min(m.length,v.length),$=[],K=0,J=Z-1;for(n=0;n<Z;n++)if(v[n]){K=n;break}for(n=Z-1;n>=K;n--)if(v[n]){J=n;break}for(n=K;n<=J;n++)if(r(m[n])&&r(v[n])){var Q={p:m[n],s:v[n],b:0};_.enabled||(Q.pts=O[n],H?Q.ph0=Q.ph1=O[n].length?k[O[n][0]]:m[n]:(Q.ph0=U(E[n]),Q.ph1=U(E[n+1],!0))),$.push(Q)}return 1===$.length&&($[0].width1=i.tickIncrement($[0].p,T.size,!1,x)-$[0].p),o($,t),a.isArrayOrTypedArray(t.selectedpoints)&&a.tagSelected($,t,Y),$}}},{"../../lib":696,"../../plots/cartesian/axes":744,"../bar/arrays_to_calcdata":836,"./average":965,"./bin_functions":967,"./bin_label_vals":968,"./norm_functions":975,"fast-isnumeric":214}],970:[function(e,t,n){"use strict";var r=e("../../lib"),a=r.nestedProperty,i=e("./attributes"),o={x:[{aStr:"xbins.start",name:"start"},{aStr:"xbins.end",name:"end"},{aStr:"xbins.size",name:"size"},{aStr:"nbinsx",name:"nbins"}],y:[{aStr:"ybins.start",name:"start"},{aStr:"ybins.end",name:"end"},{aStr:"ybins.size",name:"size"},{aStr:"nbinsy",name:"nbins"}]};t.exports=function(e,t){var n,s,l,u,c,f,d,p=t._histogramBinOpts={},h="overlay"===t.barmode;function m(e){return r.coerce(l._input,l,i,e)}for(n=0;n<e.length;n++)"histogram"===(l=e[n]).type&&(delete l._autoBinFinished,c="v"===l.orientation?"x":"y",f=h?l.uid:l.xaxis+l.yaxis+c,l._groupName=f,(d=p[f])?d.traces.push(l):d=p[f]={traces:[l],direction:c});for(f in p){d=p[f],c=d.direction;var v=o[c];for(s=0;s<v.length;s++){var g=v[s],y=g.name;if("nbins"!==y||!d.sizeFound){var b=g.aStr;for(n=0;n<d.traces.length;n++){if(l=d.traces[n],u=l._input,void 0!==a(u,b).get()){d[y]=m(b),d[y+"Found"]=!0;break}var x=l._autoBin;x&&x[y]&&a(l,b).set(x[y])}if("start"===y||"end"===y)for(;n<d.traces.length;n++)l=d.traces[n],m(b,(l._autoBin||{})[y]);"nbins"!==y||d.sizeFound||d.nbinsFound||(l=d.traces[0],d[y]=m(b))}}}}},{"../../lib":696,"./attributes":964}],971:[function(e,t,n){"use strict";var r=e("../../registry"),a=e("../../lib"),i=e("../../components/color"),o=e("../bar/style_defaults"),s=e("./attributes");t.exports=function(e,t,n,l){function u(n,r){return a.coerce(e,t,s,n,r)}var c=u("x"),f=u("y"),d=u("cumulative.enabled");d&&(u("cumulative.direction"),u("cumulative.currentbin")),u("text");var p=u("orientation",f&&!c?"h":"v"),h="v"===p?"x":"y",m="v"===p?"y":"x",v=c&&f?Math.min(c.length&&f.length):(t[h]||[]).length;if(v){t._length=v;var g=r.getComponentMethod("calendars","handleTraceDefaults");g(e,t,["x","y"],l);var y=t[m];y&&u("histfunc"),u("histnorm"),u("autobin"+h),o(e,t,u,n,l);var b=r.getComponentMethod("errorbars","supplyDefaults");b(e,t,i.defaultLine,{axis:"y"}),b(e,t,i.defaultLine,{axis:"x",inherit:"y"}),a.coerceSelectionMarkerOpacity(t,u)}else t.visible=!1}},{"../../components/color":570,"../../lib":696,"../../registry":827,"../bar/style_defaults":850,"./attributes":964}],972:[function(e,t,n){"use strict";t.exports=function(e,t,n,r,a){if(e.x="xVal"in t?t.xVal:t.x,e.y="yVal"in t?t.yVal:t.y,t.xa&&(e.xaxis=t.xa),t.ya&&(e.yaxis=t.ya),!(n.cumulative||{}).enabled){var i,o=Array.isArray(a)?r[0].pts[a[0]][a[1]]:r[a].pts;if(e.pointNumbers=o,e.binNumber=e.pointNumber,delete e.pointNumber,delete e.pointIndex,n._indexToPoints){i=[];for(var s=0;s<o.length;s++)i=i.concat(n._indexToPoints[o[s]])}else i=o;e.pointIndices=i}return e}},{}],973:[function(e,t,n){"use strict";var r=e("../bar/hover").hoverPoints,a=e("../../plots/cartesian/axes").hoverLabelText;t.exports=function(e,t,n,i){var o=r(e,t,n,i);if(o){var s=(e=o[0]).cd[e.index],l=e.cd[0].trace;if(!l.cumulative.enabled){var u="h"===l.orientation?"y":"x";e[u+"Label"]=a(e[u+"a"],s.ph0,s.ph1)}return o}}},{"../../plots/cartesian/axes":744,"../bar/hover":842}],974:[function(e,t,n){"use strict";var r={};r.attributes=e("./attributes"),r.layoutAttributes=e("../bar/layout_attributes"),r.supplyDefaults=e("./defaults"),r.crossTraceDefaults=e("./cross_trace_defaults"),r.supplyLayoutDefaults=e("../bar/layout_defaults"),r.calc=e("./calc"),r.crossTraceCalc=e("../bar/cross_trace_calc").crossTraceCalc,r.plot=e("../bar/plot"),r.layerName="barlayer",r.style=e("../bar/style").style,r.styleOnSelect=e("../bar/style").styleOnSelect,r.colorbar=e("../scatter/marker_colorbar"),r.hoverPoints=e("./hover"),r.selectPoints=e("../bar/select"),r.eventData=e("./event_data"),r.moduleType="trace",r.name="histogram",r.basePlotModule=e("../../plots/cartesian"),r.categories=["cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],r.meta={},t.exports=r},{"../../plots/cartesian":756,"../bar/cross_trace_calc":839,"../bar/layout_attributes":844,"../bar/layout_defaults":845,"../bar/plot":846,"../bar/select":847,"../bar/style":849,"../scatter/marker_colorbar":1061,"./attributes":964,"./calc":969,"./cross_trace_defaults":970,"./defaults":971,"./event_data":972,"./hover":973}],975:[function(e,t,n){"use strict";t.exports={percent:function(e,t){for(var n=e.length,r=100/t,a=0;a<n;a++)e[a]*=r},probability:function(e,t){for(var n=e.length,r=0;r<n;r++)e[r]/=t},density:function(e,t,n,r){var a=e.length;r=r||1;for(var i=0;i<a;i++)e[i]*=n[i]*r},"probability density":function(e,t,n,r){var a=e.length;r&&(t/=r);for(var i=0;i<a;i++)e[i]*=n[i]/t}}},{}],976:[function(e,t,n){"use strict";var r=e("../histogram/attributes"),a=e("../histogram/bin_attributes"),i=e("../heatmap/attributes"),o=e("../../components/colorscale/attributes"),s=e("../../components/colorbar/attributes"),l=e("../../lib/extend").extendFlat;t.exports=l({x:r.x,y:r.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:r.histnorm,histfunc:r.histfunc,nbinsx:r.nbinsx,xbins:a("x"),nbinsy:r.nbinsy,ybins:a("y"),autobinx:r.autobinx,autobiny:r.autobiny,xgap:i.xgap,ygap:i.ygap,zsmooth:i.zsmooth,zhoverformat:i.zhoverformat},o("",{cLetter:"z",autoColorDflt:!1}),{colorbar:s})},{"../../components/colorbar/attributes":571,"../../components/colorscale/attributes":577,"../../lib/extend":685,"../heatmap/attributes":945,"../histogram/attributes":964,"../histogram/bin_attributes":966}],977:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("../../plots/cartesian/axes"),i=e("../histogram/bin_functions"),o=e("../histogram/norm_functions"),s=e("../histogram/average"),l=e("../histogram/bin_label_vals");function u(e,t,n,i,o,s,l){var u=t+"bins",c=e[u];c||(c=e[u]={});var f=e._input[u]||{},d=e._autoBin={};f.size||delete c.size,void 0===f.start&&delete c.start,void 0===f.end&&delete c.end;var p=!c.size,h=void 0===c.start,m=void 0===c.end;if(p||h||m){var v=a.autoBin(n,i,e["nbins"+t],"2d",l,c.size);"histogram2dcontour"===e.type&&(h&&(v.start=s(a.tickIncrement(o(v.start),v.size,!0,l))),m&&(v.end=s(a.tickIncrement(o(v.end),v.size,!1,l)))),p&&(c.size=d.size=v.size),h&&(c.start=d.start=v.start),m&&(c.end=d.end=v.end)}var g="autobin"+t;!1===e._input[g]&&(e._input[u]=r.extendFlat({},c),delete e._input[g],delete e[g])}function c(e,t,n,r){var a,i=new Array(e);if(r)for(a=0;a<e;a++)i[a]=1/(t[a+1]-t[a]);else{var o=1/n;for(a=0;a<e;a++)i[a]=o}return i}function f(e,t){return{start:e(t.start),end:e(t.end),size:t.size}}function d(e,t,n,r,a,i){var o,s=e.length-1,u=new Array(s);if(t)for(o=0;o<s;o++)u[o]=[t[o],t[o]];else{var c=l(n,r,e,a,i);for(o=0;o<s;o++)u[o]=[c(e[o]),c(e[o+1],!0)]}return u}t.exports=function(e,t){var n,l,p,h,m=a.getFromId(e,t.xaxis||"x"),v=t.x?m.makeCalcdata(t,"x"):[],g=a.getFromId(e,t.yaxis||"y"),y=t.y?g.makeCalcdata(t,"y"):[],b=t.xcalendar,x=t.ycalendar,_=function(e){return m.r2c(e,0,b)},w=function(e){return g.r2c(e,0,x)},T=function(e){return m.c2r(e,0,b)},k=function(e){return g.c2r(e,0,x)},C=t._length;v.length>C&&v.splice(C,v.length-C),y.length>C&&y.splice(C,y.length-C),u(t,"x",v,m,_,T,b),u(t,"y",y,g,w,k,x);var E=[],M=[],A=[],S="string"==typeof t.xbins.size,O="string"==typeof t.ybins.size,P=[],R=[],L=S?P:t.xbins,D=O?R:t.ybins,I=0,z=[],j=[],N=t.histnorm,F=t.histfunc,B=-1!==N.indexOf("density"),V="max"===F||"min"===F,U=V?null:0,G=i.count,H=o[N],W=!1,q=[],Y=[],X="z"in t?t.z:"marker"in t&&Array.isArray(t.marker.color)?t.marker.color:"";X&&"count"!==F&&(W="avg"===F,G=i[F]);var Z=t.xbins,$=_(Z.start),K=_(Z.end)+($-a.tickIncrement($,Z.size,!1,b))/1e6;for(n=$;n<K;n=a.tickIncrement(n,Z.size,!1,b))M.push(U),P.push(n),W&&A.push(0);P.push(n);var J=M.length,Q=_(t.xbins.start),ee=(n-Q)/J,te=T(Q+ee/2);for(Z=t.ybins,$=w(Z.start),K=w(Z.end)+($-a.tickIncrement($,Z.size,!1,x))/1e6,n=$;n<K;n=a.tickIncrement(n,Z.size,!1,x)){E.push(M.slice()),R.push(n);var ne=new Array(J);for(l=0;l<J;l++)ne[l]=[];j.push(ne),W&&z.push(A.slice())}R.push(n);var re=E.length,ae=w(t.ybins.start),ie=(n-ae)/re,oe=k(ae+ie/2);B&&(q=c(M.length,L,ee,S),Y=c(E.length,D,ie,O)),S||"date"!==m.type||(L=f(_,L)),O||"date"!==g.type||(D=f(w,D));var se=!0,le=!0,ue=new Array(J),ce=new Array(re),fe=1/0,de=1/0,pe=1/0,he=1/0;for(n=0;n<C;n++){var me=v[n],ve=y[n];p=r.findBin(me,L),h=r.findBin(ve,D),p>=0&&p<J&&h>=0&&h<re&&(I+=G(p,n,E[h],X,z[h]),j[h][p].push(n),se&&(void 0===ue[p]?ue[p]=me:ue[p]!==me&&(se=!1)),le&&(void 0===ce[p]?ce[p]=ve:ce[p]!==ve&&(le=!1)),fe=Math.min(fe,me-P[p]),de=Math.min(de,P[p+1]-me),pe=Math.min(pe,ve-R[h]),he=Math.min(he,R[h+1]-ve))}if(W)for(h=0;h<re;h++)I+=s(E[h],z[h]);if(H)for(h=0;h<re;h++)H(E[h],I,q,Y[h]);return{x:v,xRanges:d(P,se&&ue,fe,de,m,b),x0:te,dx:ee,y:y,yRanges:d(R,le&&ce,pe,he,g,x),y0:oe,dy:ie,z:E,pts:j}}},{"../../lib":696,"../../plots/cartesian/axes":744,"../histogram/average":965,"../histogram/bin_functions":967,"../histogram/bin_label_vals":968,"../histogram/norm_functions":975}],978:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),a=e("../../constants/numerical").BADNUM,i=e("../../plots/cartesian/axis_ids"),o=e("../../lib"),s=e("./attributes"),l=["x","y"];function u(e,t,n,s){var l=n[i.id2name(e[t+"axis"])],u=l.type,c=t+"bins",f=e[c],d=e[t+"calendar"];f||(f=e[c]={});var p="date"===u?function(e,t){return e||0===e?o.cleanDate(e,a,d):t}:function(e,t){return r(e)?Number(e):t};f.start=p(f.start,s.start),f.end=p(f.end,s.end);var h=s.size,m=f.size;if(r(m))f.size=m>0?Number(m):h;else if("string"!=typeof m)f.size=h;else{var v=m.charAt(0),g=m.substr(1);((g=r(g)?Number(g):0)<=0||"date"!==u||"M"!==v||g!==Math.round(g))&&(f.size=h)}}t.exports=function(e,t){var n,r,a,i;function c(e){return o.coerce(a._input,a,s,e)}for(n=0;n<e.length;n++){var f=(a=e[n]).type;if("histogram2d"===f||"histogram2dcontour"===f)for(r=0;r<l.length;r++){var d=(i=l[r])+"bins",p=(a._autoBin||{})[i]||{};c(d+".start",p.start),c(d+".end",p.end),c(d+".size",p.size),u(a,i,t,p),(a[d]||{}).size||c("nbins"+i)}}}},{"../../constants/numerical":673,"../../lib":696,"../../plots/cartesian/axis_ids":747,"./attributes":976,"fast-isnumeric":214}],979:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("./sample_defaults"),i=e("../heatmap/style_defaults"),o=e("../../components/colorscale/defaults"),s=e("./attributes");t.exports=function(e,t,n,l){function u(n,a){return r.coerce(e,t,s,n,a)}a(e,t,u,l),!1!==t.visible&&(i(e,t,u,l),o(e,t,l,u,{prefix:"",cLetter:"z"}))}},{"../../components/colorscale/defaults":580,"../../lib":696,"../heatmap/style_defaults":959,"./attributes":976,"./sample_defaults":982}],980:[function(e,t,n){"use strict";var r=e("../heatmap/hover"),a=e("../../plots/cartesian/axes").hoverLabelText;t.exports=function(e,t,n,i,o,s){var l=r(e,t,n,i,o,s);if(l){var u=(e=l[0]).index,c=u[0],f=u[1],d=e.cd[0],p=d.xRanges[f],h=d.yRanges[c];return e.xLabel=a(e.xa,p[0],p[1]),e.yLabel=a(e.ya,h[0],h[1]),l}}},{"../../plots/cartesian/axes":744,"../heatmap/hover":952}],981:[function(e,t,n){"use strict";var r={};r.attributes=e("./attributes"),r.supplyDefaults=e("./defaults"),r.crossTraceDefaults=e("./cross_trace_defaults"),r.calc=e("../heatmap/calc"),r.plot=e("../heatmap/plot"),r.layerName="heatmaplayer",r.colorbar=e("../heatmap/colorbar"),r.style=e("../heatmap/style"),r.hoverPoints=e("./hover"),r.eventData=e("../histogram/event_data"),r.moduleType="trace",r.name="histogram2d",r.basePlotModule=e("../../plots/cartesian"),r.categories=["cartesian","svg","2dMap","histogram"],r.meta={},t.exports=r},{"../../plots/cartesian":756,"../heatmap/calc":946,"../heatmap/colorbar":948,"../heatmap/plot":957,"../heatmap/style":958,"../histogram/event_data":972,"./attributes":976,"./cross_trace_defaults":978,"./defaults":979,"./hover":980}],982:[function(e,t,n){"use strict";var r=e("../../registry");t.exports=function(e,t,n,a){var i=n("x"),o=n("y");if(i&&i.length&&o&&o.length){t._length=Math.min(i.length,o.length);var s=r.getComponentMethod("calendars","handleTraceDefaults");s(e,t,["x","y"],a);var l=n("z")||n("marker.color");l&&n("histfunc"),n("histnorm"),n("autobinx"),n("autobiny")}else t.visible=!1}},{"../../registry":827}],983:[function(e,t,n){"use strict";var r=e("../histogram2d/attributes"),a=e("../contour/attributes"),i=e("../../components/colorscale/attributes"),o=e("../../components/colorbar/attributes"),s=e("../../lib/extend").extendFlat;t.exports=s({x:r.x,y:r.y,z:r.z,marker:r.marker,histnorm:r.histnorm,histfunc:r.histfunc,nbinsx:r.nbinsx,xbins:r.xbins,nbinsy:r.nbinsy,ybins:r.ybins,autobinx:r.autobinx,autobiny:r.autobiny,autocontour:a.autocontour,ncontours:a.ncontours,contours:a.contours,line:a.line,zhoverformat:r.zhoverformat},i("",{cLetter:"z",editTypeOverride:"calc"}),{colorbar:o})},{"../../components/colorbar/attributes":571,"../../components/colorscale/attributes":577,"../../lib/extend":685,"../contour/attributes":916,"../histogram2d/attributes":976}],984:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("../histogram2d/sample_defaults"),i=e("../contour/contours_defaults"),o=e("../contour/style_defaults"),s=e("./attributes");t.exports=function(e,t,n,l){function u(n,a){return r.coerce(e,t,s,n,a)}a(e,t,u,l),!1!==t.visible&&(i(e,t,u,function(n){return r.coerce2(e,t,s,n)}),o(e,t,u,l))}},{"../../lib":696,"../contour/contours_defaults":923,"../contour/style_defaults":937,"../histogram2d/sample_defaults":982,"./attributes":983}],985:[function(e,t,n){"use strict";var r={};r.attributes=e("./attributes"),r.supplyDefaults=e("./defaults"),r.crossTraceDefaults=e("../histogram2d/cross_trace_defaults"),r.calc=e("../contour/calc"),r.plot=e("../contour/plot").plot,r.layerName="contourlayer",r.style=e("../contour/style"),r.colorbar=e("../contour/colorbar"),r.hoverPoints=e("../contour/hover"),r.moduleType="trace",r.name="histogram2dcontour",r.basePlotModule=e("../../plots/cartesian"),r.categories=["cartesian","svg","2dMap","contour","histogram","showLegend"],r.meta={},t.exports=r},{"../../plots/cartesian":756,"../contour/calc":917,"../contour/colorbar":919,"../contour/hover":929,"../contour/plot":934,"../contour/style":936,"../histogram2d/cross_trace_defaults":978,"./attributes":983,"./defaults":984}],986:[function(e,t,n){"use strict";var r=e("../../components/colorscale/attributes"),a=e("../../components/colorbar/attributes"),i=e("../surface/attributes"),o=e("../../plots/attributes"),s=e("../../lib/extend").extendFlat;t.exports=s({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},r("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:a,opacity:i.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:s({},i.contours.x.show,{}),color:i.contours.x.color,width:i.contours.x.width,editType:"calc"},lightposition:{x:s({},i.lightposition.x,{dflt:1e5}),y:s({},i.lightposition.y,{dflt:1e5}),z:s({},i.lightposition.z,{dflt:0}),editType:"calc"},lighting:s({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},i.lighting),hoverinfo:s({},o.hoverinfo,{editType:"calc"})})},{"../../components/colorbar/attributes":571,"../../components/colorscale/attributes":577,"../../lib/extend":685,"../../plots/attributes":741,"../surface/attributes":1130}],987:[function(e,t,n){"use strict";var r=e("../../components/colorscale/calc");t.exports=function(e,t){t.intensity&&r(t,t.intensity,"","c")}},{"../../components/colorscale/calc":578}],988:[function(e,t,n){"use strict";var r=e("gl-mesh3d"),a=e("delaunay-triangulate"),i=e("alpha-shape"),o=e("convex-hull"),s=e("../../lib/gl_format_color").parseColorScale,l=e("../../lib/str2rgbarray"),u=e("../../plots/gl3d/zip3");function c(e,t,n){this.scene=e,this.uid=n,this.mesh=t,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var f=c.prototype;function d(e){return e.map(l)}f.handlePick=function(e){if(e.object===this.mesh){var t=e.index=e.data.index;e.traceCoordinate=[this.data.x[t],this.data.y[t],this.data.z[t]];var n=this.data.text;return Array.isArray(n)&&void 0!==n[t]?e.textLabel=n[t]:n&&(e.textLabel=n),!0}},f.update=function(e){var t=this.scene,n=t.fullSceneLayout;function r(e,t,n,r){return t.map(function(t){return e.d2l(t,0,r)*n})}this.data=e;var c,f=u(r(n.xaxis,e.x,t.dataScale[0],e.xcalendar),r(n.yaxis,e.y,t.dataScale[1],e.ycalendar),r(n.zaxis,e.z,t.dataScale[2],e.zcalendar));if(e.i&&e.j&&e.k)c=u(e.i,e.j,e.k);else if(0===e.alphahull)c=o(f);else if(e.alphahull>0)c=i(e.alphahull,f);else{var p=["x","y","z"].indexOf(e.delaunayaxis);c=a(f.map(function(e){return[e[(p+1)%3],e[(p+2)%3]]}))}var h={positions:f,cells:c,lightPosition:[e.lightposition.x,e.lightposition.y,e.lightposition.z],ambient:e.lighting.ambient,diffuse:e.lighting.diffuse,specular:e.lighting.specular,roughness:e.lighting.roughness,fresnel:e.lighting.fresnel,vertexNormalsEpsilon:e.lighting.vertexnormalsepsilon,faceNormalsEpsilon:e.lighting.facenormalsepsilon,opacity:e.opacity,contourEnable:e.contour.show,contourColor:l(e.contour.color).slice(0,3),contourWidth:e.contour.width,useFacetNormals:e.flatshading};e.intensity?(this.color="#fff",h.vertexIntensity=e.intensity,h.vertexIntensityBounds=[e.cmin,e.cmax],h.colormap=s(e.colorscale)):e.vertexcolor?(this.color=e.vertexcolor[0],h.vertexColors=d(e.vertexcolor)):e.facecolor?(this.color=e.facecolor[0],h.cellColors=d(e.facecolor)):(this.color=e.color,h.meshColor=l(e.color)),this.mesh.update(h)},f.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},t.exports=function(e,t){var n=e.glplot.gl,a=r({gl:n}),i=new c(e,a,t.uid);return a._trace=i,i.update(t),e.glplot.add(a),i}},{"../../lib/gl_format_color":692,"../../lib/str2rgbarray":719,"../../plots/gl3d/zip3":798,"alpha-shape":52,"convex-hull":118,"delaunay-triangulate":150,"gl-mesh3d":268}],989:[function(e,t,n){"use strict";var r=e("../../registry"),a=e("../../lib"),i=e("../../components/colorscale/defaults"),o=e("./attributes");t.exports=function(e,t,n,s){function l(n,r){return a.coerce(e,t,o,n,r)}function u(e){var t=e.map(function(e){var t=l(e);return t&&a.isArrayOrTypedArray(t)?t:null});return t.every(function(e){return e&&e.length===t[0].length})&&t}var c=u(["x","y","z"]),f=u(["i","j","k"]);if(c){f&&f.forEach(function(e){for(var t=0;t<e.length;++t)e[t]|=0});var d=r.getComponentMethod("calendars","handleTraceDefaults");d(e,t,["x","y","z"],s),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","contour.show","contour.color","contour.width","colorscale","reversescale","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(e){l(e)}),"intensity"in e?(l("intensity"),i(e,t,s,l,{prefix:"",cLetter:"c"})):(t.showscale=!1,"facecolor"in e?l("facecolor"):"vertexcolor"in e?l("vertexcolor"):l("color",n)),l("text"),t._length=null}else t.visible=!1}},{"../../components/colorscale/defaults":580,"../../lib":696,"../../registry":827,"./attributes":986}],990:[function(e,t,n){"use strict";var r={};r.attributes=e("./attributes"),r.supplyDefaults=e("./defaults"),r.calc=e("./calc"),r.colorbar={min:"cmin",max:"cmax"},r.plot=e("./convert"),r.moduleType="trace",r.name="mesh3d",r.basePlotModule=e("../../plots/gl3d"),r.categories=["gl3d"],r.meta={},t.exports=r},{"../../plots/gl3d":787,"./attributes":986,"./calc":987,"./convert":988,"./defaults":989}],991:[function(e,t,n){"use strict";var r=e("../../lib").extendFlat,a=e("../scatter/attributes"),i=e("../../components/drawing/attributes").dash,o=e("../../components/fx/attributes"),s=a.line;function l(e){return{line:{color:r({},s.color,{dflt:e}),width:s.width,dash:i,editType:"style"},editType:"style"}}t.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:r({},s.width,{}),dash:r({},i,{}),editType:"style"},increasing:l("#3D9970"),decreasing:l("#FF4136"),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:r({},o.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}},{"../../components/drawing/attributes":594,"../../components/fx/attributes":604,"../../lib":696,"../scatter/attributes":1043}],992:[function(e,t,n){"use strict";var r=e("../../lib"),a=r._,i=e("../../plots/cartesian/axes"),o=e("../../constants/numerical").BADNUM;function s(e,t,n,r){return{o:e,h:t,l:n,c:r}}function l(e,t,n,r,s){for(var l=r.makeCalcdata(t,"open"),u=r.makeCalcdata(t,"high"),c=r.makeCalcdata(t,"low"),f=r.makeCalcdata(t,"close"),d=Array.isArray(t.text),p=!0,h=null,m=[],v=0;v<n.length;v++){var g=n[v],y=l[v],b=u[v],x=c[v],_=f[v];if(g!==o&&y!==o&&b!==o&&x!==o&&_!==o){_===y?null!==h&&_!==h&&(p=_>h):p=_>y,h=_;var w=s(y,b,x,_);w.pos=g,w.yc=(y+_)/2,w.i=v,w.dir=p?"increasing":"decreasing",d&&(w.tx=t.text[v]),m.push(w)}}return t._extremes[r._id]=i.findExtremes(r,c.concat(u),{padded:!0}),m.length&&(m[0].t={labels:{open:a(e,"open:")+" ",high:a(e,"high:")+" ",low:a(e,"low:")+" ",close:a(e,"close:")+" "}}),m}t.exports={calc:function(e,t){var n=i.getFromId(e,t.xaxis),a=i.getFromId(e,t.yaxis),o=function(e,t,n){var a=n._minDiff;if(!a){var i,o=e._fullData,s=[];for(a=1/0,i=0;i<o.length;i++){var l=o[i];if("ohlc"===l.type&&!0===l.visible&&l.xaxis===t._id){s.push(l);var u=t.makeCalcdata(l,"x");l._xcalc=u;var c=r.distinctVals(u).minDiff;c&&isFinite(c)&&(a=Math.min(a,c))}}for(a===1/0&&(a=1),i=0;i<s.length;i++)s[i]._minDiff=a}return a*n.tickwidth}(e,n,t),u=t._minDiff;t._minDiff=null;var c=t._xcalc;t._xcalc=null;var f=l(e,t,c,a,s);return t._extremes[n._id]=i.findExtremes(n,c,{vpad:u/2}),f.length?(r.extendFlat(f[0].t,{wHover:u/2,tickLen:o}),f):[{t:{empty:!0}}]},calcCommon:l}},{"../../constants/numerical":673,"../../lib":696,"../../plots/cartesian/axes":744}],993:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("./ohlc_defaults"),i=e("./attributes");function o(e,t,n,r){n(r+".line.color"),n(r+".line.width",t.line.width),n(r+".line.dash",t.line.dash)}t.exports=function(e,t,n,s){function l(n,a){return r.coerce(e,t,i,n,a)}var u=a(e,t,l,s);u?(l("line.width"),l("line.dash"),o(0,t,l,"increasing"),o(0,t,l,"decreasing"),l("text"),l("tickwidth"),s._requestRangeslider[t.xaxis]=!0):t.visible=!1}},{"../../lib":696,"./attributes":991,"./ohlc_defaults":996}],994:[function(e,t,n){"use strict";var r=e("../../plots/cartesian/axes"),a=e("../../lib"),i=e("../../components/fx"),o=e("../../components/color"),s=e("../scatter/fill_hover_text"),l={increasing:"",decreasing:""};function u(e,t,n,r){var a,s,l=e.cd,u=e.xa,c=l[0].trace,f=l[0].t,d=c.type,p="ohlc"===d?"l":"min",h="ohlc"===d?"h":"max",m=f.bPos||0,v=function(e){return e.pos+m-t},g=f.bdPos||f.tickLen,y=f.wHover,b=Math.min(1,g/Math.abs(u.r2c(u.range[1])-u.r2c(u.range[0])));function x(e){var t=v(e);return i.inbox(t-y,t+y,a)}function _(e){return i.inbox(e[p]-n,e[h]-n,a)}function w(e){return(x(e)+_(e))/2}a=e.maxHoverDistance-b,s=e.maxSpikeDistance-b;var T=i.getDistanceFunction(r,x,_,w);if(i.getClosest(l,T,e),!1===e.index)return null;var k=l[e.index],C=k.dir,E=c[C],M=E.line.color;return o.opacity(M)&&E.line.width?e.color=M:e.color=E.fillcolor,e.x0=u.c2p(k.pos+m-g,!0),e.x1=u.c2p(k.pos+m+g,!0),e.xLabelVal=k.pos,e.spikeDistance=w(k)*s/a,e.xSpike=u.c2p(k.pos,!0),e}function c(e,t,n,i){var o=e.cd,s=e.ya,l=o[0].trace,c=o[0].t,f=[],d=u(e,t,n,i);if(!d)return[];var p=d.index,h=o[p],m=h.hi||l.hoverinfo,v=m.split("+"),g="all"===m,y=g||-1!==v.indexOf("y");if(!y)return[];for(var b=["high","open","close","low"],x={},_=0;_<b.length;_++){var w,T=b[_],k=l[T][d.index],C=s.c2p(k,!0);k in x?(w=x[k]).yLabel+="<br>"+c.labels[T]+r.hoverLabelText(s,k):((w=a.extendFlat({},d)).y0=w.y1=C,w.yLabelVal=k,w.yLabel=c.labels[T]+r.hoverLabelText(s,k),w.name="",f.push(w),x[k]=w)}return f}function f(e,t,n,a){var i=e.cd,o=e.ya,c=i[0].trace,f=i[0].t,d=u(e,t,n,a);if(!d)return[];var p=d.index,h=i[p],m=d.index=h.i,v=h.dir;function g(e){return f.labels[e]+r.hoverLabelText(o,c[e][m])}var y=h.hi||c.hoverinfo,b=y.split("+"),x="all"===y,_=x||-1!==b.indexOf("y"),w=x||-1!==b.indexOf("text"),T=_?[g("open"),g("high"),g("low"),g("close")+"  "+l[v]]:[];return w&&s(h,c,T),d.extraText=T.join("<br>"),d.y0=d.y1=o.c2p(h.yc,!0),[d]}t.exports={hoverPoints:function(e,t,n,r){return e.cd[0].trace.hoverlabel.split?c(e,t,n,r):f(e,t,n,r)},hoverSplit:c,hoverOnPoints:f}},{"../../components/color":570,"../../components/fx":612,"../../lib":696,"../../plots/cartesian/axes":744,"../scatter/fill_hover_text":1051}],995:[function(e,t,n){"use strict";t.exports={moduleType:"trace",name:"ohlc",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","showLegend"],meta:{},attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc").calc,plot:e("./plot"),style:e("./style"),hoverPoints:e("./hover").hoverPoints,selectPoints:e("./select")}},{"../../plots/cartesian":756,"./attributes":991,"./calc":992,"./defaults":993,"./hover":994,"./plot":997,"./select":998,"./style":999}],996:[function(e,t,n){"use strict";var r=e("../../registry");t.exports=function(e,t,n,a){var i=n("x"),o=n("open"),s=n("high"),l=n("low"),u=n("close");n("hoverlabel.split");var c=r.getComponentMethod("calendars","handleTraceDefaults");if(c(e,t,["x"],a),o&&s&&l&&u){var f=Math.min(o.length,s.length,l.length,u.length);return i&&(f=Math.min(f,i.length)),t._length=f,f}}},{"../../registry":827}],997:[function(e,t,n){"use strict";var r=e("d3"),a=e("../../lib");t.exports=function(e,t,n,i){var o=t.xaxis,s=t.yaxis;a.makeTraceGroups(i,n,"trace ohlc").each(function(e){var n=r.select(this),i=e[0],l=i.t,u=i.trace;if(t.isRangePlot||(i.node3=n),!0!==u.visible||l.empty)n.remove();else{var c=l.tickLen,f=n.selectAll("path").data(a.identity);f.enter().append("path"),f.exit().remove(),f.attr("d",function(e){var t=o.c2p(e.pos,!0),n=o.c2p(e.pos-c,!0),r=o.c2p(e.pos+c,!0),a=s.c2p(e.o,!0),i=s.c2p(e.h,!0),l=s.c2p(e.l,!0),u=s.c2p(e.c,!0);return"M"+n+","+a+"H"+t+"M"+t+","+i+"V"+l+"M"+r+","+u+"H"+t})}})}},{"../../lib":696,d3:148}],998:[function(e,t,n){"use strict";t.exports=function(e,t){var n,r=e.cd,a=e.xaxis,i=e.yaxis,o=[],s=r[0].t.bPos||0;if(!1===t)for(n=0;n<r.length;n++)r[n].selected=0;else for(n=0;n<r.length;n++){var l=r[n];t.contains([a.c2p(l.pos+s),i.c2p(l.yc)],null,l.i,e)?(o.push({pointNumber:l.i,x:a.c2d(l.pos),y:i.c2d(l.yc)}),l.selected=1):l.selected=0}return o}},{}],999:[function(e,t,n){"use strict";var r=e("d3"),a=e("../../components/drawing"),i=e("../../components/color");t.exports=function(e,t){var n=t?t[0].node3:r.select(e).selectAll("g.ohlclayer").selectAll("g.trace");n.style("opacity",function(e){return e[0].trace.opacity}),n.each(function(e){var t=e[0].trace;r.select(this).selectAll("path").each(function(e){var n=t[e.dir].line;r.select(this).style("fill","none").call(i.stroke,n.color).call(a.dashLine,n.dash,n.width).style("opacity",t.selectedpoints&&!e.selected?.3:1)})})}},{"../../components/color":570,"../../components/drawing":595,d3:148}],1000:[function(e,t,n){"use strict";var r=e("../../lib/extend").extendFlat,a=e("../../plots/attributes"),i=e("../../plots/font_attributes"),o=e("../../components/colorscale/attributes"),s=e("../../plots/domain").attributes,l=e("../scatter/attributes"),u=l.line,c=e("../../components/colorbar/attributes"),f=r({editType:"calc"},o("line",{editType:"calc"}),{showscale:u.showscale,colorbar:c,shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"}});t.exports={domain:s({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:r({},a.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:i({editType:"calc"}),tickfont:i({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:f,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legendgroup:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},{"../../components/colorbar/attributes":571,"../../components/colorscale/attributes":577,"../../lib/extend":685,"../../plots/attributes":741,"../../plots/domain":770,"../../plots/font_attributes":771,"../scatter/attributes":1043}],1001:[function(e,t,n){"use strict";var r=e("../../plots/get_data").getModuleCalcData,a=e("./plot");n.name="parcats",n.plot=function(e,t,n,i){var o=r(e.calcdata,"parcats");if(o.length){var s=o[0];a(e,s,n,i)}},n.clean=function(e,t,n,r){var a=r._has&&r._has("parcats"),i=t._has&&t._has("parcats");a&&!i&&r._paperdiv.selectAll(".parcats").remove()}},{"../../plots/get_data":781,"./plot":1006}],1002:[function(e,t,n){"use strict";var r=e("../../lib/gup").wrap,a=e("../../components/colorscale/has_colorscale"),i=e("../../components/colorscale/calc"),o=e("../../lib/filter_unique.js"),s=e("../../components/drawing"),l=e("../../lib");function u(e,t,n,r){return{dimensionInd:e,categoryInd:t,categoryValue:n,displayInd:t,categoryLabel:r,valueInds:[],count:0,dragY:null}}function c(e,t,n){e.valueInds.push(t),e.count+=n}function f(e,t,n){return{categoryInds:e,color:t,rawColor:n,valueInds:[],count:0}}function d(e,t,n){e.valueInds.push(t),e.count+=n}t.exports=function(e,t){var n=l.filterVisible(t.dimensions);if(0===n.length)return[];var p,h,m,v=n.map(function(e){var t;return"trace"===e.categoryorder?t=null:"array"===e.categoryorder?t=e.categoryarray:(t=o(e.values).sort(),"category descending"===e.categoryorder&&(t=t.reverse())),function(e,t){var n={},r={},a=[];(t=void 0===t||null===t?[]:t.map(function(e){return e})).forEach(function(e,t){n[e]=0,r[e]=t});for(var i=0;i<e.length;i++){var o,s=e[i];void 0===n[s]?(n[s]=1,o=t.push(s)-1,r[s]=o):(n[s]++,o=r[s]),a.push(o)}var l=t.map(function(e){return n[e]});return{uniqueValues:t,uniqueCounts:l,inds:a}}(e.values,t)});p=l.isArrayOrTypedArray(t.counts)?t.counts:[t.counts],function(e){var t;if(function(e){for(var t=new Array(e.length),n=0;n<e.length;n++){if(e[n]<0||e[n]>=e.length)return!1;if(void 0!==t[e[n]])return!1;t[e[n]]=!0}return!0}(e.map(function(e){return e.displayindex})))for(t=0;t<e.length;t++)e[t]._displayindex=e[t].displayindex;else for(t=0;t<e.length;t++)e[t]._displayindex=t}(n),n.forEach(function(e,t){!function(e,t){e._categoryarray=t.uniqueValues,null===e.ticktext||void 0===e.ticktext?e._ticktext=[]:e._ticktext=e.ticktext.slice();for(var n=e._ticktext.length;n<t.uniqueValues.length;n++)e._ticktext.push(t.uniqueValues[n])}(e,v[t])});var g,y=t.line;function b(e){var t;return t=l.isArrayOrTypedArray(y.color)?y.color[e%y.color.length]:y.color,{color:g(t),rawColor:t}}y?(a(t,"line")&&i(t,t.line.color,"line","c"),g=s.tryColorscale(y)):g=l.identity;var x,_,w=n[0].values.length,T={},k=v.map(function(e){return e.inds});for(m=0,x=0;x<w;x++){var C=[];for(_=0;_<k.length;_++)C.push(k[_][x]);h=p[x%p.length],m+=h;var E=b(x),M=C+"-"+E.rawColor;void 0===T[M]&&(T[M]=f(C,E.color,E.rawColor)),d(T[M],x,h)}var A=n.map(function(e,t){return function(e,t,n,r,a){return{dimensionInd:e,containerInd:t,displayInd:n,dimensionLabel:r,count:a,categories:[],dragX:null}}(t,e._index,e._displayindex,e.label,m)});for(x=0;x<w;x++)for(h=p[x%p.length],_=0;_<A.length;_++){var S=A[_].containerInd,O=v[_].inds[x],P=A[_].categories;if(void 0===P[O]){var R=t.dimensions[S]._categoryarray[O],L=t.dimensions[S]._ticktext[O];P[O]=u(_,O,R,L)}c(P[O],x,h)}return r(function(e,t,n){var r=e.map(function(e){return e.categories.length}).reduce(function(e,t){return Math.max(e,t)});return{dimensions:e,paths:t,trace:void 0,maxCats:r,count:n}}(A,T,m))}},{"../../components/colorscale/calc":578,"../../components/colorscale/has_colorscale":584,"../../components/drawing":595,"../../lib":696,"../../lib/filter_unique.js":686,"../../lib/gup":693}],1003:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("../../components/colorscale/has_colorscale"),i=e("../../components/colorscale/defaults"),o=e("../../plots/domain").defaults,s=e("../../plots/array_container_defaults"),l=e("./attributes"),u=e("../parcoords/merge_length");function c(e,t){function n(n,a){return r.coerce(e,t,l.dimensions,n,a)}var a=n("values"),i=n("visible");if(a&&a.length||(i=t.visible=!1),i){n("label"),n("displayindex",t._index);var o,s=e.categoryarray,u=Array.isArray(s)&&s.length>0;u&&(o="array");var c=n("categoryorder",o);"array"===c?(n("categoryarray"),n("ticktext")):(delete e.categoryarray,delete e.ticktext),u||"array"!==c||(t.categoryorder="trace")}}t.exports=function(e,t,n,f){function d(n,a){return r.coerce(e,t,l,n,a)}var p=s(e,t,{name:"dimensions",handleItemDefaults:c}),h=function(e,t,n,o,s){s("line.shape");var l=s("line.color",o.colorway[0]);if(a(e,"line")&&r.isArrayOrTypedArray(l)){if(l.length)return s("line.colorscale"),i(e,t,o,s,{prefix:"line.",cLetter:"c"}),l.length;t.line.color=n}return 1/0}(e,t,n,f,d);o(t,f,d),Array.isArray(p)&&p.length||(t.visible=!1),u(t,p,"values",h),d("hoveron"),d("arrangement"),d("bundlecolors"),d("sortpaths"),d("counts");var m={family:f.font.family,size:Math.round(f.font.size),color:f.font.color};r.coerceFont(d,"labelfont",m);var v={family:f.font.family,size:Math.round(f.font.size/1.2),color:f.font.color};r.coerceFont(d,"tickfont",v)}},{"../../components/colorscale/defaults":580,"../../components/colorscale/has_colorscale":584,"../../lib":696,"../../plots/array_container_defaults":740,"../../plots/domain":770,"../parcoords/merge_length":1015,"./attributes":1e3}],1004:[function(e,t,n){"use strict";var r={};r.attributes=e("./attributes"),r.supplyDefaults=e("./defaults"),r.calc=e("./calc"),r.plot=e("./plot"),r.colorbar={container:"line",min:"cmin",max:"cmax"},r.moduleType="trace",r.name="parcats",r.basePlotModule=e("./base_plot"),r.categories=["noOpacity"],r.meta={},t.exports=r},{"./attributes":1e3,"./base_plot":1001,"./calc":1002,"./defaults":1003,"./plot":1006}],1005:[function(e,t,n){"use strict";var r=e("d3"),a=e("../../plot_api/plot_api"),i=e("../../components/fx"),o=e("../../lib"),s=e("../../components/drawing"),l=e("tinycolor2"),u=e("../../lib/svg_text_utils");function c(e,t,n,a){var i=e.map(function(e,t,n){var r,a=n[0],i=t.margin||{l:80,r:80,t:100,b:80},o=a.trace,s=o.domain,l=t.width,u=t.height,c=Math.floor(l*(s.x[1]-s.x[0])),f=Math.floor(u*(s.y[1]-s.y[0])),d=s.x[0]*l+i.l,p=t.height-s.y[1]*t.height+i.t,h=o.line.shape;r="all"===o.hoverinfo?["count","probability"]:o.hoverinfo.split("+");var m={key:o.uid,model:a,x:d,y:p,width:c,height:f,hoveron:o.hoveron,hoverinfoItems:r,arrangement:o.arrangement,bundlecolors:o.bundlecolors,sortpaths:o.sortpaths,labelfont:o.labelfont,categorylabelfont:o.tickfont,pathShape:h,dragDimension:null,margin:i,paths:[],dimensions:[],graphDiv:e,traceSelection:null,pathSelection:null,dimensionSelection:null};return a.dimensions&&(z(m),I(m)),m}.bind(0,t,n)),l=a.selectAll("g.parcatslayer").data([null]);l.enter().append("g").attr("class","parcatslayer").style("pointer-events","all");var c=l.selectAll("g.trace.parcats").data(i,f),v=c.enter().append("g").attr("class","trace parcats");c.attr("transform",function(e){return"translate("+e.x+", "+e.y+")"}),v.append("g").attr("class","paths");var b=c.select("g.paths"),w=b.selectAll("path.path").data(function(e){return e.paths},f);w.attr("fill",function(e){return e.model.color});var T=w.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(e){return e.model.color}).attr("fill-opacity",0);y(T),w.attr("d",function(e){return e.svgD}),T.empty()||w.sort(p),w.exit().remove(),w.on("mouseover",h).on("mouseout",m).on("click",g),v.append("g").attr("class","dimensions");var k=c.select("g.dimensions"),C=k.selectAll("g.dimension").data(function(e){return e.dimensions},f);C.enter().append("g").attr("class","dimension"),C.attr("transform",function(e){return"translate("+e.x+", 0)"}),C.exit().remove();var P=C.selectAll("g.category").data(function(e){return e.categories},f),R=P.enter().append("g").attr("class","category");P.attr("transform",function(e){return"translate(0, "+e.y+")"}),R.append("rect").attr("class","catrect").attr("pointer-events","none"),P.select("rect.catrect").attr("fill","none").attr("width",function(e){return e.width}).attr("height",function(e){return e.height}),x(R);var L=P.selectAll("rect.bandrect").data(function(e){return e.bands},f);L.each(function(){o.raiseToTop(this)}),L.attr("fill",function(e){return e.color});var D=L.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(e){return e.color}).attr("fill-opacity",0);L.attr("fill",function(e){return e.color}).attr("width",function(e){return e.width}).attr("height",function(e){return e.height}).attr("y",function(e){return e.y}).attr("cursor",function(e){return"fixed"===e.parcatsViewModel.arrangement?"default":"perpendicular"===e.parcatsViewModel.arrangement?"ns-resize":"move"}),_(D),L.exit().remove(),R.append("text").attr("class","catlabel").attr("pointer-events","none");var j=t._fullLayout.paper_bgcolor;P.select("text.catlabel").attr("text-anchor",function(e){return d(e)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",j+" -1px  1px 2px, "+j+" 1px  1px 2px, "+j+"  1px -1px 2px, "+j+" -1px -1px 2px").style("fill","rgb(0, 0, 0)").attr("x",function(e){return d(e)?e.width+5:-5}).attr("y",function(e){return e.height/2}).text(function(e){return e.model.categoryLabel}).each(function(e){s.font(r.select(this),e.parcatsViewModel.categorylabelfont),u.convertToTspans(r.select(this),t)}),R.append("text").attr("class","dimlabel"),P.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(e){return"fixed"===e.parcatsViewModel.arrangement?"default":"ew-resize"}).attr("x",function(e){return e.width/2}).attr("y",-5).text(function(e,t){return 0===t?e.parcatsViewModel.model.dimensions[e.model.dimensionInd].dimensionLabel:null}).each(function(e){s.font(r.select(this),e.parcatsViewModel.labelfont)}),P.selectAll("rect.bandrect").on("mouseover",E).on("mouseout",M),P.exit().remove(),C.call(r.behavior.drag().origin(function(e){return{x:e.x,y:0}}).on("dragstart",A).on("drag",S).on("dragend",O)),c.each(function(e){e.traceSelection=r.select(this),e.pathSelection=r.select(this).selectAll("g.paths").selectAll("path.path"),e.dimensionSelection=r.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),c.exit().remove()}function f(e){return e.key}function d(e){var t=e.parcatsViewModel.dimensions.length,n=e.parcatsViewModel.dimensions[t-1].model.dimensionInd;return e.model.dimensionInd===n}function p(e,t){return e.model.rawColor>t.model.rawColor?1:e.model.rawColor<t.model.rawColor?-1:0}function h(e){if(!e.parcatsViewModel.dragDimension&&-1===e.parcatsViewModel.hoverinfoItems.indexOf("skip")){o.raiseToTop(this),b(r.select(this));var t=v(e);if(e.parcatsViewModel.graphDiv.emit("plotly_hover",{points:t,event:r.event}),-1===e.parcatsViewModel.hoverinfoItems.indexOf("none")){var n,a,s,u=r.mouse(this)[0],c=e.parcatsViewModel.graphDiv,f=c._fullLayout,d=f._paperdiv.node().getBoundingClientRect(),p=e.parcatsViewModel.graphDiv.getBoundingClientRect();for(s=0;s<e.leftXs.length-1;s++)if(e.leftXs[s]+e.dimWidths[s]-2<=u&&u<=e.leftXs[s+1]+2){var h=e.parcatsViewModel.dimensions[s],m=e.parcatsViewModel.dimensions[s+1];n=(h.x+h.width+m.x)/2,a=(e.topYs[s]+e.topYs[s+1]+e.height)/2;break}var g=e.parcatsViewModel.x+n,y=e.parcatsViewModel.y+a,x=l.mostReadable(e.model.color,["black","white"]),_=[];-1!==e.parcatsViewModel.hoverinfoItems.indexOf("count")&&_.push(["Count:",e.model.count].join(" ")),-1!==e.parcatsViewModel.hoverinfoItems.indexOf("probability")&&_.push(["P:",(e.model.count/e.parcatsViewModel.model.count).toFixed(3)].join(" "));var w=_.join("<br>"),T=r.mouse(c)[0];i.loneHover({x:g-d.left+p.left,y:y-d.top+p.top,text:w,color:e.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:x,idealAlign:T<g?"right":"left"},{container:f._hoverlayer.node(),outerContainer:f._paper.node(),gd:c})}}}function m(e){if(!e.parcatsViewModel.dragDimension&&(y(r.select(this)),i.loneUnhover(e.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),e.parcatsViewModel.pathSelection.sort(p),-1===e.parcatsViewModel.hoverinfoItems.indexOf("skip"))){var t=v(e);e.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:t,event:r.event})}}function v(e){for(var t=[],n=P(e.parcatsViewModel),r=0;r<e.model.valueInds.length;r++){var a=e.model.valueInds[r];t.push({curveNumber:n,pointNumber:a})}return t}function g(e){if(-1===e.parcatsViewModel.hoverinfoItems.indexOf("skip")){var t=v(e);e.parcatsViewModel.graphDiv.emit("plotly_click",{points:t,event:r.event})}}function y(e){e.attr("fill",function(e){return e.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function b(e){e.attr("fill-opacity",.8).attr("stroke",function(e){return l.mostReadable(e.model.color,["black","white"])}).attr("stroke-width",.3)}function x(e){e.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function _(e){e.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function w(e){var t=e.parcatsViewModel.pathSelection,n=e.categoryViewModel.model.dimensionInd,r=e.categoryViewModel.model.categoryInd;return t.filter(function(t){return t.model.categoryInds[n]===r&&t.model.color===e.color})}function T(e,t,n){var a=r.select(e).datum(),i=a.parcatsViewModel.graphDiv,o=r.select(e.parentNode).selectAll("rect.bandrect"),s=[];o.each(function(e){var t=w(e);t.each(function(e){Array.prototype.push.apply(s,v(e))})}),i.emit(t,{points:s,event:n})}function k(e,t,n){var a=r.select(e).datum(),i=a.parcatsViewModel.graphDiv,o=w(a),s=[];o.each(function(e){Array.prototype.push.apply(s,v(e))}),i.emit(t,{points:s,event:n})}function C(e,t){var n,a,i=r.select(t.parentNode).select("rect.catrect"),o=i.node().getBoundingClientRect(),s=i.datum(),l=s.parcatsViewModel,u=l.model.dimensions[s.model.dimensionInd],c=o.top+o.height/2;l.dimensions.length>1&&u.displayInd===l.dimensions.length-1?(n=o.left,a="left"):(n=o.left+o.width,a="right");var f=[];-1!==s.parcatsViewModel.hoverinfoItems.indexOf("count")&&f.push(["Count:",s.model.count].join(" ")),-1!==s.parcatsViewModel.hoverinfoItems.indexOf("probability")&&f.push(["P("+s.model.categoryLabel+"):",(s.model.count/s.parcatsViewModel.model.count).toFixed(3)].join(" "));var d=f.join("<br>");return{x:n-e.left,y:c-e.top,text:d,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:a}}function E(e){if(!e.parcatsViewModel.dragDimension&&-1===e.parcatsViewModel.hoverinfoItems.indexOf("skip")){var t=r.mouse(this)[1];if(t<-1)return;var n,a=e.parcatsViewModel.graphDiv,s=a._fullLayout,u=s._paperdiv.node().getBoundingClientRect(),c=e.parcatsViewModel.hoveron;"color"===c?(function(e){var t=r.select(e).datum(),n=w(t);b(n),n.each(function(){o.raiseToTop(this)}),r.select(e.parentNode).selectAll("rect.bandrect").filter(function(e){return e.color===t.color}).each(function(){o.raiseToTop(this),function(e){e.attr("stroke","black").attr("stroke-width",1.5)}(r.select(this))})}(this),k(this,"plotly_hover",r.event)):(function(e){r.select(e.parentNode).selectAll("rect.bandrect").each(function(e){var t=w(e);b(t),t.each(function(){o.raiseToTop(this)})}),function(e){e.select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}(r.select(e.parentNode))}(this),T(this,"plotly_hover",r.event)),-1===e.parcatsViewModel.hoverinfoItems.indexOf("none")&&("category"===c?n=C(u,this):"color"===c?n=function(e,t){var n,a,i=t.getBoundingClientRect(),o=r.select(t).datum(),s=o.categoryViewModel,u=s.parcatsViewModel,c=u.model.dimensions[s.model.dimensionInd],f=i.y+i.height/2;u.dimensions.length>1&&c.displayInd===u.dimensions.length-1?(n=i.left,a="left"):(n=i.left+i.width,a="right");var d=s.model.categoryLabel,p=o.parcatsViewModel.model.count,h=0;o.categoryViewModel.bands.forEach(function(e){e.color===o.color&&(h+=e.count)});var m=s.model.count,v=0;u.pathSelection.each(function(e){e.model.color===o.color&&(v+=e.model.count)});var g=[];if(-1!==s.parcatsViewModel.hoverinfoItems.indexOf("count")&&g.push(["Count:",h].join(" ")),-1!==s.parcatsViewModel.hoverinfoItems.indexOf("probability")){var y="P(color  "+d+"): ",b=(h/p).toFixed(3),x=y+b;g.push(x);var _="P("+d+" | color): ",w=(h/v).toFixed(3),T=_+w;g.push(T);var k="P(color | "+d+"): ",C=(h/m).toFixed(3),E=k+C;g.push(E)}var M=g.join("<br>"),A=l.mostReadable(o.color,["black","white"]);return{x:n-e.left,y:f-e.top,text:M,color:o.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:A,fontSize:10,idealAlign:a}}(u,this):"dimension"===c&&(n=function(e,t){var n=[];return r.select(t.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){n.push(C(e,this))}),n}(u,this)),n&&i.multiHovers(n,{container:s._hoverlayer.node(),outerContainer:s._paper.node(),gd:a}))}}function M(e){var t=e.parcatsViewModel;if(!t.dragDimension&&(y(t.pathSelection),x(t.dimensionSelection.selectAll("g.category")),_(t.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),i.loneUnhover(t.graphDiv._fullLayout._hoverlayer.node()),t.pathSelection.sort(p),-1===t.hoverinfoItems.indexOf("skip"))){var n=e.parcatsViewModel.hoveron;"color"===n?k(this,"plotly_unhover",r.event):T(this,"plotly_unhover",r.event)}}function A(e){"fixed"!==e.parcatsViewModel.arrangement&&(e.dragDimensionDisplayInd=e.model.displayInd,e.initialDragDimensionDisplayInds=e.parcatsViewModel.model.dimensions.map(function(e){return e.displayInd}),e.dragHasMoved=!1,e.dragCategoryDisplayInd=null,r.select(this).selectAll("g.category").select("rect.catrect").each(function(t){var n=r.mouse(this)[0],a=r.mouse(this)[1];-2<=n&&n<=t.width+2&&-2<=a&&a<=t.height+2&&(e.dragCategoryDisplayInd=t.model.displayInd,e.initialDragCategoryDisplayInds=e.model.categories.map(function(e){return e.displayInd}),t.model.dragY=t.y,o.raiseToTop(this.parentNode),r.select(this.parentNode).selectAll("rect.bandrect").each(function(t){t.y<a&&a<=t.y+t.height&&(e.potentialClickBand=this)}))}),e.parcatsViewModel.dragDimension=e,i.loneUnhover(e.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function S(e){if("fixed"!==e.parcatsViewModel.arrangement&&(e.dragHasMoved=!0,null!==e.dragDimensionDisplayInd)){var t=e.dragDimensionDisplayInd,n=t-1,a=t+1,i=e.parcatsViewModel.dimensions[t];if(null!==e.dragCategoryDisplayInd){var o=i.categories[e.dragCategoryDisplayInd];o.model.dragY+=r.event.dy;var s=o.model.dragY,l=o.model.displayInd,u=i.categories,c=u[l-1],f=u[l+1];void 0!==c&&s<c.y+c.height/2&&(o.model.displayInd=c.model.displayInd,c.model.displayInd=l),void 0!==f&&s+o.height>f.y+f.height/2&&(o.model.displayInd=f.model.displayInd,f.model.displayInd=l),e.dragCategoryDisplayInd=o.model.displayInd}if(null===e.dragCategoryDisplayInd||"freeform"===e.parcatsViewModel.arrangement){i.model.dragX=r.event.x;var d=e.parcatsViewModel.dimensions[n],p=e.parcatsViewModel.dimensions[a];void 0!==d&&i.model.dragX<d.x+d.width&&(i.model.displayInd=d.model.displayInd,d.model.displayInd=t),void 0!==p&&i.model.dragX+i.width>p.x&&(i.model.displayInd=p.model.displayInd,p.model.displayInd=e.dragDimensionDisplayInd),e.dragDimensionDisplayInd=i.model.displayInd}z(e.parcatsViewModel),I(e.parcatsViewModel),L(e.parcatsViewModel),R(e.parcatsViewModel)}}function O(e){if("fixed"!==e.parcatsViewModel.arrangement&&null!==e.dragDimensionDisplayInd){r.select(this).selectAll("text").attr("font-weight","normal");var t={},n=P(e.parcatsViewModel),i=e.parcatsViewModel.model.dimensions.map(function(e){return e.displayInd}),o=e.initialDragDimensionDisplayInds.some(function(e,t){return e!==i[t]});o&&i.forEach(function(n,r){var a=e.parcatsViewModel.model.dimensions[r].containerInd;t["dimensions["+a+"].displayindex"]=n});var s=!1;if(null!==e.dragCategoryDisplayInd){var l=e.model.categories.map(function(e){return e.displayInd});if(s=e.initialDragCategoryDisplayInds.some(function(e,t){return e!==l[t]})){var u=e.model.categories.slice().sort(function(e,t){return e.displayInd-t.displayInd}),c=u.map(function(e){return e.categoryValue}),f=u.map(function(e){return e.categoryLabel});t["dimensions["+e.model.containerInd+"].categoryarray"]=[c],t["dimensions["+e.model.containerInd+"].ticktext"]=[f],t["dimensions["+e.model.containerInd+"].categoryorder"]="array"}}if(-1===e.parcatsViewModel.hoverinfoItems.indexOf("skip")&&!e.dragHasMoved&&e.potentialClickBand&&("color"===e.parcatsViewModel.hoveron?k(e.potentialClickBand,"plotly_click",r.event.sourceEvent):T(e.potentialClickBand,"plotly_click",r.event.sourceEvent)),e.model.dragX=null,null!==e.dragCategoryDisplayInd){var d=e.parcatsViewModel.dimensions[e.dragDimensionDisplayInd].categories[e.dragCategoryDisplayInd];d.model.dragY=null,e.dragCategoryDisplayInd=null}e.dragDimensionDisplayInd=null,e.parcatsViewModel.dragDimension=null,e.dragHasMoved=null,e.potentialClickBand=null,z(e.parcatsViewModel),I(e.parcatsViewModel);var p=r.transition().duration(300).ease("cubic-in-out");p.each(function(){L(e.parcatsViewModel,!0),R(e.parcatsViewModel,!0)}).each("end",function(){(o||s)&&a.restyle(e.parcatsViewModel.graphDiv,t,[n])})}}function P(e){for(var t,n=e.graphDiv._fullData,r=0;r<n.length;r++)if(e.key===n[r].uid){t=r;break}return t}function R(e,t){void 0===t&&(t=!1),e.pathSelection.data(function(e){return e.paths},f),function(e){return t?e.transition():e}(e.pathSelection).attr("d",function(e){return e.svgD})}function L(e,t){function n(e){return t?e.transition():e}void 0===t&&(t=!1),e.dimensionSelection.data(function(e){return e.dimensions},f);var a=e.dimensionSelection.selectAll("g.category").data(function(e){return e.categories},f);n(e.dimensionSelection).attr("transform",function(e){return"translate("+e.x+", 0)"}),n(a).attr("transform",function(e){return"translate(0, "+e.y+")"});var i=a.select(".dimlabel");i.text(function(e,t){return 0===t?e.parcatsViewModel.model.dimensions[e.model.dimensionInd].dimensionLabel:null});var s=a.select(".catlabel");s.attr("text-anchor",function(e){return d(e)?"start":"end"}).attr("x",function(e){return d(e)?e.width+5:-5}).each(function(e){var t,n;d(e)?(t=e.width+5,n="start"):(t=-5,n="end"),r.select(this).selectAll("tspan").attr("x",t).attr("text-anchor",n)});var l=a.selectAll("rect.bandrect").data(function(e){return e.bands},f),u=l.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(e){return e.color}).attr("fill-opacity",0);l.attr("fill",function(e){return e.color}).attr("width",function(e){return e.width}).attr("height",function(e){return e.height}).attr("y",function(e){return e.y}),_(u),l.each(function(){o.raiseToTop(this)}),l.exit().remove()}function D(e,t,n,a,i){var o,s,l=[],u=[];for(s=0;s<n.length-1;s++)o=r.interpolateNumber(n[s]+e[s],e[s+1]),l.push(o(i)),u.push(o(1-i));var c="M "+e[0]+","+t[0];for(c+="l"+n[0]+",0 ",s=1;s<n.length;s++)c+="C"+l[s-1]+","+t[s-1]+" "+u[s-1]+","+t[s]+" "+e[s]+","+t[s],c+="l"+n[s]+",0 ";for(c+="l0,"+a+" ",c+="l -"+n[n.length-1]+",0 ",s=n.length-2;s>=0;s--)c+="C"+u[s]+","+(t[s+1]+a)+" "+l[s]+","+(t[s]+a)+" "+(e[s]+n[s])+","+(t[s]+a),c+="l-"+n[s]+",0 ";return c+="Z"}function I(e){var t=e.dimensions,n=e.model,r=t.map(function(e){return e.categories.map(function(e){return e.y})}),a=e.model.dimensions.map(function(e){return e.categories.map(function(e){return e.displayInd})}),i=e.model.dimensions.map(function(e){return e.displayInd}),o=e.dimensions.map(function(e){return e.model.dimensionInd}),s=t.map(function(e){return e.x}),l=t.map(function(e){return e.width}),u=[];for(var c in n.paths)n.paths.hasOwnProperty(c)&&u.push(n.paths[c]);function f(e){var t=e.categoryInds.map(function(e,t){return a[t][e]}),n=o.map(function(e){return t[e]});return n}u.sort(function(t,n){var r=f(t),a=f(n);return"backward"===e.sortpaths&&(r.reverse(),a.reverse()),r.push(t.valueInds[0]),a.push(n.valueInds[0]),e.bundlecolors&&(r.unshift(t.rawColor),a.unshift(n.rawColor)),r<a?-1:r>a?1:0});for(var d=new Array(u.length),p=t[0].model.count,h=t[0].categories.map(function(e){return e.height}).reduce(function(e,t){return e+t}),m=0;m<u.length;m++){var v,g=u[m];v=p>0?h*(g.count/p):0;for(var y,b=new Array(r.length),x=0;x<g.categoryInds.length;x++){var _=g.categoryInds[x],w=a[x][_],T=i[x];b[T]=r[T][w],r[T][w]+=v;var k=e.dimensions[T].categories[w],C=k.bands.length,E=k.bands[C-1];if(void 0===E||g.rawColor!==E.rawColor){var M=void 0===E?0:E.y+E.height;k.bands.push({key:M,color:g.color,rawColor:g.rawColor,height:v,width:k.width,count:g.count,y:M,categoryViewModel:k,parcatsViewModel:e})}else{var A=k.bands[C-1];A.height+=v,A.count+=g.count}}y="hspline"===e.pathShape?D(s,b,l,v,.5):D(s,b,l,v,0),d[m]={key:g.valueInds[0],model:g,height:v,leftXs:s,topYs:b,dimWidths:l,svgD:y,parcatsViewModel:e}}e.paths=d}function z(e){var t=e.model.dimensions.map(function(e){return{displayInd:e.displayInd,dimensionInd:e.dimensionInd}});t.sort(function(e,t){return e.displayInd-t.displayInd});var n=[];for(var r in t){var a=t[r].dimensionInd,i=e.model.dimensions[a];n.push(j(e,i))}e.dimensions=n}function j(e,t){var n,r,a=e.model.dimensions.length,i=t.displayInd;n=a>1?(e.width-80-16)/(a-1):0,r=40+n*i;var o,s,l,u,c,f=[],d=e.model.maxCats,p=t.categories.length,h=t.count,m=e.height-8*(d-1),v=8*(d-p)/2,g=t.categories.map(function(e){return{displayInd:e.displayInd,categoryInd:e.categoryInd}});for(g.sort(function(e,t){return e.displayInd-t.displayInd}),c=0;c<p;c++)u=g[c].categoryInd,s=t.categories[u],o=h>0?s.count/h*m:0,l={key:s.valueInds[0],model:s,width:16,height:o,y:null!==s.dragY?s.dragY:v,bands:[],parcatsViewModel:e},v=v+o+8,f.push(l);return{key:t.dimensionInd,x:null!==t.dragX?t.dragX:r,y:0,width:16,model:t,categories:f,parcatsViewModel:e,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}t.exports=function(e,t,n,r){c(n,e,r,t)}},{"../../components/drawing":595,"../../components/fx":612,"../../lib":696,"../../lib/svg_text_utils":720,"../../plot_api/plot_api":731,d3:148,tinycolor2:514}],1006:[function(e,t,n){"use strict";var r=e("./parcats");t.exports=function(e,t,n,a){var i=e._fullLayout,o=i._paper,s=i._size;r(e,o,t,{width:s.w,height:s.h,margin:{t:s.t,r:s.r,b:s.b,l:s.l}},n,a)}},{"./parcats":1005}],1007:[function(e,t,n){"use strict";var r=e("../../components/colorscale/attributes"),a=e("../../components/colorbar/attributes"),i=e("../../plots/cartesian/layout_attributes"),o=e("../../plots/font_attributes"),s=e("../../plots/domain").attributes,l=e("../../lib/extend").extendFlat,u=e("../../plot_api/plot_template").templatedArray;t.exports={domain:s({name:"parcoords",trace:!0,editType:"calc"}),hoverlabel:void 0,labelfont:o({editType:"calc"}),tickfont:o({editType:"calc"}),rangefont:o({editType:"calc"}),dimensions:u("dimension",{label:{valType:"string",editType:"calc"},tickvals:l({},i.tickvals,{editType:"calc"}),ticktext:l({},i.ticktext,{editType:"calc"}),tickformat:{valType:"string",dflt:"3s",editType:"calc"},visible:{valType:"boolean",dflt:!0,editType:"calc"},range:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},multiselect:{valType:"boolean",dflt:!0,editType:"calc"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:l(r("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"}),{colorbar:a,editType:"calc"})}},{"../../components/colorbar/attributes":571,"../../components/colorscale/attributes":577,"../../lib/extend":685,"../../plot_api/plot_template":734,"../../plots/cartesian/layout_attributes":757,"../../plots/domain":770,"../../plots/font_attributes":771}],1008:[function(e,t,n){"use strict";var r=e("./constants"),a=e("d3"),i=e("../../lib/gup").keyFun,o=e("../../lib/gup").repeat,s=e("../../lib").sorterAsc,l=r.bar.snapRatio;function u(e,t){return e*(1-l)+t*l}var c=r.bar.snapClose;function f(e,t){return e*(1-c)+t*c}function d(e,t,n){if(h(t,n))return t;for(var r=e[0],a=r,i=1;i<e.length;i++){var o=e[i];if(t<f(r,o))return u(r,a);if(t<o||i===e.length-1)return u(o,r);a=r,r=o}}function p(e,t,n){if(h(t,n))return t;for(var r=e[e.length-1],a=r,i=e.length-2;i>=0;i--){var o=e[i];if(t>f(r,o))return u(r,a);if(t>o||i===e.length-1)return u(o,r);a=r,r=o}}function h(e,t){for(var n=0;n<t.length;n++)if(e>=t[n][0]&&e<=t[n][1])return!0;return!1}function m(e){e.attr("x",-r.bar.captureWidth/2).attr("width",r.bar.captureWidth)}function v(e){e.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function g(e){if(!e.brush.filterSpecified)return"0,"+e.height;for(var t,n,r,a=y(e.brush.filter.getConsolidated(),e.height),i=[0],o=a.length?a[0][0]:null,s=0;s<a.length;s++)t=a[s],n=t[1]-t[0],i.push(o),i.push(n),(r=s+1)<a.length&&(o=a[r][0]-t[1]);return i.push(e.height),i}function y(e,t){return e.map(function(e){return e.map(function(e){return e*t}).sort(s)})}function b(){a.select(document.body).style("cursor",null)}function x(e){e.attr("stroke-dasharray",g)}function _(e,t){var n=a.select(e).selectAll(".highlight, .highlight-shadow"),i=t?n.transition().duration(r.bar.snapDuration).each("end",t):n;x(i)}function w(e,t){var n,a=e.brush,i=a.filterSpecified,o=NaN,s={};if(i){var l=e.height,u=a.filter.getConsolidated(),c=y(u,l),f=NaN,d=NaN,p=NaN;for(n=0;n<=c.length;n++){var h=c[n];if(h&&h[0]<=t&&t<=h[1]){f=n;break}if(d=n?n-1:NaN,h&&h[0]>t){p=n;break}}if(o=f,isNaN(o)&&(o=isNaN(d)||isNaN(p)?isNaN(d)?p:d:t-c[d][1]<c[p][0]-t?d:p),!isNaN(o)){var m=c[o],v=function(e,t){var n=r.bar.handleHeight;if(!(t>e[1]+n||t<e[0]-n))return t>=.9*e[1]+.1*e[0]?"n":t<=.9*e[0]+.1*e[1]?"s":"ns"}(m,t);v&&(s.interval=u[o],s.intervalPix=m,s.region=v)}}if(e.ordinal&&!s.region){var g=e.unitTickvals,b=e.unitToPaddedPx.invert(t);for(n=0;n<g.length;n++){var x=[.25*g[Math.max(n-1,0)]+.75*g[n],.25*g[Math.min(n+1,g.length-1)]+.75*g[n]];if(b>=x[0]&&b<=x[1]){s.clickableOrdinalRange=x;break}}}return s}function T(e){e.on("mousemove",function(e){if(a.event.preventDefault(),!e.parent.inBrushDrag){var t=e.height-a.mouse(this)[1]-2*r.verticalPadding,n=w(e,t),i="crosshair";n.clickableOrdinalRange?i="pointer":n.region&&(i=n.region+"-resize"),a.select(document.body).style("cursor",i)}}).on("mouseleave",function(e){e.parent.inBrushDrag||b()}).call(a.behavior.drag().on("dragstart",function(e){a.event.sourceEvent.stopPropagation();var t=e.height-a.mouse(this)[1]-2*r.verticalPadding,n=e.unitToPaddedPx.invert(t),i=e.brush,o=w(e,t),s=o.interval,l=i.svgBrush;if(l.wasDragged=!1,l.grabbingBar="ns"===o.region,l.grabbingBar){var u=s.map(e.unitToPaddedPx);l.grabPoint=t-u[0]-r.verticalPadding,l.barLength=u[1]-u[0]}l.clickableOrdinalRange=o.clickableOrdinalRange,l.stayingIntervals=e.multiselect&&i.filterSpecified?i.filter.getConsolidated():[],s&&(l.stayingIntervals=l.stayingIntervals.filter(function(e){return e[0]!==s[0]&&e[1]!==s[1]})),l.startExtent=o.region?s["s"===o.region?1:0]:n,e.parent.inBrushDrag=!0,l.brushStartCallback()}).on("drag",function(e){a.event.sourceEvent.stopPropagation();var t=e.height-a.mouse(this)[1]-2*r.verticalPadding,n=e.brush.svgBrush;n.wasDragged=!0,n.grabbingBar?n.newExtent=[t-n.grabPoint,t+n.barLength-n.grabPoint].map(e.unitToPaddedPx.invert):n.newExtent=[n.startExtent,e.unitToPaddedPx.invert(t)].sort(s);var i=Math.max(0,-n.newExtent[0]),o=Math.max(0,n.newExtent[1]-1);n.newExtent[0]+=i,n.newExtent[1]-=o,n.grabbingBar&&(n.newExtent[1]+=i,n.newExtent[0]-=o),e.brush.filterSpecified=!0,n.extent=n.stayingIntervals.concat([n.newExtent]),n.brushCallback(e),_(this.parentNode)}).on("dragend",function(e){var t=a.event;t.sourceEvent.stopPropagation();var n=e.brush,r=n.filter,i=n.svgBrush,o=i.grabbingBar;if(i.grabbingBar=!1,i.grabLocation=void 0,e.parent.inBrushDrag=!1,b(),!i.wasDragged)return i.wasDragged=void 0,i.clickableOrdinalRange?n.filterSpecified&&e.multiselect?i.extent.push(i.clickableOrdinalRange):(i.extent=[i.clickableOrdinalRange],n.filterSpecified=!0):o?(i.extent=i.stayingIntervals,0===i.extent.length&&C(n)):C(n),i.brushCallback(e),_(this.parentNode),void i.brushEndCallback(n.filterSpecified?r.getConsolidated():[]);var s=function(){r.set(r.getConsolidated())};if(e.ordinal){var l=e.unitTickvals;l[l.length-1]<l[0]&&l.reverse(),i.newExtent=[d(l,i.newExtent[0],i.stayingIntervals),p(l,i.newExtent[1],i.stayingIntervals)];var u=i.newExtent[1]>i.newExtent[0];i.extent=i.stayingIntervals.concat(u?[i.newExtent]:[]),i.extent.length||C(n),i.brushCallback(e),u?_(this.parentNode,s):(s(),_(this.parentNode))}else s();i.brushEndCallback(n.filterSpecified?r.getConsolidated():[])}))}function k(e,t){return e[0]-t[0]}function C(e){e.filterSpecified=!1,e.svgBrush.extent=[[0,1]]}function E(e){for(var t,n=e.slice(),r=[],a=n.shift();a;){for(t=a.slice();(a=n.shift())&&a[0]<=t[1];)t[1]=Math.max(t[1],a[1]);r.push(t)}return r}t.exports={makeBrush:function(e,t,n,r,a,i){var o=function(){var e,t,n=[];return{set:function(r){n=r.map(function(e){return e.slice().sort(s)}).sort(k),e=E(n),t=n.reduce(function(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]},[1/0,-1/0])},get:function(){return n.slice()},getConsolidated:function(){return e},getBounds:function(){return t}}}();return o.set(n),{filter:o,filterSpecified:t,svgBrush:{extent:[],brushStartCallback:r,brushCallback:function(e){return function(t){var n=t.brush,r=function(e){return e.svgBrush.extent.map(function(e){return e.slice()})}(n),a=r.slice();n.filter.set(a),e()}}(a),brushEndCallback:i}}},ensureAxisBrush:function(e){var t=e.selectAll("."+r.cn.axisBrush).data(o,i);t.enter().append("g").classed(r.cn.axisBrush,!0),function(e){var t=e.selectAll(".background").data(o);t.enter().append("rect").classed("background",!0).call(m).call(v).style("pointer-events","auto").attr("transform","translate(0 "+r.verticalPadding+")"),t.call(T).attr("height",function(e){return e.height-r.verticalPadding});var n=e.selectAll(".highlight-shadow").data(o);n.enter().append("line").classed("highlight-shadow",!0).attr("x",-r.bar.width/2).attr("stroke-width",r.bar.width+r.bar.strokeWidth).attr("stroke",r.bar.strokeColor).attr("opacity",r.bar.strokeOpacity).attr("stroke-linecap","butt"),n.attr("y1",function(e){return e.height}).call(x);var a=e.selectAll(".highlight").data(o);a.enter().append("line").classed("highlight",!0).attr("x",-r.bar.width/2).attr("stroke-width",r.bar.width-r.bar.strokeWidth).attr("stroke",r.bar.fillColor).attr("opacity",r.bar.fillOpacity).attr("stroke-linecap","butt"),a.attr("y1",function(e){return e.height}).call(x)}(t)},cleanRanges:function(e,t){if(Array.isArray(e[0])?(e=e.map(function(e){return e.sort(s)}),e=t.multiselect?E(e.sort(k)):[e[0]]):e=[e.sort(s)],t.tickvals){var n=t.tickvals.slice().sort(s);if(!(e=e.map(function(e){var t=[d(n,e[0],[]),p(n,e[1],[])];if(t[1]>t[0])return t}).filter(function(e){return e})).length)return}return e.length>1?e:e[0]}}},{"../../lib":696,"../../lib/gup":693,"./constants":1011,d3:148}],1009:[function(e,t,n){"use strict";var r=e("d3"),a=e("../../plots/get_data").getModuleCalcData,i=e("./plot"),o=e("../../constants/xmlns_namespaces");n.name="parcoords",n.plot=function(e){var t=a(e.calcdata,"parcoords")[0];t.length&&i(e,t)},n.clean=function(e,t,n,r){var a=r._has&&r._has("parcoords"),i=t._has&&t._has("parcoords");a&&!i&&(r._paperdiv.selectAll(".parcoords").remove(),r._glimages.selectAll("*").remove())},n.toSVG=function(e){var t=e._fullLayout._glimages,n=r.select(e).selectAll(".svg-container"),a=n.filter(function(e,t){return t===n.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");a.each(function(){var e=this.toDataURL("image/png");t.append("svg:image").attr({xmlns:o.svg,"xlink:href":e,preserveAspectRatio:"none",x:0,y:0,width:this.width,height:this.height})}),window.setTimeout(function(){r.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},{"../../constants/xmlns_namespaces":674,"../../plots/get_data":781,"./plot":1017,d3:148}],1010:[function(e,t,n){"use strict";var r=e("../../components/colorscale/has_colorscale"),a=e("../../components/colorscale/calc"),i=e("../../lib"),o=e("../../lib/gup").wrap;t.exports=function(e,t){var n=!!t.line.colorscale&&i.isArrayOrTypedArray(t.line.color),s=n?t.line.color:function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=.5;return t}(t._length),l=n?t.line.colorscale:[[0,t.line.color],[1,t.line.color]];return r(t,"line")&&a(t,s,"line","c"),o({lineColor:s,cscale:l})}},{"../../components/colorscale/calc":578,"../../components/colorscale/has_colorscale":584,"../../lib":696,"../../lib/gup":693}],1011:[function(e,t,n){"use strict";t.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeColor:"white",strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},{}],1012:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("../../components/colorscale/has_colorscale"),i=e("../../components/colorscale/defaults"),o=e("../../plots/domain").defaults,s=e("../../plots/array_container_defaults"),l=e("./attributes"),u=e("./axisbrush"),c=e("./constants").maxDimensionCount,f=e("./merge_length");function d(e,t){function n(n,a){return r.coerce(e,t,l.dimensions,n,a)}var a=n("values"),i=n("visible");if(a&&a.length||(i=t.visible=!1),i){n("label"),n("tickvals"),n("ticktext"),n("tickformat"),n("range"),n("multiselect");var o=n("constraintrange");o&&(t.constraintrange=u.cleanRanges(o,t))}}t.exports=function(e,t,n,u){function p(n,a){return r.coerce(e,t,l,n,a)}var h=e.dimensions;Array.isArray(h)&&h.length>c&&(r.log("parcoords traces support up to "+c+" dimensions at the moment"),h.splice(c));var m=s(e,t,{name:"dimensions",handleItemDefaults:d}),v=function(e,t,n,o,s){var l=s("line.color",n);if(a(e,"line")&&r.isArrayOrTypedArray(l)){if(l.length)return s("line.colorscale"),i(e,t,o,s,{prefix:"line.",cLetter:"c"}),l.length;t.line.color=n}return 1/0}(e,t,n,u,p);o(t,u,p),Array.isArray(m)&&m.length||(t.visible=!1),f(t,m,"values",v);var g={family:u.font.family,size:Math.round(u.font.size/1.2),color:u.font.color};r.coerceFont(p,"labelfont",g),r.coerceFont(p,"tickfont",g),r.coerceFont(p,"rangefont",g)}},{"../../components/colorscale/defaults":580,"../../components/colorscale/has_colorscale":584,"../../lib":696,"../../plots/array_container_defaults":740,"../../plots/domain":770,"./attributes":1007,"./axisbrush":1008,"./constants":1011,"./merge_length":1015}],1013:[function(e,t,n){"use strict";var r={};r.attributes=e("./attributes"),r.supplyDefaults=e("./defaults"),r.calc=e("./calc"),r.plot=e("./plot"),r.colorbar={container:"line",min:"cmin",max:"cmax"},r.moduleType="trace",r.name="parcoords",r.basePlotModule=e("./base_plot"),r.categories=["gl","regl","noOpacity"],r.meta={},t.exports=r},{"./attributes":1007,"./base_plot":1009,"./calc":1010,"./defaults":1012,"./plot":1017}],1014:[function(e,t,n){"use strict";var r=e("glslify"),a=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 p0, p1, p2, p3,\n               p4, p5, p6, p7,\n               p8, p9, pa, pb,\n               pc, pd, pe;\n\nattribute vec4 pf;\n\nuniform mat4 dim1A, dim2A, dim1B, dim2B, dim1C, dim2C, dim1D, dim2D,\n             loA, hiA, loB, hiB, loC, hiC, loD, hiD;\n\nuniform vec2 resolution,\n             viewBoxPosition,\n             viewBoxSize;\n\nuniform sampler2D palette;\nuniform sampler2D mask;\nuniform float maskHeight;\n\nuniform vec2 colorClamp;\n\nvarying vec4 fragColor;\n\nvec4 unit_1 = vec4(1, 1, 1, 1);\n\nfloat val(mat4 p, mat4 v) {\n    return dot(matrixCompMult(p, v) * unit_1, unit_1);\n}\n\nfloat axisY(\n        float x,\n        mat4 d[4],\n        mat4 dim1A, mat4 dim2A, mat4 dim1B, mat4 dim2B, mat4 dim1C, mat4 dim2C, mat4 dim1D, mat4 dim2D\n    ) {\n\n    float y1 = val(d[0], dim1A) + val(d[1], dim1B) + val(d[2], dim1C) + val(d[3], dim1D);\n    float y2 = val(d[0], dim2A) + val(d[1], dim2B) + val(d[2], dim2C) + val(d[3], dim2D);\n    return y1 * (1.0 - x) + y2 * x;\n}\n\nconst int bitsPerByte = 8;\n\nint mod2(int a) {\n    return a - 2 * (a / 2);\n}\n\nint mod8(int a) {\n    return a - 8 * (a / 8);\n}\n\nvec4 zero = vec4(0, 0, 0, 0);\nvec4 unit_0 = vec4(1, 1, 1, 1);\nvec2 xyProjection = vec2(1, 1);\n\nmat4 mclamp(mat4 m, mat4 lo, mat4 hi) {\n    return mat4(clamp(m[0], lo[0], hi[0]),\n                clamp(m[1], lo[1], hi[1]),\n                clamp(m[2], lo[2], hi[2]),\n                clamp(m[3], lo[3], hi[3]));\n}\n\nbool mshow(mat4 p, mat4 lo, mat4 hi) {\n    return mclamp(p, lo, hi) == p;\n}\n\nbool withinBoundingBox(\n        mat4 d[4],\n        mat4 loA, mat4 hiA, mat4 loB, mat4 hiB, mat4 loC, mat4 hiC, mat4 loD, mat4 hiD\n    ) {\n\n    return mshow(d[0], loA, hiA) &&\n           mshow(d[1], loB, hiB) &&\n           mshow(d[2], loC, hiC) &&\n           mshow(d[3], loD, hiD);\n}\n\nbool withinRasterMask(mat4 d[4], sampler2D mask, float height) {\n    bool result = true;\n    int bitInByteStepper;\n    float valY, valueY, scaleX;\n    int hit, bitmask, valX;\n    for(int i = 0; i < 4; i++) {\n        for(int j = 0; j < 4; j++) {\n            for(int k = 0; k < 4; k++) {\n                bitInByteStepper = mod8(j * 4 + k);\n                valX = i * 2 + j / 2;\n                valY = d[i][j][k];\n                valueY = valY * (height - 1.0) + 0.5;\n                scaleX = (float(valX) + 0.5) / 8.0;\n                hit = int(texture2D(mask, vec2(scaleX, (valueY + 0.5) / height))[3] * 255.0) / int(pow(2.0, float(bitInByteStepper)));\n                result = result && mod2(hit) == 1;\n            }\n        }\n    }\n    return result;\n}\n\nvec4 position(\n        float depth,\n        vec2 resolution, vec2 viewBoxPosition, vec2 viewBoxSize,\n        mat4 dims[4],\n        float signum,\n        mat4 dim1A, mat4 dim2A, mat4 dim1B, mat4 dim2B, mat4 dim1C, mat4 dim2C, mat4 dim1D, mat4 dim2D,\n        mat4 loA, mat4 hiA, mat4 loB, mat4 hiB, mat4 loC, mat4 hiC, mat4 loD, mat4 hiD,\n        sampler2D mask, float maskHeight\n    ) {\n\n    float x = 0.5 * signum + 0.5;\n    float y = axisY(x, dims, dim1A, dim2A, dim1B, dim2B, dim1C, dim2C, dim1D, dim2D);\n\n    float show = float(\n                            withinBoundingBox(dims, loA, hiA, loB, hiB, loC, hiC, loD, hiD)\n                         && withinRasterMask(dims, mask, maskHeight)\n                      );\n\n    vec2 viewBoxXY = viewBoxPosition + viewBoxSize * vec2(x, y);\n    float depthOrHide = depth + 2.0 * (1.0 - show);\n\n    return vec4(\n        xyProjection * (2.0 * viewBoxXY / resolution - 1.0),\n        depthOrHide,\n        1.0\n    );\n}\n\nvoid main() {\n\n    float prominence = abs(pf[3]);\n\n    mat4 p[4];\n    p[0] = mat4(p0, p1, p2, p3);\n    p[1] = mat4(p4, p5, p6, p7);\n    p[2] = mat4(p8, p9, pa, pb);\n    p[3] = mat4(pc, pd, pe, abs(pf));\n\n    gl_Position = position(\n        1.0 - prominence,\n        resolution, viewBoxPosition, viewBoxSize,\n        p,\n        sign(pf[3]),\n        dim1A, dim2A, dim1B, dim2B, dim1C, dim2C, dim1D, dim2D,\n        loA, hiA, loB, hiB, loC, hiC, loD, hiD,\n        mask, maskHeight\n    );\n\n    float clampedColorIndex = clamp((prominence - colorClamp[0]) / (colorClamp[1] - colorClamp[0]), 0.0, 1.0);\n    fragColor = texture2D(palette, vec2((clampedColorIndex * 255.0 + 0.5) / 256.0, 0.5));\n}\n"]),i=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 p0, p1, p2, p3,\n               p4, p5, p6, p7,\n               p8, p9, pa, pb,\n               pc, pd, pe;\n\nattribute vec4 pf;\n\nuniform mat4 dim1A, dim2A, dim1B, dim2B, dim1C, dim2C, dim1D, dim2D;\n\nuniform vec2 resolution,\n             viewBoxPosition,\n             viewBoxSize;\n\nuniform sampler2D palette;\n\nuniform vec2 colorClamp;\n\nvarying vec4 fragColor;\n\nvec2 xyProjection = vec2(1, 1);\n\nvec4 unit = vec4(1, 1, 1, 1);\n\nfloat val(mat4 p, mat4 v) {\n    return dot(matrixCompMult(p, v) * unit, unit);\n}\n\nfloat axisY(\n        float x,\n        mat4 d[4],\n        mat4 dim1A, mat4 dim2A, mat4 dim1B, mat4 dim2B, mat4 dim1C, mat4 dim2C, mat4 dim1D, mat4 dim2D\n    ) {\n\n    float y1 = val(d[0], dim1A) + val(d[1], dim1B) + val(d[2], dim1C) + val(d[3], dim1D);\n    float y2 = val(d[0], dim2A) + val(d[1], dim2B) + val(d[2], dim2C) + val(d[3], dim2D);\n    return y1 * (1.0 - x) + y2 * x;\n}\n\nvec4 position(\n        float depth,\n        vec2 resolution, vec2 viewBoxPosition, vec2 viewBoxSize,\n        mat4 dims[4],\n        float signum,\n        mat4 dim1A, mat4 dim2A, mat4 dim1B, mat4 dim2B, mat4 dim1C, mat4 dim2C, mat4 dim1D, mat4 dim2D\n    ) {\n\n    float x = 0.5 * signum + 0.5;\n    float y = axisY(x, dims, dim1A, dim2A, dim1B, dim2B, dim1C, dim2C, dim1D, dim2D);\n\n    vec2 viewBoxXY = viewBoxPosition + viewBoxSize * vec2(x, y);\n\n    return vec4(\n        xyProjection * (2.0 * viewBoxXY / resolution - 1.0),\n        depth,\n        1.0\n    );\n}\n\nvoid main() {\n\n    float prominence = abs(pf[3]);\n\n    mat4 p[4];\n    p[0] = mat4(p0, p1, p2, p3);\n    p[1] = mat4(p4, p5, p6, p7);\n    p[2] = mat4(p8, p9, pa, pb);\n    p[3] = mat4(pc, pd, pe, abs(pf));\n\n    gl_Position = position(\n        1.0 - prominence,\n        resolution, viewBoxPosition, viewBoxSize,\n        p,\n        sign(pf[3]),\n        dim1A, dim2A, dim1B, dim2B, dim1C, dim2C, dim1D, dim2D\n    );\n\n    float clampedColorIndex = clamp((prominence - colorClamp[0]) / (colorClamp[1] - colorClamp[0]), 0.0, 1.0);\n    fragColor = texture2D(palette, vec2((clampedColorIndex * 255.0 + 0.5) / 256.0, 0.5));\n}\n"]),o=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 p0, p1, p2, p3,\n               p4, p5, p6, p7,\n               p8, p9, pa, pb,\n               pc, pd, pe;\n\nattribute vec4 pf;\n\nuniform mat4 dim1A, dim2A, dim1B, dim2B, dim1C, dim2C, dim1D, dim2D,\n             loA, hiA, loB, hiB, loC, hiC, loD, hiD;\n\nuniform vec2 resolution,\n             viewBoxPosition,\n             viewBoxSize;\n\nuniform sampler2D mask;\nuniform float maskHeight;\n\nuniform vec2 colorClamp;\n\nvarying vec4 fragColor;\n\nvec4 unit_1 = vec4(1, 1, 1, 1);\n\nfloat val(mat4 p, mat4 v) {\n    return dot(matrixCompMult(p, v) * unit_1, unit_1);\n}\n\nfloat axisY(\n        float x,\n        mat4 d[4],\n        mat4 dim1A, mat4 dim2A, mat4 dim1B, mat4 dim2B, mat4 dim1C, mat4 dim2C, mat4 dim1D, mat4 dim2D\n    ) {\n\n    float y1 = val(d[0], dim1A) + val(d[1], dim1B) + val(d[2], dim1C) + val(d[3], dim1D);\n    float y2 = val(d[0], dim2A) + val(d[1], dim2B) + val(d[2], dim2C) + val(d[3], dim2D);\n    return y1 * (1.0 - x) + y2 * x;\n}\n\nconst int bitsPerByte = 8;\n\nint mod2(int a) {\n    return a - 2 * (a / 2);\n}\n\nint mod8(int a) {\n    return a - 8 * (a / 8);\n}\n\nvec4 zero = vec4(0, 0, 0, 0);\nvec4 unit_0 = vec4(1, 1, 1, 1);\nvec2 xyProjection = vec2(1, 1);\n\nmat4 mclamp(mat4 m, mat4 lo, mat4 hi) {\n    return mat4(clamp(m[0], lo[0], hi[0]),\n                clamp(m[1], lo[1], hi[1]),\n                clamp(m[2], lo[2], hi[2]),\n                clamp(m[3], lo[3], hi[3]));\n}\n\nbool mshow(mat4 p, mat4 lo, mat4 hi) {\n    return mclamp(p, lo, hi) == p;\n}\n\nbool withinBoundingBox(\n        mat4 d[4],\n        mat4 loA, mat4 hiA, mat4 loB, mat4 hiB, mat4 loC, mat4 hiC, mat4 loD, mat4 hiD\n    ) {\n\n    return mshow(d[0], loA, hiA) &&\n           mshow(d[1], loB, hiB) &&\n           mshow(d[2], loC, hiC) &&\n           mshow(d[3], loD, hiD);\n}\n\nbool withinRasterMask(mat4 d[4], sampler2D mask, float height) {\n    bool result = true;\n    int bitInByteStepper;\n    float valY, valueY, scaleX;\n    int hit, bitmask, valX;\n    for(int i = 0; i < 4; i++) {\n        for(int j = 0; j < 4; j++) {\n            for(int k = 0; k < 4; k++) {\n                bitInByteStepper = mod8(j * 4 + k);\n                valX = i * 2 + j / 2;\n                valY = d[i][j][k];\n                valueY = valY * (height - 1.0) + 0.5;\n                scaleX = (float(valX) + 0.5) / 8.0;\n                hit = int(texture2D(mask, vec2(scaleX, (valueY + 0.5) / height))[3] * 255.0) / int(pow(2.0, float(bitInByteStepper)));\n                result = result && mod2(hit) == 1;\n            }\n        }\n    }\n    return result;\n}\n\nvec4 position(\n        float depth,\n        vec2 resolution, vec2 viewBoxPosition, vec2 viewBoxSize,\n        mat4 dims[4],\n        float signum,\n        mat4 dim1A, mat4 dim2A, mat4 dim1B, mat4 dim2B, mat4 dim1C, mat4 dim2C, mat4 dim1D, mat4 dim2D,\n        mat4 loA, mat4 hiA, mat4 loB, mat4 hiB, mat4 loC, mat4 hiC, mat4 loD, mat4 hiD,\n        sampler2D mask, float maskHeight\n    ) {\n\n    float x = 0.5 * signum + 0.5;\n    float y = axisY(x, dims, dim1A, dim2A, dim1B, dim2B, dim1C, dim2C, dim1D, dim2D);\n\n    float show = float(\n                            withinBoundingBox(dims, loA, hiA, loB, hiB, loC, hiC, loD, hiD)\n                         && withinRasterMask(dims, mask, maskHeight)\n                      );\n\n    vec2 viewBoxXY = viewBoxPosition + viewBoxSize * vec2(x, y);\n    float depthOrHide = depth + 2.0 * (1.0 - show);\n\n    return vec4(\n        xyProjection * (2.0 * viewBoxXY / resolution - 1.0),\n        depthOrHide,\n        1.0\n    );\n}\n\nvoid main() {\n\n    float prominence = abs(pf[3]);\n\n    mat4 p[4];\n    p[0] = mat4(p0, p1, p2, p3);\n    p[1] = mat4(p4, p5, p6, p7);\n    p[2] = mat4(p8, p9, pa, pb);\n    p[3] = mat4(pc, pd, pe, abs(pf));\n\n    gl_Position = position(\n        1.0 - prominence,\n        resolution, viewBoxPosition, viewBoxSize,\n        p,\n        sign(pf[3]),\n        dim1A, dim2A, dim1B, dim2B, dim1C, dim2C, dim1D, dim2D,\n        loA, hiA, loB, hiB, loC, hiC, loD, hiD,\n        mask, maskHeight\n    );\n\n    fragColor = vec4(pf.rgb, 1.0);\n}\n"]),s=r(["precision lowp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n    gl_FragColor = fragColor;\n}\n"]),l=e("../../lib"),u=1e-6,c=1e-7,f=2048,d=64,p=2,h=4,m=8,v=d/m,g=[119,119,119],y=new Uint8Array(4),b=new Uint8Array(4),x={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function _(e,t,n,r,a){var i=e._gl;i.enable(i.SCISSOR_TEST),i.scissor(t,n,r,a),e.clear({color:[0,0,0,0],depth:1})}function w(e,t,n,r,a,i){var o=i.key;n.drawCompleted||(function(e){e.read({x:0,y:0,width:1,height:1,data:y})}(e),n.drawCompleted=!0),function s(l){var u;u=Math.min(r,a-l*r),i.offset=p*l*r,i.count=p*u,0===l&&(window.cancelAnimationFrame(n.currentRafs[o]),delete n.currentRafs[o],_(e,i.scissorX,i.scissorY,i.scissorWidth,i.viewBoxSize[1])),n.clearOnly||(t(i),l*r+u<a&&(n.currentRafs[o]=window.requestAnimationFrame(function(){s(l+1)})),n.drawCompleted=!1)}(0)}function T(e){return Math.max(u,Math.min(1-u,e))}function k(e,t){return(e>>>8*t)%256/255}function C(e,t,n){var r,a,i,o=[];for(a=0;a<e;a++)for(i=0;i<p;i++)for(r=0;r<h;r++)o.push(t[a*d+n*h+r]),n*h+r===d-1&&i%2==0&&(o[o.length-1]*=-1);return o}t.exports=function(e,t){var n,r,u,p,h,y=t.context,E=t.pick,M=t.regl,A={currentRafs:{},drawCompleted:!0,clearOnly:!1},S=function(e){for(var t={},n=0;n<16;n++)t["p"+n.toString(16)]=e.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return t}(M),O=M.texture(x);R(t);var P=M({profile:!1,blend:{enable:y,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!y,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:M.prop("scissorX"),y:M.prop("scissorY"),width:M.prop("scissorWidth"),height:M.prop("scissorHeight")}},viewport:{x:M.prop("viewportX"),y:M.prop("viewportY"),width:M.prop("viewportWidth"),height:M.prop("viewportHeight")},dither:!1,vert:E?o:y?i:a,frag:s,primitive:"lines",lineWidth:1,attributes:S,uniforms:{resolution:M.prop("resolution"),viewBoxPosition:M.prop("viewBoxPosition"),viewBoxSize:M.prop("viewBoxSize"),dim1A:M.prop("dim1A"),dim2A:M.prop("dim2A"),dim1B:M.prop("dim1B"),dim2B:M.prop("dim2B"),dim1C:M.prop("dim1C"),dim2C:M.prop("dim2C"),dim1D:M.prop("dim1D"),dim2D:M.prop("dim2D"),loA:M.prop("loA"),hiA:M.prop("hiA"),loB:M.prop("loB"),hiB:M.prop("hiB"),loC:M.prop("loC"),hiC:M.prop("hiC"),loD:M.prop("loD"),hiD:M.prop("hiD"),palette:O,mask:M.prop("maskTexture"),maskHeight:M.prop("maskHeight"),colorClamp:M.prop("colorClamp")},offset:M.prop("offset"),count:M.prop("count")});function R(e){n=e.model,r=e.viewModel,u=r.dimensions.slice(),p=u[0]?u[0].values.length:0;var t=n.lines,a=E?t.color.map(function(e,n){return n/t.color.length}):t.color,i=Math.max(1/255,Math.pow(1/a.length,1/3)),o=function(e,t,n){for(var r=t.length,a=[],i=0;i<e;i++)for(var o=0;o<d;o++)a.push(o<r?t[o].paddedUnitValues[i]:o===d-1?T(n[i]):o>=d-4?k(i,d-2-o):.5);return a}(p,u,a);!function(e,t,n){for(var r=0;r<16;r++)e["p"+r.toString(16)](C(t,n,r))}(S,p,o),O=M.texture(l.extendFlat({data:function(e,t,n){for(var r=[],a=0;a<256;a++){var i=e(a/255);r.push((t?g:i).concat(n))}return r}(n.unitToColor,y,Math.round(255*(y?i:1)))},x))}var L=[0,1],D=[];function I(e,t,r,a,i,o,s,u,c,f,d){var p,h,m,v,g=[e,t],y=[0,1].map(function(){return[0,1,2,3].map(function(){return new Float32Array(16)})});for(p=0;p<2;p++)for(v=g[p],h=0;h<4;h++)for(m=0;m<16;m++)y[p][h][m]=m+16*h===v?1:0;var b=n.lines.canvasOverdrag,x=n.domain,_=n.canvasWidth,w=n.canvasHeight,T=l.extendFlat({key:s,resolution:[_,w],viewBoxPosition:[r+b,a],viewBoxSize:[i,o],i:e,ii:t,dim1A:y[0][0],dim1B:y[0][1],dim1C:y[0][2],dim1D:y[0][3],dim2A:y[1][0],dim2B:y[1][1],dim2C:y[1][2],dim2D:y[1][3],colorClamp:L,scissorX:(u===c?0:r+b)+(n.pad.l-b)+n.layoutWidth*x.x[0],scissorWidth:(u===f?_-r+b:i+.5)+(u===c?r+b:0),scissorY:a+n.pad.b+n.layoutHeight*x.y[0],scissorHeight:o,viewportX:n.pad.l-b+n.layoutWidth*x.x[0],viewportY:n.pad.b+n.layoutHeight*x.y[0],viewportWidth:_,viewportHeight:w},d);return T}return{setColorDomain:function(e){L[0]=e[0],L[1]=e[1]},render:function(e,t,r){var a,i,o,s=e.length,l=1/0,d=-1/0;for(a=0;a<s;a++)e[a].dim2.canvasX>d&&(d=e[a].dim2.canvasX,o=a),e[a].dim1.canvasX<l&&(l=e[a].dim1.canvasX,i=a);0===s&&_(M,0,0,n.canvasWidth,n.canvasHeight);var g=y?{}:function(){var e,t,n,r=[0,1].map(function(){return[0,1,2,3].map(function(){return new Float32Array(16)})});for(e=0;e<2;e++)for(t=0;t<4;t++)for(n=0;n<16;n++){var a,i=n+16*t;a=i<u.length?u[i].brush.filter.getBounds()[e]:e,r[e][t][n]=a+(2*e-1)*c}function o(e,t){var n=f-1;return[Math.max(0,Math.floor(t[0]*n)),Math.min(n,Math.ceil(t[1]*n))]}for(var s=Array.apply(null,new Array(f*v)).map(function(){return 255}),l=0;l<u.length;l++){var d=l%m,p=(l-d)/m,g=Math.pow(2,d),y=u[l],b=y.brush.filter.get();if(!(b.length<2))for(var x=o(y,b[0])[1],_=1;_<b.length;_++){for(var w=o(y,b[_]),T=x+1;T<w[0];T++)s[T*v+p]&=~g;x=Math.max(x,w[1])}}var k={shape:[v,f],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:s};return h?h(k):h=M.texture(k),{maskTexture:h,maskHeight:f,loA:r[0][0],loB:r[0][1],loC:r[0][2],loD:r[0][3],hiA:r[1][0],hiB:r[1][1],hiC:r[1][2],hiD:r[1][3]}}();for(a=0;a<s;a++){var b=e[a],x=b.dim1,T=x.crossfilterDimensionIndex,k=b.canvasX,C=b.canvasY,E=b.dim2,S=E.crossfilterDimensionIndex,O=b.panelSizeX,R=b.panelSizeY,L=k+O;if(t||!D[T]||D[T][0]!==k||D[T][1]!==L){D[T]=[k,L];var z=I(T,S,k,C,O,R,x.crossfilterDimensionIndex,a,i,o,g);A.clearOnly=r,w(M,P,A,t?n.lines.blockLineCount:p,p,z)}}},readPixel:function(e,t){return M.read({x:e,y:t,width:1,height:1,data:b}),b},readPixels:function(e,t,n,r){var a=new Uint8Array(4*n*r);return M.read({x:e,y:t,width:n,height:r,data:a}),a},destroy:function(){for(var t in e.style["pointer-events"]="none",O.destroy(),h&&h.destroy(),S)S[t].destroy()},update:R}}},{"../../lib":696,glslify:392}],1015:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){var a,i;for(r||(r=1/0),a=0;a<t.length;a++)(i=t[a]).visible&&(r=Math.min(r,i[n].length));for(r===1/0&&(r=0),e._length=r,a=0;a<t.length;a++)(i=t[a]).visible&&(i._length=r);return r}},{}],1016:[function(e,t,n){"use strict";var r=e("./lines"),a=e("./constants"),i=e("../../lib"),o=e("d3"),s=e("../../components/drawing"),l=e("../../lib/gup"),u=l.keyFun,c=l.repeat,f=l.unwrap,d=e("./axisbrush");function p(e){return!("visible"in e)||e.visible}function h(e){var t=e.range?e.range[0]:i.aggNums(Math.min,null,e.values,e._length),n=e.range?e.range[1]:i.aggNums(Math.max,null,e.values,e._length);return!isNaN(t)&&isFinite(t)||(t=0),!isNaN(n)&&isFinite(n)||(n=0),t===n&&(0===t?(t-=1,n+=1):(t*=.9,n*=1.1)),[t,n]}function m(e,t,n,r,a){var i=h(n);return r?o.scale.ordinal().domain(r.map(function(e,t){return t?function(n,r){var a=t[r];return null===a||void 0===a?e(n):a}:e}(o.format(n.tickformat),a))).range(r.map(function(n){var r=(n-i[0])/(i[1]-i[0]);return e-t+r*(2*t-e)})):o.scale.linear().domain(i).range([e-t,t])}function v(e){return e.dimensions.some(function(e){return e.brush.filterSpecified})}function g(e,t,n){var r=f(t),s=r.trace,l=r.lineColor,u=r.cscale,c=s.line,d=s.domain,m=s.dimensions,v=e.width,g=s.labelfont,y=s.tickfont,b=s.rangefont,x=i.extendDeepNoArrays({},c,{color:l.map(o.scale.linear().domain(h({values:l,range:[c.cmin,c.cmax],_length:s._length}))),blockLineCount:a.blockLineCount,canvasOverdrag:a.overdrag*a.canvasPixelRatio}),_=Math.floor(v*(d.x[1]-d.x[0])),w=Math.floor(e.height*(d.y[1]-d.y[0])),T=e.margin||{l:80,r:80,t:100,b:80},k=_,C=w;return{key:n,colCount:m.filter(p).length,dimensions:m,tickDistance:a.tickDistance,unitToColor:function(e){var t=e.map(function(e){return e[0]}),n=e.map(function(e){return o.rgb(e[1])}),r="rgb".split("").map(function(e){return o.scale.linear().clamp(!0).domain(t).range(n.map(function(e){return function(t){return t[e]}}(e)))});return function(e){return r.map(function(t){return t(e)})}}(u),lines:x,labelFont:g,tickFont:y,rangeFont:b,layoutWidth:v,layoutHeight:e.height,domain:d,translateX:d.x[0]*v,translateY:e.height-d.y[1]*e.height,pad:T,canvasWidth:k*a.canvasPixelRatio+2*x.canvasOverdrag,canvasHeight:C*a.canvasPixelRatio,width:k,height:C,canvasPixelRatio:a.canvasPixelRatio}}function y(e,t,n){var r=n.width,s=n.height,l=n.dimensions,u=n.canvasPixelRatio,c=function(e){return r*e/Math.max(1,n.colCount-1)},f=a.verticalPadding/s,g=function(e,t){return o.scale.linear().range([t,e-t])}(s,a.verticalPadding),y={key:n.key,xScale:c,model:n,inBrushDrag:!1},b={};return y.dimensions=l.filter(p).map(function(r,l){var p=function(e,t){return o.scale.linear().domain(h(e)).range([t,1-t])}(r,f),x=b[r.label];b[r.label]=(x||0)+1;var _=r.label+(x?"__"+x:""),w=r.constraintrange,T=w&&w.length;T&&!Array.isArray(w[0])&&(w=[w]);var k=T?w.map(function(e){return e.map(p)}):[[0,1]],C=r.values;C.length>r._length&&(C=C.slice(0,r._length));var E,M=r.tickvals;function A(e,t){return{val:e,text:E[t]}}function S(e,t){return e.val-t.val}if(Array.isArray(M)&&M.length){E=r.ticktext,Array.isArray(E)&&E.length?E.length>M.length?E=E.slice(0,M.length):M.length>E.length&&(M=M.slice(0,E.length)):E=M.map(o.format(r.tickformat));for(var O=1;O<M.length;O++)if(M[O]<M[O-1]){for(var P=M.map(A).sort(S),R=0;R<M.length;R++)M[R]=P[R].val,E[R]=P[R].text;break}}else M=void 0;return{key:_,label:r.label,tickFormat:r.tickformat,tickvals:M,ticktext:E,ordinal:!!M,multiselect:r.multiselect,xIndex:l,crossfilterDimensionIndex:l,visibleIndex:r._index,height:s,values:C,paddedUnitValues:C.map(p),unitTickvals:M&&M.map(p),xScale:c,x:c(l),canvasX:c(l)*u,unitToPaddedPx:g,domainScale:m(s,a.verticalPadding,r,M,E),ordinalScale:function(e){if(e.tickvals){var t=h(e);return o.scale.ordinal().domain(e.tickvals).range(e.tickvals.map(function(e){return(e-t[0])/(t[1]-t[0])}))}}(r),parent:y,model:n,brush:d.makeBrush(e,T,k,function(){e.linePickActive(!1)},function(){var t=y;t.focusLayer&&t.focusLayer.render(t.panels,!0);var n=v(t);!e.contextShown()&&n?(t.contextLayer&&t.contextLayer.render(t.panels,!0),e.contextShown(!0)):e.contextShown()&&!n&&(t.contextLayer&&t.contextLayer.render(t.panels,!0,!0),e.contextShown(!1))},function(n){var a=y;if(a.focusLayer.render(a.panels,!0),a.pickLayer&&a.pickLayer.render(a.panels,!0),e.linePickActive(!0),t&&t.filterChanged){var o=p.invert,s=n.map(function(e){return e.map(o).sort(i.sorterAsc)}).sort(function(e,t){return e[0]-t[0]});t.filterChanged(a.key,r._index,s)}})}}),y}function b(e){e.classed(a.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default").style("user-select","none")}t.exports=function(e,t,n,l,p,h){var m=function(){var e=!0,t=!1;return{linePickActive:function(t){return arguments.length?e=!!t:e},contextShown:function(e){return arguments.length?t=!!e:t}}}(),x=l.filter(function(e){return f(e).trace.visible}).map(g.bind(0,p)).map(y.bind(0,m,h));n.each(function(e,t){return i.extendFlat(e,x[t])});var _=n.selectAll(".gl-canvas").each(function(e){e.viewModel=x[0],e.model=e.viewModel?e.viewModel.model:null}),w=null,T=_.filter(function(e){return e.pick});T.style("pointer-events","auto").on("mousemove",function(e){if(m.linePickActive()&&e.lineLayer&&h&&h.hover){var t=o.event,n=this.width,r=this.height,a=o.mouse(this),i=a[0],s=a[1];if(i<0||s<0||i>=n||s>=r)return;var l=e.lineLayer.readPixel(i,r-1-s),u=0!==l[3],c=u?l[2]+256*(l[1]+256*l[0]):null,f={x:i,y:s,clientX:t.clientX,clientY:t.clientY,dataIndex:e.model.key,curveNumber:c};c!==w&&(u?h.hover(f):h.unhover&&h.unhover(f),w=c)}}),_.style("opacity",function(e){return e.pick?.01:1}),t.style("background","rgba(255, 255, 255, 0)");var k=t.selectAll("."+a.cn.parcoords).data(x,u);k.exit().remove(),k.enter().append("g").classed(a.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),k.attr("transform",function(e){return"translate("+e.model.translateX+","+e.model.translateY+")"});var C=k.selectAll("."+a.cn.parcoordsControlView).data(c,u);C.enter().append("g").classed(a.cn.parcoordsControlView,!0),C.attr("transform",function(e){return"translate("+e.model.pad.l+","+e.model.pad.t+")"});var E=C.selectAll("."+a.cn.yAxis).data(function(e){return e.dimensions},u);function M(e,t){for(var n=t.panels||(t.panels=[]),r=e.data(),a=r.length-1,i=0;i<a;i++){var o=n[i]||(n[i]={}),s=r[i],l=r[i+1];o.dim1=s,o.dim2=l,o.canvasX=s.canvasX,o.panelSizeX=l.canvasX-s.canvasX,o.panelSizeY=t.model.canvasHeight,o.y=0,o.canvasY=0}}E.enter().append("g").classed(a.cn.yAxis,!0),C.each(function(e){M(E,e)}),_.each(function(e){if(e.viewModel){!e.lineLayer||h?e.lineLayer=r(this,e):e.lineLayer.update(e),(e.key||0===e.key)&&(e.viewModel[e.key]=e.lineLayer);var t=!e.context||h;e.lineLayer.render(e.viewModel.panels,t)}}),E.attr("transform",function(e){return"translate("+e.xScale(e.xIndex)+", 0)"}),E.call(o.behavior.drag().origin(function(e){return e}).on("drag",function(e){var t=e.parent;m.linePickActive(!1),e.x=Math.max(-a.overdrag,Math.min(e.model.width+a.overdrag,o.event.x)),e.canvasX=e.x*e.model.canvasPixelRatio,E.sort(function(e,t){return e.x-t.x}).each(function(t,n){t.xIndex=n,t.x=e===t?t.x:t.xScale(t.xIndex),t.canvasX=t.x*t.model.canvasPixelRatio}),M(E,t),E.filter(function(t){return 0!==Math.abs(e.xIndex-t.xIndex)}).attr("transform",function(e){return"translate("+e.xScale(e.xIndex)+", 0)"}),o.select(this).attr("transform","translate("+e.x+", 0)"),E.each(function(n,r,a){a===e.parent.key&&(t.dimensions[r]=n)}),t.contextLayer&&t.contextLayer.render(t.panels,!1,!v(t)),t.focusLayer.render&&t.focusLayer.render(t.panels)}).on("dragend",function(e){var t=e.parent;e.x=e.xScale(e.xIndex),e.canvasX=e.x*e.model.canvasPixelRatio,M(E,t),o.select(this).attr("transform",function(e){return"translate("+e.x+", 0)"}),t.contextLayer&&t.contextLayer.render(t.panels,!1,!v(t)),t.focusLayer&&t.focusLayer.render(t.panels),t.pickLayer&&t.pickLayer.render(t.panels,!0),m.linePickActive(!0),h&&h.axesMoved&&h.axesMoved(t.key,t.dimensions.map(function(e){return e.crossfilterDimensionIndex}))})),E.exit().remove();var A=E.selectAll("."+a.cn.axisOverlays).data(c,u);A.enter().append("g").classed(a.cn.axisOverlays,!0),A.selectAll("."+a.cn.axis).remove();var S=A.selectAll("."+a.cn.axis).data(c,u);S.enter().append("g").classed(a.cn.axis,!0),S.each(function(e){var t=e.model.height/e.model.tickDistance,n=e.domainScale,r=n.domain();o.select(this).call(o.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(t,e.tickFormat).tickValues(e.ordinal?r:null).tickFormat(e.ordinal?function(e){return e}:null).scale(n)),s.font(S.selectAll("text"),e.model.tickFont)}),S.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),S.selectAll("text").style("text-shadow","1px 1px 1px #fff, -1px -1px 1px #fff, 1px -1px 1px #fff, -1px 1px 1px #fff").style("cursor","default").style("user-select","none");var O=A.selectAll("."+a.cn.axisHeading).data(c,u);O.enter().append("g").classed(a.cn.axisHeading,!0);var P=O.selectAll("."+a.cn.axisTitle).data(c,u);P.enter().append("text").classed(a.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("user-select","none").style("pointer-events","auto"),P.attr("transform","translate(0,"+-a.axisTitleOffset+")").text(function(e){return e.label}).each(function(e){s.font(o.select(this),e.model.labelFont)});var R=A.selectAll("."+a.cn.axisExtent).data(c,u);R.enter().append("g").classed(a.cn.axisExtent,!0);var L=R.selectAll("."+a.cn.axisExtentTop).data(c,u);L.enter().append("g").classed(a.cn.axisExtentTop,!0),L.attr("transform","translate(0,"+-a.axisExtentOffset+")");var D=L.selectAll("."+a.cn.axisExtentTopText).data(c,u);function I(e,t){if(e.ordinal)return"";var n=e.domainScale.domain();return o.format(e.tickFormat)(n[t?n.length-1:0])}D.enter().append("text").classed(a.cn.axisExtentTopText,!0).call(b),D.text(function(e){return I(e,!0)}).each(function(e){s.font(o.select(this),e.model.rangeFont)});var z=R.selectAll("."+a.cn.axisExtentBottom).data(c,u);z.enter().append("g").classed(a.cn.axisExtentBottom,!0),z.attr("transform",function(e){return"translate(0,"+(e.model.height+a.axisExtentOffset)+")"});var j=z.selectAll("."+a.cn.axisExtentBottomText).data(c,u);j.enter().append("text").classed(a.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(b),j.text(function(e){return I(e)}).each(function(e){s.font(o.select(this),e.model.rangeFont)}),d.ensureAxisBrush(A)}},{"../../components/drawing":595,"../../lib":696,"../../lib/gup":693,"./axisbrush":1008,"./constants":1011,"./lines":1014,d3:148}],1017:[function(e,t,n){"use strict";var r=e("./parcoords"),a=e("../../lib/prepare_regl");t.exports=function(e,t){var n=e._fullLayout,i=n._toppaper,o=n._paperdiv,s=n._glcontainer,l=a(e);if(l){var u={},c={},f=n._size;t.forEach(function(t,n){u[n]=e.data[n].dimensions,c[n]=e.data[n].dimensions.slice()}),r(o,i,s,t,{width:f.w,height:f.h,margin:{t:f.t,r:f.r,b:f.b,l:f.l}},{filterChanged:function(t,n,r){var a=c[t][n],i=r.map(function(e){return e.slice()});i.length?(1===i.length&&(i=i[0]),a.constraintrange=i,i=[i]):(delete a.constraintrange,i=null);var o={};o["dimensions["+n+"].constraintrange"]=i,e.emit("plotly_restyle",[o,[t]])},hover:function(t){e.emit("plotly_hover",t)},unhover:function(t){e.emit("plotly_unhover",t)},axesMoved:function(t,n){function r(e){return!("visible"in e)||e.visible}function a(e,t,n){var r=t.indexOf(n),a=e.indexOf(r);return-1===a&&(a+=t.length),a}var i=function(e){return function(t,r){var i=a(n,e,t),o=a(n,e,r);return i-o}}(c[t].filter(r));u[t].sort(i),c[t].filter(function(e){return!r(e)}).sort(function(e){return c[t].indexOf(e)}).forEach(function(e){u[t].splice(u[t].indexOf(e),1),u[t].splice(c[t].indexOf(e),0,e)}),e.emit("plotly_restyle")}})}}},{"../../lib/prepare_regl":709,"./parcoords":1016}],1018:[function(e,t,n){"use strict";var r=e("../../components/color/attributes"),a=e("../../plots/font_attributes"),i=e("../../plots/attributes"),o=e("../../plots/domain").attributes,s=e("../../lib/extend").extendFlat,l=a({editType:"calc",arrayOk:!0,colorEditType:"plot"});t.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:r.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:s({},i.hoverinfo,{flags:["label","text","value","percent","name"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},textfont:s({},l,{}),insidetextfont:s({},l,{}),outsidetextfont:s({},l,{}),title:{valType:"string",dflt:"",editType:"calc"},titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"},titlefont:s({},l,{}),domain:o({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"number",min:-360,max:360,dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"}}},{"../../components/color/attributes":569,"../../lib/extend":685,"../../plots/attributes":741,"../../plots/domain":770,"../../plots/font_attributes":771}],1019:[function(e,t,n){"use strict";var r=e("../../registry"),a=e("../../plots/get_data").getModuleCalcData;n.name="pie",n.plot=function(e){var t=r.getModule("pie"),n=a(e.calcdata,t)[0];n.length&&t.plot(e,n)},n.clean=function(e,t,n,r){var a=r._has&&r._has("pie"),i=t._has&&t._has("pie");a&&!i&&r._pielayer.selectAll("g.trace").remove()}},{"../../plots/get_data":781,"../../registry":827}],1020:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),a=e("../../lib").isArrayOrTypedArray,i=e("tinycolor2"),o=e("../../components/color"),s=e("./helpers");n.calc=function(e,t){var n,l,u,c,f,d=t.values,p=a(d)&&d.length,h=t.labels,m=t.marker.colors||[],v=[],g=e._fullLayout,y=g._piecolormap,b={},x=0,_=g.hiddenlabels||[];if(t.dlabel)for(h=new Array(d.length),n=0;n<d.length;n++)h[n]=String(t.label0+n*t.dlabel);function w(e,t){return!!e&&!!(e=i(e)).isValid()&&(e=o.addOpacity(e,e.getAlpha()),y[t]||(y[t]=e),e)}var T=(p?d:h).length;for(n=0;n<T;n++){if(p){if(l=d[n],!r(l))continue;if((l=+l)<0)continue}else l=1;void 0!==(u=h[n])&&""!==u||(u=n),u=String(u);var k=b[u];void 0===k?(b[u]=v.length,(c=-1!==_.indexOf(u))||(x+=l),v.push({v:l,label:u,color:w(m[n],u),i:n,pts:[n],hidden:c})):((f=v[k]).v+=l,f.pts.push(n),f.hidden||(x+=l),!1===f.color&&m[n]&&(f.color=w(m[n],u)))}if(t.sort&&v.sort(function(e,t){return t.v-e.v}),v[0]&&(v[0].vTotal=x),t.textinfo&&"none"!==t.textinfo){var C,E=-1!==t.textinfo.indexOf("label"),M=-1!==t.textinfo.indexOf("text"),A=-1!==t.textinfo.indexOf("value"),S=-1!==t.textinfo.indexOf("percent"),O=g.separators;for(n=0;n<v.length;n++){if(f=v[n],C=E?[f.label]:[],M){var P=s.getFirstFilled(t.text,f.pts);P&&C.push(P)}A&&C.push(s.formatPieValue(f.v,O)),S&&C.push(s.formatPiePercent(f.v/x,O)),f.text=C.join("<br>")}}return v},n.crossTraceCalc=function(e){var t=e._fullLayout,n=e.calcdata,r=t.piecolorway,a=t._piecolormap;t.extendpiecolors&&(r=function(e){var t,n=JSON.stringify(e),r=l[n];if(!r){for(r=e.slice(),t=0;t<e.length;t++)r.push(i(e[t]).lighten(20).toHexString());for(t=0;t<e.length;t++)r.push(i(e[t]).darken(20).toHexString());l[n]=r}return r}(r));var o,s,u,c,f=0;for(o=0;o<n.length;o++)if("pie"===(u=n[o])[0].trace.type)for(s=0;s<u.length;s++)!1===(c=u[s]).color&&(a[c.label]?c.color=a[c.label]:(a[c.label]=c.color=r[f%r.length],f++))};var l={}},{"../../components/color":570,"../../lib":696,"./helpers":1023,"fast-isnumeric":214,tinycolor2:514}],1021:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("./attributes"),i=e("../../plots/domain").defaults;t.exports=function(e,t,n,o){function s(n,i){return r.coerce(e,t,a,n,i)}var l,u=r.coerceFont,c=s("values"),f=r.isArrayOrTypedArray(c),d=s("labels");if(Array.isArray(d)?(l=d.length,f&&(l=Math.min(l,c.length))):f&&(l=c.length,s("label0"),s("dlabel")),l){t._length=l;var p=s("marker.line.width");p&&s("marker.line.color"),s("marker.colors"),s("scalegroup");var h=s("text"),m=s("textinfo",Array.isArray(h)?"text+percent":"percent");if(s("hovertext"),m&&"none"!==m){var v=s("textposition"),g=Array.isArray(v)||"auto"===v,y=g||"inside"===v,b=g||"outside"===v;if(y||b){var x=u(s,"textfont",o.font);if(y){var _=r.extendFlat({},x),w=e.textfont&&e.textfont.color,T=!w;T&&delete _.color,u(s,"insidetextfont",_)}b&&u(s,"outsidetextfont",x)}}i(t,o,s);var k=s("hole"),C=s("title");if(C){var E=s("titleposition",k?"middle center":"top center");k||"middle center"!==E||(t.titleposition="top center"),u(s,"titlefont",o.font)}s("sort"),s("direction"),s("rotation"),s("pull")}else t.visible=!1}},{"../../lib":696,"../../plots/domain":770,"./attributes":1018}],1022:[function(e,t,n){"use strict";var r=e("../../components/fx/helpers").appendArrayMultiPointValues;t.exports=function(e,t){var n={curveNumber:t.index,pointNumbers:e.pts,data:t._input,fullData:t,label:e.label,color:e.color,value:e.v,v:e.v};return 1===e.pts.length&&(n.pointNumber=n.i=e.pts[0]),r(n,t,e.pts),n}},{"../../components/fx/helpers":609}],1023:[function(e,t,n){"use strict";var r=e("../../lib");n.formatPiePercent=function(e,t){var n=(100*e).toPrecision(3);return-1!==n.lastIndexOf(".")&&(n=n.replace(/[.]?0+$/,"")),r.numSeparate(n,t)+"%"},n.formatPieValue=function(e,t){var n=e.toPrecision(10);return-1!==n.lastIndexOf(".")&&(n=n.replace(/[.]?0+$/,"")),r.numSeparate(n,t)},n.getFirstFilled=function(e,t){if(Array.isArray(e))for(var n=0;n<t.length;n++){var r=e[t[n]];if(r||0===r)return r}},n.castOption=function(e,t){return Array.isArray(e)?n.getFirstFilled(e,t):e||void 0}},{"../../lib":696}],1024:[function(e,t,n){"use strict";var r={};r.attributes=e("./attributes"),r.supplyDefaults=e("./defaults"),r.supplyLayoutDefaults=e("./layout_defaults"),r.layoutAttributes=e("./layout_attributes");var a=e("./calc");r.calc=a.calc,r.crossTraceCalc=a.crossTraceCalc,r.plot=e("./plot"),r.style=e("./style"),r.styleOne=e("./style_one"),r.moduleType="trace",r.name="pie",r.basePlotModule=e("./base_plot"),r.categories=["pie","showLegend"],r.meta={},t.exports=r},{"./attributes":1018,"./base_plot":1019,"./calc":1020,"./defaults":1021,"./layout_attributes":1025,"./layout_defaults":1026,"./plot":1027,"./style":1028,"./style_one":1029}],1025:[function(e,t,n){"use strict";t.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1026:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("./layout_attributes");t.exports=function(e,t){function n(n,i){return r.coerce(e,t,a,n,i)}n("hiddenlabels"),n("piecolorway",t.colorway),n("extendpiecolors")}},{"../../lib":696,"./layout_attributes":1025}],1027:[function(e,t,n){"use strict";var r=e("d3"),a=e("../../components/fx"),i=e("../../components/color"),o=e("../../components/drawing"),s=e("../../lib"),l=e("../../lib/svg_text_utils"),u=e("./helpers"),c=e("./event_data");function f(e,t){if(e.v===t.vTotal&&!t.trace.hole)return 1;var n=Math.PI*Math.min(e.v/t.vTotal,.5);return Math.min(1/(1+1/Math.sin(n)),(1-t.trace.hole)/2)}function d(e,t){var n=t.pxmid[0],r=t.pxmid[1],a=e.width/2,i=e.height/2;return n<0&&(a*=-1),r<0&&(i*=-1),{scale:1,rCenter:1,rotate:0,x:a+Math.abs(i)*(a>0?1:-1)/2,y:i/(1+n*n/(r*r)),outside:!0}}function p(e,t){var n=e.trace,r=t.h*(n.domain.y[1]-n.domain.y[0]);return Math.min(e.titleBox.height,r/2)}function h(e){var t,n=e.pull;if(Array.isArray(n))for(n=0,t=0;t<e.pull.length;t++)e.pull[t]>n&&(n=e.pull[t]);return n}t.exports=function(e,t){var n=e._fullLayout;!function(e,t){for(var n,r,a=0;a<e.length;a++)if(n=e[a][0],(r=n.trace).title){var i=o.tester.append("text").attr("data-notex",1).text(r.title).call(o.font,r.titlefont).call(l.convertToTspans,t),s=o.bBox(i.node(),!0);n.titleBox={width:s.width,height:s.height},i.remove()}}(t,e),function(e,t){var n,r,a,i,o,s,l,u,c,f=[];for(a=0;a<e.length;a++)o=e[a][0],s=o.trace,n=t.w*(s.domain.x[1]-s.domain.x[0]),r=t.h*(s.domain.y[1]-s.domain.y[0]),s.title&&"middle center"!==s.titleposition&&(r-=p(o,t)),l=h(s),o.r=Math.min(n,r)/(2+2*l),o.cx=t.l+t.w*(s.domain.x[1]+s.domain.x[0])/2,o.cy=t.t+t.h*(1-s.domain.y[0])-r/2,s.title&&-1!==s.titleposition.indexOf("bottom")&&(o.cy-=p(o,t)),s.scalegroup&&-1===f.indexOf(s.scalegroup)&&f.push(s.scalegroup);for(i=0;i<f.length;i++){for(c=1/0,u=f[i],a=0;a<e.length;a++)(o=e[a][0]).trace.scalegroup===u&&(c=Math.min(c,o.r*o.r/o.vTotal));for(a=0;a<e.length;a++)(o=e[a][0]).trace.scalegroup===u&&(o.r=Math.sqrt(c*o.vTotal))}}(t,n._size);var m=s.makeTraceGroups(n._pielayer,t,"trace").each(function(t){var m=r.select(this),v=t[0],g=v.trace;!function(e){var t,n,r,a=e[0],i=a.trace,o=i.rotation*Math.PI/180,s=2*Math.PI/a.vTotal,l="px0",u="px1";if("counterclockwise"===i.direction){for(t=0;t<e.length&&e[t].hidden;t++);if(t===e.length)return;o+=s*e[t].v,s*=-1,l="px1",u="px0"}function c(e){return[a.r*Math.sin(e),-a.r*Math.cos(e)]}for(r=c(o),t=0;t<e.length;t++)(n=e[t]).hidden||(n[l]=r,o+=s*n.v/2,n.pxmid=c(o),n.midangle=o,o+=s*n.v/2,r=c(o),n[u]=r,n.largeArc=n.v>a.vTotal/2?1:0)}(t),m.attr("stroke-linejoin","round"),m.each(function(){var m=r.select(this).selectAll("g.slice").data(t);m.enter().append("g").classed("slice",!0),m.exit().remove();var y=[[[],[]],[[],[]]],b=!1;m.each(function(t){if(t.hidden)r.select(this).selectAll("path,g").remove();else{t.pointNumber=t.i,t.curveNumber=g.index,y[t.pxmid[1]<0?0:1][t.pxmid[0]<0?0:1].push(t);var p=v.cx,h=v.cy,m=r.select(this),x=m.selectAll("path.surface").data([t]),_=!1,w=!1;if(x.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),m.select("path.textline").remove(),m.on("mouseover",function(){var i=e._fullLayout,o=e._fullData[g.index];if(!e._dragging&&!1!==i.hovermode){var s=o.hoverinfo;if(Array.isArray(s)&&(s=a.castHoverinfo({hoverinfo:[u.castOption(s,t.pts)],_module:g._module},i,0)),"all"===s&&(s="label+text+value+percent+name"),"none"!==s&&"skip"!==s&&s){var l=f(t,v),d=p+t.pxmid[0]*(1-l),m=h+t.pxmid[1]*(1-l),y=n.separators,b=[];if(-1!==s.indexOf("label")&&b.push(t.label),-1!==s.indexOf("text")){var x=u.castOption(o.hovertext||o.text,t.pts);x&&b.push(x)}-1!==s.indexOf("value")&&b.push(u.formatPieValue(t.v,y)),-1!==s.indexOf("percent")&&b.push(u.formatPiePercent(t.v/v.vTotal,y));var T=g.hoverlabel,k=T.font;a.loneHover({x0:d-l*v.r,x1:d+l*v.r,y:m,text:b.join("<br>"),name:-1!==s.indexOf("name")?o.name:void 0,idealAlign:t.pxmid[0]<0?"left":"right",color:u.castOption(T.bgcolor,t.pts)||t.color,borderColor:u.castOption(T.bordercolor,t.pts),fontFamily:u.castOption(k.family,t.pts),fontSize:u.castOption(k.size,t.pts),fontColor:u.castOption(k.color,t.pts)},{container:i._hoverlayer.node(),outerContainer:i._paper.node(),gd:e}),_=!0}e.emit("plotly_hover",{points:[c(t,o)],event:r.event}),w=!0}}).on("mouseout",function(n){var i=e._fullLayout,o=e._fullData[g.index];w&&(n.originalEvent=r.event,e.emit("plotly_unhover",{points:[c(t,o)],event:r.event}),w=!1),_&&(a.loneUnhover(i._hoverlayer.node()),_=!1)}).on("click",function(){var n=e._fullLayout,i=e._fullData[g.index];e._dragging||!1===n.hovermode||(e._hoverdata=[c(t,i)],a.click(e,r.event))}),g.pull){var T=+u.castOption(g.pull,t.pts)||0;T>0&&(p+=T*t.pxmid[0],h+=T*t.pxmid[1])}t.cxFinal=p,t.cyFinal=h;var k=g.hole;if(t.v===v.vTotal){var C="M"+(p+t.px0[0])+","+(h+t.px0[1])+O(t.px0,t.pxmid,!0,1)+O(t.pxmid,t.px0,!0,1)+"Z";k?x.attr("d","M"+(p+k*t.px0[0])+","+(h+k*t.px0[1])+O(t.px0,t.pxmid,!1,k)+O(t.pxmid,t.px0,!1,k)+"Z"+C):x.attr("d",C)}else{var E=O(t.px0,t.px1,!0,1);if(k){var M=1-k;x.attr("d","M"+(p+k*t.px1[0])+","+(h+k*t.px1[1])+O(t.px1,t.px0,!1,k)+"l"+M*t.px0[0]+","+M*t.px0[1]+E+"Z")}else x.attr("d","M"+p+","+h+"l"+t.px0[0]+","+t.px0[1]+E+"Z")}var A=u.castOption(g.textposition,t.pts),S=m.selectAll("g.slicetext").data(t.text&&"none"!==A?[0]:[]);S.enter().append("g").classed("slicetext",!0),S.exit().remove(),S.each(function(){var n=s.ensureSingle(r.select(this),"text","",function(e){e.attr("data-notex",1)});n.text(t.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(o.font,"outside"===A?function(e,t,n){var r=u.castOption(e.outsidetextfont.color,t.pts)||u.castOption(e.textfont.color,t.pts)||n.color,a=u.castOption(e.outsidetextfont.family,t.pts)||u.castOption(e.textfont.family,t.pts)||n.family,i=u.castOption(e.outsidetextfont.size,t.pts)||u.castOption(e.textfont.size,t.pts)||n.size;return{color:r,family:a,size:i}}(g,t,e._fullLayout.font):function(e,t,n){var r=u.castOption(e.insidetextfont.color,t.pts);!r&&e._input.textfont&&(r=u.castOption(e._input.textfont.color,t.pts));var a=u.castOption(e.insidetextfont.family,t.pts)||u.castOption(e.textfont.family,t.pts)||n.family,o=u.castOption(e.insidetextfont.size,t.pts)||u.castOption(e.textfont.size,t.pts)||n.size;return{color:r||i.contrast(t.color),family:a,size:o}}(g,t,e._fullLayout.font)).call(l.convertToTspans,e);var a,c=o.bBox(n.node());"outside"===A?a=d(c,t):(a=function(e,t,n){var r=Math.sqrt(e.width*e.width+e.height*e.height),a=e.width/e.height,i=Math.PI*Math.min(t.v/n.vTotal,.5),o=1-n.trace.hole,s=f(t,n),l={scale:s*n.r*2/r,rCenter:1-s,rotate:0};if(l.scale>=1)return l;var u=a+1/(2*Math.tan(i)),c=n.r*Math.min(1/(Math.sqrt(u*u+.5)+u),o/(Math.sqrt(a*a+o/2)+a)),d={scale:2*c/e.height,rCenter:Math.cos(c/n.r)-c*a/n.r,rotate:(180/Math.PI*t.midangle+720)%180-90},p=1/a,h=p+1/(2*Math.tan(i)),m=n.r*Math.min(1/(Math.sqrt(h*h+.5)+h),o/(Math.sqrt(p*p+o/2)+p)),v={scale:2*m/e.width,rCenter:Math.cos(m/n.r)-m/a/n.r,rotate:(180/Math.PI*t.midangle+810)%180-90},g=v.scale>d.scale?v:d;return l.scale<1&&g.scale>l.scale?g:l}(c,t,v),"auto"===A&&a.scale<1&&(n.call(o.font,g.outsidetextfont),g.outsidetextfont.family===g.insidetextfont.family&&g.outsidetextfont.size===g.insidetextfont.size||(c=o.bBox(n.node())),a=d(c,t)));var m=p+t.pxmid[0]*a.rCenter+(a.x||0),y=h+t.pxmid[1]*a.rCenter+(a.y||0);a.outside&&(t.yLabelMin=y-c.height/2,t.yLabelMid=y,t.yLabelMax=y+c.height/2,t.labelExtraX=0,t.labelExtraY=0,b=!0),n.attr("transform","translate("+m+","+y+")"+(a.scale<1?"scale("+a.scale+")":"")+(a.rotate?"rotate("+a.rotate+")":"")+"translate("+-(c.left+c.right)/2+","+-(c.top+c.bottom)/2+")")})}function O(e,n,r,a){return"a"+a*v.r+","+a*v.r+" 0 "+t.largeArc+(r?" 1 ":" 0 ")+a*(n[0]-e[0])+","+a*(n[1]-e[1])}});var x=r.select(this).selectAll("g.titletext").data(g.title?[0]:[]);x.enter().append("g").classed("titletext",!0),x.exit().remove(),x.each(function(){var t,a=s.ensureSingle(r.select(this),"text","",function(e){e.attr("data-notex",1)});a.text(g.title).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(o.font,g.titlefont).call(l.convertToTspans,e),t="middle center"===g.titleposition?function(e){var t=Math.sqrt(e.titleBox.width*e.titleBox.width+e.titleBox.height*e.titleBox.height);return{x:e.cx,y:e.cy,scale:e.trace.hole*e.r*2/t,tx:0,ty:-e.titleBox.height/2+e.trace.titlefont.size}}(v):function(e,t){var n,r,a=1,i=1,o=e.trace,s={x:e.cx,y:e.cy},l={tx:0,ty:0};return l.ty+=o.titlefont.size,r=h(o),-1!==o.titleposition.indexOf("top")?(s.y-=(1+r)*e.r,l.ty-=e.titleBox.height):-1!==o.titleposition.indexOf("bottom")&&(s.y+=(1+r)*e.r),-1!==o.titleposition.indexOf("left")?(n=t.w*(o.domain.x[1]-o.domain.x[0])/2+e.r,s.x-=(1+r)*e.r,l.tx+=e.titleBox.width/2):-1!==o.titleposition.indexOf("center")?n=t.w*(o.domain.x[1]-o.domain.x[0]):-1!==o.titleposition.indexOf("right")&&(n=t.w*(o.domain.x[1]-o.domain.x[0])/2+e.r,s.x+=(1+r)*e.r,l.tx-=e.titleBox.width/2),a=n/e.titleBox.width,i=p(e,t)/e.titleBox.height,{x:s.x,y:s.y,scale:Math.min(a,i),tx:l.tx,ty:l.ty}}(v,n._size),a.attr("transform","translate("+t.x+","+t.y+")"+(t.scale<1?"scale("+t.scale+")":"")+"translate("+t.tx+","+t.ty+")")}),b&&function(e,t){var n,r,a,i,o,s,l,c,f,d,p,h,m;function v(e,t){return e.pxmid[1]-t.pxmid[1]}function g(e,t){return t.pxmid[1]-e.pxmid[1]}function y(e,n){n||(n={});var a,c,f,p,h,m,v=n.labelExtraY+(r?n.yLabelMax:n.yLabelMin),g=r?e.yLabelMin:e.yLabelMax,y=r?e.yLabelMax:e.yLabelMin,b=e.cyFinal+o(e.px0[1],e.px1[1]),x=v-g;if(x*l>0&&(e.labelExtraY=x),Array.isArray(t.pull))for(c=0;c<d.length;c++)(f=d[c])===e||(u.castOption(t.pull,e.pts)||0)>=(u.castOption(t.pull,f.pts)||0)||((e.pxmid[1]-f.pxmid[1])*l>0?(p=f.cyFinal+o(f.px0[1],f.px1[1]),(x=p-g-e.labelExtraY)*l>0&&(e.labelExtraY+=x)):(y+e.labelExtraY-b)*l>0&&(a=3*s*Math.abs(c-d.indexOf(e)),h=f.cxFinal+i(f.px0[0],f.px1[0]),(m=h+a-(e.cxFinal+e.pxmid[0])-e.labelExtraX)*s>0&&(e.labelExtraX+=m)))}for(r=0;r<2;r++)for(a=r?v:g,o=r?Math.max:Math.min,l=r?1:-1,n=0;n<2;n++){for(i=n?Math.max:Math.min,s=n?1:-1,(c=e[r][n]).sort(a),f=e[1-r][n],d=f.concat(c),h=[],p=0;p<c.length;p++)void 0!==c[p].yLabelMid&&h.push(c[p]);for(m=!1,p=0;r&&p<f.length;p++)if(void 0!==f[p].yLabelMid){m=f[p];break}for(p=0;p<h.length;p++){var b=p&&h[p-1];m&&!p&&(b=m),y(h[p],b)}}}(y,g),m.each(function(e){if(e.labelExtraX||e.labelExtraY){var t=r.select(this),n=t.select("g.slicetext text");n.attr("transform","translate("+e.labelExtraX+","+e.labelExtraY+")"+n.attr("transform"));var a=e.cxFinal+e.pxmid[0],o=e.cyFinal+e.pxmid[1],s="M"+a+","+o,l=(e.yLabelMax-e.yLabelMin)*(e.pxmid[0]<0?-1:1)/4;if(e.labelExtraX){var u=e.labelExtraX*e.pxmid[1]/e.pxmid[0],c=e.yLabelMid+e.labelExtraY-(e.cyFinal+e.pxmid[1]);Math.abs(u)>Math.abs(c)?s+="l"+c*e.pxmid[0]/e.pxmid[1]+","+c+"H"+(a+e.labelExtraX+l):s+="l"+e.labelExtraX+","+u+"v"+(c-u)+"h"+l}else s+="V"+(e.yLabelMid+e.labelExtraY)+"h"+l;t.append("path").classed("textline",!0).call(i.stroke,g.outsidetextfont.color).attr({"stroke-width":Math.min(2,g.outsidetextfont.size/8),d:s,fill:"none"})}})})});setTimeout(function(){m.selectAll("tspan").each(function(){var e=r.select(this);e.attr("dy")&&e.attr("dy",e.attr("dy"))})},0)}},{"../../components/color":570,"../../components/drawing":595,"../../components/fx":612,"../../lib":696,"../../lib/svg_text_utils":720,"./event_data":1022,"./helpers":1023,d3:148}],1028:[function(e,t,n){"use strict";var r=e("d3"),a=e("./style_one");t.exports=function(e){e._fullLayout._pielayer.selectAll(".trace").each(function(e){var t=e[0],n=t.trace,i=r.select(this);i.style({opacity:n.opacity}),i.selectAll("path.surface").each(function(e){r.select(this).call(a,e,n)})})}},{"./style_one":1029,d3:148}],1029:[function(e,t,n){"use strict";var r=e("../../components/color"),a=e("./helpers").castOption;t.exports=function(e,t,n){var i=n.marker.line,o=a(i.color,t.pts)||r.defaultLine,s=a(i.width,t.pts)||0;e.style({"stroke-width":s}).call(r.fill,t.color).call(r.stroke,o)}},{"../../components/color":570,"./helpers":1023}],1030:[function(e,t,n){"use strict";var r=e("../scatter/attributes");t.exports={x:r.x,y:r.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:r.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},{"../scatter/attributes":1043}],1031:[function(e,t,n){"use strict";var r=e("gl-pointcloud2d"),a=e("../../lib/str2rgbarray"),i=e("../../plots/cartesian/autorange").findExtremes,o=e("../scatter/get_trace_color");function s(e,t){this.scene=e,this.uid=t,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=r(e.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var l=s.prototype;l.handlePick=function(e){var t=this.idToIndex[e.pointId];return{trace:this,dataCoord:e.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*t],this.pickXYData[2*t+1]]:[this.pickXData[t],this.pickYData[t]],textLabel:Array.isArray(this.textLabels)?this.textLabels[t]:this.textLabels,color:this.color,name:this.name,pointIndex:t,hoverinfo:this.hoverinfo}},l.update=function(e){this.index=e.index,this.textLabels=e.text,this.name=e.name,this.hoverinfo=e.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(e),this.color=o(e,{})},l.updateFast=function(e){var t,n,r,o,s,l,u=this.xData=this.pickXData=e.x,c=this.yData=this.pickYData=e.y,f=this.pickXYData=e.xy,d=e.xbounds&&e.ybounds,p=e.indices,h=this.bounds;if(f){if(r=f,t=f.length>>>1,d)h[0]=e.xbounds[0],h[2]=e.xbounds[1],h[1]=e.ybounds[0],h[3]=e.ybounds[1];else for(l=0;l<t;l++)o=r[2*l],s=r[2*l+1],o<h[0]&&(h[0]=o),o>h[2]&&(h[2]=o),s<h[1]&&(h[1]=s),s>h[3]&&(h[3]=s);if(p)n=p;else for(n=new Int32Array(t),l=0;l<t;l++)n[l]=l}else for(t=u.length,r=new Float32Array(2*t),n=new Int32Array(t),l=0;l<t;l++)o=u[l],s=c[l],n[l]=l,r[2*l]=o,r[2*l+1]=s,o<h[0]&&(h[0]=o),o>h[2]&&(h[2]=o),s<h[1]&&(h[1]=s),s>h[3]&&(h[3]=s);this.idToIndex=n,this.pointcloudOptions.idToIndex=n,this.pointcloudOptions.positions=r;var m=a(e.marker.color),v=a(e.marker.border.color),g=e.opacity*e.marker.opacity;m[3]*=g,this.pointcloudOptions.color=m;var y=e.marker.blend;null===y&&(y=u.length<100||c.length<100),this.pointcloudOptions.blend=y,v[3]*=g,this.pointcloudOptions.borderColor=v;var b=e.marker.sizemin,x=Math.max(e.marker.sizemax,e.marker.sizemin);this.pointcloudOptions.sizeMin=b,this.pointcloudOptions.sizeMax=x,this.pointcloudOptions.areaRatio=e.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var _=this.scene.xaxis,w=this.scene.yaxis,T=x/2||.5;e._extremes[_._id]=i(_,[h[0],h[2]],{ppad:T}),e._extremes[w._id]=i(w,[h[1],h[3]],{ppad:T})},l.dispose=function(){this.pointcloud.dispose()},t.exports=function(e,t){var n=new s(e,t.uid);return n.update(t),n}},{"../../lib/str2rgbarray":719,"../../plots/cartesian/autorange":743,"../scatter/get_trace_color":1053,"gl-pointcloud2d":279}],1032:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("./attributes");t.exports=function(e,t,n){function i(n,i){return r.coerce(e,t,a,n,i)}i("x"),i("y"),i("xbounds"),i("ybounds"),e.xy&&e.xy instanceof Float32Array&&(t.xy=e.xy),e.indices&&e.indices instanceof Int32Array&&(t.indices=e.indices),i("text"),i("marker.color",n),i("marker.opacity"),i("marker.blend"),i("marker.sizemin"),i("marker.sizemax"),i("marker.border.color",n),i("marker.border.arearatio"),t._length=null}},{"../../lib":696,"./attributes":1030}],1033:[function(e,t,n){"use strict";var r={};r.attributes=e("./attributes"),r.supplyDefaults=e("./defaults"),r.calc=e("../scatter3d/calc"),r.plot=e("./convert"),r.moduleType="trace",r.name="pointcloud",r.basePlotModule=e("../../plots/gl2d"),r.categories=["gl","gl2d","showLegend"],r.meta={},t.exports=r},{"../../plots/gl2d":784,"../scatter3d/calc":1071,"./attributes":1030,"./convert":1031,"./defaults":1032}],1034:[function(e,t,n){"use strict";var r=e("../../plots/font_attributes"),a=e("../../plots/attributes"),i=e("../../components/color/attributes"),o=e("../../components/fx/attributes"),s=e("../../plots/domain").attributes,l=e("../../lib/extend").extendFlat,u=e("../../plot_api/edit_types").overrideAll,c=t.exports=u({hoverinfo:l({},a.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:o.hoverlabel,domain:s({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s"},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:r({}),node:{label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},line:{color:{valType:"color",dflt:i.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:o.hoverlabel},link:{label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},line:{color:{valType:"color",dflt:i.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:o.hoverlabel}},"calc","nested");c.transforms=void 0},{"../../components/color/attributes":569,"../../components/fx/attributes":604,"../../lib/extend":685,"../../plot_api/edit_types":727,"../../plots/attributes":741,"../../plots/domain":770,"../../plots/font_attributes":771}],1035:[function(e,t,n){"use strict";var r=e("../../plot_api/edit_types").overrideAll,a=e("../../plots/get_data").getModuleCalcData,i=e("./plot"),o=e("../../components/fx/layout_attributes");n.name="sankey",n.baseLayoutAttrOverrides=r({hoverlabel:o.hoverlabel},"plot","nested"),n.plot=function(e){var t=a(e.calcdata,"sankey")[0];i(e,t)},n.clean=function(e,t,n,r){var a=r._has&&r._has("sankey"),i=t._has&&t._has("sankey");a&&!i&&r._paperdiv.selectAll(".sankey").remove()}},{"../../components/fx/layout_attributes":613,"../../plot_api/edit_types":727,"../../plots/get_data":781,"./plot":1040}],1036:[function(e,t,n){"use strict";var r=e("strongly-connected-components"),a=e("../../lib"),i=e("../../lib/gup").wrap;t.exports=function(e,t){return function(e,t,n){for(var i=e.length,o=a.init2dArray(i,0),s=0;s<Math.min(t.length,n.length);s++)if(a.isIndex(t[s],i)&&a.isIndex(n[s],i)){if(t[s]===n[s])return!0;o[t[s]].push(n[s])}return r(o).components.some(function(e){return e.length>1})}(t.node.label,t.link.source,t.link.target)&&(a.error("Circularity is present in the Sankey data. Removing all nodes and links."),t.link.label=[],t.link.source=[],t.link.target=[],t.link.value=[],t.link.color=[],t.node.label=[],t.node.color=[]),i({link:t.link,node:t.node})}},{"../../lib":696,"../../lib/gup":693,"strongly-connected-components":506}],1037:[function(e,t,n){"use strict";t.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"cubic-in-out",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeCapture:"node-capture",nodeCentered:"node-entered",nodeLabelGuide:"node-label-guide",nodeLabel:"node-label",nodeLabelTextPath:"node-label-text-path"}}},{}],1038:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("./attributes"),i=e("../../components/color"),o=e("tinycolor2"),s=e("../../plots/domain").defaults,l=e("../../components/fx/hoverlabel_defaults"),u=e("../../plot_api/plot_template");t.exports=function(e,t,n,c){function f(n,i){return r.coerce(e,t,a,n,i)}var d=r.extendDeep(c.hoverlabel,e.hoverlabel),p=e.node,h=u.newContainer(t,"node");function m(e,t){return r.coerce(p,h,a.node,e,t)}m("label"),m("pad"),m("thickness"),m("line.color"),m("line.width"),m("hoverinfo",e.hoverinfo),l(p,h,m,d);var v=c.colorway;m("color",h.label.map(function(e,t){return i.addOpacity(function(e){return v[e%v.length]}(t),.8)}));var g=e.link,y=u.newContainer(t,"link");function b(e,t){return r.coerce(g,y,a.link,e,t)}b("label"),b("source"),b("target"),b("value"),b("line.color"),b("line.width"),b("hoverinfo",e.hoverinfo),l(g,y,b,d);var x=o(c.paper_bgcolor).getLuminance()<.333?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";b("color",r.repeat(x,y.value.length)),s(t,c,f),f("orientation"),f("valueformat"),f("valuesuffix"),f("arrangement"),r.coerceFont(f,"textfont",r.extendFlat({},c.font)),t._length=null}},{"../../components/color":570,"../../components/fx/hoverlabel_defaults":611,"../../lib":696,"../../plot_api/plot_template":734,"../../plots/domain":770,"./attributes":1034,tinycolor2:514}],1039:[function(e,t,n){"use strict";var r={};r.attributes=e("./attributes"),r.supplyDefaults=e("./defaults"),r.calc=e("./calc"),r.plot=e("./plot"),r.moduleType="trace",r.name="sankey",r.basePlotModule=e("./base_plot"),r.categories=["noOpacity"],r.meta={},t.exports=r},{"./attributes":1034,"./base_plot":1035,"./calc":1036,"./defaults":1038,"./plot":1040}],1040:[function(e,t,n){"use strict";var r=e("d3"),a=e("./render"),i=e("../../components/fx"),o=e("../../components/color"),s=e("../../lib"),l=e("./constants").cn,u=s._;function c(e){return""!==e}function f(e,t){return e.filter(function(e){return e.key===t.traceId})}function d(e,t){r.select(e).select("path").style("fill-opacity",t),r.select(e).select("rect").style("fill-opacity",t)}function p(e){r.select(e).select("text.name").style("fill","black")}function h(e){return function(t){return-1!==e.node.sourceLinks.indexOf(t.link)||-1!==e.node.targetLinks.indexOf(t.link)}}function m(e){return function(t){return-1!==t.node.sourceLinks.indexOf(e.link)||-1!==t.node.targetLinks.indexOf(e.link)}}function v(e,t,n){t&&n&&f(n,t).selectAll("."+l.sankeyLink).filter(h(t)).call(y.bind(0,t,n,!1))}function g(e,t,n){t&&n&&f(n,t).selectAll("."+l.sankeyLink).filter(h(t)).call(b.bind(0,t,n,!1))}function y(e,t,n,r){var a=r.datum().link.label;r.style("fill-opacity",.4),a&&f(t,e).selectAll("."+l.sankeyLink).filter(function(e){return e.link.label===a}).style("fill-opacity",.4),n&&f(t,e).selectAll("."+l.sankeyNode).filter(m(e)).call(v)}function b(e,t,n,r){var a=r.datum().link.label;r.style("fill-opacity",function(e){return e.tinyColorAlpha}),a&&f(t,e).selectAll("."+l.sankeyLink).filter(function(e){return e.link.label===a}).style("fill-opacity",function(e){return e.tinyColorAlpha}),n&&f(t,e).selectAll(l.sankeyNode).filter(m(e)).call(g)}function x(e,t){var n=e.hoverlabel||{},r=s.nestedProperty(n,t).get();return!Array.isArray(r)&&r}t.exports=function(e,t){var n=e._fullLayout,s=n._paper,f=n._size,h=u(e,"source:")+" ",m=u(e,"target:")+" ",_=u(e,"incoming flow count:")+" ",w=u(e,"outgoing flow count:")+" ";a(s,t,{width:f.w,height:f.h,margin:{t:f.t,r:f.r,b:f.b,l:f.l}},{linkEvents:{hover:function(t,n,a){!1!==e._fullLayout.hovermode&&(r.select(t).call(y.bind(0,n,a,!0)),"skip"!==n.link.trace.link.hoverinfo&&e.emit("plotly_hover",{event:r.event,points:[n.link]}))},follow:function(t,a){if(!1!==e._fullLayout.hovermode){var s=a.link.trace.link;if("none"!==s.hoverinfo&&"skip"!==s.hoverinfo){var l=e._fullLayout._paperdiv.node().getBoundingClientRect(),u=t.getBoundingClientRect(),f=u.left+u.width/2,v=u.top+u.height/2,g=i.loneHover({x:f-l.left,y:v-l.top,name:r.format(a.valueFormat)(a.link.value)+a.valueSuffix,text:[a.link.label||"",h+a.link.source.label,m+a.link.target.label].filter(c).join("<br>"),color:x(s,"bgcolor")||o.addOpacity(a.tinyColorHue,1),borderColor:x(s,"bordercolor"),fontFamily:x(s,"font.family"),fontSize:x(s,"font.size"),fontColor:x(s,"font.color"),idealAlign:r.event.x<f?"right":"left"},{container:n._hoverlayer.node(),outerContainer:n._paper.node(),gd:e});d(g,.65),p(g)}}},unhover:function(t,a,o){!1!==e._fullLayout.hovermode&&(r.select(t).call(b.bind(0,a,o,!0)),"skip"!==a.link.trace.link.hoverinfo&&e.emit("plotly_unhover",{event:r.event,points:[a.link]}),i.loneUnhover(n._hoverlayer.node()))},select:function(t,n){var a=n.link;a.originalEvent=r.event,e._hoverdata=[a],i.click(e,{target:!0})}},nodeEvents:{hover:function(t,n,a){!1!==e._fullLayout.hovermode&&(r.select(t).call(v,n,a),"skip"!==n.node.trace.node.hoverinfo&&e.emit("plotly_hover",{event:r.event,points:[n.node]}))},follow:function(t,a){if(!1!==e._fullLayout.hovermode){var o=a.node.trace.node;if("none"!==o.hoverinfo&&"skip"!==o.hoverinfo){var s=r.select(t).select("."+l.nodeRect),u=e._fullLayout._paperdiv.node().getBoundingClientRect(),f=s.node().getBoundingClientRect(),h=f.left-2-u.left,m=f.right+2-u.left,v=f.top+f.height/4-u.top,g=i.loneHover({x0:h,x1:m,y:v,name:r.format(a.valueFormat)(a.node.value)+a.valueSuffix,text:[a.node.label,_+a.node.targetLinks.length,w+a.node.sourceLinks.length].filter(c).join("<br>"),color:x(o,"bgcolor")||a.tinyColorHue,borderColor:x(o,"bordercolor"),fontFamily:x(o,"font.family"),fontSize:x(o,"font.size"),fontColor:x(o,"font.color"),idealAlign:"left"},{container:n._hoverlayer.node(),outerContainer:n._paper.node(),gd:e});d(g,.85),p(g)}}},unhover:function(t,a,o){!1!==e._fullLayout.hovermode&&(r.select(t).call(g,a,o),"skip"!==a.node.trace.node.hoverinfo&&e.emit("plotly_unhover",{event:r.event,points:[a.node]}),i.loneUnhover(n._hoverlayer.node()))},select:function(t,n,a){var o=n.node;o.originalEvent=r.event,e._hoverdata=[o],r.select(t).call(g,n,a),i.click(e,{target:!0})}}})}},{"../../components/color":570,"../../components/fx":612,"../../lib":696,"./constants":1037,"./render":1041,d3:148}],1041:[function(e,t,n){"use strict";var r=e("./constants"),a=e("d3"),i=e("tinycolor2"),o=e("../../components/color"),s=e("../../components/drawing"),l=e("@plotly/d3-sankey").sankey,u=e("d3-force"),c=e("../../lib"),f=c.isArrayOrTypedArray,d=c.isIndex,p=e("../../lib/gup"),h=p.keyFun,m=p.repeat,v=p.unwrap;function g(e){e.lastDraggedX=e.x,e.lastDraggedY=e.y}function y(e){return function(t){return t.node.originalX===e.node.originalX}}function b(e){for(var t=0;t<e.length;t++)e[t].y=e[t].y+e[t].dy/2}function x(e){e.attr("transform",function(e){return"translate("+e.node.x.toFixed(3)+", "+(e.node.y-e.node.dy/2).toFixed(3)+")"})}function _(e){var t=e.sankey.nodes();!function(e){for(var t=0;t<e.length;t++)e[t].y=e[t].y-e[t].dy/2}(t);var n=e.sankey.link()(e.link);return b(t),n}function w(e){e.call(x)}function T(e,t){e.call(w),t.attr("d",_)}function k(e){e.attr("width",function(e){return e.visibleWidth}).attr("height",function(e){return e.visibleHeight})}function C(e){return e.link.dy>1||e.linkLineWidth>0}function E(e){var t="translate("+e.translateX+","+e.translateY+")";return t+(e.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function M(e){return"translate("+(e.horizontal?0:e.labelY)+" "+(e.horizontal?e.labelY:0)+")"}function A(e){return a.svg.line()([[e.horizontal?e.left?-e.sizeAcross:e.visibleWidth+r.nodeTextOffsetHorizontal:r.nodeTextOffsetHorizontal,0],[e.horizontal?e.left?-r.nodeTextOffsetHorizontal:e.sizeAcross:e.visibleHeight-r.nodeTextOffsetHorizontal,0]])}function S(e){return e.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)"}function O(e){return e.horizontal?"scale(1 1)":"scale(-1 1)"}function P(e){return e.darkBackground&&!e.horizontal?"rgb(255,255,255)":"rgb(0,0,0)"}function R(e){return e.horizontal&&e.left?"100%":"0%"}function L(e,t,n){e.on(".basic",null).on("mouseover.basic",function(e){e.interactionState.dragInProgress||(n.hover(this,e,t),e.interactionState.hovered=[this,e])}).on("mousemove.basic",function(e){e.interactionState.dragInProgress||(n.follow(this,e),e.interactionState.hovered=[this,e])}).on("mouseout.basic",function(e){e.interactionState.dragInProgress||(n.unhover(this,e,t),e.interactionState.hovered=!1)}).on("click.basic",function(e){e.interactionState.hovered&&(n.unhover(this,e,t),e.interactionState.hovered=!1),e.interactionState.dragInProgress||n.select(this,e,t)})}function D(e,t,n){var i=a.behavior.drag().origin(function(e){return e.node}).on("dragstart",function(a){if("fixed"!==a.arrangement&&(c.raiseToTop(this),a.interactionState.dragInProgress=a.node,g(a.node),a.interactionState.hovered&&(n.nodeEvents.unhover.apply(0,a.interactionState.hovered),a.interactionState.hovered=!1),"snap"===a.arrangement)){var i=a.traceId+"|"+Math.floor(a.node.originalX);a.forceLayouts[i]?a.forceLayouts[i].alpha(1):function(e,t,n){var a=n.sankey.nodes().filter(function(e){return e.originalX===n.node.originalX});n.forceLayouts[t]=u.forceSimulation(a).alphaDecay(0).force("collide",u.forceCollide().radius(function(e){return e.dy/2+n.nodePad/2}).strength(1).iterations(r.forceIterations)).force("constrain",function(e,t,n,a){return function(){for(var e=0,i=0;i<n.length;i++){var o=n[i];o===a.interactionState.dragInProgress?(o.x=o.lastDraggedX,o.y=o.lastDraggedY):(o.vx=(o.originalX-o.x)/r.forceTicksPerFrame,o.y=Math.min(a.size-o.dy/2,Math.max(o.dy/2,o.y))),e=Math.max(e,Math.abs(o.vx),Math.abs(o.vy))}!a.interactionState.dragInProgress&&e<.1&&a.forceLayouts[t].alpha()>0&&a.forceLayouts[t].alpha(0)}}(0,t,a,n)).stop()}(0,i,a),function(e,t,n,a){window.requestAnimationFrame(function i(){for(var o=0;o<r.forceTicksPerFrame;o++)n.forceLayouts[a].tick();n.sankey.relayout(),T(e.filter(y(n)),t),n.forceLayouts[a].alpha()>0&&window.requestAnimationFrame(i)})}(e,t,a,i)}}).on("drag",function(n){if("fixed"!==n.arrangement){var r=a.event.x,i=a.event.y;"snap"===n.arrangement?(n.node.x=r,n.node.y=i):("freeform"===n.arrangement&&(n.node.x=r),n.node.y=Math.max(n.node.dy/2,Math.min(n.size-n.node.dy/2,i))),g(n.node),"snap"!==n.arrangement&&(n.sankey.relayout(),T(e.filter(y(n)),t))}}).on("dragend",function(e){e.interactionState.dragInProgress=!1});e.on(".drag",null).call(i)}t.exports=function(e,t,n,a){var u=e.selectAll("."+r.cn.sankey).data(t.filter(function(e){return v(e).trace.visible}).map(function(e,t,n){var a,i=v(t).trace,o=i.domain,s=i.node,u=i.link,p=i.arrangement,h="h"===i.orientation,m=i.node.pad,g=i.node.thickness,y=i.node.line.color,x=i.node.line.width,_=i.link.line.color,w=i.link.line.width,T=i.valueformat,k=i.valuesuffix,C=i.textfont,E=e.width*(o.x[1]-o.x[0]),M=e.height*(o.y[1]-o.y[0]),A=[],S=f(u.color),O={},P=s.label.length;for(a=0;a<u.value.length;a++){var R=u.value[a],L=u.source[a],D=u.target[a];R>0&&d(L,P)&&d(D,P)&&(D=+D,O[L=+L]=O[D]=!0,A.push({pointNumber:a,label:u.label[a],color:S?u.color[a]:u.color,source:L,target:D,value:+R}))}var I=f(s.color),z=[],j=!1,N={};for(a=0;a<P;a++)if(O[a]){var F=s.label[a];N[a]=z.length,z.push({pointNumber:a,label:F,color:I?s.color[a]:s.color})}else j=!0;if(j)for(a=0;a<A.length;a++)A[a].source=N[A[a].source],A[a].target=N[A[a].target];var B=l().size(h?[E,M]:[M,E]).nodeWidth(g).nodePadding(m).nodes(z).links(A).layout(r.sankeyIterations);B.nodePadding()<m&&c.warn("node.pad was reduced to ",B.nodePadding()," to fit within the figure.");for(var V,U=B.nodes(),G=0;G<U.length;G++)(V=U[G]).width=E,V.height=M;return b(z),{key:n,trace:i,guid:Math.floor(1e12*(1+Math.random())),horizontal:h,width:E,height:M,nodePad:m,nodeLineColor:y,nodeLineWidth:x,linkLineColor:_,linkLineWidth:w,valueFormat:T,valueSuffix:k,textFont:C,translateX:o.x[0]*e.width+e.margin.l,translateY:e.height-o.y[1]*e.height+e.margin.t,dragParallel:h?M:E,dragPerpendicular:h?E:M,nodes:z,links:A,arrangement:p,sankey:B,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}.bind(null,n)),h);u.exit().remove(),u.enter().append("g").classed(r.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events","auto").attr("transform",E),u.transition().ease(r.ease).duration(r.duration).attr("transform",E);var p=u.selectAll("."+r.cn.sankeyLinks).data(m,h);p.enter().append("g").classed(r.cn.sankeyLinks,!0).style("fill","none");var g=p.selectAll("."+r.cn.sankeyLink).data(function(e){return e.sankey.links().filter(function(e){return e.value}).map(function(e,t,n){var r=i(n.color),a=n.source.label+"|"+n.target.label,s=e[a];e[a]=(s||0)+1;var l=a+"__"+e[a];return n.trace=t.trace,n.curveNumber=t.trace.index,{key:l,traceId:t.key,link:n,tinyColorHue:o.tinyRGB(r),tinyColorAlpha:r.getAlpha(),linkLineColor:t.linkLineColor,linkLineWidth:t.linkLineWidth,valueFormat:t.valueFormat,valueSuffix:t.valueSuffix,sankey:t.sankey,interactionState:t.interactionState}}.bind(null,{},e))},h);g.enter().append("path").classed(r.cn.sankeyLink,!0).attr("d",_).call(L,u,a.linkEvents),g.style("stroke",function(e){return C(e)?o.tinyRGB(i(e.linkLineColor)):e.tinyColorHue}).style("stroke-opacity",function(e){return C(e)?o.opacity(e.linkLineColor):e.tinyColorAlpha}).style("stroke-width",function(e){return C(e)?e.linkLineWidth:1}).style("fill",function(e){return e.tinyColorHue}).style("fill-opacity",function(e){return e.tinyColorAlpha}),g.transition().ease(r.ease).duration(r.duration).attr("d",_),g.exit().transition().ease(r.ease).duration(r.duration).style("opacity",0).remove();var y=u.selectAll("."+r.cn.sankeyNodeSet).data(m,h);y.enter().append("g").classed(r.cn.sankeyNodeSet,!0),y.style("cursor",function(e){switch(e.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var w=y.selectAll("."+r.cn.sankeyNode).data(function(e){var t=e.sankey.nodes();return function(e){var t,n=[];for(t=0;t<e.length;t++)e[t].originalX=e[t].x,e[t].originalY=e[t].y,-1===n.indexOf(e[t].x)&&n.push(e[t].x);for(n.sort(function(e,t){return e-t}),t=0;t<e.length;t++)e[t].originalLayerIndex=n.indexOf(e[t].originalX),e[t].originalLayer=e[t].originalLayerIndex/(n.length-1)}(t),t.filter(function(e){return e.value}).map(function(e,t,n){var a=i(n.color),s=r.nodePadAcross,l=t.nodePad/2,u=n.dx,c=Math.max(.5,n.dy),f=n.label,d=e[f];e[f]=(d||0)+1;var p=f+"__"+e[f];return n.trace=t.trace,n.curveNumber=t.trace.index,{key:p,traceId:t.key,node:n,nodePad:t.nodePad,nodeLineColor:t.nodeLineColor,nodeLineWidth:t.nodeLineWidth,textFont:t.textFont,size:t.horizontal?t.height:t.width,visibleWidth:Math.ceil(u),visibleHeight:c,zoneX:-s,zoneY:-l,zoneWidth:u+2*s,zoneHeight:c+2*l,labelY:t.horizontal?n.dy/2+1:n.dx/2+1,left:1===n.originalLayer,sizeAcross:t.width,forceLayouts:t.forceLayouts,horizontal:t.horizontal,darkBackground:a.getBrightness()<=128,tinyColorHue:o.tinyRGB(a),tinyColorAlpha:a.getAlpha(),valueFormat:t.valueFormat,valueSuffix:t.valueSuffix,sankey:t.sankey,arrangement:t.arrangement,uniqueNodeLabelPathId:[t.guid,t.key,p].join(" "),interactionState:t.interactionState}}.bind(null,{},e))},h);w.enter().append("g").classed(r.cn.sankeyNode,!0).call(x).call(L,u,a.nodeEvents),w.call(D,g,a),w.transition().ease(r.ease).duration(r.duration).call(x),w.exit().transition().ease(r.ease).duration(r.duration).style("opacity",0).remove();var T=w.selectAll("."+r.cn.nodeRect).data(m);T.enter().append("rect").classed(r.cn.nodeRect,!0).call(k),T.style("stroke-width",function(e){return e.nodeLineWidth}).style("stroke",function(e){return o.tinyRGB(i(e.nodeLineColor))}).style("stroke-opacity",function(e){return o.opacity(e.nodeLineColor)}).style("fill",function(e){return e.tinyColorHue}).style("fill-opacity",function(e){return e.tinyColorAlpha}),T.transition().ease(r.ease).duration(r.duration).call(k);var I=w.selectAll("."+r.cn.nodeCapture).data(m);I.enter().append("rect").classed(r.cn.nodeCapture,!0).style("fill-opacity",0),I.attr("x",function(e){return e.zoneX}).attr("y",function(e){return e.zoneY}).attr("width",function(e){return e.zoneWidth}).attr("height",function(e){return e.zoneHeight});var z=w.selectAll("."+r.cn.nodeCentered).data(m);z.enter().append("g").classed(r.cn.nodeCentered,!0).attr("transform",M),z.transition().ease(r.ease).duration(r.duration).attr("transform",M);var j=z.selectAll("."+r.cn.nodeLabelGuide).data(m);j.enter().append("path").classed(r.cn.nodeLabelGuide,!0).attr("id",function(e){return e.uniqueNodeLabelPathId}).attr("d",A).attr("transform",S),j.transition().ease(r.ease).duration(r.duration).attr("d",A).attr("transform",S);var N=z.selectAll("."+r.cn.nodeLabel).data(m);N.enter().append("text").classed(r.cn.nodeLabel,!0).attr("transform",O).style("user-select","none").style("cursor","default").style("fill","black"),N.style("text-shadow",function(e){return e.horizontal?"-1px 1px 1px #fff, 1px 1px 1px #fff, 1px -1px 1px #fff, -1px -1px 1px #fff":"none"}).each(function(e){s.font(N,e.textFont)}),N.transition().ease(r.ease).duration(r.duration).attr("transform",O);var F=N.selectAll("."+r.cn.nodeLabelTextPath).data(m);F.enter().append("textPath").classed(r.cn.nodeLabelTextPath,!0).attr("alignment-baseline","middle").attr("xlink:href",function(e){return"#"+e.uniqueNodeLabelPathId}).attr("startOffset",R).style("fill",P),F.text(function(e){return e.horizontal||e.node.dy>5?e.node.label:""}).attr("text-anchor",function(e){return e.horizontal&&e.left?"end":"start"}),F.transition().ease(r.ease).duration(r.duration).attr("startOffset",R).style("fill",P)}},{"../../components/color":570,"../../components/drawing":595,"../../lib":696,"../../lib/gup":693,"./constants":1037,"@plotly/d3-sankey":46,d3:148,"d3-force":144,tinycolor2:514}],1042:[function(e,t,n){"use strict";var r=e("../../lib");t.exports=function(e,t){for(var n=0;n<e.length;n++)e[n].i=n;r.mergeArray(t.text,e,"tx"),r.mergeArray(t.hovertext,e,"htx"),r.mergeArray(t.customdata,e,"data"),r.mergeArray(t.textposition,e,"tp"),t.textfont&&(r.mergeArray(t.textfont.size,e,"ts"),r.mergeArray(t.textfont.color,e,"tc"),r.mergeArray(t.textfont.family,e,"tf"));var a=t.marker;if(a){r.mergeArray(a.size,e,"ms"),r.mergeArray(a.opacity,e,"mo"),r.mergeArray(a.symbol,e,"mx"),r.mergeArray(a.color,e,"mc");var i=a.line;a.line&&(r.mergeArray(i.color,e,"mlc"),r.mergeArray(i.width,e,"mlw"));var o=a.gradient;o&&"none"!==o.type&&(r.mergeArray(o.type,e,"mgt"),r.mergeArray(o.color,e,"mgc"))}}},{"../../lib":696}],1043:[function(e,t,n){"use strict";var r=e("../../components/colorscale/attributes"),a=e("../../components/colorbar/attributes"),i=e("../../plots/font_attributes"),o=e("../../components/drawing/attributes").dash,s=e("../../components/drawing"),l=(e("./constants"),e("../../lib/extend").extendFlat);t.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dy:{valType:"number",dflt:1,editType:"calc"},stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:l({},o,{editType:"style"}),simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style"},marker:l({symbol:{valType:"enumerated",values:s.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style"},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc"},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},colorbar:a,line:l({width:{valType:"number",min:0,arrayOk:!0,editType:"style"},editType:"calc"},r("marker.line")),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},r("marker")),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:i({editType:"calc",colorEditType:"style",arrayOk:!0}),r:{valType:"data_array",editType:"calc"},t:{valType:"data_array",editType:"calc"}}},{"../../components/colorbar/attributes":571,"../../components/colorscale/attributes":577,"../../components/drawing":595,"../../components/drawing/attributes":594,"../../lib/extend":685,"../../plots/font_attributes":771,"./constants":1047}],1044:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),a=e("../../lib"),i=e("../../plots/cartesian/axes"),o=e("../../constants/numerical").BADNUM,s=e("./subtypes"),l=e("./colorscale_calc"),u=e("./arrays_to_calcdata"),c=e("./calc_selection");function f(e,t,n,r,a,o,l){var u=t._length,c=e._fullLayout,f=n._id,d=r._id,p=c._firstScatter[h(t)]===t.uid,v=(m(t,c,n,r)||{}).orientation,g=t.fill;n._minDtick=0,r._minDtick=0;var y={padded:!0},b={padded:!0};l&&(y.ppad=b.ppad=l);var x=u<2||a[0]!==a[u-1]||o[0]!==o[u-1];x&&("tozerox"===g||"tonextx"===g&&(p||"h"===v))?y.tozero=!0:(t.error_y||{}).visible||"tonexty"!==g&&"tozeroy"!==g&&(s.hasMarkers(t)||s.hasText(t))||(y.padded=!1,y.ppad=0),x&&("tozeroy"===g||"tonexty"===g&&(p||"v"===v))?b.tozero=!0:"tonextx"!==g&&"tozerox"!==g||(b.padded=!1),f&&(t._extremes[f]=i.findExtremes(n,a,y)),d&&(t._extremes[d]=i.findExtremes(r,o,b))}function d(e,t){if(s.hasMarkers(e)){var n,r=e.marker,o=1.6*(e.marker.sizeref||1);if(n="area"===e.marker.sizemode?function(e){return Math.max(Math.sqrt((e||0)/o),3)}:function(e){return Math.max((e||0)/o,3)},a.isArrayOrTypedArray(r.size)){var l={type:"linear"};i.setConvert(l);for(var u=l.makeCalcdata(e.marker,"size"),c=new Array(t),f=0;f<t;f++)c[f]=n(u[f]);return c}return n(r.size)}}function p(e,t){var n=h(t),r=e._firstScatter;r[n]||(r[n]=t.uid)}function h(e){var t=e.stackgroup;return e.xaxis+e.yaxis+e.type+(t?"-"+t:"")}function m(e,t,n,r){var a=e.stackgroup;if(a){var i=t._scatterStackOpts[n._id+r._id][a],o="v"===i.orientation?r:n;return"linear"===o.type||"log"===o.type?i:void 0}}t.exports={calc:function(e,t){var n,s,h,v,g,y,b=e._fullLayout,x=i.getFromId(e,t.xaxis||"x"),_=i.getFromId(e,t.yaxis||"y"),w=x.makeCalcdata(t,"x"),T=_.makeCalcdata(t,"y"),k=t._length,C=new Array(k),E=t.ids,M=m(t,b,x,_),A=!1;p(b,t);var S,O="x",P="y";if(M)M.traceIndices.push(t.index),(n="v"===M.orientation)?(P="s",S="x"):(O="s",S="y"),g="interpolate"===M.stackgaps;else{var R=d(t,k);f(e,t,x,_,w,T,R)}for(s=0;s<k;s++){var L=C[s]={},D=r(w[s]),I=r(T[s]);D&&I?(L[O]=w[s],L[P]=T[s]):M&&(n?D:I)?(L[S]=n?w[s]:T[s],L.gap=!0,g?(L.s=o,A=!0):L.s=0):L[O]=L[P]=o,E&&(L.id=String(E[s]))}if(u(C,t),l(t),c(C,t),M){for(s=0;s<C.length;)C[s][S]===o?C.splice(s,1):s++;if(a.sort(C,function(e,t){return e[S]-t[S]||e.i-t.i}),A){for(s=0;s<C.length-1&&C[s].gap;)s++;for((y=C[s].s)||(y=C[s].s=0),h=0;h<s;h++)C[h].s=y;for(v=C.length-1;v>s&&C[v].gap;)v--;for(y=C[v].s,h=C.length-1;h>v;h--)C[h].s=y;for(;s<v;)if(C[++s].gap){for(h=s+1;C[h].gap;)h++;for(var z=C[s-1][S],j=C[s-1].s,N=(C[h].s-j)/(C[h][S]-z);s<h;)C[s].s=j+(C[s][S]-z)*N,s++}}}return C},calcMarkerSize:d,calcAxisExpansion:f,setFirstScatter:p,getStackOpts:m}},{"../../constants/numerical":673,"../../lib":696,"../../plots/cartesian/axes":744,"./arrays_to_calcdata":1042,"./calc_selection":1045,"./colorscale_calc":1046,"./subtypes":1067,"fast-isnumeric":214}],1045:[function(e,t,n){"use strict";var r=e("../../lib");t.exports=function(e,t){r.isArrayOrTypedArray(t.selectedpoints)&&r.tagSelected(e,t)}},{"../../lib":696}],1046:[function(e,t,n){"use strict";var r=e("../../components/colorscale/has_colorscale"),a=e("../../components/colorscale/calc"),i=e("./subtypes");t.exports=function(e){i.hasLines(e)&&r(e,"line")&&a(e,e.line.color,"line","c"),i.hasMarkers(e)&&(r(e,"marker")&&a(e,e.marker.color,"marker","c"),r(e,"marker.line")&&a(e,e.marker.line.color,"marker.line","c"))}},{"../../components/colorscale/calc":578,"../../components/colorscale/has_colorscale":584,"./subtypes":1067}],1047:[function(e,t,n){"use strict";t.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20}},{}],1048:[function(e,t,n){"use strict";var r=e("./calc");function a(e,t,n,r,a,i,o){a[r]=!0;var s={i:null,gap:!0,s:0};if(s[o]=n,e.splice(t,0,s),t&&n===e[t-1][o]){var l=e[t-1];s.s=l.s,s.i=l.i,s.gap=l.gap}else i&&(s.s=function(e,t,n,r){var a=e[t-1],i=e[t+1];return i?a?a.s+(i.s-a.s)*(n-a[r])/(i[r]-a[r]):i.s:a.s}(e,t,n,o));t||(e[0].t=e[1].t,e[0].trace=e[1].trace,delete e[1].t,delete e[1].trace)}t.exports=function(e,t){var n=t.xaxis,i=t.yaxis,o=n._id+i._id,s=e._fullLayout._scatterStackOpts[o];if(s){var l,u,c,f,d,p,h,m,v,g,y,b,x,_,w,T=e.calcdata;for(var k in s){var C=(g=s[k]).traceIndices;if(C.length){for(y="interpolate"===g.stackgaps,b=g.groupnorm,"v"===g.orientation?(x="x",_="y"):(x="y",_="x"),w=new Array(C.length),l=0;l<w.length;l++)w[l]=!1;p=T[C[0]];var E=new Array(p.length);for(l=0;l<p.length;l++)E[l]=p[l][x];for(l=1;l<C.length;l++){for(d=T[C[l]],u=c=0;u<d.length;u++){for(h=d[u][x];h>E[c]&&c<E.length;c++)a(d,u,E[c],l,w,y,x),u++;if(h!==E[c]){for(f=0;f<l;f++)a(T[C[f]],c,h,f,w,y,x);E.splice(c,0,h)}c++}for(;c<E.length;c++)a(d,u,E[c],l,w,y,x),u++}var M=E.length;for(u=0;u<p.length;u++){for(m=p[u][_]=p[u].s,l=1;l<C.length;l++)(d=T[C[l]])[0].trace._rawLength=d[0].trace._length,d[0].trace._length=M,m+=d[u].s,d[u][_]=m;if(b)for(v=("fraction"===b?m:m/100)||1,l=0;l<C.length;l++){var A=T[C[l]][u];A[_]/=v,A.sNorm=A.s/v}}for(l=0;l<C.length;l++){var S=(d=T[C[l]])[0].trace,O=r.calcMarkerSize(S,S._rawLength),P=Array.isArray(O);if(O&&w[l]||P){var R=O;for(O=new Array(M),u=0;u<M;u++)O[u]=d[u].gap?0:P?R[d[u].i]:R}var L=new Array(M),D=new Array(M);for(u=0;u<M;u++)L[u]=d[u].x,D[u]=d[u].y;r.calcAxisExpansion(e,S,n,i,L,D,O),d[0].t.orientation=g.orientation}}}}}},{"./calc":1044}],1049:[function(e,t,n){"use strict";t.exports=function(e){for(var t=0;t<e.length;t++){var n=e[t];if("scatter"===n.type){var r=n.fill;if("none"!==r&&"toself"!==r&&(n.opacity=void 0,"tonexty"===r||"tonextx"===r))for(var a=t-1;a>=0;a--){var i=e[a];if("scatter"===i.type&&i.xaxis===n.xaxis&&i.yaxis===n.yaxis){i.opacity=void 0;break}}}}}},{}],1050:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("../../registry"),i=e("./attributes"),o=e("./constants"),s=e("./subtypes"),l=e("./xy_defaults"),u=e("./stack_defaults"),c=e("./marker_defaults"),f=e("./line_defaults"),d=e("./line_shape_defaults"),p=e("./text_defaults"),h=e("./fillcolor_defaults");t.exports=function(e,t,n,m){function v(n,a){return r.coerce(e,t,i,n,a)}var g=l(e,t,m,v);if(g||(t.visible=!1),t.visible){var y=u(e,t,m,v),b=!y&&g<o.PTS_LINESONLY?"lines+markers":"lines";v("text"),v("hovertext"),v("mode",b),s.hasLines(t)&&(f(e,t,n,m,v),d(e,t,v),v("connectgaps"),v("line.simplify")),s.hasMarkers(t)&&c(e,t,n,m,v,{gradient:!0}),s.hasText(t)&&p(e,t,m,v);var x=[];(s.hasMarkers(t)||s.hasText(t))&&(v("cliponaxis"),v("marker.maxdisplayed"),x.push("points")),v("fill",y?y.fillDflt:"none"),"none"!==t.fill&&(h(e,t,n,v),s.hasLines(t)||d(e,t,v)),"tonext"!==t.fill&&"toself"!==t.fill||x.push("fills"),v("hoveron",x.join("+")||"points");var _=a.getComponentMethod("errorbars","supplyDefaults");_(e,t,n,{axis:"y"}),_(e,t,n,{axis:"x",inherit:"y"}),r.coerceSelectionMarkerOpacity(t,v)}}},{"../../lib":696,"../../registry":827,"./attributes":1043,"./constants":1047,"./fillcolor_defaults":1052,"./line_defaults":1056,"./line_shape_defaults":1058,"./marker_defaults":1062,"./stack_defaults":1065,"./subtypes":1067,"./text_defaults":1068,"./xy_defaults":1069}],1051:[function(e,t,n){"use strict";var r=e("../../lib");function a(e){return e||0===e}t.exports=function(e,t,n){var i=Array.isArray(n)?function(e){n.push(e)}:function(e){n.text=e},o=r.extractOption(e,t,"htx","hovertext");if(a(o))return i(o);var s=r.extractOption(e,t,"tx","text");return a(s)?i(s):void 0}},{"../../lib":696}],1052:[function(e,t,n){"use strict";var r=e("../../components/color"),a=e("../../lib").isArrayOrTypedArray;t.exports=function(e,t,n,i){var o=!1;if(t.marker){var s=t.marker.color,l=(t.marker.line||{}).color;s&&!a(s)?o=s:l&&!a(l)&&(o=l)}i("fillcolor",r.addOpacity((t.line||{}).color||o||n,.5))}},{"../../components/color":570,"../../lib":696}],1053:[function(e,t,n){"use strict";var r=e("../../components/color"),a=e("./subtypes");t.exports=function(e,t){var n,i;if("lines"===e.mode)return(n=e.line.color)&&r.opacity(n)?n:e.fillcolor;if("none"===e.mode)return e.fill?e.fillcolor:"";var o=t.mcc||(e.marker||{}).color,s=t.mlcc||((e.marker||{}).line||{}).color;return(i=o&&r.opacity(o)?o:s&&r.opacity(s)&&(t.mlw||((e.marker||{}).line||{}).width)?s:"")?r.opacity(i)<.3?r.addOpacity(i,.3):i:(n=(e.line||{}).color)&&r.opacity(n)&&a.hasLines(e)&&e.line.width?n:e.fillcolor}},{"../../components/color":570,"./subtypes":1067}],1054:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("../../components/fx"),i=e("../../registry"),o=e("./get_trace_color"),s=e("../../components/color"),l=e("./fill_hover_text");t.exports=function(e,t,n,u){var c=e.cd,f=c[0].trace,d=e.xa,p=e.ya,h=d.c2p(t),m=p.c2p(n),v=[h,m],g=f.hoveron||"",y=-1!==f.mode.indexOf("markers")?3:.5;if(-1!==g.indexOf("points")){var b=function(e){var t=Math.max(y,e.mrc||0),n=d.c2p(e.x)-h,r=p.c2p(e.y)-m;return Math.max(Math.sqrt(n*n+r*r)-t,1-y/t)},x=a.getDistanceFunction(u,function(e){var t=Math.max(3,e.mrc||0),n=1-1/t,r=Math.abs(d.c2p(e.x)-h);return r<t?n*r/t:r-t+n},function(e){var t=Math.max(3,e.mrc||0),n=1-1/t,r=Math.abs(p.c2p(e.y)-m);return r<t?n*r/t:r-t+n},b);if(a.getClosest(c,x,e),!1!==e.index){var _=c[e.index],w=d.c2p(_.x,!0),T=p.c2p(_.y,!0),k=_.mrc||1;e.index=_.i;var C=c[0].t.orientation,E=C&&(_.sNorm||_.s),M="h"===C?E:_.x,A="v"===C?E:_.y;return r.extendFlat(e,{color:o(f,_),x0:w-k,x1:w+k,xLabelVal:M,y0:T-k,y1:T+k,yLabelVal:A,spikeDistance:b(_)}),l(_,f,e),i.getComponentMethod("errorbars","hoverInfo")(_,f,e),[e]}}if(-1!==g.indexOf("fills")&&f._polygons){var S,O,P,R,L,D,I,z,j,N=f._polygons,F=[],B=!1,V=1/0,U=-1/0,G=1/0,H=-1/0;for(S=0;S<N.length;S++)(P=N[S]).contains(v)&&(B=!B,F.push(P),G=Math.min(G,P.ymin),H=Math.max(H,P.ymax));if(B){G=Math.max(G,0),H=Math.min(H,p._length);var W=(G+H)/2;for(S=0;S<F.length;S++)for(R=F[S].pts,O=1;O<R.length;O++)z=R[O-1][1],j=R[O][1],z>W!=j>=W&&(D=R[O-1][0],I=R[O][0],j-z&&(L=D+(I-D)*(W-z)/(j-z),V=Math.min(V,L),U=Math.max(U,L)));V=Math.max(V,0),U=Math.min(U,d._length);var q=s.defaultLine;return s.opacity(f.fillcolor)?q=f.fillcolor:s.opacity((f.line||{}).color)&&(q=f.line.color),r.extendFlat(e,{distance:e.maxHoverDistance,x0:V,x1:U,y0:W,y1:W,color:q}),delete e.index,f.text&&!Array.isArray(f.text)?e.text=String(f.text):e.text=f.name,[e]}}}},{"../../components/color":570,"../../components/fx":612,"../../lib":696,"../../registry":827,"./fill_hover_text":1051,"./get_trace_color":1053}],1055:[function(e,t,n){"use strict";var r={},a=e("./subtypes");r.hasLines=a.hasLines,r.hasMarkers=a.hasMarkers,r.hasText=a.hasText,r.isBubble=a.isBubble,r.attributes=e("./attributes"),r.supplyDefaults=e("./defaults"),r.crossTraceDefaults=e("./cross_trace_defaults"),r.calc=e("./calc").calc,r.crossTraceCalc=e("./cross_trace_calc"),r.arraysToCalcdata=e("./arrays_to_calcdata"),r.plot=e("./plot"),r.colorbar=e("./marker_colorbar"),r.style=e("./style").style,r.styleOnSelect=e("./style").styleOnSelect,r.hoverPoints=e("./hover"),r.selectPoints=e("./select"),r.animatable=!0,r.moduleType="trace",r.name="scatter",r.basePlotModule=e("../../plots/cartesian"),r.categories=["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],r.meta={},t.exports=r},{"../../plots/cartesian":756,"./arrays_to_calcdata":1042,"./attributes":1043,"./calc":1044,"./cross_trace_calc":1048,"./cross_trace_defaults":1049,"./defaults":1050,"./hover":1054,"./marker_colorbar":1061,"./plot":1063,"./select":1064,"./style":1066,"./subtypes":1067}],1056:[function(e,t,n){"use strict";var r=e("../../lib").isArrayOrTypedArray,a=e("../../components/colorscale/has_colorscale"),i=e("../../components/colorscale/defaults");t.exports=function(e,t,n,o,s,l){var u=(e.marker||{}).color;if(s("line.color",n),a(e,"line"))i(e,t,o,s,{prefix:"line.",cLetter:"c",noScale:!0});else{var c=!r(u)&&u||n;s("line.color",c)}s("line.width"),(l||{}).noDash||s("line.dash")}},{"../../components/colorscale/defaults":580,"../../components/colorscale/has_colorscale":584,"../../lib":696}],1057:[function(e,t,n){"use strict";var r=e("../../constants/numerical"),a=r.BADNUM,i=r.LOG_CLIP,o=i+.5,s=i-.5,l=e("../../lib"),u=l.segmentsIntersect,c=l.constrain,f=e("./constants");t.exports=function(e,t){var n,r,i,d,p,h,m,v,g,y,b,x,_,w,T,k,C,E,M=t.xaxis,A=t.yaxis,S="log"===M.type,O="log"===A.type,P=M._length,R=A._length,L=t.connectGaps,D=t.baseTolerance,I=t.shape,z="linear"===I,j=[],N=f.minTolerance,F=new Array(e.length),B=0;function V(t){var n=e[t];if(!n)return!1;var r=M.c2p(n.x),i=A.c2p(n.y);if(r===a){if(S&&(r=M.c2p(n.x,!0)),r===a)return!1;O&&i===a&&(r*=Math.abs(M._m*R*(M._m>0?o:s)/(A._m*P*(A._m>0?o:s)))),r*=1e3}if(i===a){if(O&&(i=A.c2p(n.y,!0)),i===a)return!1;i*=1e3}return[r,i]}function U(e,t,n,r){var a=n-e,i=r-t,o=.5-e,s=.5-t,l=a*a+i*i,u=a*o+i*s;if(u>0&&u<l){var c=o*i-s*a;if(c*c<l)return!0}}function G(e,t){var n=e[0]/P,r=e[1]/R,a=Math.max(0,-n,n-1,-r,r-1);return a&&void 0!==C&&U(n,r,C,E)&&(a=0),a&&t&&U(n,r,t[0]/P,t[1]/R)&&(a=0),(1+f.toleranceGrowth*a)*D}function H(e,t){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)}var W,q,Y,X,Z,$,K,J=f.maxScreensAway,Q=-P*J,ee=P*(1+J),te=-R*J,ne=R*(1+J),re=[[Q,te,ee,te],[ee,te,ee,ne],[ee,ne,Q,ne],[Q,ne,Q,te]];function ae(e){if(e[0]<Q||e[0]>ee||e[1]<te||e[1]>ne)return[c(e[0],Q,ee),c(e[1],te,ne)]}function ie(e,t){return e[0]===t[0]&&(e[0]===Q||e[0]===ee)||e[1]===t[1]&&(e[1]===te||e[1]===ne)||void 0}function oe(e,t,n){return function(r,a){var i=ae(r),o=ae(a),s=[];if(i&&o&&ie(i,o))return s;i&&s.push(i),o&&s.push(o);var u=2*l.constrain((r[e]+a[e])/2,t,n)-((i||r)[e]+(o||a)[e]);return u&&((i&&o?u>0==i[e]>o[e]?i:o:i||o)[e]+=u),s}}function se(e){var t=e[0],n=e[1],r=t===F[B-1][0],a=n===F[B-1][1];if(!r||!a)if(B>1){var i=t===F[B-2][0],o=n===F[B-2][1];r&&(t===Q||t===ee)&&i?o?B--:F[B-1]=e:a&&(n===te||n===ne)&&o?i?B--:F[B-1]=e:F[B++]=e}else F[B++]=e}function le(e){F[B-1][0]!==e[0]&&F[B-1][1]!==e[1]&&se([Y,X]),se(e),Z=null,Y=X=0}function ue(e){if(C=e[0]/P,E=e[1]/R,W=e[0]<Q?Q:e[0]>ee?ee:0,q=e[1]<te?te:e[1]>ne?ne:0,W||q){if(B)if(Z){var t=K(Z,e);t.length>1&&(le(t[0]),F[B++]=t[1])}else $=K(F[B-1],e)[0],F[B++]=$;else F[B++]=[W||e[0],q||e[1]];var n=F[B-1];W&&q&&(n[0]!==W||n[1]!==q)?(Z&&(Y!==W&&X!==q?se(Y&&X?function(e,t){var n=t[0]-e[0],r=(t[1]-e[1])/n;return(e[1]*t[0]-t[1]*e[0])/n>0?[r>0?Q:ee,ne]:[r>0?ee:Q,te]}(Z,e):[Y||W,X||q]):Y&&X&&se([Y,X])),se([W,q])):Y-W&&X-q&&se([W||Y,q||X]),Z=e,Y=W,X=q}else Z&&le(K(Z,e)[0]),F[B++]=e}for("linear"===I||"spline"===I?K=function(e,t){for(var n=[],r=0,a=0;a<4;a++){var i=re[a],o=u(e[0],e[1],t[0],t[1],i[0],i[1],i[2],i[3]);o&&(!r||Math.abs(o.x-n[0][0])>1||Math.abs(o.y-n[0][1])>1)&&(o=[o.x,o.y],r&&H(o,e)<H(n[0],e)?n.unshift(o):n.push(o),r++)}return n}:"hv"===I||"vh"===I?K=function(e,t){var n=[],r=ae(e),a=ae(t);return r&&a&&ie(r,a)?n:(r&&n.push(r),a&&n.push(a),n)}:"hvh"===I?K=oe(0,Q,ee):"vhv"===I&&(K=oe(1,te,ne)),n=0;n<e.length;n++)if(r=V(n)){for(B=0,Z=null,ue(r),n++;n<e.length;n++){if(!(d=V(n))){if(L)continue;break}if(z&&t.simplify){var ce=V(n+1);if(!((y=H(d,r))<G(d,ce)*N)){for(v=[(d[0]-r[0])/y,(d[1]-r[1])/y],p=r,b=y,x=w=T=0,m=!1,i=d,n++;n<e.length;n++){if(h=ce,ce=V(n+1),!h){if(L)continue;break}if(g=[h[0]-r[0],h[1]-r[1]],k=g[0]*v[1]-g[1]*v[0],w=Math.min(w,k),(T=Math.max(T,k))-w>G(h,ce))break;i=h,(_=g[0]*v[0]+g[1]*v[1])>b?(b=_,d=h,m=!1):_<x&&(x=_,p=h,m=!0)}if(m?(ue(d),i!==p&&ue(p)):(p!==r&&ue(p),i!==d&&ue(d)),ue(i),n>=e.length||!h)break;ue(h),r=h}}else ue(d)}Z&&se([Y||Z[0],X||Z[1]]),j.push(F.slice(0,B))}return j}},{"../../constants/numerical":673,"../../lib":696,"./constants":1047}],1058:[function(e,t,n){"use strict";t.exports=function(e,t,n){var r=n("line.shape");"spline"===r&&n("line.smoothing")}},{}],1059:[function(e,t,n){"use strict";var r={tonextx:1,tonexty:1,tonext:1};t.exports=function(e,t,n){var a,i,o,s,l,u={},c=!1,f=-1,d=0,p=-1;for(i=0;i<n.length;i++)a=n[i][0].trace,(o=a.stackgroup||"")?o in u?l=u[o]:(l=u[o]=d,d++):a.fill in r&&p>=0?l=p:(l=p=d,d++),l<f&&(c=!0),a._groupIndex=f=l;var h=n.slice();c&&h.sort(function(e,t){var n=e[0].trace,r=t[0].trace;return n._groupIndex-r._groupIndex||n.index-r.index});var m={};for(i=0;i<h.length;i++)a=h[i][0].trace,o=a.stackgroup||"",!0===a.visible?(a._nexttrace=null,a.fill in r&&(s=m[o],a._prevtrace=s||null,s&&(s._nexttrace=a)),a._ownfill=a.fill&&("tozero"===a.fill.substr(0,6)||"toself"===a.fill||"to"===a.fill.substr(0,2)&&!a._prevtrace),m[o]=a):a._prevtrace=a._nexttrace=a._ownfill=null;return h}},{}],1060:[function(e,t,n){"use strict";var r=e("fast-isnumeric");t.exports=function(e){var t=e.marker,n=t.sizeref||1,a=t.sizemin||0,i="area"===t.sizemode?function(e){return Math.sqrt(e/n)}:function(e){return e/n};return function(e){var t=i(e/2);return r(t)&&t>0?Math.max(t,a):0}}},{"fast-isnumeric":214}],1061:[function(e,t,n){"use strict";t.exports={container:"marker",min:"cmin",max:"cmax"}},{}],1062:[function(e,t,n){"use strict";var r=e("../../components/color"),a=e("../../components/colorscale/has_colorscale"),i=e("../../components/colorscale/defaults"),o=e("./subtypes");t.exports=function(e,t,n,s,l,u){var c,f=o.isBubble(e),d=(e.line||{}).color;if(u=u||{},d&&(n=d),l("marker.symbol"),l("marker.opacity",f?.7:1),l("marker.size"),l("marker.color",n),a(e,"marker")&&i(e,t,s,l,{prefix:"marker.",cLetter:"c"}),u.noSelect||(l("selected.marker.color"),l("unselected.marker.color"),l("selected.marker.size"),l("unselected.marker.size")),u.noLine||(c=d&&!Array.isArray(d)&&t.marker.color!==d?d:f?r.background:r.defaultLine,l("marker.line.color",c),a(e,"marker.line")&&i(e,t,s,l,{prefix:"marker.line.",cLetter:"c"}),l("marker.line.width",f?1:0)),f&&(l("marker.sizeref"),l("marker.sizemin"),l("marker.sizemode")),u.gradient){var p=l("marker.gradient.type");"none"!==p&&l("marker.gradient.color")}}},{"../../components/color":570,"../../components/colorscale/defaults":580,"../../components/colorscale/has_colorscale":584,"./subtypes":1067}],1063:[function(e,t,n){"use strict";var r=e("d3"),a=e("../../registry"),i=e("../../lib"),o=i.ensureSingle,s=i.identity,l=e("../../components/drawing"),u=e("./subtypes"),c=e("./line_points"),f=e("./link_traces"),d=e("../../lib/polygon").tester;function p(e,t,n,f,p,h,m){var v;!function(e,t,n,a,o){var s=n.xaxis,l=n.yaxis,c=r.extent(i.simpleMap(s.range,s.r2c)),f=r.extent(i.simpleMap(l.range,l.r2c)),d=a[0].trace;if(u.hasMarkers(d)){var p=d.marker.maxdisplayed;if(0!==p){var h=a.filter(function(e){return e.x>=c[0]&&e.x<=c[1]&&e.y>=f[0]&&e.y<=f[1]}),m=Math.ceil(h.length/p),v=0;o.forEach(function(e,n){var r=e[0].trace;u.hasMarkers(r)&&r.marker.maxdisplayed>0&&n<t&&v++});var g=Math.round(v*m/3+Math.floor(v/3)*m/7.1);a.forEach(function(e){delete e.vis}),h.forEach(function(e,t){0===Math.round((t+g)%m)&&(e.vis=!0)})}}}(0,t,n,f,p);var g=!!m&&m.duration>0;function y(e){return g?e.transition():e}var b=n.xaxis,x=n.yaxis,_=f[0].trace,w=_.line,T=r.select(h),k=o(T,"g","errorbars"),C=o(T,"g","lines"),E=o(T,"g","points"),M=o(T,"g","text");if(a.getComponentMethod("errorbars","plot")(k,n,m),!0===_.visible){var A,S;y(T).style("opacity",_.opacity);var O=_.fill.charAt(_.fill.length-1);"x"!==O&&"y"!==O&&(O=""),n.isRangePlot||(f[0].node3=T);var P="",R=[],L=_._prevtrace;L&&(P=L._prevRevpath||"",S=L._nextFill,R=L._polygons);var D,I,z,j,N,F,B,V,U,G="",H="",W=[],q=i.noop;if(A=_._ownFill,u.hasLines(_)||"none"!==_.fill){for(S&&S.datum(f),-1!==["hv","vh","hvh","vhv"].indexOf(w.shape)?(z=l.steps(w.shape),j=l.steps(w.shape.split("").reverse().join(""))):z=j="spline"===w.shape?function(e){var t=e[e.length-1];return e.length>1&&e[0][0]===t[0]&&e[0][1]===t[1]?l.smoothclosed(e.slice(1),w.smoothing):l.smoothopen(e,w.smoothing)}:function(e){return"M"+e.join("L")},N=function(e){return j(e.reverse())},W=c(f,{xaxis:b,yaxis:x,connectGaps:_.connectgaps,baseTolerance:Math.max(w.width||1,3)/4,shape:w.shape,simplify:w.simplify}),U=_._polygons=new Array(W.length),v=0;v<W.length;v++)_._polygons[v]=d(W[v]);W.length&&(F=W[0][0],B=W[W.length-1],V=B[B.length-1]),q=function(e){return function(t){if(D=z(t),I=N(t),G?O?(G+="L"+D.substr(1),H=I+"L"+H.substr(1)):(G+="Z"+D,H=I+"Z"+H):(G=D,H=I),u.hasLines(_)&&t.length>1){var n=r.select(this);if(n.datum(f),e)y(n.style("opacity",0).attr("d",D).call(l.lineGroupStyle)).style("opacity",1);else{var a=y(n);a.attr("d",D),l.singleLineStyle(f,a)}}}}}var Y=C.selectAll(".js-line").data(W);y(Y.exit()).style("opacity",0).remove(),Y.each(q(!1)),Y.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(l.lineGroupStyle).each(q(!0)),l.setClipUrl(Y,n.layerClipId),W.length?(A?(A.datum(f),F&&V&&(O?("y"===O?F[1]=V[1]=x.c2p(0,!0):"x"===O&&(F[0]=V[0]=b.c2p(0,!0)),y(A).attr("d","M"+V+"L"+F+"L"+G.substr(1)).call(l.singleFillStyle)):y(A).attr("d",G+"Z").call(l.singleFillStyle))):S&&("tonext"===_.fill.substr(0,6)&&G&&P?("tonext"===_.fill?y(S).attr("d",G+"Z"+P+"Z").call(l.singleFillStyle):y(S).attr("d",G+"L"+P.substr(1)+"Z").call(l.singleFillStyle),_._polygons=_._polygons.concat(R)):($(S),_._polygons=null)),_._prevRevpath=H,_._prevPolygons=U):(A?$(A):S&&$(S),_._polygons=_._prevRevpath=_._prevPolygons=null),E.datum(f),M.datum(f),function(t,a,i){var o,c,f=i[0].trace,d=u.hasMarkers(f),p=u.hasText(f),h=te(f),m=ne,v=ne;if(d||p){var _=s,w=f.stackgroup,T=w&&"infer zero"===e._fullLayout._scatterStackOpts[b._id+x._id][w].stackgaps;f.marker.maxdisplayed||f._needsCull?_=T?J:K:w&&!T&&(_=Q),d&&(m=_),p&&(v=_)}c=t.selectAll("path.point");var k,C=(o=c.data(m,h)).enter().append("path").classed("point",!0);g&&C.call(l.pointStyle,f,e).call(l.translatePoints,b,x).style("opacity",0).transition().style("opacity",1),o.order(),d&&(k=l.makePointStyleFns(f)),o.each(function(t){var a=r.select(this),i=y(a);l.translatePoint(t,i,b,x)?(l.singlePointStyle(t,i,f,k,e),n.layerClipId&&l.hideOutsideRangePoint(t,i,b,x,f.xcalendar,f.ycalendar),f.customdata&&a.classed("plotly-customdata",null!==t.data&&void 0!==t.data)):i.remove()}),g?o.exit().transition().style("opacity",0).remove():o.exit().remove(),c=a.selectAll("g"),(o=c.data(v,h)).enter().append("g").classed("textpoint",!0).append("text"),o.order(),o.each(function(e){var t=r.select(this),a=y(t.select("text"));l.translatePoint(e,a,b,x)?n.layerClipId&&l.hideOutsideRangePoint(e,t,b,x,f.xcalendar,f.ycalendar):t.remove()}),o.selectAll("text").call(l.textPointStyle,f,e).each(function(e){var t=b.c2p(e.x),n=x.c2p(e.y);r.select(this).selectAll("tspan.line").each(function(){y(r.select(this)).attr({x:t,y:n})})}),o.exit().remove()}(E,M,f);var X=!1===_.cliponaxis,Z=X?null:n.layerClipId;l.setClipUrl(E,Z),l.setClipUrl(M,Z)}function $(e){y(e).attr("d","M0,0Z")}function K(e){return e.filter(function(e){return!e.gap&&e.vis})}function J(e){return e.filter(function(e){return e.vis})}function Q(e){return e.filter(function(e){return!e.gap})}function ee(e){return e.id}function te(e){if(e.ids)return ee}function ne(){return!1}}t.exports=function(e,t,n,a,i,u){var c,d,h=!i,m=!!i&&i.duration>0,v=f(e,t,n);if((c=a.selectAll("g.trace").data(v,function(e){return e[0].trace.uid})).enter().append("g").attr("class",function(e){return"trace scatter trace"+e[0].trace.uid}).style("stroke-miterlimit",2),c.order(),function(e,t,n){t.each(function(e){var t=o(r.select(this),"g","fills");l.setClipUrl(t,n.layerClipId);var a=e[0].trace,i=[];a._ownfill&&i.push("_ownFill"),a._nexttrace&&i.push("_nextFill");var u=t.selectAll("g").data(i,s);u.enter().append("g"),u.exit().each(function(e){a[e]=null}).remove(),u.order().each(function(e){a[e]=o(r.select(this),"path","js-fill")})})}(0,c,t),m){u&&(d=u());var g=r.transition().duration(i.duration).ease(i.easing).each("end",function(){d&&d()}).each("interrupt",function(){d&&d()});g.each(function(){a.selectAll("g.trace").each(function(n,r){p(e,r,t,n,v,this,i)})})}else c.each(function(n,r){p(e,r,t,n,v,this,i)});h&&c.exit().remove(),a.selectAll("path:not([d])").remove()}},{"../../components/drawing":595,"../../lib":696,"../../lib/polygon":708,"../../registry":827,"./line_points":1057,"./link_traces":1059,"./subtypes":1067,d3:148}],1064:[function(e,t,n){"use strict";var r=e("./subtypes");t.exports=function(e,t){var n,a,i,o,s=e.cd,l=e.xaxis,u=e.yaxis,c=[],f=s[0].trace,d=!r.hasMarkers(f)&&!r.hasText(f);if(d)return[];if(!1===t)for(n=0;n<s.length;n++)s[n].selected=0;else for(n=0;n<s.length;n++)a=s[n],i=l.c2p(a.x),o=u.c2p(a.y),null!==a.i&&t.contains([i,o],!1,n,e)?(c.push({pointNumber:a.i,x:l.c2d(a.x),y:u.c2d(a.y)}),a.selected=1):a.selected=0;return c}},{"./subtypes":1067}],1065:[function(e,t,n){"use strict";var r=["orientation","groupnorm","stackgaps"];t.exports=function(e,t,n,a){var i=n._scatterStackOpts,o=a("stackgroup");if(o){var s=t.xaxis+t.yaxis,l=i[s];l||(l=i[s]={});var u=l[o],c=!1;u?u.traces.push(t):(u=l[o]={traceIndices:[],traces:[t]},c=!0);for(var f={orientation:t.x&&!t.y?"h":"v"},d=0;d<r.length;d++){var p=r[d],h=p+"Found";if(!u[h]){var m=void 0!==e[p],v="orientation"===p;if((m||c)&&(u[p]=a(p,f[p]),v&&(u.fillDflt="h"===u[p]?"tonextx":"tonexty"),m&&(u[h]=!0,!c&&(delete u.traces[0][p],v))))for(var g=0;g<u.traces.length-1;g++){var y=u.traces[g];y._input.fill!==y.fill&&(y.fill=u.fillDflt)}}}return u}}},{}],1066:[function(e,t,n){"use strict";var r=e("d3"),a=e("../../components/drawing"),i=e("../../registry");function o(e,t,n){a.pointStyle(e.selectAll("path.point"),t,n)}function s(e,t,n){a.textPointStyle(e.selectAll("text"),t,n)}t.exports={style:function(e,t){var n=t?t[0].node3:r.select(e).selectAll("g.trace.scatter");n.style("opacity",function(e){return e[0].trace.opacity}),n.selectAll("g.points").each(function(t){var n=r.select(this),a=t.trace||t[0].trace;o(n,a,e)}),n.selectAll("g.text").each(function(t){var n=r.select(this),a=t.trace||t[0].trace;s(n,a,e)}),n.selectAll("g.trace path.js-line").call(a.lineGroupStyle),n.selectAll("g.trace path.js-fill").call(a.fillGroupStyle),i.getComponentMethod("errorbars","style")(n)},stylePoints:o,styleText:s,styleOnSelect:function(e,t){var n=t[0].node3,r=t[0].trace;r.selectedpoints?(a.selectedPointStyle(n.selectAll("path.point"),r),a.selectedTextStyle(n.selectAll("text"),r)):(o(n,r,e),s(n,r,e))}}},{"../../components/drawing":595,"../../registry":827,d3:148}],1067:[function(e,t,n){"use strict";var r=e("../../lib");t.exports={hasLines:function(e){return e.visible&&e.mode&&-1!==e.mode.indexOf("lines")},hasMarkers:function(e){return e.visible&&(e.mode&&-1!==e.mode.indexOf("markers")||"splom"===e.type)},hasText:function(e){return e.visible&&e.mode&&-1!==e.mode.indexOf("text")},isBubble:function(e){return r.isPlainObject(e.marker)&&r.isArrayOrTypedArray(e.marker.size)}}},{"../../lib":696}],1068:[function(e,t,n){"use strict";var r=e("../../lib");t.exports=function(e,t,n,a,i){i=i||{},a("textposition"),r.coerceFont(a,"textfont",n.font),i.noSelect||(a("selected.textfont.color"),a("unselected.textfont.color"))}},{"../../lib":696}],1069:[function(e,t,n){"use strict";var r=e("../../registry");t.exports=function(e,t,n,a){var i,o=a("x"),s=a("y"),l=r.getComponentMethod("calendars","handleTraceDefaults");if(l(e,t,["x","y"],n),o)s?i=Math.min(o.length,s.length):(i=o.length,a("y0"),a("dy"));else{if(!s)return 0;i=t.y.length,a("x0"),a("dx")}return t._length=i,i}},{"../../registry":827}],1070:[function(e,t,n){"use strict";var r=e("../scatter/attributes"),a=e("../../components/colorscale/attributes"),i=e("../../plots/attributes"),o=e("../../constants/gl3d_dashes"),s=e("../../constants/gl3d_markers"),l=e("../../lib/extend").extendFlat,u=e("../../plot_api/edit_types").overrideAll,c=r.line,f=r.marker,d=f.line,p=l({width:c.width,dash:{valType:"enumerated",values:Object.keys(o),dflt:"solid"}},a("line"));delete p.showscale,delete p.colorbar;var h=t.exports=u({x:r.x,y:r.y,z:{valType:"data_array"},text:l({},r.text,{}),hovertext:l({},r.hovertext,{}),mode:l({},r.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},y:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},z:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}},connectgaps:r.connectgaps,line:p,marker:l({symbol:{valType:"enumerated",values:Object.keys(s),dflt:"circle",arrayOk:!0},size:l({},f.size,{dflt:8}),sizeref:f.sizeref,sizemin:f.sizemin,sizemode:f.sizemode,opacity:l({},f.opacity,{arrayOk:!1}),colorbar:f.colorbar,line:l({width:l({},d.width,{arrayOk:!1})},a("marker.line"))},a("marker")),textposition:l({},r.textposition,{dflt:"top center",arrayOk:!1}),textfont:{color:r.textfont.color,size:r.textfont.size,family:l({},r.textfont.family,{arrayOk:!1})},hoverinfo:l({},i.hoverinfo)},"calc","nested");h.x.editType=h.y.editType=h.z.editType="calc+clearAxisTypes"},{"../../components/colorscale/attributes":577,"../../constants/gl3d_dashes":670,"../../constants/gl3d_markers":671,"../../lib/extend":685,"../../plot_api/edit_types":727,"../../plots/attributes":741,"../scatter/attributes":1043}],1071:[function(e,t,n){"use strict";var r=e("../scatter/arrays_to_calcdata"),a=e("../scatter/colorscale_calc");t.exports=function(e,t){var n=[{x:!1,y:!1,trace:t,t:{}}];return r(n,t),a(t),n}},{"../scatter/arrays_to_calcdata":1042,"../scatter/colorscale_calc":1046}],1072:[function(e,t,n){"use strict";var r=e("../../registry");function a(e,t,n,a){if(!t||!t.visible)return null;for(var i=r.getComponentMethod("errorbars","makeComputeError")(t),o=new Array(e.length),s=0;s<e.length;s++){var l=i(+e[s],s);if("log"===a.type){var u=a.c2l(e[s]),c=e[s]-l[0],f=e[s]+l[1];if(o[s]=[(a.c2l(c,!0)-u)*n,(a.c2l(f,!0)-u)*n],c>0){var d=a.c2l(c);a._lowerLogErrorBound||(a._lowerLogErrorBound=d),a._lowerErrorBound=Math.min(a._lowerLogErrorBound,d)}}else o[s]=[-l[0]*n,l[1]*n]}return o}t.exports=function(e,t,n){var r=[a(e.x,e.error_x,t[0],n.xaxis),a(e.y,e.error_y,t[1],n.yaxis),a(e.z,e.error_z,t[2],n.zaxis)],i=function(e){for(var t=0;t<e.length;t++)if(e[t])return e[t].length;return 0}(r);if(0===i)return null;for(var o=new Array(i),s=0;s<i;s++){for(var l=[[0,0,0],[0,0,0]],u=0;u<3;u++)if(r[u])for(var c=0;c<2;c++)l[c][u]=r[u][s][c];o[s]=l}return o}},{"../../registry":827}],1073:[function(e,t,n){"use strict";var r=e("gl-line3d"),a=e("gl-scatter3d"),i=e("gl-error3d"),o=e("gl-mesh3d"),s=e("delaunay-triangulate"),l=e("../../lib"),u=e("../../lib/str2rgbarray"),c=e("../../lib/gl_format_color").formatColor,f=e("../scatter/make_bubble_size_func"),d=e("../../constants/gl3d_dashes"),p=e("../../constants/gl3d_markers"),h=e("./calc_errors");function m(e,t){this.scene=e,this.uid=t,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var v=m.prototype;function g(e,t){return t(4*e)}function y(e){return p[e]}function b(e,t,n,r,a){var i=null;if(l.isArrayOrTypedArray(e)){i=[];for(var o=0;o<t;o++)void 0===e[o]?i[o]=r:i[o]=n(e[o],a)}else i=n(e,l.identity);return i}function x(e,t){var n,r,a,i,o,s,d=[],p=e.fullSceneLayout,m=e.dataScale,v=p.xaxis,x=p.yaxis,_=p.zaxis,w=t.marker,T=t.line,k=t.x||[],C=t.y||[],E=t.z||[],M=k.length,A=t.xcalendar,S=t.ycalendar,O=t.zcalendar;for(r=0;r<M;r++)a=v.d2l(k[r],0,A)*m[0],i=x.d2l(C[r],0,S)*m[1],o=_.d2l(E[r],0,O)*m[2],d[r]=[a,i,o];if(Array.isArray(t.text))s=t.text;else if(void 0!==t.text)for(s=new Array(M),r=0;r<M;r++)s[r]=t.text;if(n={position:d,mode:t.mode,text:s},"line"in t&&(n.lineColor=c(T,1,M),n.lineWidth=T.width,n.lineDashes=T.dash),"marker"in t){var P=f(t);n.scatterColor=c(w,1,M),n.scatterSize=b(w.size,M,g,20,P),n.scatterMarker=b(w.symbol,M,y,""),n.scatterLineWidth=w.line.width,n.scatterLineColor=c(w.line,1,M),n.scatterAngle=0}"textposition"in t&&(n.textOffset=function(e){var t=[0,0];return Array.isArray(e)?[0,-1]:(e.indexOf("bottom")>=0&&(t[1]+=1),e.indexOf("top")>=0&&(t[1]-=1),e.indexOf("left")>=0&&(t[0]-=1),e.indexOf("right")>=0&&(t[0]+=1),t)}(t.textposition),n.textColor=c(t.textfont,1,M),n.textSize=b(t.textfont.size,M,l.identity,12),n.textFont=t.textfont.family,n.textAngle=0);var R=["x","y","z"];for(n.project=[!1,!1,!1],n.projectScale=[1,1,1],n.projectOpacity=[1,1,1],r=0;r<3;++r){var L=t.projection[R[r]];(n.project[r]=L.show)&&(n.projectOpacity[r]=L.opacity,n.projectScale[r]=L.scale)}n.errorBounds=h(t,m,p);var D=function(e){for(var t=[0,0,0],n=[[0,0,0],[0,0,0],[0,0,0]],r=[1,1,1],a=0;a<3;a++){var i=e[a];i&&!1!==i.copy_zstyle&&!1!==e[2].visible&&(i=e[2]),i&&i.visible&&(t[a]=i.width/2,n[a]=u(i.color),r[a]=i.thickness)}return{capSize:t,color:n,lineWidth:r}}([t.error_x,t.error_y,t.error_z]);return n.errorColor=D.color,n.errorLineWidth=D.lineWidth,n.errorCapSize=D.capSize,n.delaunayAxis=t.surfaceaxis,n.delaunayColor=u(t.surfacecolor),n}function _(e){if(Array.isArray(e)){var t=e[0];return Array.isArray(t)&&(e=t),"rgb("+e.slice(0,3).map(function(e){return Math.round(255*e)})+")"}return null}v.handlePick=function(e){if(e.object&&(e.object===this.linePlot||e.object===this.delaunayMesh||e.object===this.textMarkers||e.object===this.scatterPlot)){var t=e.index=e.data.index;return e.object.highlight&&e.object.highlight(null),this.scatterPlot&&(e.object=this.scatterPlot,this.scatterPlot.highlight(e.data)),e.textLabel="",this.textLabels&&(Array.isArray(this.textLabels)?(this.textLabels[t]||0===this.textLabels[t])&&(e.textLabel=this.textLabels[t]):e.textLabel=this.textLabels),e.traceCoordinate=[this.data.x[t],this.data.y[t],this.data.z[t]],!0}},v.update=function(e){var t,n,l,u,c=this.scene.glplot.gl,f=d.solid;this.data=e;var p=x(this.scene,e);"mode"in p&&(this.mode=p.mode),"lineDashes"in p&&p.lineDashes in d&&(f=d[p.lineDashes]),this.color=_(p.scatterColor)||_(p.lineColor),this.dataPoints=p.position,t={gl:c,position:p.position,color:p.lineColor,lineWidth:p.lineWidth||1,dashes:f[0],dashScale:f[1],opacity:e.opacity,connectGaps:e.connectgaps},-1!==this.mode.indexOf("lines")?this.linePlot?this.linePlot.update(t):(this.linePlot=r(t),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var h=e.opacity;if(e.marker&&e.marker.opacity&&(h*=e.marker.opacity),n={gl:c,position:p.position,color:p.scatterColor,size:p.scatterSize,glyph:p.scatterMarker,opacity:h,orthographic:!0,lineWidth:p.scatterLineWidth,lineColor:p.scatterLineColor,project:p.project,projectScale:p.projectScale,projectOpacity:p.projectOpacity},-1!==this.mode.indexOf("markers")?this.scatterPlot?this.scatterPlot.update(n):(this.scatterPlot=a(n),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),u={gl:c,position:p.position,glyph:p.text,color:p.textColor,size:p.textSize,angle:p.textAngle,alignment:p.textOffset,font:p.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:e.opacity},this.textLabels=e.hovertext||e.text,-1!==this.mode.indexOf("text")?this.textMarkers?this.textMarkers.update(u):(this.textMarkers=a(u),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),l={gl:c,position:p.position,color:p.errorColor,error:p.errorBounds,lineWidth:p.errorLineWidth,capSize:p.errorCapSize,opacity:e.opacity},this.errorBars?p.errorBounds?this.errorBars.update(l):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):p.errorBounds&&(this.errorBars=i(l),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),p.delaunayAxis>=0){var m=function(e,t,n){var r,a=(n+1)%3,i=(n+2)%3,o=[],l=[];for(r=0;r<e.length;++r){var u=e[r];!isNaN(u[a])&&isFinite(u[a])&&!isNaN(u[i])&&isFinite(u[i])&&(o.push([u[a],u[i]]),l.push(r))}var c=s(o);for(r=0;r<c.length;++r)for(var f=c[r],d=0;d<f.length;++d)f[d]=l[f[d]];return{positions:e,cells:c,meshColor:t}}(p.position,p.delaunayColor,p.delaunayAxis);m.opacity=e.opacity,this.delaunayMesh?this.delaunayMesh.update(m):(m.gl=c,this.delaunayMesh=o(m),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},v.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())},t.exports=function(e,t){var n=new m(e,t.uid);return n.update(t),n}},{"../../constants/gl3d_dashes":670,"../../constants/gl3d_markers":671,"../../lib":696,"../../lib/gl_format_color":692,"../../lib/str2rgbarray":719,"../scatter/make_bubble_size_func":1060,"./calc_errors":1072,"delaunay-triangulate":150,"gl-error3d":237,"gl-line3d":245,"gl-mesh3d":268,"gl-scatter3d":284}],1074:[function(e,t,n){"use strict";var r=e("../../registry"),a=e("../../lib"),i=e("../scatter/subtypes"),o=e("../scatter/marker_defaults"),s=e("../scatter/line_defaults"),l=e("../scatter/text_defaults"),u=e("./attributes");t.exports=function(e,t,n,c){function f(n,r){return a.coerce(e,t,u,n,r)}var d=function(e,t,n,a){var i=0,o=n("x"),s=n("y"),l=n("z");return r.getComponentMethod("calendars","handleTraceDefaults")(e,t,["x","y","z"],a),o&&s&&l&&(i=Math.min(o.length,s.length,l.length),t._length=t._xlength=t._ylength=t._zlength=i),i}(e,t,f,c);if(d){f("text"),f("hovertext"),f("mode"),i.hasLines(t)&&(f("connectgaps"),s(e,t,n,c,f)),i.hasMarkers(t)&&o(e,t,n,c,f,{noSelect:!0}),i.hasText(t)&&l(e,t,c,f,{noSelect:!0});var p=(t.line||{}).color,h=(t.marker||{}).color;f("surfaceaxis")>=0&&f("surfacecolor",p||h);for(var m=["x","y","z"],v=0;v<3;++v){var g="projection."+m[v];f(g+".show")&&(f(g+".opacity"),f(g+".scale"))}var y=r.getComponentMethod("errorbars","supplyDefaults");y(e,t,n,{axis:"z"}),y(e,t,n,{axis:"y",inherit:"z"}),y(e,t,n,{axis:"x",inherit:"z"})}else t.visible=!1}},{"../../lib":696,"../../registry":827,"../scatter/line_defaults":1056,"../scatter/marker_defaults":1062,"../scatter/subtypes":1067,"../scatter/text_defaults":1068,"./attributes":1070}],1075:[function(e,t,n){"use strict";var r={};r.plot=e("./convert"),r.attributes=e("./attributes"),r.markerSymbols=e("../../constants/gl3d_markers"),r.supplyDefaults=e("./defaults"),r.colorbar=e("../scatter/marker_colorbar"),r.calc=e("./calc"),r.moduleType="trace",r.name="scatter3d",r.basePlotModule=e("../../plots/gl3d"),r.categories=["gl3d","symbols","showLegend"],r.meta={},t.exports=r},{"../../constants/gl3d_markers":671,"../../plots/gl3d":787,"../scatter/marker_colorbar":1061,"./attributes":1070,"./calc":1071,"./convert":1073,"./defaults":1074}],1076:[function(e,t,n){"use strict";var r=e("../scatter/attributes"),a=e("../../plots/attributes"),i=e("../../components/colorscale/attributes"),o=e("../../components/colorbar/attributes"),s=e("../../lib/extend").extendFlat,l=r.marker,u=r.line,c=l.line;t.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:s({},r.mode,{dflt:"markers"}),text:s({},r.text,{}),line:{color:u.color,width:u.width,dash:u.dash,shape:s({},u.shape,{values:["linear","spline"]}),smoothing:u.smoothing,editType:"calc"},connectgaps:r.connectgaps,fill:s({},r.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:r.fillcolor,marker:s({symbol:l.symbol,opacity:l.opacity,maxdisplayed:l.maxdisplayed,size:l.size,sizeref:l.sizeref,sizemin:l.sizemin,sizemode:l.sizemode,line:s({width:c.width,editType:"calc"},i("marker.line")),gradient:l.gradient,editType:"calc"},i("marker"),{colorbar:o}),textfont:r.textfont,textposition:r.textposition,selected:r.selected,unselected:r.unselected,hoverinfo:s({},a.hoverinfo,{flags:["a","b","text","name"]}),hoveron:r.hoveron}},{"../../components/colorbar/attributes":571,"../../components/colorscale/attributes":577,"../../lib/extend":685,"../../plots/attributes":741,"../scatter/attributes":1043}],1077:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),a=e("../scatter/colorscale_calc"),i=e("../scatter/arrays_to_calcdata"),o=e("../scatter/calc_selection"),s=e("../scatter/calc").calcMarkerSize,l=e("../carpet/lookup_carpetid");t.exports=function(e,t){var n=t._carpetTrace=l(e,t);if(n&&n.visible&&"legendonly"!==n.visible){var u;t.xaxis=n.xaxis,t.yaxis=n.yaxis;var c,f,d=t._length,p=new Array(d),h=!1;for(u=0;u<d;u++)if(c=t.a[u],f=t.b[u],r(c)&&r(f)){var m=n.ab2xy(+c,+f,!0),v=n.isVisible(+c,+f);v||(h=!0),p[u]={x:m[0],y:m[1],a:c,b:f,vis:v}}else p[u]={x:!1,y:!1};return t._needsCull=h,p[0].carpet=n,p[0].trace=t,s(t,d),a(t),i(p,t),o(p,t),p}}},{"../carpet/lookup_carpetid":894,"../scatter/arrays_to_calcdata":1042,"../scatter/calc":1044,"../scatter/calc_selection":1045,"../scatter/colorscale_calc":1046,"fast-isnumeric":214}],1078:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("../scatter/constants"),i=e("../scatter/subtypes"),o=e("../scatter/marker_defaults"),s=e("../scatter/line_defaults"),l=e("../scatter/line_shape_defaults"),u=e("../scatter/text_defaults"),c=e("../scatter/fillcolor_defaults"),f=e("./attributes");t.exports=function(e,t,n,d){function p(n,a){return r.coerce(e,t,f,n,a)}p("carpet"),t.xaxis="x",t.yaxis="y";var h=p("a"),m=p("b"),v=Math.min(h.length,m.length);if(v){t._length=v,p("text");var g=v<a.PTS_LINESONLY?"lines+markers":"lines";p("mode",g),i.hasLines(t)&&(s(e,t,n,d,p),l(e,t,p),p("connectgaps")),i.hasMarkers(t)&&o(e,t,n,d,p,{gradient:!0}),i.hasText(t)&&u(e,t,d,p);var y=[];(i.hasMarkers(t)||i.hasText(t))&&(p("marker.maxdisplayed"),y.push("points")),p("fill"),"none"!==t.fill&&(c(e,t,n,p),i.hasLines(t)||l(e,t,p)),"tonext"!==t.fill&&"toself"!==t.fill||y.push("fills"),p("hoveron",y.join("+")||"points"),r.coerceSelectionMarkerOpacity(t,p)}else t.visible=!1}},{"../../lib":696,"../scatter/constants":1047,"../scatter/fillcolor_defaults":1052,"../scatter/line_defaults":1056,"../scatter/line_shape_defaults":1058,"../scatter/marker_defaults":1062,"../scatter/subtypes":1067,"../scatter/text_defaults":1068,"./attributes":1076}],1079:[function(e,t,n){"use strict";t.exports=function(e,t,n,r,a){var i=r[a];return e.a=i.a,e.b=i.b,e}},{}],1080:[function(e,t,n){"use strict";var r=e("../scatter/hover");t.exports=function(e,t,n,a){var i=r(e,t,n,a);if(i&&!1!==i[0].index){var o=i[0];if(void 0===o.index){var s=1-o.y0/e.ya._length,l=e.xa._length,u=l*s/2,c=l-u;return o.x0=Math.max(Math.min(o.x0,c),u),o.x1=Math.max(Math.min(o.x1,c),u),i}var f=o.cd[o.index];o.a=f.a,o.b=f.b,o.xLabelVal=void 0,o.yLabelVal=void 0;var d=o.trace,p=d._carpet,h=f.hi||d.hoverinfo,m=h.split("+"),v=[];-1!==m.indexOf("all")&&(m=["a","b"]),-1!==m.indexOf("a")&&T(p.aaxis,f.a),-1!==m.indexOf("b")&&T(p.baxis,f.b);var g=p.ab2ij([f.a,f.b]),y=Math.floor(g[0]),b=g[0]-y,x=Math.floor(g[1]),_=g[1]-x,w=p.evalxy([],y,x,b,_);return v.push("y: "+w[1].toFixed(3)),o.extraText=v.join("<br>"),i}function T(e,t){var n;n=e.labelprefix&&e.labelprefix.length>0?e.labelprefix.replace(/ = $/,""):e._hovertitle,v.push(n+": "+t.toFixed(3)+e.labelsuffix)}}},{"../scatter/hover":1054}],1081:[function(e,t,n){"use strict";var r={};r.attributes=e("./attributes"),r.supplyDefaults=e("./defaults"),r.colorbar=e("../scatter/marker_colorbar"),r.calc=e("./calc"),r.plot=e("./plot"),r.style=e("../scatter/style").style,r.styleOnSelect=e("../scatter/style").styleOnSelect,r.hoverPoints=e("./hover"),r.selectPoints=e("../scatter/select"),r.eventData=e("./event_data"),r.moduleType="trace",r.name="scattercarpet",r.basePlotModule=e("../../plots/cartesian"),r.categories=["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],r.meta={},t.exports=r},{"../../plots/cartesian":756,"../scatter/marker_colorbar":1061,"../scatter/select":1064,"../scatter/style":1066,"./attributes":1076,"./calc":1077,"./defaults":1078,"./event_data":1079,"./hover":1080,"./plot":1082}],1082:[function(e,t,n){"use strict";var r=e("../scatter/plot"),a=e("../../plots/cartesian/axes"),i=e("../../components/drawing");t.exports=function(e,t,n,o){var s,l,u,c=n[0][0].carpet,f={xaxis:a.getFromId(e,c.xaxis||"x"),yaxis:a.getFromId(e,c.yaxis||"y"),plot:t.plot};for(r(e,f,n,o),s=0;s<n.length;s++)l=n[s][0].trace,u=o.selectAll("g.trace"+l.uid+" .js-line"),i.setClipUrl(u,c._clipPathId)}},{"../../components/drawing":595,"../../plots/cartesian/axes":744,"../scatter/plot":1063}],1083:[function(e,t,n){"use strict";var r=e("../scatter/attributes"),a=e("../../plots/attributes"),i=e("../../components/colorscale/attributes"),o=e("../../components/drawing/attributes").dash,s=e("../../lib/extend").extendFlat,l=e("../../plot_api/edit_types").overrideAll,u=r.marker,c=r.line,f=u.line;t.exports=l({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names"],dflt:"ISO-3"},mode:s({},r.mode,{dflt:"markers"}),text:s({},r.text,{}),hovertext:s({},r.hovertext,{}),textfont:r.textfont,textposition:r.textposition,line:{color:c.color,width:c.width,dash:o},connectgaps:r.connectgaps,marker:s({symbol:u.symbol,opacity:u.opacity,size:u.size,sizeref:u.sizeref,sizemin:u.sizemin,sizemode:u.sizemode,colorbar:u.colorbar,line:s({width:f.width},i("marker.line")),gradient:u.gradient},i("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:r.fillcolor,selected:r.selected,unselected:r.unselected,hoverinfo:s({},a.hoverinfo,{flags:["lon","lat","location","text","name"]})},"calc","nested")},{"../../components/colorscale/attributes":577,"../../components/drawing/attributes":594,"../../lib/extend":685,"../../plot_api/edit_types":727,"../../plots/attributes":741,"../scatter/attributes":1043}],1084:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),a=e("../../constants/numerical").BADNUM,i=e("../scatter/colorscale_calc"),o=e("../scatter/arrays_to_calcdata"),s=e("../scatter/calc_selection"),l=e("../../lib")._;t.exports=function(e,t){for(var n=Array.isArray(t.locations),u=n?t.locations.length:t._length,c=new Array(u),f=0;f<u;f++){var d=c[f]={};if(n){var p=t.locations[f];d.loc="string"==typeof p?p:null}else{var h=t.lon[f],m=t.lat[f];r(h)&&r(m)?d.lonlat=[+h,+m]:d.lonlat=[a,a]}}return o(c,t),i(t),s(c,t),u&&(c[0].t={labels:{lat:l(e,"lat:")+" ",lon:l(e,"lon:")+" "}}),c}},{"../../constants/numerical":673,"../../lib":696,"../scatter/arrays_to_calcdata":1042,"../scatter/calc_selection":1045,"../scatter/colorscale_calc":1046,"fast-isnumeric":214}],1085:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("../scatter/subtypes"),i=e("../scatter/marker_defaults"),o=e("../scatter/line_defaults"),s=e("../scatter/text_defaults"),l=e("../scatter/fillcolor_defaults"),u=e("./attributes");t.exports=function(e,t,n,c){function f(n,a){return r.coerce(e,t,u,n,a)}var d=function(e,t,n){var r,a,i=0,o=n("locations");return o?(n("locationmode"),i=o.length):(r=n("lon")||[],a=n("lat")||[],i=Math.min(r.length,a.length),t._length=i,i)}(0,t,f);d?(f("text"),f("hovertext"),f("mode"),a.hasLines(t)&&(o(e,t,n,c,f),f("connectgaps")),a.hasMarkers(t)&&i(e,t,n,c,f,{gradient:!0}),a.hasText(t)&&s(e,t,c,f),f("fill"),"none"!==t.fill&&l(e,t,n,f),r.coerceSelectionMarkerOpacity(t,f)):t.visible=!1}},{"../../lib":696,"../scatter/fillcolor_defaults":1052,"../scatter/line_defaults":1056,"../scatter/marker_defaults":1062,"../scatter/subtypes":1067,"../scatter/text_defaults":1068,"./attributes":1083}],1086:[function(e,t,n){"use strict";t.exports=function(e,t){return e.lon=t.lon,e.lat=t.lat,e.location=t.loc?t.loc:null,e}},{}],1087:[function(e,t,n){"use strict";var r=e("../../components/fx"),a=e("../../plots/cartesian/axes"),i=e("../../constants/numerical").BADNUM,o=e("../scatter/get_trace_color"),s=e("../scatter/fill_hover_text"),l=e("./attributes");t.exports=function(e,t,n){var u=e.cd,c=u[0].trace,f=e.xa,d=e.ya,p=e.subplot,h=p.projection.isLonLatOverEdges,m=p.project;if(r.getClosest(u,function(e){var r=e.lonlat;if(r[0]===i)return 1/0;if(h(r))return 1/0;var a=m(r),o=m([t,n]),s=Math.abs(a[0]-o[0]),l=Math.abs(a[1]-o[1]),u=Math.max(3,e.mrc||0);return Math.max(Math.sqrt(s*s+l*l)-u,1-3/u)},e),!1!==e.index){var v=u[e.index],g=v.lonlat,y=[f.c2p(g),d.c2p(g)],b=v.mrc||1;return e.x0=y[0]-b,e.x1=y[0]+b,e.y0=y[1]-b,e.y1=y[1]+b,e.loc=v.loc,e.lon=g[0],e.lat=g[1],e.color=o(c,v),e.extraText=function(e,t,n,r){var i=t.hi||e.hoverinfo,o="all"===i?l.hoverinfo.flags:i.split("+"),u=-1!==o.indexOf("location")&&Array.isArray(e.locations),c=-1!==o.indexOf("lon"),f=-1!==o.indexOf("lat"),d=-1!==o.indexOf("text"),p=[];function h(e){return a.tickText(n,n.c2l(e),"hover").text+""}return u?p.push(t.loc):c&&f?p.push("("+h(t.lonlat[0])+", "+h(t.lonlat[1])+")"):c?p.push(r.lon+h(t.lonlat[0])):f&&p.push(r.lat+h(t.lonlat[1])),d&&s(t,e,p),p.join("<br>")}(c,v,p.mockAxis,u[0].t.labels),[e]}}},{"../../components/fx":612,"../../constants/numerical":673,"../../plots/cartesian/axes":744,"../scatter/fill_hover_text":1051,"../scatter/get_trace_color":1053,"./attributes":1083}],1088:[function(e,t,n){"use strict";var r={};r.attributes=e("./attributes"),r.supplyDefaults=e("./defaults"),r.colorbar=e("../scatter/marker_colorbar"),r.calc=e("./calc"),r.plot=e("./plot"),r.style=e("./style"),r.styleOnSelect=e("../scatter/style").styleOnSelect,r.hoverPoints=e("./hover"),r.eventData=e("./event_data"),r.selectPoints=e("./select"),r.moduleType="trace",r.name="scattergeo",r.basePlotModule=e("../../plots/geo"),r.categories=["geo","symbols","showLegend","scatter-like"],r.meta={},t.exports=r},{"../../plots/geo":775,"../scatter/marker_colorbar":1061,"../scatter/style":1066,"./attributes":1083,"./calc":1084,"./defaults":1085,"./event_data":1086,"./hover":1087,"./plot":1089,"./select":1090,"./style":1091}],1089:[function(e,t,n){"use strict";var r=e("d3"),a=e("../../lib"),i=e("../../constants/numerical").BADNUM,o=e("../../lib/topojson_utils").getTopojsonFeatures,s=e("../../lib/geo_location_utils").locationToFeature,l=e("../../lib/geojson_utils"),u=e("../scatter/subtypes"),c=e("./style");function f(e,t){var n=e[0].trace;if(Array.isArray(n.locations))for(var r=o(n,t),a=n.locationmode,l=0;l<e.length;l++){var u=e[l],c=s(a,u.loc,r);u.lonlat=c?c.properties.ct:[i,i]}}t.exports=function(e,t,n){for(var o=0;o<n.length;o++)f(n[o],t.topojson);function s(e,t){e.lonlat[0]===i&&r.select(t).remove()}var d=t.layers.frontplot.select(".scatterlayer"),p=a.makeTraceGroups(d,n,"trace scattergeo");p.selectAll("*").remove(),p.each(function(t){var n=t[0].node3=r.select(this),i=t[0].trace;if(u.hasLines(i)||"none"!==i.fill){var o=l.calcTraceToLineCoords(t),f="none"!==i.fill?l.makePolygon(o):l.makeLine(o);n.selectAll("path.js-line").data([{geojson:f,trace:i}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}u.hasMarkers(i)&&n.selectAll("path.point").data(a.identity).enter().append("path").classed("point",!0).each(function(e){s(e,this)}),u.hasText(i)&&n.selectAll("g").data(a.identity).enter().append("g").append("text").each(function(e){s(e,this)}),c(e,t)})}},{"../../constants/numerical":673,"../../lib":696,"../../lib/geo_location_utils":688,"../../lib/geojson_utils":689,"../../lib/topojson_utils":723,"../scatter/subtypes":1067,"./style":1091,d3:148}],1090:[function(e,t,n){"use strict";var r=e("../scatter/subtypes"),a=e("../../constants/numerical").BADNUM;t.exports=function(e,t){var n,i,o,s,l,u=e.cd,c=e.xaxis,f=e.yaxis,d=[],p=u[0].trace,h=!r.hasMarkers(p)&&!r.hasText(p);if(h)return[];if(!1===t)for(l=0;l<u.length;l++)u[l].selected=0;else for(l=0;l<u.length;l++)n=u[l],(i=n.lonlat)[0]!==a&&(o=c.c2p(i),s=f.c2p(i),t.contains([o,s],null,l,e)?(d.push({pointNumber:l,lon:i[0],lat:i[1]}),n.selected=1):n.selected=0);return d}},{"../../constants/numerical":673,"../scatter/subtypes":1067}],1091:[function(e,t,n){"use strict";var r=e("d3"),a=e("../../components/drawing"),i=e("../../components/color"),o=e("../scatter/style"),s=o.stylePoints,l=o.styleText;t.exports=function(e,t){t&&function(e,t){var n=t[0].trace,o=t[0].node3;o.style("opacity",t[0].trace.opacity),s(o,n,e),l(o,n,e),o.selectAll("path.js-line").style("fill","none").each(function(e){var t=r.select(this),n=e.trace,o=n.line||{};t.call(i.stroke,o.color).call(a.dashLine,o.dash||"",o.width||0),"none"!==n.fill&&t.call(i.fill,n.fillcolor)})}(e,t)}},{"../../components/color":570,"../../components/drawing":595,"../scatter/style":1066,d3:148}],1092:[function(e,t,n){"use strict";var r=e("../../plots/attributes"),a=e("../scatter/attributes"),i=e("../../components/colorscale/attributes"),o=e("../../lib/extend").extendFlat,s=e("../../plot_api/edit_types").overrideAll,l=e("./constants").DASHES,u=a.line,c=a.marker,f=c.line,d=t.exports=s({x:a.x,x0:a.x0,dx:a.dx,y:a.y,y0:a.y0,dy:a.dy,text:a.text,hovertext:a.hovertext,textposition:a.textposition,textfont:a.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:u.color,width:u.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:Object.keys(l),dflt:"solid"}},marker:o({},i("marker"),{symbol:c.symbol,size:c.size,sizeref:c.sizeref,sizemin:c.sizemin,sizemode:c.sizemode,opacity:c.opacity,colorbar:c.colorbar,line:o({},i("marker.line"),{width:f.width})}),connectgaps:a.connectgaps,fill:o({},a.fill,{dflt:"none"}),fillcolor:a.fillcolor,selected:{marker:a.selected.marker,textfont:a.selected.textfont},unselected:{marker:a.unselected.marker,textfont:a.unselected.textfont},opacity:r.opacity},"calc","nested");d.x.editType=d.y.editType=d.x0.editType=d.y0.editType="calc+clearAxisTypes"},{"../../components/colorscale/attributes":577,"../../lib/extend":685,"../../plot_api/edit_types":727,"../../plots/attributes":741,"../scatter/attributes":1043,"./constants":1093}],1093:[function(e,t,n){"use strict";t.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:20,SYMBOL_STROKE:1,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},{}],1094:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),a=e("svg-path-sdf"),i=e("color-normalize"),o=e("../../registry"),s=e("../../lib"),l=e("../../components/drawing"),u=e("../../plots/cartesian/axis_ids"),c=e("../../lib/gl_format_color").formatColor,f=e("../scatter/subtypes"),d=e("../scatter/make_bubble_size_func"),p=e("./constants"),h=e("../../constants/interactions").DESELECTDIM,m={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1};function v(e){var t,n=e._length,a=e.textfont,i=e.textposition,o=Array.isArray(i)?i:[i],s=a.color,l=a.size,u=a.family,c={};for(c.text=e.text,c.opacity=e.opacity,c.font={},c.align=[],c.baseline=[],t=0;t<o.length;t++){var f=o[t].split(/\s+/);switch(f[1]){case"left":c.align.push("right");break;case"right":c.align.push("left");break;default:c.align.push(f[1])}switch(f[0]){case"top":c.baseline.push("bottom");break;case"bottom":c.baseline.push("top");break;default:c.baseline.push(f[0])}}if(Array.isArray(s))for(c.color=new Array(n),t=0;t<n;t++)c.color[t]=s[t];else c.color=s;if(Array.isArray(l)||Array.isArray(u))for(c.font=new Array(n),t=0;t<n;t++){var d=c.font[t]={};d.size=Array.isArray(l)?r(l[t])?l[t]:0:l,d.family=Array.isArray(u)?u[t]:u}else c.font={size:l,family:u};return c}function g(e){var t,n,r=e._length,a=e.marker,o={},l=Array.isArray(a.symbol),u=s.isArrayOrTypedArray(a.color),f=s.isArrayOrTypedArray(a.line.color),h=s.isArrayOrTypedArray(a.opacity),m=s.isArrayOrTypedArray(a.size),v=s.isArrayOrTypedArray(a.line.width);if(l||(n=p.OPEN_RE.test(a.symbol)),l||u||f||h){o.colors=new Array(r),o.borderColors=new Array(r);var g=c(a,a.opacity,r),y=c(a.line,a.opacity,r);if(!Array.isArray(y[0])){var b=y;for(y=Array(r),t=0;t<r;t++)y[t]=b}if(!Array.isArray(g[0])){var x=g;for(g=Array(r),t=0;t<r;t++)g[t]=x}for(o.colors=g,o.borderColors=y,t=0;t<r;t++){if(l){var _=a.symbol[t];n=p.OPEN_RE.test(_)}n&&(y[t]=g[t].slice(),g[t]=g[t].slice(),g[t][3]=0)}o.opacity=e.opacity}else n?(o.color=i(a.color,"uint8"),o.color[3]=0,o.borderColor=i(a.color,"uint8")):(o.color=i(a.color,"uint8"),o.borderColor=i(a.line.color,"uint8")),o.opacity=e.opacity*a.opacity;if(l)for(o.markers=new Array(r),t=0;t<r;t++)o.markers[t]=E(a.symbol[t]);else o.marker=E(a.symbol);var w,T=d(e);if(m||v){var k,C=o.sizes=new Array(r),M=o.borderSizes=new Array(r),A=0;if(m){for(t=0;t<r;t++)C[t]=T(a.size[t]),A+=C[t];k=A/r}else for(w=T(a.size),t=0;t<r;t++)C[t]=w;if(v)for(t=0;t<r;t++)M[t]=a.line.width[t]/2;else for(w=a.line.width/2,t=0;t<r;t++)M[t]=w;o.sizeAvg=k}else o.size=T(a&&a.size||10),o.borderSizes=T(a.line.width);return o}function y(e,t){var n=e.marker,r={};return t?(t.marker&&t.marker.symbol?r=g(s.extendFlat({},n,t.marker)):t.marker&&(t.marker.size&&(r.size=t.marker.size/2),t.marker.color&&(r.colors=t.marker.color),void 0!==t.marker.opacity&&(r.opacity=t.marker.opacity)),r):r}function b(e,t){var n={};if(!t)return n;if(t.textfont){var r={opacity:1,text:e.text,textposition:e.textposition,textfont:s.extendFlat({},e.textfont)};t.textfont&&s.extendFlat(r.textfont,t.textfont),n=v(r)}return n}function x(e,t){var n={capSize:2*t.width,lineWidth:t.thickness,color:t.color};return t.copy_ystyle&&(n=e.error_y),n}var _=p.SYMBOL_SDF_SIZE,w=p.SYMBOL_SIZE,T=p.SYMBOL_STROKE,k={},C=l.symbolFuncs[0](.05*w);function E(e){if("circle"===e)return null;var t,n,r=l.symbolNumber(e),i=l.symbolFuncs[r%100],o=!!l.symbolNoDot[r%100],s=!!l.symbolNoFill[r%100],u=p.DOT_RE.test(e);return k[e]?k[e]:(t=u&&!o?i(1.1*w)+C:i(w),n=a(t,{w:_,h:_,viewBox:[-w,-w,w,w],stroke:s?T:-T}),k[e]=n,n||null)}t.exports={style:function(e,t){var n,r={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0};if(!0!==t.visible)return r;if(f.hasText(t)&&(r.text=v(t),r.textSel=b(t,t.selected),r.textUnsel=b(t,t.unselected)),f.hasMarkers(t)&&(r.marker=g(t),r.markerSel=y(t,t.selected),r.markerUnsel=y(t,t.unselected),!t.unselected&&Array.isArray(t.marker.opacity))){var a=t.marker.opacity;for(r.markerUnsel.opacity=new Array(a.length),n=0;n<a.length;n++)r.markerUnsel.opacity[n]=h*a[n]}if(f.hasLines(t)){r.line={overlay:!0,thickness:t.line.width,color:t.line.color,opacity:t.opacity};var i=(p.DASHES[t.line.dash]||[1]).slice();for(n=0;n<i.length;++n)i[n]*=t.line.width;r.line.dashes=i}return t.error_x&&t.error_x.visible&&(r.errorX=x(t,t.error_x)),t.error_y&&t.error_y.visible&&(r.errorY=x(t,t.error_y)),t.fill&&"none"!==t.fill&&(r.fill={closed:!0,fill:t.fillcolor,thickness:0}),r},markerStyle:g,markerSelection:y,linePositions:function(e,t,n){var r,a,i=n.length,o=i/2;if(f.hasLines(t)&&o)if("hv"===t.line.shape){for(r=[],a=0;a<o-1;a++)isNaN(n[2*a])||isNaN(n[2*a+1])?r.push(NaN,NaN,NaN,NaN):(r.push(n[2*a],n[2*a+1]),isNaN(n[2*a+2])||isNaN(n[2*a+3])?r.push(NaN,NaN):r.push(n[2*a+2],n[2*a+1]));r.push(n[i-2],n[i-1])}else if("hvh"===t.line.shape){for(r=[],a=0;a<o-1;a++)if(isNaN(n[2*a])||isNaN(n[2*a+1])||isNaN(n[2*a+2])||isNaN(n[2*a+3]))isNaN(n[2*a])||isNaN(n[2*a+1])?r.push(NaN,NaN):r.push(n[2*a],n[2*a+1]),r.push(NaN,NaN);else{var s=(n[2*a]+n[2*a+2])/2;r.push(n[2*a],n[2*a+1],s,n[2*a+1],s,n[2*a+3])}r.push(n[i-2],n[i-1])}else if("vhv"===t.line.shape){for(r=[],a=0;a<o-1;a++)if(isNaN(n[2*a])||isNaN(n[2*a+1])||isNaN(n[2*a+2])||isNaN(n[2*a+3]))isNaN(n[2*a])||isNaN(n[2*a+1])?r.push(NaN,NaN):r.push(n[2*a],n[2*a+1]),r.push(NaN,NaN);else{var l=(n[2*a+1]+n[2*a+3])/2;r.push(n[2*a],n[2*a+1],n[2*a],l,n[2*a+2],l)}r.push(n[i-2],n[i-1])}else if("vh"===t.line.shape){for(r=[],a=0;a<o-1;a++)isNaN(n[2*a])||isNaN(n[2*a+1])?r.push(NaN,NaN,NaN,NaN):(r.push(n[2*a],n[2*a+1]),isNaN(n[2*a+2])||isNaN(n[2*a+3])?r.push(NaN,NaN):r.push(n[2*a],n[2*a+3]));r.push(n[i-2],n[i-1])}else r=n;var u=!1;for(a=0;a<r.length;a++)if(isNaN(r[a])){u=!0;break}var c=u||r.length>p.TOO_MANY_POINTS?"rect":f.hasMarkers(t)?"rect":"round";if(u&&t.connectgaps){var d=r[0],h=r[1];for(a=0;a<r.length;a+=2)isNaN(r[a])||isNaN(r[a+1])?(r[a]=d,r[a+1]=h):(d=r[a],h=r[a+1])}return{join:c,positions:r}},errorBarPositions:function(e,t,n,a,i){var s=o.getComponentMethod("errorbars","makeComputeError"),l=u.getFromId(e,t.xaxis),c=u.getFromId(e,t.yaxis),f=n.length/2,d={};function p(e,a){var i=a._id.charAt(0),o=t["error_"+i];if(o&&o.visible&&("linear"===a.type||"log"===a.type)){for(var l=s(o),u={x:0,y:1}[i],c={x:[0,1,2,3],y:[2,3,0,1]}[i],p=new Float64Array(4*f),h=1/0,m=-1/0,v=0,g=0;v<f;v++,g+=4){var y=e[v];if(r(y)){var b=n[2*v+u],x=l(y,v),_=x[0],w=x[1];if(r(_)&&r(w)){var T=y-_,k=y+w;p[g+c[0]]=b-a.c2l(T),p[g+c[1]]=a.c2l(k)-b,p[g+c[2]]=0,p[g+c[3]]=0,h=Math.min(h,y-_),m=Math.max(m,y+w)}}}d[i]={positions:n,errors:p,_bnds:[h,m]}}}return p(a,l),p(i,c),d},textPosition:function(e,t,n,r){var a,i=t._length,o={};if(f.hasMarkers(t)){var s=n.font,l=n.align,u=n.baseline;for(o.offset=new Array(i),a=0;a<i;a++){var c=r.sizes?r.sizes[a]:r.size,d=Array.isArray(s)?s[a].size:s.size,p=Array.isArray(l)?l.length>1?l[a]:l[0]:l,h=Array.isArray(u)?u.length>1?u[a]:u[0]:u,v=m[p],g=m[h],y=c?c/.8+1:0,b=-g*y-.5*g;o.offset[a]=[v*y/d,b/d]}}return o}}},{"../../components/drawing":595,"../../constants/interactions":672,"../../lib":696,"../../lib/gl_format_color":692,"../../plots/cartesian/axis_ids":747,"../../registry":827,"../scatter/make_bubble_size_func":1060,"../scatter/subtypes":1067,"./constants":1093,"color-normalize":108,"fast-isnumeric":214,"svg-path-sdf":512}],1095:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("../../registry"),i=e("./attributes"),o=e("../scatter/constants"),s=e("../scatter/subtypes"),l=e("../scatter/xy_defaults"),u=e("../scatter/marker_defaults"),c=e("../scatter/line_defaults"),f=e("../scatter/fillcolor_defaults"),d=e("../scatter/text_defaults");t.exports=function(e,t,n,p){function h(n,a){return r.coerce(e,t,i,n,a)}var m=!!e.marker&&/-open/.test(e.marker.symbol),v=s.isBubble(e),g=l(e,t,p,h);if(g){var y=g<o.PTS_LINESONLY?"lines+markers":"lines";h("text"),h("hovertext"),h("mode",y),s.hasLines(t)&&(h("connectgaps"),c(e,t,n,p,h),h("line.shape")),s.hasMarkers(t)&&(u(e,t,n,p,h),h("marker.line.width",m||v?1:0)),s.hasText(t)&&d(e,t,p,h),h("fill"),"none"!==t.fill&&f(e,t,n,h);var b=a.getComponentMethod("errorbars","supplyDefaults");b(e,t,n,{axis:"y"}),b(e,t,n,{axis:"x",inherit:"y"}),r.coerceSelectionMarkerOpacity(t,h)}else t.visible=!1}},{"../../lib":696,"../../registry":827,"../scatter/constants":1047,"../scatter/fillcolor_defaults":1052,"../scatter/line_defaults":1056,"../scatter/marker_defaults":1062,"../scatter/subtypes":1067,"../scatter/text_defaults":1068,"../scatter/xy_defaults":1069,"./attributes":1092}],1096:[function(e,t,n){"use strict";var r=e("regl-scatter2d"),a=e("regl-line2d"),i=e("regl-error2d"),o=e("point-cluster"),s=e("array-range"),l=e("gl-text"),u=e("../../registry"),c=e("../../lib"),f=e("../../lib/prepare_regl"),d=e("../../plots/cartesian/axis_ids"),p=e("../../plots/cartesian/autorange").findExtremes,h=e("../../components/color"),m=e("../scatter/subtypes"),v=e("../scatter/calc"),g=v.calcMarkerSize,y=v.calcAxisExpansion,b=v.setFirstScatter,x=e("../scatter/colorscale_calc"),_=e("../scatter/link_traces"),w=e("../scatter/get_trace_color"),T=e("../scatter/fill_hover_text"),k=e("./convert"),C=e("../../constants/numerical").BADNUM,E=e("./constants").TOO_MANY_POINTS,M=e("../../constants/interactions").DESELECTDIM;function A(e,t,n){var r=e._extremes[t._id],a=p(t,n._bnds,{padded:!0});r.min=r.min.concat(a.min),r.max=r.max.concat(a.max)}function S(e,t){var n=t._scene,r={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[]},a={selectBatch:null,unselectBatch:null,fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:null};return t._scene||((n=t._scene={}).init=function(){c.extendFlat(n,a,r)},n.init(),n.update=function(e){var t=c.repeat(e,n.count);if(n.fill2d&&n.fill2d.update(t),n.scatter2d&&n.scatter2d.update(t),n.line2d&&n.line2d.update(t),n.error2d&&n.error2d.update(t.concat(t)),n.select2d&&n.select2d.update(t),n.glText)for(var r=0;r<n.count;r++)n.glText[r].update(e)},n.draw=function(){for(var e=n.count,t=n.fill2d,r=n.error2d,a=n.line2d,i=n.scatter2d,o=n.glText,s=n.select2d,l=n.selectBatch,u=n.unselectBatch,c=0;c<e;c++)t&&n.fillOrder[c]&&t.draw(n.fillOrder[c]),a&&n.lineOptions[c]&&a.draw(c),r&&(n.errorXOptions[c]&&r.draw(c),n.errorYOptions[c]&&r.draw(c+e)),!i||!n.markerOptions[c]||l&&l[c]||i.draw(c),o[c]&&n.textOptions[c]&&o[c].render();i&&s&&l&&(s.draw(l),i.draw(u)),n.dirty=!1},n.destroy=function(){n.fill2d&&n.fill2d.destroy&&n.fill2d.destroy(),n.scatter2d&&n.scatter2d.destroy&&n.scatter2d.destroy(),n.error2d&&n.error2d.destroy&&n.error2d.destroy(),n.line2d&&n.line2d.destroy&&n.line2d.destroy(),n.select2d&&n.select2d.destroy&&n.select2d.destroy(),n.glText&&n.glText.forEach(function(e){e.destroy&&e.destroy()}),n.lineOptions=null,n.fillOptions=null,n.markerOptions=null,n.markerSelectedOptions=null,n.markerUnselectedOptions=null,n.errorXOptions=null,n.errorYOptions=null,n.textOptions=null,n.textSelectedOptions=null,n.textUnselectedOptions=null,n.selectBatch=null,n.unselectBatch=null,t._scene=null}),n.dirty||c.extendFlat(n,r),n}function O(e,t,n,r){var a=e.xa,i=e.ya,o=e.distance,s=e.dxy,l=e.index,f={pointNumber:l,x:t[l],y:n[l]};f.tx=Array.isArray(r.text)?r.text[l]:r.text,f.htx=Array.isArray(r.hovertext)?r.hovertext[l]:r.hovertext,f.data=Array.isArray(r.customdata)?r.customdata[l]:r.customdata,f.tp=Array.isArray(r.textposition)?r.textposition[l]:r.textposition;var d=r.textfont;d&&(f.ts=Array.isArray(d.size)?d.size[l]:d.size,f.tc=Array.isArray(d.color)?d.color[l]:d.color,f.tf=Array.isArray(d.family)?d.family[l]:d.family);var p=r.marker;p&&(f.ms=c.isArrayOrTypedArray(p.size)?p.size[l]:p.size,f.mo=c.isArrayOrTypedArray(p.opacity)?p.opacity[l]:p.opacity,f.mx=Array.isArray(p.symbol)?p.symbol[l]:p.symbol,f.mc=c.isArrayOrTypedArray(p.color)?p.color[l]:p.color);var h=p&&p.line;h&&(f.mlc=Array.isArray(h.color)?h.color[l]:h.color,f.mlw=c.isArrayOrTypedArray(h.width)?h.width[l]:h.width);var m=p&&p.gradient;m&&"none"!==m.type&&(f.mgt=Array.isArray(m.type)?m.type[l]:m.type,f.mgc=Array.isArray(m.color)?m.color[l]:m.color);var v=a.c2p(f.x,!0),g=i.c2p(f.y,!0),y=f.mrc||1,b=r.hoverlabel;b&&(f.hbg=Array.isArray(b.bgcolor)?b.bgcolor[l]:b.bgcolor,f.hbc=Array.isArray(b.bordercolor)?b.bordercolor[l]:b.bordercolor,f.hts=Array.isArray(b.font.size)?b.font.size[l]:b.font.size,f.htc=Array.isArray(b.font.color)?b.font.color[l]:b.font.color,f.htf=Array.isArray(b.font.family)?b.font.family[l]:b.font.family,f.hnl=Array.isArray(b.namelength)?b.namelength[l]:b.namelength);var x=r.hoverinfo;x&&(f.hi=Array.isArray(x)?x[l]:x);var _={};return _[e.index]=f,c.extendFlat(e,{color:w(r,f),x0:v-y,x1:v+y,xLabelVal:f.x,y0:g-y,y1:g+y,yLabelVal:f.y,cd:_,distance:o,spikeDistance:s}),f.htx?e.text=f.htx:f.tx?e.text=f.tx:r.text&&(e.text=r.text),T(f,r,e),u.getComponentMethod("errorbars","hoverInfo")(f,r,e),e}function P(e){var t,n,r=e[0],a=r.trace,i=r.t,o=i._scene,s=i.index,l=o.selectBatch[s],u=o.unselectBatch[s],f=o.textOptions[s],d=o.textSelectedOptions[s]||{},p=o.textUnselectedOptions[s]||{},m=c.extendFlat({},f);if(l&&u){var v=d.color,g=p.color,y=f.color,b=Array.isArray(y);for(m.color=new Array(a._length),t=0;t<l.length;t++)n=l[t],m.color[n]=v||(b?y[n]:y);for(t=0;t<u.length;t++){n=u[t];var x=b?y[n]:y;m.color[n]=g||(v?x:h.addOpacity(x,M))}}o.glText[s].update(m)}t.exports={moduleType:"trace",name:"scattergl",basePlotModule:e("../../plots/cartesian"),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:e("./attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("../scatter/cross_trace_defaults"),colorbar:e("../scatter/marker_colorbar"),calc:function(e,t){var n,r,a,i=e._fullLayout,s=d.getFromId(e,t.xaxis),l=d.getFromId(e,t.yaxis),u=i._plots[t.xaxis+t.yaxis],f=t._length,p=2*f,h={},m=s.makeCalcdata(t,"x"),v=l.makeCalcdata(t,"y"),_=new Array(p);for(n=0;n<f;n++)r=m[n],a=v[n],_[2*n]=r===C?NaN:r,_[2*n+1]=a===C?NaN:a;if("log"===s.type)for(n=0;n<p;n+=2)_[n]=s.c2l(_[n]);if("log"===l.type)for(n=1;n<p;n+=2)_[n]=l.c2l(_[n]);if("log"!==s.type&&"log"!==l.type)h.tree=o(_);else{var w=h.ids=new Array(f);for(n=0;n<f;n++)w[n]=n}x(t);var T,M=function(e,t,n,r,a,i){var o=k.style(e,n);if(o.marker&&(o.marker.positions=r),o.line&&r.length>1&&c.extendFlat(o.line,k.linePositions(e,n,r)),o.errorX||o.errorY){var s=k.errorBarPositions(e,n,r,a,i);o.errorX&&c.extendFlat(o.errorX,s.x),o.errorY&&c.extendFlat(o.errorY,s.y)}return o.text&&(c.extendFlat(o.text,{positions:r},k.textPosition(e,n,o.text,o.marker)),c.extendFlat(o.textSel,{positions:r},k.textPosition(e,n,o.text,o.markerSel)),c.extendFlat(o.textUnsel,{positions:r},k.textPosition(e,n,o.text,o.markerUnsel))),o}(e,0,t,_,m,v),O=S(0,u);return b(i,t),f<E?T=g(t,f):M.marker&&(T=2*(M.marker.sizeAvg||Math.max(M.marker.size,3))),y(e,t,s,l,m,v,T),M.errorX&&A(t,s,M.errorX),M.errorY&&A(t,l,M.errorY),M.fill&&!O.fill2d&&(O.fill2d=!0),M.marker&&!O.scatter2d&&(O.scatter2d=!0),M.line&&!O.line2d&&(O.line2d=!0),!M.errorX&&!M.errorY||O.error2d||(O.error2d=!0),M.text&&!O.glText&&(O.glText=!0),M.marker&&f>=E&&(M.marker.cluster=h.tree),O.lineOptions.push(M.line),O.errorXOptions.push(M.errorX),O.errorYOptions.push(M.errorY),O.fillOptions.push(M.fill),O.markerOptions.push(M.marker),O.markerSelectedOptions.push(M.markerSel),O.markerUnselectedOptions.push(M.markerUnsel),O.textOptions.push(M.text),O.textSelectedOptions.push(M.textSel),O.textUnselectedOptions.push(M.textUnsel),h._scene=O,h.index=O.count,h.x=m,h.y=v,h.positions=_,O.count++,[{x:!1,y:!1,t:h,trace:t}]},plot:function(e,t,n){if(n.length){var o,s,u=e._fullLayout,d=t._scene,p=t.xaxis,h=t.yaxis;if(d)if(f(e,["ANGLE_instanced_arrays","OES_element_index_uint"])){var m=u._glcanvas.data()[0].regl;if(_(e,t,n),d.dirty){if(!0===d.error2d&&(d.error2d=i(m)),!0===d.line2d&&(d.line2d=a(m)),!0===d.scatter2d&&(d.scatter2d=r(m)),!0===d.fill2d&&(d.fill2d=a(m)),!0===d.glText)for(d.glText=new Array(d.count),o=0;o<d.count;o++)d.glText[o]=new l(m);if(d.glText)for(o=0;o<d.count;o++)d.glText[o].update(d.textOptions[o]);if(d.line2d&&(d.line2d.update(d.lineOptions),d.lineOptions=d.lineOptions.map(function(e){if(e&&e.positions){for(var t=e.positions,n=0;n<t.length&&(isNaN(t[n])||isNaN(t[n+1]));)n+=2;for(var r=t.length-2;r>n&&(isNaN(t[r])||isNaN(t[r+1]));)r-=2;e.positions=t.slice(n,r+2)}return e}),d.line2d.update(d.lineOptions)),d.error2d){var v=(d.errorXOptions||[]).concat(d.errorYOptions||[]);d.error2d.update(v)}d.scatter2d&&d.scatter2d.update(d.markerOptions),d.fillOrder=c.repeat(null,d.count),d.fill2d&&(d.fillOptions=d.fillOptions.map(function(e,t){var r=n[t];if(e&&r&&r[0]&&r[0].trace){var a,i,o=r[0],s=o.trace,l=o.t,u=d.lineOptions[t],c=[];s._ownfill&&c.push(t),s._nexttrace&&c.push(t+1),c.length&&(d.fillOrder[t]=c);var f,p,h=[],m=u&&u.positions||l.positions;if("tozeroy"===s.fill){for(f=0;f<m.length&&isNaN(m[f+1]);)f+=2;for(p=m.length-2;p>f&&isNaN(m[p+1]);)p-=2;0!==m[f+1]&&(h=[m[f],0]),h=h.concat(m.slice(f,p+2)),0!==m[p+1]&&(h=h.concat([m[p],0]))}else if("tozerox"===s.fill){for(f=0;f<m.length&&isNaN(m[f]);)f+=2;for(p=m.length-2;p>f&&isNaN(m[p]);)p-=2;0!==m[f]&&(h=[0,m[f+1]]),h=h.concat(m.slice(f,p+2)),0!==m[p]&&(h=h.concat([0,m[p+1]]))}else if("toself"===s.fill||"tonext"===s.fill){for(h=[],a=0,i=0;i<m.length;i+=2)(isNaN(m[i])||isNaN(m[i+1]))&&((h=h.concat(m.slice(a,i))).push(m[a],m[a+1]),a=i+2);h=h.concat(m.slice(a)),a&&h.push(m[a],m[a+1])}else{var v=s._nexttrace;if(v){var g=d.lineOptions[t+1];if(g){var y=g.positions;if("tonexty"===s.fill){for(h=m.slice(),t=Math.floor(y.length/2);t--;){var b=y[2*t],x=y[2*t+1];isNaN(b)||isNaN(x)||h.push(b,x)}e.fill=v.fillcolor}}}}if(s._prevtrace&&"tonext"===s._prevtrace.fill){var _=d.lineOptions[t-1].positions,w=h.length/2,T=[a=w];for(i=0;i<_.length;i+=2)(isNaN(_[i])||isNaN(_[i+1]))&&(T.push(i/2+w+1),a=i+2);h=h.concat(_),e.hole=T}return e.fillmode=s.fill,e.opacity=s.opacity,e.positions=h,e}}),d.fill2d.update(d.fillOptions))}d.selectBatch=null,d.unselectBatch=null;var g=u.dragmode,y="lasso"===g||"select"===g,b=u.clickmode.indexOf("select")>-1;for(o=0;o<n.length;o++){var x=n[o][0],w=x.trace,T=x.t,k=T.index,C=w._length,E=T.x,M=T.y;if(w.selectedpoints||y||b){if(y||(y=!0),d.selectBatch||(d.selectBatch=[],d.unselectBatch=[]),w.selectedpoints){var A=d.selectBatch[k]=c.selIndices2selPoints(w),S={};for(s=0;s<A.length;s++)S[A[s]]=1;var O=[];for(s=0;s<C;s++)S[s]||O.push(s);d.unselectBatch[k]=O}var R=T.xpx=new Array(C),L=T.ypx=new Array(C);for(s=0;s<C;s++)R[s]=p.c2p(E[s]),L[s]=h.c2p(M[s])}else T.xpx=T.ypx=null}y?(d.select2d||(d.select2d=r(u._glcanvas.data()[1].regl)),d.scatter2d&&d.selectBatch&&d.selectBatch.length&&d.scatter2d.update(d.markerUnselectedOptions.map(function(e,t){return d.selectBatch[t]?e:null})),d.select2d&&(d.select2d.update(d.markerOptions),d.select2d.update(d.markerSelectedOptions)),d.glText&&n.forEach(function(e){e&&e[0]&&e[0].trace&&P(e)})):d.scatter2d&&d.scatter2d.update(d.markerOptions);var D={viewport:function(e,t,n){var r=e._size,a=e.width,i=e.height;return[r.l+t.domain[0]*r.w,r.b+n.domain[0]*r.h,a-r.r-(1-t.domain[1])*r.w,i-r.t-(1-n.domain[1])*r.h]}(u,p,h),range:[(p._rl||p.range)[0],(h._rl||h.range)[0],(p._rl||p.range)[1],(h._rl||h.range)[1]]},I=c.repeat(D,d.count);d.fill2d&&d.fill2d.update(I),d.line2d&&d.line2d.update(I),d.error2d&&d.error2d.update(I.concat(I)),d.scatter2d&&d.scatter2d.update(I),d.select2d&&d.select2d.update(I),d.glText&&d.glText.forEach(function(e){e.update(D)})}else d.init()}},hoverPoints:function(e,t,n,r){var a,i,o,s,l,u,c,f,d,p=e.cd,h=p[0].t,m=p[0].trace,v=e.xa,g=e.ya,y=h.x,b=h.y,x=v.c2p(t),_=g.c2p(n),w=e.distance;if(h.tree){var T=v.p2c(x-w),k=v.p2c(x+w),C=g.p2c(_-w),E=g.p2c(_+w);a="x"===r?h.tree.range(Math.min(T,k),Math.min(g._rl[0],g._rl[1]),Math.max(T,k),Math.max(g._rl[0],g._rl[1])):h.tree.range(Math.min(T,k),Math.min(C,E),Math.max(T,k),Math.max(C,E))}else{if(!h.ids)return[e];a=h.ids}var M=w;if("x"===r)for(l=0;l<a.length;l++)o=y[a[l]],(u=Math.abs(v.c2p(o)-x))<M&&(M=u,c=g.c2p(b[a[l]])-_,d=Math.sqrt(u*u+c*c),i=a[l]);else for(l=0;l<a.length;l++)o=y[a[l]],s=b[a[l]],u=v.c2p(o)-x,c=g.c2p(s)-_,(f=Math.sqrt(u*u+c*c))<M&&(M=d=f,i=a[l]);return e.index=i,e.distance=M,e.dxy=d,void 0===i?[e]:(O(e,y,b,m),[e])},selectPoints:function(e,t){var n=e.cd,r=[],a=n[0].trace,i=n[0].t,o=a._length,l=i.x,u=i.y,c=i._scene;if(!c)return r;var f=m.hasText(a),d=m.hasMarkers(a),p=!d&&!f;if(!0!==a.visible||p)return r;var h,v=null,g=null;if(!1===t||t.degenerate)g=s(o);else for(v=[],g=[],h=0;h<o;h++)t.contains([i.xpx[h],i.ypx[h]],!1,h,e)?(v.push(h),r.push({pointNumber:h,x:l[h],y:u[h]})):g.push(h);if(c.selectBatch||(c.selectBatch=[],c.unselectBatch=[]),!c.selectBatch[i.index]){for(h=0;h<c.count;h++)c.selectBatch[h]=[],c.unselectBatch[h]=[];d&&c.scatter2d.update(c.markerUnselectedOptions)}return c.selectBatch[i.index]=v,c.unselectBatch[i.index]=g,f&&P(n),r},sceneUpdate:S,calcHover:O,meta:{}}},{"../../components/color":570,"../../constants/interactions":672,"../../constants/numerical":673,"../../lib":696,"../../lib/prepare_regl":709,"../../plots/cartesian":756,"../../plots/cartesian/autorange":743,"../../plots/cartesian/axis_ids":747,"../../registry":827,"../scatter/calc":1044,"../scatter/colorscale_calc":1046,"../scatter/cross_trace_defaults":1049,"../scatter/fill_hover_text":1051,"../scatter/get_trace_color":1053,"../scatter/link_traces":1059,"../scatter/marker_colorbar":1061,"../scatter/subtypes":1067,"./attributes":1092,"./constants":1093,"./convert":1094,"./defaults":1095,"array-range":55,"gl-text":304,"point-cluster":452,"regl-error2d":473,"regl-line2d":474,"regl-scatter2d":475}],1097:[function(e,t,n){"use strict";var r=e("../scattergeo/attributes"),a=e("../scatter/attributes"),i=e("../../plots/mapbox/layout_attributes"),o=e("../../plots/attributes"),s=e("../../components/colorbar/attributes"),l=e("../../lib/extend").extendFlat,u=e("../../plot_api/edit_types").overrideAll,c=r.line,f=r.marker;t.exports=u({lon:r.lon,lat:r.lat,mode:l({},a.mode,{dflt:"markers"}),text:l({},a.text,{}),hovertext:l({},a.hovertext,{}),line:{color:c.color,width:c.width},connectgaps:a.connectgaps,marker:{symbol:{valType:"string",dflt:"circle",arrayOk:!0},opacity:f.opacity,size:f.size,sizeref:f.sizeref,sizemin:f.sizemin,sizemode:f.sizemode,color:f.color,colorscale:f.colorscale,cauto:f.cauto,cmax:f.cmax,cmin:f.cmin,autocolorscale:f.autocolorscale,reversescale:f.reversescale,showscale:f.showscale,colorbar:s},fill:r.fill,fillcolor:a.fillcolor,textfont:i.layers.symbol.textfont,textposition:i.layers.symbol.textposition,selected:{marker:a.selected.marker},unselected:{marker:a.unselected.marker},hoverinfo:l({},o.hoverinfo,{flags:["lon","lat","text","name"]})},"calc","nested")},{"../../components/colorbar/attributes":571,"../../lib/extend":685,"../../plot_api/edit_types":727,"../../plots/attributes":741,"../../plots/mapbox/layout_attributes":804,"../scatter/attributes":1043,"../scattergeo/attributes":1083}],1098:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),a=e("../../lib"),i=e("../../constants/numerical").BADNUM,o=e("../../lib/geojson_utils"),s=e("../../components/colorscale"),l=e("../../components/drawing"),u=e("../scatter/make_bubble_size_func"),c=e("../scatter/subtypes"),f=e("../../plots/mapbox/convert_text_opts");function d(){return{geojson:o.makeBlank(),layout:{visibility:"none"},paint:{}}}function p(e){return a.isArrayOrTypedArray(e)?function(e){return e}:e?function(){return e}:h}function h(){return""}function m(e){return e[0]===i}t.exports=function(e){var t,n=e[0].trace,i=!0===n.visible,v="none"!==n.fill,g=c.hasLines(n),y=c.hasMarkers(n),b=c.hasText(n),x=y&&"circle"===n.marker.symbol,_=y&&"circle"!==n.marker.symbol,w=d(),T=d(),k=d(),C=d(),E={fill:w,line:T,circle:k,symbol:C};if(!i)return E;if((v||g)&&(t=o.calcTraceToLineCoords(e)),v&&(w.geojson=o.makePolygon(t),w.layout.visibility="visible",a.extendFlat(w.paint,{"fill-color":n.fillcolor})),g&&(T.geojson=o.makeLine(t),T.layout.visibility="visible",a.extendFlat(T.paint,{"line-width":n.line.width,"line-color":n.line.color,"line-opacity":n.opacity})),x){var M=function(e){var t,n,i,o,c=e[0].trace,f=c.marker,d=c.selectedpoints,p=a.isArrayOrTypedArray(f.color),h=a.isArrayOrTypedArray(f.size),v=a.isArrayOrTypedArray(f.opacity);function g(e){return c.opacity*e}p&&(n=s.hasColorscale(c,"marker")?s.makeColorScaleFunc(s.extractScale(f.colorscale,f.cmin,f.cmax)):a.identity),h&&(i=u(c)),v&&(o=function(e){var t=r(e)?+a.constrain(e,0,1):0;return g(t)});var y,b=[];for(t=0;t<e.length;t++){var x=e[t],_=x.lonlat;if(!m(_)){var w={};n&&(w.mcc=x.mcc=n(x.mc)),i&&(w.mrc=x.mrc=i(x.ms)),o&&(w.mo=o(x.mo)),d&&(w.selected=x.selected||0),b.push({type:"Feature",geometry:{type:"Point",coordinates:_},properties:w})}}if(d)for(y=l.makeSelectedPointStyleFns(c),t=0;t<b.length;t++){var T=b[t].properties;y.selectedOpacityFn&&(T.mo=g(y.selectedOpacityFn(T))),y.selectedColorFn&&(T.mcc=y.selectedColorFn(T)),y.selectedSizeFn&&(T.mrc=y.selectedSizeFn(T))}return{geojson:{type:"FeatureCollection",features:b},mcc:p||y&&y.selectedColorFn?{type:"identity",property:"mcc"}:f.color,mrc:h||y&&y.selectedSizeFn?{type:"identity",property:"mrc"}:function(e){return e/2}(f.size),mo:v||y&&y.selectedOpacityFn?{type:"identity",property:"mo"}:g(f.opacity)}}(e);k.geojson=M.geojson,k.layout.visibility="visible",a.extendFlat(k.paint,{"circle-color":M.mcc,"circle-radius":M.mrc,"circle-opacity":M.mo})}if((_||b)&&(C.geojson=function(e){for(var t=e[0].trace,n=(t.marker||{}).symbol,r=t.text,a="circle"!==n?p(n):h,i=c.hasText(t)?p(r):h,o=[],s=0;s<e.length;s++){var l=e[s];m(l.lonlat)||o.push({type:"Feature",geometry:{type:"Point",coordinates:l.lonlat},properties:{symbol:a(l.mx),text:i(l.tx)}})}return{type:"FeatureCollection",features:o}}(e),a.extendFlat(C.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),_&&(a.extendFlat(C.layout,{"icon-size":n.marker.size/10}),a.extendFlat(C.paint,{"icon-opacity":n.opacity*n.marker.opacity,"icon-color":n.marker.color})),b)){var A=(n.marker||{}).size,S=f(n.textposition,A);a.extendFlat(C.layout,{"text-size":n.textfont.size,"text-anchor":S.anchor,"text-offset":S.offset}),a.extendFlat(C.paint,{"text-color":n.textfont.color,"text-opacity":n.opacity})}return E}},{"../../components/colorscale":585,"../../components/drawing":595,"../../constants/numerical":673,"../../lib":696,"../../lib/geojson_utils":689,"../../plots/mapbox/convert_text_opts":801,"../scatter/make_bubble_size_func":1060,"../scatter/subtypes":1067,"fast-isnumeric":214}],1099:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("../scatter/subtypes"),i=e("../scatter/marker_defaults"),o=e("../scatter/line_defaults"),s=e("../scatter/text_defaults"),l=e("../scatter/fillcolor_defaults"),u=e("./attributes");t.exports=function(e,t,n,c){function f(n,a){return r.coerce(e,t,u,n,a)}var d=function(e,t,n){var r=n("lon")||[],a=n("lat")||[],i=Math.min(r.length,a.length);return t._length=i,i}(0,t,f);if(d){if(f("text"),f("hovertext"),f("mode"),a.hasLines(t)&&(o(e,t,n,c,f,{noDash:!0}),f("connectgaps")),a.hasMarkers(t)){i(e,t,n,c,f,{noLine:!0});var p=t.marker;"circle"!==p.symbol&&(r.isArrayOrTypedArray(p.size)&&(p.size=p.size[0]),r.isArrayOrTypedArray(p.color)&&(p.color=p.color[0]))}a.hasText(t)&&s(e,t,c,f,{noSelect:!0}),f("fill"),"none"!==t.fill&&l(e,t,n,f),r.coerceSelectionMarkerOpacity(t,f)}else t.visible=!1}},{"../../lib":696,"../scatter/fillcolor_defaults":1052,"../scatter/line_defaults":1056,"../scatter/marker_defaults":1062,"../scatter/subtypes":1067,"../scatter/text_defaults":1068,"./attributes":1097}],1100:[function(e,t,n){"use strict";t.exports=function(e,t){return e.lon=t.lon,e.lat=t.lat,e}},{}],1101:[function(e,t,n){"use strict";var r=e("../../components/fx"),a=e("../../lib"),i=e("../scatter/get_trace_color"),o=e("../scatter/fill_hover_text"),s=e("../../constants/numerical").BADNUM;t.exports=function(e,t,n){var l=e.cd,u=l[0].trace,c=e.xa,f=e.ya,d=e.subplot,p=t>=0?Math.floor((t+180)/360):Math.ceil((t-180)/360),h=360*p,m=t-h;if(r.getClosest(l,function(e){var t=e.lonlat;if(t[0]===s)return 1/0;var r=a.modHalf(t[0],360),i=t[1],o=d.project([r,i]),l=o.x-c.c2p([m,i]),u=o.y-f.c2p([r,n]),p=Math.max(3,e.mrc||0);return Math.max(Math.sqrt(l*l+u*u)-p,1-3/p)},e),!1!==e.index){var v=l[e.index],g=v.lonlat,y=[a.modHalf(g[0],360)+h,g[1]],b=c.c2p(y),x=f.c2p(y),_=v.mrc||1;return e.x0=b-_,e.x1=b+_,e.y0=x-_,e.y1=x+_,e.color=i(u,v),e.extraText=function(e,t,n){var r=(t.hi||e.hoverinfo).split("+"),a=-1!==r.indexOf("all"),i=-1!==r.indexOf("lon"),s=-1!==r.indexOf("lat"),l=t.lonlat,u=[];function c(e){return e+""}return a||i&&s?u.push("("+c(l[0])+", "+c(l[1])+")"):i?u.push(n.lon+c(l[0])):s&&u.push(n.lat+c(l[1])),(a||-1!==r.indexOf("text"))&&o(t,e,u),u.join("<br>")}(u,v,l[0].t.labels),[e]}}},{"../../components/fx":612,"../../constants/numerical":673,"../../lib":696,"../scatter/fill_hover_text":1051,"../scatter/get_trace_color":1053}],1102:[function(e,t,n){"use strict";var r={};r.attributes=e("./attributes"),r.supplyDefaults=e("./defaults"),r.colorbar=e("../scatter/marker_colorbar"),r.calc=e("../scattergeo/calc"),r.plot=e("./plot"),r.hoverPoints=e("./hover"),r.eventData=e("./event_data"),r.selectPoints=e("./select"),r.style=function(e,t){if(t){var n=t[0].trace;n._glTrace.update(t)}},r.moduleType="trace",r.name="scattermapbox",r.basePlotModule=e("../../plots/mapbox"),r.categories=["mapbox","gl","symbols","showLegend","scatterlike"],r.meta={},t.exports=r},{"../../plots/mapbox":802,"../scatter/marker_colorbar":1061,"../scattergeo/calc":1084,"./attributes":1097,"./defaults":1099,"./event_data":1100,"./hover":1101,"./plot":1103,"./select":1104}],1103:[function(e,t,n){"use strict";var r=e("./convert");function a(e,t){this.subplot=e,this.uid=t,this.sourceIds={fill:t+"-source-fill",line:t+"-source-line",circle:t+"-source-circle",symbol:t+"-source-symbol"},this.layerIds={fill:t+"-layer-fill",line:t+"-layer-line",circle:t+"-layer-circle",symbol:t+"-layer-symbol"},this.order=["fill","line","circle","symbol"]}var i=a.prototype;i.addSource=function(e,t){this.subplot.map.addSource(this.sourceIds[e],{type:"geojson",data:t.geojson})},i.setSourceData=function(e,t){this.subplot.map.getSource(this.sourceIds[e]).setData(t.geojson)},i.addLayer=function(e,t){this.subplot.map.addLayer({type:e,id:this.layerIds[e],source:this.sourceIds[e],layout:t.layout,paint:t.paint})},i.update=function(e){for(var t=this.subplot,n=r(e),a=0;a<this.order.length;a++){var i=this.order[a],o=n[i];t.setOptions(this.layerIds[i],"setLayoutProperty",o.layout),"visible"===o.layout.visibility&&(this.setSourceData(i,o),t.setOptions(this.layerIds[i],"setPaintProperty",o.paint))}e[0].trace._glTrace=this},i.dispose=function(){for(var e=this.subplot.map,t=0;t<this.order.length;t++){var n=this.order[t];e.removeLayer(this.layerIds[n]),e.removeSource(this.sourceIds[n])}},t.exports=function(e,t){for(var n=t[0].trace,i=new a(e,n.uid),o=r(t),s=0;s<i.order.length;s++){var l=i.order[s],u=o[l];i.addSource(l,u),i.addLayer(l,u)}return t[0].trace._glTrace=i,i}},{"./convert":1098}],1104:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("../scatter/subtypes"),i=e("../../constants/numerical").BADNUM;t.exports=function(e,t){var n,o=e.cd,s=e.xaxis,l=e.yaxis,u=[],c=o[0].trace;if(!a.hasMarkers(c))return[];if(!1===t)for(n=0;n<o.length;n++)o[n].selected=0;else for(n=0;n<o.length;n++){var f=o[n],d=f.lonlat;if(d[0]!==i){var p=[r.modHalf(d[0],360),d[1]],h=[s.c2p(p),l.c2p(p)];t.contains(h,null,n,e)?(u.push({pointNumber:n,lon:d[0],lat:d[1]}),f.selected=1):f.selected=0}}return u}},{"../../constants/numerical":673,"../../lib":696,"../scatter/subtypes":1067}],1105:[function(e,t,n){"use strict";var r=e("../../lib/extend").extendFlat,a=e("../scatter/attributes"),i=e("../../plots/attributes"),o=a.line;t.exports={mode:a.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:a.text,hovertext:a.hovertext,line:{color:o.color,width:o.width,dash:o.dash,shape:r({},o.shape,{values:["linear","spline"]}),smoothing:o.smoothing,editType:"calc"},connectgaps:a.connectgaps,marker:a.marker,cliponaxis:r({},a.cliponaxis,{dflt:!1}),textposition:a.textposition,textfont:a.textfont,fill:r({},a.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:a.fillcolor,hoverinfo:r({},i.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:a.hoveron,selected:a.selected,unselected:a.unselected}},{"../../lib/extend":685,"../../plots/attributes":741,"../scatter/attributes":1043}],1106:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),a=e("../../constants/numerical").BADNUM,i=e("../../plots/cartesian/axes"),o=e("../scatter/colorscale_calc"),s=e("../scatter/arrays_to_calcdata"),l=e("../scatter/calc_selection"),u=e("../scatter/calc").calcMarkerSize;t.exports=function(e,t){for(var n=e._fullLayout,c=t.subplot,f=n[c].radialaxis,d=n[c].angularaxis,p=f.makeCalcdata(t,"r"),h=d.makeCalcdata(t,"theta"),m=t._length,v=new Array(m),g=0;g<m;g++){var y=p[g],b=h[g],x=v[g]={};r(y)&&r(b)?(x.r=y,x.theta=b):x.r=a}var _=u(t,m);return t._extremes.x=i.findExtremes(f,p,{ppad:_}),o(t),s(v,t),l(v,t),v}},{"../../constants/numerical":673,"../../plots/cartesian/axes":744,"../scatter/arrays_to_calcdata":1042,"../scatter/calc":1044,"../scatter/calc_selection":1045,"../scatter/colorscale_calc":1046,"fast-isnumeric":214}],1107:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("../scatter/subtypes"),i=e("../scatter/marker_defaults"),o=e("../scatter/line_defaults"),s=e("../scatter/line_shape_defaults"),l=e("../scatter/text_defaults"),u=e("../scatter/fillcolor_defaults"),c=e("../scatter/constants").PTS_LINESONLY,f=e("./attributes");function d(e,t,n,r){var a,i=r("r"),o=r("theta");if(i)o?a=Math.min(i.length,o.length):(a=i.length,r("theta0"),r("dtheta"));else{if(!o)return 0;a=t.theta.length,r("r0"),r("dr")}return t._length=a,a}t.exports={handleRThetaDefaults:d,supplyDefaults:function(e,t,n,p){function h(n,a){return r.coerce(e,t,f,n,a)}var m=d(0,t,0,h);if(m){h("thetaunit"),h("mode",m<c?"lines+markers":"lines"),h("text"),h("hovertext"),a.hasLines(t)&&(o(e,t,n,p,h),s(e,t,h),h("connectgaps")),a.hasMarkers(t)&&i(e,t,n,p,h,{gradient:!0}),a.hasText(t)&&l(e,t,p,h);var v=[];(a.hasMarkers(t)||a.hasText(t))&&(h("cliponaxis"),h("marker.maxdisplayed"),v.push("points")),h("fill"),"none"!==t.fill&&(u(e,t,n,h),a.hasLines(t)||s(e,t,h)),"tonext"!==t.fill&&"toself"!==t.fill||v.push("fills"),h("hoveron",v.join("+")||"points"),r.coerceSelectionMarkerOpacity(t,h)}else t.visible=!1}}},{"../../lib":696,"../scatter/constants":1047,"../scatter/fillcolor_defaults":1052,"../scatter/line_defaults":1056,"../scatter/line_shape_defaults":1058,"../scatter/marker_defaults":1062,"../scatter/subtypes":1067,"../scatter/text_defaults":1068,"./attributes":1105}],1108:[function(e,t,n){"use strict";var r=e("../scatter/hover"),a=e("../../plots/cartesian/axes"),i=e("../../lib");function o(e,t,n,r){var o=n.radialAxis,s=n.angularAxis,l=e.hi||t.hoverinfo,u=l.split("+"),c=[];function f(e,t){c.push(e._hovertitle+": "+a.tickText(e,t,"hover").text)}if(o._hovertitle="r",s._hovertitle="",-1!==u.indexOf("all")&&(u=["r","theta","text"]),-1!==u.indexOf("r")&&f(o,o.c2l(e.r)),-1!==u.indexOf("theta")){var d=e.theta;f(s,"degrees"===s.thetaunit?i.rad2deg(d):d)}-1!==u.indexOf("text")&&r.text&&(c.push(r.text),delete r.text),r.extraText=c.join("<br>")}t.exports={hoverPoints:function(e,t,n,a){var i=r(e,t,n,a);if(i&&!1!==i[0].index){var s=i[0];if(void 0===s.index)return i;var l=e.subplot,u=s.cd[s.index],c=s.trace;if(l.isPtInside(u))return s.xLabelVal=void 0,s.yLabelVal=void 0,o(u,c,l,s),i}},makeHoverPointText:o}},{"../../lib":696,"../../plots/cartesian/axes":744,"../scatter/hover":1054}],1109:[function(e,t,n){"use strict";t.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:e("../../plots/polar"),categories:["polar","symbols","showLegend","scatter-like"],attributes:e("./attributes"),supplyDefaults:e("./defaults").supplyDefaults,colorbar:e("../scatter/marker_colorbar"),calc:e("./calc"),plot:e("./plot"),style:e("../scatter/style").style,hoverPoints:e("./hover").hoverPoints,selectPoints:e("../scatter/select"),meta:{}}},{"../../plots/polar":811,"../scatter/marker_colorbar":1061,"../scatter/select":1064,"../scatter/style":1066,"./attributes":1105,"./calc":1106,"./defaults":1107,"./hover":1108,"./plot":1110}],1110:[function(e,t,n){"use strict";var r=e("../scatter/plot"),a=e("../../constants/numerical").BADNUM;t.exports=function(e,t,n){for(var i=t.layers.frontplot.select("g.scatterlayer"),o={xaxis:t.xaxis,yaxis:t.yaxis,plot:t.framework,layerClipId:t._hasClipOnAxisFalse?t.clipIds.forTraces:null},s=t.radialAxis,l=t.angularAxis,u=0;u<n.length;u++)for(var c=n[u],f=0;f<c.length;f++){var d=c[f],p=d.r;if(p===a)d.x=d.y=a;else{var h=s.c2g(p),m=l.c2g(d.theta);d.x=h*Math.cos(m),d.y=h*Math.sin(m)}}r(e,o,n,i)}},{"../../constants/numerical":673,"../scatter/plot":1063}],1111:[function(e,t,n){"use strict";var r=e("../scatterpolar/attributes"),a=e("../scattergl/attributes");t.exports={mode:r.mode,r:r.r,theta:r.theta,r0:r.r0,dr:r.dr,theta0:r.theta0,dtheta:r.dtheta,thetaunit:r.thetaunit,text:r.text,hovertext:r.hovertext,line:a.line,connectgaps:a.connectgaps,marker:a.marker,fill:a.fill,fillcolor:a.fillcolor,textposition:a.textposition,textfont:a.textfont,hoverinfo:r.hoverinfo,selected:r.selected,unselected:r.unselected}},{"../scattergl/attributes":1092,"../scatterpolar/attributes":1105}],1112:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("../scatter/subtypes"),i=e("../scatterpolar/defaults").handleRThetaDefaults,o=e("../scatter/marker_defaults"),s=e("../scatter/line_defaults"),l=e("../scatter/text_defaults"),u=e("../scatter/fillcolor_defaults"),c=e("../scatter/constants").PTS_LINESONLY,f=e("./attributes");t.exports=function(e,t,n,d){function p(n,a){return r.coerce(e,t,f,n,a)}var h=i(e,t,d,p);h?(p("thetaunit"),p("mode",h<c?"lines+markers":"lines"),p("text"),p("hovertext"),a.hasLines(t)&&(s(e,t,n,d,p),p("connectgaps")),a.hasMarkers(t)&&o(e,t,n,d,p),a.hasText(t)&&l(e,t,d,p),p("fill"),"none"!==t.fill&&u(e,t,n,p),r.coerceSelectionMarkerOpacity(t,p)):t.visible=!1}},{"../../lib":696,"../scatter/constants":1047,"../scatter/fillcolor_defaults":1052,"../scatter/line_defaults":1056,"../scatter/marker_defaults":1062,"../scatter/subtypes":1067,"../scatter/text_defaults":1068,"../scatterpolar/defaults":1107,"./attributes":1111}],1113:[function(e,t,n){"use strict";var r=e("point-cluster"),a=e("fast-isnumeric"),i=e("../scattergl"),o=e("../scatter/colorscale_calc"),s=e("../scatter/calc").calcMarkerSize,l=e("../scattergl/convert"),u=e("../../lib"),c=e("../../plots/cartesian/axes"),f=e("../scatterpolar/hover").makeHoverPointText,d=e("../scattergl/constants").TOO_MANY_POINTS;t.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:e("../../plots/polar"),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../scatter/marker_colorbar"),calc:function(e,t){var n=e._fullLayout,r=t.subplot,a=n[r].radialaxis,i=n[r].angularaxis,u=a.makeCalcdata(t,"r"),f=i.makeCalcdata(t,"theta"),p=t._length,h={};p<u.length&&(u=u.slice(0,p)),p<f.length&&(f=f.slice(0,p)),h.r=u,h.theta=f,o(t);var m,v=h.opts=l.style(e,t);return p<d?m=s(t,p):v.marker&&(m=2*(v.marker.sizeAvg||Math.max(v.marker.size,3))),t._extremes.x=c.findExtremes(a,u,{ppad:m}),[{x:!1,y:!1,t:h,trace:t}]},plot:function(e,t,n){if(n.length){var o=t.radialAxis,s=t.angularAxis,c=i.sceneUpdate(e,t);return n.forEach(function(n){if(n&&n[0]&&n[0].trace){var i,f=n[0],p=f.trace,h=f.t,m=p._length,v=h.r,g=h.theta,y=h.opts,b=v.slice(),x=g.slice();for(i=0;i<v.length;i++)t.isPtInside({r:v[i],theta:g[i]})||(b[i]=NaN,x[i]=NaN);var _=new Array(2*m),w=Array(m),T=Array(m);for(i=0;i<m;i++){var k,C,E=b[i];if(a(E)){var M=o.c2g(E),A=s.c2g(x[i],p.thetaunit);k=M*Math.cos(A),C=M*Math.sin(A)}else k=C=NaN;w[i]=_[2*i]=k,T[i]=_[2*i+1]=C}h.tree=r(_),y.marker&&m>=d&&(y.marker.cluster=h.tree),y.marker&&(y.markerSel.positions=y.markerUnsel.positions=y.marker.positions=_),y.line&&_.length>1&&u.extendFlat(y.line,l.linePositions(e,p,_)),y.text&&(u.extendFlat(y.text,{positions:_},l.textPosition(e,p,y.text,y.marker)),u.extendFlat(y.textSel,{positions:_},l.textPosition(e,p,y.text,y.markerSel)),u.extendFlat(y.textUnsel,{positions:_},l.textPosition(e,p,y.text,y.markerUnsel))),y.fill&&!c.fill2d&&(c.fill2d=!0),y.marker&&!c.scatter2d&&(c.scatter2d=!0),y.line&&!c.line2d&&(c.line2d=!0),y.text&&!c.glText&&(c.glText=!0),c.lineOptions.push(y.line),c.fillOptions.push(y.fill),c.markerOptions.push(y.marker),c.markerSelectedOptions.push(y.markerSel),c.markerUnselectedOptions.push(y.markerUnsel),c.textOptions.push(y.text),c.textSelectedOptions.push(y.textSel),c.textUnselectedOptions.push(y.textUnsel),h.x=w,h.y=T,h.rawx=w,h.rawy=T,h.r=v,h.theta=g,h.positions=_,h._scene=c,h.index=c.count,c.count++}}),i.plot(e,t,n)}},hoverPoints:function(e,t,n,r){var a=e.cd[0].t,o=a.r,s=a.theta,l=i.hoverPoints(e,t,n,r);if(l&&!1!==l[0].index){var u=l[0];if(void 0===u.index)return l;var c=e.subplot,d=u.cd[u.index],p=u.trace;if(d.r=o[u.index],d.theta=s[u.index],c.isPtInside(d))return u.xLabelVal=void 0,u.yLabelVal=void 0,f(d,p,c,u),l}},selectPoints:i.selectPoints,meta:{}}},{"../../lib":696,"../../plots/cartesian/axes":744,"../../plots/polar":811,"../scatter/calc":1044,"../scatter/colorscale_calc":1046,"../scatter/marker_colorbar":1061,"../scattergl":1096,"../scattergl/constants":1093,"../scattergl/convert":1094,"../scatterpolar/hover":1108,"./attributes":1111,"./defaults":1112,"fast-isnumeric":214,"point-cluster":452}],1114:[function(e,t,n){"use strict";var r=e("../scatter/attributes"),a=e("../../plots/attributes"),i=e("../../components/colorscale/attributes"),o=e("../../components/colorbar/attributes"),s=e("../../components/drawing/attributes").dash,l=e("../../lib/extend").extendFlat,u=r.marker,c=r.line,f=u.line;t.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:l({},r.mode,{dflt:"markers"}),text:l({},r.text,{}),hovertext:l({},r.hovertext,{}),line:{color:c.color,width:c.width,dash:s,shape:l({},c.shape,{values:["linear","spline"]}),smoothing:c.smoothing,editType:"calc"},connectgaps:r.connectgaps,cliponaxis:r.cliponaxis,fill:l({},r.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:r.fillcolor,marker:l({symbol:u.symbol,opacity:u.opacity,maxdisplayed:u.maxdisplayed,size:u.size,sizeref:u.sizeref,sizemin:u.sizemin,sizemode:u.sizemode,line:l({width:f.width,editType:"calc"},i("marker.line")),gradient:u.gradient,editType:"calc"},i("marker"),{colorbar:o}),textfont:r.textfont,textposition:r.textposition,selected:r.selected,unselected:r.unselected,hoverinfo:l({},a.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:r.hoveron}},{"../../components/colorbar/attributes":571,"../../components/colorscale/attributes":577,"../../components/drawing/attributes":594,"../../lib/extend":685,"../../plots/attributes":741,"../scatter/attributes":1043}],1115:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),a=e("../scatter/colorscale_calc"),i=e("../scatter/arrays_to_calcdata"),o=e("../scatter/calc_selection"),s=e("../scatter/calc").calcMarkerSize,l=["a","b","c"],u={a:["b","c"],b:["a","c"],c:["a","b"]};t.exports=function(e,t){var n,c,f,d,p,h,m=e._fullLayout[t.subplot],v=m.sum,g=t.sum||v,y={a:t.a,b:t.b,c:t.c};for(n=0;n<l.length;n++)if(!y[f=l[n]]){for(p=y[u[f][0]],h=y[u[f][1]],d=new Array(p.length),c=0;c<p.length;c++)d[c]=g-p[c]-h[c];y[f]=d}var b,x,_,w,T,k,C=t._length,E=new Array(C);for(n=0;n<C;n++)b=y.a[n],x=y.b[n],_=y.c[n],r(b)&&r(x)&&r(_)?(1!=(w=v/((b=+b)+(x=+x)+(_=+_)))&&(b*=w,x*=w,_*=w),k=b,T=_-x,E[n]={x:T,y:k,a:b,b:x,c:_}):E[n]={x:!1,y:!1};return s(t,C),a(t),i(E,t),o(E,t),E}},{"../scatter/arrays_to_calcdata":1042,"../scatter/calc":1044,"../scatter/calc_selection":1045,"../scatter/colorscale_calc":1046,"fast-isnumeric":214}],1116:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("../scatter/constants"),i=e("../scatter/subtypes"),o=e("../scatter/marker_defaults"),s=e("../scatter/line_defaults"),l=e("../scatter/line_shape_defaults"),u=e("../scatter/text_defaults"),c=e("../scatter/fillcolor_defaults"),f=e("./attributes");t.exports=function(e,t,n,d){function p(n,a){return r.coerce(e,t,f,n,a)}var h,m=p("a"),v=p("b"),g=p("c");if(m?(h=m.length,v?(h=Math.min(h,v.length),g&&(h=Math.min(h,g.length))):h=g?Math.min(h,g.length):0):v&&g&&(h=Math.min(v.length,g.length)),h){t._length=h,p("sum"),p("text"),p("hovertext");var y=h<a.PTS_LINESONLY?"lines+markers":"lines";p("mode",y),i.hasLines(t)&&(s(e,t,n,d,p),l(e,t,p),p("connectgaps")),i.hasMarkers(t)&&o(e,t,n,d,p,{gradient:!0}),i.hasText(t)&&u(e,t,d,p);var b=[];(i.hasMarkers(t)||i.hasText(t))&&(p("cliponaxis"),p("marker.maxdisplayed"),b.push("points")),p("fill"),"none"!==t.fill&&(c(e,t,n,p),i.hasLines(t)||l(e,t,p)),"tonext"!==t.fill&&"toself"!==t.fill||b.push("fills"),p("hoveron",b.join("+")||"points"),r.coerceSelectionMarkerOpacity(t,p)}else t.visible=!1}},{"../../lib":696,"../scatter/constants":1047,"../scatter/fillcolor_defaults":1052,"../scatter/line_defaults":1056,"../scatter/line_shape_defaults":1058,"../scatter/marker_defaults":1062,"../scatter/subtypes":1067,"../scatter/text_defaults":1068,"./attributes":1114}],1117:[function(e,t,n){"use strict";t.exports=function(e,t,n,r,a){if(t.xa&&(e.xaxis=t.xa),t.ya&&(e.yaxis=t.ya),r[a]){var i=r[a];e.a=i.a,e.b=i.b,e.c=i.c}else e.a=t.a,e.b=t.b,e.c=t.c;return e}},{}],1118:[function(e,t,n){"use strict";var r=e("../scatter/hover"),a=e("../../plots/cartesian/axes");t.exports=function(e,t,n,i){var o=r(e,t,n,i);if(o&&!1!==o[0].index){var s=o[0];if(void 0===s.index){var l=1-s.y0/e.ya._length,u=e.xa._length,c=u*l/2,f=u-c;return s.x0=Math.max(Math.min(s.x0,f),c),s.x1=Math.max(Math.min(s.x1,f),c),o}var d=s.cd[s.index];s.a=d.a,s.b=d.b,s.c=d.c,s.xLabelVal=void 0,s.yLabelVal=void 0;var p=s.trace,h=s.subplot,m=d.hi||p.hoverinfo,v=m.split("+"),g=[];return-1!==v.indexOf("all")&&(v=["a","b","c"]),-1!==v.indexOf("a")&&y(h.aaxis,d.a),-1!==v.indexOf("b")&&y(h.baxis,d.b),-1!==v.indexOf("c")&&y(h.caxis,d.c),s.extraText=g.join("<br>"),o}function y(e,t){g.push(e._hovertitle+": "+a.tickText(e,t,"hover").text)}}},{"../../plots/cartesian/axes":744,"../scatter/hover":1054}],1119:[function(e,t,n){"use strict";var r={};r.attributes=e("./attributes"),r.supplyDefaults=e("./defaults"),r.colorbar=e("../scatter/marker_colorbar"),r.calc=e("./calc"),r.plot=e("./plot"),r.style=e("../scatter/style").style,r.styleOnSelect=e("../scatter/style").styleOnSelect,r.hoverPoints=e("./hover"),r.selectPoints=e("../scatter/select"),r.eventData=e("./event_data"),r.moduleType="trace",r.name="scatterternary",r.basePlotModule=e("../../plots/ternary"),r.categories=["ternary","symbols","showLegend","scatter-like"],r.meta={},t.exports=r},{"../../plots/ternary":823,"../scatter/marker_colorbar":1061,"../scatter/select":1064,"../scatter/style":1066,"./attributes":1114,"./calc":1115,"./defaults":1116,"./event_data":1117,"./hover":1118,"./plot":1120}],1120:[function(e,t,n){"use strict";var r=e("../scatter/plot");t.exports=function(e,t,n){var a=t.plotContainer;a.select(".scatterlayer").selectAll("*").remove();var i={xaxis:t.xaxis,yaxis:t.yaxis,plot:a,layerClipId:t._hasClipOnAxisFalse?t.clipIdRelative:null},o=t.layers.frontplot.select("g.scatterlayer");r(e,i,n,o)}},{"../scatter/plot":1063}],1121:[function(e,t,n){"use strict";var r=e("../scatter/attributes"),a=e("../../components/colorscale/attributes"),i=e("../scattergl/attributes"),o=e("../../plots/cartesian/constants").idRegex,s=e("../../plot_api/plot_template").templatedArray,l=e("../../lib/extend").extendFlat,u=r.marker,c=u.line,f=l(a("marker.line",{editTypeOverride:"calc"}),{width:l({},c.width,{editType:"calc"}),editType:"calc"}),d=l(a("marker"),{symbol:u.symbol,size:l({},u.size,{editType:"markerSize"}),sizeref:u.sizeref,sizemin:u.sizemin,sizemode:u.sizemode,opacity:u.opacity,colorbar:u.colorbar,line:f,editType:"calc"});function p(e){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:o[e],editType:"plot"}}}d.color.editType=d.cmin.editType=d.cmax.editType="style",t.exports={dimensions:s("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:l({},i.text,{}),marker:d,xaxes:p("x"),yaxes:p("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:i.selected.marker,editType:"calc"},unselected:{marker:i.unselected.marker,editType:"calc"},opacity:i.opacity}},{"../../components/colorscale/attributes":577,"../../lib/extend":685,"../../plot_api/plot_template":734,"../../plots/cartesian/constants":750,"../scatter/attributes":1043,"../scattergl/attributes":1092}],1122:[function(e,t,n){"use strict";var r=e("regl-line2d"),a=e("../../registry"),i=e("../../lib/prepare_regl"),o=e("../../plots/get_data").getModuleCalcData,s=e("../../plots/cartesian"),l=e("../../plots/cartesian/axis_ids").getFromId,u=e("../../plots/cartesian/axes").shouldShowZeroLine,c="splom";function f(e,t,n){for(var r=n.matrixOptions.data.length,a=t._visibleDims,i=n.viewOpts.ranges=new Array(r),o=0;o<a.length;o++){var s=a[o],u=i[o]=new Array(4),c=l(e,t._diag[s][0]);c&&(u[0]=c.r2l(c.range[0]),u[2]=c.r2l(c.range[1]));var f=l(e,t._diag[s][1]);f&&(u[1]=f.r2l(f.range[0]),u[3]=f.r2l(f.range[1]))}n.selectBatch?n.matrix.update({ranges:i},{ranges:i}):n.matrix.update({ranges:i})}function d(e){var t=e._fullLayout,n=t._glcanvas.data()[0].regl,a=t._splomGrid;a||(a=t._splomGrid=r(n)),a.update(function(e){var t,n=e._fullLayout,r=n._size,a=[0,0,n.width,n.height],i={};function o(e,t,n,r,o,s){var l=t[e+"color"],u=t[e+"width"],c=String(l+u);c in i?i[c].data.push(NaN,NaN,n,r,o,s):i[c]={data:[n,r,o,s],join:"rect",thickness:u,color:l,viewport:a,range:a,overlay:!1}}for(t in n._splomSubplots){var s,l,c=n._plots[t],f=c.xaxis,d=c.yaxis,p=f._vals,h=d._vals,m=r.b+d.domain[0]*r.h,v=-d._m,g=-v*d.r2l(d.range[0],d.calendar);if(f.showgrid)for(t=0;t<p.length;t++)s=f._offset+f.l2p(p[t].x),o("grid",f,s,m,s,m+d._length);if(d.showgrid)for(t=0;t<h.length;t++)l=m+g+v*h[t].x,o("grid",d,f._offset,l,f._offset+f._length,l);u(e,f,d)&&(s=f._offset+f.l2p(0),o("zeroline",f,s,m,s,m+d._length)),u(e,d,f)&&(l=m+g+0,o("zeroline",d,f._offset,l,f._offset+f._length,l))}var y=[];for(t in i)y.push(i[t]);return y}(e))}t.exports={name:c,attr:s.attr,attrRegex:s.attrRegex,layoutAttributes:s.layoutAttributes,supplyLayoutDefaults:s.supplyLayoutDefaults,drawFramework:s.drawFramework,plot:function(e){var t=e._fullLayout,n=a.getModule(c),r=o(e.calcdata,n)[0];i(e,["ANGLE_instanced_arrays","OES_element_index_uint"])&&(t._hasOnlyLargeSploms&&d(e),n.plot(e,{},r))},drag:function(e){var t=e.calcdata,n=e._fullLayout;n._hasOnlyLargeSploms&&d(e);for(var r=0;r<t.length;r++){var a=t[r][0],i=a.trace,o=n._splomScenes[i.uid];"splom"===i.type&&o&&o.matrix&&f(e,i,o)}},updateGrid:d,clean:function(e,t,n,r){var a,i={};if(r._splomScenes){for(a=0;a<e.length;a++){var o=e[a];"splom"===o.type&&(i[o.uid]=1)}for(a=0;a<n.length;a++){var l=n[a];if(!i[l.uid]){var u=r._splomScenes[l.uid];u&&u.destroy&&u.destroy(),r._splomScenes[l.uid]=null,delete r._splomScenes[l.uid]}}}0===Object.keys(r._splomScenes||{}).length&&delete r._splomScenes,r._splomGrid&&!t._hasOnlyLargeSploms&&r._hasOnlyLargeSploms&&(r._splomGrid.destroy(),r._splomGrid=null,delete r._splomGrid),s.clean(e,t,n,r)},updateFx:function(e){s.updateFx(e);var t=e._fullLayout,n=t.dragmode;if("zoom"===n||"pan"===n)for(var r=e.calcdata,a=0;a<r.length;a++){var i=r[a][0],o=i.trace;if("splom"===o.type){var l=t._splomScenes[o.uid];null===l.selectBatch&&l.matrix.update(l.matrixOptions,null)}}},toSVG:s.toSVG}},{"../../lib/prepare_regl":709,"../../plots/cartesian":756,"../../plots/cartesian/axes":744,"../../plots/cartesian/axis_ids":747,"../../plots/get_data":781,"../../registry":827,"regl-line2d":474}],1123:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("../../plots/array_container_defaults"),i=e("./attributes"),o=e("../scatter/subtypes"),s=e("../scatter/marker_defaults"),l=e("../parcoords/merge_length"),u=/-open/;function c(e,t){function n(n,a){return r.coerce(e,t,i.dimensions,n,a)}n("label");var a=n("values");a&&a.length?n("visible"):t.visible=!1,n("axis.type")}t.exports=function(e,t,n,f){function d(n,a){return r.coerce(e,t,i,n,a)}var p=a(e,t,{name:"dimensions",handleItemDefaults:c}),h=d("diagonal.visible"),m=d("showupperhalf"),v=d("showlowerhalf"),g=l(t,p,"values");if(g&&(h||m||v)){d("text"),s(e,t,n,f,d);var y=u.test(t.marker.symbol),b=o.isBubble(t);d("marker.line.width",y||b?1:0),function(e,t,n,r){var a,i,o=t.dimensions,s=o.length,l=t.showupperhalf,u=t.showlowerhalf,c=t.diagonal.visible,f=new Array(s),d=new Array(s);for(a=0;a<s;a++){var p=a?a+1:"";f[a]="x"+p,d[a]="y"+p}var h=r("xaxes",f),m=r("yaxes",d),v=t._diag=new Array(s);t._xaxes={},t._yaxes={};var g=[],y=[];function b(e,r,a){if(e){var i=e.charAt(0),o=n._splomAxes[i];if(t["_"+i+"axes"][e]=1,a.push(e),!(e in o)){var s=o[e]={};r&&(s.label=r.label||"",r.visible&&r.axis&&(s.type=r.axis.type))}}}var x=!c&&!u,_=!c&&!l;for(a=0;a<s;a++){var w=o[a],T=0===a,k=a===s-1,C=T&&x||k&&_?void 0:h[a],E=T&&_||k&&x?void 0:m[a];b(C,w,g),b(E,w,y),v[a]=[C,E]}for(a=0;a<g.length;a++)for(i=0;i<y.length;i++){var M=g[a]+y[i];a>i&&l?n._splomSubplots[M]=1:a<i&&u?n._splomSubplots[M]=1:a!==i||!c&&u&&l||(n._splomSubplots[M]=1)}(!u||!c&&l&&u)&&(n._splomGridDflt.xside="bottom",n._splomGridDflt.yside="left")}(0,t,f,d),r.coerceSelectionMarkerOpacity(t,d)}else t.visible=!1}},{"../../lib":696,"../../plots/array_container_defaults":740,"../parcoords/merge_length":1015,"../scatter/marker_defaults":1062,"../scatter/subtypes":1067,"./attributes":1121}],1124:[function(e,t,n){"use strict";var r=e("regl-splom"),a=e("array-range"),i=e("../../registry"),o=e("../../components/grid"),s=e("../../lib"),l=e("../../plots/cartesian/axis_ids"),u=e("../scatter/subtypes"),c=e("../scatter/calc").calcMarkerSize,f=e("../scatter/calc").calcAxisExpansion,d=e("../scatter/colorscale_calc"),p=e("../scattergl/convert").markerSelection,h=e("../scattergl/convert").markerStyle,m=e("../scattergl").calcHover,v=e("../../constants/numerical").BADNUM,g=e("../scattergl/constants").TOO_MANY_POINTS;function y(e,t){var n,a,i,o,u,c=e._fullLayout,f=c._size,d=t.trace,p=t.t,h=c._splomScenes[d.uid],m=h.matrixOptions,v=m.cdata,g=c._glcanvas.data()[0].regl,y=c.dragmode;if(0!==v.length){m.lower=d.showupperhalf,m.upper=d.showlowerhalf,m.diagonal=d.diagonal.visible;var b=d._visibleDims,x=v.length,_=h.viewOpts={};for(_.ranges=new Array(x),_.domains=new Array(x),u=0;u<b.length;u++){i=b[u];var w=_.ranges[u]=new Array(4),T=_.domains[u]=new Array(4);(n=l.getFromId(e,d._diag[i][0]))&&(w[0]=n._rl[0],w[2]=n._rl[1],T[0]=n.domain[0],T[2]=n.domain[1]),(a=l.getFromId(e,d._diag[i][1]))&&(w[1]=a._rl[0],w[3]=a._rl[1],T[1]=a.domain[0],T[3]=a.domain[1])}_.viewport=[f.l,f.b,f.w+f.l,f.h+f.b],!0===h.matrix&&(h.matrix=r(g));var k=c.clickmode.indexOf("select")>-1,C="lasso"===y||"select"===y||!!d.selectedpoints||k;if(h.selectBatch=null,h.unselectBatch=null,C){var E=d._length;if(h.selectBatch||(h.selectBatch=[],h.unselectBatch=[]),d.selectedpoints){h.selectBatch=d.selectedpoints;var M=d.selectedpoints,A={};for(i=0;i<M.length;i++)A[M[i]]=!0;var S=[];for(i=0;i<E;i++)A[i]||S.push(i);h.unselectBatch=S}var O=p.xpx=new Array(x),P=p.ypx=new Array(x);for(u=0;u<b.length;u++){if(i=b[u],n=l.getFromId(e,d._diag[i][0]))for(O[u]=new Array(E),o=0;o<E;o++)O[u][o]=n.c2p(v[u][o]);if(a=l.getFromId(e,d._diag[i][1]))for(P[u]=new Array(E),o=0;o<E;o++)P[u][o]=a.c2p(v[u][o])}h.selectBatch?(h.matrix.update(m,m),h.matrix.update(h.unselectedOptions,h.selectedOptions),h.matrix.update(_,_)):h.matrix.update(_,null)}else{var R=s.extendFlat({},m,_);h.matrix.update(R,null),p.xpx=p.ypx=null}}}function b(e,t){for(var n=t._id,r=n.charAt(0),a={x:0,y:1}[r],i=e._visibleDims,o=0;o<i.length;o++){var s=i[o];if(e._diag[s][a]===n)return o}return!1}t.exports={moduleType:"trace",name:"splom",basePlotModule:e("./base_plot"),categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../scatter/marker_colorbar"),calc:function(e,t){var n,r,a,i,o,u,m=t.dimensions,y=t._length,b={},x=b.cdata=[],_=b.data=[],w=t._visibleDims=[];function T(e,n){for(var r=e.makeCalcdata({v:n.values,vcalendar:t.calendar},"v"),a=0;a<r.length;a++)r[a]=r[a]===v?NaN:r[a];x.push(r),_.push("log"===e.type?s.simpleMap(r,e.c2l):r)}for(n=0;n<m.length;n++)if((a=m[n]).visible){if(i=l.getFromId(e,t._diag[n][0]),o=l.getFromId(e,t._diag[n][1]),i&&o&&i.type!==o.type){s.log("Skipping splom dimension "+n+" with conflicting axis types");continue}i?(T(i,a),o&&"category"===o.type&&(o._categories=i._categories.slice())):T(o,a),w.push(n)}for(d(t),s.extendFlat(b,h(t)),u=x.length*y>g?2*(b.sizeAvg||Math.max(b.size,3)):c(t,y),r=0;r<w.length;r++)n=w[r],a=m[n],i=l.getFromId(e,t._diag[n][0])||{},o=l.getFromId(e,t._diag[n][1])||{},f(e,t,i,o,x[r],x[r],u);var k=function(e,t){var n=e._fullLayout,r=t.uid,a=n._splomScenes;a||(a=n._splomScenes={});var i={dirty:!0},o=a[t.uid];return o||((o=a[r]=s.extendFlat({},i,{selectBatch:null,unselectBatch:null,matrix:!1,select:null})).draw=function(){o.matrix&&o.matrix.draw&&(o.selectBatch?o.matrix.draw(o.unselectBatch,o.selectBatch):o.matrix.draw()),o.dirty=!1},o.destroy=function(){o.matrix&&o.matrix.destroy&&o.matrix.destroy(),o.matrixOptions=null,o.selectBatch=null,o.unselectBatch=null,o=null}),o.dirty||s.extendFlat(o,i),o}(e,t);return k.matrix||(k.matrix=!0),k.matrixOptions=b,k.selectedOptions=p(t,t.selected),k.unselectedOptions=p(t,t.unselected),[{x:!1,y:!1,t:{},trace:t}]},plot:function(e,t,n){if(n.length)for(var r=0;r<n.length;r++)y(e,n[r][0])},hoverPoints:function(e,t,n){var r=e.cd[0].trace,a=e.scene.matrixOptions.cdata,i=e.xa,o=e.ya,s=i.c2p(t),l=o.c2p(n),u=e.distance,c=b(r,i),f=b(r,o);if(!1===c||!1===f)return[e];for(var d,p,h=a[c],v=a[f],g=u,y=0;y<h.length;y++){var x=h[y],_=v[y],w=i.c2p(x)-s,T=o.c2p(_)-l,k=Math.sqrt(w*w+T*T);k<g&&(g=p=k,d=y)}return e.index=d,e.distance=g,e.dxy=p,void 0===d?[e]:(m(e,h,v,r),[e])},selectPoints:function(e,t){var n,r=e.cd,i=r[0].trace,o=r[0].t,s=e.scene,l=s.matrixOptions.cdata,c=e.xaxis,f=e.yaxis,d=[];if(!s)return d;var p=!u.hasMarkers(i)&&!u.hasText(i);if(!0!==i.visible||p)return d;var h=b(i,c),m=b(i,f);if(!1===h||!1===m)return d;var v=o.xpx[h],g=o.ypx[m],y=l[h],x=l[m],_=null,w=null;if(!1===t||t.degenerate)w=a(o.count);else for(_=[],w=[],n=0;n<y.length;n++)t.contains([v[n],g[n]],null,n,e)?(_.push(n),d.push({pointNumber:n,x:y[n],y:x[n]})):w.push(n);if(s.selectBatch||(s.selectBatch=[],s.unselectBatch=[]),!s.selectBatch){for(n=0;n<s.count;n++)s.selectBatch=[],s.unselectBatch=[];s.matrix.update(s.unselectedOptions,s.selectedOptions)}return s.selectBatch=_,s.unselectBatch=w,d},editStyle:function(e,t){var n=t.trace,r=e._fullLayout._splomScenes[n.uid];if(r){d(n),s.extendFlat(r.matrixOptions,h(n));var a=s.extendFlat({},r.matrixOptions,r.viewOpts);r.matrix.update(a,null)}},meta:{}},i.register(o)},{"../../components/grid":616,"../../constants/numerical":673,"../../lib":696,"../../plots/cartesian/axis_ids":747,"../../registry":827,"../scatter/calc":1044,"../scatter/colorscale_calc":1046,"../scatter/marker_colorbar":1061,"../scatter/subtypes":1067,"../scattergl":1096,"../scattergl/constants":1093,"../scattergl/convert":1094,"./attributes":1121,"./base_plot":1122,"./defaults":1123,"array-range":55,"regl-splom":477}],1125:[function(e,t,n){"use strict";var r=e("../../components/colorscale/attributes"),a=e("../../components/colorbar/attributes"),i=e("../mesh3d/attributes"),o=e("../../plots/attributes"),s=e("../../lib/extend").extendFlat,l={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"}};s(l,r("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:a}),["opacity","lightposition","lighting"].forEach(function(e){l[e]=i[e]}),l.hoverinfo=s({},o.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),l.transforms=void 0,t.exports=l},{"../../components/colorbar/attributes":571,"../../components/colorscale/attributes":577,"../../lib/extend":685,"../../plots/attributes":741,"../mesh3d/attributes":986}],1126:[function(e,t,n){"use strict";var r=e("../../components/colorscale/calc");t.exports=function(e,t){var n,a,i,o,s=t.u,l=t.v,u=t.w,c=t.x,f=t.y,d=t.z,p=Math.min(c.length,f.length,d.length,s.length,l.length,u.length),h=0;t.starts&&(a=t.starts.x||[],i=t.starts.y||[],o=t.starts.z||[],h=Math.min(a.length,i.length,o.length));var m=0,v=1/0;for(n=0;n<p;n++){var g=s[n],y=l[n],b=u[n],x=Math.sqrt(g*g+y*y+b*b);m=Math.max(m,x),v=Math.min(v,x)}r(t,[v,m],"","c");var _=-1/0,w=1/0,T=-1/0,k=1/0,C=-1/0,E=1/0;for(n=0;n<p;n++){var M=c[n];_=Math.max(_,M),w=Math.min(w,M);var A=f[n];T=Math.max(T,A),k=Math.min(k,A);var S=d[n];C=Math.max(C,S),E=Math.min(E,S)}for(n=0;n<h;n++){var O=a[n];_=Math.max(_,O),w=Math.min(w,O);var P=i[n];T=Math.max(T,P),k=Math.min(k,P);var R=o[n];C=Math.max(C,R),E=Math.min(E,R)}t._len=p,t._slen=h,t._normMax=m,t._xbnds=[w,_],t._ybnds=[k,T],t._zbnds=[E,C]}},{"../../components/colorscale/calc":578}],1127:[function(e,t,n){"use strict";var r=e("gl-streamtube3d"),a=r.createTubeMesh,i=e("../../lib"),o=e("../../lib/gl_format_color").parseColorScale,s=e("../../plots/gl3d/zip3"),l={xaxis:0,yaxis:1,zaxis:2};function u(e,t){this.scene=e,this.uid=t,this.mesh=null,this.data=null}var c=u.prototype;function f(e){return i.distinctVals(e).vals}function d(e){var t=e.length;return t>2?e.slice(1,t-1):2===t?[(e[0]+e[1])/2]:e}function p(e){var t=e.length;return 1===t?[.5,.5]:[e[1]-e[0],e[t-1]-e[t-2]]}function h(e,t){var n=e.fullSceneLayout,a=e.dataScale,u=t._len,c={};function h(e,t){var r=n[t],o=a[l[t]];return i.simpleMap(e,function(e){return r.d2l(e)*o})}c.vectors=s(h(t.u,"xaxis"),h(t.v,"yaxis"),h(t.w,"zaxis"),u);var m=f(t.x.slice(0,u)),v=f(t.y.slice(0,u)),g=f(t.z.slice(0,u));if(m.length*v.length*g.length>u)return{positions:[],cells:[]};var y=h(m,"xaxis"),b=h(v,"yaxis"),x=h(g,"zaxis");if(c.meshgrid=[y,b,x],t.starts){var _=t._slen;c.startingPositions=s(h(t.starts.x.slice(0,_),"xaxis"),h(t.starts.y.slice(0,_),"yaxis"),h(t.starts.z.slice(0,_),"zaxis"))}else{for(var w=b[0],T=d(y),k=d(x),C=new Array(T.length*k.length),E=0,M=0;M<T.length;M++)for(var A=0;A<k.length;A++)C[E++]=[T[M],w,k[A]];c.startingPositions=C}c.colormap=o(t.colorscale),c.tubeSize=t.sizeref,c.maxLength=t.maxdisplayed;var S=h(t._xbnds,"xaxis"),O=h(t._ybnds,"yaxis"),P=h(t._zbnds,"zaxis"),R=p(y),L=p(b),D=p(x),I=[[S[0]-R[0],O[0]-L[0],P[0]-D[0]],[S[1]+R[1],O[1]+L[1],P[1]+D[1]]],z=r(c,I);z.vertexIntensityBounds=[t.cmin/t._normMax,t.cmax/t._normMax];var j=t.lightposition;return z.lightPosition=[j.x,j.y,j.z],z.ambient=t.lighting.ambient,z.diffuse=t.lighting.diffuse,z.specular=t.lighting.specular,z.roughness=t.lighting.roughness,z.fresnel=t.lighting.fresnel,z.opacity=t.opacity,t._pad=z.tubeScale*t.sizeref*2,z}c.handlePick=function(e){var t=this.scene.fullSceneLayout,n=this.scene.dataScale;function r(e,r){var a=t[r],i=n[l[r]];return a.l2c(e)/i}if(e.object===this.mesh){var a=e.data.position,i=e.data.velocity;return e.traceCoordinate=[r(a[0],"xaxis"),r(a[1],"yaxis"),r(a[2],"zaxis"),r(i[0],"xaxis"),r(i[1],"yaxis"),r(i[2],"zaxis"),e.data.intensity*this.data._normMax,e.data.divergence],e.textLabel=this.data.text,!0}},c.update=function(e){this.data=e;var t=h(this.scene,e);this.mesh.update(t)},c.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},t.exports=function(e,t){var n=e.glplot.gl,r=h(e,t),i=a(n,r),o=new u(e,t.uid);return o.mesh=i,o.data=t,i._trace=o,e.glplot.add(i),o}},{"../../lib":696,"../../lib/gl_format_color":692,"../../plots/gl3d/zip3":798,"gl-streamtube3d":301}],1128:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("../../components/colorscale/defaults"),i=e("./attributes");t.exports=function(e,t,n,o){function s(n,a){return r.coerce(e,t,i,n,a)}var l=s("u"),u=s("v"),c=s("w"),f=s("x"),d=s("y"),p=s("z");l&&l.length&&u&&u.length&&c&&c.length&&f&&f.length&&d&&d.length&&p&&p.length?(s("starts.x"),s("starts.y"),s("starts.z"),s("maxdisplayed"),s("sizeref"),s("lighting.ambient"),s("lighting.diffuse"),s("lighting.specular"),s("lighting.roughness"),s("lighting.fresnel"),s("lightposition.x"),s("lightposition.y"),s("lightposition.z"),a(e,t,o,s,{prefix:"",cLetter:"c"}),s("text"),t._length=null):t.visible=!1}},{"../../components/colorscale/defaults":580,"../../lib":696,"./attributes":1125}],1129:[function(e,t,n){"use strict";t.exports={moduleType:"trace",name:"streamtube",basePlotModule:e("../../plots/gl3d"),categories:["gl3d"],attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:e("./calc"),plot:e("./convert"),eventData:function(e,t){return e.tubex=e.x,e.tubey=e.y,e.tubez=e.z,e.tubeu=t.traceCoordinate[3],e.tubev=t.traceCoordinate[4],e.tubew=t.traceCoordinate[5],e.norm=t.traceCoordinate[6],e.divergence=t.traceCoordinate[7],delete e.x,delete e.y,delete e.z,e},meta:{}}},{"../../plots/gl3d":787,"./attributes":1125,"./calc":1126,"./convert":1127,"./defaults":1128}],1130:[function(e,t,n){"use strict";var r=e("../../components/color"),a=e("../../components/colorscale/attributes"),i=e("../../components/colorbar/attributes"),o=e("../../plots/attributes"),s=e("../../lib/extend").extendFlat,l=e("../../plot_api/edit_types").overrideAll;function u(e){return{show:{valType:"boolean",dflt:!1},project:{x:{valType:"boolean",dflt:!1},y:{valType:"boolean",dflt:!1},z:{valType:"boolean",dflt:!1}},color:{valType:"color",dflt:r.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:r.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var c=t.exports=l(s({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},surfacecolor:{valType:"data_array"}},a("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{colorbar:i,contours:{x:u(),y:u(),z:u()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},_deprecated:{zauto:s({},a.zauto,{}),zmin:s({},a.zmin,{}),zmax:s({},a.zmax,{})},hoverinfo:s({},o.hoverinfo)}),"calc","nested");c.x.editType=c.y.editType=c.z.editType="calc+clearAxisTypes",c.transforms=void 0},{"../../components/color":570,"../../components/colorbar/attributes":571,"../../components/colorscale/attributes":577,"../../lib/extend":685,"../../plot_api/edit_types":727,"../../plots/attributes":741}],1131:[function(e,t,n){"use strict";var r=e("../../components/colorscale/calc");t.exports=function(e,t){t.surfacecolor?r(t,t.surfacecolor,"","c"):r(t,t.z,"","c")}},{"../../components/colorscale/calc":578}],1132:[function(e,t,n){"use strict";var r=e("gl-surface3d"),a=e("ndarray"),i=e("ndarray-homography"),o=e("ndarray-fill"),s=e("ndarray-ops"),l=e("../../lib").isArrayOrTypedArray,u=e("../../lib/gl_format_color").parseColorScale,c=e("../../lib/str2rgbarray"),f=128;function d(e,t,n){this.scene=e,this.uid=n,this.surface=t,this.data=null,this.showContour=[!1,!1,!1],this.dataScale=1}var p=d.prototype;function h(e){var t=e.shape,n=[t[0]+2,t[1]+2],r=a(new Float32Array(n[0]*n[1]),n);return s.assign(r.lo(1,1).hi(t[0],t[1]),e),s.assign(r.lo(1).hi(t[0],1),e.hi(t[0],1)),s.assign(r.lo(1,n[1]-1).hi(t[0],1),e.lo(0,t[1]-1).hi(t[0],1)),s.assign(r.lo(0,1).hi(1,t[1]),e.hi(1)),s.assign(r.lo(n[0]-1,1).hi(1,t[1]),e.lo(t[0]-1)),r.set(0,0,e.get(0,0)),r.set(0,n[1]-1,e.get(0,t[1]-1)),r.set(n[0]-1,0,e.get(t[0]-1,0)),r.set(n[0]-1,n[1]-1,e.get(t[0]-1,t[1]-1)),r}p.handlePick=function(e){if(e.object===this.surface){var t=e.index=[Math.min(0|Math.round(e.data.index[0]/this.dataScale-1),this.data.z[0].length-1),Math.min(0|Math.round(e.data.index[1]/this.dataScale-1),this.data.z.length-1)],n=[0,0,0];l(this.data.x)?l(this.data.x[0])?n[0]=this.data.x[t[1]][t[0]]:n[0]=this.data.x[t[0]]:n[0]=t[0],l(this.data.y)?l(this.data.y[0])?n[1]=this.data.y[t[1]][t[0]]:n[1]=this.data.y[t[1]]:n[1]=t[1],n[2]=this.data.z[t[1]][t[0]],e.traceCoordinate=n;var r=this.scene.fullSceneLayout;e.dataCoordinate=[r.xaxis.d2l(n[0],0,this.data.xcalendar)*this.scene.dataScale[0],r.yaxis.d2l(n[1],0,this.data.ycalendar)*this.scene.dataScale[1],r.zaxis.d2l(n[2],0,this.data.zcalendar)*this.scene.dataScale[2]];var a=this.data.text;return Array.isArray(a)&&a[t[1]]&&void 0!==a[t[1]][t[0]]?e.textLabel=a[t[1]][t[0]]:e.textLabel=a||"",e.data.dataCoordinate=e.dataCoordinate.slice(),this.surface.highlight(e.data),this.scene.glplot.spikes.position=e.dataCoordinate,!0}},p.setContourLevels=function(){for(var e=[[],[],[]],t=!1,n=0;n<3;++n)this.showContour[n]&&(t=!0,e[n]=this.scene.contourLevels[n]);t&&this.surface.update({levels:e})},p.update=function(e){var t,n=this.scene,r=n.fullSceneLayout,s=this.surface,d=e.opacity,p=u(e.colorscale,d),m=e.z,v=e.x,g=e.y,y=r.xaxis,b=r.yaxis,x=r.zaxis,_=n.dataScale,w=m[0].length,T=e._ylength,k=[a(new Float32Array(w*T),[w,T]),a(new Float32Array(w*T),[w,T]),a(new Float32Array(w*T),[w,T])],C=k[0],E=k[1],M=n.contourLevels;this.data=e;var A=e.xcalendar,S=e.ycalendar,O=e.zcalendar;o(k[2],function(e,t){return x.d2l(m[t][e],0,O)*_[2]}),l(v)?l(v[0])?o(C,function(e,t){return y.d2l(v[t][e],0,A)*_[0]}):o(C,function(e){return y.d2l(v[e],0,A)*_[0]}):o(C,function(e){return y.d2l(e,0,A)*_[0]}),l(v)?l(g[0])?o(E,function(e,t){return b.d2l(g[t][e],0,S)*_[1]}):o(E,function(e,t){return b.d2l(g[t],0,S)*_[1]}):o(E,function(e,t){return b.d2l(t,0,A)*_[1]});var P={colormap:p,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!e.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacity:e.opacity};if(P.intensityBounds=[e.cmin,e.cmax],e.surfacecolor){var R=a(new Float32Array(w*T),[w,T]);o(R,function(t,n){return e.surfacecolor[n][t]}),k.push(R)}else P.intensityBounds[0]*=_[2],P.intensityBounds[1]*=_[2];this.dataScale=function(e){var t=Math.max(e[0].shape[0],e[0].shape[1]);if(t<f){for(var n=f/t,r=[0|Math.floor(e[0].shape[0]*n+1),0|Math.floor(e[0].shape[1]*n+1)],o=r[0]*r[1],s=0;s<e.length;++s){var l=h(e[s]),u=a(new Float32Array(o),r);i(u,l,[n,0,0,0,n,0,0,0,1]),e[s]=u}return n}return 1}(k),e.surfacecolor&&(P.intensity=k.pop());var L=[!0,!0,!0],D=["x","y","z"];for(t=0;t<3;++t){var I=e.contours[D[t]];L[t]=I.highlight,P.showContour[t]=I.show||I.highlight,P.showContour[t]&&(P.contourProject[t]=[I.project.x,I.project.y,I.project.z],I.show?(this.showContour[t]=!0,P.levels[t]=M[t],s.highlightColor[t]=P.contourColor[t]=c(I.color),I.usecolormap?s.highlightTint[t]=P.contourTint[t]=0:s.highlightTint[t]=P.contourTint[t]=1,P.contourWidth[t]=I.width):this.showContour[t]=!1,I.highlight&&(P.dynamicColor[t]=c(I.highlightcolor),P.dynamicWidth[t]=I.highlightwidth))}(function(e){var t=e[0].rgb,n=e[e.length-1].rgb;return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]})(p)&&(P.vertexColor=!0),P.coords=k,s.update(P),s.visible=e.visible,s.enableDynamic=L,s.enableHighlight=L,s.snapToData=!0,"lighting"in e&&(s.ambientLight=e.lighting.ambient,s.diffuseLight=e.lighting.diffuse,s.specularLight=e.lighting.specular,s.roughness=e.lighting.roughness,s.fresnel=e.lighting.fresnel),"lightposition"in e&&(s.lightPosition=[e.lightposition.x,e.lightposition.y,e.lightposition.z]),d&&d<1&&(s.supportsTransparency=!0)},p.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()},t.exports=function(e,t){var n=e.glplot.gl,a=r({gl:n}),i=new d(e,a,t.uid);return a._trace=i,i.update(t),e.glplot.add(a),i}},{"../../lib":696,"../../lib/gl_format_color":692,"../../lib/str2rgbarray":719,"gl-surface3d":303,ndarray:433,"ndarray-fill":423,"ndarray-homography":425,"ndarray-ops":427}],1133:[function(e,t,n){"use strict";var r=e("../../registry"),a=e("../../lib"),i=e("../../components/colorscale/defaults"),o=e("./attributes");function s(e,t,n){t in e&&!(n in e)&&(e[n]=e[t])}t.exports=function(e,t,n,l){var u,c;function f(n,r){return a.coerce(e,t,o,n,r)}var d=f("z");if(d){var p=f("x");f("y"),t._xlength=Array.isArray(p)&&a.isArrayOrTypedArray(p[0])?d.length:d[0].length,t._ylength=d.length;var h=r.getComponentMethod("calendars","handleTraceDefaults");h(e,t,["x","y","z"],l),f("text"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","opacity"].forEach(function(e){f(e)});var m=f("surfacecolor");f("colorscale");var v=["x","y","z"];for(u=0;u<3;++u){var g="contours."+v[u],y=f(g+".show"),b=f(g+".highlight");if(y||b)for(c=0;c<3;++c)f(g+".project."+v[c]);y&&(f(g+".color"),f(g+".width"),f(g+".usecolormap")),b&&(f(g+".highlightcolor"),f(g+".highlightwidth"))}m||(s(e,"zmin","cmin"),s(e,"zmax","cmax"),s(e,"zauto","cauto")),i(e,t,l,f,{prefix:"",cLetter:"c"}),t._length=null}else t.visible=!1}},{"../../components/colorscale/defaults":580,"../../lib":696,"../../registry":827,"./attributes":1130}],1134:[function(e,t,n){"use strict";var r={};r.attributes=e("./attributes"),r.supplyDefaults=e("./defaults"),r.colorbar={min:"cmin",max:"cmax"},r.calc=e("./calc"),r.plot=e("./convert"),r.moduleType="trace",r.name="surface",r.basePlotModule=e("../../plots/gl3d"),r.categories=["gl3d","2dMap","noOpacity"],r.meta={},t.exports=r},{"../../plots/gl3d":787,"./attributes":1130,"./calc":1131,"./convert":1132,"./defaults":1133}],1135:[function(e,t,n){"use strict";var r=e("../../components/annotations/attributes"),a=e("../../lib/extend").extendFlat,i=e("../../plot_api/edit_types").overrideAll,o=e("../../plots/font_attributes"),s=e("../../plots/domain").attributes,l=t.exports=i({domain:s({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[]},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:a({},r.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:a({},o({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[]},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:a({},r.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:a({},o({arrayOk:!0}))}},"calc","from-root");l.transforms=void 0},{"../../components/annotations/attributes":553,"../../lib/extend":685,"../../plot_api/edit_types":727,"../../plots/domain":770,"../../plots/font_attributes":771}],1136:[function(e,t,n){"use strict";var r=e("../../plots/get_data").getModuleCalcData,a=e("./plot");n.name="table",n.plot=function(e){var t=r(e.calcdata,"table")[0];t.length&&a(e,t)},n.clean=function(e,t,n,r){var a=r._has&&r._has("table"),i=t._has&&t._has("table");a&&!i&&r._paperdiv.selectAll(".table").remove()}},{"../../plots/get_data":781,"./plot":1143}],1137:[function(e,t,n){"use strict";var r=e("../../lib/gup").wrap;t.exports=function(){return r({})}},{"../../lib/gup":693}],1138:[function(e,t,n){"use strict";t.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},{}],1139:[function(e,t,n){"use strict";var r=e("./constants"),a=e("../../lib/extend").extendFlat,i=e("fast-isnumeric");function o(e){if(Array.isArray(e)){for(var t=0,n=0;n<e.length;n++)t=Math.max(t,o(e[n]));return t}return e}function s(e,t){return e+t}function l(e){var t,n=e.slice(),r=1/0,a=0;for(t=0;t<n.length;t++)Array.isArray(n[t])||(n[t]=[n[t]]),r=Math.min(r,n[t].length),a=Math.max(a,n[t].length);if(r!==a)for(t=0;t<n.length;t++){var i=a-n[t].length;i&&(n[t]=n[t].concat(u(i)))}return n}function u(e){for(var t=new Array(e),n=0;n<e;n++)t[n]="";return t}function c(e){return e.calcdata.columns.reduce(function(t,n){return n.xIndex<e.xIndex?t+n.columnWidth:t},0)}function f(e,t){var n=Object.keys(e);return n.map(function(n){return a({},e[n],{auxiliaryBlocks:t})})}function d(e,t){for(var n,r={},a=0,i=0,o={firstRowIndex:null,lastRowIndex:null,rows:[]},s=0,l=0,u=0;u<e.length;u++)n=e[u],o.rows.push({rowIndex:u,rowHeight:n}),((i+=n)>=t||u===e.length-1)&&(r[a]=o,o.key=l++,o.firstRowIndex=s,o.lastRowIndex=u,o={firstRowIndex:null,lastRowIndex:null,rows:[]},a+=i,s=u+1,i=0);return r}t.exports=function(e,t){var n=l(t.cells.values),p=function(e){return e.slice(t.header.values.length,e.length)},h=l(t.header.values);h.length&&!h[0].length&&(h[0]=[""],h=l(h));var m=h.concat(p(n).map(function(){return u((h[0]||[""]).length)})),v=t.domain,g=Math.floor(e._fullLayout._size.w*(v.x[1]-v.x[0])),y=Math.floor(e._fullLayout._size.h*(v.y[1]-v.y[0])),b=t.header.values.length?m[0].map(function(){return t.header.height}):[r.emptyHeaderHeight],x=n.length?n[0].map(function(){return t.cells.height}):[],_=b.reduce(s,0),w=y-_,T=w+r.uplift,k=d(x,T),C=d(b,_),E=f(C,[]),M=f(k,E),A={},S=t._fullInput.columnorder.concat(p(n.map(function(e,t){return t}))),O=m.map(function(e,n){var r=Array.isArray(t.columnwidth)?t.columnwidth[Math.min(n,t.columnwidth.length-1)]:t.columnwidth;return i(r)?Number(r):1}),P=O.reduce(s,0);O=O.map(function(e){return e/P*g});var R=Math.max(o(t.header.line.width),o(t.cells.line.width)),L={key:t.index,translateX:v.x[0]*e._fullLayout._size.w,translateY:e._fullLayout._size.h*(1-v.y[1]),size:e._fullLayout._size,width:g,maxLineWidth:R,height:y,columnOrder:S,groupHeight:y,rowBlocks:M,headerRowBlocks:E,scrollY:0,cells:a({},t.cells,{values:n}),headerCells:a({},t.header,{values:m}),gdColumns:m.map(function(e){return e[0]}),gdColumnsOriginalOrder:m.map(function(e){return e[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:m.map(function(e,t){var n=A[e];A[e]=(n||0)+1;var r=e+"__"+A[e];return{key:r,label:e,specIndex:t,xIndex:S[t],xScale:c,x:void 0,calcdata:void 0,columnWidth:O[t]}})};return L.columns.forEach(function(e){e.calcdata=L,e.x=c(e)}),L}},{"../../lib/extend":685,"./constants":1138,"fast-isnumeric":214}],1140:[function(e,t,n){"use strict";var r=e("../../lib/extend").extendFlat;n.splitToPanels=function(e){var t=[0,0],n=r({},e,{key:"header",type:"header",page:0,prevPages:t,currentRepaint:[null,null],dragHandle:!0,values:e.calcdata.headerCells.values[e.specIndex],rowBlocks:e.calcdata.headerRowBlocks,calcdata:r({},e.calcdata,{cells:e.calcdata.headerCells})}),a=r({},e,{key:"cells1",type:"cells",page:0,prevPages:t,currentRepaint:[null,null],dragHandle:!1,values:e.calcdata.cells.values[e.specIndex],rowBlocks:e.calcdata.rowBlocks}),i=r({},e,{key:"cells2",type:"cells",page:1,prevPages:t,currentRepaint:[null,null],dragHandle:!1,values:e.calcdata.cells.values[e.specIndex],rowBlocks:e.calcdata.rowBlocks});return[a,i,n]},n.splitToCells=function(e){var t=function(e){var t=e.rowBlocks[e.page],n=t?t.rows[0].rowIndex:0,r=t?n+t.rows.length:0;return[n,r]}(e);return(e.values||[]).slice(t[0],t[1]).map(function(n,r){var a="string"==typeof n&&n.match(/[<$&> ]/)?"_keybuster_"+Math.random():"";return{keyWithinBlock:r+a,key:t[0]+r,column:e,calcdata:e.calcdata,page:e.page,rowBlocks:e.rowBlocks,value:n}})}},{"../../lib/extend":685}],1141:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("./attributes"),i=e("../../plots/domain").defaults;t.exports=function(e,t,n,o){function s(n,i){return r.coerce(e,t,a,n,i)}i(t,o,s),s("columnwidth"),s("header.values"),s("header.format"),s("header.align"),s("header.prefix"),s("header.suffix"),s("header.height"),s("header.line.width"),s("header.line.color"),s("header.fill.color"),r.coerceFont(s,"header.font",r.extendFlat({},o.font)),function(e,t){for(var n=e.columnorder||[],r=e.header.values.length,a=n.slice(0,r),i=a.slice().sort(function(e,t){return e-t}),o=a.map(function(e){return i.indexOf(e)}),s=o.length;s<r;s++)o.push(s);t("columnorder",o)}(t,s),s("cells.values"),s("cells.format"),s("cells.align"),s("cells.prefix"),s("cells.suffix"),s("cells.height"),s("cells.line.width"),s("cells.line.color"),s("cells.fill.color"),r.coerceFont(s,"cells.font",r.extendFlat({},o.font)),t._length=null}},{"../../lib":696,"../../plots/domain":770,"./attributes":1135}],1142:[function(e,t,n){"use strict";var r={};r.attributes=e("./attributes"),r.supplyDefaults=e("./defaults"),r.calc=e("./calc"),r.plot=e("./plot"),r.moduleType="trace",r.name="table",r.basePlotModule=e("./base_plot"),r.categories=["noOpacity"],r.meta={},t.exports=r},{"./attributes":1135,"./base_plot":1136,"./calc":1137,"./defaults":1141,"./plot":1143}],1143:[function(e,t,n){"use strict";var r=e("./constants"),a=e("d3"),i=e("../../lib/gup"),o=e("../../components/drawing"),s=e("../../lib/svg_text_utils"),l=e("../../lib").raiseToTop,u=e("../../lib").cancelTransition,c=e("./data_preparation_helper"),f=e("./data_split_helpers"),d=e("../../components/color");function p(e){return Math.ceil(e.calcdata.maxLineWidth/2)}function h(e,t){return"clip"+e._fullLayout._uid+"_scrollAreaBottomClip_"+t.key}function m(e,t){return"clip"+e._fullLayout._uid+"_columnBoundaryClippath_"+t.calcdata.key+"_"+t.specIndex}function v(e){return[].concat.apply([],e.map(function(e){return e})).map(function(e){return e.__data__})}function g(e,t,n){var o=e.selectAll("."+r.cn.scrollbarKit).data(i.repeat,i.keyFun);o.enter().append("g").classed(r.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),o.each(function(e){var t=e.scrollbarState;t.totalHeight=function(e){var t=e.rowBlocks;return L(t,t.length-1)+(t.length?D(t[t.length-1],1/0):1)}(e),t.scrollableAreaHeight=e.groupHeight-C(e),t.currentlyVisibleHeight=Math.min(t.totalHeight,t.scrollableAreaHeight),t.ratio=t.currentlyVisibleHeight/t.totalHeight,t.barLength=Math.max(t.ratio*t.currentlyVisibleHeight,r.goldenRatio*r.scrollbarWidth),t.barWiggleRoom=t.currentlyVisibleHeight-t.barLength,t.wiggleRoom=Math.max(0,t.totalHeight-t.scrollableAreaHeight),t.topY=0===t.barWiggleRoom?0:e.scrollY/t.wiggleRoom*t.barWiggleRoom,t.bottomY=t.topY+t.barLength,t.dragMultiplier=t.wiggleRoom/t.barWiggleRoom}).attr("transform",function(e){var t=e.width+r.scrollbarWidth/2+r.scrollbarOffset;return"translate("+t+" "+C(e)+")"});var s=o.selectAll("."+r.cn.scrollbar).data(i.repeat,i.keyFun);s.enter().append("g").classed(r.cn.scrollbar,!0);var l=s.selectAll("."+r.cn.scrollbarSlider).data(i.repeat,i.keyFun);l.enter().append("g").classed(r.cn.scrollbarSlider,!0),l.attr("transform",function(e){return"translate(0 "+(e.scrollbarState.topY||0)+")"});var u=l.selectAll("."+r.cn.scrollbarGlyph).data(i.repeat,i.keyFun);u.enter().append("line").classed(r.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",r.scrollbarWidth).attr("stroke-linecap","round").attr("y1",r.scrollbarWidth/2),u.attr("y2",function(e){return e.scrollbarState.barLength-r.scrollbarWidth/2}).attr("stroke-opacity",function(e){return e.columnDragInProgress||!e.scrollbarState.barWiggleRoom||n?0:.4}),u.transition().delay(0).duration(0),u.transition().delay(r.scrollbarHideDelay).duration(r.scrollbarHideDuration).attr("stroke-opacity",0);var c=s.selectAll("."+r.cn.scrollbarCaptureZone).data(i.repeat,i.keyFun);c.enter().append("line").classed(r.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",r.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(n){var r=a.event.y,i=this.getBoundingClientRect(),o=n.scrollbarState,s=r-i.top,l=a.scale.linear().domain([0,o.scrollableAreaHeight]).range([0,o.totalHeight]).clamp(!0);o.topY<=s&&s<=o.bottomY||M(t,e,null,l(s-o.barLength/2))(n)}).call(a.behavior.drag().origin(function(e){return a.event.stopPropagation(),e.scrollbarState.scrollbarScrollInProgress=!0,e}).on("drag",M(t,e)).on("dragend",function(){})),c.attr("y2",function(e){return e.scrollbarState.scrollableAreaHeight}),t._context.staticPlot&&(u.remove(),c.remove())}function y(e,t,n,s){var l=function(e){var t=e.selectAll("."+r.cn.columnCells).data(i.repeat,i.keyFun);return t.enter().append("g").classed(r.cn.columnCells,!0),t.exit().remove(),t}(n),u=function(e){var t=e.selectAll("."+r.cn.columnCell).data(f.splitToCells,function(e){return e.keyWithinBlock});return t.enter().append("g").classed(r.cn.columnCell,!0),t.exit().remove(),t}(l);!function(e){e.each(function(e,t){var n=e.calcdata.cells.font,r=e.column.specIndex,a={size:_(n.size,r,t),color:_(n.color,r,t),family:_(n.family,r,t)};e.rowNumber=e.key,e.align=_(e.calcdata.cells.align,r,t),e.cellBorderWidth=_(e.calcdata.cells.line.width,r,t),e.font=a})}(u);var c=function(e){var t=e.selectAll("."+r.cn.cellRect).data(i.repeat,function(e){return e.keyWithinBlock});return t.enter().append("rect").classed(r.cn.cellRect,!0),t}(u);!function(e){e.attr("width",function(e){return e.column.columnWidth}).attr("stroke-width",function(e){return e.cellBorderWidth}).each(function(e){var t=a.select(this);d.stroke(t,_(e.calcdata.cells.line.color,e.column.specIndex,e.rowNumber)),d.fill(t,_(e.calcdata.cells.fill.color,e.column.specIndex,e.rowNumber))})}(c);var p=function(e){var t=e.selectAll("."+r.cn.cellTextHolder).data(i.repeat,function(e){return e.keyWithinBlock});return t.enter().append("g").classed(r.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),t}(u),h=function(e){var t=e.selectAll("."+r.cn.cellText).data(i.repeat,function(e){return e.keyWithinBlock});return t.enter().append("text").classed(r.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){a.event.stopPropagation()}),t}(p);!function(e){e.each(function(e){o.font(a.select(this),e.font)})}(h),b(h,t,s,e),R(u)}function b(e,t,n,i){e.text(function(e){var t=e.column.specIndex,n=e.rowNumber,i=e.value,o="string"==typeof i,s=o&&i.match(/<br>/i),l=!o||s;e.mayHaveMarkup=o&&i.match(/[<&>]/);var u=function(e){return"string"==typeof e&&e.match(r.latexCheck)}(i);e.latex=u;var c,f,d=u?"":_(e.calcdata.cells.prefix,t,n)||"",p=u?"":_(e.calcdata.cells.suffix,t,n)||"",h=u?null:_(e.calcdata.cells.format,t,n)||null,m=d+(h?a.format(h)(e.value):e.value)+p;if(e.wrappingNeeded=!e.wrapped&&!l&&!u&&(c=x(m)),e.cellHeightMayIncrease=s||u||e.mayHaveMarkup||(void 0===c?x(m):c),e.needsConvertToTspans=e.mayHaveMarkup||e.wrappingNeeded||e.latex,e.wrappingNeeded){var v=" "===r.wrapSplitCharacter?m.replace(/<a href=/gi,"<a_href="):m,g=v.split(r.wrapSplitCharacter),y=" "===r.wrapSplitCharacter?g.map(function(e){return e.replace(/<a_href=/gi,"<a href=")}):g;e.fragments=y.map(function(e){return{text:e,width:null}}),e.fragments.push({fragment:r.wrapSpacer,width:null}),f=y.join(r.lineBreaker)+r.lineBreaker+r.wrapSpacer}else delete e.fragments,f=m;return f}).attr("dy",function(e){return e.needsConvertToTspans?0:"0.75em"}).each(function(e){var o=a.select(this),l=e.wrappingNeeded?S:O;e.needsConvertToTspans?s.convertToTspans(o,i,l(n,this,t,i,e)):a.select(this.parentNode).attr("transform",function(e){return"translate("+P(e)+" "+r.cellPad+")"}).attr("text-anchor",function(e){return{left:"start",center:"middle",right:"end"}[e.align]})})}function x(e){return-1!==e.indexOf(r.wrapSplitCharacter)}function _(e,t,n){if(Array.isArray(e)){var r=e[Math.min(t,e.length-1)];return Array.isArray(r)?r[Math.min(n,r.length-1)]:r}return e}function w(e,t,n){e.transition().ease(r.releaseTransitionEase).duration(r.releaseTransitionDuration).attr("transform","translate("+t.x+" "+n+")")}function T(e){return"cells"===e.type}function k(e){return"header"===e.type}function C(e){var t=e.rowBlocks.length?e.rowBlocks[0].auxiliaryBlocks:[];return t.reduce(function(e,t){return e+D(t,1/0)},0)}function E(e,t,n){var r=v(t)[0];if(void 0!==r){var a=r.rowBlocks,i=r.calcdata,o=L(a,a.length),s=r.calcdata.groupHeight-C(r),l=i.scrollY=Math.max(0,Math.min(o-s,i.scrollY)),u=function(e,t,n){for(var r=[],a=0,i=0;i<e.length;i++){for(var o=e[i],s=o.rows,l=0,u=0;u<s.length;u++)l+=s[u].rowHeight;o.allRowsHeight=l;var c=a+l,f=t,d=f+n;f<c&&d>a&&r.push(i),a+=l}return r}(a,l,s);1===u.length&&(u[0]===a.length-1?u.unshift(u[0]-1):u.push(u[0]+1)),u[0]%2&&u.reverse(),t.each(function(e,t){e.page=u[t],e.scrollY=l}),t.attr("transform",function(e){var t=L(e.rowBlocks,e.page)-e.scrollY;return"translate(0 "+t+")"}),e&&(A(e,n,t,u,r.prevPages,r,0),A(e,n,t,u,r.prevPages,r,1),g(n,e))}}function M(e,t,n,i){return function(o){var s=o.calcdata?o.calcdata:o,l=t.filter(function(e){return s.key===e.key}),u=n||s.scrollbarState.dragMultiplier;s.scrollY=void 0===i?s.scrollY+u*a.event.dy:i;var c=l.selectAll("."+r.cn.yColumn).selectAll("."+r.cn.columnBlock).filter(T);E(e,c,l)}}function A(e,t,n,r,a,i,o){var s=r[o]!==a[o];s&&(clearTimeout(i.currentRepaint[o]),i.currentRepaint[o]=setTimeout(function(){var i=n.filter(function(e,t){return t===o&&r[t]!==a[t]});y(e,t,i,n),a[o]=r[o]}))}function S(e,t,n,i){return function(){var o=a.select(t.parentNode);o.each(function(e){var t=e.fragments;o.selectAll("tspan.line").each(function(e,n){t[n].width=this.getComputedTextLength()});var n,a,i=t[t.length-1].width,s=t.slice(0,-1),l=[],u=0,c=e.column.columnWidth-2*r.cellPad;for(e.value="";s.length;)n=s.shift(),a=n.width+i,u+a>c&&(e.value+=l.join(r.wrapSpacer)+r.lineBreaker,l=[],u=0),l.push(n.text),u+=a;u&&(e.value+=l.join(r.wrapSpacer)),e.wrapped=!0}),o.selectAll("tspan.line").remove(),b(o.select("."+r.cn.cellText),n,e,i),a.select(t.parentNode.parentNode).call(R)}}function O(e,t,n,i,o){return function(){if(!o.settledY){var s=a.select(t.parentNode),l=z(o),u=o.key-l.firstRowIndex,c=l.rows[u].rowHeight,f=o.cellHeightMayIncrease?t.parentNode.getBoundingClientRect().height+2*r.cellPad:c,d=Math.max(f,c),p=d-l.rows[u].rowHeight;p&&(l.rows[u].rowHeight=d,e.selectAll("."+r.cn.columnCell).call(R),E(null,e.filter(T),0),g(n,i,!0)),s.attr("transform",function(){var e=this.parentNode,t=e.getBoundingClientRect(),n=a.select(this.parentNode).select("."+r.cn.cellRect).node().getBoundingClientRect(),i=this.transform.baseVal.consolidate(),s=n.top-t.top+(i?i.matrix.f:r.cellPad);return"translate("+P(o,a.select(this.parentNode).select("."+r.cn.cellTextHolder).node().getBoundingClientRect().width)+" "+s+")"}),o.settledY=!0}}}function P(e,t){switch(e.align){case"left":return r.cellPad;case"right":return e.column.columnWidth-(t||0)-r.cellPad;case"center":return(e.column.columnWidth-(t||0))/2;default:return r.cellPad}}function R(e){e.attr("transform",function(e){var t=e.rowBlocks[0].auxiliaryBlocks.reduce(function(e,t){return e+D(t,1/0)},0),n=z(e),r=D(n,e.key),a=r+t;return"translate(0 "+a+")"}).selectAll("."+r.cn.cellRect).attr("height",function(e){return function(e,t){return e.rows[t-e.firstRowIndex]}(z(e),e.key).rowHeight})}function L(e,t){for(var n=0,r=t-1;r>=0;r--)n+=I(e[r]);return n}function D(e,t){for(var n=0,r=0;r<e.rows.length&&e.rows[r].rowIndex<t;r++)n+=e.rows[r].rowHeight;return n}function I(e){var t=e.allRowsHeight;if(void 0!==t)return t;for(var n=0,r=0;r<e.rows.length;r++)n+=e.rows[r].rowHeight;return e.allRowsHeight=n,n}function z(e){return e.rowBlocks[e.page]}t.exports=function(e,t){var n=e._fullLayout._paper.selectAll("."+r.cn.table).data(t.map(function(t){var n=i.unwrap(t),r=n.trace;return c(e,r)}),i.keyFun);n.exit().remove(),n.enter().append("g").classed(r.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),n.attr("width",function(e){return e.width+e.size.l+e.size.r}).attr("height",function(e){return e.height+e.size.t+e.size.b}).attr("transform",function(e){return"translate("+e.translateX+","+e.translateY+")"});var s=n.selectAll("."+r.cn.tableControlView).data(i.repeat,i.keyFun);s.enter().append("g").classed(r.cn.tableControlView,!0).style("box-sizing","content-box").on("mousemove",function(t){s.filter(function(e){return t===e}).call(g,e)}).on("mousewheel",function(t){t.scrollbarState.wheeling||(t.scrollbarState.wheeling=!0,a.event.stopPropagation(),a.event.preventDefault(),M(e,s,null,t.scrollY+a.event.deltaY)(t),t.scrollbarState.wheeling=!1)}).call(g,e,!0),s.attr("transform",function(e){return"translate("+e.size.l+" "+e.size.t+")"});var d=s.selectAll("."+r.cn.scrollBackground).data(i.repeat,i.keyFun);d.enter().append("rect").classed(r.cn.scrollBackground,!0).attr("fill","none"),d.attr("width",function(e){return e.width}).attr("height",function(e){return e.height}),s.each(function(t){o.setClipUrl(a.select(this),h(e,t))});var b=s.selectAll("."+r.cn.yColumn).data(function(e){return e.columns},i.keyFun);b.enter().append("g").classed(r.cn.yColumn,!0),b.exit().remove(),b.attr("transform",function(e){return"translate("+e.x+" 0)"}).call(a.behavior.drag().origin(function(t){var n=a.select(this);return w(n,t,-r.uplift),l(this),t.calcdata.columnDragInProgress=!0,g(s.filter(function(e){return t.calcdata.key===e.key}),e),t}).on("drag",function(e){var t=a.select(this),n=function(t){return(e===t?a.event.x:t.x)+t.columnWidth/2};e.x=Math.max(-r.overdrag,Math.min(e.calcdata.width+r.overdrag-e.columnWidth,a.event.x));var i=v(b).filter(function(t){return t.calcdata.key===e.calcdata.key}),o=i.sort(function(e,t){return n(e)-n(t)});o.forEach(function(t,n){t.xIndex=n,t.x=e===t?t.x:t.xScale(t)}),b.filter(function(t){return e!==t}).transition().ease(r.transitionEase).duration(r.transitionDuration).attr("transform",function(e){return"translate("+e.x+" 0)"}),t.call(u).attr("transform","translate("+e.x+" -"+r.uplift+" )")}).on("dragend",function(t){var n=a.select(this),r=t.calcdata;t.x=t.xScale(t),t.calcdata.columnDragInProgress=!1,w(n,t,0),function(e,t,n){var r=t.gdColumnsOriginalOrder;t.gdColumns.sort(function(e,t){return n[r.indexOf(e)]-n[r.indexOf(t)]}),t.columnorder=n,e.emit("plotly_restyle")}(e,r,r.columns.map(function(e){return e.xIndex}))})),b.each(function(t){o.setClipUrl(a.select(this),m(e,t))});var x=b.selectAll("."+r.cn.columnBlock).data(f.splitToPanels,i.keyFun);x.enter().append("g").classed(r.cn.columnBlock,!0).attr("id",function(e){return e.key}),x.style("cursor",function(e){return e.dragHandle?"ew-resize":e.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var _=x.filter(k),C=x.filter(T);C.call(a.behavior.drag().origin(function(e){return a.event.stopPropagation(),e}).on("drag",M(e,s,-1)).on("dragend",function(){})),y(e,s,_,x),y(e,s,C,x);var A=s.selectAll("."+r.cn.scrollAreaClip).data(i.repeat,i.keyFun);A.enter().append("clipPath").classed(r.cn.scrollAreaClip,!0).attr("id",function(t){return h(e,t)});var S=A.selectAll("."+r.cn.scrollAreaClipRect).data(i.repeat,i.keyFun);S.enter().append("rect").classed(r.cn.scrollAreaClipRect,!0).attr("x",-r.overdrag).attr("y",-r.uplift).attr("fill","none"),S.attr("width",function(e){return e.width+2*r.overdrag}).attr("height",function(e){return e.height+r.uplift});var O=b.selectAll("."+r.cn.columnBoundary).data(i.repeat,i.keyFun);O.enter().append("g").classed(r.cn.columnBoundary,!0);var P=b.selectAll("."+r.cn.columnBoundaryClippath).data(i.repeat,i.keyFun);P.enter().append("clipPath").classed(r.cn.columnBoundaryClippath,!0),P.attr("id",function(t){return m(e,t)});var R=P.selectAll("."+r.cn.columnBoundaryRect).data(i.repeat,i.keyFun);R.enter().append("rect").classed(r.cn.columnBoundaryRect,!0).attr("fill","none"),R.attr("width",function(e){return e.columnWidth+2*p(e)}).attr("height",function(e){return e.calcdata.height+2*p(e)+r.uplift}).attr("x",function(e){return-p(e)}).attr("y",function(e){return-p(e)}),E(null,C,s)}},{"../../components/color":570,"../../components/drawing":595,"../../lib":696,"../../lib/gup":693,"../../lib/svg_text_utils":720,"./constants":1138,"./data_preparation_helper":1139,"./data_split_helpers":1140,d3:148}],1144:[function(e,t,n){"use strict";var r=e("../box/attributes"),a=e("../../lib/extend").extendFlat;t.exports={y:r.y,x:r.x,x0:r.x0,y0:r.y0,name:r.name,orientation:a({},r.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:r.fillcolor,points:a({},r.boxpoints,{}),jitter:a({},r.jitter,{}),pointpos:a({},r.pointpos,{}),marker:r.marker,text:r.text,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"plot"},selected:r.selected,unselected:r.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},{"../../lib/extend":685,"../box/attributes":859}],1145:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("../../plots/cartesian/axes"),i=e("../box/calc"),o=e("./helpers"),s=e("../../constants/numerical").BADNUM;function l(e,t,n){var a=t.max-t.min;if(!a)return 1;if(e.bandwidth)return Math.max(e.bandwidth,a/1e4);var i=n.length,o=r.stdev(n,i-1,t.mean);return Math.max(function(e,t,n){return 1.059*Math.min(t,n/1.349)*Math.pow(e,-.2)}(i,o,t.q3-t.q1),a/100)}function u(e,t,n,r){var i,o=e.spanmode,l=e.span||[],u=[t.min,t.max],c=[t.min-2*r,t.max+2*r];function f(r){var a=l[r],i=n.d2c(a,0,e[t.valLetter+"calendar"]);return i===s?c[r]:i}var d={type:"linear",range:i="soft"===o?c:"hard"===o?u:[f(0),f(1)]};return a.setConvert(d),d.cleanRange(),i}t.exports=function(e,t){var n=i(e,t);if(n[0].t.empty)return n;var s=e._fullLayout,c=a.getFromId(e,t["h"===t.orientation?"xaxis":"yaxis"]),f=s._violinScaleGroupStats,d=t.scalegroup,p=f[d];p||(p=f[d]={maxWidth:0,maxCount:0});for(var h=1/0,m=-1/0,v=0;v<n.length;v++){var g=n[v],y=g.pts.map(o.extractVal),b=g.bandwidth=l(t,g,y),x=g.span=u(t,g,c,b),_=x[1]-x[0],w=Math.ceil(_/(b/3)),T=_/w;if(!isFinite(T)||!isFinite(w))return r.error("Something went wrong with computing the violin span"),n[0].t.empty=!0,n;var k=o.makeKDE(g,t,y);g.density=new Array(w);for(var C=0,E=x[0];E<x[1]+T/2;C++,E+=T){var M=k(E);p.maxWidth=Math.max(p.maxWidth,M),g.density[C]={v:M,t:E}}p.maxCount=Math.max(p.maxCount,y.length),h=Math.min(h,x[0]),m=Math.max(m,x[1])}var A=a.findExtremes(c,[h,m],{padded:!0});return t._extremes[c._id]=A,n[0].t.labels.kde=r._(e,"kde:"),n}},{"../../constants/numerical":673,"../../lib":696,"../../plots/cartesian/axes":744,"../box/calc":860,"./helpers":1148}],1146:[function(e,t,n){"use strict";var r=e("../box/cross_trace_calc").setPositionOffset,a=["v","h"];t.exports=function(e,t){for(var n=e.calcdata,i=t.xaxis,o=t.yaxis,s=0;s<a.length;s++){for(var l=a[s],u="h"===l?o:i,c=[],f=0,d=0,p=0;p<n.length;p++){var h=n[p],m=h[0].t,v=h[0].trace;!0!==v.visible||"violin"!==v.type||m.empty||v.orientation!==l||v.xaxis!==i._id||v.yaxis!==o._id||(c.push(p),!1!==v.points&&(f=Math.max(f,v.jitter-v.pointpos-1),d=Math.max(d,v.jitter+v.pointpos-1)))}r("violin",e,c,u,[f,d])}}},{"../box/cross_trace_calc":861}],1147:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("../../components/color"),i=e("../box/defaults"),o=e("./attributes");t.exports=function(e,t,n,s){function l(n,a){return r.coerce(e,t,o,n,a)}function u(n,a){return r.coerce2(e,t,o,n,a)}if(i.handleSampleDefaults(e,t,l,s),!1!==t.visible){l("bandwidth"),l("scalegroup",t.name),l("scalemode"),l("side");var c,f=l("span");Array.isArray(f)&&(c="manual"),l("spanmode",c);var d=l("line.color",(e.marker||{}).color||n),p=l("line.width"),h=l("fillcolor",a.addOpacity(t.line.color,.5));i.handlePointsDefaults(e,t,l,{prefix:""});var m=u("box.width"),v=u("box.fillcolor",h),g=u("box.line.color",d),y=u("box.line.width",p),b=l("box.visible",Boolean(m||v||g||y));b||(t.box={visible:!1});var x=u("meanline.color",d),_=u("meanline.width",p),w=l("meanline.visible",Boolean(x||_));w||(t.meanline={visible:!1})}}},{"../../components/color":570,"../../lib":696,"../box/defaults":862,"./attributes":1144}],1148:[function(e,t,n){"use strict";var r=e("../../lib"),a={gaussian:function(e){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*e*e)}};n.makeKDE=function(e,t,n){var r=n.length,i=a.gaussian,o=e.bandwidth,s=1/(r*o);return function(e){for(var t=0,a=0;a<r;a++)t+=i((e-n[a])/o);return s*t}},n.getPositionOnKdePath=function(e,t,n){var a,i;"h"===t.orientation?(a="y",i="x"):(a="x",i="y");var o=r.findPointOnPath(e.path,n,i,{pathLength:e.pathLength}),s=e.posCenterPx,l=o[a],u="both"===t.side?2*s-l:s;return[l,u]},n.getKdeValue=function(e,t,r){var a=e.pts.map(n.extractVal),i=n.makeKDE(e,t,a);return i(r)/e.posDensityScale},n.extractVal=function(e){return e.v}},{"../../lib":696}],1149:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("../../plots/cartesian/axes"),i=e("../box/hover"),o=e("./helpers");t.exports=function(e,t,n,s,l){var u,c,f=e.cd,d=f[0].trace,p=d.hoveron,h=-1!==p.indexOf("violins"),m=-1!==p.indexOf("kde"),v=[];if(h||m){var g=i.hoverOnBoxes(e,t,n,s);if(h&&(v=v.concat(g)),m&&g.length>0){var y,b,x,_,w,T=e.xa,k=e.ya;"h"===d.orientation?(w=t,y="y",x=k,b="x",_=T):(w=n,y="x",x=T,b="y",_=k);var C=f[e.index];if(w>=C.span[0]&&w<=C.span[1]){var E=r.extendFlat({},e),M=_.c2p(w,!0),A=o.getKdeValue(C,d,w),S=o.getPositionOnKdePath(C,d,M),O=x._offset,P=x._length;E[y+"0"]=S[0],E[y+"1"]=S[1],E[b+"0"]=E[b+"1"]=M,E[b+"Label"]=b+": "+a.hoverLabelText(_,w)+", "+f[0].t.labels.kde+" "+A.toFixed(3),E.spikeDistance=g[0].spikeDistance;var R=y+"Spike";E[R]=g[0][R],g[0].spikeDistance=void 0,g[0][R]=void 0,v.push(E),(c={stroke:e.color})[y+"1"]=r.constrain(O+S[0],O,O+P),c[y+"2"]=r.constrain(O+S[1],O,O+P),c[b+"1"]=c[b+"2"]=_._offset+M}}}-1!==p.indexOf("points")&&(u=i.hoverOnPoints(e,t,n));var L=l.selectAll(".violinline-"+d.uid).data(c?[0]:[]);return L.enter().append("line").classed("violinline-"+d.uid,!0).attr("stroke-width",1.5),L.exit().remove(),L.attr(c),"closest"===s?u?[u]:v:u?(v.push(u),v):v}},{"../../lib":696,"../../plots/cartesian/axes":744,"../box/hover":864,"./helpers":1148}],1150:[function(e,t,n){"use strict";t.exports={attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults"),supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),crossTraceCalc:e("./cross_trace_calc"),plot:e("./plot"),style:e("./style"),styleOnSelect:e("../scatter/style").styleOnSelect,hoverPoints:e("./hover"),selectPoints:e("../box/select"),moduleType:"trace",name:"violin",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":756,"../box/select":869,"../scatter/style":1066,"./attributes":1144,"./calc":1145,"./cross_trace_calc":1146,"./defaults":1147,"./hover":1149,"./layout_attributes":1151,"./layout_defaults":1152,"./plot":1153,"./style":1154}],1151:[function(e,t,n){"use strict";var r=e("../box/layout_attributes"),a=e("../../lib").extendFlat;t.exports={violinmode:a({},r.boxmode,{}),violingap:a({},r.boxgap,{}),violingroupgap:a({},r.boxgroupgap,{})}},{"../../lib":696,"../box/layout_attributes":866}],1152:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("./layout_attributes"),i=e("../box/layout_defaults");t.exports=function(e,t,n){i._supply(e,t,n,function(n,i){return r.coerce(e,t,a,n,i)},"violin")}},{"../../lib":696,"../box/layout_defaults":867,"./layout_attributes":1151}],1153:[function(e,t,n){"use strict";var r=e("d3"),a=e("../../lib"),i=e("../../components/drawing"),o=e("../box/plot"),s=e("../scatter/line_points"),l=e("./helpers");t.exports=function(e,t,n,u){var c=e._fullLayout,f=t.xaxis,d=t.yaxis;function p(e){var t=s(e,{xaxis:f,yaxis:d,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0});return i.smoothopen(t[0],1)}a.makeTraceGroups(u,n,"trace violins").each(function(e){var n=r.select(this),i=e[0],s=i.t,u=i.trace;t.isRangePlot||(i.node3=n);var h=c._numViolins,m="group"===c.violinmode&&h>1,v=1-c.violingap,g=s.bdPos=s.dPos*v*(1-c.violingroupgap)/(m?h:1),y=s.bPos=m?2*s.dPos*((s.num+.5)/h-.5)*v:0;if(s.wHover=s.dPos*(m?v/h:1),!0!==u.visible||s.empty)n.remove();else{var b=t[s.valLetter+"axis"],x=t[s.posLetter+"axis"],_="both"===u.side,w=_||"positive"===u.side,T=_||"negative"===u.side,k=c._violinScaleGroupStats[u.scalegroup],C=n.selectAll("path.violin").data(a.identity);C.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","violin"),C.exit().remove(),C.each(function(e){var t,n,a,i,o,l,c,f,d=r.select(this),h=e.density,m=h.length,v=e.pos+y,C=x.c2p(v);switch(u.scalemode){case"width":t=k.maxWidth/g;break;case"count":t=k.maxWidth/g*(k.maxCount/e.pts.length)}if(w){for(c=new Array(m),o=0;o<m;o++)(f=c[o]={})[s.posLetter]=v+h[o].v/t,f[s.valLetter]=h[o].t;n=p(c)}if(T){for(c=new Array(m),l=0,o=m-1;l<m;l++,o--)(f=c[l]={})[s.posLetter]=v-h[o].v/t,f[s.valLetter]=h[o].t;a=p(c)}if(_)i=n+"L"+a.substr(1)+"Z";else{var E=[C,b.c2p(h[0].t)],M=[C,b.c2p(h[m-1].t)];"h"===u.orientation&&(E.reverse(),M.reverse()),i=w?"M"+E+"L"+n.substr(1)+"L"+M:"M"+M+"L"+a.substr(1)+"L"+E}d.attr("d",i),e.posCenterPx=C,e.posDensityScale=t*g,e.path=d.node(),e.pathLength=e.path.getTotalLength()/(_?2:1)});var E,M,A,S=u.box,O=S.width,P=(S.line||{}).width;_?(E=g*O,M=0):w?(E=[0,g*O/2],M=-P):(E=[g*O/2,0],M=P),o.plotBoxAndWhiskers(n,{pos:x,val:b},u,{bPos:y,bdPos:E,bPosPxOffset:M}),o.plotBoxMean(n,{pos:x,val:b},u,{bPos:y,bdPos:E,bPosPxOffset:M}),!u.box.visible&&u.meanline.visible&&(A=a.identity);var R=n.selectAll("path.meanline").data(A||[]);R.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect","non-scaling-stroke"),R.exit().remove(),R.each(function(e){var t=b.c2p(e.mean,!0),n=l.getPositionOnKdePath(e,u,t);r.select(this).attr("d","h"===u.orientation?"M"+t+","+n[0]+"V"+n[1]:"M"+n[0]+","+t+"H"+n[1])}),o.plotPoints(n,{x:f,y:d},u,s)}})}},{"../../components/drawing":595,"../../lib":696,"../box/plot":868,"../scatter/line_points":1057,"./helpers":1148,d3:148}],1154:[function(e,t,n){"use strict";var r=e("d3"),a=e("../../components/color"),i=e("../scatter/style").stylePoints;t.exports=function(e,t){var n=t?t[0].node3:r.select(e).selectAll("g.trace.violins");n.style("opacity",function(e){return e[0].trace.opacity}),n.each(function(t){var n=t[0].trace,o=r.select(this),s=n.box||{},l=s.line||{},u=n.meanline||{},c=u.width;o.selectAll("path.violin").style("stroke-width",n.line.width+"px").call(a.stroke,n.line.color).call(a.fill,n.fillcolor),o.selectAll("path.box").style("stroke-width",l.width+"px").call(a.stroke,l.color).call(a.fill,s.fillcolor);var f={"stroke-width":c+"px","stroke-dasharray":2*c+"px,"+c+"px"};o.selectAll("path.mean").style(f).call(a.stroke,u.color),o.selectAll("path.meanline").style(f).call(a.stroke,u.color),i(o,n,e)})}},{"../../components/color":570,"../scatter/style":1066,d3:148}],1155:[function(e,t,n){"use strict";var r=e("../plots/cartesian/axes"),a=e("../lib"),i=e("../plot_api/plot_schema"),o=e("./helpers").pointsAccessorFunction,s=e("../constants/numerical").BADNUM;n.moduleType="transform",n.name="aggregate";var l=n.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},u=l.aggregations;function c(e,t,n,i){if(i.enabled){for(var o=i.target,l=a.nestedProperty(t,o),u=l.get(),c=r.getDataConversions(e,t,o,u),h=function(e,t){var n=e.func,r=t.d2c,a=t.c2d;switch(n){case"count":return f;case"first":return d;case"last":return p;case"sum":return function(e,t){for(var n=0,i=0;i<t.length;i++){var o=r(e[t[i]]);o!==s&&(n+=o)}return a(n)};case"avg":return function(e,t){for(var n=0,i=0,o=0;o<t.length;o++){var l=r(e[t[o]]);l!==s&&(n+=l,i++)}return i?a(n/i):s};case"min":return function(e,t){for(var n=1/0,i=0;i<t.length;i++){var o=r(e[t[i]]);o!==s&&(n=Math.min(n,o))}return n===1/0?s:a(n)};case"max":return function(e,t){for(var n=-1/0,i=0;i<t.length;i++){var o=r(e[t[i]]);o!==s&&(n=Math.max(n,o))}return n===-1/0?s:a(n)};case"range":return function(e,t){for(var n=1/0,i=-1/0,o=0;o<t.length;o++){var l=r(e[t[o]]);l!==s&&(n=Math.min(n,l),i=Math.max(i,l))}return i===-1/0||n===1/0?s:a(i-n)};case"change":return function(e,t){var n=r(e[t[0]]),i=r(e[t[t.length-1]]);return n===s||i===s?s:a(i-n)};case"median":return function(e,t){for(var n=[],i=0;i<t.length;i++){var o=r(e[t[i]]);o!==s&&n.push(o)}if(!n.length)return s;n.sort();var l=(n.length-1)/2;return a((n[Math.floor(l)]+n[Math.ceil(l)])/2)};case"mode":return function(e,t){for(var n={},i=0,o=s,l=0;l<t.length;l++){var u=r(e[t[l]]);if(u!==s){var c=n[u]=(n[u]||0)+1;c>i&&(i=c,o=u)}}return i?a(o):s};case"rms":return function(e,t){for(var n=0,i=0,o=0;o<t.length;o++){var l=r(e[t[o]]);l!==s&&(n+=l*l,i++)}return i?a(Math.sqrt(n/i)):s};case"stddev":return function(t,n){var a,i=0,o=0,l=1,u=s;for(a=0;a<n.length&&u===s;a++)u=r(t[n[a]]);if(u===s)return s;for(;a<n.length;a++){var c=r(t[n[a]]);if(c!==s){var f=c-u;i+=f,o+=f*f,l++}}var d="sample"===e.funcmode?l-1:l;return d?Math.sqrt((o-i*i/l)/d):0}}}(i,c),m=new Array(n.length),v=0;v<n.length;v++)m[v]=h(u,n[v]);l.set(m),"count"===i.func&&a.pushUnique(t._arrayAttrs,o)}}function f(e,t){return t.length}function d(e,t){return e[t[0]]}function p(e,t){return e[t[t.length-1]]}n.supplyDefaults=function(e,t){var n,r={};function o(t,n){return a.coerce(e,r,l,t,n)}var s=o("enabled");if(!s)return r;var c=i.findArrayAttributes(t),f={};for(n=0;n<c.length;n++)f[c[n]]=1;var d=o("groups");if(!Array.isArray(d)){if(!f[d])return r.enabled=!1,r;f[d]=0}var p,h=e.aggregations||[],m=r.aggregations=new Array(h.length);function v(e,t){return a.coerce(h[n],p,u,e,t)}for(n=0;n<h.length;n++){p={_index:n};var g=v("target"),y=v("func"),b=v("enabled");b&&g&&(f[g]||"count"===y&&void 0===f[g])?("stddev"===y&&v("funcmode"),f[g]=0,m[n]=p):m[n]={enabled:!1,_index:n}}for(n=0;n<c.length;n++)f[c[n]]&&m.push({target:c[n],func:u.func.dflt,enabled:!0,_index:-1});return r},n.calcTransform=function(e,t,n){if(n.enabled){var r=n.groups,i=a.getTargetArray(t,{target:r});if(i){var s,l,u,f,d={},p={},h=[],m=o(t.transforms,n),v=i.length;for(t._length&&(v=Math.min(v,t._length)),s=0;s<v;s++)l=i[s],void 0===(u=d[l])?(d[l]=h.length,f=[s],h.push(f),p[d[l]]=m(s)):(h[u].push(s),p[d[l]]=(p[d[l]]||[]).concat(m(s)));n._indexToPoints=p;var g=n.aggregations;for(s=0;s<g.length;s++)c(e,t,h,g[s]);"string"==typeof r&&c(e,t,h,{target:r,func:"first",enabled:!0}),t._length=h.length}}}},{"../constants/numerical":673,"../lib":696,"../plot_api/plot_schema":733,"../plots/cartesian/axes":744,"./helpers":1158}],1156:[function(e,t,n){"use strict";var r=e("../lib"),a=e("../registry"),i=e("../plots/cartesian/axes"),o=e("./helpers").pointsAccessorFunction,s=e("../constants/filter_ops"),l=s.COMPARISON_OPS,u=s.INTERVAL_OPS,c=s.SET_OPS;n.moduleType="transform",n.name="filter",n.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(l).concat(u).concat(c),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},n.supplyDefaults=function(e){var t={};function i(a,i){return r.coerce(e,t,n.attributes,a,i)}var o=i("enabled");if(o){i("preservegaps"),i("operation"),i("value"),i("target");var s=a.getComponentMethod("calendars","handleDefaults");s(e,t,"valuecalendar",null),s(e,t,"targetcalendar",null)}return t},n.calcTransform=function(e,t,n){if(n.enabled){var a=r.getTargetArray(t,n);if(a){var s=n.target,f=a.length;t._length&&(f=Math.min(f,t._length));var d=n.targetcalendar,p=t._arrayAttrs,h=n.preservegaps;if("string"==typeof s){var m=r.nestedProperty(t,s+"calendar").get();m&&(d=m)}var v,g,y=i.getDataToCoordFunc(e,t,s,a),b=function(e,t,n){var r=e.operation,a=e.value,i=Array.isArray(a);function o(e){return-1!==e.indexOf(r)}var s,f=function(n){return t(n,0,e.valuecalendar)},d=function(e){return t(e,0,n)};switch(o(l)?s=f(i?a[0]:a):o(u)?s=i?[f(a[0]),f(a[1])]:[f(a),f(a)]:o(c)&&(s=i?a.map(f):[f(a)]),r){case"=":return function(e){return d(e)===s};case"!=":return function(e){return d(e)!==s};case"<":return function(e){return d(e)<s};case"<=":return function(e){return d(e)<=s};case">":return function(e){return d(e)>s};case">=":return function(e){return d(e)>=s};case"[]":return function(e){var t=d(e);return t>=s[0]&&t<=s[1]};case"()":return function(e){var t=d(e);return t>s[0]&&t<s[1]};case"[)":return function(e){var t=d(e);return t>=s[0]&&t<s[1]};case"(]":return function(e){var t=d(e);return t>s[0]&&t<=s[1]};case"][":return function(e){var t=d(e);return t<=s[0]||t>=s[1]};case")(":return function(e){var t=d(e);return t<s[0]||t>s[1]};case"](":return function(e){var t=d(e);return t<=s[0]||t>s[1]};case")[":return function(e){var t=d(e);return t<s[0]||t>=s[1]};case"{}":return function(e){return-1!==s.indexOf(d(e))};case"}{":return function(e){return-1===s.indexOf(d(e))}}}(n,y,d),x={},_={},w=0;h?(v=function(e){x[e.astr]=r.extendDeep([],e.get()),e.set(new Array(f))},g=function(e,t){var n=x[e.astr][t];e.get()[t]=n}):(v=function(e){x[e.astr]=r.extendDeep([],e.get()),e.set([])},g=function(e,t){var n=x[e.astr][t];e.get().push(n)}),E(v);for(var T=o(t.transforms,n),k=0;k<f;k++){var C=b(a[k]);C?(E(g,k),_[w++]=T(k)):h&&w++}n._indexToPoints=_,t._length=w}}function E(e,n){for(var a=0;a<p.length;a++){var i=r.nestedProperty(t,p[a]);e(i,n)}}}},{"../constants/filter_ops":669,"../lib":696,"../plots/cartesian/axes":744,"../registry":827,"./helpers":1158}],1157:[function(e,t,n){"use strict";var r=e("../lib"),a=e("../plot_api/plot_schema"),i=e("../plots/plots"),o=e("./helpers").pointsAccessorFunction;function s(e,t){var n,s,u,c,f,d,p,h,m,v,g=t.transform,y=t.transformIndex,b=e.transforms[y].groups,x=o(e.transforms,g);if(!Array.isArray(b)||0===b.length)return[e];var _=r.filterUnique(b),w=new Array(_.length),T=b.length,k=a.findArrayAttributes(e),C=g.styles||[],E={};for(n=0;n<C.length;n++)E[C[n].target]=C[n].value;g.styles&&(v=r.keyedContainer(g,"styles","target","value.name"));var M={},A={};for(n=0;n<_.length;n++){d=_[n],M[d]=n,A[d]=0,(p=w[n]=r.extendDeepNoArrays({},e))._group=d,p.updateStyle=l(d,y),p.transforms[y]._indexToPoints={};var S=null;for(v&&(S=v.get(d)),p.name=S||""===S?S:r.templateString(g.nameformat,{trace:e.name,group:d}),h=p.transforms,p.transforms=[],s=0;s<h.length;s++)p.transforms[s]=r.extendDeepNoArrays({},h[s]);for(s=0;s<k.length;s++)r.nestedProperty(p,k[s]).set([])}for(u=0;u<k.length;u++){for(c=k[u],s=0,m=[];s<_.length;s++)m[s]=r.nestedProperty(w[s],c).get();for(f=r.nestedProperty(e,c).get(),s=0;s<T;s++)m[M[b[s]]].push(f[s])}for(s=0;s<T;s++){var O=(p=w[M[b[s]]]).transforms[y]._indexToPoints;O[A[b[s]]]=x(s),A[b[s]]++}for(n=0;n<_.length;n++)d=_[n],p=w[n],i.clearExpandedTraceDefaultColors(p),p=r.extendDeepNoArrays(p,E[d]||{});return w}function l(e,t){return function(n,a,i){r.keyedContainer(n,"transforms["+t+"].styles","target","value."+a).set(String(e),i)}}n.moduleType="transform",n.name="groupby",n.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},n.supplyDefaults=function(e,t,a){var i,o={};function s(t,a){return r.coerce(e,o,n.attributes,t,a)}var l=s("enabled");if(!l)return o;s("groups"),s("nameformat",a._dataLength>1?"%{group} (%{trace})":"%{group}");var u=e.styles,c=o.styles=[];if(u)for(i=0;i<u.length;i++){var f=c[i]={};r.coerce(u[i],c[i],n.attributes.styles,"target");var d=r.coerce(u[i],c[i],n.attributes.styles,"value");r.isPlainObject(d)?f.value=r.extendDeep({},d):d&&delete f.value}return o},n.transform=function(e,t){var n,r,a,i=[];for(r=0;r<e.length;r++)for(n=s(e[r],t),a=0;a<n.length;a++)i.push(n[a]);return i}},{"../lib":696,"../plot_api/plot_schema":733,"../plots/plots":808,"./helpers":1158}],1158:[function(e,t,n){"use strict";n.pointsAccessorFunction=function(e,t){for(var n,r,a=0;a<e.length&&(n=e[a])!==t;a++)n._indexToPoints&&!1!==n.enabled&&(r=n._indexToPoints);var i=r?function(e){return r[e]}:function(e){return[e]};return i}},{}],1159:[function(e,t,n){"use strict";var r=e("../lib"),a=e("../plots/cartesian/axes"),i=e("./helpers").pointsAccessorFunction;n.moduleType="transform",n.name="sort",n.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},n.supplyDefaults=function(e){var t={};function a(a,i){return r.coerce(e,t,n.attributes,a,i)}var i=a("enabled");return i&&(a("target"),a("order")),t},n.calcTransform=function(e,t,n){if(n.enabled){var o=r.getTargetArray(t,n);if(o){var s=n.target,l=o.length;t._length&&(l=Math.min(l,t._length));var u,c,f=t._arrayAttrs,d=a.getDataToCoordFunc(e,t,s,o),p=function(e,t,n,r){var a,i=new Array(r),o=new Array(r);for(a=0;a<r;a++)i[a]={v:t[a],i:a};for(i.sort(function(e,t){switch(e.order){case"ascending":return function(e,n){return t(e.v)-t(n.v)};case"descending":return function(e,n){return t(n.v)-t(e.v)}}}(e,n)),a=0;a<r;a++)o[a]=i[a].i;return o}(n,o,d,l),h=i(t.transforms,n),m={};for(u=0;u<f.length;u++){var v=r.nestedProperty(t,f[u]),g=v.get(),y=new Array(l);for(c=0;c<l;c++)y[c]=g[p[c]];v.set(y)}for(c=0;c<l;c++)m[c]=h(p[c]);n._indexToPoints=m,t._length=l}}}},{"../lib":696,"../plots/cartesian/axes":744,"./helpers":1158}]},{},[22])(22)}).call(this,n(48))},function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(17),o=n.n(i),s=n(11),l=n.n(s),u=n(2),c=n.n(u),f=n(23),d=n.n(f),p=n(30),h=n.n(p);function m(e){return"/"===e.charAt(0)}function v(e,t){for(var n=t,r=n+1,a=e.length;r<a;n+=1,r+=1)e[n]=e[r];e.pop()}var g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e&&e.split("/")||[],r=t&&t.split("/")||[],a=e&&m(e),i=t&&m(t),o=a||i;if(e&&m(e)?r=n:n.length&&(r.pop(),r=r.concat(n)),!r.length)return"/";var s=void 0;if(r.length){var l=r[r.length-1];s="."===l||".."===l||""===l}else s=!1;for(var u=0,c=r.length;c>=0;c--){var f=r[c];"."===f?v(r,c):".."===f?(v(r,c),u++):u&&(v(r,c),u--)}if(!o)for(;u--;u)r.unshift("..");!o||""===r[0]||r[0]&&m(r[0])||r.unshift("");var d=r.join("/");return s&&"/"!==d.substr(-1)&&(d+="/"),d};"function"==typeof Symbol&&Symbol.iterator;var y=function(e){return"/"===e.charAt(0)?e:"/"+e},b=function(e,t){return new RegExp("^"+t+"(\\/|\\?|#|$)","i").test(e)},x=function(e,t){return b(e,t)?e.substr(t.length):e},_=function(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e},w=function(e){var t=e.pathname,n=e.search,r=e.hash,a=t||"/";return n&&"?"!==n&&(a+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(a+="#"===r.charAt(0)?r:"#"+r),a},T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},k=function(e,t,n,r){var a=void 0;"string"==typeof e?(a=function(e){var t=e||"/",n="",r="",a=t.indexOf("#");-1!==a&&(r=t.substr(a),t=t.substr(0,a));var i=t.indexOf("?");return-1!==i&&(n=t.substr(i),t=t.substr(0,i)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e)).state=t:(void 0===(a=T({},e)).pathname&&(a.pathname=""),a.search?"?"!==a.search.charAt(0)&&(a.search="?"+a.search):a.search="",a.hash?"#"!==a.hash.charAt(0)&&(a.hash="#"+a.hash):a.hash="",void 0!==t&&void 0===a.state&&(a.state=t));try{a.pathname=decodeURI(a.pathname)}catch(e){throw e instanceof URIError?new URIError('Pathname "'+a.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):e}return n&&(a.key=n),r?a.pathname?"/"!==a.pathname.charAt(0)&&(a.pathname=g(a.pathname,r.pathname)):a.pathname=r.pathname:a.pathname||(a.pathname="/"),a},C=function(){var e=null,t=[];return{setPrompt:function(t){return d()(null==e,"A history supports only one prompt at a time"),e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,a){if(null!=e){var i="function"==typeof e?e(t,n):e;"string"==typeof i?"function"==typeof r?r(i,a):(d()(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),a(!0)):a(!1!==i)}else a(!0)},appendListener:function(e){var n=!0,r=function(){n&&e.apply(void 0,arguments)};return t.push(r),function(){n=!1,t=t.filter(function(e){return e!==r})}},notifyListeners:function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach(function(e){return e.apply(void 0,n)})}}},E=!("undefined"==typeof window||!window.document||!window.document.createElement),M=function(e,t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},A=function(e,t,n){return e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)},S=function(e,t){return t(window.confirm(e))},O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},R=function(){try{return window.history.state||{}}catch(e){return{}}},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h()(E,"Browser history needs a DOM");var t=window.history,n=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),r=!(-1===window.navigator.userAgent.indexOf("Trident")),a=e.forceRefresh,i=void 0!==a&&a,o=e.getUserConfirmation,s=void 0===o?S:o,l=e.keyLength,u=void 0===l?6:l,c=e.basename?_(y(e.basename)):"",f=function(e){var t=e||{},n=t.key,r=t.state,a=window.location,i=a.pathname+a.search+a.hash;return d()(!c||b(i,c),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+i+'" to begin with "'+c+'".'),c&&(i=x(i,c)),k(i,r,n)},p=function(){return Math.random().toString(36).substr(2,u)},m=C(),v=function(e){P(G,e),G.length=t.length,m.notifyListeners(G.location,G.action)},g=function(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||D(f(e.state))},T=function(){D(f(R()))},L=!1,D=function(e){L?(L=!1,v()):m.confirmTransitionTo(e,"POP",s,function(t){t?v({action:"POP",location:e}):I(e)})},I=function(e){var t=G.location,n=j.indexOf(t.key);-1===n&&(n=0);var r=j.indexOf(e.key);-1===r&&(r=0);var a=n-r;a&&(L=!0,F(a))},z=f(R()),j=[z.key],N=function(e){return c+w(e)},F=function(e){t.go(e)},B=0,V=function(e){1===(B+=e)?(M(window,"popstate",g),r&&M(window,"hashchange",T)):0===B&&(A(window,"popstate",g),r&&A(window,"hashchange",T))},U=!1,G={length:t.length,action:"POP",location:z,createHref:N,push:function(e,r){d()(!("object"===(void 0===e?"undefined":O(e))&&void 0!==e.state&&void 0!==r),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var a=k(e,r,p(),G.location);m.confirmTransitionTo(a,"PUSH",s,function(e){if(e){var r=N(a),o=a.key,s=a.state;if(n)if(t.pushState({key:o,state:s},null,r),i)window.location.href=r;else{var l=j.indexOf(G.location.key),u=j.slice(0,-1===l?0:l+1);u.push(a.key),j=u,v({action:"PUSH",location:a})}else d()(void 0===s,"Browser history cannot push state in browsers that do not support HTML5 history"),window.location.href=r}})},replace:function(e,r){d()(!("object"===(void 0===e?"undefined":O(e))&&void 0!==e.state&&void 0!==r),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var a=k(e,r,p(),G.location);m.confirmTransitionTo(a,"REPLACE",s,function(e){if(e){var r=N(a),o=a.key,s=a.state;if(n)if(t.replaceState({key:o,state:s},null,r),i)window.location.replace(r);else{var l=j.indexOf(G.location.key);-1!==l&&(j[l]=a.key),v({action:"REPLACE",location:a})}else d()(void 0===s,"Browser history cannot replace state in browsers that do not support HTML5 history"),window.location.replace(r)}})},go:F,goBack:function(){return F(-1)},goForward:function(){return F(1)},block:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=m.setPrompt(e);return U||(V(1),U=!0),function(){return U&&(U=!1,V(-1)),t()}},listen:function(e){var t=m.appendListener(e);return V(1),function(){V(-1),t()}}};return G},D=(Object.assign,"function"==typeof Symbol&&Symbol.iterator,Object.assign,Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e});function I(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var z=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=r=I(this,e.call.apply(e,[this].concat(i))),r.state={match:r.computeMatch(r.props.history.location.pathname)},I(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getChildContext=function(){return{router:D({},this.context.router,{history:this.props.history,route:{location:this.props.history.location,match:this.state.match}})}},t.prototype.computeMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}},t.prototype.componentWillMount=function(){var e=this,t=this.props,n=t.children,r=t.history;h()(null==n||1===a.a.Children.count(n),"A <Router> may have only one child element"),this.unlisten=r.listen(function(){e.setState({match:e.computeMatch(r.location.pathname)})})},t.prototype.componentWillReceiveProps=function(e){l()(this.props.history===e.history,"You cannot change <Router history>")},t.prototype.componentWillUnmount=function(){this.unlisten()},t.prototype.render=function(){var e=this.props.children;return e?a.a.Children.only(e):null},t}(a.a.Component);z.propTypes={history:c.a.object.isRequired,children:c.a.node},z.contextTypes={router:c.a.object},z.childContextTypes={router:c.a.object.isRequired};var j=z;function N(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var F=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=r=N(this,e.call.apply(e,[this].concat(i))),r.history=L(r.props),N(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){l()(!this.props.history,"<BrowserRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { BrowserRouter as Router }`.")},t.prototype.render=function(){return a.a.createElement(j,{history:this.history,children:this.props.children})},t}(a.a.Component);F.propTypes={basename:c.a.string,forceRefresh:c.a.bool,getUserConfirmation:c.a.func,keyLength:c.a.number,children:c.a.node};var B=F,V=n(136),U=n.n(V),G={},H=0,W=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];"string"==typeof t&&(t={path:t});var r=t,a=r.path,i=r.exact,o=void 0!==i&&i,s=r.strict,l=void 0!==s&&s,u=r.sensitive,c=void 0!==u&&u;if(null==a)return n;var f=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=G[n]||(G[n]={});if(r[e])return r[e];var a=[],i={re:U()(e,a,t),keys:a};return H<1e4&&(r[e]=i,H++),i}(a,{end:o,strict:l,sensitive:c}),d=f.re,p=f.keys,h=d.exec(e);if(!h)return null;var m=h[0],v=h.slice(1),g=e===m;return o&&!g?null:{path:a,url:"/"===a&&""===m?"/":m,isExact:g,params:p.reduce(function(e,t,n){return e[t.name]=v[n],e},{})}};var q=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){h()(this.context.router,"You should not use <Switch> outside a <Router>")},t.prototype.componentWillReceiveProps=function(e){l()(!(e.location&&!this.props.location),'<Switch> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.'),l()(!(!e.location&&this.props.location),'<Switch> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.')},t.prototype.render=function(){var e=this.context.router.route,t=this.props.children,n=this.props.location||e.location,r=void 0,i=void 0;return a.a.Children.forEach(t,function(t){if(null==r&&a.a.isValidElement(t)){var o=t.props,s=o.path,l=o.exact,u=o.strict,c=o.sensitive,f=o.from,d=s||f;i=t,r=W(n.pathname,{path:d,exact:l,strict:u,sensitive:c},e.match)}}),r?a.a.cloneElement(i,{location:n,computedMatch:r}):null},t}(a.a.Component);q.contextTypes={router:c.a.shape({route:c.a.object.isRequired}).isRequired},q.propTypes={children:c.a.node,location:c.a.object};var Y=q,X=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function Z(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var $=function(e){return 0===a.a.Children.count(e)},K=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=r=Z(this,e.call.apply(e,[this].concat(i))),r.state={match:r.computeMatch(r.props,r.context.router)},Z(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getChildContext=function(){return{router:X({},this.context.router,{route:{location:this.props.location||this.context.router.route.location,match:this.state.match}})}},t.prototype.computeMatch=function(e,t){var n=e.computedMatch,r=e.location,a=e.path,i=e.strict,o=e.exact,s=e.sensitive;if(n)return n;h()(t,"You should not use <Route> or withRouter() outside a <Router>");var l=t.route,u=(r||l.location).pathname;return W(u,{path:a,strict:i,exact:o,sensitive:s},l.match)},t.prototype.componentWillMount=function(){l()(!(this.props.component&&this.props.render),"You should not use <Route component> and <Route render> in the same route; <Route render> will be ignored"),l()(!(this.props.component&&this.props.children&&!$(this.props.children)),"You should not use <Route component> and <Route children> in the same route; <Route children> will be ignored"),l()(!(this.props.render&&this.props.children&&!$(this.props.children)),"You should not use <Route render> and <Route children> in the same route; <Route children> will be ignored")},t.prototype.componentWillReceiveProps=function(e,t){l()(!(e.location&&!this.props.location),'<Route> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.'),l()(!(!e.location&&this.props.location),'<Route> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.'),this.setState({match:this.computeMatch(e,t.router)})},t.prototype.render=function(){var e=this.state.match,t=this.props,n=t.children,r=t.component,i=t.render,o=this.context.router,s=o.history,l=o.route,u=o.staticContext,c={match:e,location:this.props.location||l.location,history:s,staticContext:u};return r?e?a.a.createElement(r,c):null:i?e?i(c):null:"function"==typeof n?n(c):n&&!$(n)?a.a.Children.only(n):null},t}(a.a.Component);K.propTypes={computedMatch:c.a.object,path:c.a.string,exact:c.a.bool,strict:c.a.bool,sensitive:c.a.bool,component:c.a.func,render:c.a.func,children:c.a.oneOfType([c.a.func,c.a.node]),location:c.a.object},K.contextTypes={router:c.a.shape({history:c.a.object.isRequired,route:c.a.object.isRequired,staticContext:c.a.object})},K.childContextTypes={router:c.a.object.isRequired};var J=K,Q=n(6),ee=(n(142),n(144),n(22)),te=n.n(ee),ne=function(){return a.a.createElement(te.a,null,"404 - Not Found")},re="http://localhost:5000/api",ae=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function ie(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var oe=function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)},se=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=r=ie(this,e.call.apply(e,[this].concat(i))),r.handleClick=function(e){if(r.props.onClick&&r.props.onClick(e),!e.defaultPrevented&&0===e.button&&!r.props.target&&!oe(e)){e.preventDefault();var t=r.context.router.history,n=r.props,a=n.replace,i=n.to;a?t.replace(i):t.push(i)}},ie(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e=this.props,t=(e.replace,e.to),n=e.innerRef,r=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["replace","to","innerRef"]);h()(this.context.router,"You should not use <Link> outside a <Router>"),h()(void 0!==t,'You must specify the "to" property');var i=this.context.router.history,o="string"==typeof t?k(t,null,null,i.location):t,s=i.createHref(o);return a.a.createElement("a",ae({},r,{onClick:this.handleClick,href:s,ref:n}))},t}(a.a.Component);se.propTypes={onClick:c.a.func,target:c.a.string,replace:c.a.bool,to:c.a.oneOfType([c.a.string,c.a.object]).isRequired,innerRef:c.a.oneOfType([c.a.string,c.a.func])},se.defaultProps={replace:!1},se.contextTypes={router:c.a.shape({history:c.a.shape({push:c.a.func.isRequired,replace:c.a.func.isRequired,createHref:c.a.func.isRequired}).isRequired}).isRequired};var le=se;function ue(e){return(ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fe(e,t){return!t||"object"!==ue(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function de(e){return(de=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pe(e,t){return(pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var he=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=fe(this,de(t).call(this,e))).state={items:[]},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pe(e,t)}(t,a.a.Component),function(e,t,n){t&&ce(e.prototype,t),n&&ce(e,n)}(t,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat(re,"/study")).then(function(e){return e.json()}).then(function(t){e.setState({items:t})})}},{key:"render",value:function(){return a.a.createElement("div",null,this.state.items.map(function(e){return a.a.createElement("div",{key:e.Name,className:"info_container"},a.a.createElement("p",null,a.a.createElement("span",null,"Name:")," ",a.a.createElement(le,{to:"/study/".concat(e.Name)},e.Name)),a.a.createElement("ul",null,a.a.createElement("li",null,a.a.createElement("span",null,"Expression type:")," ",e.ExpressionType),a.a.createElement("li",null,a.a.createElement("span",null,"Description:")," ",e.Description),a.a.createElement("li",null,a.a.createElement("span",null,"Sample count:")," ",e.SampleCount),a.a.createElement("li",null,a.a.createElement("span",null,"Feature count:")," ",e.FeatureCount),a.a.createElement("li",null,a.a.createElement("span",null,"Gene annotation version:")," ",e.GeneAnnotationVersion),a.a.createElement("li",null,a.a.createElement("span",null,"Created by :")," ",e.CreatedBy)))}))}}]),t}(),me=function(){return a.a.createElement(he,null)},ve=n(24),ge=n.n(ve),ye=n(19),be=n.n(ye),xe=n(20),_e=n.n(xe),we=n(27),Te=n.n(we),ke=n(25),Ce=n.n(ke),Ee=n(28),Me=n.n(Ee),Ae=n(5),Se=n.n(Ae),Oe=n(127),Pe=n.n(Oe),Re=n(124),Le=n.n(Re),De=n(125),Ie=n.n(De),ze=n(52),je=n.n(ze),Ne=n(85),Fe=n.n(Ne),Be=n(31),Ve=n.n(Be),Ue=n(126),Ge=n.n(Ue),He=n(66),We=n.n(He),qe=n(43),Ye=n.n(qe);function Xe(e){return(Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ze(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $e(e){return($e=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ke(e,t){return(Ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Je(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function et(e){var t=e.className,n=e.primary,r=e.to;return a.a.createElement("li",null,a.a.createElement(be.a,{className:t,button:!0,component:le,to:r},a.a.createElement(_e.a,{primary:n})))}et.propTypes={primary:c.a.node.isRequired,to:c.a.string.isRequired};var tt=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t){return!t||"object"!==Xe(t)&&"function"!=typeof t?Je(e):t}(this,$e(t).call(this,e))).state={open:!0},n.handleDrawerOpen=n.handleDrawerOpen.bind(Je(Je(n))),n.handleDrawerClose=n.handleDrawerClose.bind(Je(Je(n))),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ke(e,t)}(t,a.a.Component),function(e,t,n){t&&Ze(e.prototype,t),n&&Ze(e,n)}(t,[{key:"handleDrawerOpen",value:function(){this.setState({open:!0})}},{key:"handleDrawerClose",value:function(){this.setState({open:!1})}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.theme,r=e.study,i=e.basePath,o=this.state.open;return a.a.createElement("div",{className:t.root},a.a.createElement(Le.a,null),a.a.createElement(Ie.a,{position:"fixed",className:Se()(t.appBar,Qe({},t.appBarShift,o))},a.a.createElement(je.a,{disableGutters:!o},a.a.createElement(Ve.a,{color:"inherit","aria-label":"Open drawer",onClick:this.handleDrawerOpen,className:Se()(t.menuButton,o&&t.hide)},a.a.createElement(Ge.a,null)),a.a.createElement(te.a,{variant:"h6",color:"inherit",noWrap:!0},"Study: ",r.Name))),a.a.createElement(Pe.a,{className:t.drawer,variant:"persistent",anchor:"left",open:o,classes:{paper:t.drawerPaper}},a.a.createElement("div",{className:t.drawerHeader},a.a.createElement(te.a,{variant:"h6",noWrap:!0},"ROGER"),a.a.createElement(Ve.a,{onClick:this.handleDrawerClose},"ltr"===n.direction?a.a.createElement(We.a,null):a.a.createElement(Ye.a,null))),a.a.createElement(Fe.a,null),a.a.createElement(ge.a,{component:"nav"},a.a.createElement(et,{button:!0,to:"".concat(i),primary:"Overview"}),a.a.createElement(et,{button:!0,to:"".concat(i,"/expression"),primary:"Gene Expression"})),a.a.createElement(Fe.a,null),a.a.createElement(ge.a,{component:"nav"},r.Design.map(function(e){return a.a.createElement("li",{key:e.Name},a.a.createElement(be.a,{button:!0,component:le,to:"".concat(i,"/design/").concat(e.Name)},a.a.createElement(_e.a,{primary:e.Name})),a.a.createElement(ge.a,null,e.Contrast.map(function(n){return n.ContrastColumn.map(function(r){return a.a.createElement("li",{key:r.Name},a.a.createElement(be.a,{className:t.nestedLevel1,button:!0,component:le,to:"".concat(i,"/design/").concat(e.Name,"/contrast/").concat(r.Name)},a.a.createElement(_e.a,{primary:r.Name})),a.a.createElement(ge.a,null,n.DGEmodel.map(function(n){return a.a.createElement("li",{key:n.MethodName},a.a.createElement(be.a,{className:t.nestedLevel2,button:!0,component:le,to:"".concat(i,"/design/")+"".concat(e.Name,"/contrast/")+"".concat(r.Name,"/dge/").concat(n.MethodName)},a.a.createElement(_e.a,{primary:"DGE (".concat(n.MethodName,")")})))}),n.GSEresult.map(function(n){return a.a.createElement("li",{key:n.GSEMethodName},a.a.createElement(be.a,{className:t.nestedLevel2,button:!0,component:le,to:"".concat(i,"/design/")+"".concat(e.Name,"/contrast/")+"".concat(r.Name,"/dge/").concat(n.DGEMethodName,"/")+"gse/".concat(n.GSEMethodName)},a.a.createElement(_e.a,{primary:"GSE (".concat(n.GSEMethodName," ")+"+ ".concat(n.DGEMethodName,")")})))})))})})))}))),a.a.createElement("main",{className:Se()(t.content,Qe({},t.contentShift,o))},a.a.createElement("div",{className:t.drawerHeader}),this.props.children))}}]),t}();tt.propTypes={classes:c.a.object.isRequired,theme:c.a.object.isRequired,study:c.a.object.isRequired,basePath:c.a.string.isRequired};var nt=Object(Q.withStyles)(function(e){return{root:{display:"flex"},appBar:{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{width:"calc(100% - ".concat(280,"px)"),marginLeft:280,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},menuButton:{marginLeft:12,marginRight:20},hide:{display:"none"},drawer:{width:280,flexShrink:0},drawerPaper:{width:280},drawerHeader:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Qe(e,t,n[t])})}return e}({display:"flex",alignItems:"center",padding:"0 8px"},e.mixins.toolbar,{justifyContent:"flex-end"}),content:{flexGrow:1,padding:3*e.spacing.unit,transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginLeft:-280},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:0},nestedLevel1:{paddingLeft:6*e.spacing.unit},nestedLevel2:{paddingLeft:8*e.spacing.unit},navActive:[]}},{withTheme:!0})(tt);function rt(e){var t=e.classes,n=e.study,r=(e.studyAnnotation,e.basePath);return a.a.createElement(nt,{study:n,basePath:r},a.a.createElement(Te.a,{className:t.card},a.a.createElement(Me.a,null,a.a.createElement(te.a,{variant:"h5",component:"h2"},"About the Study"),a.a.createElement(Ce.a,{container:!0,spacing:24},a.a.createElement(Ce.a,{item:!0,xs:6},a.a.createElement(ge.a,null,a.a.createElement(be.a,null,a.a.createElement(_e.a,{primary:"Description",secondary:n.Description})),a.a.createElement(be.a,null,a.a.createElement(_e.a,{primary:"Sample count",secondary:n.SampleCount})),a.a.createElement(be.a,null,a.a.createElement(_e.a,{primary:"Feature count",secondary:n.FeatureCount})))),a.a.createElement(Ce.a,{item:!0,xs:6},a.a.createElement(ge.a,null,a.a.createElement(be.a,null,a.a.createElement(_e.a,{primary:"Expression type",secondary:n.ExpressionType})),a.a.createElement(be.a,null,a.a.createElement(_e.a,{primary:"Gene annotation version",secondary:n.GeneAnnotationVersion})),a.a.createElement(be.a,null,a.a.createElement(_e.a,{primary:"Created by",secondary:n.CreatedBy}))))))))}rt.propTypes={classes:c.a.object.isRequired,study:c.a.object.isRequired,sampleAnnotation:c.a.object.isRequired,basePath:c.a.string.isRequired};var at=Object(Q.withStyles)({card:{minWidth:275,marginBottom:12}})(rt);function it(e){var t=e.classes,n=e.study,r=(e.studyAnnotation,e.basePath);return a.a.createElement(nt,{study:n,basePath:r},a.a.createElement(Te.a,{className:t.card},a.a.createElement(Me.a,null,a.a.createElement(te.a,{variant:"h5",component:"h2"},"TODO Gene expression"))))}it.propTypes={classes:c.a.object.isRequired,study:c.a.object.isRequired,sampleAnnotation:c.a.object.isRequired,basePath:c.a.string.isRequired};var ot=Object(Q.withStyles)({card:{minWidth:275,marginBottom:12}})(it),st=n(67),lt=n.n(st),ut=n(69),ct=n.n(ut),ft=n(18),dt=n.n(ft),pt=n(68),ht=n.n(pt),mt=n(35),vt=n.n(mt);function gt(e){var t=e.classes,n=e.design,r=e.sampleAnnotation;return a.a.createElement(lt.a,{className:t.table},a.a.createElement(ht.a,null,a.a.createElement(vt.a,null,a.a.createElement(dt.a,{colSpan:3},"Sample Information"),a.a.createElement(dt.a,{colSpan:n.VariableCount},"Variables")),a.a.createElement(vt.a,null,a.a.createElement(dt.a,{numeric:!0},"Sample Group"),a.a.createElement(dt.a,{numeric:!0},"Used?"),a.a.createElement(dt.a,{numeric:!0},"Sample Name"),n.DesignMatrix.map(function(e){return a.a.createElement(dt.a,{key:e.columnName,numeric:!0},e.columnName," ",e.isCovariate?a.a.createElement("span",null,a.a.createElement("br",null),"(covariate)"):"")}))),a.a.createElement(ct.a,null,r.data.map(function(e,t){return a.a.createElement(vt.a,{key:e.SAMPLE},a.a.createElement(dt.a,{component:"th",scope:"row",numeric:!0},n.SampleGroups[t]),a.a.createElement(dt.a,{component:"th",scope:"row",numeric:!0},n.SampleSubset[t].IsUsed?"Yes":"No"),a.a.createElement(dt.a,{component:"th",scope:"row",numeric:!0},e.SAMPLE),n.DesignMatrix.map(function(e){return a.a.createElement(dt.a,{key:e.columnName,numeric:!0},e.values[t])}))})))}gt.propTypes={classes:c.a.object.isRequired,design:c.a.object.isRequired,sampleAnnotation:c.a.object.isRequired};var yt=Object(Q.withStyles)({table:{minWidth:700}})(gt);function bt(e){var t=e.classes,n=e.study,r=e.design,i=e.sampleAnnotation,o=e.basePath;return a.a.createElement(nt,{study:n,basePath:o},a.a.createElement(Te.a,{className:t.card},a.a.createElement(Me.a,null,a.a.createElement(te.a,{variant:"h5",component:"h2"},"About the design: ",r.Name),a.a.createElement(Ce.a,{container:!0,spacing:24},a.a.createElement(Ce.a,{item:!0,xs:6},a.a.createElement(ge.a,null,a.a.createElement(be.a,null,a.a.createElement(_e.a,{primary:"Description",secondary:r.Description})),a.a.createElement(be.a,null,a.a.createElement(_e.a,{primary:"Variable Count",secondary:r.VariableCount})),a.a.createElement(be.a,null,a.a.createElement(_e.a,{primary:"Used Samples",secondary:"".concat(function(e){return e.filter(function(e){return e.IsUsed}).length}(r.SampleSubset)," ")+" of ".concat(n.SampleCount)})))),a.a.createElement(Ce.a,{item:!0,xs:6},a.a.createElement(ge.a,null,a.a.createElement(be.a,null,a.a.createElement(_e.a,{primary:"Last Reviewed by",secondary:r.LastReviewedBy})),a.a.createElement(be.a,null,a.a.createElement(_e.a,{primary:"Created by",secondary:r.CreatedBy}))))))),a.a.createElement(Te.a,{className:t.card},a.a.createElement(Me.a,null,a.a.createElement(te.a,{variant:"h5",component:"h2"},"Design Matrix & Sample Information"),a.a.createElement(yt,{design:r,sampleAnnotation:i}))))}bt.propTypes={classes:c.a.object.isRequired,design:c.a.object.isRequired,sampleAnnotation:c.a.object.isRequired,basePath:c.a.string.isRequired};var xt=Object(Q.withStyles)({card:{minWidth:275,marginBottom:12}})(bt),_t=n(34),wt=n.n(_t),Tt=n(42),kt=n.n(Tt),Ct=n(44),Et=n.n(Ct),Mt=n(1),At=n(3),St=n(21),Ot=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},Pt=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Rt=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},Lt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Dt=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},It=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},zt=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},jt=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Nt=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},Ft=function(e){function t(){return Ot(this,t),zt(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Dt(t,e),Pt(t,[{key:"render",value:function(){var e=this.props,t=e.rows,n=e.columns,a=e.getRowId,i=e.getCellValue,o=e.rootComponent,s=It(e,["rows","columns","getRowId","getCellValue","rootComponent"]);return Object(r.createElement)(Mt.Plugin,null,Object(r.createElement)(Mt.Getter,{name:"rows",value:t}),Object(r.createElement)(Mt.Getter,{name:"getRowId",value:Object(At.rowIdGetter)(a,t)}),Object(r.createElement)(Mt.Getter,{name:"columns",value:n}),Object(r.createElement)(Mt.Getter,{name:"getCellValue",value:Object(At.cellValueGetter)(i,n)}),Object(r.createElement)(Mt.Template,{name:"root"},Object(r.createElement)(o,s,Object(r.createElement)(Mt.TemplatePlaceholder,{name:"header"}),Object(r.createElement)(Mt.TemplatePlaceholder,{name:"body"}),Object(r.createElement)(Mt.TemplatePlaceholder,{name:"footer"}))))}}]),t}(r.PureComponent);Ft.defaultProps={getRowId:void 0,getCellValue:void 0};var Bt=function(e){var t=e.rows,n=e.columns,a=e.getRowId,i=e.getCellValue,o=e.rootComponent,s=e.children,l=It(e,["rows","columns","getRowId","getCellValue","rootComponent","children"]);return Object(r.createElement)(Mt.PluginHost,null,Object(r.createElement)(Ft,Lt({rows:t,columns:n,getRowId:a,getCellValue:i,rootComponent:o},l)),s)};Bt.defaultProps={getRowId:void 0,getCellValue:void 0,children:void 0};var Vt=[{name:"TableColumnVisibility"},{name:"Toolbar"}],Ut=function(e){function t(e){Ot(this,t);var n=zt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={visible:!1},n.handleToggle=n.handleToggle.bind(n),n.handleHide=n.handleHide.bind(n),n.setButtonRef=n.setButtonRef.bind(n),n}return Dt(t,e),Pt(t,[{key:"setButtonRef",value:function(e){this.button=e}},{key:"handleToggle",value:function(){var e=this.state.visible;this.setState({visible:!e})}},{key:"handleHide",value:function(){this.setState({visible:!1})}},{key:"render",value:function(){var e=this,t=this.props,n=t.overlayComponent,a=t.containerComponent,i=t.itemComponent,o=t.toggleButtonComponent,s=t.messages,l=Object(St.getMessagesFormatter)(s),u=this.state.visible;return Object(r.createElement)(Mt.Plugin,{name:"ColumnChooser",dependencies:Vt},Object(r.createElement)(Mt.Template,{name:"toolbarContent"},Object(r.createElement)(Mt.TemplatePlaceholder,null),Object(r.createElement)(Mt.TemplateConnector,null,function(t,s){var c=t.columns,f=t.hiddenColumnNames,d=t.isColumnTogglingEnabled,p=s.toggleColumnVisibility;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(o,{buttonRef:e.setButtonRef,onToggle:e.handleToggle,getMessage:l,active:u}),Object(r.createElement)(n,{visible:u,target:e.button,onHide:e.handleHide},Object(r.createElement)(a,null,Object(At.columnChooserItems)(c,f).map(function(e){var t=e.column.name,n=d(t);return Object(r.createElement)(i,{key:t,item:e,disabled:!n,onToggle:function(){return p(t)}})}))))})))}}]),t}(r.PureComponent);Ut.defaultProps={messages:{}},Ut.components={overlayComponent:"Overlay",containerComponent:"Container",itemComponent:"Item",toggleButtonComponent:"ToggleButton"};var Gt=function(e){var t=e.filters,n=e.filterExpression;return Object(At.filterExpression)(t,n)};((function(e){function t(e){Ot(this,t);var n=zt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.state={filters:e.filters||e.defaultFilters};var r=Object(Mt.createStateHelper)(n,{filters:function(){return n.props.onFiltersChange}});return n.changeColumnFilter=r.applyFieldReducer.bind(r,"filters",At.changeColumnFilter),n}return Dt(t,e),Pt(t,[{key:"render",value:function(){var e=this.state.filters,t=this.props,n=t.columnExtensions,a=t.columnFilteringEnabled;return Object(r.createElement)(Mt.Plugin,{name:"FilteringState"},Object(r.createElement)(Mt.Getter,{name:"filters",value:e}),Object(r.createElement)(Mt.Getter,{name:"filterExpression",computed:Gt}),Object(r.createElement)(Mt.Getter,{name:"isColumnFilteringEnabled",value:function(e,t){return Object(At.getColumnExtensionValueGetter)(e,"filteringEnabled",t)}(n,a)}),Object(r.createElement)(Mt.Action,{name:"changeColumnFilter",action:this.changeColumnFilter}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.filters;return{filters:void 0===n?t.filters:n}}}]),t})(r.PureComponent)).defaultProps={filters:void 0,defaultFilters:[],onFiltersChange:void 0,columnExtensions:void 0,columnFilteringEnabled:!0};var Ht=[{name:"FilteringState",optional:!0},{name:"SearchState",optional:!0}],Wt=function(e){var t=e.rows;return Object(At.filteredCollapsedRowsGetter)(t)},qt=function(e){var t=e.rows;return Object(At.unwrappedFilteredRows)(t)},Yt=function(e){function t(){return Ot(this,t),zt(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Dt(t,e),Pt(t,[{key:"render",value:function(){var e=this.props.columnExtensions,t=function(t){return Object(At.getColumnExtension)(e,t).predicate};return Object(r.createElement)(Mt.Plugin,{name:"IntegratedFiltering",dependencies:Ht},Object(r.createElement)(Mt.Getter,{name:"rows",computed:function(e){var n=e.rows,r=e.filterExpression,a=e.getCellValue,i=e.getRowLevelKey,o=e.getCollapsedRows;return Object(At.filteredRows)(n,r,a,t,i,o)}}),Object(r.createElement)(Mt.Getter,{name:"getCollapsedRows",computed:Wt}),Object(r.createElement)(Mt.Getter,{name:"rows",computed:qt}))}}]),t}(r.PureComponent);Yt.defaultPredicate=At.defaultFilterPredicate,Yt.defaultProps={columnExtensions:void 0};((function(e){function t(e){Ot(this,t);var n=zt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=e.rowChanges||e.defaultRowChanges,a=e.addedRows||e.defaultAddedRows;n.state={editingRowIds:e.editingRowIds||e.defaultEditingRowIds,addedRows:a,rowChanges:r,deletedRowIds:e.deletedRowIds||e.defaultDeletedRowIds};var i=Object(Mt.createStateHelper)(n,{editingRowIds:function(){return n.props.onEditingRowIdsChange},addedRows:function(){return n.props.onAddedRowsChange},rowChanges:function(){return n.props.onRowChangesChange},deletedRowIds:function(){return n.props.onDeletedRowIdsChange}});return n.startEditRows=i.applyFieldReducer.bind(i,"editingRowIds",At.startEditRows),n.stopEditRows=i.applyFieldReducer.bind(i,"editingRowIds",At.stopEditRows),n.changeRow=i.applyFieldReducer.bind(i,"rowChanges",At.changeRow),n.cancelChangedRows=i.applyFieldReducer.bind(i,"rowChanges",At.cancelChanges),n.commitChangedRows=function(e){var t=e.rowIds;(0,n.props.onCommitChanges)({changed:Object(At.changedRowsByIds)(n.state.rowChanges,t)}),n.cancelChangedRows({rowIds:t})},n.addRow=i.applyFieldReducer.bind(i,"addedRows",At.addRow),n.changeAddedRow=i.applyFieldReducer.bind(i,"addedRows",At.changeAddedRow),n.cancelAddedRows=i.applyFieldReducer.bind(i,"addedRows",At.cancelAddedRows),n.commitAddedRows=function(e){var t=e.rowIds;(0,n.props.onCommitChanges)({added:Object(At.addedRowsByIds)(n.state.addedRows,t)}),n.cancelAddedRows({rowIds:t})},n.deleteRows=i.applyFieldReducer.bind(i,"deletedRowIds",At.deleteRows),n.cancelDeletedRows=i.applyFieldReducer.bind(i,"deletedRowIds",At.cancelDeletedRows),n.commitDeletedRows=function(e){var t=e.rowIds;(0,n.props.onCommitChanges)({deleted:t}),n.cancelDeletedRows({rowIds:t})},n}return Dt(t,e),Pt(t,[{key:"render",value:function(){var e=this.props,t=e.createRowChange,n=e.columnExtensions,a=e.columnEditingEnabled,i=this.state,o=i.editingRowIds,s=i.rowChanges,l=i.addedRows,u=i.deletedRowIds;return Object(r.createElement)(Mt.Plugin,{name:"EditingState"},Object(r.createElement)(Mt.Getter,{name:"createRowChange",value:Object(At.createRowChangeGetter)(t,n)}),Object(r.createElement)(Mt.Getter,{name:"editingRowIds",value:o}),Object(r.createElement)(Mt.Action,{name:"startEditRows",action:this.startEditRows}),Object(r.createElement)(Mt.Action,{name:"stopEditRows",action:this.stopEditRows}),Object(r.createElement)(Mt.Getter,{name:"rowChanges",value:s}),Object(r.createElement)(Mt.Action,{name:"changeRow",action:this.changeRow}),Object(r.createElement)(Mt.Action,{name:"cancelChangedRows",action:this.cancelChangedRows}),Object(r.createElement)(Mt.Action,{name:"commitChangedRows",action:this.commitChangedRows}),Object(r.createElement)(Mt.Getter,{name:"addedRows",value:l}),Object(r.createElement)(Mt.Action,{name:"addRow",action:this.addRow}),Object(r.createElement)(Mt.Action,{name:"changeAddedRow",action:this.changeAddedRow}),Object(r.createElement)(Mt.Action,{name:"cancelAddedRows",action:this.cancelAddedRows}),Object(r.createElement)(Mt.Action,{name:"commitAddedRows",action:this.commitAddedRows}),Object(r.createElement)(Mt.Getter,{name:"deletedRowIds",value:u}),Object(r.createElement)(Mt.Action,{name:"deleteRows",action:this.deleteRows}),Object(r.createElement)(Mt.Action,{name:"cancelDeletedRows",action:this.cancelDeletedRows}),Object(r.createElement)(Mt.Action,{name:"commitDeletedRows",action:this.commitDeletedRows}),Object(r.createElement)(Mt.Getter,{name:"isColumnEditingEnabled",value:function(e,t){return Object(At.getColumnExtensionValueGetter)(e,"editingEnabled",t)}(n,a)}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.editingRowIds,r=void 0===n?t.editingRowIds:n,a=e.rowChanges,i=void 0===a?t.rowChanges:a,o=e.addedRows,s=void 0===o?t.addedRows:o,l=e.deletedRowIds;return{editingRowIds:r,rowChanges:i,addedRows:s,deletedRowIds:void 0===l?t.deletedRowIds:l}}}]),t})(r.PureComponent)).defaultProps={createRowChange:void 0,columnEditingEnabled:!0,columnExtensions:void 0,editingRowIds:void 0,defaultEditingRowIds:[],onEditingRowIdsChange:void 0,rowChanges:void 0,defaultRowChanges:{},onRowChangesChange:void 0,addedRows:void 0,defaultAddedRows:[],onAddedRowsChange:void 0,deletedRowIds:void 0,defaultDeletedRowIds:[],onDeletedRowIdsChange:void 0};var Xt=function(e){function t(e){Ot(this,t);var n=zt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.state={currentPage:e.currentPage||e.defaultCurrentPage,pageSize:void 0!==e.pageSize?e.pageSize:e.defaultPageSize};var r=Object(Mt.createStateHelper)(n,{currentPage:function(){return n.props.onCurrentPageChange},pageSize:function(){return n.props.onPageSizeChange}});return n.setCurrentPage=r.applyFieldReducer.bind(r,"currentPage",At.setCurrentPage),n.setPageSize=r.applyFieldReducer.bind(r,"pageSize",At.setPageSize),n}return Dt(t,e),Pt(t,[{key:"render",value:function(){var e=this.state,t=e.pageSize,n=e.currentPage;return Object(r.createElement)(Mt.Plugin,{name:"PagingState"},Object(r.createElement)(Mt.Getter,{name:"currentPage",value:n}),Object(r.createElement)(Mt.Getter,{name:"pageSize",value:t}),Object(r.createElement)(Mt.Action,{name:"setCurrentPage",action:this.setCurrentPage}),Object(r.createElement)(Mt.Action,{name:"setPageSize",action:this.setPageSize}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.currentPage,r=void 0===n?t.currentPage:n,a=e.pageSize;return{currentPage:r,pageSize:void 0===a?t.pageSize:a}}}]),t}(r.PureComponent);Xt.defaultProps={pageSize:void 0,defaultPageSize:10,onPageSizeChange:void 0,currentPage:void 0,defaultCurrentPage:0,onCurrentPageChange:void 0};var Zt=[{name:"PagingState"}],$t=function(e){var t=e.rows,n=e.pageSize,r=e.getRowLevelKey;return Object(At.rowsWithPageHeaders)(t,n,r)},Kt=function(e){var t=e.rows;return Object(At.rowCount)(t)},Jt=function(e){var t=e.rows,n=e.pageSize,r=e.currentPage;return Object(At.paginatedRows)(t,n,r)},Qt=function(e,t){var n=e.currentPage,r=e.totalCount,a=e.pageSize,i=t.setCurrentPage;return Object(At.currentPage)(n,r,a,i)},en=function(e){function t(){return Ot(this,t),zt(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Dt(t,e),Pt(t,[{key:"render",value:function(){return Object(r.createElement)(Mt.Plugin,{name:"IntegratedPaging",dependencies:Zt},Object(r.createElement)(Mt.Getter,{name:"rows",computed:$t}),Object(r.createElement)(Mt.Getter,{name:"totalCount",computed:Kt}),Object(r.createElement)(Mt.Getter,{name:"currentPage",computed:Qt}),Object(r.createElement)(Mt.Getter,{name:"rows",computed:Jt}))}}]),t}(r.PureComponent),tn=[{name:"PagingState"}];((function(e){function t(){return Ot(this,t),zt(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Dt(t,e),Pt(t,[{key:"render",value:function(){var e=this.props.totalCount;return Object(r.createElement)(Mt.Plugin,{name:"CustomPaging",dependencies:tn},Object(r.createElement)(Mt.Getter,{name:"totalCount",value:e}))}}]),t})(r.PureComponent)).defaultProps={totalCount:0};var nn=[{name:"SortingState",optional:!0}];((function(e){function t(e){Ot(this,t);var n=zt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={grouping:e.grouping||e.defaultGrouping,draftGrouping:null,expandedGroups:e.expandedGroups||e.defaultExpandedGroups},n.stateHelper=Object(Mt.createStateHelper)(n,{grouping:function(){return n.props.onGroupingChange},expandedGroups:function(){return n.props.onExpandedGroupsChange}}),n.changeColumnGrouping=n.changeColumnGrouping.bind(n),n.toggleGroupExpanded=n.stateHelper.applyReducer.bind(n.stateHelper,At.toggleExpandedGroups),n.draftColumnGrouping=n.stateHelper.applyReducer.bind(n.stateHelper,At.draftColumnGrouping),n.cancelColumnGroupingDraft=n.stateHelper.applyReducer.bind(n.stateHelper,At.cancelColumnGroupingDraft),n.changeColumnSorting=n.changeColumnSorting.bind(n),n}return Dt(t,e),Pt(t,[{key:"changeColumnSorting",value:function(e,t,n){var r=t.sorting,a=n.changeColumnSorting,i=e.columnName,o=e.keepOther,s=It(e,["columnName","keepOther"]),l=this.state.grouping,u=l.findIndex(function(e){return e.columnName===i});if(-1===u)return a(Lt({columnName:i,keepOther:o||l.map(function(e){return e.columnName})},s)),!1;var c=Object(At.adjustSortIndex)(u,l,r);return a(Lt({columnName:i,keepOther:!0,sortIndex:c},s)),!1}},{key:"changeColumnGrouping",value:function(e,t,n){var r=e.columnName,a=e.groupIndex;this.stateHelper.applyReducer(At.changeColumnGrouping,{columnName:r,groupIndex:a},function(e,a){var i=e.grouping,o=a.grouping,s=t.sorting,l=n.changeColumnSorting;if(s){var u=s.findIndex(function(e){return e.columnName===r}),c=o.findIndex(function(e){return e.columnName===r}),f=i.findIndex(function(e){return e.columnName===r});if(-1!==u&&(c!==o.length-1||-1!==f)){var d=Object(At.adjustSortIndex)(-1===f?i.length:f,i,s);u!==d&&l(Lt({keepOther:!0,sortIndex:d},s[u]))}}})}},{key:"render",value:function(){var e=this.state,t=e.grouping,n=e.draftGrouping,a=e.expandedGroups,i=this.props,o=i.columnExtensions,s=i.columnGroupingEnabled;return Object(r.createElement)(Mt.Plugin,{name:"GroupingState",dependencies:nn},Object(r.createElement)(Mt.Getter,{name:"grouping",value:t}),Object(r.createElement)(Mt.Getter,{name:"draftGrouping",value:n||t}),Object(r.createElement)(Mt.Getter,{name:"isColumnGroupingEnabled",value:function(e,t){return Object(At.getColumnExtensionValueGetter)(e,"groupingEnabled",t)}(o,s)}),Object(r.createElement)(Mt.Action,{name:"changeColumnGrouping",action:this.changeColumnGrouping}),Object(r.createElement)(Mt.Action,{name:"draftColumnGrouping",action:this.draftColumnGrouping}),Object(r.createElement)(Mt.Action,{name:"cancelColumnGroupingDraft",action:this.cancelColumnGroupingDraft}),Object(r.createElement)(Mt.Getter,{name:"expandedGroups",value:a}),Object(r.createElement)(Mt.Action,{name:"toggleGroupExpanded",action:this.toggleGroupExpanded}),Object(r.createElement)(Mt.Action,{name:"changeColumnSorting",action:this.changeColumnSorting}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.grouping,r=void 0===n?t.grouping:n,a=e.expandedGroups;return{grouping:r,expandedGroups:void 0===a?t.expandedGroups:a}}}]),t})(r.PureComponent)).defaultProps={grouping:void 0,defaultGrouping:[],onGroupingChange:void 0,expandedGroups:void 0,defaultExpandedGroups:[],onExpandedGroupsChange:void 0,columnExtensions:void 0,columnGroupingEnabled:!0};var rn=[{name:"GroupingState"}],an=function(e){var t=e.getCollapsedRows;return Object(At.groupCollapsedRowsGetter)(t)},on=function(e){var t=e.rows,n=e.grouping,r=e.expandedGroups;return Object(At.expandedGroupRows)(t,n,r)};((function(e){function t(){return Ot(this,t),zt(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Dt(t,e),Pt(t,[{key:"render",value:function(){var e=this.props.columnExtensions,t=function(t){return Object(At.getColumnExtension)(e,t).criteria};return Object(r.createElement)(Mt.Plugin,{name:"IntegratedGrouping",dependencies:rn},Object(r.createElement)(Mt.Getter,{name:"isGroupRow",value:At.groupRowChecker}),Object(r.createElement)(Mt.Getter,{name:"getRowLevelKey",value:At.groupRowLevelKeyGetter}),Object(r.createElement)(Mt.Getter,{name:"getCollapsedRows",computed:an}),Object(r.createElement)(Mt.Getter,{name:"rows",computed:function(e){var n=e.rows,r=e.grouping,a=e.getCellValue;return Object(At.groupedRows)(n,r,a,t)}}),Object(r.createElement)(Mt.Getter,{name:"rows",computed:on}))}}]),t})(r.PureComponent)).defaultProps={columnExtensions:void 0};var sn=[{name:"GroupingState"}],ln=function(e){var t=e.getCollapsedRows;return Object(At.groupCollapsedRowsGetter)(t)},un=function(e){var t=e.rows,n=e.grouping,r=e.expandedGroups;return Object(At.expandedGroupRows)(t,n,r)},cn=function(e){var t=e.getRowId,n=e.rows;return Object(At.customGroupingRowIdGetter)(t,n)};((function(e){function t(){return Ot(this,t),zt(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Dt(t,e),Pt(t,[{key:"render",value:function(){var e=this.props,t=e.getChildGroups,n=e.grouping,a=e.expandedGroups;return Object(r.createElement)(Mt.Plugin,{name:"CustomGrouping",dependencies:sn},n&&Object(r.createElement)(Mt.Getter,{name:"grouping",value:n}),a&&Object(r.createElement)(Mt.Getter,{name:"expandedGroups",value:a}),Object(r.createElement)(Mt.Getter,{name:"isGroupRow",value:At.groupRowChecker}),Object(r.createElement)(Mt.Getter,{name:"getRowLevelKey",value:At.groupRowLevelKeyGetter}),Object(r.createElement)(Mt.Getter,{name:"getCollapsedRows",computed:ln}),Object(r.createElement)(Mt.Getter,{name:"rows",computed:function(e){var n=e.rows,r=e.grouping;return Object(At.customGroupedRows)(n,r,t)}}),Object(r.createElement)(Mt.Getter,{name:"getRowId",computed:cn}),Object(r.createElement)(Mt.Getter,{name:"rows",computed:un}))}}]),t})(r.PureComponent)).defaultProps={grouping:void 0,expandedGroups:void 0};var fn=function(e){function t(e){Ot(this,t);var n=zt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.state={selection:e.selection||e.defaultSelection};var r=Object(Mt.createStateHelper)(n,{selection:function(){return n.props.onSelectionChange}});return n.toggleSelection=r.applyFieldReducer.bind(r,"selection",At.toggleSelection),n}return Dt(t,e),Pt(t,[{key:"render",value:function(){var e=this.state.selection;return Object(r.createElement)(Mt.Plugin,{name:"SelectionState"},Object(r.createElement)(Mt.Getter,{name:"selection",value:e}),Object(r.createElement)(Mt.Action,{name:"toggleSelection",action:this.toggleSelection}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.selection;return{selection:void 0===n?t.selection:n}}}]),t}(r.PureComponent);fn.defaultProps={selection:void 0,defaultSelection:[],onSelectionChange:void 0};var dn=function(e){var t=e.rows,n=e.getRowId,r=e.isGroupRow;return Object(At.rowsWithAvailableToSelect)(t,n,r)},pn=function(e){var t=e.rows,n=e.selection;return Object(At.allSelected)(t,n)},hn=function(e){var t=e.rows,n=e.selection;return Object(At.someSelected)(t,n)},mn=function(e){return!!e.rows.availableToSelect.length},vn=function(e,t,n){var r=t.rows.availableToSelect;(0,n.toggleSelection)({rowIds:r,state:e})},gn=function(e){var t=e.rows;return Object(At.unwrapSelectedRows)(t)},yn=[{name:"SelectionState"}],bn=function(e){function t(){return Ot(this,t),zt(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Dt(t,e),Pt(t,[{key:"render",value:function(){return Object(r.createElement)(Mt.Plugin,{name:"IntegratedSelection",dependencies:yn},Object(r.createElement)(Mt.Getter,{name:"rows",computed:dn}),Object(r.createElement)(Mt.Getter,{name:"allSelected",computed:pn}),Object(r.createElement)(Mt.Getter,{name:"someSelected",computed:hn}),Object(r.createElement)(Mt.Getter,{name:"selectAllAvailable",computed:mn}),Object(r.createElement)(Mt.Action,{name:"toggleSelectAll",action:vn}),Object(r.createElement)(Mt.Getter,{name:"rows",computed:gn}))}}]),t}(r.PureComponent),xn=function(e){function t(e){Ot(this,t);var n=zt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.state={sorting:e.sorting||e.defaultSorting};var r=Object(Mt.createStateHelper)(n,{sorting:function(){return n.props.onSortingChange}});return n.changeColumnSorting=r.applyReducer.bind(r,function(t,r){var a=n.props.sorting,i=void 0===a?t.sorting:a,o=Object(At.getPersistentSortedColumns)(i,e.columnExtensions),s=Object(At.calculateKeepOther)(t.sorting,r.keepOther,o);return Object(At.changeColumnSorting)(t,Lt({},r,{keepOther:s}))}),n}return Dt(t,e),Pt(t,[{key:"render",value:function(){var e=this.state.sorting,t=this.props,n=t.columnExtensions,a=t.columnSortingEnabled;return Object(r.createElement)(Mt.Plugin,{name:"SortingState"},Object(r.createElement)(Mt.Getter,{name:"sorting",value:e}),Object(r.createElement)(Mt.Getter,{name:"isColumnSortingEnabled",value:function(e,t){return Object(At.getColumnExtensionValueGetter)(e,"sortingEnabled",t)}(n,a)}),Object(r.createElement)(Mt.Action,{name:"changeColumnSorting",action:this.changeColumnSorting}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.sorting;return{sorting:void 0===n?t.sorting:n}}}]),t}(r.PureComponent);xn.defaultProps={sorting:void 0,defaultSorting:[],onSortingChange:void 0,columnExtensions:void 0,columnSortingEnabled:!0};var _n=[{name:"SortingState"}],wn=function(e){function t(){return Ot(this,t),zt(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Dt(t,e),Pt(t,[{key:"render",value:function(){var e=this.props.columnExtensions,t=function(t){return Object(At.getColumnExtension)(e,t).compare};return Object(r.createElement)(Mt.Plugin,{name:"IntegratedSorting",dependencies:_n},Object(r.createElement)(Mt.Getter,{name:"rows",computed:function(e){var n=e.rows,r=e.sorting,a=e.getCellValue,i=e.isGroupRow,o=e.getRowLevelKey;return Object(At.sortedRows)(n,r,a,t,i,o)}}))}}]),t}(r.PureComponent);wn.defaultProps={columnExtensions:void 0};var Tn=function(e){function t(e){Ot(this,t);var n=zt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={payload:null,clientOffset:null},n.change=function(e){var t=e.payload,r=e.clientOffset;return n.setState({payload:t,clientOffset:r})},n}return Dt(t,e),Pt(t,[{key:"render",value:function(){var e=this.props,t=e.containerComponent,n=e.columnComponent,a=this.state,i=a.payload,o=a.clientOffset;return Object(r.createElement)(Mt.Plugin,{name:"DragDropProvider"},Object(r.createElement)(Mt.Getter,{name:"draggingEnabled",value:!0}),Object(r.createElement)(Mt.Template,{name:"root"},Object(r.createElement)(Mt.DragDropProvider,{onChange:this.change},Object(r.createElement)(Mt.TemplatePlaceholder,null)),i&&Object(r.createElement)(Mt.TemplateConnector,null,function(e){var a=e.columns;return Object(r.createElement)(t,{clientOffset:o},function(e,t){return e.filter(function(e){return"column"===e.type}).map(function(e){return t.find(function(t){return t.name===e.columnName})})}(i,a).map(function(e){return Object(r.createElement)(n,{key:e.name,column:e})}))})))}}]),t}(r.PureComponent);Tn.components={containerComponent:"Container",columnComponent:"Column"};var kn=[{name:"Table"}],Cn=function(e){var t=e.tableHeaderRows;return Object(At.tableHeaderRowsWithReordering)(t)},En=function(e){function t(e){Ot(this,t);var n=zt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={order:e.defaultOrder,sourceColumnIndex:-1,targetColumnIndex:-1},n.onOver=n.handleOver.bind(n),n.onLeave=n.handleLeave.bind(n),n.onDrop=n.handleDrop.bind(n),n}return Dt(t,e),Pt(t,[{key:"getState",value:function(){var e=this.state.order,t=this.props.order,n=void 0===t?e:t;return Lt({},this.state,{order:n})}},{key:"getDraftOrder",value:function(){var e=this.getState(),t=e.order,n=e.sourceColumnIndex,r=e.targetColumnIndex;return Object(At.draftOrder)(t,n,r)}},{key:"getAvailableColumns",value:function(){var e=this;return this.getDraftOrder().filter(function(t){return!!e.cellDimensionGetters[t]})}},{key:"cacheCellDimensions",value:function(){var e=this;this.cellDimensions=this.cellDimensions&&this.cellDimensions.length?this.cellDimensions:this.getAvailableColumns().map(function(t){return e.cellDimensionGetters[t]()})}},{key:"resetCellDimensions",value:function(){this.cellDimensions=[]}},{key:"ensureCellDimensionGetters",value:function(e){var t=this;Object.keys(this.cellDimensionGetters).forEach(function(n){-1===e.findIndex(function(e){var t=e.type,r=e.column;return t===At.TABLE_DATA_TYPE&&r.name===n})&&delete t.cellDimensionGetters[n]})}},{key:"storeCellDimensionsGetter",value:function(e,t,n){e.type===At.TABLE_DATA_TYPE&&(this.cellDimensionGetters[e.column.name]=t),this.ensureCellDimensionGetters(n)}},{key:"handleOver",value:function(e){var t=e.payload,n=e.clientOffset.x,r=t[0].columnName,a=this.getAvailableColumns(),i=a.indexOf(r);if(-1!==i){this.cacheCellDimensions();var o=this.cellDimensions;if(!(o.filter(function(e){var t=e.left,r=e.right;return t<=n&&n<=r}).length>1)){var s=Object(At.getTableTargetColumnIndex)(o,i,n);if(-1!==s){var l=this.getState(),u=l.sourceColumnIndex,c=l.targetColumnIndex,f=this.getDraftOrder(),d=f.indexOf(a[s]);if(d!==c){var p=-1===u?f.indexOf(r):u;this.setState({sourceColumnIndex:p,targetColumnIndex:d})}}}}}},{key:"handleLeave",value:function(){this.setState({sourceColumnIndex:-1,targetColumnIndex:-1}),this.resetCellDimensions()}},{key:"handleDrop",value:function(){var e=this.getState(),t=e.sourceColumnIndex,n=e.targetColumnIndex,r=e.order,a=this.props.onOrderChange;if(-1!==t||-1!==n){var i=Object(At.changeColumnOrder)(r,{sourceColumnName:r[t],targetColumnName:r[n]});this.setState({order:i,sourceColumnIndex:-1,targetColumnIndex:-1}),a&&a(i),this.resetCellDimensions()}}},{key:"render",value:function(){var e=this,t=this.props,n=t.tableContainerComponent,a=t.rowComponent,i=t.cellComponent;return this.cellDimensionGetters={},Object(r.createElement)(Mt.Plugin,{name:"TableColumnReordering",dependencies:kn},Object(r.createElement)(Mt.Getter,{name:"tableColumns",computed:function(t){var n=t.tableColumns;return Object(At.orderedColumns)(n,e.getDraftOrder())}}),Object(r.createElement)(Mt.Getter,{name:"tableHeaderRows",computed:Cn}),Object(r.createElement)(Mt.Template,{name:"table"},function(t){return Object(r.createElement)(n,Lt({},t,{onOver:e.onOver,onLeave:e.onLeave,onDrop:e.onDrop}),Object(r.createElement)(Mt.TemplatePlaceholder,null))}),Object(r.createElement)(Mt.Template,{name:"tableRow",predicate:function(e){return e.tableRow.type===At.TABLE_REORDERING_TYPE}},function(e){return Object(r.createElement)(a,e)}),Object(r.createElement)(Mt.Template,{name:"tableCell",predicate:function(e){return e.tableRow.type===At.TABLE_REORDERING_TYPE}},function(t){return Object(r.createElement)(Mt.TemplateConnector,null,function(n){var a=n.tableColumns;return Object(r.createElement)(i,Lt({},t,{getCellDimensions:function(n){return e.storeCellDimensionsGetter(t.tableColumn,n,a)}}))})}))}}]),t}(r.PureComponent);En.defaultProps={order:void 0,defaultOrder:[],onOrderChange:void 0},En.components={tableContainerComponent:"TableContainer",rowComponent:"Row",cellComponent:"Cell"};var Mn=Object(Mt.withComponents)({TableContainer:function(e){var t=e.onOver,n=e.onLeave,a=e.onDrop,i=e.children;return Object(r.createElement)(Mt.DropTarget,{onOver:t,onLeave:n,onDrop:a},i)}})(En),An=function(e){return Object(r.createElement)(Mt.TemplatePlaceholder,{name:"tableRow",params:e})},Sn=function(e){return Object(r.createElement)(Mt.TemplatePlaceholder,{name:"tableCell",params:e})},On=[],Pn=function(e){var t=e.rows,n=e.getRowId;return Object(At.tableRowsWithDataRows)(t,n)},Rn=[],Ln={noData:"No data"},Dn=function(e){function t(e){Ot(this,t);var n=zt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.tableColumnsComputed=Object(St.memoize)(function(e){return function(t){var n=t.columns;return Object(At.tableColumnsWithDataRows)(n,e)}}),n}return Dt(t,e),Pt(t,[{key:"render",value:function(){var e=this.props,t=e.layoutComponent,n=e.cellComponent,a=e.rowComponent,i=e.noDataRowComponent,o=e.noDataCellComponent,s=e.stubRowComponent,l=e.stubCellComponent,u=e.stubHeaderCellComponent,c=e.columnExtensions,f=e.messages,d=e.containerComponent,p=e.tableComponent,h=e.headComponent,m=e.bodyComponent,v=e.footerComponent,g=Object(St.getMessagesFormatter)(Lt({},Ln,f)),y=this.tableColumnsComputed(c);return Object(r.createElement)(Mt.Plugin,{name:"Table"},Object(r.createElement)(Mt.Getter,{name:"tableHeaderRows",value:On}),Object(r.createElement)(Mt.Getter,{name:"tableBodyRows",computed:Pn}),Object(r.createElement)(Mt.Getter,{name:"tableFooterRows",value:Rn}),Object(r.createElement)(Mt.Getter,{name:"tableColumns",computed:y}),Object(r.createElement)(Mt.Getter,{name:"getTableCellColSpan",value:At.tableCellColSpanGetter}),Object(r.createElement)(Mt.Template,{name:"body"},Object(r.createElement)(Mt.TemplatePlaceholder,{name:"table"})),Object(r.createElement)(Mt.Template,{name:"table"},Object(r.createElement)(Mt.TemplateConnector,null,function(e){var n=e.tableHeaderRows,a=e.tableBodyRows,i=e.tableFooterRows,o=e.tableColumns,s=e.getTableCellColSpan;return Object(r.createElement)(t,{tableComponent:p,headComponent:h,bodyComponent:m,footerComponent:v,containerComponent:d,headerRows:n,bodyRows:a,footerRows:i,columns:o,rowComponent:An,cellComponent:Sn,getCellColSpan:s})})),Object(r.createElement)(Mt.Template,{name:"tableCell"},function(e){return Object(r.createElement)(Mt.TemplateConnector,null,function(t){var n=t.tableHeaderRows;return Object(At.isHeaderStubTableCell)(e.tableRow,n)?Object(r.createElement)(u,e):Object(r.createElement)(l,e)})}),Object(r.createElement)(Mt.Template,{name:"tableCell",predicate:function(e){var t=e.tableRow,n=e.tableColumn;return Object(At.isDataTableCell)(t,n)}},function(e){return Object(r.createElement)(Mt.TemplateConnector,null,function(t){var a=t.getCellValue,i=e.tableColumn.column.name,o=a(e.tableRow.row,i);return Object(r.createElement)(Mt.TemplatePlaceholder,{name:"valueFormatter",params:{row:e.tableRow.row,column:e.tableColumn.column,value:o}},function(t){return Object(r.createElement)(n,Lt({},e,{row:e.tableRow.row,column:e.tableColumn.column,value:o}),t)})})}),Object(r.createElement)(Mt.Template,{name:"tableCell",predicate:function(e){var t=e.tableRow;return Object(At.isNoDataTableRow)(t)}},function(e){return Object(r.createElement)(Mt.TemplateConnector,null,function(t){var n=t.tableColumns;return Object(At.isNoDataTableCell)(e.tableColumn,n)?Object(r.createElement)(o,Lt({},e,{getMessage:g})):null})}),Object(r.createElement)(Mt.Template,{name:"tableRow"},function(e){return Object(r.createElement)(s,e)}),Object(r.createElement)(Mt.Template,{name:"tableRow",predicate:function(e){var t=e.tableRow;return Object(At.isDataTableRow)(t)}},function(e){return Object(r.createElement)(a,Lt({},e,{row:e.tableRow.row}))}),Object(r.createElement)(Mt.Template,{name:"tableRow",predicate:function(e){var t=e.tableRow;return Object(At.isNoDataTableRow)(t)}},function(e){return Object(r.createElement)(i,e)}))}}]),t}(r.PureComponent);Dn.COLUMN_TYPE=At.TABLE_DATA_TYPE,Dn.ROW_TYPE=At.TABLE_DATA_TYPE,Dn.NODATA_ROW_TYPE=At.TABLE_NODATA_TYPE,Dn.defaultProps={columnExtensions:void 0,messages:{}},Dn.components={tableComponent:"Table",headComponent:"TableHead",bodyComponent:"TableBody",footerComponent:"TableFooter",containerComponent:"Container",layoutComponent:"Layout",rowComponent:"Row",cellComponent:"Cell",noDataRowComponent:"NoDataRow",noDataCellComponent:"NoDataCell",stubRowComponent:"StubRow",stubCellComponent:"StubCell",stubHeaderCellComponent:"StubHeaderCell"};var In=function(e){function t(){return Ot(this,t),zt(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Dt(t,e),Pt(t,[{key:"render",value:function(){var e=this.props,t=e.highlightRow,n=e.selectByRowClick,a=e.showSelectionColumn,i=e.showSelectAll,o=e.headerCellComponent,s=e.cellComponent,l=e.rowComponent,u=e.selectionColumnWidth;return Object(r.createElement)(Mt.Plugin,{name:"TableSelection",dependencies:[{name:"Table"},{name:"SelectionState"},{name:"IntegratedSelection",optional:!i}]},a&&Object(r.createElement)(Mt.Getter,{name:"tableColumns",computed:function(e){var t=e.tableColumns;return Object(At.tableColumnsWithSelection)(t,u)}}),a&&i&&Object(r.createElement)(Mt.Template,{name:"tableCell",predicate:function(e){var t=e.tableRow,n=e.tableColumn;return Object(At.isSelectAllTableCell)(t,n)}},function(e){return Object(r.createElement)(Mt.TemplateConnector,null,function(t,n){var a=t.selectAllAvailable,i=t.allSelected,s=t.someSelected,l=n.toggleSelectAll;return Object(r.createElement)(o,Lt({},e,{disabled:!a,allSelected:i,someSelected:s,onToggle:function(e){return l(e)}}))})}),a&&Object(r.createElement)(Mt.Template,{name:"tableCell",predicate:function(e){var t=e.tableRow,n=e.tableColumn;return Object(At.isSelectTableCell)(t,n)}},function(e){return Object(r.createElement)(Mt.TemplateConnector,null,function(t,n){var a=t.selection,i=n.toggleSelection;return Object(r.createElement)(s,Lt({},e,{row:e.tableRow.row,selected:-1!==a.indexOf(e.tableRow.rowId),onToggle:function(){return i({rowIds:[e.tableRow.rowId]})}}))})}),(t||n)&&Object(r.createElement)(Mt.Template,{name:"tableRow",predicate:function(e){var t=e.tableRow;return Object(At.isDataTableRow)(t)}},function(e){return Object(r.createElement)(Mt.TemplateConnector,null,function(a,i){var o=a.selection,s=i.toggleSelection;return Object(r.createElement)(l,Lt({},e,{selectByRowClick:n,selected:t&&-1!==o.indexOf(e.tableRow.rowId),onToggle:function(){return s({rowIds:[e.tableRow.rowId]})}}))})}))}}]),t}(r.PureComponent);In.COLUMN_TYPE=At.TABLE_SELECT_TYPE,In.defaultProps={highlightRow:!1,selectByRowClick:!1,showSelectAll:!1,showSelectionColumn:!0},In.components={rowComponent:"Row",cellComponent:"Cell",headerCellComponent:"HeaderCell"},(function(e){function t(e){Ot(this,t);var n=zt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.state={expandedRowIds:e.expandedRowIds||e.defaultExpandedRowIds};var r=Object(Mt.createStateHelper)(n,{expandedRowIds:function(){return n.props.onExpandedRowIdsChange}});return n.toggleDetailRowExpanded=r.applyFieldReducer.bind(r,"expandedRowIds",At.toggleDetailRowExpanded),n}return Dt(t,e),Pt(t,[{key:"render",value:function(){var e=this.state.expandedRowIds;return Object(r.createElement)(Mt.Plugin,{name:"RowDetailState"},Object(r.createElement)(Mt.Getter,{name:"expandedDetailRowIds",value:e}),Object(r.createElement)(Mt.Action,{name:"toggleDetailRowExpanded",action:this.toggleDetailRowExpanded}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.expandedRowIds;return{expandedRowIds:void 0===n?t.expandedRowIds:n}}}]),t}(r.PureComponent)).defaultProps={expandedRowIds:void 0,defaultExpandedRowIds:[],onExpandedRowIdsChange:void 0};var zn=function(e){var t=e.getTableCellColSpan;return Object(At.tableDetailCellColSpanGetter)(t)},jn=[{name:"RowDetailState"},{name:"Table"}],Nn=function(e){function t(){return Ot(this,t),zt(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Dt(t,e),Pt(t,[{key:"render",value:function(){var e=this.props,t=e.rowHeight,n=e.contentComponent,a=e.toggleCellComponent,i=e.cellComponent,o=e.rowComponent,s=e.toggleColumnWidth;return Object(r.createElement)(Mt.Plugin,{name:"TableRowDetail",dependencies:jn},Object(r.createElement)(Mt.Getter,{name:"tableColumns",computed:function(e){var t=e.tableColumns;return Object(At.tableColumnsWithDetail)(t,s)}}),Object(r.createElement)(Mt.Getter,{name:"tableBodyRows",computed:function(e){var n=e.tableBodyRows,r=e.expandedDetailRowIds;return Object(At.tableRowsWithExpandedDetail)(n,r,t)}}),Object(r.createElement)(Mt.Getter,{name:"getTableCellColSpan",computed:zn}),Object(r.createElement)(Mt.Template,{name:"tableCell",predicate:function(e){var t=e.tableRow,n=e.tableColumn;return Object(At.isDetailToggleTableCell)(t,n)}},function(e){return Object(r.createElement)(Mt.TemplateConnector,null,function(t,n){var i=t.expandedDetailRowIds,o=n.toggleDetailRowExpanded;return Object(r.createElement)(a,Lt({},e,{row:e.tableRow.row,expanded:Object(At.isDetailRowExpanded)(i,e.tableRow.rowId),onToggle:function(){return o({rowId:e.tableRow.rowId})}}))})}),Object(r.createElement)(Mt.Template,{name:"tableCell",predicate:function(e){var t=e.tableRow;return Object(At.isDetailTableRow)(t)}},function(e){return Object(r.createElement)(Mt.TemplateConnector,null,function(t){var a=t.tableColumns;return Object(At.isDetailTableCell)(e.tableColumn,a)?Object(r.createElement)(i,Lt({},e,{row:e.tableRow.row}),Object(r.createElement)(n,{row:e.tableRow.row})):null})}),Object(r.createElement)(Mt.Template,{name:"tableRow",predicate:function(e){var t=e.tableRow;return Object(At.isDetailTableRow)(t)}},function(e){return Object(r.createElement)(o,Lt({},e,{row:e.tableRow.row}))}))}}]),t}(r.PureComponent);Nn.ROW_TYPE=At.TABLE_DETAIL_TYPE,Nn.COLUMN_TYPE=At.TABLE_DETAIL_TYPE,Nn.defaultProps={contentComponent:function(){return null},rowHeight:void 0},Nn.components={rowComponent:"Row",cellComponent:"Cell",toggleCellComponent:"ToggleCell"};var Fn=[{name:"GroupingState"},{name:"Table"},{name:"DataTypeProvider",optional:!0}],Bn=function(e){var t=e.tableBodyRows,n=e.isGroupRow;return Object(At.tableRowsWithGrouping)(t,n)},Vn=function(e){var t=e.getTableCellColSpan;return Object(At.tableGroupCellColSpanGetter)(t)},Un=function(e){function t(){return Ot(this,t),zt(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Dt(t,e),Pt(t,[{key:"render",value:function(){var e=this.props,t=e.cellComponent,n=e.rowComponent,a=e.indentCellComponent,i=e.indentColumnWidth,o=e.showColumnsWhenGrouped,s=e.columnExtensions;return Object(r.createElement)(Mt.Plugin,{name:"TableGroupRow",dependencies:Fn},Object(r.createElement)(Mt.Getter,{name:"tableColumns",computed:function(e){var t=e.columns,n=e.tableColumns,r=e.grouping,a=e.draftGrouping;return Object(At.tableColumnsWithGrouping)(t,n,r,a,i,function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).reduce(function(e,t){return e[t.columnName]=t.showWhenGrouped,e},{});return function(n){return t[n]||e}}(o,s))}}),Object(r.createElement)(Mt.Getter,{name:"tableBodyRows",computed:Bn}),Object(r.createElement)(Mt.Getter,{name:"getTableCellColSpan",computed:Vn}),Object(r.createElement)(Mt.Template,{name:"tableCell",predicate:function(e){var t=e.tableRow;return Object(At.isGroupTableRow)(t)}},function(e){return Object(r.createElement)(Mt.TemplateConnector,null,function(n,i){var o=n.grouping,s=n.expandedGroups,l=i.toggleGroupExpanded;return Object(At.isGroupTableCell)(e.tableRow,e.tableColumn)?Object(r.createElement)(Mt.TemplatePlaceholder,{name:"valueFormatter",params:{column:e.tableColumn.column,value:e.tableRow.row.value}},function(n){return Object(r.createElement)(t,Lt({},e,{row:e.tableRow.row,column:e.tableColumn.column,expanded:-1!==s.indexOf(e.tableRow.row.compoundKey),onToggle:function(){return l({groupKey:e.tableRow.row.compoundKey})}}),n)}):Object(At.isGroupIndentTableCell)(e.tableRow,e.tableColumn,o)?a?Object(r.createElement)(a,Lt({},e,{row:e.tableRow.row,column:e.tableColumn.column})):Object(r.createElement)(Mt.TemplatePlaceholder,null):null})}),Object(r.createElement)(Mt.Template,{name:"tableRow",predicate:function(e){var t=e.tableRow;return Object(At.isGroupTableRow)(t)}},function(e){return Object(r.createElement)(n,Lt({},e,{row:e.tableRow.row}))}))}}]),t}(r.PureComponent);Un.ROW_TYPE=At.TABLE_GROUP_TYPE,Un.COLUMN_TYPE=At.TABLE_GROUP_TYPE,Un.defaultProps={indentCellComponent:null,showColumnsWhenGrouped:!1,columnExtensions:void 0},Un.components={rowComponent:"Row",cellComponent:"Cell"};var Gn=function(e){var t=e.tableHeaderRows;return Object(At.tableRowsWithHeading)(t)},Hn=function(e){function t(){return Ot(this,t),zt(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Dt(t,e),Pt(t,[{key:"render",value:function(){var e=this.props,t=e.showSortingControls,n=e.showGroupingControls,a=e.cellComponent,i=e.rowComponent,o=e.contentComponent,s=e.sortLabelComponent,l=e.groupButtonComponent,u=e.titleComponent,c=e.messages,f=Object(St.getMessagesFormatter)(c);return Object(r.createElement)(Mt.Plugin,{name:"TableHeaderRow",dependencies:[{name:"Table"},{name:"SortingState",optional:!t},{name:"GroupingState",optional:!n},{name:"DragDropProvider",optional:!0},{name:"TableColumnResizing",optional:!0}]},Object(r.createElement)(Mt.Getter,{name:"tableHeaderRows",computed:Gn}),Object(r.createElement)(Mt.Template,{name:"tableCell",predicate:function(e){var t=e.tableRow,n=e.tableColumn;return Object(At.isHeadingTableCell)(t,n)}},function(e){return Object(r.createElement)(Mt.TemplateConnector,null,function(i,c){var d=i.sorting,p=i.tableColumns,h=i.draggingEnabled,m=i.tableColumnResizingEnabled,v=i.isColumnSortingEnabled,g=i.isColumnGroupingEnabled,y=c.changeColumnSorting,b=c.changeColumnGrouping,x=c.changeTableColumnWidth,_=c.draftTableColumnWidth,w=c.cancelTableColumnWidthDraft,T=e.tableColumn.column,k=T.name,C=T.title,E=p.filter(function(e){return e.type===At.TABLE_DATA_TYPE}).length>1,M=v&&v(k),A=g&&g(k)&&E;return Object(r.createElement)(a,Lt({},e,{column:e.tableColumn.column,getMessage:f,draggingEnabled:h&&E,resizingEnabled:m,onWidthChange:function(e){var t=e.shift;return x({columnName:k,shift:t})},onWidthDraft:function(e){var t=e.shift;return _({columnName:k,shift:t})},onWidthDraftCancel:function(){return w()},sortingEnabled:M,groupingEnabled:A,showSortingControls:t,showGroupingControls:n,sortingDirection:t&&void 0!==d?Object(At.getColumnSortingDirection)(d,k):void 0,onSort:function(e){var t=e.direction,n=e.keepOther;return y({columnName:k,direction:t,keepOther:n})},onGroup:function(){return b({columnName:k})},before:Object(r.createElement)(Mt.TemplatePlaceholder,{name:"tableHeaderCellBefore",params:{column:e.tableColumn.column}})}),Object(r.createElement)(Mt.TemplatePlaceholder,{name:"tableHeaderCellBefore",params:{column:e.tableColumn.column}}),Object(r.createElement)(o,{column:e.tableColumn.column,align:e.tableColumn.align},t?Object(r.createElement)(s,{column:e.tableColumn.column,align:e.tableColumn.align,direction:Object(At.getColumnSortingDirection)(d,k),disabled:!M,onSort:function(e){var t=e.direction,n=e.keepOther;y({columnName:k,direction:t,keepOther:n})},getMessage:f},Object(r.createElement)(u,null,C||k)):Object(r.createElement)(u,null,C||k)),n?Object(r.createElement)(l,{disabled:!A,onGroup:function(){return b({columnName:k})}}):null)})}),Object(r.createElement)(Mt.Template,{name:"tableRow",predicate:function(e){var t=e.tableRow;return Object(At.isHeadingTableRow)(t)}},function(e){return Object(r.createElement)(i,e)}))}}]),t}(r.PureComponent);Hn.ROW_TYPE=At.TABLE_HEADING_TYPE,Hn.defaultProps={showSortingControls:!1,showGroupingControls:!1,messages:null},Hn.components={cellComponent:"Cell",rowComponent:"Row",contentComponent:"Content",sortLabelComponent:"SortLabel",titleComponent:"Title",groupButtonComponent:"GroupButton"};var Wn=function(e){return Object(r.createElement)(Mt.TemplatePlaceholder,{params:e})},qn=function(e){function t(){return Ot(this,t),zt(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Dt(t,e),Pt(t,[{key:"render",value:function(){var e=this.props,t=e.cellComponent,n=e.rowComponent,a=e.bandedHeaderCellComponent,i=e.invisibleCellComponent,o=e.columnBands;return Object(r.createElement)(Mt.Plugin,{name:"TableBandHeader",dependencies:[{name:"Table"},{name:"TableHeaderRow"},{name:"TableSelection",optional:!0},{name:"TableEditColumn",optional:!0}]},Object(r.createElement)(Mt.Getter,{name:"tableHeaderRows",computed:function(e){var t=e.tableHeaderRows,n=e.tableColumns;return Object(At.tableRowsWithBands)(t,o,n)}}),Object(r.createElement)(Mt.Template,{name:"tableCell",predicate:function(e){var t=e.tableRow;return Object(At.isBandedOrHeaderRow)(t)}},function(e){return Object(r.createElement)(Mt.TemplateConnector,null,function(n){var a=n.tableColumns,s=n.tableHeaderRows,l=Object(At.getBandComponent)(e,s,a,o);switch(l.type){case At.BAND_DUPLICATE_RENDER:return Object(r.createElement)(Mt.TemplatePlaceholder,null);case At.BAND_EMPTY_CELL:return Object(r.createElement)(i,null);case At.BAND_GROUP_CELL:var u=l.payload,c=u.value,f=It(u,["value"]);return Object(r.createElement)(t,Lt({},e,f),c);case At.BAND_HEADER_CELL:return Object(r.createElement)(Mt.TemplatePlaceholder,{name:"tableCell",params:Lt({},e,l.payload)});default:return null}})}),Object(r.createElement)(Mt.Template,{name:"tableCell",predicate:function(e){var t=e.tableRow,n=e.tableColumn;return Object(At.isHeadingTableCell)(t,n)}},function(e){return Object(r.createElement)(a,Lt({component:Wn},e))}),Object(r.createElement)(Mt.Template,{name:"tableRow",predicate:function(e){var t=e.tableRow;return Object(At.isBandedTableRow)(t)}},function(e){return Object(r.createElement)(n,e)}))}}]),t}(r.PureComponent);qn.ROW_TYPE=At.TABLE_BAND_TYPE,qn.components={cellComponent:"Cell",rowComponent:"Row",bandedHeaderCellComponent:"BandedHeaderCell",invisibleCellComponent:"InvisibleCell"};var Yn=[{name:"FilteringState"},{name:"Table"},{name:"DataTypeProvider",optional:!0}],Xn={filterPlaceholder:"Filter...",contains:"Contains",notContains:"Does not contain",startsWith:"Starts with",endsWith:"Ends with",equal:"Equals",notEqual:"Does not equal",greaterThan:"Greater than",greaterThanOrEqual:"Greater than or equal to",lessThan:"Less than",lessThanOrEqual:"Less than or equal to"},Zn=function(e){function t(e){Ot(this,t);var n=zt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={filterOperations:{}},n}return Dt(t,e),Pt(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.rowHeight,a=t.showFilterSelector,i=t.cellComponent,o=t.rowComponent,s=t.filterSelectorComponent,l=t.iconComponent,u=t.toggleButtonComponent,c=t.editorComponent,f=t.messages,d=Object(St.getMessagesFormatter)(Lt({},Xn,f));return Object(r.createElement)(Mt.Plugin,{name:"TableFilterRow",dependencies:Yn},Object(r.createElement)(Mt.Getter,{name:"tableHeaderRows",computed:function(e){var t=e.tableHeaderRows;return Object(At.tableHeaderRowsWithFilter)(t,n)}}),Object(r.createElement)(Mt.Template,{name:"tableCell",predicate:function(e){var t=e.tableRow,n=e.tableColumn;return Object(At.isFilterTableCell)(t,n)}},function(t){return Object(r.createElement)(Mt.TemplateConnector,null,function(n,o){var f=n.filters,p=n.isColumnFilteringEnabled,h=n.getAvailableFilterOperations,m=o.changeColumnFilter,v=e.state.filterOperations,g=t.tableColumn.column.name,y=Object(At.getColumnFilterConfig)(f,g),b=function(e){return m({columnName:g,config:e})},x=Object(At.getColumnFilterOperations)(h,g),_=Object(At.getSelectedFilterOperation)(v,g,y,x),w=function(t){e.setState({filterOperations:Lt({},v,Rt({},g,t))}),y&&!Object(At.isFilterValueEmpty)(y.value)&&b({value:y.value,operation:t})},T=function(e){return b(Object(At.isFilterValueEmpty)(e)?null:{value:e,operation:_})},k=p(g);return Object(r.createElement)(Mt.TemplatePlaceholder,{name:"valueEditor",params:{column:t.tableColumn.column,value:y?y.value:void 0,onValueChange:T}},function(e){return Object(r.createElement)(i,Lt({},t,{getMessage:d,column:t.tableColumn.column,filter:y,filteringEnabled:k,onFilter:b}),a?Object(r.createElement)(s,{toggleButtonComponent:u,iconComponent:l,value:_,availableValues:x,onChange:w,disabled:!k,getMessage:d}):null,e||Object(r.createElement)(c,{value:y?y.value:void 0,disabled:!k,getMessage:d,onChange:T}))})})}),Object(r.createElement)(Mt.Template,{name:"tableRow",predicate:function(e){var t=e.tableRow;return Object(At.isFilterTableRow)(t)}},function(e){return Object(r.createElement)(o,e)}))}}]),t}(r.PureComponent);Zn.ROW_TYPE=At.TABLE_FILTER_TYPE,Zn.defaultProps={rowHeight:void 0,showFilterSelector:!1,messages:{}},Zn.components={rowComponent:"Row",cellComponent:"Cell",filterSelectorComponent:"FilterSelector",iconComponent:"Icon",editorComponent:"Editor",toggleButtonComponent:"ToggleButton"};var $n=[{name:"EditingState"},{name:"Table"},{name:"DataTypeProvider",optional:!0}],Kn=function(e){function t(){return Ot(this,t),zt(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Dt(t,e),Pt(t,[{key:"render",value:function(){var e=this.props,t=e.cellComponent,n=e.rowComponent,a=e.rowHeight;return Object(r.createElement)(Mt.Plugin,{name:"TableEditRow",dependencies:$n},Object(r.createElement)(Mt.Getter,{name:"tableBodyRows",computed:function(e){var t=e.tableBodyRows,n=e.editingRowIds,r=e.addedRows;return Object(At.tableRowsWithEditing)(t,n,r,a)}}),Object(r.createElement)(Mt.Template,{name:"tableCell",predicate:function(e){var t=e.tableRow,n=e.tableColumn;return Object(At.isEditTableCell)(t,n)}},function(e){return Object(r.createElement)(Mt.TemplateConnector,null,function(n,a){var i=n.getCellValue,o=n.createRowChange,s=n.rowChanges,l=n.isColumnEditingEnabled,u=a.changeAddedRow,c=a.changeRow,f=e.tableRow,d=f.rowId,p=f.row,h=e.tableColumn.column,m=h.name,v=Object(At.isAddedTableRow)(e.tableRow),g=v?p:Lt({},p,Object(At.getRowChange)(s,d)),y=i(g,m),b=function(e){var t={rowId:d,change:o(g,e,m)};v?u(t):c(t)};return Object(r.createElement)(Mt.TemplatePlaceholder,{name:"valueEditor",params:{column:h,row:p,value:y,onValueChange:b}},function(n){return Object(r.createElement)(t,Lt({},e,{row:p,column:h,value:y,editingEnabled:l(m),onValueChange:b}),n)})})}),Object(r.createElement)(Mt.Template,{name:"tableRow",predicate:function(e){var t=e.tableRow;return Object(At.isEditTableRow)(t)||Object(At.isAddedTableRow)(t)}},function(e){return Object(r.createElement)(n,Lt({},e,{row:e.tableRow.row}))}))}}]),t}(r.PureComponent);Kn.ADDED_ROW_TYPE=At.TABLE_ADDED_TYPE,Kn.EDIT_ROW_TYPE=At.TABLE_EDIT_TYPE,Kn.defaultProps={rowHeight:void 0},Kn.components={rowComponent:"Row",cellComponent:"Cell"};var Jn=[{name:"EditingState"},{name:"Table"}],Qn={addCommand:"New",editCommand:"Edit",deleteCommand:"Delete",commitCommand:"Save",cancelCommand:"Cancel"},er=function(e){function t(){return Ot(this,t),zt(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Dt(t,e),Pt(t,[{key:"render",value:function(){var e=this.props,t=e.cellComponent,n=e.headerCellComponent,a=e.commandComponent,i=e.showAddCommand,o=e.showEditCommand,s=e.showDeleteCommand,l=e.width,u=e.messages,c=Object(St.getMessagesFormatter)(Lt({},Qn,u));return Object(r.createElement)(Mt.Plugin,{name:"TableEditColumn",dependencies:Jn},Object(r.createElement)(Mt.Getter,{name:"tableColumns",computed:function(e){var t=e.tableColumns;return Object(At.tableColumnsWithEditing)(t,l)}}),Object(r.createElement)(Mt.Template,{name:"tableCell",predicate:function(e){var t=e.tableRow,n=e.tableColumn;return Object(At.isHeadingEditCommandsTableCell)(t,n)}},function(e){return Object(r.createElement)(Mt.TemplateConnector,null,function(t,o){return Object(r.createElement)(n,e,i&&Object(r.createElement)(a,{id:"add",text:c("addCommand"),onExecute:function(){return o.addRow()}}))})}),Object(r.createElement)(Mt.Template,{name:"tableCell",predicate:function(e){var t=e.tableRow,n=e.tableColumn;return Object(At.isEditCommandsTableCell)(t,n)}},function(e){return Object(r.createElement)(Mt.TemplateConnector,null,function(n,i){var l=Object(At.isEditTableRow)(e.tableRow),u=Object(At.isAddedTableRow)(e.tableRow),f=l||u,d=[e.tableRow.rowId];return Object(r.createElement)(t,Lt({},e,{row:e.tableRow.row}),o&&!f&&Object(r.createElement)(a,{id:"edit",text:c("editCommand"),onExecute:function(){return i.startEditRows({rowIds:d})}}),s&&!f&&Object(r.createElement)(a,{id:"delete",text:c("deleteCommand"),onExecute:function(){i.deleteRows({rowIds:d}),i.commitDeletedRows({rowIds:d})}}),f&&Object(r.createElement)(a,{id:"commit",text:c("commitCommand"),onExecute:function(){u?i.commitAddedRows({rowIds:d}):(i.stopEditRows({rowIds:d}),i.commitChangedRows({rowIds:d}))}}),f&&Object(r.createElement)(a,{id:"cancel",text:c("cancelCommand"),onExecute:function(){u?i.cancelAddedRows({rowIds:d}):(i.stopEditRows({rowIds:d}),i.cancelChangedRows({rowIds:d}))}}))})}))}}]),t}(r.PureComponent);er.COLUMN_TYPE=At.TABLE_EDIT_COMMAND_TYPE,er.defaultProps={showAddCommand:!1,showEditCommand:!1,showDeleteCommand:!1,width:140,messages:{}},er.components={cellComponent:"Cell",headerCellComponent:"HeaderCell",commandComponent:"Command"};var tr=[{name:"Table"}],nr=function(e){function t(e){Ot(this,t);var n=zt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.state={columnWidths:e.columnWidths||e.defaultColumnWidths,draftColumnWidths:[]};var r=Object(Mt.createStateHelper)(n,{columnWidths:function(){return n.props.onColumnWidthsChange}});return n.tableColumnsComputed=Object(St.memoize)(function(e){return function(t){var n=t.tableColumns;return Object(At.tableColumnsWithWidths)(n,e)}}),n.tableColumnsDraftComputed=Object(St.memoize)(function(e){return function(t){var n=t.tableColumns;return Object(At.tableColumnsWithDraftWidths)(n,e)}}),n.changeTableColumnWidth=r.applyReducer.bind(r,function(e,t){var r=n.props.minColumnWidth;return Object(At.changeTableColumnWidth)(e,Lt({},t,{minColumnWidth:r}))}),n.draftTableColumnWidth=r.applyReducer.bind(r,function(e,t){var r=n.props.minColumnWidth;return Object(At.draftTableColumnWidth)(e,Lt({},t,{minColumnWidth:r}))}),n.cancelTableColumnWidthDraft=r.applyReducer.bind(r,At.cancelTableColumnWidthDraft),n}return Dt(t,e),Pt(t,[{key:"render",value:function(){var e=this.state,t=e.columnWidths,n=e.draftColumnWidths,a=this.tableColumnsComputed(t),i=this.tableColumnsDraftComputed(n);return Object(r.createElement)(Mt.Plugin,{name:"TableColumnResizing",dependencies:tr},Object(r.createElement)(Mt.Getter,{name:"tableColumnResizingEnabled",value:!0}),Object(r.createElement)(Mt.Getter,{name:"tableColumns",computed:a}),Object(r.createElement)(Mt.Getter,{name:"tableColumns",computed:i}),Object(r.createElement)(Mt.Action,{name:"changeTableColumnWidth",action:this.changeTableColumnWidth}),Object(r.createElement)(Mt.Action,{name:"draftTableColumnWidth",action:this.draftTableColumnWidth}),Object(r.createElement)(Mt.Action,{name:"cancelTableColumnWidthDraft",action:this.cancelTableColumnWidthDraft}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.columnWidths;return{columnWidths:void 0===n?t.columnWidths:n}}}]),t}(r.PureComponent);nr.defaultProps={defaultColumnWidths:[],columnWidths:void 0,onColumnWidthsChange:void 0};var rr=[{name:"PagingState"}],ar={showAll:"All",info:function(e){var t=e.from,n=e.to,r=e.count;return t+(t<n?"-"+n:"")+" of "+r}},ir=function(e){function t(){return Ot(this,t),zt(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Dt(t,e),Pt(t,[{key:"render",value:function(){var e=this.props,t=e.containerComponent,n=e.pageSizes,a=e.messages,i=Object(St.getMessagesFormatter)(Lt({},ar,a));return Object(r.createElement)(Mt.Plugin,{name:"PagingPanel",dependencies:rr},Object(r.createElement)(Mt.Template,{name:"footer"},Object(r.createElement)(Mt.TemplatePlaceholder,null),Object(r.createElement)(Mt.TemplateConnector,null,function(e,a){var o=e.currentPage,s=e.pageSize,l=e.totalCount,u=a.setCurrentPage,c=a.setPageSize;return Object(r.createElement)(t,{currentPage:o,pageSize:s,totalCount:l,totalPages:Object(At.pageCount)(l,s),pageSizes:n,getMessage:i,onCurrentPageChange:u,onPageSizeChange:c})})))}}]),t}(r.PureComponent);ir.defaultProps={pageSizes:[],messages:{}},ir.components={containerComponent:"Container"};var or=function(e){function t(e){Ot(this,t);var n=zt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={dragging:!1},n}return Dt(t,e),Pt(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.item,a=t.itemComponent,i=t.draggingEnabled,o=t.onDragStart,s=t.onDragEnd,l=this.state.dragging,u=Object(r.createElement)(a,{item:Lt({},n,{draft:l||n.draft})});return i?Object(r.createElement)(Mt.DragSource,{payload:[{type:"column",columnName:n.column.name}],onStart:function(){e.setState({dragging:!0}),o()},onEnd:function(){e.setState({dragging:!1}),s()}},u):u}}]),t}(r.PureComponent);or.defaultProps={draggingEnabled:!1,onDragStart:function(){},onDragEnd:function(){}};var sr=function(e){function t(e){Ot(this,t);var n=zt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={sourceColumnName:null,targetItemIndex:-1},n.handleDragEvent=function(e,t){var r=t.payload,a=It(t,["payload"]);(0,n.props.isColumnGroupingEnabled)(r[0].columnName)&&e(Lt({payload:r},a))},n.onEnter=function(e){var t=e.payload;n.setState({sourceColumnName:t[0].columnName})},n.onOver=function(e){var t=e.clientOffset,r=n.props,a=r.onGroupDraft,o=r.items,s=n.state,l=s.sourceColumnName,u=s.targetItemIndex,c=n.itemRefs.map(function(e){return Object(i.findDOMNode)(e).getBoundingClientRect()}),f=o.findIndex(function(e){return e.column.name===l}),d=Object(At.getGroupCellTargetIndex)(c,f,t);u!==d&&(a({columnName:l,groupIndex:d}),n.setState({targetItemIndex:d}))},n.onLeave=function(){var e=n.props.onGroupDraft,t=n.state.sourceColumnName;n.draggingColumnName?(e({columnName:t,groupIndex:-1}),n.setState({targetItemIndex:-1})):n.resetState()},n.onDrop=function(){var e=n.props.onGroup,t=n.state,r=t.sourceColumnName,a=t.targetItemIndex;n.resetState(),e({columnName:r,groupIndex:a})},n.onDragStart=function(e){n.draggingColumnName=e},n.onDragEnd=function(){n.draggingColumnName=null;var e=n.state,t=e.sourceColumnName,r=e.targetItemIndex,a=n.props.onGroup;t&&-1===r&&a({columnName:t}),n.resetState()},n}return Dt(t,e),Pt(t,[{key:"resetState",value:function(){(0,this.props.onGroupDraftCancel)(),this.setState({sourceColumnName:null,targetItemIndex:-1})}},{key:"render",value:function(){var e=this,t=this.props,n=t.items,a=t.emptyMessageComponent,i=t.containerComponent,o=t.itemComponent,s=t.draggingEnabled,l=t.isColumnGroupingEnabled;this.itemRefs=[];var u=n.length?Object(r.createElement)(i,null,n.map(function(t){var n=t.column.name;return Object(r.createElement)(or,{key:n,ref:function(t){return t&&e.itemRefs.push(t)},item:t,itemComponent:o,draggingEnabled:s&&l(n),onDragStart:function(){return e.onDragStart(n)},onDragEnd:e.onDragEnd})})):Object(r.createElement)(a,null);return s?Object(r.createElement)(Mt.DropTarget,{onEnter:function(t){return e.handleDragEvent(e.onEnter,t)},onOver:function(t){return e.handleDragEvent(e.onOver,t)},onLeave:function(t){return e.handleDragEvent(e.onLeave,t)},onDrop:function(t){return e.handleDragEvent(e.onDrop,t)}},u):u}}]),t}(r.PureComponent);sr.defaultProps={onGroup:function(){},draggingEnabled:!1,isColumnGroupingEnabled:function(){},onGroupDraft:function(){},onGroupDraftCancel:function(){}};var lr={groupByColumn:"Drag a column header here to group by that column"},ur=function(e){function t(){return Ot(this,t),zt(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Dt(t,e),Pt(t,[{key:"render",value:function(){var e=this.props,t=e.layoutComponent,n=e.containerComponent,a=e.itemComponent,i=e.emptyMessageComponent,o=e.showSortingControls,s=e.showGroupingControls,l=e.messages,u=Object(St.getMessagesFormatter)(Lt({},lr,l)),c=function(){return Object(r.createElement)(i,{getMessage:u})},f=function(e){var t=e.item,n=t.column.name;return Object(r.createElement)(Mt.TemplateConnector,null,function(e,i){var l=e.sorting,u=e.isColumnSortingEnabled,c=e.isColumnGroupingEnabled,f=i.changeColumnGrouping,d=i.changeColumnSorting,p=u&&u(n),h=c&&c(n);return Object(r.createElement)(a,{item:t,sortingEnabled:p,groupingEnabled:h,showSortingControls:o,sortingDirection:o?Object(At.getColumnSortingDirection)(l,n):void 0,showGroupingControls:s,onGroup:function(){return f({columnName:n})},onSort:function(e){var t=e.direction,r=e.keepOther;return d({columnName:n,direction:t,keepOther:r})}})})};return Object(r.createElement)(Mt.Plugin,{name:"GroupingPanel",dependencies:[{name:"GroupingState"},{name:"Toolbar"},{name:"SortingState",optional:!o}]},Object(r.createElement)(Mt.Template,{name:"toolbarContent"},Object(r.createElement)(Mt.TemplateConnector,null,function(e,a){var i=e.columns,o=e.grouping,s=e.draftGrouping,l=e.draggingEnabled,u=e.isColumnGroupingEnabled,d=a.changeColumnGrouping,p=a.draftColumnGrouping,h=a.cancelColumnGroupingDraft;return Object(r.createElement)(t,{items:Object(At.groupingPanelItems)(i,o,s),isColumnGroupingEnabled:u,draggingEnabled:l,onGroup:d,onGroupDraft:p,onGroupDraftCancel:h,itemComponent:f,emptyMessageComponent:c,containerComponent:n})}),Object(r.createElement)(Mt.TemplatePlaceholder,null)))}}]),t}(r.PureComponent);ur.defaultProps={showSortingControls:!1,showGroupingControls:!1,messages:{}},ur.components={layoutComponent:"Layout",containerComponent:"Container",itemComponent:"Item",emptyMessageComponent:"EmptyMessage"};var cr=Object(Mt.withComponents)({Layout:sr})(ur),fr=function(e){function t(){return Ot(this,t),zt(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Dt(t,e),Pt(t,[{key:"render",value:function(){var e=this.props,t=e.for,n=e.formatterComponent,a=e.editorComponent,i=e.availableFilterOperations;return Object(r.createElement)(Mt.Plugin,{name:"DataTypeProvider"},Object(r.createElement)(Mt.Getter,{name:"getAvailableFilterOperations",computed:function(e){var n=e.getAvailableFilterOperations;return Object(At.getAvailableFilterOperationsGetter)(n,i,t)}}),n?Object(r.createElement)(Mt.Template,{name:"valueFormatter",predicate:function(e){var n=e.column;return t.includes(n.name)}},function(e){return Object(r.createElement)(n,e)}):null,a?Object(r.createElement)(Mt.Template,{name:"valueEditor",predicate:function(e){var n=e.column;return t.includes(n.name)}},function(e){return Object(r.createElement)(a,e)}):null)}}]),t}(r.PureComponent);fr.defaultProps={formatterComponent:void 0,editorComponent:void 0,availableFilterOperations:void 0};var dr=[{name:"Table"}],pr={noColumns:"Nothing to show"},hr=function(e){var t=e.tableColumns,n=e.hiddenColumnNames;return Object(At.visibleTableColumns)(t,n)},mr=function(e){function t(e){Ot(this,t);var n=zt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.state={hiddenColumnNames:e.hiddenColumnNames||e.defaultHiddenColumnNames};var r=Object(Mt.createStateHelper)(n,{hiddenColumnNames:function(){return n.props.onHiddenColumnNamesChange}});return n.toggleColumnVisibility=r.applyFieldReducer.bind(r,"hiddenColumnNames",At.toggleColumn),n}return Dt(t,e),Pt(t,[{key:"render",value:function(){var e=this.props,t=e.emptyMessageComponent,n=e.messages,a=Object(St.getMessagesFormatter)(Lt({},pr,n)),i=this.state.hiddenColumnNames,o=this.props,s=o.columnExtensions,l=o.columnTogglingEnabled;return Object(r.createElement)(Mt.Plugin,{name:"TableColumnVisibility",dependencies:dr},Object(r.createElement)(Mt.Getter,{name:"hiddenColumnNames",value:i}),Object(r.createElement)(Mt.Getter,{name:"tableColumns",computed:hr}),Object(r.createElement)(Mt.Getter,{name:"isColumnTogglingEnabled",value:function(e,t){return Object(At.getColumnExtensionValueGetter)(e,"togglingEnabled",t)}(s,l)}),Object(r.createElement)(Mt.Action,{name:"toggleColumnVisibility",action:this.toggleColumnVisibility}),Object(r.createElement)(Mt.Template,{name:"table"},function(e){return Object(r.createElement)(Mt.TemplateConnector,null,function(n){var i=n.tableColumns;return Object(At.tableDataColumnsExist)(i)?Object(r.createElement)(Mt.TemplatePlaceholder,null):Object(r.createElement)(t,Lt({getMessage:a},e))})}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.hiddenColumnNames;return{hiddenColumnNames:void 0===n?t.hiddenColumnNames:n}}}]),t}(r.PureComponent);mr.defaultProps={hiddenColumnNames:void 0,defaultHiddenColumnNames:[],onHiddenColumnNamesChange:void 0,messages:{},columnExtensions:void 0,columnTogglingEnabled:!0},mr.components={emptyMessageComponent:"EmptyMessage"};var vr=function(e){function t(){return Ot(this,t),zt(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Dt(t,e),Pt(t,[{key:"render",value:function(){var e=this.props,t=e.rootComponent,n=e.flexibleSpaceComponent;return Object(r.createElement)(Mt.Plugin,{name:"Toolbar"},Object(r.createElement)(Mt.Template,{name:"header"},Object(r.createElement)(t,null,Object(r.createElement)(Mt.TemplatePlaceholder,{name:"toolbarContent"})),Object(r.createElement)(Mt.TemplatePlaceholder,null)),Object(r.createElement)(Mt.Template,{name:"toolbarContent"},Object(r.createElement)(n,null)))}}]),t}(r.PureComponent);vr.components={rootComponent:"Root",flexibleSpaceComponent:"FlexibleSpace"},(function(e){function t(e){Ot(this,t);var n=zt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.state={expandedRowIds:e.expandedRowIds||e.defaultExpandedRowIds};var r=Object(Mt.createStateHelper)(n,{expandedRowIds:function(){return n.props.onExpandedRowIdsChange}});return n.toggleRowExpanded=r.applyFieldReducer.bind(r,"expandedRowIds",At.toggleRowExpanded),n}return Dt(t,e),Pt(t,[{key:"render",value:function(){var e=this.state.expandedRowIds;return Object(r.createElement)(Mt.Plugin,{name:"TreeDataState"},Object(r.createElement)(Mt.Getter,{name:"expandedRowIds",value:e})," ",Object(r.createElement)(Mt.Action,{name:"toggleRowExpanded",action:this.toggleRowExpanded}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.expandedRowIds;return{expandedRowIds:void 0===n?t.expandedRowIds:n}}}]),t}(r.PureComponent)).defaultProps={expandedRowIds:void 0,defaultExpandedRowIds:[],onExpandedRowIdsChange:void 0};var gr=[{name:"TreeDataState"}],yr=function(e){var t=e.rows,n=e.getRowId,r=e.expandedRowIds;return Object(At.expandedTreeRows)(t,n,r)},br=function(e){var t=e.getRowId,n=e.rows;return Object(At.customTreeRowIdGetter)(t,n)},xr=function(e){var t=e.getRowLevelKey,n=e.rows;return Object(At.customTreeRowLevelKeyGetter)(t,n)},_r=function(e){var t=e.rows;return Object(At.isTreeRowLeafGetter)(t)},wr=function(e){var t=e.rows;return Object(At.getTreeRowLevelGetter)(t)},Tr=function(e){var t=e.rows,n=e.getCollapsedRows;return Object(At.collapsedTreeRowsGetter)(n,t)},kr=function(e){var t=e.rows;return Object(At.unwrappedCustomTreeRows)(t)},Cr=(function(e){function t(){return Ot(this,t),zt(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}Dt(t,e),Pt(t,[{key:"render",value:function(){var e=this.props.getChildRows;return Object(r.createElement)(Mt.Plugin,{name:"CustomTreeData",dependencies:gr},Object(r.createElement)(Mt.Getter,{name:"rows",computed:function(t){var n=t.rows;return Object(At.customTreeRowsWithMeta)(n,e)}}),Object(r.createElement)(Mt.Getter,{name:"getRowId",computed:br}),Object(r.createElement)(Mt.Getter,{name:"getRowLevelKey",computed:xr}),Object(r.createElement)(Mt.Getter,{name:"isTreeRowLeaf",computed:_r}),Object(r.createElement)(Mt.Getter,{name:"getTreeRowLevel",computed:wr}),Object(r.createElement)(Mt.Getter,{name:"rows",computed:yr}),Object(r.createElement)(Mt.Getter,{name:"getCollapsedRows",computed:Tr}),Object(r.createElement)(Mt.Getter,{name:"rows",computed:kr}))}}])}(r.PureComponent),function(e){function t(){return Ot(this,t),zt(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Dt(t,e),Pt(t,[{key:"render",value:function(){var e=this.props,t=e.for,n=e.showSelectionControls,a=e.showSelectAll,i=e.indentComponent,o=e.expandButtonComponent,s=e.checkboxComponent,l=e.contentComponent,u=e.cellComponent;return Object(r.createElement)(Mt.Plugin,{name:"TableTreeColumn",dependencies:[{name:"DataTypeProvider",optional:!0},{name:"TreeDataState"},{name:"SelectionState",optional:!n},{name:"IntegratedSelection",optional:!a},{name:"Table"},{name:"TableHeaderRow",optional:!0}]},Object(r.createElement)(Mt.Getter,{name:"tableTreeColumnName",value:t}),Object(r.createElement)(Mt.Template,{name:"tableHeaderCellBefore",predicate:function(e){return e.column.name===t}},Object(r.createElement)(o,{visible:!1}),n&&a&&Object(r.createElement)(Mt.TemplateConnector,null,function(e,t){var n=e.selectAllAvailable,a=e.allSelected,i=e.someSelected,o=t.toggleSelectAll;return Object(r.createElement)(s,{disabled:!n,checked:a,indeterminate:i,onChange:o})})),Object(r.createElement)(Mt.Template,{name:"tableCell",predicate:function(e){var n=e.tableRow,r=e.tableColumn;return Object(At.isTreeTableCell)(n,r,t)}},function(e){return Object(r.createElement)(Mt.TemplateConnector,null,function(t,a){var c=t.getCollapsedRows,f=t.expandedRowIds,d=t.selection,p=t.isTreeRowLeaf,h=t.getTreeRowLevel,m=t.getCellValue,v=a.toggleRowExpanded,g=a.toggleSelection,y=e.tableRow,b=y.row,x=y.rowId,_=e.tableColumn.column.name,w=m(b,_),T=c(b);return Object(r.createElement)(Mt.TemplatePlaceholder,{name:"valueFormatter",params:{row:b,column:e.tableColumn.column,value:w}},function(t){return Object(r.createElement)(u,Lt({},e,{row:b,column:e.tableColumn.column,value:w}),Object(r.createElement)(i,{level:h(b)}),Object(r.createElement)(o,{visible:T?!!T.length:!p(b),expanded:f.indexOf(x)>-1,onToggle:function(){return v({rowId:x})}}),n&&Object(r.createElement)(s,{disabled:!1,checked:d.indexOf(x)>-1,indeterminate:!1,onChange:function(){return g({rowIds:[x]})}}),Object(r.createElement)(l,null,t||w))})})}))}}]),t}(r.PureComponent));Cr.defaultProps={showSelectionControls:!1,showSelectAll:!1},Cr.components={cellComponent:"Cell",contentComponent:"Content",indentComponent:"Indent",expandButtonComponent:"ExpandButton",checkboxComponent:"Checkbox"},(function(e){function t(e){Ot(this,t);var n=zt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.state={value:e.value||e.defaultValue};var r=Object(Mt.createStateHelper)(n,{value:function(){return n.props.onValueChange}});return n.changeValue=r.applyFieldReducer.bind(r,"value",At.changeSearchValue),n}return Dt(t,e),Pt(t,[{key:"render",value:function(){var e=this.state.value;return Object(r.createElement)(Mt.Plugin,{name:"SearchState"},Object(r.createElement)(Mt.Getter,{name:"filterExpression",computed:function(t){var n=t.filterExpression,r=t.columns;return Object(At.searchFilterExpression)(e,r,n)}}),Object(r.createElement)(Mt.Getter,{name:"searchValue",value:e}),Object(r.createElement)(Mt.Action,{name:"changeSearchValue",action:this.changeValue}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.value;return{value:void 0===n?t.value:n}}}]),t}(r.PureComponent)).defaultProps={value:void 0,defaultValue:"",onValueChange:void 0};var Er=[{name:"Toolbar"},{name:"SearchState"}],Mr={searchPlaceholder:"Search..."},Ar=function(e){function t(){return Ot(this,t),zt(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Dt(t,e),Pt(t,[{key:"render",value:function(){var e=this.props,t=e.inputComponent,n=e.messages,a=Object(St.getMessagesFormatter)(Lt({},Mr,n));return Object(r.createElement)(Mt.Plugin,{name:"SearchPanel",dependencies:Er},Object(r.createElement)(Mt.Template,{name:"toolbarContent"},Object(r.createElement)(Mt.TemplatePlaceholder,null),Object(r.createElement)(Mt.TemplateConnector,null,function(e,n){var i=e.searchValue,o=n.changeSearchValue;return Object(r.createElement)(t,{value:i,onValueChange:o,getMessage:a})})))}}]),t}(r.PureComponent);Ar.defaultProps={messages:{}},Ar.components={inputComponent:"Input"};var Sr=function(e){var t=e.tableHeaderRows;return Object(At.tableHeaderRowsWithFixed)(t)},Or=function(e){return Object(r.createElement)(Mt.TemplatePlaceholder,{params:e})},Pr=[{name:"Table"}],Rr=function(e){function t(e){Ot(this,t);var n=zt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={tableColumnDimensions:{}},n}return Dt(t,e),Pt(t,[{key:"handleListenerSizeChange",value:function(e,t){this.setState(function(n){return{tableColumnDimensions:Lt({},n.tableColumnDimensions,Rt({},e,t))}})}},{key:"render",value:function(){var e=this,t=this.props,n=t.leftColumns,a=t.rightColumns,i=t.cellComponent,o=t.listenerRowComponent,s=t.listenerCellComponent;return Object(r.createElement)(Mt.Plugin,{name:"TableFixedColumns",dependencies:Pr},Object(r.createElement)(Mt.Getter,{name:"tableHeaderRows",computed:Sr}),Object(r.createElement)(Mt.Getter,{name:"tableColumns",computed:function(e){var t=e.tableColumns;return Object(At.tableColumnsWithFixed)(t,n,a)}}),Object(r.createElement)(Mt.Template,{name:"tableCell",predicate:function(e){return!!e.tableColumn.fixed}},function(t){return Object(r.createElement)(Mt.TemplateConnector,null,function(o){var s=o.tableColumns,l=e.state.tableColumnDimensions,u=Object(At.calculateFixedColumnProps)(t,{leftColumns:n,rightColumns:a},s,l);return Object(r.createElement)(i,Lt({},t,u,{component:Or}))})}),Object(r.createElement)(Mt.Template,{name:"tableRow",predicate:function(e){var t=e.tableRow;return Object(At.isFixedTableRow)(t)}},function(e){return Object(r.createElement)(o,e)}),Object(r.createElement)(Mt.Template,{name:"tableCell",predicate:function(e){var t=e.tableRow;return Object(At.isFixedTableRow)(t)}},function(t){return Object(r.createElement)(s,Lt({},t,{listen:!!t.tableColumn.fixed,onSizeChange:function(n){var r=n.width;return e.handleListenerSizeChange(t.tableColumn.key,r)}}))}))}}]),t}(r.PureComponent);Rr.defaultProps={leftColumns:[],rightColumns:[]},Rr.components={cellComponent:"Cell",listenerRowComponent:"ListenerRow",listenerCellComponent:"ListenerCell"},(function(e){function t(){return Ot(this,t),zt(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Dt(t,e),Pt(t,[{key:"render",value:function(){var e=this.props,t=e.totalItems,n=e.groupItems,a=e.treeItems;return Object(r.createElement)(Mt.Plugin,{name:"SummaryState"},Object(r.createElement)(Mt.Getter,{name:"totalSummaryItems",value:t}),Object(r.createElement)(Mt.Getter,{name:"groupSummaryItems",value:n}),Object(r.createElement)(Mt.Getter,{name:"treeSummaryItems",value:a}))}}]),t}(r.PureComponent)).defaultProps={totalItems:void 0,groupItems:void 0,treeItems:void 0};var Lr=[{name:"SummaryState"}],Dr=function(e){function t(){return Ot(this,t),zt(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Dt(t,e),Pt(t,[{key:"render",value:function(){var e=this.props.calculator;return Object(r.createElement)(Mt.Plugin,{name:"IntegratedSummary",dependencies:Lr},Object(r.createElement)(Mt.Getter,{name:"totalSummaryValues",computed:function(t){var n=t.rows,r=t.totalSummaryItems,a=t.getCellValue,i=t.getRowLevelKey,o=t.isGroupRow,s=t.getCollapsedRows;return Object(At.totalSummaryValues)(n,r,a,i,o,s,e)}}),Object(r.createElement)(Mt.Getter,{name:"groupSummaryValues",computed:function(t){var n=t.rows,r=t.groupSummaryItems,a=t.getCellValue,i=t.getRowLevelKey,o=t.isGroupRow;return Object(At.groupSummaryValues)(n,r,a,i,o,e)}}),Object(r.createElement)(Mt.Getter,{name:"treeSummaryValues",computed:function(t){var n=t.rows,r=t.treeSummaryItems,a=t.getCellValue,i=t.getRowLevelKey,o=t.isGroupRow,s=t.getRowId;return Object(At.treeSummaryValues)(n,r,a,i,o,s,e)}}))}}]),t}(r.PureComponent);Dr.defaultCalculator=At.defaultSummaryCalculator,Dr.defaultProps={calculator:void 0};var Ir=[{name:"SummaryState"}];((function(e){function t(){return Ot(this,t),zt(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Dt(t,e),Pt(t,[{key:"render",value:function(){var e=this.props,t=e.totalValues,n=e.groupValues,a=e.treeValues;return Object(r.createElement)(Mt.Plugin,{name:"CustomSummary",dependencies:Ir},Object(r.createElement)(Mt.Getter,{name:"totalSummaryValues",value:t}),Object(r.createElement)(Mt.Getter,{name:"groupSummaryValues",value:n}),Object(r.createElement)(Mt.Getter,{name:"treeSummaryValues",value:a}))}}]),t})(r.PureComponent)).defaultProps={totalValues:void 0,groupValues:void 0,treeValues:void 0};var zr=[{name:"DataTypeProvider",optional:!0},{name:"SummaryState"},{name:"CustomSummary",optional:!0},{name:"IntegratedSummary",optional:!0},{name:"Table"},{name:"TableTreeColumn",optional:!0}],jr={sum:"Sum",min:"Min",max:"Max",avg:"Avg",count:"Count"},Nr=function(e){var t=e.tableBodyRows,n=e.getRowLevelKey,r=e.isGroupRow,a=e.getRowId;return Object(At.tableRowsWithSummaries)(t,n,r,a)},Fr=function(e){var t=e.tableFooterRows;return Object(At.tableRowsWithTotalSummaries)(t)},Br=["count"],Vr=function(e){function t(){return Ot(this,t),zt(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Dt(t,e),Pt(t,[{key:"renderContent",value:function(e,t){var n=this.props,a=n.formatlessSummaryTypes,i=n.itemComponent,o=n.messages,s=Object(St.getMessagesFormatter)(Lt({},jr,o));return Object(r.createElement)(r.Fragment,null,t.map(function(t){return null===t.value||a.includes(t.type)||Br.includes(t.type)?Object(r.createElement)(i,{key:t.type},s(t.type),":",String(t.value)):Object(r.createElement)(Mt.TemplatePlaceholder,{key:t.type,name:"valueFormatter",params:{column:e,value:t.value}},function(e){return Object(r.createElement)(i,null,s(t.type),":",e||String(t.value))})}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.totalRowComponent,a=t.groupRowComponent,i=t.treeRowComponent,o=t.totalCellComponent,s=t.groupCellComponent,l=t.treeCellComponent,u=t.treeColumnCellComponent,c=t.treeColumnContentComponent,f=t.treeColumnIndentComponent;return Object(r.createElement)(Mt.Plugin,{name:"TableSummaryRow",dependencies:zr},Object(r.createElement)(Mt.Getter,{name:"tableBodyRows",computed:Nr}),Object(r.createElement)(Mt.Getter,{name:"tableFooterRows",computed:Fr}),Object(r.createElement)(Mt.Template,{name:"tableCell",predicate:function(e){var t=e.tableRow,n=e.tableColumn;return Object(At.isTotalSummaryTableCell)(t,n)}},function(t){return Object(r.createElement)(Mt.TemplateConnector,null,function(n){var a=n.totalSummaryItems,i=n.totalSummaryValues,s=Object(At.getColumnSummaries)(a,t.tableColumn.column.name,i);return Object(r.createElement)(o,Lt({},t,{column:t.tableColumn.column}),e.renderContent(t.tableColumn.column,s))})}),Object(r.createElement)(Mt.Template,{name:"tableCell",predicate:function(e){var t=e.tableRow,n=e.tableColumn;return Object(At.isGroupSummaryTableCell)(t,n)}},function(t){return Object(r.createElement)(Mt.TemplateConnector,null,function(n){var a=n.groupSummaryItems,i=n.groupSummaryValues,o=Object(At.getColumnSummaries)(a,t.tableColumn.column.name,i[t.tableRow.row.compoundKey]);return Object(r.createElement)(s,Lt({},t,{column:t.tableColumn.column}),e.renderContent(t.tableColumn.column,o))})}),Object(r.createElement)(Mt.Template,{name:"tableCell",predicate:function(e){var t=e.tableRow,n=e.tableColumn;return Object(At.isTreeSummaryTableCell)(t,n)}},function(t){return Object(r.createElement)(Mt.TemplateConnector,null,function(n){var a=n.treeSummaryItems,i=n.treeSummaryValues,o=n.tableTreeColumnName,s=n.getRowId,d=n.getTreeRowLevel,p=Object(At.getColumnSummaries)(a,t.tableColumn.column.name,i[s(t.tableRow.row)]);return o===t.tableColumn.column.name?Object(r.createElement)(u,Lt({},t,{column:t.tableColumn.column}),Object(r.createElement)(f,{level:d(t.tableRow.row)}),Object(r.createElement)(c,null,e.renderContent(t.tableColumn.column,p))):Object(r.createElement)(l,Lt({},t,{column:t.tableColumn.column}),e.renderContent(t.tableColumn.column,p))})}),Object(r.createElement)(Mt.Template,{name:"tableRow",predicate:function(e){var t=e.tableRow;return Object(At.isTotalSummaryTableRow)(t)}},function(e){return Object(r.createElement)(n,e)}),Object(r.createElement)(Mt.Template,{name:"tableRow",predicate:function(e){var t=e.tableRow;return Object(At.isGroupSummaryTableRow)(t)}},function(e){return Object(r.createElement)(a,e)}),Object(r.createElement)(Mt.Template,{name:"tableRow",predicate:function(e){var t=e.tableRow;return Object(At.isTreeSummaryTableRow)(t)}},function(e){return Object(r.createElement)(i,e)}))}}]),t}(r.PureComponent);Vr.TREE_ROW_TYPE=At.TABLE_TREE_SUMMARY_TYPE,Vr.GROUP_ROW_TYPE=At.TABLE_GROUP_SUMMARY_TYPE,Vr.TOTAL_ROW_TYPE=At.TABLE_TOTAL_SUMMARY_TYPE,Vr.defaultProps={formatlessSummaryTypes:[],messages:{}},Vr.components={totalRowComponent:"TotalRow",groupRowComponent:"GroupRow",treeRowComponent:"TreeRow",totalCellComponent:"TotalCell",groupCellComponent:"GroupCell",treeCellComponent:"TreeCell",treeColumnCellComponent:"TableTreeCell",treeColumnContentComponent:"TableTreeContent",treeColumnIndentComponent:"TableTreeIndent",itemComponent:"Item"};var Ur=function(e){function t(e){Ot(this,t);var n=zt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={animationState:new Map},n.animations=new Map,n.tableNode=null,n.setRef=function(e){e&&(n.tableNode=e)},n}return Dt(t,e),Pt(t,[{key:"componentDidUpdate",value:function(e){var t=this.props.columns,n=e.columns,r=Object(i.findDOMNode)(this).scrollWidth;this.animations=Object(At.getAnimations)(n,t,r,this.animations),cancelAnimationFrame(this.raf),this.raf=requestAnimationFrame(this.processAnimationFrame.bind(this))}},{key:"getColumns",value:function(){var e=this.props.columns,t=this.state.animationState,n=e;return 0===e.filter(function(e){return void 0===e.width}).length&&(n=n.slice()).push({key:At.TABLE_FLEX_TYPE.toString(),type:At.TABLE_FLEX_TYPE}),t.size&&(n=n.map(function(e){return t.has(e.key)?Lt({},e,{animationState:t.get(e.key)}):e})),n}},{key:"processAnimationFrame",value:function(){var e=this.state.animationState;if(this.animations=Object(At.filterActiveAnimations)(this.animations),this.animations.size){var t=Object(At.evalAnimations)(this.animations);this.setState({animationState:t})}else e.size&&this.setState({animationState:new Map})}},{key:"render",value:function(){var e=this.props,t=e.layoutComponent,n=e.minColumnWidth,a=It(e,["layoutComponent","minColumnWidth"]),i=this.getColumns(),o=i.map(function(e){return e.width||(e.type===At.TABLE_FLEX_TYPE?0:n)}).reduce(function(e,t){return e+t},0);return Object(r.createElement)(t,Lt({},a,{columns:i,minWidth:o,minColumnWidth:n}))}}]),t}(r.PureComponent),Gr=function(e){function t(){return Ot(this,t),zt(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Dt(t,e),Pt(t,[{key:"render",value:function(){var e=this.props.columns;return Object(r.createElement)("colgroup",null,e.map(function(e){return Object(r.createElement)("col",{key:e.key,style:void 0!==e.width?{width:e.width+"px"}:null})}))}}]),t}(r.PureComponent),Hr=function(e){function t(e){Ot(this,t);var n=zt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={rowHeights:new Map,viewportTop:0,viewportLeft:0,width:800,height:600},n.state.headerHeight=e.headerRows.reduce(function(e,t){return e+n.getRowHeight(t)},0),n.state.bodyHeight=0,n.state.footerHeight=e.footerRows.reduce(function(e,t){return e+n.getRowHeight(t)},0),n.rowRefs=new Map,n.blockRefs=new Map,n.registerRowRef=n.registerRowRef.bind(n),n.getRowHeight=n.getRowHeight.bind(n),n.updateViewport=n.updateViewport.bind(n),n.handleContainerSizeChange=n.handleContainerSizeChange.bind(n),n}return Dt(t,e),Pt(t,[{key:"componentDidMount",value:function(){this.storeRowHeights(),this.storeBloksHeights()}},{key:"componentDidUpdate",value:function(){this.storeRowHeights(),this.storeBloksHeights()}},{key:"getRowHeight",value:function(e){var t=this.state.rowHeights,n=this.props.estimatedRowHeight,r=t.get(e.key);return void 0!==r?r:e.height?e.height:n}},{key:"storeRowHeights",value:function(){var e=this,t=Array.from(this.rowRefs.entries()).map(function(e){var t=jt(e,2),n=t[0],r=t[1];return[n,Object(i.findDOMNode)(r)]}).filter(function(e){return!!jt(e,2)[1]}).map(function(e){var t=jt(e,2);return[t[0],t[1].getBoundingClientRect().height]}).filter(function(e){return jt(e,1)[0].type!==At.TABLE_STUB_TYPE}).filter(function(t){var n=jt(t,2),r=n[0];return n[1]!==e.getRowHeight(r)});if(t.length){var n=this.state.rowHeights;t.forEach(function(e){var t=jt(e,2),r=t[0],a=t[1];return n.set(r.key,a)}),this.setState({rowHeights:n})}}},{key:"storeBloksHeights",value:function(){var e=this.blockRefs.get("header")?Object(i.findDOMNode)(this.blockRefs.get("header")).getBoundingClientRect().height:0,t=this.blockRefs.get("body")?Object(i.findDOMNode)(this.blockRefs.get("body")).getBoundingClientRect().height:0,n=this.blockRefs.get("footer")?Object(i.findDOMNode)(this.blockRefs.get("footer")).getBoundingClientRect().height:0,r=this.state,a=r.headerHeight,o=r.bodyHeight,s=r.footerHeight;a===e&&o===t&&s===n||this.setState({headerHeight:e,bodyHeight:t,footerHeight:n})}},{key:"registerRowRef",value:function(e,t){null===t?this.rowRefs.delete(e):this.rowRefs.set(e,t)}},{key:"registerBlockRef",value:function(e,t){null===t?this.blockRefs.delete(e):this.blockRefs.set(e,t)}},{key:"updateViewport",value:function(e){var t=e.target;if(t===e.currentTarget){var n=parseInt(t.scrollLeft+t.clientWidth,10),r=parseInt(t.scrollTop+t.clientHeight,10);t.scrollTop<0||t.scrollLeft<0||n>Math.max(t.scrollWidth,t.clientWidth)||r>Math.max(t.scrollHeight,t.clientHeight)||this.setState({viewportTop:t.scrollTop,viewportLeft:t.scrollLeft})}}},{key:"handleContainerSizeChange",value:function(e){var t=e.width,n=e.height;this.setState({width:t,height:n})}},{key:"renderRowsBlock",value:function(e,t,n,a,i){var o=this,s=this.props,l=s.minWidth,u=s.rowComponent,c=s.cellComponent;return Object(r.createElement)(Mt.RefHolder,{ref:function(t){return o.registerBlockRef(e,t)}},Object(r.createElement)(n,{style:Lt({minWidth:l+"px"},i?{marginBottom:i+"px"}:null)},Object(r.createElement)(Gr,{columns:t.columns}),Object(r.createElement)(a,null,t.rows.map(function(e){var t=e.row,n=e.cells,a=void 0===n?[]:n;return Object(r.createElement)(Mt.RefHolder,{key:t.key,ref:function(e){return o.registerRowRef(t,e)}},Object(r.createElement)(u,{tableRow:t,style:void 0!==t.height?{height:t.height+"px"}:void 0},a.map(function(e){var n=e.column;return Object(r.createElement)(c,{key:n.key,tableRow:t,tableColumn:n,style:n.animationState,colSpan:e.colSpan})})))}))))}},{key:"render",value:function(){var e=this.props,t=e.headerRows,n=e.bodyRows,a=e.footerRows,i=e.columns,o=e.minColumnWidth,s=e.height,l=e.containerComponent,u=e.headTableComponent,c=e.footerTableComponent,f=e.tableComponent,d=e.headComponent,p=e.bodyComponent,h=e.footerComponent,m=e.getCellColSpan,v=this.state,g=v.viewportLeft,y=v.viewportTop,b=v.headerHeight,x=v.bodyHeight,_=v.footerHeight,w=v.width,T=v.height,k=function(e){return e.type===At.TABLE_FLEX_TYPE?0:e.width||o},C=function(e,t){return m({tableRow:e,tableColumn:t,tableColumns:i})},E=Object(At.getCollapsedGrid)({rows:t,columns:i,top:0,left:g,width:w,height:b,getColumnWidth:k,getRowHeight:this.getRowHeight,getColSpan:C}),M=Object(At.getCollapsedGrid)({rows:n,columns:i,top:y,left:g,width:w,height:T-b-_,getColumnWidth:k,getRowHeight:this.getRowHeight,getColSpan:C}),A=Object(At.getCollapsedGrid)({rows:a,columns:i,top:0,left:g,width:w,height:_,getColumnWidth:k,getRowHeight:this.getRowHeight,getColSpan:C});return Object(r.createElement)(Mt.Sizer,{onSizeChange:this.handleContainerSizeChange,containerComponent:l,style:Lt({},"auto"===s?null:{height:s+"px"}),onScroll:this.updateViewport},!!t.length&&this.renderRowsBlock("header",E,u,d),this.renderRowsBlock("body",M,f,p,Math.max(0,T-b-x-_)),!!a.length&&this.renderRowsBlock("footer",A,c,h))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=t.rowHeights;return{rowHeights:[].concat(Nt(e.headerRows),Nt(e.bodyRows),Nt(e.footerRows)).reduce(function(e,t){var r=n.get(t.key);return void 0!==r&&e.set(t.key,r),e},new Map)}}}]),t}(r.PureComponent);Hr.defaultProps={headerRows:[],footerRows:[],headComponent:function(){return null},headTableComponent:function(){return null},footerComponent:function(){return null},footerTableComponent:function(){return null}};var Wr=function(e){function t(){return Ot(this,t),zt(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Dt(t,e),Pt(t,[{key:"render",value:function(){var e=this.props,t=e.row,n=e.columns,a=e.rowComponent,i=e.cellComponent,o=e.getCellColSpan;return Object(r.createElement)(a,{tableRow:t,style:function(e){var t=e.row;return void 0!==t.height?{height:t.height+"px"}:void 0}({row:t})},n.map(function(e){return Object(r.createElement)(i,{key:e.key,tableRow:t,tableColumn:e,style:function(e){return e.column.animationState}({column:e}),colSpan:function(e,t){return o({tableRow:e,tableColumn:t,tableColumns:n})}(t,e)})}))}}]),t}(r.PureComponent),qr=function(e){function t(){return Ot(this,t),zt(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Dt(t,e),Pt(t,[{key:"render",value:function(){var e=this.props,t=e.rows,n=e.columns,a=e.blockComponent,i=e.rowComponent,o=e.cellComponent,s=e.getCellColSpan;return Object(r.createElement)(a,null,t.map(function(e){return Object(r.createElement)(Wr,{key:e.key,row:e,columns:n,rowComponent:i,cellComponent:o,getCellColSpan:s})}))}}]),t}(r.PureComponent),Yr=function(e){function t(){return Ot(this,t),zt(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Dt(t,e),Pt(t,[{key:"render",value:function(){var e=this.props,t=e.headerRows,n=e.bodyRows,a=e.footerRows,i=e.columns,o=e.minWidth,s=e.containerComponent,l=e.tableComponent,u=e.headComponent,c=e.bodyComponent,f=e.footerComponent,d=e.rowComponent,p=e.cellComponent,h=e.getCellColSpan;return Object(r.createElement)(s,null,Object(r.createElement)(l,{style:{minWidth:o+"px"}},Object(r.createElement)(Gr,{columns:i}),!!t.length&&Object(r.createElement)(qr,{rows:t,columns:i,blockComponent:u,rowComponent:d,cellComponent:p,getCellColSpan:h}),Object(r.createElement)(qr,{rows:n,columns:i,blockComponent:c,rowComponent:d,cellComponent:p,getCellColSpan:h}),!!a.length&&Object(r.createElement)(qr,{rows:a,columns:i,blockComponent:f,rowComponent:d,cellComponent:p,getCellColSpan:h})))}}]),t}(r.PureComponent);Yr.defaultProps={headerRows:[],footerRows:[],headComponent:function(){return null},footerComponent:function(){return null}};var Xr=n(84),Zr=n.n(Xr),$r=n(86),Kr=n.n($r),Jr=n(128),Qr=n.n(Jr),ea=n(54),ta=n.n(ea),na=n(87),ra=n.n(na),aa=n(53),ia=n.n(aa),oa=n(70),sa=n.n(oa),la=n(88),ua=n.n(la),ca=n(72),fa=n.n(ca),da=n(129),pa=n.n(da),ha=n(32),ma=n(130),va=n.n(ma),ga=n(131),ya=n.n(ga),ba=n(132),xa=n.n(ba),_a=n(33),wa=n.n(_a),Ta=n(89),ka=n.n(Ta),Ca=n(133),Ea=n.n(Ca),Ma=n(134),Aa=n.n(Ma),Sa=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},Oa=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Pa=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},Ra=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},La=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},Da=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},Ia=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},za=function(e){var t=e.children,n=e.classes,a=e.className,i=Da(e,["children","classes","className"]);return Object(r.createElement)("div",Ra({className:Se()(n.root,a)},i),t)};za.defaultProps={className:void 0};var ja=Object(Q.withStyles)({root:{display:"flex",flexDirection:"column"}})(za),Na=function(e){var t=e.children,n=Da(e,["children"]);return Object(r.createElement)(Bt,Ra({rootComponent:ja},n),t)};Na.Root=ja;var Fa=function(e){var t=e.visible,n=e.onHide,a=e.children,i=e.target,o=Da(e,["visible","onHide","children","target"]);return Object(r.createElement)(Zr.a,Ra({open:t,anchorEl:i,onClose:n,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},o),a)};Fa.defaultProps={visible:!1,target:null};var Ba=function(e){var t=e.onToggle,n=e.getMessage,a=e.buttonRef,i=(e.active,Da(e,["onToggle","getMessage","buttonRef","active"]));return Object(r.createElement)(Kr.a,{title:n("showColumnChooser"),placement:"bottom",enterDelay:300},Object(r.createElement)(Ve.a,Ra({onClick:t,buttonRef:a},i),Object(r.createElement)(Qr.a,null)))};Ba.defaultProps={active:!1};var Va=function(e){var t=e.item,n=t.column,a=t.hidden,i=e.disabled,o=e.onToggle,s=e.classes,l=Da(e,["item","disabled","onToggle","classes"]);return Object(r.createElement)(be.a,Ra({key:n.name,button:!i,component:"li",disabled:i,onClick:i?null:o},l),Object(r.createElement)(ta.a,{checked:!a,tabIndex:-1,disableRipple:!0,disabled:i,className:s.checkbox}),Object(r.createElement)(_e.a,{primary:n.title||n.name}))};Va.defaultProps={onToggle:function(){},disabled:!1};var Ua=Object(Q.withStyles)({checkbox:{padding:0}},{name:"Item"})(Va),Ga=function(e){return function(t){return function(n){function a(){return Sa(this,a),Ia(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return La(a,n),Oa(a,[{key:"render",value:function(){return Object(r.createElement)(t,e(this.props))}}]),a}(r.PureComponent)}},Ha={showColumnChooser:"Show Column Chooser"},Wa=Ga(function(e){var t=e.messages,n=Da(e,["messages"]);return Ra({messages:Ra({},Ha,t)},n)})(Ut);Wa.propTypes={messages:Object(u.shape)({hiddenColumnNames:u.string})},Wa.defaultProps={messages:{}},Wa.components=Ut.components;Object(Mt.withComponents)({Container:function(e){var t=e.children,n=Da(e,["children"]);return Object(r.createElement)(ge.a,Ra({dense:!0},n),t)},Item:Ua,Overlay:Fa,ToggleButton:Ba})(Wa);var qa=function(e){return{container:{position:"fixed",zIndex:1e3,left:0,top:0,display:"inline-block"},column:{paddingLeft:2*e.spacing.unit,paddingRight:2*e.spacing.unit,float:"right",cursor:"move"}}},Ya=function(e){var t=e.clientOffset,n=e.classes,a=e.style,i=e.className,o=e.children,s=Da(e,["clientOffset","classes","style","className","children"]);return Object(r.createElement)("div",Ra({className:Se()(n.container,i),style:Ra({transform:"translate(calc("+t.x+"px - 50%), calc("+t.y+"px - 50%))"},a)},s),o)};Ya.defaultProps={style:null,className:void 0,children:void 0};var Xa=Object(Q.withStyles)(qa,{name:"DragDrop"})(Ya),Za=function(e){var t=e.column,n=e.classes,a=e.className,i=Da(e,["column","classes","className"]);return Object(r.createElement)(ra.a,Ra({className:Se()(n.column,a),label:t.title},i))};Za.defaultProps={className:void 0};var $a=Object(Q.withStyles)(qa,{name:"DragDrop"})(Za),Ka=Object(Mt.withComponents)({Container:Xa,Column:$a})(Tn),Ja=Object(Q.withStyles)(function(e){return{pageSizeSelector:Ra({},e.typography.caption,{paddingRight:5*e.spacing.unit}),label:{paddingRight:3*e.spacing.unit},pageSizeTitle:{width:"auto",marginRight:e.spacing.unit/2},inputRoot:{fontSize:1.75*e.spacing.unit,textAlign:"right"},selectIcon:{top:2},"@media (max-width: 768px)":{label:{display:"none"},pageSizeSelector:{paddingRight:2*e.spacing.unit}}}},{name:"PageSizeSelector"})(function(e){var t=e.pageSize,n=e.onPageSizeChange,a=e.pageSizes,i=e.getMessage,o=e.classes,s=i("showAll");return Object(r.createElement)("div",{className:o.pageSizeSelector},Object(r.createElement)("span",{className:o.label},i("rowsPerPage")),Object(r.createElement)(sa.a,{value:t,onChange:function(e){return n(e.target.value)},classes:{icon:o.selectIcon},input:Object(r.createElement)(wt.a,{disableUnderline:!0,classes:{root:o.inputRoot}})},a.map(function(e){return Object(r.createElement)(ia.a,{key:e,value:e},0!==e?e:s)})))}),Qa=function(e){var t,n=e.text,a=e.isActive,i=e.isDisabled,o=e.classes,s=e.onClick,l=Se()((Pa(t={},o.button,!0),Pa(t,o.activeButton,a),t));return Object(r.createElement)(Et.a,Ra({className:l,disabled:i,onClick:s},a?{tabIndex:-1}:null),n)};Qa.defaultProps={onClick:function(){},isDisabled:!1,isActive:!1};var ei=Object(Q.withStyles)(function(e){return{pagination:{margin:0},rowsLabel:Ra({},e.typography.caption,{paddingRight:5*e.spacing.unit}),button:{minWidth:2*e.spacing.unit},activeButton:{fontWeight:"bold",cursor:"default"},arrowButton:{display:"inline-block",transform:"rtl"===e.direction?"rotate(180deg)":null},prev:{marginRight:0},next:{marginLeft:0},"@media(max-width: 768px)":{button:{display:"none"},prev:{marginRight:e.spacing.unit},next:{marginLeft:e.spacing.unit},rowsLabel:{paddingRight:2*e.spacing.unit}}}},{name:"Pagination"})(function(e){var t=e.totalPages,n=e.totalCount,a=e.pageSize,i=e.currentPage,o=e.onCurrentPageChange,s=e.getMessage,l=e.classes,u=Object(At.firstRowOnPage)(i,a,n),c=Object(At.lastRowOnPage)(i,a,n);return Object(r.createElement)("div",{className:l.pagination},Object(r.createElement)("span",{className:l.rowsLabel},s("info",{from:u,to:c,count:n})),Object(r.createElement)(Ve.a,{className:Se()(l.arrowButton,l.prev),disabled:0===i,onClick:function(){return i>0&&o(i-1)}},Object(r.createElement)(We.a,null)),function(e,t,n,a){var i=[],o=1,s=t||1;3<t&&(o=Object(At.calculateStartPage)(e+1,3,t),s=o+3-1),o>1&&(i.push(Object(r.createElement)(Qa,{key:1,text:String(1),classes:n,onClick:function(){return a(0)}})),o>2&&i.push(Object(r.createElement)(Qa,{key:"ellipsisStart",text:"",classes:n,isDisabled:!0})));for(var l=function(t){i.push(Object(r.createElement)(Qa,{key:t,text:String(t),isActive:t===e+1,classes:n,onClick:function(){return a(t-1)},isDisabled:o===s}))},u=o;u<=s;u+=1)l(u);return s<t&&(s<t-1&&i.push(Object(r.createElement)(Qa,{key:"ellipsisEnd",text:"",classes:n,isDisabled:!0})),i.push(Object(r.createElement)(Qa,{key:t,text:String(t),classes:n,onClick:function(){return a(t-1)}}))),i}(i,t,l,o),Object(r.createElement)(Ve.a,{className:Se()(l.arrowButton,l.next),disabled:i===t-1||0===n,onClick:function(){return i<t-1&&o(i+1)}},Object(r.createElement)(Ye.a,null)))}),ti=function(e){var t=e.currentPage,n=e.pageSizes,a=e.totalPages,i=e.pageSize,o=e.classes,s=e.onCurrentPageChange,l=e.onPageSizeChange,u=e.totalCount,c=e.getMessage,f=e.className,d=Da(e,["currentPage","pageSizes","totalPages","pageSize","classes","onCurrentPageChange","onPageSizeChange","totalCount","getMessage","className"]);return Object(r.createElement)("div",Ra({className:Se()(o.pager,f)},d),!!n.length&&Object(r.createElement)(Ja,{pageSize:i,onPageSizeChange:l,pageSizes:n,getMessage:c}),Object(r.createElement)(ei,{totalPages:a,totalCount:u,currentPage:t,onCurrentPageChange:function(e){return s(e)},pageSize:i,getMessage:c}))};ti.defaultProps={className:void 0};var ni=Object(Q.withStyles)(function(e){return{pager:{overflow:"hidden",padding:1.5*e.spacing.unit,display:"flex",flex:"none",alignItems:"center",justifyContent:"flex-end"}}},{name:"Pager"})(ti),ri={rowsPerPage:"Rows per page:"},ai=Ga(function(e){var t=e.messages,n=Da(e,["messages"]);return Ra({messages:Ra({},ri,t)},n)})(ir);ai.propTypes={messages:Object(u.shape)({showAll:u.string,rowsPerPage:u.string,info:Object(u.oneOfType)([u.string,u.func])})},ai.defaultProps={messages:{}},ai.components=ir.components;var ii=Object(Mt.withComponents)({Container:ni})(ai),oi=function(e){var t=e.classes,n=e.children,a=e.className,i=Da(e,["classes","children","className"]);return Object(r.createElement)("div",Ra({className:Se()(t.panel,a)},i),n)};oi.defaultProps={children:void 0,className:void 0};var si=Object(Q.withStyles)(function(e){return{panel:{display:"flex",flexWrap:"wrap",width:"100%",marginTop:1.5*e.spacing.unit}}},{name:"GroupPanelContainer"})(oi),li=function(e){var t,n=e.item,a=n.column,i=n.draft,o=e.onGroup,s=e.showGroupingControls,l=e.showSortingControls,u=e.sortingDirection,c=e.onSort,f=e.sortingEnabled,d=e.groupingEnabled,p=e.classes,h=e.className,m=Da(e,["item","onGroup","showGroupingControls","showSortingControls","sortingDirection","onSort","sortingEnabled","groupingEnabled","classes","className"]),v=Se()((Pa(t={},p.button,!0),Pa(t,p.draftCell,i),t),h);return Object(r.createElement)(ra.a,Ra({label:function(e,t,n,a){var i=a.title||a.name;return e?Object(r.createElement)(ua.a,{active:!!n,direction:null===n?void 0:n,disabled:!t,tabIndex:-1},i):i}(l,f,u,a),className:v},s?{onDelete:d?o:null}:null,l?{onClick:f?function(e){var t=13===e.keyCode||32===e.keyCode,n=void 0===e.keyCode,r=e.metaKey||e.ctrlKey;c({direction:(n||t)&&r?null:void 0,keepOther:r})}:null}:null,m))};li.defaultProps={showSortingControls:!1,sortingEnabled:!1,sortingDirection:void 0,onSort:void 0,onGroup:void 0,showGroupingControls:!1,groupingEnabled:!1,className:void 0};var ui=Object(Q.withStyles)(function(e){return{button:{marginRight:e.spacing.unit,marginBottom:1.5*e.spacing.unit},draftCell:{opacity:.3}}},{name:"GroupPanelItem"})(li),ci=function(e){var t=e.getMessage,n=e.classes,a=e.className,i=Da(e,["getMessage","classes","className"]);return Object(r.createElement)("div",Ra({className:Se()(n.groupInfo,a)},i),t("groupByColumn"))};ci.defaultProps={className:void 0};var fi=Object(Q.withStyles)(function(e){return{groupInfo:{color:e.typography.caption.color,fontFamily:e.typography.fontFamily,fontSize:e.typography.fontSize}}},{name:"GroupPanelEmptyMessage"})(ci),di=(Object(Mt.withComponents)({Container:si,Item:ui,EmptyMessage:fi})(cr),function(e){var t=e.style,n=e.expanded,a=e.classes,i=e.onToggle,o=(e.tableColumn,e.tableRow,e.row,e.className),s=Da(e,["style","expanded","classes","onToggle","tableColumn","tableRow","row","className"]);return Object(r.createElement)(dt.a,Ra({className:Se()(a.toggleCell,o),style:t},s),Object(r.createElement)(Ve.a,{className:a.toggleCellButton,onClick:function(e){e.stopPropagation(),i()}},n?Object(r.createElement)(pa.a,null):Object(r.createElement)(fa.a,null)))});di.defaultProps={style:null,expanded:!1,onToggle:function(){},className:void 0,tableColumn:void 0,tableRow:void 0,row:void 0};var pi=Object(Q.withStyles)(function(e){return{toggleCell:{textAlign:"center",textOverflow:"initial",paddingTop:0,paddingBottom:0,paddingLeft:e.spacing.unit},toggleCellButton:{verticalAlign:"middle",display:"inline-block",padding:e.spacing.unit}}},{name:"TableDetailToggleCell"})(di),hi=function(e){var t=e.colSpan,n=e.style,a=e.children,i=e.classes,o=e.className,s=(e.tableColumn,e.tableRow,e.row,Da(e,["colSpan","style","children","classes","className","tableColumn","tableRow","row"]));return Object(r.createElement)(dt.a,Ra({style:n,colSpan:t,className:Se()(i.active,o)},s),a)};hi.defaultProps={style:null,colSpan:1,className:void 0,tableColumn:void 0,tableRow:void 0,row:void 0,children:void 0};var mi=Object(Q.withStyles)(function(e){return{active:{backgroundColor:e.palette.background.default}}},{name:"TableDetailCell"})(hi),vi=function(e){var t=e.children,n=(e.row,e.tableRow,Da(e,["children","row","tableRow"]));return Object(r.createElement)(vt.a,n,t)};vi.defaultProps={children:void 0,row:void 0,tableRow:void 0};var gi=function(e){return Object(r.createElement)(Nn,Ra({toggleColumnWidth:48},e))};gi.components=Nn.components;var yi=Object(Mt.withComponents)({Row:vi,Cell:mi,ToggleCell:pi})(gi);yi.COLUMN_TYPE=Nn.COLUMN_TYPE,yi.ROW_TYPE=Nn.ROW_TYPE;var bi=function(e){var t=e.style,n=e.colSpan,a=e.row,i=e.column,o=e.expanded,s=e.onToggle,l=e.classes,u=e.children,c=e.className,f=(e.tableRow,e.tableColumn,Da(e,["style","colSpan","row","column","expanded","onToggle","classes","children","className","tableRow","tableColumn"]));return Object(r.createElement)(dt.a,Ra({colSpan:n,style:t,className:Se()(l.cell,c),onClick:function(){return s()}},f),Object(r.createElement)(Ve.a,{className:l.groupButton},o?Object(r.createElement)(fa.a,null):Object(r.createElement)(Ye.a,null)),Object(r.createElement)("span",{className:l.columnTitle},Object(r.createElement)("strong",null,i.title||i.name,":"," "),u||a.value))};bi.defaultProps={style:null,colSpan:1,row:{},column:{},expanded:!1,onToggle:function(){},children:void 0,className:void 0,tableRow:void 0,tableColumn:void 0};var xi=Object(Q.withStyles)(function(e){return{cell:{cursor:"pointer",paddingLeft:e.spacing.unit,paddingRight:e.spacing.unit,paddingTop:e.spacing.unit/2-1},groupButton:{verticalAlign:"middle",display:"inline-block",padding:e.spacing.unit,marginRight:e.spacing.unit},columnTitle:{verticalAlign:"middle"}}},{name:"TableGroupCell"})(bi),_i=function(e){return Object(r.createElement)(Un,Ra({indentColumnWidth:48},e))};_i.components=Un.components;var wi=Object(Mt.withComponents)({Row:vi,Cell:xi})(_i);wi.COLUMN_TYPE=Un.COLUMN_TYPE,wi.ROW_TYPE=Un.ROW_TYPE;var Ti=function(e){var t,n=e.allSelected,a=e.someSelected,i=e.disabled,o=e.onToggle,s=e.classes,l=e.className,u=(e.tableRow,e.tableColumn,e.rowSpan),c=Da(e,["allSelected","someSelected","disabled","onToggle","classes","className","tableRow","tableColumn","rowSpan"]),f=Se()((Pa(t={},s.cell,!0),Pa(t,s.pointer,!i),Pa(t,s.alignWithRowSpan,u>1),t),l);return Object(r.createElement)(dt.a,Ra({padding:"checkbox",className:f,rowSpan:u},c),Object(r.createElement)(ta.a,{checked:n,className:s.checkbox,indeterminate:a,disabled:i,onClick:function(e){i||(e.stopPropagation(),o())}}))};Ti.defaultProps={allSelected:!1,someSelected:!1,disabled:!1,onToggle:function(){},className:void 0,tableRow:void 0,tableColumn:void 0,rowSpan:void 0};var ki=Object(Q.withStyles)(function(e){return{cell:{overflow:"visible",paddingRight:0,paddingLeft:e.spacing.unit,textAlign:"center"},checkbox:{padding:e.spacing.unit},alignWithRowSpan:{verticalAlign:"bottom",paddingBottom:e.spacing.unit/2},pointer:{cursor:"pointer"}}},{name:"TableSelectAllCell"})(Ti),Ci=function(e){var t=e.style,n=e.selected,a=e.onToggle,i=e.classes,o=e.className,s=(e.row,e.tableRow,e.tableColumn,Da(e,["style","selected","onToggle","classes","className","row","tableRow","tableColumn"]));return Object(r.createElement)(dt.a,Ra({padding:"checkbox",style:t,className:Se()(i.cell,o)},s),Object(r.createElement)(ta.a,{className:i.checkbox,checked:n,onClick:function(e){e.stopPropagation(),a()}}))};Ci.defaultProps={style:null,selected:!1,onToggle:function(){},row:void 0,tableRow:void 0,tableColumn:void 0,className:void 0};var Ei=Object(Q.withStyles)(function(e){return{cell:{overflow:"visible",paddingRight:0,paddingLeft:e.spacing.unit,textAlign:"center"},checkbox:{marginTop:"-1px",marginBottom:"-1px",padding:e.spacing.unit}}},{name:"TableSelectCell"})(Ci),Mi=function(e){var t=e.selected,n=e.selectByRowClick,a=e.onToggle,i=(e.row,e.tableRow,e.tableColumn,e.children),o=Da(e,["selected","selectByRowClick","onToggle","row","tableRow","tableColumn","children"]);return Object(r.createElement)(vt.a,Ra({selected:t,onClick:function(e){n&&(e.stopPropagation(),a())}},o),i)};Mi.defaultProps={children:void 0,onToggle:function(){},selected:!1,selectByRowClick:!1,row:void 0,tableColumn:void 0,tableRow:void 0};var Ai=function(e){return Object(r.createElement)(In,Ra({selectionColumnWidth:58},e))};Ai.components=In.components;var Si=Object(Mt.withComponents)({Row:Mi,Cell:Ei,HeaderCell:ki})(Ai);Si.COLUMN_TYPE=In.COLUMN_TYPE;var Oi=function(e){return"1px solid "+("light"===e.palette.type?Object(ha.lighten)(Object(ha.fade)(e.palette.divider,1),.88):Object(ha.darken)(Object(ha.fade)(e.palette.divider,1),.68))},Pi=function(e){var t,n=e.children,a=e.classes,i=e.className,o=e.use,s=Da(e,["children","classes","className","use"]);return Object(r.createElement)(lt.a,Ra({className:Se()((t={},Pa(t,a.table,!0),Pa(t,a.stickyTable,!!o),Pa(t,a.headTable,"head"===o),Pa(t,a.footTable,"foot"===o),t),i)},s),n)};Pi.defaultProps={use:void 0,className:void 0};var Ri=Object(Q.withStyles)(function(e){return{table:{tableLayout:"fixed",borderCollapse:"separate"},stickyTable:{position:"sticky",zIndex:500,overflow:"visible",background:e.palette.background.paper,fallbacks:{position:"-webkit-sticky"}},headTable:{top:0},footTable:{borderTop:Oi(e),bottom:0}}},{name:"Table"})(Pi),Li=function(e){e.column;var t,n=e.value,a=e.children,i=e.classes,o=(e.tableRow,e.tableColumn),s=(e.row,e.className),l=Da(e,["column","value","children","classes","tableRow","tableColumn","row","className"]);return Object(r.createElement)(dt.a,Ra({className:Se()((t={},Pa(t,i.cell,!0),Pa(t,i.cellRightAlign,o&&"right"===o.align),Pa(t,i.cellCenterAlign,o&&"center"===o.align),Pa(t,i.cellNoWrap,!(o&&o.wordWrapEnabled)),t),s),classes:{footer:i.footer}},l),a||n)};Li.defaultProps={value:void 0,column:void 0,row:void 0,children:void 0,tableRow:void 0,tableColumn:void 0,className:void 0};var Di=Object(Q.withStyles)(function(e){return{cell:{paddingRight:e.spacing.unit,paddingLeft:e.spacing.unit,"&:first-child":{paddingLeft:3*e.spacing.unit},overflow:"hidden",textOverflow:"ellipsis"},footer:{borderBottom:Oi(e)},cellRightAlign:{textAlign:"right"},cellCenterAlign:{textAlign:"center"},cellNoWrap:{whiteSpace:"nowrap"}}},{name:"TableCell"})(Li),Ii=function(e){var t=e.classes,n=e.className,a=(e.tableRow,e.tableColumn,Da(e,["classes","className","tableRow","tableColumn"]));return Object(r.createElement)(dt.a,Ra({className:Se()(t.cell,n),classes:{footer:t.footer}},a))};Ii.defaultProps={className:void 0,tableRow:void 0,tableColumn:void 0};var zi=Object(Q.withStyles)(function(e){return{cell:{padding:0},footer:{borderBottom:Oi(e)}}},{name:"TableStubCell"})(Ii),ji=function(e){var t=e.style,n=e.colSpan,a=e.getMessage,i=e.classes,o=e.className,s=(e.tableRow,e.tableColumn,Da(e,["style","colSpan","getMessage","classes","className","tableRow","tableColumn"]));return Object(r.createElement)(dt.a,Ra({style:t,className:Se()(i.cell,o),colSpan:n},s),Object(r.createElement)("big",null,a("noData")))};ji.defaultProps={style:null,colSpan:1,className:void 0,tableRow:void 0,tableColumn:void 0};var Ni=Object(Q.withStyles)(function(e){return{cell:{textAlign:"center",padding:5*e.spacing.unit+"px 0"}}},{name:"TableNoDataCell"})(ji),Fi=function(e){var t=e.children,n=e.classes,a=e.className,i=Da(e,["children","classes","className"]);return Object(r.createElement)("div",Ra({className:Se()(n.root,a)},i),t)};Fi.defaultProps={className:void 0};var Bi=Object(Q.withStyles)({root:{overflow:"auto",WebkitOverflowScrolling:"touch",width:"100%"}},{name:"TableContainer"})(Fi),Vi=function(e){var t=e.children,n=(e.tableRow,Da(e,["children","tableRow"]));return Object(r.createElement)(vt.a,n,t)};Vi.defaultProps={children:void 0,tableRow:void 0};var Ui=Object(Mt.withComponents)({Table:Ri,TableHead:ht.a,TableBody:ct.a,TableFooter:va.a,Container:Bi,Layout:function(e){return Object(r.createElement)(Ur,Ra({layoutComponent:Yr,minColumnWidth:120},e))},Row:vi,Cell:Di,NoDataRow:vi,NoDataCell:Ni,StubRow:Vi,StubCell:zi,StubHeaderCell:zi})(Dn);Ui.COLUMN_TYPE=Dn.COLUMN_TYPE,Ui.ROW_TYPE=Dn.ROW_TYPE,Ui.NODATA_ROW_TYPE=Dn.NODATA_ROW_TYPE;var Gi=function(e,t){var n=t.VirtualLayout,a=t.FixedHeader,i=t.FixedFooter,o=t.defaultEstimatedRowHeight,s=t.defaultHeight,l=function(t){function a(e){Ot(this,a);var t=zt(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e)),r=e.height,i=e.estimatedRowHeight,o=e.headTableComponent,s=e.footerTableComponent;return t.layoutRenderComponent=Object(Mt.connectProps)(n,function(){return{height:r,estimatedRowHeight:i,headTableComponent:o,footerTableComponent:s}}),t}return Dt(a,t),Pt(a,[{key:"componentDidUpdate",value:function(){this.layoutRenderComponent.update()}},{key:"render",value:function(){var t=this.props,n=(t.height,t.estimatedRowHeight,t.headTableComponent,It(t,["height","estimatedRowHeight","headTableComponent"]));return Object(r.createElement)(e,Lt({layoutComponent:this.layoutRenderComponent},n))}}]),a}(r.PureComponent);return l.defaultProps={estimatedRowHeight:o,height:s,headTableComponent:a,footerTableComponent:i},Object.values(e.components).forEach(function(t){l[t]=e[t]}),l.FixedHeader=a,l.FixedFooter=i,l}(Ui,{VirtualLayout:function(e){return Object(r.createElement)(Ur,Ra({layoutComponent:Hr,minColumnWidth:120},e))},FixedHeader:function(e){return Object(r.createElement)(Ri,Ra({use:"head"},e))},FixedFooter:function(e){return Object(r.createElement)(Ri,Ra({use:"foot"},e))},defaultEstimatedRowHeight:48,defaultHeight:530});Gi.COLUMN_TYPE=Ui.COLUMN_TYPE,Gi.ROW_TYPE=Ui.ROW_TYPE,Gi.NODATA_ROW_TYPE=Ui.NODATA_ROW_TYPE;var Hi=function(e){e.filter,e.getMessage,e.onFilter;var t=e.classes,n=e.children,a=e.className,i=(e.tableRow,e.tableColumn,e.column,e.filteringEnabled,Da(e,["filter","getMessage","onFilter","classes","children","className","tableRow","tableColumn","column","filteringEnabled"]));return Object(r.createElement)(dt.a,Ra({className:Se()(t.cell,a)},i),Object(r.createElement)("div",{className:t.flexContainer},n))};Hi.defaultProps={filter:null,onFilter:function(){},children:void 0,className:void 0,tableRow:void 0,tableColumn:void 0,column:void 0,filteringEnabled:!0};var Wi=Object(Q.withStyles)(function(e){var t=e.spacing;return{cell:{paddingRight:t.unit,paddingLeft:t.unit,"&:first-child":{paddingLeft:3*t.unit}},flexContainer:{width:"100%",display:"flex",alignItems:"center"}}},{name:"TableFilterCell"})(Hi),qi=function(e){var t=e.value,n=e.disabled,a=e.getMessage,i=e.onChange,o=e.classes,s=Da(e,["value","disabled","getMessage","onChange","classes"]);return Object(r.createElement)(wt.a,Ra({classes:{input:o.input},fullWidth:!0,disabled:n,value:t,onChange:function(e){return i(e.target.value)},placeholder:a("filterPlaceholder")},s))};qi.defaultProps={value:"",disabled:!1,onChange:function(){}};var Yi=Object(Q.withStyles)({input:{width:"100%"}},{name:"Editor"})(qi),Xi=function(e){function t(e){Sa(this,t);var n=Ia(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={opened:!1},n.setButtonRef=function(e){n.buttonRef=e},n.handleButtonClick=function(){n.setState(function(e){return{opened:!e.opened}})},n.handleMenuClose=function(){n.setState({opened:!1})},n.handleMenuItemClick=function(e){var t=n.props.onChange;n.setState({opened:!1}),t(e)},n}return La(t,e),Oa(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.value,a=t.availableValues,i=t.disabled,o=t.getMessage,s=t.iconComponent,l=t.toggleButtonComponent,u=t.classes,c=this.state.opened;return a.length?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(l,{buttonRef:this.setButtonRef,onToggle:this.handleButtonClick,disabled:i||1===a.length},Object(r.createElement)(s,{type:n})),Object(r.createElement)(ya.a,{anchorEl:this.buttonRef,open:c,onClose:this.handleMenuClose,MenuListProps:{dense:!0}},a.map(function(t){return Object(r.createElement)(ia.a,{key:t,selected:t===n,onClick:function(){return e.handleMenuItemClick(t)}},Object(r.createElement)(xa.a,null,Object(r.createElement)(s,{type:t,className:u.icon})),Object(r.createElement)(_e.a,null,o(t)))}))):null}}]),t}(r.PureComponent);Xi.defaultProps={value:void 0,availableValues:[],onChange:function(){},disabled:!1};var Zi=Object(Q.withStyles)(function(e){return{icon:{marginRight:e.spacing.unit}}},{name:"FilterSelector"})(Xi),$i=function(e){var t=e.buttonRef,n=e.onToggle,a=e.disabled,i=e.children,o=Da(e,["buttonRef","onToggle","disabled","children"]);return Object(r.createElement)(Ve.a,Ra({buttonRef:t,onClick:n,disabled:a},o),i)};$i.defaultProps={children:void 0,disabled:!1};var Ki={contains:"M6.094 19.563l-2.031 0.281c-0.646 0.094-1.13 0.266-1.453 0.516-0.302 0.24-0.453 0.646-0.453 1.219 0 0.438 0.138 0.799 0.414 1.086s0.664 0.419 1.164 0.398c0.708 0 1.281-0.24 1.719-0.719 0.427-0.49 0.641-1.125 0.641-1.906v-0.875zM8.234 24.641h-2.172v-1.641c-0.677 1.24-1.661 1.859-2.953 1.859-0.927 0-1.682-0.276-2.266-0.828-0.552-0.552-0.828-1.292-0.828-2.219 0-1.927 1.068-3.052 3.203-3.375l2.875-0.438c0-1.469-0.656-2.203-1.969-2.203-1.177 0-2.224 0.427-3.141 1.281v-2.078c1.010-0.656 2.198-0.984 3.563-0.984 2.458 0 3.687 1.302 3.687 3.906v6.719zM14.734 16.797c0.521-0.583 1.167-0.875 1.938-0.875 0.74 0 1.323 0.281 1.75 0.844 0.448 0.583 0.672 1.38 0.672 2.391 0 1.188-0.24 2.13-0.719 2.828-0.49 0.677-1.13 1.016-1.922 1.016-0.719 0-1.302-0.271-1.75-0.813-0.427-0.51-0.641-1.141-0.641-1.891v-1.266c-0.021-0.906 0.203-1.651 0.672-2.234zM16.969 24.859c1.375 0 2.443-0.521 3.203-1.562 0.781-1.042 1.172-2.427 1.172-4.156 0-1.542-0.354-2.771-1.063-3.688-0.688-0.958-1.651-1.438-2.891-1.438-1.427 0-2.531 0.693-3.313 2.078v-6.781h-2.156v15.328h2.172v-1.5c0.677 1.146 1.635 1.719 2.875 1.719zM22.266 6.125c0.135 0 0.245 0.063 0.328 0.188 0.104 0.073 0.156 0.182 0.156 0.328v22.953c0 0.125-0.052 0.24-0.156 0.344-0.083 0.115-0.193 0.172-0.328 0.172h-12.281c-0.146 0-0.266-0.057-0.359-0.172-0.115-0.115-0.172-0.229-0.172-0.344v-22.953c0-0.135 0.057-0.245 0.172-0.328 0.094-0.125 0.214-0.188 0.359-0.188h12.281zM31.531 24.141c-0.76 0.479-1.693 0.719-2.797 0.719-1.427 0-2.589-0.479-3.484-1.438-0.865-0.958-1.286-2.198-1.266-3.719 0-1.688 0.448-3.052 1.344-4.094 0.917-1.042 2.208-1.573 3.875-1.594 0.854 0 1.63 0.177 2.328 0.531v2.156c-0.677-0.531-1.391-0.792-2.141-0.781-0.938 0-1.714 0.339-2.328 1.016-0.594 0.677-0.891 1.552-0.891 2.625 0 1.042 0.297 1.88 0.891 2.516 0.521 0.615 1.25 0.922 2.188 0.922 0.813 0 1.573-0.297 2.281-0.891v2.031z",notContains:"M5.828 20.469v0.328c0 0.385-0.057 0.667-0.172 0.844-0.052 0.083-0.117 0.177-0.195 0.281s-0.174 0.224-0.289 0.359c-0.458 0.521-1.031 0.771-1.719 0.75-0.521 0-0.927-0.141-1.219-0.422-0.292-0.292-0.438-0.661-0.438-1.109 0-0.156 0.010-0.273 0.031-0.352s0.052-0.141 0.094-0.188 0.094-0.086 0.156-0.117 0.141-0.078 0.234-0.141c0.031-0.031 0.078-0.070 0.141-0.117s0.146-0.086 0.25-0.117h3.125zM14.016 18.328c0.010-0.406 0.070-0.729 0.18-0.969s0.289-0.49 0.539-0.75c0.479-0.604 1.13-0.906 1.953-0.906 0.75 0 1.344 0.292 1.781 0.875 0.198 0.25 0.349 0.495 0.453 0.734s0.172 0.578 0.203 1.016h-5.109zM19.078 20.469c-0.063 0.427-0.146 0.708-0.25 0.844-0.052 0.073-0.109 0.159-0.172 0.258l-0.219 0.352c-0.469 0.688-1.135 1.031-2 1.031-0.708 0-1.297-0.271-1.766-0.813l-0.305-0.359c-0.089-0.104-0.159-0.198-0.211-0.281-0.104-0.167-0.156-0.448-0.156-0.844v-0.188h5.078zM33.344 18.328l-6.875 0c0.031-0.198 0.070-0.372 0.117-0.523s0.107-0.284 0.18-0.398 0.154-0.224 0.242-0.328l0.305-0.344c0.604-0.688 1.391-1.031 2.359-1.031 0.771 0 1.51 0.266 2.219 0.797v-2.234c-0.75-0.333-1.552-0.5-2.406-0.5-1.667 0-2.974 0.531-3.922 1.594-0.396 0.427-0.708 0.859-0.938 1.297s-0.385 0.995-0.469 1.672h-2.719c-0.021-0.719-0.117-1.31-0.289-1.773s-0.424-0.914-0.758-1.352c-0.729-0.938-1.719-1.417-2.969-1.438-1.479 0-2.615 0.708-3.406 2.125v-6.953h-2.266v9.391h-3.75v-0.594c0-2.646-1.25-3.969-3.75-3.969-1.365 0-2.583 0.328-3.656 0.984v2.125c0.99-0.865 2.063-1.297 3.219-1.297 1.344 0 2.016 0.75 2.016 2.25l-2.953 0.125c-0.25 0.021-0.487 0.070-0.711 0.148l-0.633 0.227h-3.328v2.141h1.828l-0.281 0.594c-0.073 0.135-0.109 0.37-0.109 0.703 0 0.938 0.276 1.682 0.828 2.234 0.542 0.573 1.313 0.859 2.313 0.859 1.281 0 2.297-0.635 3.047-1.906v1.656h2.172v-4.141h3.75v4.141h2.297v-1.516c0.677 1.188 1.661 1.776 2.953 1.766 1.385 0 2.464-0.531 3.234-1.594 0.302-0.385 0.557-0.792 0.766-1.219 0.198-0.385 0.339-0.911 0.422-1.578h2.703c0.021 0.708 0.141 1.25 0.359 1.625 0.115 0.198 0.253 0.401 0.414 0.609s0.346 0.427 0.555 0.656c0.906 1 2.099 1.5 3.578 1.5 1.104 0 2.057-0.245 2.859-0.734v-2.109c-0.75 0.604-1.526 0.917-2.328 0.938-0.979 0-1.74-0.318-2.281-0.953l-0.328-0.328c-0.094-0.094-0.177-0.195-0.25-0.305s-0.13-0.234-0.172-0.375-0.073-0.315-0.094-0.523h6.906v-2.141zM33.297 5.688c0.146 0 0.266 0.047 0.359 0.141 0.104 0.104 0.156 0.229 0.156 0.375v23.484c0 0.135-0.052 0.255-0.156 0.359-0.094 0.115-0.214 0.172-0.359 0.172h-35.078c-0.135 0-0.26-0.057-0.375-0.172-0.094-0.115-0.135-0.234-0.125-0.359v-23.484c0-0.104 0.042-0.229 0.125-0.375 0.104-0.094 0.229-0.141 0.375-0.141h35.078z",startsWith:"M6.109 20.688c0 0.813-0.219 1.474-0.656 1.984-0.448 0.531-1.010 0.786-1.688 0.766-0.51 0-0.896-0.141-1.156-0.422-0.302-0.292-0.443-0.667-0.422-1.125 0-0.615 0.151-1.042 0.453-1.281 0.177-0.135 0.378-0.245 0.602-0.328s0.497-0.146 0.82-0.188l2.047-0.313v0.906zM8.203 18.063c0-2.688-1.219-4.031-3.656-4.031-1.333 0-2.51 0.339-3.531 1.016v2.141c0.917-0.885 1.948-1.328 3.094-1.328 1.333 0 2 0.766 2 2.297l-2.891 0.453c-2.115 0.333-3.161 1.516-3.141 3.547 0 0.958 0.266 1.724 0.797 2.297 0.542 0.573 1.292 0.859 2.25 0.859 1.292 0 2.26-0.641 2.906-1.922v1.688h2.172v-7.016zM14.703 16.906c0.479-0.604 1.109-0.906 1.891-0.906 0.76 0 1.344 0.297 1.75 0.891 0.438 0.615 0.656 1.443 0.656 2.484 0 1.219-0.229 2.198-0.688 2.938-0.469 0.719-1.109 1.078-1.922 1.078-0.719 0-1.286-0.281-1.703-0.844-0.448-0.542-0.672-1.208-0.672-2v-1.313c-0.010-0.938 0.219-1.714 0.688-2.328zM16.906 25.313c1.365 0 2.422-0.542 3.172-1.625 0.771-1.115 1.156-2.563 1.156-4.344 0-1.604-0.339-2.885-1.016-3.844-0.698-0.979-1.661-1.469-2.891-1.469-1.438 0-2.531 0.719-3.281 2.156v-7.078h-2.188v15.969h2.172v-1.563c0.667 1.198 1.625 1.797 2.875 1.797zM31.375 24.563c-0.75 0.5-1.672 0.75-2.766 0.75-1.427 0-2.583-0.505-3.469-1.516-0.885-0.969-1.318-2.26-1.297-3.875 0-1.74 0.464-3.161 1.391-4.266 0.927-1.063 2.198-1.604 3.813-1.625 0.844 0 1.62 0.172 2.328 0.516v2.25c-0.688-0.563-1.406-0.828-2.156-0.797-0.927 0-1.688 0.349-2.281 1.047-0.583 0.698-0.875 1.609-0.875 2.734 0 1.094 0.281 1.969 0.844 2.625 0.542 0.656 1.286 0.984 2.234 0.984 0.781 0 1.526-0.323 2.234-0.969v2.141zM22.172 5.844c0.115 0 0.224 0.052 0.328 0.156 0.094 0.125 0.141 0.25 0.141 0.375v23.844c0 0.156-0.047 0.286-0.141 0.391-0.115 0.094-0.224 0.141-0.328 0.141h-23.469c-0.125 0-0.24-0.047-0.344-0.141-0.094-0.104-0.141-0.234-0.141-0.391v-23.844c0-0.125 0.047-0.25 0.141-0.375 0.104-0.104 0.219-0.156 0.344-0.156h23.469z",endsWith:"M6.234 19.344l-2.047 0.313c-0.625 0.083-1.104 0.26-1.438 0.531-0.302 0.24-0.453 0.651-0.453 1.234 0 0.469 0.141 0.852 0.422 1.148s0.672 0.435 1.172 0.414c0.677 0 1.234-0.25 1.672-0.75 0.448-0.51 0.672-1.167 0.672-1.969v-0.922zM8.359 24.578h-2.141v-1.656c-0.667 1.26-1.656 1.891-2.969 1.891-0.938 0-1.698-0.276-2.281-0.828-0.542-0.573-0.813-1.328-0.813-2.266 0-2.021 1.063-3.188 3.188-3.5l2.891-0.484c0-1.51-0.661-2.266-1.984-2.266-1.167 0-2.214 0.443-3.141 1.328v-2.125c1.042-0.677 2.224-1.016 3.547-1.016 2.469 0 3.703 1.333 3.703 4v6.922zM14.906 16.516c0.49-0.615 1.13-0.922 1.922-0.922 0.76 0 1.339 0.297 1.734 0.891 0.438 0.615 0.656 1.438 0.656 2.469 0 1.208-0.229 2.182-0.688 2.922-0.469 0.698-1.115 1.047-1.938 1.047-0.708 0-1.276-0.276-1.703-0.828-0.458-0.552-0.688-1.214-0.688-1.984v-1.281c-0.010-0.948 0.224-1.719 0.703-2.313zM17.125 24.813c1.354 0 2.417-0.531 3.188-1.594 0.781-1.073 1.172-2.505 1.172-4.297 0-1.604-0.349-2.87-1.047-3.797-0.698-0.979-1.661-1.469-2.891-1.469-1.438 0-2.542 0.714-3.313 2.141v-7h-2.203v15.781h2.188v-1.531c0.677 1.177 1.646 1.766 2.906 1.766zM31.688 21.969c-0.698 0.635-1.453 0.953-2.266 0.953-0.958 0-1.703-0.323-2.234-0.969-0.563-0.667-0.849-1.536-0.859-2.609 0-1.115 0.297-2.016 0.891-2.703 0.594-0.698 1.359-1.047 2.297-1.047 0.76 0 1.484 0.266 2.172 0.797v-2.219c-0.708-0.344-1.49-0.516-2.344-0.516-1.625 0-2.906 0.536-3.844 1.609-0.938 1.083-1.406 2.495-1.406 4.234 0 1.594 0.438 2.875 1.313 3.844 0.885 0.979 2.052 1.469 3.5 1.469 1.083 0 2.010-0.245 2.781-0.734v-2.109zM33.188 5.563c0.104 0 0.219 0.047 0.344 0.141 0.094 0.146 0.141 0.276 0.141 0.391v23.578c0 0.146-0.047 0.281-0.141 0.406-0.125 0.094-0.24 0.141-0.344 0.141h-23.625c-0.125 0-0.24-0.047-0.344-0.141-0.094-0.135-0.135-0.271-0.125-0.406v-23.578c0-0.115 0.042-0.245 0.125-0.391 0.094-0.094 0.208-0.141 0.344-0.141h23.625z",equal:"M29.438 11.797v2.75h-26.922v-2.75h26.922zM29.438 17.406v2.75h-26.922v-2.75h26.922z",notEqual:"M16.906 11.797l3.016-6.547 2.094 1-2.547 5.547h9.969v2.75h-11.234l-1.328 2.859h12.563v2.75h-13.828l-2.875 6.281-2.094-0.984 2.438-5.297h-10.563v-2.75h11.828l1.297-2.859h-13.125v-2.75h14.391z",greaterThan:"M24.125 16.047l-14.906 8.625-1.375-2.375 10.781-6.25-10.781-6.234 1.375-2.375z",greaterThanOrEqual:"M23.031 14.328l-14.906 8.625-1.375-2.375 10.797-6.25-10.797-6.234 1.375-2.375zM23.828 15.641l1.375 2.391-14.938 8.609-1.375-2.375z",lessThan:"M22.75 7.438l1.375 2.375-10.781 6.234 10.781 6.25-1.375 2.375-14.906-8.609z",lessThanOrEqual:"M23.828 5.719l1.375 2.375-10.813 6.234 10.813 6.25-1.375 2.375-14.922-8.609zM23.047 24.266l-1.375 2.375-14.922-8.609 1.375-2.391z"},Ji=function(e){var t=e.type,n=Da(e,["type"]),a=Ki[t];return a?Object(r.createElement)(wa.a,Ra({viewBox:"0 0 32 32"},n),Object(r.createElement)("path",{d:a})):Object(r.createElement)(ka.a,n)};Ji.defaultProps={type:void 0};var Qi=Object(Mt.withComponents)({Row:vi,Cell:Wi,Editor:Yi,FilterSelector:Zi,Icon:Ji,ToggleButton:$i})(Zn);Qi.ROW_TYPE=Zn.ROW_TYPE;var eo=function(e){function t(e){Sa(this,t);var n=Ia(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={resizing:!1},n.onResizeStart=function(e){var t=e.x;n.resizeStartingX=t,n.setState({resizing:!0})},n.onResizeUpdate=function(e){var t=e.x;(0,n.props.onWidthDraft)({shift:t-n.resizeStartingX})},n.onResizeEnd=function(e){var t=e.x,r=n.props,a=r.onWidthChange;(0,r.onWidthDraftCancel)(),a({shift:t-n.resizeStartingX}),n.setState({resizing:!1})},n}return La(t,e),Oa(t,[{key:"render",value:function(){var e,t,n,a=this.props,i=a.classes,o=a.resizeHandleOpacityClass,s=a.resizeLastHandleClass,l=this.state.resizing;return Object(r.createElement)(Mt.Draggable,{onStart:this.onResizeStart,onUpdate:this.onResizeUpdate,onEnd:this.onResizeEnd},Object(r.createElement)("div",{className:Se()((e={},Pa(e,i.resizeHandle,!0),Pa(e,s,!0),Pa(e,i.resizeHandleActive,l),e))},Object(r.createElement)("div",{className:Se()((t={},Pa(t,o,!0),Pa(t,i.resizeHandleLine,!0),Pa(t,i.resizeHandleFirstLine,!0),Pa(t,i.resizeHandleLineActive,l),t))}),Object(r.createElement)("div",{className:Se()((n={},Pa(n,o,!0),Pa(n,i.resizeHandleLine,!0),Pa(n,i.resizeHandleSecondLine,!0),Pa(n,i.resizeHandleLineActive,l),n))})))}}]),t}(r.PureComponent),to=Object(Q.withStyles)(function(e){return{resizeHandle:{position:"absolute",userSelect:"none",MozUserSelect:"none",WebkitUserSelect:"none",width:2*e.spacing.unit+"px",top:0,right:"-"+e.spacing.unit+"px",height:"100%",cursor:"col-resize",zIndex:100},resizeHandleLine:{position:"absolute",backgroundColor:e.palette.primary.light,height:"50%",width:"1px",top:"25%",transition:"all linear 100ms"},resizeHandleFirstLine:{left:e.spacing.unit-1+"px"},resizeHandleSecondLine:{left:e.spacing.unit+1+"px"},resizeHandleLineActive:{left:e.spacing.unit+"px"},resizeHandleActive:{"& $resizeHandleLine":{opacity:"1",backgroundColor:e.palette.primary.light,height:"calc(100% - 4px)",top:"2px"}}}},{name:"ResizingControl"})(eo),no=function(e){function t(e){Sa(this,t);var n=Ia(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={dragging:!1},n}return La(t,e),Oa(t,[{key:"render",value:function(){var e,t=this,n=this.props,a=n.style,i=n.column,o=n.tableColumn,s=(n.showGroupingControls,n.onGroup,n.groupingEnabled,n.draggingEnabled),l=n.resizingEnabled,u=n.onWidthChange,c=n.onWidthDraft,f=n.onWidthDraftCancel,d=n.classes,p=(n.getMessage,n.tableRow,n.className),h=n.children,m=(n.showSortingControls,n.sortingDirection,n.sortingEnabled,n.onSort,n.before,Da(n,["style","column","tableColumn","showGroupingControls","onGroup","groupingEnabled","draggingEnabled","resizingEnabled","onWidthChange","onWidthDraft","onWidthDraftCancel","classes","getMessage","tableRow","className","children","showSortingControls","sortingDirection","sortingEnabled","onSort","before"])),v=this.state.dragging,g=o&&o.align||"left",y=Se()((Pa(e={},d.cell,!0),Pa(e,d.cellRight,"right"===g),Pa(e,d.cellCenter,"center"===g),Pa(e,d.cellNoUserSelect,s),Pa(e,d.cellDraggable,s),Pa(e,d.cellDimmed,v||o&&o.draft),Pa(e,d.cellNoWrap,!(o&&o.wordWrapEnabled)),e),p),b=Object(r.createElement)(dt.a,Ra({style:a,className:y,numeric:"right"===g},m),Object(r.createElement)("div",{className:d.container},h),l&&Object(r.createElement)(to,{onWidthChange:u,onWidthDraft:c,onWidthDraftCancel:f,resizeLastHandleClass:d.resizeHandle,resizeHandleOpacityClass:d.resizeHandleLine}));return s?Object(r.createElement)(Mt.DragSource,{ref:function(e){t.cellRef=e},payload:[{type:"column",columnName:i.name}],onStart:function(){return t.setState({dragging:!0})},onEnd:function(){return t.cellRef&&t.setState({dragging:!1})}},b):b}}]),t}(r.PureComponent);no.defaultProps={column:void 0,tableColumn:void 0,tableRow:void 0,style:null,showSortingControls:!1,sortingDirection:void 0,sortingEnabled:!1,onSort:void 0,showGroupingControls:!1,groupingEnabled:!1,onGroup:void 0,draggingEnabled:!1,resizingEnabled:!1,onWidthChange:void 0,onWidthDraft:void 0,onWidthDraftCancel:void 0,className:void 0,children:void 0,before:void 0};var ro=Object(Q.withStyles)(function(e){return{plainTitle:{overflow:"hidden",textOverflow:"ellipsis",lineHeight:3*e.spacing.unit+"px"},cell:{outline:"none",position:"relative",overflow:"visible",paddingRight:e.spacing.unit,paddingLeft:e.spacing.unit,"&:first-child":{paddingLeft:3*e.spacing.unit},"&:hover $resizeHandleLine":{opacity:1},"&:nth-last-child(2) $resizeHandle":{width:e.spacing.unit+"px",right:"1px"}},resizeHandle:{},resizeHandleLine:{opacity:0},"@media (pointer: fine)":{resizeHandleLine:{opacity:0},resizeHandleActive:{"& $resizeHandleLine":{opacity:1}},resizeHandle:{"&:hover $resizeHandleLine":{opacity:1}}},cellNoUserSelect:{userSelect:"none",MozUserSelect:"none",WebkitUserSelect:"none"},cellDraggable:{cursor:"pointer"},cellDimmed:{"&:after":{content:'""',position:"absolute",top:0,right:0,bottom:0,left:0,backgroundColor:e.palette.background.paper,opacity:.7,pointerEvents:"none",zIndex:400}},cellRight:{paddingLeft:e.spacing.unit,paddingRight:e.spacing.unit},cellCenter:{textAlign:"center"},container:{display:"flex",flexDirection:"row",alignItems:"center"},cellNoWrap:{whiteSpace:"nowrap"}}},{name:"TableHeaderCell"})(no),ao=function(e){e.column;var t,n=e.align,a=e.direction,i=e.children,o=e.onSort,s=e.classes,l=e.getMessage,u=e.disabled,c=e.className,f=Da(e,["column","align","direction","children","onSort","classes","getMessage","disabled","className"]);return Object(r.createElement)("div",Ra({className:Se()(s.root,c)},f),Object(r.createElement)(Kr.a,{title:l("sortingHint"),placement:"right"===n?"bottom-end":"bottom-start",enterDelay:300,classes:{tooltip:s.tooltipRoot}},Object(r.createElement)(ua.a,{active:!!a,direction:null===a?void 0:a,onClick:function(e){return function(e,t){var n=13===e.keyCode||32===e.keyCode,r=void 0===e.keyCode,a=e.metaKey||e.ctrlKey,i=(r||n)&&a?null:void 0,o=e.shiftKey||a;e.preventDefault(),t({direction:i,keepOther:o})}(e,o)},disabled:u,classes:{root:Se()((t={},Pa(t,s.sortLabelRoot,!0),Pa(t,s.sortLabelRight,"right"===n),t)),active:s.sortLabelActive}},i)))};ao.defaultProps={column:void 0,direction:void 0,disabled:!1,align:"left",className:null,children:void 0};var io=Object(Q.withStyles)(function(){return{root:{width:"100%",userSelect:"none",MozUserSelect:"none",WebkitUserSelect:"none"},tooltipRoot:{display:"block",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},sortLabelRoot:{maxWidth:"100%"},sortLabelRight:{flexDirection:"row-reverse"},sortLabelActive:{color:"inherit"}}},{name:"SortLabel"})(ao),oo=function(e){var t,n=e.disabled,a=e.onGroup,i=e.classes,o=e.className,s=Da(e,["disabled","onGroup","classes","className"]);return Object(r.createElement)("div",Ra({onClick:function(e){n||(e.stopPropagation(),a(e))},className:Se()((t={},Pa(t,i.root,!0),Pa(t,i.disabled,n),t),o)},s),Object(r.createElement)(Ea.a,null))};oo.defaultProps={disabled:!1,className:void 0};var so=Object(Q.withStyles)(function(e){return{root:{paddingLeft:0,height:3*e.spacing.unit,cursor:"pointer"},disabled:{cursor:"default",opacity:.3}}},{name:"GroupButton"})(oo),lo=function(e){var t=e.children,n=e.classes,a=e.className,i=Da(e,["children","classes","className"]);return Object(r.createElement)("span",Ra({className:Se()(n.title,a)},i),t)};lo.defaultProps={className:null,children:void 0};var uo=Object(Q.withStyles)({title:{overflow:"hidden",textOverflow:"ellipsis"}},{name:"Title"})(lo),co=function(e){e.column;var t,n=e.align,a=e.children,i=e.classes,o=e.className,s=Da(e,["column","align","children","classes","className"]);return Object(r.createElement)("div",Ra({className:Se()((t={},Pa(t,i.content,!0),Pa(t,i.alignCenter,"center"===n),Pa(t,i.alignRight,"right"===n),t),o)},s),a)};co.defaultProps={column:void 0,align:"left",className:null,children:void 0};var fo=Object(Q.withStyles)({content:{width:"100%",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},alignCenter:{justifyContent:"center"},alignRight:{justifyContent:"flex-end"}},{name:"Content"})(co),po={sortingHint:"Sort"},ho=Ga(function(e){var t=e.messages,n=Da(e,["messages"]);return Ra({messages:Ra({},po,t)},n)})(Hn);ho.propTypes={messages:Object(u.shape)({sortingHint:u.string})},ho.defaultProps={messages:{}},ho.components=Hn.components;var mo=Object(Mt.withComponents)({Cell:ro,Row:vi,Content:fo,SortLabel:io,Title:uo,GroupButton:so})(ho);mo.ROW_TYPE=Hn.ROW_TYPE;var vo=function(e){e.column,e.value;var t,n=e.children,a=e.classes,i=(e.tableRow,e.tableColumn,e.row,e.className),o=e.beforeBorder,s=Da(e,["column","value","children","classes","tableRow","tableColumn","row","className","beforeBorder"]);return Object(r.createElement)(dt.a,Ra({className:Se()((t={},Pa(t,a.cell,!0),Pa(t,a.beforeBorder,o),t),i)},s),n)};vo.defaultProps={value:void 0,column:void 0,row:void 0,children:void 0,tableRow:void 0,tableColumn:void 0,className:void 0,beforeBorder:!1};var go=Object(Q.withStyles)(function(e){return{cell:{paddingRight:e.spacing.unit,paddingLeft:e.spacing.unit,"&:first-child":{paddingLeft:3*e.spacing.unit},"&:last-child":{paddingRight:3*e.spacing.unit,borderRight:0},height:6*e.spacing.unit,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",borderBottom:Oi(e),borderRight:Oi(e)},beforeBorder:{borderLeft:Oi(e)}}},{name:"Cell"})(vo),yo=function(e){var t,n=e.component,a=e.className,i=e.classes,o=e.beforeBorder,s=Da(e,["component","className","classes","beforeBorder"]);return Object(r.createElement)(n,Ra({className:Se()((t={},Pa(t,i.headerCellBorder,!0),Pa(t,i.beforeBorder,o),t),a)},s))};yo.defaultProps={className:void 0,beforeBorder:!1};var bo=Object(Q.withStyles)(function(e){return{headerCellBorder:{borderRight:Oi(e),borderTop:"none","&:last-child":{borderRight:0},verticalAlign:"bottom",paddingBottom:2*e.spacing.unit},beforeBorder:{borderLeft:Oi(e)}}},{name:"BandedHeaderCell"})(yo),xo=Object(Q.withStyles)({emptyCell:{display:"none"}},{name:"InvisibleCell"})(function(e){var t=e.classes;return Object(r.createElement)(dt.a,{className:t.emptyCell})}),_o=function(e){var t=e.children,n=e.classes,a=e.className,i=(e.row,e.tableRow,e.tableColumn,Da(e,["children","classes","className","row","tableRow","tableColumn"]));return Object(r.createElement)(vt.a,Ra({className:Se()(n.row,a)},i),t)};_o.defaultProps={children:void 0,row:void 0,tableRow:void 0,tableColumn:void 0,className:void 0};var wo=Object(Q.withStyles)({row:{height:"auto"}},{name:"Row"})(_o);Object(Mt.withComponents)({Cell:go,Row:wo,BandedHeaderCell:bo,InvisibleCell:xo})(qn).ROW_TYPE=qn.ROW_TYPE;var To=function(e){e.column;var t,n=e.value,a=e.onValueChange,i=e.style,o=e.classes,s=e.children,l=(e.row,e.tableRow,e.tableColumn),u=e.editingEnabled,c=e.className,f=Da(e,["column","value","onValueChange","style","classes","children","row","tableRow","tableColumn","editingEnabled","className"]),d=Se()((Pa(t={},o.inputRight,l&&"right"===l.align),Pa(t,o.inputCenter,l&&"center"===l.align),t));return Object(r.createElement)(dt.a,Ra({className:Se()(o.cell,c),style:i},f),s||Object(r.createElement)(wt.a,{className:o.inputRoot,classes:{input:d},value:n||"",disabled:!u,onChange:function(e){return a(e.target.value)}}))};To.defaultProps={column:void 0,row:void 0,tableRow:void 0,tableColumn:void 0,value:"",style:null,children:void 0,className:void 0,editingEnabled:!0};var ko=Object(Q.withStyles)(function(e){return{cell:{paddingRight:e.spacing.unit,paddingLeft:e.spacing.unit},inputRoot:{width:"100%"},inputRight:{textAlign:"right"},inputCenter:{textAlign:"center"}}},{name:"EditCell"})(To),Co=Object(Mt.withComponents)({Row:vi,Cell:ko})(Kn);Co.ADDED_ROW_TYPE=Kn.ADDED_ROW_TYPE,Co.EDIT_ROW_TYPE=Kn.EDIT_ROW_TYPE;var Eo=Object(Q.withStyles)(function(e){return{button:{padding:e.spacing.unit,minWidth:40},headingCell:{whiteSpace:"nowrap",textAlign:"center",padding:"0 "+2*e.spacing.unit+"px 0 "+3*e.spacing.unit+"px"},cell:{whiteSpace:"nowrap",textAlign:"center",padding:"0 "+2*e.spacing.unit+"px 0 "+3*e.spacing.unit+"px"},alignWithRowSpan:{verticalAlign:"bottom",paddingBottom:1.25*e.spacing.unit}}},{name:"EditColumn"}),Mo=function(e){var t=e.onExecute,n=e.text,a=e.classes,i=e.className,o=Da(e,["onExecute","text","classes","className"]);return Object(r.createElement)(Et.a,Ra({color:"primary",className:Se()(a.button,i),onClick:function(e){e.stopPropagation(),t()}},o),n)};Mo.defaultProps={className:void 0};var Ao=Eo(Mo),So=function(e){var t,n=e.children,a=e.classes,i=e.className,o=(e.tableRow,e.tableColumn,e.rowSpan),s=Da(e,["children","classes","className","tableRow","tableColumn","rowSpan"]);return Object(r.createElement)(dt.a,Ra({className:Se()((t={},Pa(t,a.headingCell,!0),Pa(t,a.alignWithRowSpan,o>1),t),i),rowSpan:o},s),n)};So.defaultProps={children:void 0,className:void 0,tableRow:void 0,tableColumn:void 0,rowSpan:void 0};var Oo=Eo(So),Po=function(e){e.tableRow,e.tableColumn,e.row;var t=e.children,n=e.classes,a=e.className,i=Da(e,["tableRow","tableColumn","row","children","classes","className"]);return Object(r.createElement)(dt.a,Ra({className:Se()(n.cell,a)},i),t)};Po.defaultProps={children:void 0,className:void 0,tableRow:void 0,tableColumn:void 0,row:void 0};var Ro=Eo(Po),Lo=Ga(function(e){return Ra({width:150},e)})(er);Lo.components=er.components,Object(Mt.withComponents)({Cell:Ro,HeaderCell:Oo,Command:Ao})(Lo).COLUMN_TYPE=er.COLUMN_TYPE;var Do=Object(Q.withStyles)(function(e){return{emptyMessage:{margin:"0 auto",padding:5*e.spacing.unit+"px 0",fontFamily:e.typography.fontFamily,color:e.typography.subtitle1.color,fontSize:e.typography.subtitle1.fontSize}}},{name:"EmptyMessage"})(function(e){var t=e.getMessage,n=e.classes,a=Da(e,["getMessage","classes"]);return Object(r.createElement)(je.a,a,Object(r.createElement)("big",{className:n.emptyMessage},t("noColumns")))}),Io=(Object(Mt.withComponents)({EmptyMessage:Do})(mr),function(e){var t=e.style,n=e.getCellDimensions;return Object(r.createElement)("td",{ref:function(e){return e&&n(function(){var t=e.getBoundingClientRect();return{left:t.left,right:t.right}})},style:Ra({},t,{padding:0})})});Io.defaultProps={style:null};var zo=function(e){var t=e.className,n=e.classes,a=Da(e,["className","classes"]);return Object(r.createElement)(vi,Ra({className:Se()(n.row,t)},a))};zo.defaultProps={className:void 0};var jo=Object(Q.withStyles)(function(){return{row:{visibility:"hidden"}}},{name:"TableInvisibleRow"})(zo);Object(Mt.withComponents)({Row:jo,Cell:Io})(Mn);((function(e){function t(){return Sa(this,t),Ia(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return La(t,e),Oa(t,[{key:"render",value:function(){var e=this.props,t=e.minColumnWidth,n=Da(e,["minColumnWidth"]);return Object(r.createElement)(nr,Ra({},n,{minColumnWidth:t}))}}]),t})(r.PureComponent)).defaultProps={minColumnWidth:40};var No=function(e){var t=e.children,n=e.classes,a=e.className,i=e.style,o=Da(e,["children","classes","className","style"]);return Object(r.createElement)(je.a,Ra({style:i,className:Se()(n.toolbar,a)},o),t)};No.defaultProps={className:void 0,style:null};var Fo=Object(Q.withStyles)(function(e){return{toolbar:{borderBottom:Oi(e),flex:"none"}}},{name:"Toolbar"})(No),Bo=(Object(Mt.withComponents)({Root:Fo,FlexibleSpace:function(){return Object(r.createElement)("div",{style:{flex:"0 0 0",marginLeft:"auto"}})}})(vr),function(e){var t,n=e.visible,a=e.expanded,i=e.classes,o=e.onToggle,s=e.className,l=Da(e,["visible","expanded","classes","onToggle","className"]);return Object(r.createElement)(Ve.a,Ra({className:Se()((t={},Pa(t,i.button,!0),Pa(t,i.hidden,!n),t),s),onClick:function(e){n&&(e.stopPropagation(),o())},tabIndex:n?0:-1},l),a?Object(r.createElement)(fa.a,null):Object(r.createElement)(Ye.a,null))});Bo.defaultProps={visible:!1,expanded:!1,onToggle:function(){},className:void 0};var Vo=Object(Q.withStyles)(function(e){return{button:{marginTop:"-1px",marginBottom:"-1px",marginLeft:-e.spacing.unit,marginRight:2*e.spacing.unit,padding:e.spacing.unit},hidden:{cursor:"default",opacity:0}}})(Bo),Uo=function(e){var t=e.disabled,n=e.checked,a=e.indeterminate,i=e.onChange,o=e.classes,s=e.className,l=Da(e,["disabled","checked","indeterminate","onChange","classes","className"]);return Object(r.createElement)(ta.a,Ra({className:Se()(o.checkbox,s),checked:n,indeterminate:a,disabled:t,onClick:function(e){t||(e.stopPropagation(),i())}},l))};Uo.defaultProps={disabled:!1,checked:!1,indeterminate:!1,onChange:function(){},className:void 0};var Go=Object(Q.withStyles)(function(e){return{checkbox:{marginTop:"-1px",marginBottom:"-1px",marginRight:2*e.spacing.unit,marginLeft:2*-e.spacing.unit,padding:e.spacing.unit}}})(Uo),Ho=function(e){var t=e.level,n=e.classes;return Array.from({length:t}).map(function(e,t){return Object(r.createElement)("span",{key:t,className:n.indent})})};Ho.defaultProps={level:0};var Wo=Object(Q.withStyles)(function(e){return{indent:{marginLeft:3*e.spacing.unit}}})(Ho),qo=function(e){var t=e.children,n=e.classes,a=e.className,i=Da(e,["children","classes","className"]);return Object(r.createElement)("div",Ra({className:Se()(Pa({},n.content,!0),a)},i),t)};qo.defaultProps={children:void 0,className:void 0};var Yo=Object(Q.withStyles)(function(){return{content:{width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}})(qo),Xo=function(e){e.column,e.value;var t=e.children,n=e.classes,a=(e.tableRow,e.tableColumn,e.row,e.className),i=Da(e,["column","value","children","classes","tableRow","tableColumn","row","className"]);return Object(r.createElement)(dt.a,Ra({className:Se()(Pa({},n.cell,!0),a)},i),Object(r.createElement)("div",{className:n.container},t))};Xo.defaultProps={value:void 0,column:void 0,row:void 0,children:void 0,tableRow:void 0,tableColumn:void 0,className:void 0};var Zo=Object(Q.withStyles)(function(e){return{cell:{paddingRight:e.spacing.unit,paddingLeft:e.spacing.unit,"&:first-child":{paddingLeft:3*e.spacing.unit}},container:{display:"flex",flexDirection:"row",alignItems:"center"}}})(Xo),$o=(Object(Mt.withComponents)({Cell:Zo,Content:Yo,Indent:Wo,ExpandButton:Vo,Checkbox:Go})(Cr),function(e){var t=e.onValueChange,n=e.value,a=e.getMessage,i=Da(e,["onValueChange","value","getMessage"]);return Object(r.createElement)(wt.a,Ra({onChange:function(e){return t(e.target.value)},value:n,type:"text",placeholder:a("searchPlaceholder")},i,{startAdornment:Object(r.createElement)(Aa.a,{position:"start"},Object(r.createElement)(ka.a,null))}))});$o.defaultProps={value:""};var Ko=Object(Q.withStyles)(function(e){return{root:{display:"flex",alignItems:"center",color:e.palette.action.active}}})($o),Jo=(Object(Mt.withComponents)({Input:Ko})(Ar),function(e){function t(){return Sa(this,t),Ia(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return La(t,e),Oa(t,[{key:"render",value:function(){var e,t=this.props,n=t.component,a=t.side,i=t.showLeftDivider,o=t.showRightDivider,s=t.className,l=t.classes,u=t.style,c=t.position,f=Da(t,["component","side","showLeftDivider","showRightDivider","className","classes","style","position"]);return Object(r.createElement)(n,Ra({className:Se()((e={},Pa(e,l.fixedCell,!0),Pa(e,l.dividerLeft,i),Pa(e,l.dividerRight,o),e),s),style:Ra({},u,Pa({},a,c))},f))}}]),t}(r.PureComponent));Jo.defaultProps={className:void 0,style:null,showLeftDivider:!1,showRightDivider:!1,position:void 0};var Qo=Object(Q.withStyles)(function(e){return{fixedCell:{backgroundColor:e.palette.background.paper,position:"sticky",zIndex:300},dividerRight:{borderRight:"1px solid "+e.palette.divider},dividerLeft:{borderLeft:"1px solid "+e.palette.divider}}},{name:"TableFixedCell"})(Jo),es=function(e){var t=e.className,n=e.classes,a=Da(e,["className","classes"]);return Object(r.createElement)(zi,Ra({className:Se()(n.cell,t)},a))};es.defaultProps={className:void 0};var ts=Object(Q.withStyles)(function(){return{cell:{border:0}}},{name:"TableBorderlessStubCell"})(es),ns=(Object(Mt.withComponents)({Cell:Qo,ListenerRow:jo,ListenerCell:function(e){var t=e.listen,n=e.onSizeChange,a=Da(e,["listen","onSizeChange"]);return t?Object(r.createElement)(Mt.Sizer,Ra({containerComponent:ts,onSizeChange:n},a)):Object(r.createElement)(ts,a)}})(Rr),function(e){var t=e.children,n=e.classes,a=e.className,i=Da(e,["children","classes","className"]);return Object(r.createElement)("div",Ra({className:Se()(Pa({},n.item,!0),a)},i),t)});ns.defaultProps={children:void 0,className:void 0};var rs=Object(Q.withStyles)(function(e){return{item:{fontWeight:e.typography.fontWeightMedium,color:e.palette.text.primary,fontSize:e.typography.pxToRem(13),margin:e.spacing.unit+"px 0"}}})(ns),as=Object(Mt.withComponents)({TotalRow:vi,GroupRow:vi,TreeRow:vi,TotalCell:Di,GroupCell:Di,TreeCell:Di,TableTreeCell:Zo,TableTreeContent:Yo,TableTreeIndent:Wo,Item:rs})(Vr);as.TREE_ROW_TYPE=Vr.TREE_ROW_TYPE,as.GROUP_ROW_TYPE=Vr.GROUP_ROW_TYPE,as.TOTAL_ROW_TYPE=Vr.TOTAL_ROW_TYPE;var is=n(135);function os(e){return(os="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ss(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ls(e,t){return!t||"object"!==os(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function us(e){return(us=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function cs(e,t){return(cs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var fs=["equal","notEqual","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual"],ds=function(e){return{numericValue:{fontWeight:e.typography.fontWeightMedium},numericInput:{width:"100%"},button:{margin:e.spacing.unit}}},ps=Object(Q.withStyles)(ds)(function(e){var t=e.onValueChange,n=e.classes,r=e.value;return a.a.createElement(wt.a,{type:"number",classes:{input:n.numericInput},fullWidth:!0,value:r,inputProps:{min:0,placeholder:"Filter..."},onChange:function(e){var n=e.target.value;""!==n.trim()?t(parseFloat(n)):t(void 0)}})}),hs=Object(Q.withStyles)(ds)(function(e){var t=e.value,n=e.classes;return a.a.createElement("span",{className:n.numericValue},t)}),ms=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=ls(this,us(t).call(this,e))).dgeTableURL="".concat(re,"/study/").concat(n.props.studyName)+"/design/".concat(n.props.designName)+"/contrast/".concat(n.props.contrastName)+"/dge/".concat(n.props.dgeMethodName,"/tbl"),n.state={columns:[{name:"FeatureIndex",title:"Feature Index"},{name:"Name",title:"Feature Name"},{name:"GeneSymbol",title:"GeneSymbol"},{name:"AveExprs",title:"AveExprs"},{name:"Statistic",title:"Statistic"},{name:"LogFC",title:"LogFC"},{name:"PValue",title:"PValue"},{name:"FDR",title:"FDR"}],numericColumns:["PValue","FDR","LogFC","AveExprs","Statistic"],pageSizes:[50,100,200],rows:[],selection:[],loading:!0},n.changeSelection=function(e){n.setState({selection:e}),console.log(n.state)},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cs(e,t)}(t,a.a.Component),function(e,t,n){t&&ss(e.prototype,t),n&&ss(e,n)}(t,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat(this.dgeTableURL,"/json")).then(function(e){return e.json()}).then(function(t){e.setState({loading:!1,rows:t.data})})}},{key:"render",value:function(){var e=this.props,t=this.state,n=t.rows,r=t.selection,i=t.columns,o=t.pageSizes,s=t.numericColumns,l=t.loading;return a.a.createElement("div",null,a.a.createElement(Na,{rows:n,columns:i},a.a.createElement(xn,{defaultSorting:[{columnName:"LogFC",direction:"asc"}]}),a.a.createElement(is.FilteringState,null),a.a.createElement(fn,null),a.a.createElement(Xt,null),a.a.createElement(fn,{selection:r,onSelectionChange:this.changeSelection}),a.a.createElement(Yt,null),a.a.createElement(wn,null),a.a.createElement(en,null),a.a.createElement(bn,null),a.a.createElement(fr,{formatterComponent:hs,editorComponent:ps,availableFilterOperations:fs,for:s}),a.a.createElement(Ka,null),a.a.createElement(Ui,null),a.a.createElement(Si,{showSelectAll:!0}),a.a.createElement(mo,{showSortingControls:!0}),a.a.createElement(Qi,{showFilterSelector:!0}),a.a.createElement(ii,{pageSizes:o})),a.a.createElement(Ce.a,{container:!0,spacing:24},a.a.createElement(Ce.a,{item:!0},a.a.createElement(Et.a,{variant:"contained",className:e.button,href:"".concat(this.dgeTableURL,"/csv")},"Download All")),a.a.createElement(Ce.a,{item:!0},a.a.createElement(Et.a,{variant:"contained",className:e.button,disabled:0===this.state.selection.length},"Download Selected"))),l&&a.a.createElement(kt.a,null))}}]),t}();ms.propTypes={classes:c.a.object.isRequired,studyName:c.a.string.isRequired,designName:c.a.string.isRequired,contrastName:c.a.string.isRequired,dgeMethodName:c.a.string.isRequired};var vs=Object(Q.withStyles)(ds)(ms),gs=n(71),ys=n.n(gs);function bs(e){return(bs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _s(e,t){return!t||"object"!==bs(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ws(e){return(ws=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ts(e,t){return(Ts=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ks=function(e,t){return e.reduce(function(e,n){return(e[n[t]]=e[n[t]]||[]).push(n),e},{})},Cs=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=_s(this,ws(t).call(this,e))).state={loaded:!1,pcaData:[],groupColumns:[],currentGroupColumn:null},n.handleChange=function(e){n.setState({currentGroupColumn:e.target.value})},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ts(e,t)}(t,a.a.Component),function(e,t,n){t&&xs(e.prototype,t),n&&xs(e,n)}(t,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat(re,"/study/").concat(this.props.studyName)+"/design/".concat(this.props.designName)+"/contrast/".concat(this.props.contrastName)+"/dge/".concat(this.props.dgeMethodName,"/plot/pca")).then(function(e){return e.json()}).then(function(t){var n=e.props.sampleAnnotation.schema.fields.map(function(e){return e.name});n.splice(n.indexOf("index"),1),n.splice(n.indexOf("SAMPLE"),1),e.setState({loaded:!0,pcaData:t,groupColumns:n,currentGroupColumn:n[0]})})}},{key:"render",value:function(){var e=this;if(this.state.loaded){var t=function(){var t=e.state.pcaData,n=ks(e.props.sampleAnnotation.data,e.state.currentGroupColumn),r=ks(t.data,"name"),i=[];for(var o in n)if(n.hasOwnProperty(o)){var s={x:n[o].map(function(e){return r[e.SAMPLE][0].x}),y:n[o].map(function(e){return r[e.SAMPLE][0].y}),text:n[o].map(function(e){return r[e.SAMPLE][0].name}),mode:"markers",type:"scatter",name:o};i.push(s)}return{v:a.a.createElement("div",{style:{display:"inline-block"}},a.a.createElement(ys.a,{data:i,layout:t.layout})," ",a.a.createElement("br",null),a.a.createElement(sa.a,{style:{marginLeft:"120px"},value:e.state.currentGroupColumn,name:"currentGroupColumn",onChange:e.handleChange},e.state.groupColumns.map(function(e){return a.a.createElement(ia.a,{key:e,value:e},e)})))}}();if("object"===bs(t))return t.v}return a.a.createElement(kt.a,null)}}]),t}();function Es(e){return(Es="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ms(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function As(e,t){return!t||"object"!==Es(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ss(e){return(Ss=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Os(e,t){return(Os=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Cs.propTypes={studyName:c.a.string.isRequired,sampleAnnotation:c.a.object.isRequired,designName:c.a.string.isRequired,contrastName:c.a.string.isRequired,dgeMethodName:c.a.string.isRequired};var Ps=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=As(this,Ss(t).call(this,e))).state={loaded:!1,renderedComp:[]},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Os(e,t)}(t,a.a.Component),function(e,t,n){t&&Ms(e.prototype,t),n&&Ms(e,n)}(t,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat(re,"/study/").concat(this.props.studyName)+"/design/".concat(this.props.designName)+"/contrast/".concat(this.props.contrastName)+"/dge/".concat(this.props.dgeMethodName,"/plot/volcano")).then(function(e){return e.json()}).then(function(t){var n=a.a.createElement(ys.a,{data:t.data,layout:t.layout});e.setState({loaded:!0,renderedComp:n})})}},{key:"render",value:function(){return this.state.loaded?this.state.renderedComp:a.a.createElement(kt.a,null)}}]),t}();function Rs(e){var t=e.classes,n=e.study,r=e.sampleAnnotation,i=e.design,o=e.contrast,s=e.contrastColumn,l=e.dgeResult,u=e.studyBaseURL;return a.a.createElement(nt,{study:n,basePath:u},a.a.createElement(Te.a,{className:t.card},a.a.createElement(Me.a,null,a.a.createElement(te.a,{variant:"h5",component:"h2"},"DGE Table generated by ",l.MethodName),a.a.createElement(vs,{studyName:n.Name,designName:i.Name,contrastName:s.Name,dgeMethodName:l.MethodName}))),a.a.createElement(Te.a,{className:t.card},a.a.createElement(Me.a,null,a.a.createElement(te.a,{variant:"h5",component:"h2"},"Plots"),a.a.createElement(Cs,{studyName:n.Name,sampleAnnotation:r,designName:i.Name,contrastName:o.Name,dgeMethodName:l.MethodName}),a.a.createElement(Ps,{studyName:n.Name,designName:i.Name,contrastName:s.Name,dgeMethodName:l.MethodName}))))}Rs.propTypes={classes:c.a.object.isRequired,study:c.a.object.isRequired,design:c.a.object.isRequired,contrast:c.a.object.isRequired,contrastColumn:c.a.object.isRequired,dgeResult:c.a.object.isRequired,sampleAnnotation:c.a.object.isRequired,studyBaseURL:c.a.string.isRequired};var Ls=Object(Q.withStyles)({card:{minWidth:275,marginBottom:12}})(Rs);function Ds(e){var t=e.classes,n=e.study,r=(e.studyAnnotation,e.contrast,e.studyBaseURL);return a.a.createElement(nt,{study:n,basePath:r},a.a.createElement(Te.a,{className:t.card},a.a.createElement(Me.a,null,a.a.createElement(te.a,{variant:"h5",component:"h2"},"TODO GSE"))))}Ds.propTypes={classes:c.a.object.isRequired,study:c.a.object.isRequired,sampleAnnotation:c.a.object.isRequired,studyBaseURL:c.a.string.isRequired};var Is=Object(Q.withStyles)({card:{minWidth:275,marginBottom:12}})(Ds);function zs(e){var t=e.classes,n=e.study,r=e.contrast,i=e.studyBaseURL;return a.a.createElement(nt,{study:n,basePath:i},a.a.createElement(Te.a,{className:t.card},a.a.createElement(Me.a,null,a.a.createElement(te.a,{variant:"h5",component:"h2"},"About the contract: ",r.Name),a.a.createElement(Ce.a,{container:!0,spacing:24},a.a.createElement(Ce.a,{item:!0,xs:6},a.a.createElement(ge.a,null,a.a.createElement(be.a,null,a.a.createElement(_e.a,{primary:"Description",secondary:r.Description})))),a.a.createElement(Ce.a,{item:!0,xs:6},a.a.createElement(ge.a,null,a.a.createElement(be.a,null,a.a.createElement(_e.a,{primary:"Created by",secondary:r.CreatedBy}))))))))}zs.propTypes={classes:c.a.object.isRequired,study:c.a.object.isRequired,contrast:c.a.object.isRequired,studyBaseURL:c.a.string.isRequired};var js=Object(Q.withStyles)({card:{minWidth:275,marginBottom:12}})(zs);function Ns(e){return(Ns="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bs(e,t){return!t||"object"!==Ns(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Vs(e){return(Vs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Us(e,t){return(Us=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Gs=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Bs(this,Vs(t).call(this,e))).state={studyComp:[]},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Us(e,t)}(t,a.a.Component),function(e,t,n){t&&Fs(e.prototype,t),n&&Fs(e,n)}(t,[{key:"render",value:function(){var e=this.props,t=e.study,n=e.sampleAnnotation,r=e.design,i=e.contrast,o=e.contrastColumn,s=e.studyBaseURL,l=e.contrastBaseURL;return a.a.createElement(Y,null,a.a.createElement(J,{exact:!0,path:"".concat(l,"/"),render:function(){return a.a.createElement(js,{study:t,sampleAnnotation:n,contrast:i,studyBaseURL:s})}}),i.DGEmodel.map(function(e){return a.a.createElement(J,{key:e.MethodName,exact:!0,path:"".concat(l,"/dge/").concat(e.MethodName),render:function(){return a.a.createElement(Ls,{study:t,sampleAnnotation:n,design:r,contrast:i,contrastColumn:o,dgeResult:e,studyBaseURL:s})}})}),i.GSEresult.map(function(e){return a.a.createElement(J,{key:"".concat(e.DGEMethodName,"_").concat(e.GSEMethodName),exact:!0,path:"".concat(l,"/dge/").concat(e.DGEMethodName,"/gse/").concat(e.GSEMethodName),render:function(){return a.a.createElement(Is,{study:t,sampleAnnotation:n,contrast:i,studyBaseURL:s})}})}),a.a.createElement(J,{component:ne}))}}]),t}();Gs.propTypes={study:c.a.object.isRequired,sampleAnnotation:c.a.object.isRequired,design:c.a.object.isRequired,contrast:c.a.object.isRequired,contrastColumn:c.a.object.isRequired,studyBaseURL:c.a.string.isRequired,contrastBaseURL:c.a.string.isRequired};var Hs=Gs;function Ws(e){return(Ws="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ys(e,t){return!t||"object"!==Ws(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Xs(e){return(Xs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Zs(e,t){return(Zs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var $s=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Ys(this,Xs(t).call(this,e))).state={studyComp:[]},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zs(e,t)}(t,a.a.Component),function(e,t,n){t&&qs(e.prototype,t),n&&qs(e,n)}(t,[{key:"render",value:function(){var e=this.props,t=e.study,n=e.sampleAnnotation,r=e.design,i=e.studyBaseURL,o=e.designBaseURL;return a.a.createElement(Y,null,a.a.createElement(J,{exact:!0,path:"".concat(o,"/"),render:function(){return a.a.createElement(xt,{study:t,sampleAnnotation:n,design:r,basePath:i})}}),r.Contrast.map(function(e){return e.ContrastColumn.map(function(s){return a.a.createElement(J,{key:s.Name,path:"".concat(o,"/contrast/").concat(s.Name),render:function(){return a.a.createElement(Hs,{study:t,sampleAnnotation:n,design:r,contrast:e,contrastColumn:s,studyBaseURL:i,contrastBaseURL:"".concat(o,"/contrast/").concat(s.Name)})}})})}),a.a.createElement(J,{component:ne}))}}]),t}();$s.propTypes={study:c.a.object.isRequired,sampleAnnotation:c.a.object.isRequired,design:c.a.object.isRequired,studyBaseURL:c.a.string.isRequired,designBaseURL:c.a.string.isRequired};var Ks=$s;function Js(e){return(Js="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qs(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function el(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tl(e,t){return!t||"object"!==Js(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function nl(e){return(nl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rl(e,t){return(rl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var al=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=tl(this,nl(t).call(this,e))).state={studyComp:[]},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rl(e,t)}(t,a.a.Component),function(e,t,n){t&&el(e.prototype,t),n&&el(e,n)}(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.studyName,r=t.url;Promise.all([fetch("".concat(re,"/study/").concat(n)),fetch("".concat(re,"/study/").concat(n,"/sample_annotation/json"))]).then(function(e){var t=Qs(e,2),n=t[0],r=t[1];return Promise.all([n.json(),r.json()])}).then(function(t){var n=Qs(t,2),i=n[0],o=n[1],s=a.a.createElement(Y,null,a.a.createElement(J,{exact:!0,path:"".concat(r,"/"),render:function(){return a.a.createElement(at,{study:i,sampleAnnotation:o,basePath:r})}}),a.a.createElement(J,{exact:!0,path:"".concat(r,"/expression"),render:function(){return a.a.createElement(ot,{study:i,sampleAnnotation:o,basePath:r})}}),i.Design.map(function(e){return a.a.createElement(J,{key:e.Name,path:"".concat(r,"/design/").concat(e.Name),render:function(){return a.a.createElement(Ks,{study:i,sampleAnnotation:o,design:e,studyBaseURL:r,designBaseURL:"".concat(r,"/design/").concat(e.Name)})}})}),a.a.createElement(J,{component:ne}));e.setState({studyComp:s})})}},{key:"render",value:function(){return this.state.studyComp}}]),t}();al.propTypes={studyName:c.a.string.isRequired,url:c.a.string.isRequired};var il=function(e){var t=e.match;return a.a.createElement(al,{studyName:t.params.studyName,url:t.url})};function ol(e){return(ol="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ll(e,t){return!t||"object"!==ol(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ul(e){return(ul=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function cl(e,t){return(cl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var fl=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=ll(this,ul(t).call(this,e))).state={hasError:!1,error:null,errorInfo:null},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cl(e,t)}(t,a.a.Component),function(e,t,n){t&&sl(e.prototype,t),n&&sl(e,n)}(t,[{key:"componentDidCatch",value:function(e,t){this.setState({hasError:!0,error:e,errorInfo:t})}},{key:"render",value:function(){return this.state.hasError?a.a.createElement("div",null,a.a.createElement("h1",null,"Something went wrong."),a.a.createElement("details",{open:!0,style:{whiteSpace:"pre-wrap"}},this.state.error&&this.state.error.toString(),a.a.createElement("br",null),this.state.errorInfo.componentStack)):this.props.children}}]),t}(),dl=Object(Q.createMuiTheme)({typography:{useNextVariants:!0}});o.a.render(a.a.createElement(function(){return a.a.createElement(Q.MuiThemeProvider,{theme:dl},a.a.createElement(fl,null,a.a.createElement(B,null,a.a.createElement("div",null,a.a.createElement(Y,null,a.a.createElement(J,{exact:!0,path:"/",component:me}),a.a.createElement(J,{exact:!0,path:"/study",component:me}),a.a.createElement(J,{path:"/study/:studyName",component:il}),a.a.createElement(J,{component:ne}))))))},null),document.getElementById("app"))}]);